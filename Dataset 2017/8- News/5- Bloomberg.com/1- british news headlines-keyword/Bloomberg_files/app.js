!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return r(n?n:e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";t.exports={APP_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.45/app.js",VENDOR_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.45/vendor.js",APP_CSS:"//cdn.gotraffic.net/projector/v0.11.45/bvp.css",CONFIG_OVERWRITES:"//cdn.gotraffic.net/projector/latest/assets/config/config.min.json?v=1",SWF_FILE_NAME_INSIGHTS:"//cdn.gotraffic.net/projector/v0.11.45/BloombergInsightsPlayer.swf",SKIN_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.45/skin.png",BUFFERING_ANIMATION_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.45/assets/images/loading_spinner.gif",PERSONALIZATION_API:"//personalization.bloomberg.com"}},{}],2:[function(e,t,n){"use strict";t.exports={version:"v0.11.45",assetRoot:"cdn.gotraffic.net/projector/v0.11.45",latestRoot:"cdn.gotraffic.net/projector/latest"}},{}],3:[function(e,t,n){"use strict";var i=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(i,"\\$&")}},{}],4:[function(e,t,n){t.exports={Play:"Play",Pause:"Pause","Current Time":"Current Time","Duration Time":"Duration Time","Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:"LIVE",Loaded:"Loaded",Progress:"Progress",Fullscreen:"Fullscreen","Non-Fullscreen":"Non-Fullscreen",Mute:"Mute",Unmute:"Unmute","Playback Rate":"Playback Rate",Subtitles:"Subtitles","subtitles off":"subtitles off",Captions:"Captions","captions off":"captions off",Chapters:"Chapters","Close Modal Dialog":"Close Modal Dialog",Descriptions:"Descriptions","descriptions off":"descriptions off","You aborted the media playback":"An error has occurred.  Reload the web page or use another browser.\n\nError 1","A network error caused the media download to fail part-way.":"An error has occurred.  Reload the web page or use another browser.\n\nError 2","The media could not be loaded, either because the server or network failed or because the format is not supported.":"An error has occurred.  Reload the web page or use another browser.\n\nError 3","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"An error has occurred.  Reload the web page or use another browser.\n\nError 4","No compatible source was found for this media.":"An error has occurred.  Reload the web page or use another browser.\n\nError 5","Play Video":"Play Video",Close:"Close","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected"}},{}],5:[function(e,t,n){t.exports={US:{id:"LIVE_US",title:"LIVE_US",live:1,form_type:"Live U.S.",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"79",cdns:[{weight:1,name:"bvp_us_east_fastly",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/live/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/live/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/live/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/live/backup.m3u8",type:"application/x-mpegURL"}]}]},ASIA:{id:"LIVE_ASIA",title:"LIVE_ASIA",live:1,form_type:"Live Asia",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"81",cdns:[{weight:1,name:"bvp_asia_northeast_fastly",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/asia/live/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/asia/live/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/asia/live/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/asia/live/backup.m3u8",type:"application/x-mpegURL"}]}]},EU:{id:"LIVE_EU",title:"LIVE_EU",live:1,form_type:"Live Europe",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"80",cdns:[{weight:1,name:"bvp_eu_west_fastly",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/europe/live/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/europe/live/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/europe/live/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/europe/live/backup.m3u8",type:"application/x-mpegURL"}]}]},EVENT:{id:"LIVE_EVENT",title:"LIVE_EVENT",live:1,form_type:"Live Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"82",cdns:[{weight:1,name:"bvp_us_east_fastly",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/event/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/event/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/event/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/event/backup.m3u8",type:"application/x-mpegURL"}]}]},EMEA_EVENT:{id:"LIVE_EMEA_EVENT",title:"LIVE_EMEA_EVENT",live:1,form_type:"Live EMEA Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"83",cdns:[{weight:1,name:"bvp_eu_west_fastly",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/europe/event/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/europe/event/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/europe/event/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/europe/event/backup.m3u8",type:"application/x-mpegURL"}]}]},ASIA_EVENT:{id:"LIVE_ASIA_EVENT",title:"LIVE_ASIA_EVENT",live:1,form_type:"Live Asia Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"84",cdns:[{weight:1,name:"bvp_asia_northeast_fastly",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/asia/event/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/asia/event/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/asia/event/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/asia/event/backup.m3u8",type:"application/x-mpegURL"}]}]},US_MINI:{id:"LIVE_US_MINI",title:"LIVE_US_MINI",live:1,form_type:"Live US Mini",player_type:"mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",cdns:[{weight:1,name:"fastly_ssl_cdn",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/mini/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/mini/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/mini/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/mini/backup.m3u8",type:"application/x-mpegURL"}]}]},ASIA_MINI:{id:"LIVE_ASIA_MINI",title:"LIVE_ASIA_MINI",live:1,form_type:"Live Asia Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"fastly_ssl_cdn",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/asia/mini/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/asia/mini/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/asia/mini/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/asia/mini/backup.m3u8",type:"application/x-mpegURL"}]}]},EU_MINI:{id:"LIVE_EU_MINI",title:"LIVE_EU_MINI",live:1,form_type:"Live Europe Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:1,name:"fastly_ssl_cdn",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/europe/mini/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/europe/mini/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/europe/mini/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/europe/mini/backup.m3u8",type:"application/x-mpegURL"}]}]},RADIO:{id:"LIVE_RADIO",title:"LIVE_RADIO",live:1,form_type:"Live Radio",poster:"https://assets.bwbx.io/business/public/images/radio-splash-9269acddc2.jpg",player_type:"radio",cdns:[{weight:1,name:"fastly_ssl_cdn",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/radio/bbr/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/radio/bbr/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/radio/bbr/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/radio/bbr/backup.m3u8",type:"application/x-mpegURL"}]}]},POLITICS:{id:"LIVE_POLITICS",title:"LIVE_POLITICS",live:1,form_type:"Live Politics",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cdns:[{weight:1,name:"fastly_ssl_cdn",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/politics/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/fastly/us/politics/backup.m3u8",type:"application/x-mpegURL"}]},{weight:0,name:"cloudfront_ssl",streams:[{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/politics/primary.m3u8",type:"application/x-mpegURL"},{url:"https://cdn-videos.akamaized.net/btv/zixi/cloudfront/us/politics/backup.m3u8",type:"application/x-mpegURL"}]}]}}},{}],6:[function(e,t,n){t.exports={techOrder:["html5","flash"],hlsjs:{hlsConfig:{abrBandWidthFactor:.9,abrBandWidthUpFactor:.8,debug:!1,fragLoadingMaxRetry:4,fragLoadingRetryDelay:100,levelLoadingMaxRetry:4,levelLoadingRetryDelay:100,manifestLoadingMaxRetry:4,manifestLoadingRetryDelay:100,autoStartLoad:!1,liveSyncDurationCount:2,maxBufferLength:30,maxMaxBufferLength:60,maxBufferSize:12e6}},flash:{flashVars:{"controls.fullscreen":!0,"controls.popout":!1,hls_debug:!1,hls_minbufferlength:-1,"js.events.callback":"onPlayerEvent","js.playback.callback":"onPlaybackStatusChange","module.com.bloomberg.player.ads::LiveStreamAdSensor":"enabled","module.com.bloomberg.player.captions::Captions":"enabled","module.com.bloomberg.player.chrome::Chrome":"enabled","module.com.bloomberg.player.js::EventBridge":"enabled","module.com.bloomberg.player.js::JsMediaController":"autoload","module.com.bloomberg.player.js::UserPreferencesStore":"enabled","module.com.bloomberg.player.media::MediaContainer":"enabled","module.com.bloomberg.player.media::MediaController":"enabled","module.com.bloomberg.player.media::MediaLoader":"enabled","module.com.bloomberg.player.reporting::ConvivaInsights":"enabled","module.com.bloomberg.player.reporting::Youbora":"enabled","youbora.account":"bloomberg"},params:{wmode:"opaque",allowscriptaccess:"always",bgcolor:"#000000",quality:"high",allowfullscreen:!0}},html5:{nativeTextTracks:!1},ad_code_prefix:"",ad_midroll_max_duration:9e4,ad_midroll_min_duration:1e3,ad_tag:"",ad_tag_gpt_midroll:!1,ad_tag_gpt_overlay:!1,ad_tag_gpt_preroll:!1,ad_tag_midroll:"",ad_tag_overlay:"",ad_vast_overlay_vertical_offset_from_bottom_full_screen:175,ad_vast_overlay_vertical_offset_from_bottom_normal_screen:135,ads_live_per_block:3,ads_live_playback_delay:4,ads_max_retries_midroll:8,ads_max_retries_preroll:8,ads_playback_timeout:3e3,ads_vast_overlay_attribution:"Advertisement",ads_vast_overlay_delay:5e3,ads_vast_overlay_fade:15e3,ads_vast_overlay_height:80,ads_vast_overlay_timeout:1e4,ads_vast_overlay_width:480,ads_vast_timeout:3e3,adAlmostFinishedThreshold:2,auto_setup:!0,autoplay:!0,comscore_ns_site:"bloomberg-stream-test",comscore_page_level_tags:{},controls:!0,conviva_account:"c3.Bloomberg",conviva_account_test:"c3.Bloomberg-Test",conviva_custom_tags:{},conviva_customer_number:"b9b590b09f9c4b355417195cf6c9a453b6dc2b88",conviva_customer_number_test:"9986c3d2898d89d91f8cc7355760ddf5fe725af0",conviva_service_url:"https://livepass.conviva.com",conviva_service_url_test:"https://bloomberg-test2.testonly.conviva.com",disable_companion_ads:!1,disable_overlay_companion_ads:!1,forcePosterMobile:!0,live:!1,log_debug:!0,maxRetries:3,module_ad_player:"enabled",nativeControlsForTouch:!0,persistTextTrackSettings:!0,poster_as_slate:!1,preroll_ads_per_block:1,preroll_ads_playback_delay:0,start_muted:!1,start_time:0,ui_autohide_timeout:2e3,use_activity_out:!0,use_bvp_volume_button:!0,use_captions:!0,use_clickable_ads:!0,use_comscore:!0,use_conviva_html5:!0,use_js_ads:!0,use_moat:!0,use_parsely:!0,use_persist_listeners:!0,use_playback_outro:!0,use_poster_slate:!0,use_recover_hls:!0,use_smooth_scrub:!0,use_stream_watchdog:!0,use_title_bar:!0,use_google_tag_manager:!1,google_tag_manager_data_layer_id:"dataLayer",controlBar:{children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","captionsButton","shareButton","fullscreenToggle"]},AdControlsComponent:{children:["adBufferingSpinner","adPlayButton","adTagContainer","adControlBar"]},PlaybackOutro:{message:"Play Again"},TitleBar:{},ShareOverlay:{},plugins:{ActivityOverridePlugin:{},ClosedCaptionsPlugin:{},ConvivaInsightsPlugin:{},GoogleAdsPlugin:{},MediabongPlugin:{},MoatAdViewabilityPlugin:{},OverrideVideojsVolumeButton:{},ParselyPlugin:{},PersistListeners:{},PlaybackOutroPlugin:{},PosterPlugin:{},RecoverHlsError:{},ShareControl:{},SmoothScrubbingPlugin:{},TitleBarPlugin:{},GoogleTagManagerPlugin:{},ComscoreStreamSensePlugin:{c4:"BBG",c5:"02"},StreamWatchdogPlugin:{liveStreamTimeout:1e4,vodStreamTimeout:8e3}}}},{}],7:[function(e,t,n){"use strict";e("./lib/google-ads/videojs-google-ads"),e("./videojs-plugins/closed-captions/videojs-closed-captions-control"),e("./videojs-plugins/conviva/videojs-conviva-control"),e("./videojs-plugins/hls/videojs-hls-bridge"),e("./videojs-plugins/hls/videojs-recover-hls-error"),e("./videojs-plugins/share-control-js/videojs-share-control"),e("./videojs-plugins/share-control-js/videojs-share-overlay"),e("./videojs-plugins/videojs-activity-override"),e("./videojs-plugins/videojs-comscore-stream-sense"),e("./videojs-plugins/videojs-mediabong"),e("./videojs-plugins/videojs-moat-ad-viewability"),e("./videojs-plugins/videojs-parsely"),e("./videojs-plugins/videojs-persist-listeners"),e("./videojs-plugins/videojs-playback-outro"),e("./videojs-plugins/videojs-poster"),e("./videojs-plugins/videojs-smooth-scrubbing"),e("./videojs-plugins/videojs-stream-watchdog"),e("./videojs-plugins/videojs-title-bar"),e("./videojs-plugins/videojs-volume-button"),e("./videojs-plugins/tracking/google-tag-manager"),window._V_=window.videojs,window.BPlayer&&(window.BPlayer.BloombergVideoPlayer=window.BPlayer.BloombergVideoPlayer||e("./lib/bloomberg-video-player"),window.BPlayer.EmbedStrategy=window.BPlayer.EmbedStrategy||e("./strategy/EmbedStrategy"),window.BPlayer.ScriptTagStrategy=window.BPlayer.ScriptTagStrategy||e("./strategy/ScriptTagStrategy"))},{"./lib/bloomberg-video-player":10,"./lib/google-ads/videojs-google-ads":31,"./strategy/EmbedStrategy":47,"./strategy/ScriptTagStrategy":48,"./videojs-plugins/closed-captions/videojs-closed-captions-control":63,"./videojs-plugins/conviva/videojs-conviva-control":65,"./videojs-plugins/hls/videojs-hls-bridge":67,"./videojs-plugins/hls/videojs-recover-hls-error":70,"./videojs-plugins/share-control-js/videojs-share-control":72,"./videojs-plugins/share-control-js/videojs-share-overlay":73,"./videojs-plugins/tracking/google-tag-manager":74,"./videojs-plugins/videojs-activity-override":75,"./videojs-plugins/videojs-comscore-stream-sense":76,"./videojs-plugins/videojs-mediabong":77,"./videojs-plugins/videojs-moat-ad-viewability":78,"./videojs-plugins/videojs-parsely":79,"./videojs-plugins/videojs-persist-listeners":80,"./videojs-plugins/videojs-playback-outro":81,"./videojs-plugins/videojs-poster":82,"./videojs-plugins/videojs-smooth-scrubbing":83,"./videojs-plugins/videojs-stream-watchdog":84,"./videojs-plugins/videojs-title-bar":85,"./videojs-plugins/videojs-volume-button":86}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={AD_ALMOST_FINISHED:"AD_ALMOST_FINISHED",AD_CLICKED:"AD_CLICKED",AD_COMPLETED:"AD_COMPLETED",AD_LOAD_ERROR:"AD_LOAD_ERROR",AD_LOAD_TIMED_OUT:"AD_LOAD_TIMED_OUT",AD_LOADING:"AD_LOADING",AD_LOADED:"AD_LOADED",AD_PAUSED:"AD_PAUSED",AD_PLAY_ERROR:"AD_PLAY_ERROR",AD_PLAYBACK_PROGRESS_UPDATE:"AD_PLAYBACK_PROGRESS_UPDATE",AD_PLAYBACK_TIMED_OUT:"AD_PLAYBACK_TIMED_OUT",AD_REQUESTED:"AD_REQUESTED",AD_RESUMED:"AD_RESUMED",AD_STARTED:"AD_STARTED",ADS_FAILURE:"ADS_FAILURE",ADS_READY:"ADS_READY",ALL_ADS_COMPLETED:"ALL_ADS_COMPLETED",CLIP:"clip",CONTENT_PAUSE_REQUESTED:"CONTENT_PAUSE_REQUESTED",CONTENT_RESUME_REQUESTED:"CONTENT_RESUME_REQUESTED",DURATION_CHANGE:"DURATION_CHANGE",MAX_RETRIES_REACHED:"MAX_RETRIES_REACHED",OVERLAY_COMPLETE:"OVERLAY_COMPLETE",OVERLAY_STARTED:"OVERLAY_STARTED",PAUSED:"PAUSED",REQUEST_AD_PAUSE:"REQUEST_AD_PAUSE",REQUEST_AD_PLAY:"REQUEST_AD_PLAY",RESUMED:"RESUMED",STARTED:"STARTED"};n.default=i},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={AD_LOADING:"adloading",ADS_LOAD_ERROR:"adsloaderror",ADS_LOAD_TIMEOUT:"adsloadtimeout",ADS_PLAY_ERROR:"adsplayerror",ADS_PLAY_TIMEOUT:"adsplaytimeout",ADS_TIMEOUT_ERROR:"adstimeouterror",BITRATE_CHANGE:"bitrateChange",BUFFER:"buffer",CAPTIONS_CHANGE:"captionschange",CONTENT_CHANGE:"contentchange",DISPOSE:"dispose",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",FATAL_ERROR:"fatalError",FETCH_OVERLAY:"fetchOverlay",FULL_SCREEN_CHANGE:"fullscreenchange",HLS_BRIDGE_ERROR:"hlsBridgeError",HLS_BRIDGE_FATAL_ERROR:"hlsBridgeFatalError",HLS_CUE_IN:"hlsCueIn",HLS_CUE_OUT:"hlsCueOut",HLS_CUE_OUT_LOADED:"hlsCueOutLoaded",LOADED_METADATA:"loadedmetadata",LOADED_METADATA_SHIM:"loadedmetadata_shim",PAUSE:"pause",PLAY:"play",PLAY_PREROLL:"playPreroll",PREPARED_MIDROLL:"preparemidroll",READY:"ready",REQUEST_SHARE:"requestShare",RETRY:"retry",SEEK_START:"seekStart",SHARE:"share",SHARE_ACTION:"share_action",SHOW_OVERLAY:"showOverlay",START_MIDROLL:"startmidroll",TIMEUPDATE:"timeupdate",TRACK_INFO:"track-info",USER_ACTIVE:"useractive",USER_INACTIVE:"userinactive",VOLUME_CHANGE:"volumechange",WATCHDOG_RELOAD:"watchdogreload",BVP_VOLUME_CHANGE:"bvp_volumechange",CONTINUOUS_PLAY_START:"continuousPlayStart"};n.default=i},{}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return A===e.techName_}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../events/ad-events"),u=i(l),d=e("../lib/google-ads/ad-utils"),c=i(d),f=e("../events/player-events"),p=i(f),h=new window.BPlayerLog("BloombergVideoPlayer"),v="AdController",y=[p.default.ADS_TIMEOUT_ERROR,u.default.ALL_ADS_COMPLETED],m=Symbol("eventHandlers"),_=Symbol("readyHandlers"),g=Symbol("triggerHandlers"),b=Symbol("strategyPromise"),E="function",A="Flash",P="unload",w="GoogleAdsPlugin",C=function(){},S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,i=arguments[1],o=arguments[2];r(this,e),this.disposed=!1,this.player=null,this.userOptions=t,this[m]=[],this[_]=[],this[g]=[],i||(i={onReady:C,onError:C}),this[b]=o.run().then(function(e){if(!n.disposed){e.options_.plugins.hasOwnProperty(w)&&c.default.hasPreroll(e.options_.plugins[w])&&n.setIsAdPlaying(!0);var t=void 0;for(n.player=e,a(i.onReady)===E&&i.onReady.call(n.player,n.player);t=n[_].pop();)n.player.ready(t.handler,t.sync);for(;t=n[m].pop();)n.player.on(t.first,t.second,t.third);for(;t=n[g].pop();)n.player.trigger(t.type,t.eventDetails);return t=null,n.player.on(u.default.AD_STARTED,function(){return n.setIsAdPlaying(!0)}),n.player.on(y,function(){return n.setIsAdPlaying(!1)}),e}},function(e){a(i.onError)===E&&i.onError(e),h.error(e)}),this.dispose=this.dispose.bind(this),window.addEventListener(P,this.dispose)}return s(e,[{key:"isAdPlaying",value:function(){return this.adStatus}},{key:"setIsAdPlaying",value:function(e){this.adStatus=e}},{key:"getId",value:function(){return this.userOptions.id}},{key:"getHtmlChildId",value:function(){return this.userOptions.htmlChildId}},{key:"setAutoplay",value:function(e){this.player&&this.player.hasOwnProperty(v)&&this.player[v].setAutoplay(e),this.userOptions.autoplay=e}},{key:"play",value:function(){return this.isAdPlaying()?o(this.player)?void this.player.play():(this.player[v]&&this.player[v].setAutoplay(!0),void this.player.trigger({type:u.default.REQUEST_AD_PLAY})):void(this.player&&this.player.play())}},{key:"pause",value:function(){return this.isAdPlaying()?o(this.player)?void this.player.pause():void this.player.trigger({type:u.default.REQUEST_AD_PAUSE}):void(this.player&&this.player.pause())}},{key:"ready",value:function(e,t){if(e){if(this.player)return this.player.ready(e,t),this[b];this[_].push({handler:e,sync:t})}return this[b]}},{key:"dispose",value:function(){this.disposed=!0,this.player&&this.player.dispose(),this.player=this.userOptions=null,this[m]=null,this[_]=null,this[g]=null,window.removeEventListener(P,this.dispose)}},{key:"on",value:function(e,t,n){return this.player?this.player.on(e,t,n):(this[m].push({first:e,second:t,third:n}),this)}},{key:"off",value:function(e,t,n){return this.player&&this.player.off(e,t,n),this}},{key:"trigger",value:function(e,t){return this.player?this.player.trigger(e,t):(this[g].push({type:e,eventDetails:t}),this)}},{key:"trackInfo",value:function(e){this.trigger("track-info",e)}},{key:"isPlaying",value:function(){var e=this.player[v];return e&&e.adUnit?e.isPlaying():!this.player.paused()}}]),e}();t.exports=S},{"../events/ad-events":8,"../events/player-events":9,"../lib/google-ads/ad-utils":23}],11:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=x.resourceID;return w.default.getTextForXPath(e,t)}function a(e){var t=x.showName;return w.default.getTextForXPath(e,t)}function s(e){return l(e,x)||u(e,x)||d(e,x)||c(e,x)||f(e,x)||p(e,x)||""}function l(e,t){var n=t.web_title;return w.default.getTextForXPath(e,n)}function u(e,t){var n=t.mobile_title;return w.default.getTextForXPath(e,n)}function d(e,t){var n=t.avmm_media_title;return w.default.getTextForXPath(e,n)}function c(e,t){var n=t.terminal_story_title;return w.default.getTextForXPath(e,n)}function f(e,t){var n=t.seo_title;return w.default.getTextForXPath(e,n)}function p(e,t){var n=t.nt_st_ep;return w.default.getTextForXPath(e,n)}function h(e){var t=x.durationMSec;return parseInt(w.default.getTextForXPath(e,t),10)}function v(e){var t=x.createdUnixUTC,n=parseInt(w.default.getTextForXPath(e,t),10),i=1e3*n,r=new Date(i);return isNaN(r)?null:r.toISOString().slice(0,10)}function y(e){var t=x.niCodes,n=w.default.getNodeForXPath(e,t),i=n?E(n.childNodes):[];return i.reduce(function(e,t){var n=E(t.childNodes);return e.push(n.reduce(function(e,t){return e[t.nodeName]=w.default.getTextForNode(t),e},{})),e},[])}function m(e){var t=e.thumbnail,n=t.images;return Object.keys(n).reduce(function(e,t){var i=n[t];return e.push({url:i.url[0],width:parseInt(i.width,10),height:parseInt(i.height,10)}),e},[])}function _(e){var t=x.comscore,n=void 0===t?{}:t;return new L.default({ntStEp:w.default.getTextForXPath(e,n.nt_st_ep),nsStTy:w.default.getTextForXPath(e,n.ns_st_ty),c5:w.default.getTextForXPath(e,n.c5),bbPubD:w.default.getTextForXPath(e,n.bb_pub_d)})}function g(e){var t=e.captions;return t?[new k.default({url:t})]:[]}function b(e,t){var n=e.secureStreams,i=e.streams,r=t&&n&&n.length?n:i;return r.map(function(e){return new S.default(e)})}function E(e){return Array.prototype.slice.call(e)}Object.defineProperty(n,"__esModule",{value:!0});var A=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),P=e("../xml-utils-js"),w=i(P),C=e("./video-stream"),S=i(C),O=e("./caption"),k=i(O),T=e("./comscore-metadata"),L=i(T),R=e("../../utils/memoizer"),j=i(R),D=e("../projector-settings-js/poster-size"),M=i(D),I="/bmObject/bmContents/bmContent/descriptions/description/ExtensionGroup/bmBloombergCustom",U="/bmObject/bmContents/bmContent/descriptions/description/bmContentDescription/alternativeTitle",x={resourceID:"/bmObject/resourceID",durationMSec:I+"/durationMSec",createdUnixUTC:I+"/createdUnixUTC",showName:I+"/showName",thumbnails:I+"/thumbnails",niCodes:I+"/NiCodes",comscore:{nt_st_ep:I+"/comscore/nt_st_ep",bb_pub_d:I+"/comscore/bb_pub_d",ns_st_ty:I+"/comscore/ns_st_ty",c5:I+"/comscore/C5"},web_title:U+'[@typeDefinition="web_title"]',mobile_title:U+'[@typeDefinition="mobile_title"]',avmm_media_title:U+'[@typeDefinition="avmm_media_title"]',terminal_story_title:U+'[@typeDefinition="terminal_story_title"]',seo_title:U+'[@typeDefinition="seo_title"]'},N=Symbol("bmmrResponse"),B=Symbol("xmlObject"),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r(this,e),!t||!t.xml)throw new Error("Invalid BMMR response passed.");var n=w.default.removeXmlNamespaces(t.xml);this[N]=t,this[B]=w.default.parseXml(n),this.getId=j.default.memoize(o.bind(null,this[B])),this.getTitle=j.default.memoize(s.bind(null,this[B])),this.getDuration=j.default.memoize(h.bind(null,this[B])),this.getCreateDate=j.default.memoize(v.bind(null,this[B])),this.getShowName=j.default.memoize(a.bind(null,this[B])),this.getNiCodes=j.default.memoize(y.bind(null,this[B])),this.getComscoreMetadata=j.default.memoize(_.bind(null,this[B])),this.getCaptions=j.default.memoize(g.bind(null,this[N])),this.getStreams=j.default.memoize(b.bind(null,this[N])),this.getImages=j.default.memoize(m.bind(null,this[N]))}return A(e,[{key:"getCedexisAppID",value:function(){return this[N].cedexisAppID}},{key:"getCompressedID",value:function(){return this[N].compressed_id}},{key:"getAdTag",value:function(){return this[N].ad_tag}},{key:"getPrerollAdUnit",value:function(){return this[N].preroll_ad_unit}},{key:"getRawNiData",value:function(){return this[N].ni}},{key:"getPosterTemplateImage",value:function(){var e=this.getImages();if(!e)return null;for(var t=0;t<e.length;t++){var n=e[t].url;if(M.default.isTemplateImage(n))return n}return null}}]),e}();n.default=F},{"../../utils/memoizer":56,"../projector-settings-js/poster-size":38,"../xml-utils-js":45,"./caption":13,"./comscore-metadata":14,"./video-stream":15}],12:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("/bb/web/jenkins/workspace/deploy-projector/build//shims.js"),s=e("./bmmr-asset-js"),l=i(s),u=new window.BPlayerLog("BmmrLoader"),d=/^\/\//,c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.serverUrl,i=t.id,o=t.idType;if(!n||!i)throw new Error("BmmrLoader Missing required options. Please check that serverUrl and id are supplied.");this.isLive=Boolean(t.live),this.url=n+"?id="+i+"&version="+a.version,d.test(this.url)&&(this.url="https:"+this.url),o&&(this.url+="&idType="+o)}return o(e,null,[{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t).loadBmmrMetadata()}}]),o(e,[{key:"loadBmmrMetadata",value:function(){if(this.isLive)return Promise.reject(new Error("BmmrLoader Live video flag is set"));var e={mode:"cors",credentials:"same-origin",cache:"no-cache"};return fetch(this.url,e).then(this.handleBmmrResponse.bind(this)).then(function(e){return new l.default(e)}).catch(function(e){u.error(e)})}},{key:"handleBmmrResponse",value:function(e){if(200!==e.status)throw new Error("BmmrLoader Unable to load BMMR metadata for "+this.url+" with status "+e.status);return e.json()}}]),e}();n.default=c},{"./bmmr-asset-js":11,"/bb/web/jenkins/workspace/deploy-projector/build//shims.js":2}],13:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){var n=t.url,r=void 0===n?null:n;i(this,e),this.url=r}return r(e,[{key:"getUrl",value:function(){return this.url}}]),e}();n.default=o},{}],14:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){var n=t.ntStEp,r=void 0===n?null:n,o=t.nsStTy,a=void 0===o?null:o,s=t.bbPubD,l=void 0===s?null:s,u=t.c5,d=void 0===u?null:u;i(this,e),this.ntStEp=r,this.nsStTy=a,this.bbPubD=l,this.c5=d}return r(e,[{key:"getNtStEp",value:function(){return this.ntStEp}},{key:"getNsStTy",value:function(){return this.nsStTy}},{key:"getBbPubD",value:function(){
return this.bbPubD}},{key:"getC5",value:function(){return this.c5}}]),e}();n.default=o},{}],15:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t){var n=t.video_codec,r=void 0===n?null:n,o=t.muxing_format,a=void 0===o?null:o,s=t.video_bitrate,l=void 0===s?0:s,u=t.audio_codec,d=void 0===u?null:u,c=t.audio_bitrate,f=void 0===c?null:c,p=t.profile,h=void 0===p?null:p,v=t.stream_type,y=void 0===v?null:v,m=t.url,_=void 0===m?null:m,g=t.height,b=void 0===g?null:g,E=t.width,A=void 0===E?null:E,P=t.file_size,w=void 0===P?null:P,C=t.percent,S=void 0===C?null:C;i(this,e),this.videoCodec=r,this.videoBitrate=l?parseInt(l,10):l,this.audioCodec=d,this.audioBitrate=f?parseInt(f,10):f,this.muxingFormat=a,this.profile=h,this.streamType=y,this.url=_,this.height=b?parseInt(b,10):b,this.width=A?parseInt(A,10):A,this.fileSize=w?parseInt(w,10):w,this.percent=S?parseInt(S,10):S}return r(e,[{key:"getVideoCodec",value:function(){return this.videoCodec}},{key:"getMuxingFormat",value:function(){return this.muxingFormat}},{key:"getVideoBitrate",value:function(){return this.videoBitrate}},{key:"getAudioCodec",value:function(){return this.audioCodec}},{key:"getAudioBitrate",value:function(){return this.audioBitrate}},{key:"getProfile",value:function(){return this.profile}},{key:"getStreamType",value:function(){return this.streamType}},{key:"getUrl",value:function(){return this.url}},{key:"getHeight",value:function(){return this.height}},{key:"getWidth",value:function(){return this.width}},{key:"getFileSize",value:function(){return this.fileSize}},{key:"getPercent",value:function(){return this.percent}},{key:"isSecure",value:function(){return this.url&&"https"===this.url.slice(0,5)}},{key:"toJSON",value:function(){return{url:this.url,type:this.streamType,bitrate:this.videoBitrate,percent:this.percent}}}]),e}();n.default=o},{}],16:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,i,r){return new f.default({playerWidth:t.width(),playerHeight:t.height(),playerId:t.el().id,poster:t.options_.metadata.poster,bufferingAnimation:e.bufferingAnimation,controlsFadeMillis:e.controlsFadeMillis,overlayWidth:e.overlayImageWidth,overlayHeight:e.overlayImageHeight,overlayAttributeion:e.overlayAttribution,adDimensions:r,volume:n,muted:i},t)}function a(e){T.info("setAutoPlayClass on",e),b.default.addClass(e,"vjs-autoplay")}function s(e){return{type:e.options_.metadata.form_type,clip:e.options_.metadata.id,duration:e.duration(),url:e.currentSrc(),metadata:{}}}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("../../utils/projector-utils"),d=i(u),c=e("./ad-controls"),f=i(c),p=e("../../events/player-events"),h=i(p),v=e("../../events/ad-events"),y=i(v),m=e("../../utils/persist-controls"),_=i(m),g=e("../../utils/css-helpers"),b=i(g),E=e("./ad-preroll"),A=i(E),P=e("./ad-midroll"),w=i(P),C=e("./ad-overlay"),S=i(C),O=e("./ad-utils"),k=i(O),T=new window.BPlayerLog("AdController"),L=window.google,R=["destroy","fetchMidroll","fetchOverlay","onAdComplete","onAdLoaded","onAdLoading","onAdPause","onAdPauseRequest","onAdPlayError","onAdPlayRequest","onAdResume","onAdStart","onOverlayComplete","onAdsTimedOut","onAllAdsComplete","onContentPauseRequested","onDurationChange","onExitFullscreen","onFullscreen","onPlaybackStatusUpdate","onPlayerResize","onVolumeChange","playMidroll","prerollForMobile","requestAdPlay","requestAdPlayForDeskTop","showOverlay"],j=function(){function e(t,n){r(this,e);var i=k.default.hasPreroll(t),o=k.default.hasMidroll(t),a=k.default.hasOverlay(t);if(i||o){T.info("HTML5 browser detected");var s=n.el().getBoundingClientRect(),l=n.options_.original_user_options,u=l.start_muted,c=!d.default.isMobile()&&null!=u&&"true"===u.toString();this.videoTag=null,this.player=n,this.currentAdStarted=null,this.isMobile=d.default.isMobile(),this.isAdPlayable=Boolean(l.autoplay||t.forcePlay),this.isLive=l.live,this.playerWidth=s.width,this.playerHeight=s.height,this.animationFrameId=null,this.muteStatus=c,this.config=t,this.adDimensions=null,this.adUnit=null;for(var f=0;f<R.length;f++){var p=R[f];this[p]=this[p].bind(this)}this.player.on(y.default.REQUEST_AD_PLAY,this.onAdPlayRequest).on(y.default.REQUEST_AD_PAUSE,this.onAdPauseRequest).on(h.default.DISPOSE,this.destroy),this.volume=this.getPlayerVolume(),this.adControls=this.createAdControls(),i&&this.setupPreroll(),o&&this.setupMidroll(),a&&this.setupOverlay()}}return l(e,[{key:"setupOverlay",value:function(){this.player.tech_.on(h.default.FETCH_OVERLAY,this.fetchOverlay),this.player.tech_.on(h.default.SHOW_OVERLAY,this.showOverlay)}},{key:"setupMidroll",value:function(){this.player.tech_.on(h.default.HLS_CUE_OUT_LOADED,this.fetchMidroll),this.player.tech_.on(h.default.HLS_CUE_OUT,this.playMidroll)}},{key:"setupPreroll",value:function(){return this.prepareForAd(),this.isMobile?void this.adControls.one(f.default.events.AD_REQUEST,this.prerollForMobile):void this.preRollForDesktop()}},{key:"preRollForDesktop",value:function(){this.isAdPlayable?this.showBufferingAnimation():(this.hideBufferingAnimation(),this.adControls.one(f.default.events.AD_REQUEST,this.requestAdPlayForDeskTop)),this.fetchPreroll()}},{key:"prerollForMobile",value:function(){this.isAdPlayable=!0,this.showBufferingAnimation(),this.fetchPreroll(),this.videoTag.load()}},{key:"fetchPreroll",value:function(){this.adUnit=new A.default(this.config,this.adDimensions,this.videoTag,this.player),this.fetchAd()}},{key:"playMidroll",value:function(){if(this.adUnit&&!this.player.paused()){var e=this.player.muted();this.isAdPlayable=!0,this.setMuteStatus(e),this.requestAdPlay()}}},{key:"fetchMidroll",value:function(e){if(!this.adUnit){if(this.isAdPlayable=!1,this.prepareForAd(),T.info("fetch midroll is called with the event",e),e&&e.data){var t=e.data.duration>>0;t>0&&(this.config.midrollMaxDuration=1e3*e.data.duration)}this.adUnit=new w.default(this.config,this.adDimensions,this.videoTag,this.player),this.fetchAd()}}},{key:"showOverlay",value:function(){this.playOverlayAd()}},{key:"fetchOverlay",value:function(e){this.adUnit||(this.isAdPlayable=!1,this.prepareForAd(),T.info("fetch overlay is called with the event",e),this.adUnit=new S.default(this.config,this.adDimensions,this.videoTag,this.player),this.fetchAd())}},{key:"fetchAd",value:function(){this.adUnit.on([y.default.MAX_RETRIES_REACHED,y.default.AD_PLAYBACK_TIMED_OUT,y.default.AD_LOAD_TIMED_OUT].join(),this.onAdsTimedOut).on(y.default.AD_COMPLETED,this.onAdComplete).on(y.default.AD_LOADED,this.onAdLoaded).on(y.default.AD_LOADING,this.onAdLoading).on(y.default.AD_PAUSED,this.onAdPause).on(y.default.AD_PLAY_ERROR,this.onAdPlayError).on(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.onPlaybackStatusUpdate).on(y.default.AD_RESUMED,this.onAdResume).on(y.default.AD_STARTED,this.onAdStart).on(y.default.ALL_ADS_COMPLETED,this.onAllAdsComplete).on(y.default.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested).on(y.default.DURATION_CHANGE,this.onDurationChange).on(y.default.OVERLAY_COMPLETE,this.onOverlayComplete),this.adUnit.fetchAd()}},{key:"createAdControls",value:function(){var e=o(this.config,this.player,this.volume,this.muteStatus,this.adDimensions);return e.on(f.default.events.PLAY_REQUEST,this.onAdPlayRequest).on(f.default.events.PAUSE_REQUEST,this.onAdPauseRequest).on(f.default.events.VOLUME_CHANGE,this.onVolumeChange).on(f.default.events.REQUEST_FULLSCREEN,this.onFullscreen).on(f.default.events.EXIT_FULLSCREEN,this.onExitFullscreen),e.initialize(),e}},{key:"switchToContent",value:function(){if(this.isAdPlayable){this.player.controlBar.show(),this.player.muted(this.muteStatus),this.player.play();var e=s(this.player);this.player.trigger({type:y.default.CLIP,data:e})}}},{key:"requestAdPlayForDeskTop",value:function(){this.isAdPlayable=!0,this.requestAdPlay()}},{key:"requestAdPlay",value:function(){this.isAdPlayable&&(this.currentAdStarted?this.adUnit.resume():this.playAd())}},{key:"playAd",value:function(){T.info("playAd is called"),this.adjustVolumeControls(this.getPlayerVolume(),this.muteStatus),this.hidePlayerControls(),this.adUnit&&this.showBufferingAnimation(),this.adUnit.startAd()}},{key:"playOverlayAd",value:function(){return this.adUnit?(this.adControls.show(),this.adControls.enterOverlayMode(),void this.adUnit.startOverlayAd()):void T.error("Unable to start overlay ad")}},{key:"showBufferingAnimation",value:function(){var e=this.adControls.getPlayStatus();e!==f.default.playStatus.BUFFERING&&(a(this.player.el()),this.adControls.showBufferingAnimation())}},{key:"hideBufferingAnimation",value:function(){this.adControls.setIdle()}},{key:"prepareForAd",value:function(){var e=this.player.el(),t=e.getBoundingClientRect();this.videoTag=this.player.tech_.el_,this.adDimensions=t}},{key:"hidePlayerControls",value:function(){this.player.controlBar.hide()}},{key:"showAdControls",value:function(){this.adControls.controlsComponent.show()}},{key:"isPlaying",value:function(){return this.adControls.playStatus===f.default.playStatus.PLAYING}},{key:"destroy",value:function(){this.adControls.hide(),this.animationFrameId=null,this.videoTag=null,this.currentAdStarted=!1,this.adUnit&&(this.adUnit.destroy(),this.adUnit=null)}},{key:"onAdLoaded",value:function(){T.info("onAdLoaded is called");var e=this.adUnit.getAdController();this.player.trigger({type:y.default.AD_LOADED,data:{adsManager:e.adsManager,adContainer:e.adContainer,viewMode:e.viewMode,adType:this.adUnit.getAdType(),custParams:this.adUnit.fromConfig("custParams"),isLive:this.isLive}}),this.requestAdPlay()}},{key:"onAdLoading",value:function(){this.player.trigger({type:h.default.AD_LOADING})}},{key:"onAdStart",value:function(e){this.hideBufferingAnimation(),T.info("Ad started"),this.monitorAdSizeStart();var t=e.detail.data;this.player.trigger({type:y.default.CLIP,data:t}),this.currentAdStarted=!0,this.showAdControls(),this.adControls.setPlayStatus(f.default.playStatus.PLAYING),this.player.trigger({type:y.default.AD_STARTED,data:t})}},{key:"onAdResume",value:function(e){this.adControls.setPlayStatus(f.default.playStatus.PLAYING);var t=e.detail.data;this.player.trigger({type:y.default.AD_RESUMED,data:t})}},{key:"onAdPause",value:function(e){this.adControls.setPlayStatus(f.default.playStatus.PAUSED);var t=e.detail.data;this.player.trigger({type:y.default.AD_PAUSED,data:t})}},{key:"onAdPlayError",value:function(e){this.hideBufferingAnimation(),this.monitorAdSizeEnd(),this.player.trigger(h.default.ADS_PLAY_ERROR,e)}},{key:"onAdPlayRequest",value:function(){this.requestAdPlay()}},{key:"onAdPauseRequest",value:function(){this.currentAdStarted&&this.adUnit.pause()}},{key:"onContentPauseRequested",value:function(){return T.debug("onContentPauseRequested is called"),this.isLive?void this.player.muted(!0):void this.player.pause()}},{key:"onDurationChange",value:function(e){var t=e.detail.duration;this.player.trigger({type:h.default.DURATION_CHANGE,data:t})}},{key:"onPlaybackStatusUpdate",value:function(e){var t=e.detail,n=t.remainingTime,i=t.elapsedTime,r=t.duration;this.adControls.setAdCountdownTime(n,i,r),n<=this.player.options_.adAlmostFinishedThreshold&&this.player.tech_.trigger(y.default.AD_ALMOST_FINISHED)}},{key:"onOverlayComplete",value:function(){T.debug("Cleaning up overlay"),this.monitorAdSizeEnd(),this.player.trigger(y.default.OVERLAY_COMPLETE),this.adControls.exitOverlayMode(),this.destroy()}},{key:"onAdComplete",value:function(e){var t=e.detail.data;this.player.trigger({type:y.default.AD_COMPLETED,data:t})}},{key:"onAllAdsComplete",value:function(){this.monitorAdSizeEnd(),this.player.trigger(y.default.ALL_ADS_COMPLETED),this.destroy(),this.switchToContent()}},{key:"onAdsTimedOut",value:function(e){T.info("onAdsTimedOut"),this.player.trigger(h.default.ADS_TIMEOUT_ERROR,{originalEvent:e}),this.destroy(),this.switchToContent()}},{key:"onVolumeChange",value:function(e){this.volume=e.detail.volume,_.default.set("volume",this.volume),this.setMuteStatus(e.detail.muted),this.volume>0&&this.player.volume(this.volume),this.setAdVolume(this.volume,this.muteStatus)}},{key:"onFullscreen",value:function(){this.adUnit&&(this.monitorAdSizeEnd(),this.adUnit.resize(window.screen.width,window.screen.height,L.ima.ViewMode.FULLSCREEN))}},{key:"onExitFullscreen",value:function(){this.adUnit&&(this.monitorAdSizeStart(),this.adUnit.resize(this.playerWidth,this.playerHeight,L.ima.ViewMode.NORMAL))}},{key:"monitorAdSizeStart",value:function(){this.onPlayerResize&&(this.animationFrameId=window.requestAnimationFrame(this.onPlayerResize))}},{key:"monitorAdSizeEnd",value:function(){null!==this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)}},{key:"onPlayerResize",value:function(){if(this.adUnit){var e=this.player.el().getBoundingClientRect(),t=e.width,n=e.height;this.playerHeight!=n&&this.playerWidth!=t&&(this.playerHeight=n,this.playerWidth=t,this.adUnit.resize(t,n,L.ima.ViewMode.NORMAL)),this.monitorAdSizeEnd(),this.monitorAdSizeStart()}}},{key:"adjustVolumeControls",value:function(e,t){this.adUnit&&(T.debug("adjustVolumeControls muted",t),this.setAdControlsVolume(e,t))}},{key:"setAdVolume",value:function(e,t){this.adUnit&&(e=t?0:e,this.adUnit.setVolume(e))}},{key:"setAdControlsVolume",value:function(e,t){t?this.adControls.mute():this.adControls.setVolume(e)}},{key:"setAutoplay",value:function(e){this.isAdPlayable=e}},{key:"getPlayerVolume",value:function(){var e=parseFloat(_.default.get("volume"));return isFinite(e)?e:this.player.volume()}},{key:"setMuteStatus",value:function(e){this.muteStatus=e}}]),e}();n.default=j},{"../../events/ad-events":8,"../../events/player-events":9,"../../utils/css-helpers":52,"../../utils/persist-controls":57,"../../utils/projector-utils":58,"./ad-controls":17,"./ad-midroll":18,"./ad-overlay":19,"./ad-preroll":20,"./ad-utils":23}],17:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return!!window.videojs.browser.IS_IOS&&("ontouchend"in window&&A.default.isChromeIos())}function l(e,t){e.addEventListener("touchend",t)}function u(e,t){s()||e.addEventListener(S,t)}function d(e,t){s()?l(e,t):e.addEventListener(S,t)}function c(e,t){s()?l(e,t):e.addEventListener(S,t)}Object.defineProperty(n,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=e("../../utils/event-target"),h=i(p),v=e("../../utils/css-helpers"),y=i(v),m=e("../../utils/datetime-utils"),_=i(m),g=e("./ad-volume-control"),b=i(g),E=e("../../utils/projector-utils"),A=i(E),P=e("../../events/player-events"),w=i(P),C=new window.BPlayerLog("AdControls"),S="click",O="bvp-ad-play-button__paused",k="bvp-ad-big-play-button__visible",T="bvp-ad-big-play-button__mobile",L="bvp-ad-buffering__visible",R="bvp-ad-control-bar__initial",j="bvp-ad-control-bar__hidden",D=3e3,M="vjs-fullscreen",I=["onPlayPauseTouch","onFullscreenControlClick","onFullscreenChange"],U=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return I.forEach(function(e){i[e]=i[e].bind(i)}),i.controlsComponent=n.getChild("AdControlsComponent"),i.container=null,i.adDimensions=null,i.controlBar=null,i.playPauseButton=null,i.bigPlayButton=null,i.fullscreenButton=null,i.bufferingAnimation=null,i.volume=e.volume,i.volumeControl=null,i.muted=e.muted,i.poster=e.poster,i.bufferingAnimationImage=e.bufferingAnimation,i.width=e.playerWidth,i.playStatus=t.playStatus.SETUP,i.player=n,i.fullscreen=!1,i.adDimensions=e.adDimensions,n.on(w.default.FULL_SCREEN_CHANGE,i.onFullscreenChange),i}return a(t,e),f(t,[{key:"initialize",value:function(){var e=this.controlsComponent.el();this.bigPlayButton=e.querySelector(".bvp-ad-big-play-button"),this.playPauseButton=e.querySelector(".bvp-ad-play-button"),this.bufferingAnimation=e.querySelector(".bvp-ad-buffering"),this.controlBar=e.querySelector(".bvp-ad-control-bar"),this.fullscreenButton=e.querySelector(".bvp-ad-fullscreen"),this.container=e;var n=e.querySelector(".bvp-ad-sound-menu__mute-control"),i=this.player.tech_;i.featuresVolumeControl?this.initializeVolumeControl(e,n):y.default.addClass(n,"vjs-hidden"),A.default.isMobile()&&y.default.addClass(this.fullscreenButton,"vjs-hidden"),d(this.bigPlayButton,this.onPlayPauseTouch),c(this.playPauseButton,this.onPlayPauseTouch),u(this.fullscreenButton,this.onFullscreenControlClick),e=n=null,this.setPlayStatus(t.playStatus.SETUP)}},{key:"initializeVolumeControl",value:function(e,t){var n=e.querySelector(".bvp-ad-volume-bar__scrubber"),i=e.querySelector(".bvp-ad-volume-bar"),r=e.querySelector(".bvp-ad-volume-bar__container");this.volumeControl=new b.default({volumeBar:i,volumeScrubber:n,volumePath:r,muteControl:t,volume:this.volume,muted:this.muted}),this.volumeControl.setEventParent(this),i=n=r=null}},{key:"destroy",value:function(){var e=this;this.removeAllEventListeners(),this.adDimensions=null,this.bufferingAnimation=null,this.controlBar=null,this.volumeControl&&(this.volumeControl.destroy(),this.volumeControl=null),this.playPauseButton.removeEventListener(S,this.onPlayPauseTouch),this.playPauseButton=null,this.bigPlayButton.removeEventListener(S,this.onPlayPauseTouch),this.bigPlayButton=null,this.fullscreenButton.removeEventListener(S,this.onFullscreenControlClick),this.fullscreenButton=null,this.container=null,this.controlsComponent.hide(),this.player=null,I.forEach(function(t){e[t]=null})}},{key:"enterOverlayMode",value:function(){this.controlsComponent.enterOverlayMode()}},{key:"exitOverlayMode",value:function(){this.controlsComponent.exitOverlayMode()}},{key:"hide",value:function(){this.controlsComponent.hide()}},{key:"show",value:function(){this.controlsComponent.show()}},{key:"mute",value:function(){this.volumeControl&&this.volumeControl.mute()}},{key:"setVolume",value:function(e){this.volume=e,this.volumeControl&&this.volumeControl.setVolume(e)}},{key:"getAvailableAdHeight",value:function(){return this.adDimensions.height}},{key:"getPlayStatus",value:function(){return this.playStatus}},{key:"onPlayPauseTouch",value:function(){return this.playStatus!==t.playStatus.SETUP&&this.playStatus!==t.playStatus.IDLE||this.trigger(t.events.AD_REQUEST),this.playStatus===t.playStatus.PAUSED?(this.trigger(t.events.PLAY_REQUEST),void this.setPlay()):void(this.playStatus===t.playStatus.PLAYING&&(this.trigger(t.events.PAUSE_REQUEST),this.setPause()))}},{key:"onFullscreenControlClick",value:function(){return this.fullscreen?(this.player.exitFullscreen(),void this.player.removeClass(M)):(this.player.addClass(M),void this.player.requestFullscreen())}},{key:"onFullscreenChange",value:function(){return this.fullscreen?(this.fullscreen=!1,void this.trigger(t.events.EXIT_FULLSCREEN)):(this.fullscreen=!0,void this.trigger(t.events.REQUEST_FULLSCREEN))}},{key:"setPlayStatus",value:function(e){switch(e){case t.playStatus.PAUSED:this.setPause();break;case t.playStatus.PLAYING:this.setPlay();break;case t.playStatus.BUFFERING:this.setBuffering();break;case t.playStatus.SETUP:this.setSetup();break;case t.playStatus.IDLE:this.setIdle();break;default:C.error("Received unsupported play status: "+e)}}},{key:"setAdCountdownTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=_.default.formatSeconds(t),r=_.default.formatSeconds(n);this.controlsComponent.setCountdownTime(i,r),this.setProgressBar(e,n)}},{key:"setProgressBar",value:function(e,t){var n=e/t*100;this.controlsComponent.setProgressBar(n)}},{key:"setPlay",value:function(){var e=this;this.playStatus=t.playStatus.PLAYING,y.default.addClass(this.playPauseButton,O),this.hidePlayButton(),y.default.removeClass(this.bufferingAnimation,L),y.default.removeClass(this.controlBar,j),y.default.addClass(this.controlBar,R),setTimeout(function(){y.default.removeClass(e.controlBar,R)},D)}},{key:"setPause",value:function(){this.playStatus=t.playStatus.PAUSED,y.default.removeClass(this.playPauseButton,O),this.showPlayButton()}},{key:"setBuffering",value:function(){C.info("Buffering..."),this.hidePlayButton(),this.playStatus=t.playStatus.BUFFERING,y.default.addClass(this.bufferingAnimation,L)}},{key:"setIdle",value:function(){C.info("Idle..."),this.playStatus=t.playStatus.IDLE,y.default.removeClass(this.bufferingAnimation,L)}},{key:"setSetup",value:function(){this.playStatus=t.playStatus.SETUP,y.default.addClass(this.controlBar,j),this.showPlayButton(),y.default.removeClass(this.bufferingAnimation,L)}},{key:"showBufferingAnimation",value:function(){this.controlsComponent.show(),this.setPlayStatus(t.playStatus.BUFFERING)}},{key:"hideBufferingAnimation",value:function(){this.setPlayStatus(t.playStatus.SETUP)}},{key:"setPlaying",value:function(){this.setPlayStatus(t.playStatus.PLAYING)}},{key:"showPlayButton",value:function(){return A.default.isMobile()?void y.default.addClass(this.bigPlayButton,T):void y.default.addClass(this.bigPlayButton,k)}},{key:"hidePlayButton",value:function(){return A.default.isMobile()?void y.default.removeClass(this.bigPlayButton,T):void y.default.removeClass(this.bigPlayButton,k)}}]),t}(h.default);Object.defineProperty(U,"playStatus",{value:{PAUSED:"PAUSED",PLAYING:"PLAYING",SETUP:"SETUP",BUFFERING:"BUFFERING",IDLE:"IDLE"}}),Object.defineProperty(U,"events",{value:{AD_REQUEST:"AD_REQUEST",PLAY_REQUEST:"PLAY_REQUEST",PAUSE_REQUEST:"PAUSE_REQUEST",VOLUME_CHANGE:"VOLUME_CHANGE",REQUEST_FULLSCREEN:"REQUEST_FULLSCREEN",EXIT_FULLSCREEN:"EXIT_FULLSCREEN"}}),n.default=U},{"../../events/player-events":9,"../../utils/css-helpers":52,"../../utils/datetime-utils":53,"../../utils/event-target":55,"../../utils/projector-utils":58,"./ad-volume-control":24}],18:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../../utils/projector-utils"),u=i(l),d=e("./ad-unit"),c=i(d),f=function(e){function t(e,n,i,a){r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.player=a,s.midrollConfig={loadTimeoutMillis:e.midrollLoadTimeout,playTimeoutMillis:e.midrollPlaybackTimeout,disableCompanionAds:e.midrollDisableCompanionAds,adsPerBlock:e.midrollAdsPerBlock,playbackDelay:e.midrollPlaybackDelay,unit:e.midrollUnit,isGPT:e.midrollIsGPT,networkId:e.midrollNetworkId,sz:e.midrollSz,tile:e.midrollTile,tpVideo:e.midrollTpVideo,suffix:e.midrollSuffix,custParams:e.midrollCustParams,maxRetries:e.midrollMaxRetries,fade:e.midrollFade,imageHeight:e.midrollImageHeight,minDuration:1e3,maxDuration:e.midrollMaxDuration||9e4,isMobile:u.default.isMobile(),width:n.width,height:n.height,adContainerId:e.playerId+"AdTagContainer",adType:s.getAdType(),isLive:s.player.options_.original_user_options.live};var l=a.el().querySelector(c.default.AdContainer.CONTAINER_CLASS);return s.createAd(s.midrollConfig,l,i),s}return a(t,e),s(t,[{key:"fetchAd",value:function(){var e=this.generateAdUrl(this.midrollConfig);this.getAdController().requestAds(e)}},{key:"getAdType",value:function(){return"midroll"}},{key:"fromConfig",value:function(e){return this.midrollConfig[e]}}]),t}(c.default);n.default=f},{"../../utils/projector-utils":58,"./ad-unit":22}],19:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("./ad-unit"),u=i(l),d=function(e){function t(e,n,i,a){r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.player=a,s.overlayConfig={sz:e.overlaySz,networkId:e.overlayNetworkId,unit:e.overlayUnit,isOverlay:!0,custParams:e.overlayCustParams,adType:s.getAdType(),isLive:s.player.options_.original_user_options.live,adContainerId:e.playerId+"AdTagContainer"};var l=a.el().querySelector(u.default.AdContainer.CONTAINER_CLASS);return s.createAd(s.overlayConfig,l,i),s}return a(t,e),s(t,[{key:"fetchAd",value:function(){var e=this.generateAdUrl(this.overlayConfig);this.getAdController().requestAds(e)}},{key:"getAdType",value:function(){return"overlay"}},{key:"fromConfig",value:function(e){return this.overlayConfig[e]}}]),t}(u.default);n.default=d},{"./ad-unit":22}],20:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../../utils/projector-utils"),u=i(l),d=e("./ad-unit"),c=i(d),f=function(e){function t(e,n,i,a){r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.player=a,s.prerollConfig={loadTimeoutMillis:e.prerollLoadTimeout,playTimeoutMillis:e.prerollPlaybackTimeout,disableCompanionAds:e.prerollDisableCompanionAds,adsPerBlock:e.prerollAdsPerBlock,playbackDelay:e.prerollPlaybackDelay,unit:e.prerollUnit,isGPT:e.prerollIsGPT,networkId:e.prerollNetworkId,sz:e.prerollSz,tile:e.prerollTile,tpVideo:e.prerollTpVideo,suffix:e.prerollSuffix,custParams:e.prerollCustParams,maxRetries:e.prerollMaxRetries,fade:e.prerollFade,imageHeight:e.prerollImageHeight,isMobile:u.default.isMobile(),width:n.width,height:n.height,adContainerId:e.playerId+"AdTagContainer",adType:s.getAdType(),isLive:s.player.options_.original_user_options.live};var l=a.el().querySelector(c.default.AdContainer.CONTAINER_CLASS);return s.createAd(s.prerollConfig,l,i),s}return a(t,e),s(t,[{key:"fetchAd",value:function(){var e=this.generateAdUrl(this.prerollConfig);this.getAdController().requestAds(e)}},{key:"getAdType",value:function(){return"preroll"}},{key:"fromConfig",value:function(e){return this.prerollConfig[e]}}]),t}(c.default);n.default=f},{"../../utils/projector-utils":58,"./ad-unit":22}],21:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=new window.BPlayerLog("AdTagGenerator"),a="{server_id}",s="{unit}",l="{sz}",u="{tile}",d="{tp_video}",c="{url}",f="{ord}",p="",h="1x1",v="1",y="null",m="//pubads.g.doubleclick.net/gampad",_=/[\"\"=!\+*~^\(\)<>\[\]]/g,g=/(autoplay)=(\w+)/,b=/[?&#].*/,E="",A="impl=s&gdfp_req=1&env=vp&unviewed_position_start=1",P="//ad.doubleclick.net"+a+"/pfadx/"+s+";sz="+l+";tile="+u+";tp_video="+d+";dcmt=text/xml;url="+c+";ord="+f,w="sz="+l+"&iu="+(a+s)+"&ciu_szs=300x250,728x90&output=xml_vast2&"+A+"&correlator="+f,C=m+"/ads?sz="+l+"&iu="+a+"/"+s+"&output=xml_vast2&url="+c+"&"+A+"&correlator="+f+"&vad_type=nonlinear",S=m+"/ads?sz="+l+"&iu="+a+"/"+s+"&ciu_szs=300x250&output=xml_vast2&"+A+"&correlator="+f,O=function(){function e(t){i(this,e),this.unit=t.unit,this.isGPT=t.isGPT,this.isBanner=t.isBanner,this.networkId=t.networkId,this.sz=t.sz,this.tile=t.tile,this.tpVideo=t.tpVideo,this.suffix=t.suffix,this.custParams=decodeURIComponent(t.custParams),this.isMobile=t.isMobile,this.isLive=t.isLive,this.minDuration=t.minDuration,this.maxDuration=t.maxDuration,this.adType=t.adType,this.isOverlay=t.isOverlay,this.randIncrementer=Math.round(1e3*Math.random())}return r(e,[{key:"getServerId",value:function(){var e=this.networkId?String(this.networkId):p;return e.length>0&&(e="/"+e,this.isGPT&&(e+="/")),e}},{key:"getAdTagTemplate",value:function(){return this.isBanner?C:this.isOverlay?S:this.isGPT?this.getGPTDomain()+w:P}},{key:"getAdTag",value:function(){var t=this.getServerId(),n=this.randIncrementer++ +String((new Date).getTime()),i=e.getPageUrl(),r=this.getAdTagTemplate(),p=r.replace(s,this.unit).replace(l,this.sz?this.sz:h).replace(u,this.tile?this.tile:v).replace(d,this.tpVideo?this.tpVideo:y).replace(a,t).replace(f,n).replace(c,i?i:E);if(this.isGPT&&this.pageUrl&&(p=p.replace(c,i)),this.isGPT){var m=this.getCustParams();m=m+"url="+i,this.isMobile&&(m=m.replace(g,"$1=false")),p=p+"&cust_params="+encodeURIComponent(m),this.isLive&&(p+="&pod="+this.randIncrementer++),p+="&vpos="+this.adType}return this.isOverlay&&(p=p+"&cust_params="+encodeURIComponent(this.getCustParams())),this.suffix&&this.suffix.length>0&&(p=p+(this.isGPT?"&":";")+this.suffix),this.minDuration>0&&this.maxDuration>0&&(p=p+"&pmnd="+this.minDuration+"&pmxd="+this.maxDuration),
o.debug("Generated ad tag: "+p),p}},{key:"getGPTDomain",value:function(){return m+(this.isLive?"/live":"")+"/ads?"}},{key:"getCustParams",value:function(){var e=this.custParams||E;return e&&e.length>0&&(e+="&"),e}}],[{key:"getWindowLocationPathname",value:function(){return window.location.pathname.toString()}},{key:"getPageUrl",value:function(){var t=e.getWindowLocationPathname();if(t)return t=t.replace(b,E),t=decodeURIComponent(t).replace(_,E)}}]),e}();n.default=O},{}],22:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=e("./ima3-controller"),d=i(u),c=e("./ad-tag-generator"),f=i(c),p=e("../../utils/event-target"),h=i(p),v=e("../../events/ad-events"),y=i(v),m=new window.BPlayerLog("AdUnit"),_=["onAdLoading","onAdLoaded","onAdStart","onAdResume","onAdPause","onAdPlayError","onAdCompleted","onAllAdsComplete","onContentPauseRequested","onContentResumeRequested","onPlaybackStatusUpdate","onAdsTimedOut","onDurationChange","onOverlayComplete"],g=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.ima3Controller=null;for(var n=0;n<_.length;n++){var i=_[n];e[i]=e[i].bind(e)}return e}return a(t,e),s(t,[{key:"createAd",value:function(e,t,n){m.info("creating ad"),this.ima3Controller=new d.default({videoContent:n,adContainer:t,loadTimeoutMillis:e.loadTimeoutMillis,isMobile:e.isMobile,vpaidMode:e.vpaidMode}),this.ima3Controller.on(y.default.AD_LOADING,this.onAdLoading).on(y.default.AD_LOADED,this.onAdLoaded).on(y.default.AD_STARTED,this.onAdStart).on(y.default.AD_RESUMED,this.onAdResume).on(y.default.AD_PAUSED,this.onAdPause).on(y.default.AD_PLAY_ERROR,this.onAdPlayError).on(y.default.AD_COMPLETED,this.onAdCompleted).on(y.default.ALL_ADS_COMPLETED,this.onAllAdsComplete).on(y.default.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested).on(y.default.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested).on(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.onPlaybackStatusUpdate).on([y.default.MAX_RETRIES_REACHED,y.default.AD_PLAYBACK_TIMED_OUT,y.default.AD_LOAD_TIMED_OUT].join(),this.onAdsTimedOut).on(y.default.DURATION_CHANGE,this.onDurationChange).on(y.default.OVERLAY_COMPLETE,this.onOverlayComplete),n=null,t=null}},{key:"getAdController",value:function(){return this.ima3Controller}},{key:"startAd",value:function(){this.ima3Controller.startAd()}},{key:"startOverlayAd",value:function(){this.ima3Controller.startOverlayAd()}},{key:"pause",value:function(){this.ima3Controller.pause()}},{key:"resume",value:function(){this.ima3Controller.resume()}},{key:"resize",value:function(e,t,n){this.ima3Controller.resizeAd(e,t,n)}},{key:"setVolume",value:function(e){this.ima3Controller.setVolume(e)}},{key:"generateAdUrl",value:function(e){var t=new f.default(e);return t.getAdTag()}},{key:"onAdLoading",value:function(){this.trigger(y.default.AD_LOADING)}},{key:"onAdLoaded",value:function(){this.trigger(y.default.AD_LOADED)}},{key:"onAdStart",value:function(e){this.trigger(y.default.AD_STARTED,this.getEventData(e.detail))}},{key:"onAdResume",value:function(e){this.trigger(y.default.AD_RESUMED,this.getEventData(e.detail))}},{key:"onAdPause",value:function(e){this.trigger(y.default.AD_PAUSED,this.getEventData(e.detail))}},{key:"onAdPlayError",value:function(e){this.trigger(y.default.AD_PLAY_ERROR,e.detail)}},{key:"onAdCompleted",value:function(e){this.trigger(y.default.AD_COMPLETED,this.getEventData(e.detail))}},{key:"onAllAdsComplete",value:function(e){this.trigger(y.default.ALL_ADS_COMPLETED,e.detail)}},{key:"onContentPauseRequested",value:function(){this.trigger(y.default.CONTENT_PAUSE_REQUESTED)}},{key:"onContentResumeRequested",value:function(){this.trigger(y.default.CONTENT_RESUME_REQUESTED)}},{key:"onPlaybackStatusUpdate",value:function(e){this.trigger(y.default.AD_PLAYBACK_PROGRESS_UPDATE,e.detail)}},{key:"onOverlayComplete",value:function(e){this.trigger(y.default.OVERLAY_COMPLETE,this.getEventData(e.detail))}},{key:"onAdsTimedOut",value:function(e){this.trigger(e.type,e.detail)}},{key:"onDurationChange",value:function(e){this.trigger(y.default.DURATION_CHANGE,e.detail)}},{key:"getEventData",value:function(e){return{data:Object.assign({},e.data,{type:"ad-"+this.getAdType()})}}},{key:"getAdType",value:function(){return m.error("getAdType not implemented"),""}},{key:"destroy",value:function(){m.info("Destroying Ad Unit"),this.ima3Controller.destroy(),this.ima3Controller=null;for(var e=0;e<_.length;e++){var n=_[e];this[n]=null}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(h.default);Object.defineProperty(g,"AdContainer",{value:{CONTAINER_CLASS:".bvp-ad__content"}}),n.default=g},{"../../events/ad-events":8,"../../utils/event-target":55,"./ad-tag-generator":21,"./ima3-controller":25}],23:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"canDisplayAds",value:function(t){var n=e.hasPreroll(t),i=e.hasMidroll(t),r="enabled"===t.enabled||t.jsAdsEnabled===!0;return(n||i)&&r}},{key:"hasPreroll",value:function(e){return!!(e.prerollUnit&&e.prerollUnit.length>0)}},{key:"hasMidroll",value:function(e){return!!(e.midrollUnit&&e.midrollUnit.length>0)}},{key:"hasOverlay",value:function(e){return!!(e.overlayUnit&&e.overlayUnit.length>0)}}]),e}();n.default=o},{}],24:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e*E;return Math.max(0,Math.min(E,t))}function l(e,t){h.default.transform(e,"translateX("+t+"px)")}function u(e,t,n){return!t||n?(h.default.addClass(e,P),h.default.removeClass(e,w),void h.default.removeClass(e,C)):t<=A?(h.default.addClass(e,w),h.default.removeClass(e,P),void h.default.removeClass(e,C)):(h.default.addClass(e,C),h.default.removeClass(e,P),void h.default.removeClass(e,w))}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("../../utils/event-target"),f=i(c),p=e("../../utils/css-helpers"),h=i(p),v="click",y=["onMouseDown","onDragStop","onMouseMove","onPathClick","toggleMute"],m="mousedown",_="mouseup",g="mouseleave",b="mousemove",E=70,A=.25,P="mute",w="volume-down",C="volume-up",S=function(e){function t(e){var n=e.volumeBar,i=e.volumeScrubber,a=e.volumePath,s=e.muteControl,l=e.volume,u=e.muted;r(this,t);var d=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return y.forEach(function(e){d[e]=d[e].bind(d)}),d.dragStarted=!1,d.volumeBar=n,d.volumePath=a,d.volumeScrubber=i,d.volumeBarDimensions=null,d.volumeBarWidth=null,d.volumeBarXOffset=null,d.scrubOffset=null,d.scrubberCenter=null,d.volume=l,d.muted=u,d.muteControl=s,d.volumeScrubber.addEventListener(m,d.onMouseDown),d.volumeScrubber.addEventListener(_,d.onDragStop),d.volumeBar.addEventListener(g,d.onDragStop),d.volumeBar.addEventListener(b,d.onMouseMove),d.volumePath.addEventListener(v,d.onPathClick),d.muteControl.addEventListener(v,d.toggleMute),d.setInitialVolume(d.volume),d}return a(t,e),d(t,[{key:"onMouseDown",value:function(e){this.dragStarted=!0,this.scrubberCenter=this.scrubberCenter||e.target.clientWidth/2}},{key:"onDragStop",value:function(){this.dragStarted=!1}},{key:"onVolumeChange",value:function(e){this.muted=0==e,this.setVolume(e)}},{key:"onPathClick",value:function(e){this.dragStarted=!0,this.onMouseMove(e),this.dragStarted=!1}},{key:"onMouseMove",value:function(e){if(this.dragStarted){this.volumeBarDimensions=this.volumeBarDimensions||this.volumeBar.getBoundingClientRect(),this.volumeBarWidth=this.volumeBarWidth||this.volumeBarDimensions.width,this.volumeBarXOffset=this.volumeBarDimensions.left,this.scrubOffset=this.scrubOffset||this.volumeBarWidth-E-this.scrubberCenter;var t=Math.max(0,Math.abs(this.volumeBarXOffset-e.clientX)-this.scrubOffset),n=Math.max(0,Math.min(E,t));l(this.volumeScrubber,n);var i=n/E;this.onVolumeChange(i)}}},{key:"dispatchVolumeChange",value:function(){this.trigger(t.events.VOLUME_CHANGE,{volume:this.volume,muted:this.muted}),u(this.muteControl,this.volume,this.muted)}},{key:"setInitialVolume",value:function(e){return this.muted?void this.showMuteControls():void this.setVolume(e)}},{key:"setVolume",value:function(e){e=parseFloat(e),this.volume=e,0===e?this.showMuteControls():this.hideMuteControls(),this.volumeBar.setAttribute("aria-valuenow",e.toPrecision(2));var t=s(e);l(this.volumeScrubber,t),this.dispatchVolumeChange()}},{key:"showMuteControls",value:function(){this.muted=!0,this.volumeBar.setAttribute("aria-valuenow","0.0"),l(this.volumeScrubber,0),u(this.muteControl,0,this.muted)}},{key:"hideMuteControls",value:function(){this.muted=!1;var e=s(this.volume);l(this.volumeScrubber,e),u(this.muteControl,this.volume,this.muted)}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"mute",value:function(){this.showMuteControls(),this.dispatchVolumeChange()}},{key:"unmute",value:function(){0==this.volume&&(this.volume=1),this.muted=!1,this.setVolume(this.volume)}},{key:"destroy",value:function(){this.removeAllEventListeners(),this.volumeScrubber.removeEventListener(m,this.onMouseDown),this.volumeScrubber.removeEventListener(_,this.onDragStop),this.volumeBar.removeEventListener(g,this.onDragStop),this.volumeBar.removeEventListener(b,this.onMouseMove),this.volumePath.removeEventListener(v,this.onPathClick),this.muteControl.removeEventListener(v,this.toggleMute),this.volumeBarDimensions=null,this.volumeScrubber=null,this.volumeBar=null,this.volumePath=null,this.muteControl=null}}]),t}(f.default);Object.defineProperty(S,"events",{value:{VOLUME_CHANGE:"VOLUME_CHANGE"}}),n.default=S},{"../../utils/css-helpers":52,"../../utils/event-target":55}],25:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=new A.ima.AdsRenderingSettings;return Object.assign(t,e),t}function l(e){return e.getType=function(){return O},{getError:function(){return e}}}function u(e){return!!e&&D[e]}function d(e){var t=E.default.getURLExtension(e.mediaUrl);return!!t&&M[t]}function c(e,t){return e?{clip:{contentId:e.getAdId()},duration:e.getDuration(),url:t.mediaUrl,metadata:{}}:{}}Object.defineProperty(n,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=e("../../utils/event-target"),v=i(h),y=e("../../events/ad-events"),m=i(y),_=e("../../utils/deadline"),g=i(_),b=e("../../utils/url-utils"),E=i(b),A=window.google,P=3,w="ended",C=1e4,S=4e3,O="BVP_ERROR",k=250,T="Maximum retries reached",L="Ads failed to load within specified time limit",R="Ads failed to play within specified time limit",j=2e3,D={"video/x-flv":!0,"application/x-shockwave-flash":!0},M={swf:!0,flv:!0},I=new window.BPlayerLog("IMA3Controller"),U=["onAdClicked","onAdError","onAdPlaybackTimeout","onAdsManagerLoaded","onAdUserClosed","onAllAdsCompleted","onComplete","onContentPauseRequested","onContentResumeRequested","onDurationChange","onLoaded","onPause","onResume","onStart","onVideoEnd"],x=function(e){function t(e){var n=e.adContainer,i=e.videoContent,a=e.loadTimeout,l=void 0===a?C:a,u=e.vpaidMode,d=void 0===u?A.ima.ImaSdkSettings.VpaidMode.ENABLED:u,c=e.viewMode,f=void 0===c?A.ima.ViewMode.NORMAL:c,p=e.isMobile,h=void 0!==p&&p;r(this,t);var v=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return U.forEach(function(e){v[e]=v[e].bind(v)}),v.retryCount=0,v.loadTimeout=l,v.videoContent=i,v.videoContent.addEventListener(w,v.onVideoEnd),v.viewMode=f,v.adContainer=n,v.isMobile=h,v.isPaused=!1,v.vpaidMode=d,v.adLoadedData={},v.currentVolume=0,v.remainingTime=-1,v.adDisplayContainer=new A.ima.AdDisplayContainer(n),v.adsLoader=null,v.requestAdResolver=null,v.requestAdRejector=null,v.adTagUrl=null,v.pendingRetryTimer=null,v.playbackTimeoutTimer=null,v.statusUpdateTimer=null,v.adsRenderingSettings=s({useStyledNonLinearAds:!0,restoreCustomPlaybackStateOnAdBreakComplete:!1,allowCompanionBeforeMaster:!0,loadVideoTimeout:S,enablePreloading:!0,uiElements:[]}),v}return a(t,e),f(t,[{key:"initiateAdRequest",value:function(){I.info("Initating Ad request:",this.retryCount),this.adDisplayContainer.initialize(),this.adsLoader=this.createAdsLoader();var e=this.createAdsRequest();try{this.adsLoader.requestAds(e)}catch(e){I.error("Error occurred while calling adsLoader.requestAds",e),this.onAdError(l(e))}}},{key:"createAdsLoader",value:function(){var e=new A.ima.AdsLoader(this.adDisplayContainer);return e.getSettings().setVpaidMode(this.vpaidMode),e.addEventListener(A.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded),e.addEventListener(A.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),e}},{key:"requestAds",value:function(e){var t=this,n=new Promise(function(n,i){t.trigger(m.default.AD_LOADING),t.requestAdResolver=n,t.requestAdRejector=i,t.adTagUrl=e,t.initiateAdRequest()});return(0,g.default)(this.loadTimeout,n).catch(function(e){return e===T||e===R?(t.clearPendingRetryTimer(),Promise.reject(e)):(I.warn(L),t.clearPendingRetryTimer(),t.adLoaded||t.trigger(m.default.AD_LOAD_TIMED_OUT),Promise.reject(L))})}},{key:"retry",value:function(e){var t=this;return this.adsManager&&this.cleanupAdsManager(),this.retryCount<P?(this.retryCount++,I.warn("Retry "+this.retryCount+" of "+P+" executing:",e),void(this.pendingRetryTimer=setTimeout(function(){t.initiateAdRequest()},0))):(I.warn(T),this.trigger(m.default.MAX_RETRIES_REACHED),this.requestAdRejector(T),this.clearAdPlaybackTimer(),void this.clearPendingRetryTimer())}},{key:"startAd",value:function(){try{if(!this.adsManager)return;this.clearAdPlaybackTimer(),this.adsManager.start(),this.resizeAd(this.width,this.height,A.ima.ViewMode.NORMAL)}catch(e){I.error("Error occurred while adsManager.start call",e),this.onAdError(l(e))}}},{key:"startOverlayAd",value:function(){try{if(!this.adsManager)return;this.clearAdPlaybackTimer(),this.adsManager.start()}catch(e){I.error("Error occurred while adsManager.start was called for Overlay ad",e),this.onAdError(l(e))}}},{key:"createAdsManager",value:function(e){var t=e.getAdsManager(this.adDisplayContainer,this.adsRenderingSettings);return t.addEventListener(A.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),t.addEventListener(A.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted),t.addEventListener(A.ima.AdEvent.Type.CLICK,this.onAdClicked),t.addEventListener(A.ima.AdEvent.Type.COMPLETE,this.onComplete),t.addEventListener(A.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),t.addEventListener(A.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),t.addEventListener(A.ima.AdEvent.Type.DURATION_CHANGE,this.onDurationChange),t.addEventListener(A.ima.AdEvent.Type.LOADED,this.onLoaded),t.addEventListener(A.ima.AdEvent.Type.PAUSED,this.onPause),t.addEventListener(A.ima.AdEvent.Type.RESUMED,this.onResume),t.addEventListener(A.ima.AdEvent.Type.STARTED,this.onStart),t.addEventListener(A.ima.AdEvent.Type.USER_CLOSE,this.onAdUserClosed),t}},{key:"createAdsRequest",value:function(){var e=this.videoContent.getBoundingClientRect(),t=e.width,n=e.height;this.width=t,this.height=n;var i=new A.ima.AdsRequest;return i.adTagUrl=this.adTagUrl,i.linearAdSlotWidth=t,i.linearAdSlotHeight=n,i.nonLinearAdSlotWidth=t,i.nonLinearAdSlotHeight=n/3,i}},{key:"destroy",value:function(){var e=this;this.clearAdPlaybackTimer(),this.clearPendingRetryTimer(),this.clearStatusUpdateTimer(),this.videoContent.removeEventListener(w,this.onVideoEnd),this.videoContent=null,this.adContainer=null,this.removeAdsManagerEventListeners(),setTimeout(function(){e.adsLoader.destroy(),e.adsLoader=null,e.destroyAdsManager(),e.adDisplayContainer.destroy(),e.adDisplayContainer=null},j),U.forEach(function(t){e[t]=null}),p(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"cleanupAdsManager",value:function(){this.removeAdsManagerEventListeners(),this.destroyAdsManager()}},{key:"destroyAdsManager",value:function(){this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)}},{key:"removeAdsManagerEventListeners",value:function(){this.adsManager&&(this.adsManager.removeEventListener(A.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.removeEventListener(A.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.adsManager.removeEventListener(A.ima.AdEvent.Type.CLICK,this.onAdClicked),this.adsManager.removeEventListener(A.ima.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.removeEventListener(A.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.removeEventListener(A.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.removeEventListener(A.ima.AdEvent.Type.DURATION_CHANGE,this.onDurationChange),this.adsManager.removeEventListener(A.ima.AdEvent.Type.LOADED,this.onLoaded),this.adsManager.removeEventListener(A.ima.AdEvent.Type.PAUSED,this.onPause),this.adsManager.removeEventListener(A.ima.AdEvent.Type.RESUMED,this.onResume),this.adsManager.removeEventListener(A.ima.AdEvent.Type.STARTED,this.onStart),this.adsManager.removeEventListener(A.ima.AdEvent.Type.USER_CLOSE,this.onAdUserClosed))}},{key:"startStatusUpdateTimer",value:function(e){var t=this,n=Date.now();this.statusUpdateTimer=setInterval(function(){if(t.adsManager){var i=t.adsManager.getRemainingTime();i<0&&(i=e-Math.abs(n-Date.now())/1e3),t.remainingTime=i,t.trigger(m.default.AD_PLAYBACK_PROGRESS_UPDATE,{remainingTime:i,elapsedTime:e-i,duration:e}),i<=0&&t.clearStatusUpdateTimer()}},k)}},{key:"clearPendingRetryTimer",value:function(){this.pendingRetryTimer&&(clearTimeout(this.pendingRetryTimer),this.pendingRetryTimer=null)}},{key:"clearStatusUpdateTimer",value:function(){clearInterval(this.statusUpdateTimer),this.statusUpdateTimer=null}},{key:"clearAdPlaybackTimer",value:function(){this.playbackTimeoutTimer&&clearTimeout(this.playbackTimeoutTimer)}},{key:"pause",value:function(){I.info("Ad paused"),this.adsManager.pause()}},{key:"resume",value:function(){I.info("Ad resumed"),this.adsManager.resume()}},{key:"setVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.currentVolume=e,this.adsManager&&this.adsManager.setVolume(e)}},{key:"startAdPlaybackTimer",value:function(e){this.playbackTimeoutTimer=setTimeout(this.onAdPlaybackTimeout,e)}},{key:"positionNonLinearAd",value:function(e){this.adContainer.x=this.width/2-e.width/2;var t=this.viewMode;t===A.ima.ViewMode.FULLSCREEN?this.adContainer.y=document.body.offsetHeight-e.height:t===A.ima.ViewMode.NORMAL&&(this.adContainer.y=this.height-e.height)}},{key:"resizeAd",value:function(e,t,n){this.adsManager.resize(e,t,n)}},{key:"onAdsManagerLoaded",value:function(e){I.info("Ad manager loaded"),this.adsManager=this.createAdsManager(e),this.adsManager.init(this.width,this.height,this.viewMode),I.info("triggering AdEvents.ADS_READy",this.adsManager),this.trigger(m.default.ADS_READY,{adsManager:this.adsManager})}},{key:"onAdError",value:function(e){this.clearPendingRetryTimer();var t=e.getError(),n=t.getType();switch(I.error("Ad failed to load:",t),n){case A.ima.AdError.Type.AD_LOAD:this.trigger(m.default.AD_LOAD_ERROR,{error:t});break;case A.ima.AdError.Type.AD_PLAY:this.trigger(m.default.AD_PLAY_ERROR,{error:t});break;case O:this.trigger(m.default.AD_LOAD_ERROR,{error:t})}this.retry(t)}},{key:"onContentPauseRequested",value:function(){this.clearAdPlaybackTimer(),this.videoContent.removeEventListener(w,this.onVideoEnd),this.trigger(m.default.CONTENT_PAUSE_REQUESTED)}},{key:"onContentResumeRequested",value:function(){this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.videoContent.addEventListener(w,this.onVideoEnd),this.trigger(m.default.CONTENT_RESUME_REQUESTED)}},{key:"onDurationChange",value:function(e){var t=e.getAd(),n=t.getDuration();this.trigger(m.default.DURATION_CHANGE,{duration:n})}},{key:"onAllAdsCompleted",value:function(e){I.info("All Ads completed",e.getAd()),this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(m.default.ALL_ADS_COMPLETED),this.isPaused&&I.warn("Ads completed despite being paused!")}},{key:"onLoaded",value:function(e){var t=e.getAd();this.adLoadedData=e.getAdData();var n=t.getContentType();return I.info("onLoaded is triggered",e,e.getAd(),e.getAdData()),this.adLoadedData?this.isMobile&&u(n)?void this.onAdError(l(new Error("Disallowed mobile content"))):this.isMobile&&""===n&&d(this.adLoadedData)?void this.onAdError(l(new Error("Disallowed mobile url"))):(t&&!t.isLinear()&&this.positionNonLinearAd(e.getAdData()),this.adLoaded=!0,this.clearPendingRetryTimer(),I.info("trigger AdEvents.AD_LOADED"),this.trigger(m.default.AD_LOADED,{data:c(t,this.adLoadedData)}),void this.requestAdResolver()):void this.onAdError(l(new Error("No ad data found")))}},{key:"onStart",value:function(e){var t=e.getAd();I.info("Ad started",t),this.setVolume(this.currentVolume),this.retryCount=0,this.startStatusUpdateTimer(t.getDuration()),this.startAdPlaybackTimer(this._getAdPlaybackTimerThreshold(t.getDuration())),this.trigger(m.default.AD_STARTED,{data:c(t,this.adLoadedData)})}},{key:"onComplete",value:function(e){this.remainingTime=-1;var t=e.getAd();this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(m.default.AD_COMPLETED,{data:c(t,this.adLoadedData)})}},{key:"onPause",value:function(e){var t=e.getAd();this.isPaused=!0,this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(m.default.AD_PAUSED,{data:c(t,this.adLoadedData)})}},{key:"onResume",value:function(e){var t=e.getAd();this.isPaused=!1,this.startStatusUpdateTimer(t.getDuration()),this.startAdPlaybackTimer(this._getAdPlaybackTimerThreshold(t.getDuration())),this.trigger(m.default.AD_RESUMED,{data:c(t,this.adLoadedData)})}},{key:"onAdClicked",value:function(e){var t=e.getAd();I.info("Ad clicked",t),this.pause(),this.trigger(m.default.AD_CLICKED,{data:c(t,this.adLoadedData)})}},{key:"onVideoEnd",value:function(){I.info("onVideoEnd"),this.adsLoader.contentComplete()}},{key:"onAdUserClosed",value:function(e){var t=e.getAd();this.trigger(m.default.OVERLAY_COMPLETE,{data:c(t,this.adLoadedData)})}},{key:"onAdPlaybackTimeout",value:function(){I.warn(R),this.trigger(m.default.AD_PLAYBACK_TIMED_OUT),this.requestAdRejector(R)}},{key:"_getAdPlaybackTimerThreshold",value:function(e){return 1e3*(this._getRemainingTime(e)+1)}},{key:"_getRemainingTime",value:function(e){return this.remainingTime&&this.remainingTime>=0?this.remainingTime:e}}]),t}(v.default);n.default=x},{"../../events/ad-events":8,"../../utils/deadline":54,"../../utils/event-target":55,"../../utils/url-utils":60}],26:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-buffering",innerHTML:'\n      <div class="bvp-ad-buffering__spinner"></div>\n      '})}}]),t}(l);n.default=u},{}],27:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-control-bar",innerHTML:'\n      <div class="bvp-ad-progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">\n        <div class="bvp-ad-progress-bar__progress"></div>\n      </div>\n      <button class="bvp-ad-play-button bvp-ad-button" aria-live="polite"></button>\n      <div class="bvp-ad-sound-menu" aria-live="polite">\n        <div class="bvp-ad-sound-menu__mute-control bvp-ad-button"></div>\n        <div class="bvp-ad-volume-bar" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0">\n          <div class="bvp-ad-volume-bar__container">\n            <div class="bvp-ad-volume-bar__scrubber"></div>\n          </div>\n        </div>\n      </div>\n      <div class="bvp-ad-time">\n        <span class="bvp-ad-time__elapsed">0:00</span>\n        <span class="bvp-ad-time__duration">0:00</span>\n      </div>\n      <div class="bvp-ad-slug"></div>\n      <div class="bvp-ad-fullscreen bvp-ad-button"></div>\n    '})}}]),t}(l);n.default=u},{}],28:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=e("../../utils/css-helpers"),d=i(u),c=videojs.getComponent("Component"),f="bvp-ad--active",p="bvp-ad--overlay",h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.durationElement=null,i.elapsedTimeElement=null,i.progressBar=null,i.progressIndicator=null,i.on("mouseenter",i.onMouseEnter),i.on("mouseout",i.onMouseOut),i}return a(t,e),s(t,[{key:"enterOverlayMode",value:function(){this.addClass(p)}},{key:"exitOverlayMode",value:function(){this.removeClass(p)}},{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad"})}},{key:"setCountdownTime",value:function(e,t){this.durationElement=this.durationElement||this.$(".bvp-ad-time__duration"),this.elapsedTimeElement=this.elapsedTimeElement||this.$(".bvp-ad-time__elapsed"),
this.durationElement.textContent=t,this.elapsedTimeElement.textContent=e}},{key:"setProgressBar",value:function(e){this.progressBar=this.progressBar||this.$(".bvp-ad-progress-bar"),this.progressIndicator=this.progressIndicator||this.$(".bvp-ad-progress-bar__progress"),d.default.transform(this.progressIndicator,"translateX(-"+e+"%)"),this.progressBar.setAttribute("aria-valuenow",e)}},{key:"onMouseEnter",value:function(){this.addClass(f)}},{key:"onMouseOut",value:function(){this.removeClass(f)}},{key:"dispose",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.durationElement=this.elapsedTimeElement=this.progressBar=this.progressIndicator=null}}]),t}(c);n.default=h},{"../../utils/css-helpers":52}],29:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"button",{className:"bvp-ad-big-play-button"},{"aria-live":"polite"})}}]),t}(l);n.default=u},{}],30:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){var e=this.id();return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad__content",id:e.concat("AdTagContainer")})}}]),t}(l);n.default=u},{}],31:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./videojs-ad-buffering-spinner"),s=i(a),l=e("./videojs-ad-controlbar"),u=i(l),d=e("./ad-controller"),c=i(d),f=e("./videojs-ad-controls"),p=i(f),h=e("./videojs-ad-play-button"),v=i(h),y=e("./videojs-ad-tag-container"),m=i(y),_=e("./ad-utils"),g=i(_),b=e("../../events/player-events"),E=i(b),A=e("../../utils/projector-utils"),P=i(A),w=new window.BPlayerLog("GoogleAdsPlugin"),C=function(){function e(t,n){r(this,e),this.options=t,this.player=n,videojs.registerComponent("AdControlsComponent",p.default),videojs.registerComponent("AdBufferingSpinner",s.default),videojs.registerComponent("AdPlayButton",v.default),videojs.registerComponent("AdTagContainer",m.default),videojs.registerComponent("AdControlBar",u.default),w.info("Google Ads Plugin Initialized")}return o(e,[{key:"onReady",value:function(){w.info("Plugin Ready Starting Ad Controller"),this.adController=this.player.AdController=new c.default(this.options,this.player)}},{key:"onPlayPreroll",value:function(){this.adController&&(this.adController.destroy(),this.adController=this.player.AdController=null);var e=Object.assign({forcePlay:!0},this.options);this.adController=this.player.AdController=new c.default(e,this.player),this.adController.isMobile&&this.adController.prerollForMobile()}},{key:"dispose",value:function(){this.adController.destroy(),this.adController=null,this.player.AdController=null,this.player=this.options=null}}],[{key:"init",value:function(t){var n=this,i=P.default.isMiniPlayer(n.options_);if(!i&&g.default.canDisplayAds(t)){if(!P.default.isHlsSupported()||P.default.forcedToPlayFlash(this.options_))return void w.warn("Plugin not enabled for non-Html5 techs.");var r=new e(t,n);n.ready(r.onReady.bind(r)),n.on(E.default.PLAY_PREROLL,r.onPlayPreroll.bind(r)),n.on(E.default.DISPOSE,function(){r.dispose(),r=null})}}}]),e}();videojs.plugin("GoogleAdsPlugin",C.init),n.default=C},{"../../events/player-events":9,"../../utils/projector-utils":58,"./ad-controller":16,"./ad-utils":23,"./videojs-ad-buffering-spinner":26,"./videojs-ad-controlbar":27,"./videojs-ad-controls":28,"./videojs-ad-play-button":29,"./videojs-ad-tag-container":30}],32:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?e.replace(c,f):e:""}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../utils/projector-utils"),l=i(s),u=e("../utils/query-string"),d=i(u),c=/\bvod\b/g,f="embed/vod",p=function(){function e(t,n,i){if(r(this,e),!t)throw new Error("Options are missing");if(!i)throw new Error("Autoplay is missing");var a=t.ad_code_prefix,s=void 0===a?"":a,l=t.ad_tag_midroll,u=void 0===l?"":l,d=t.ad_tag_overlay,c=void 0===d?"":d,f=t.module_ad_player;this.options=t,this.autoplay=i.getReportingValues(t).dfp,this.video=n,this.live=Boolean(t.live),this.offsiteEmbed="true"===String(t.offsite_embed)||"offsite"===t.partner;var p=this.isPrerollAdUnit()?this.addVerticalToUnit():this.getUnitWithVertical();this.prerollUnit=o(p?s+p:"",this.offsiteEmbed),this.midrollUnit=this.live?o(u,this.offsiteEmbed):"",this.overlayUnit=o(c,this.offsiteEmbed),this.adsEnabled="disabled"!==f&&Boolean(this.prerollUnit||this.midrollUnit||this.overlayUnit)}return a(e,[{key:"isPrerollAdUnit",value:function(){return Boolean(this.video&&this.video.getPrerollAdUnit()&&this.options.vertical)}},{key:"addVerticalToUnit",value:function(){if(this.options.ad_tag)return this.options.ad_tag;if(this.isPrerollAdUnit())return this.options.vertical+"/"+this.video.getPrerollAdUnit()}},{key:"getUnitWithVertical",value:function(){return this.live?this.options.ad_tag:this.options.ad_tag?this.options.ad_tag:this.video?this.video.getAdTag():null}},{key:"computedParameters",value:function(){var e={},t=this.video?this.video.getRawNiData():null;t&&(e.ni=t);var n=this.video?this.video.getId():null;return n&&(e.guid=n),e.autoplay=this.autoplay,e.platform=l.default.isMobile()?"mobile":"desktop",e}},{key:"mergeCustomParameters",value:function(e){e&&(e=decodeURIComponent(e));var t=d.default.parseQueryString(e),n=this.computedParameters(),i=Object.assign({},t,n),r=Object.keys(i).reduce(function(e,t){var n=i[t];return e&&(e+="&"),""+e+t+"="+n},"");return encodeURIComponent(r)}},{key:"prepare",value:function(){if(this.adsEnabled){var e=this.options.ad_tag_cust_params_preroll,t=this.options.ad_tag_cust_params_midroll;return{module_ad_player:"enabled",ad_tag:this.prerollUnit,ad_tag_midroll:this.midrollUnit,ad_tag_overlay:this.overlayUnit,ad_tag_cust_params_preroll:this.prerollUnit?this.mergeCustomParameters(e):"",ad_tag_cust_params_midroll:this.midrollUnit?this.mergeCustomParameters(t):"",share_overrides:{ad_tag:this.prerollUnit,ad_tag_midroll:this.midrollUnit}}}return{module_ad_player:"disabled",ad_tag:"",ad_tag_midroll:"",ad_tag_overlay:"",ad_tag_cust_params_preroll:"",share_overrides:{ad_tag:"",ad_tag_midroll:""}}}}]),e}();n.default=p},{"../utils/projector-utils":58,"../utils/query-string":59}],33:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return e.autoPlay}function s(e){return e.hasOwnProperty(h)}Object.defineProperty(n,"__esModule",{value:!0});var l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=e("../utils/projector-utils"),c=i(d),f="autoplay",p="continuousplay",h="continuous_play_previous_url",v="F",y="false",m="mobile",_="offsite",g="offsiteembed",b="T",E="true",A="video_autoplay_on_page",P="vod",w=Object.freeze({bss_cont_play:0,bss_auto_play:0}),C=(l={},o(l,f+E+p+y+m+y+P+y,{bss_cont_play:0,bss_auto_play:1}),o(l,f+y+p+y+m+y+P+y,w),o(l,f+E+p+y+m+E+P+y,w),o(l,f+y+p+y+m+E+P+y,w),o(l,f+y+p+E+m+y+P+y,{bss_cont_play:1,bss_auto_play:1}),o(l,f+y+p+y+m+E+P+y,w),o(l,f+y+p+E+m+E+P+y,{bss_cont_play:1,bss_auto_play:0}),o(l,f+E+p+y+m+y+P+E,{bss_cont_play:0,bss_auto_play:1}),o(l,f+E+p+E+m+y+P+E,{bss_cont_play:1,bss_auto_play:1}),o(l,f+y+p+y+m+y+P+y+g+E,{bss_cont_play:0,bss_auto_play:0,bss_offsite:1}),l),S=function(){function e(){r(this,e)}return u(e,null,[{key:"getAutoPlayBoolean",value:function(e){var t=!!e.hasOwnProperty(f)&&e.autoplay;return!!e.hasOwnProperty(A)||t}},{key:"getAutoPlayTruthString",value:function(e){return f+(e.autoPlay?E:y)+p+(e.continuousPlayPreviousUrl?E:y)+m+(c.default.isMobile()?E:y)+P+(e.vod?E:y)+(e.offsiteEmbed?g+E:"")}},{key:"getComscoreAutoplayValues",value:function(t){return C[e.getAutoPlayTruthString(t)]||w}},{key:"setConvivaAutoplayValues",value:function(e,t){e.convivaAutoplay=t.autoPlay?b:v,e.convivaCPlay=t.continuousPlayPreviousUrl?b:v}},{key:"getAutoplayConfigData",value:function(t){var n=t.userOptions||t;return{continuousPlayPreviousUrl:s(n),autoPlay:e.getAutoPlayBoolean(n),vod:!n.live,offsiteEmbed:n.offsite_embed||n.partner===_}}},{key:"getReportingValues",value:function(t){var n=e.getAutoplayConfigData(t);t.dataSetup&&(e.setConvivaAutoplayValues(t.dataSetup.flash.flashVars,n),e.setConvivaAutoplayValues(t.dataSetup.conviva_custom_tags,n));var i=e.getComscoreAutoplayValues(n);return{dfp:a(n),comscore:i,analytics:{continuousPlay:Boolean(i.bss_cont_play),autoplay:Boolean(i.bss_auto_play)}}}}]),e}();n.default=S},{"../utils/projector-utils":58}],34:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../../config/projector_defaults.json"),s=i(a),l=e("../../config/livestreams.json"),u=i(l),d=e("../utils/deadline"),c=i(d),f=e("/bb/web/jenkins/workspace/deploy-projector/build//resources.js"),p=i(f),h=new window.BPlayerLog("ProjectorConfig"),v=300,y=function(){function e(t){var n=t.userOptions,i=t.version,o=t.bmmrAsset,a=t.liveId;r(this,e),Object.defineProperties(this,{userOptions:{value:n},version:{value:i},bmmrAsset:{value:o},liveId:{value:a}}),this.defaultOptions=Object.freeze(s.default),this.liveStreams=Object.freeze(u.default)}return o(e,null,[{key:"load",value:function(t){return new e(t).loadRemoteOverrides()}}]),o(e,[{key:"loadRemoteOverrides",value:function(){var e=this,t=p.default.CONFIG_OVERWRITES,n=(0,c.default)(v,fetch(t)).then(function(e){return e.json()}).then(function(t){e.defaultOptions=Object.freeze(t.projector_defaults),e.liveStreams=Object.freeze(t.livestreams)}).catch(function(e){return h.warn("ProjectorConfig: Unable to load //"+t+" with error "+e)});return n.then(function(){return e}).catch(function(){return e})}}]),e}();n.default=y},{"../../config/livestreams.json":5,"../../config/projector_defaults.json":6,"../utils/deadline":54,"/bb/web/jenkins/workspace/deploy-projector/build//resources.js":1}],35:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=t.url,i=t.type;return new u.default(n,i,e)}function a(e,t,n){n.cname=e,t.push(n)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("./stream"),u=i(l),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments[2];r(this,e),this.name=t,this.weight=n,this.streams=i}return s(e,null,[{key:"getStreams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.combineStreams(e.parse(t));return n.streams}},{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce(function(t,n){var i=n.name,r=n.weight,a=n.streams,s=a.map(o.bind(null,r));return t.push(new e(i,r,s)),t},[])}},{key:"combineStreams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],i=t.reduce(function(e,t){var i=t.name,r=t.streams;return r.forEach(a.bind(null,i,n)),e+"_"+i},"");return new e(i,null,n)}}]),e}();n.default=d},{"./stream":42}],36:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){Object.keys(e).map(function(i){var r=e[i];void 0!==t[i]&&(n[r]=t[i])})}function o(e,t){var n=s.test(e);return n&&t===l||!n&&t!==l}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=/\.m3u8/,l="hls",u="hds",d={posterUrl:"poster",poster_as_slate:"poster_as_slate",stream_type:"stream_type",conviva_account:"conviva.account",conviva_custom_tags:"conviva.custom.tags",conviva_customer_number:"conviva.customerNumber",conviva_service_url:"conviva.serviceUrl",buffering_animation:"buffering.animation",log_debug:"log.*.debug",use_share_overlay:"use_share_overlay",ad_tag:"ads.preroll.unit",ad_tag_midroll:"ads.midroll.unit",ad_tag_overlay:"ads.overlay.unit",ad_network_id_preroll:"ads.preroll.network.id",ad_network_id_midroll:"ads.midroll.network.id",ad_network_id_overlay:"ads.overlay.network.id",ad_tag_suffix_preroll:"ads.preroll.suffix",ad_tag_suffix_midroll:"ads.midroll.suffix",ad_tag_suffix_overlay:"ads.overlay.suffix",ad_midroll_min_duration:"ads.midroll.minduration",ad_midroll_max_duration:"ads.midroll.maxduration",ad_tag_sz_preroll:"ads.preroll.sz",ad_tag_sz_midroll:"ads.midroll.sz",ad_tag_sz_overlay:"ads.overlay.sz",ad_tag_tile_preroll:"ads.preroll.tile",ad_tag_tile_midroll:"ads.midroll.tile",ad_tag_tile_overlay:"ads.overlay.tile",ad_tag_gpt_preroll:"ads.preroll.gpt",ad_tag_gpt_midroll:"ads.midroll.gpt",ad_tag_gpt_overlay:"ads.overlay.gpt",ad_tag_cust_params_preroll:"ads.preroll.cust_params",ad_tag_cust_params_midroll:"ads.midroll.cust_params",ad_tag_cust_params_overlay:"ads.overlay.cust_params",disable_overlay_companion_ads:"ads.overlay.companions.disable",disable_companion_ads:"ads.companions.disable",ads_vast_overlay_delay:"ads.vast.overlay.delay",ads_playback_timeout:"ads.playback.timeout",ads_vast_timeout:"ads.vast.timeout",ads_vast_overlay_timeout:"ads.vast.overlay.timeout",ads_vast_overlay_width:"ads.vast.overlay.width",ads_vast_overlay_height:"ads.vast.overlay.height",ads_vast_overlay_attribution:"ads.vast.overlay.attribution",ad_vast_overlay_vertical_offset_from_bottom_normal_screen:"ads.vast.overlay.offset.from.bottom.normal.screen",ad_vast_overlay_vertical_offset_from_bottom_full_screen:"ads.vast.overlay.offset.from.bottom.full.screen",ads_vast_overlay_fade:"ads.vast.overlay.fade",ads_live_per_block:"ads.live.ads_per_block",ads_live_playback_delay:"ads.live.playback_delay",ui_autohide_timeout:"ui.autohide.timeout",use_js_ads:"jsAdsEnabled",autoplay:"autoplay","video.start_at":"start_at",start_muted:"start_muted",continuous_play_previous_url:"continuous_play_previous_url",live:"live",module_ad_player:"module.com.bloomberg.player.ads::AdPlayer",log_debug_2:"log.com.bloomberg.player::Player.debug",ui_skin_url:"ui.skin.url",ui_controls_fullscreen:"controls.fullscreen"},c=function(){function e(){i(this,e)}return a(e,null,[{key:"addOptions",value:function(t){e.declareHlsSupportForFlash(),t.flash||(t.flash={}),t.flash.swf=t.swf,e.addFlashVars(t)}},{key:"declareHlsSupportForFlash",value:function(){var e=videojs.getTech("Flash");e.formats["application/x-mpegurl"]="M3U8"}},{key:"addFlashVars",value:function(t){t.flash.flashVars||(t.flash.flashVars={}),r(d,t,t.flash.flashVars),e.addStreamTypeToFlashVars(t),e.mergeMetadataIntoFlashVars(t),e.addSrcToFlashVars(t),e.addConvivaCustomTagsToFlashVars(t)}},{key:"addStreamTypeToFlashVars",value:function(e){e.flash.flashVars.stream_type=e.live?l:u}},{key:"mergeMetadataIntoFlashVars",value:function(e){e.flash.flashVars.metadata=encodeURIComponent(JSON.stringify(e.metadata))}},{key:"addSrcToFlashVars",value:function(e){for(var t=[],n=e.streams||[],i=0;i<n.length;i++){var r=n[i];if(o(r.url,e.flash.flashVars.stream_type)){var a={src:r.url,type:r.type,cname:r.cname,"data-bitrate":r.bitrate};r.percent>=0&&(a[""]=r.percent),t.push(a)}}t.length&&(e.flash.flashVars.src=encodeURIComponent(JSON.stringify(t)))}},{key:"addConvivaCustomTagsToFlashVars",value:function(e){var t=e.flash.flashVars;t["conviva.custom.tags"]&&(t["conviva.custom.tags"]=encodeURIComponent(JSON.stringify(t["conviva.custom.tags"])))}}]),e}();n.default=c},{}],37:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){Object.keys(e).map(function(i){var r=e[i];void 0!==t[r]&&(n[i]=t[r])})}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a={bufferingAnimation:"buffering_animation",prerollUnit:"ad_tag",midrollUnit:"ad_tag_midroll",overlayUnit:"ad_tag_overlay",prerollNetworkId:"ad_network_id_preroll",midrollNetworkId:"ad_network_id_midroll",overlayNetworkId:"ad_network_id_overlay",prerollSuffix:"ad_tag_suffix_preroll",midrollSuffix:"ad_tag_suffix_midroll",overlaySuffix:"ad_tag_suffix_overlay",midrollMinDuration:"ad_midroll_min_duration",midrollMaxDuration:"ad_midroll_max_duration",prerollSz:"ad_tag_sz_preroll",midrollSz:"ad_tag_sz_midroll",overlaySz:"ad_tag_sz_overlay",prerollTile:"ad_tag_tile_preroll",midrollTile:"ad_tag_tile_midroll",overlayTile:"ad_tag_tile_overlay",prerollIsGPT:"ad_tag_gpt_preroll",midrollIsGPT:"ad_tag_gpt_midroll",overlayIsGPT:"ad_tag_gpt_overlay",prerollCustParams:"ad_tag_cust_params_preroll",midrollCustParams:"ad_tag_cust_params_midroll",overlayCustParams:"ad_tag_cust_params_overlay",overlayDisableCompanionAds:"disable_overlay_companion_ads",prerollDisableCompanionAds:"disable_companion_ads",midrollDisableCompanionAds:"disable_companion_ads",overlayDelay:"ads_vast_overlay_delay",prerollPlaybackTimeout:"ads_playback_timeout",midrollPlaybackTimeout:"ads_playback_timeout",prerollLoadTimeout:"ads_vast_timeout",midrollLoadTimeout:"ads_vast_timeout",overlayLoadTimeout:"ads_vast_overlay_timeout",overlayImageWidth:"ads_vast_overlay_width",overlayImageHeight:"ads_vast_overlay_height",overlayAttribution:"ads_vast_overlay_attribution",overlayFade:"ads_vast_overlay_fade",debug:"log_debug",prerollAdsPerBlock:"preroll_ads_per_block",midrollAdsPerBlock:"ads_live_per_block",prerollPlaybackDelay:"preroll_ads_playback_delay",midrollPlaybackDelay:"ads_live_playback_delay",controlsFadeMillis:"ui_autohide_timeout",jsAdsEnabled:"use_js_ads",prerollMaxRetries:"ads_max_retries_preroll",midrollMaxRetries:"ads_max_retries_midroll"},s={ns_site:"comscore_ns_site",page_level_tags:"comscore_page_level_tags"},l=function(){function e(){i(this,e)}return o(e,null,[{key:"addOptions",value:function(t){t.plugins||(t.plugins={}),e.addGoogleAdOptions(t),e.addComscoreOptions(t)}},{key:"addGoogleAdOptions",value:function(e){e.plugins.GoogleAdsPlugin||(e.plugins.GoogleAdsPlugin={}),r(a,e,e.plugins.GoogleAdsPlugin)}},{key:"addComscoreOptions",value:function(e){e.plugins.ComscoreStreamSensePlugin||(e.plugins.ComscoreStreamSensePlugin={}),r(s,e,e.plugins.ComscoreStreamSensePlugin)}}]),e}();n.default=l},{}],38:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=new window.BPlayerLog("PosterSize"),a=[{width:320,height:180},{width:640,height:360},{width:960,height:540}],s=/(.*)-1x-1\.(.*)/,l=function(){function e(){i(this,e)}return r(e,null,[{key:"isTemplateImage",value:function(e){return s.test(e)}},{key:"closestImage",value:function(t,n,i){if(!e.isTemplateImage(i))return o.warn("Cannot resize: Invalid template image",i),i;if(t=parseFloat(t),n=parseFloat(n),!(t>0&&n>0))return o.warn("Cannot resize: Invalid container size",t,n),i;var r=999999999,l=null;return a.forEach(function(e){var i=e.width,o=e.height,a=Math.abs(t/n-i/o)+Math.abs(t-i)/1e3+Math.abs(n-o)/1e3;a<r&&(r=a,l={width:i,height:o})}),l?i.replace(s,"$1"+l.width+"x"+l.height+".$2"):(o.warn("Could not find a closest image for "+i+" for container size",t,n),i)}}]),e}();n.default=l},{}],39:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=fetch(a(e),{mode:"cors"});return(0,v.default)(_,t).then(s)}function a(e){return""+m+e+"/decision"}function s(e){if(200!=e.status)throw new Error("Cedexus Priority Provider: Unexepected response status "+e.status);return e.json()}function l(e,t){var n=e.providers,i=u(n,g);return d(t,i)}function u(e,t){return e.reduce(function(e,n,i){return e[n[t]]=i,e},{})}function d(e,t){return e.sort(function(e,n){var i=new window.URL(e.url).host,r=new window.URL(n.url).host,o=t[i],a=t[r];return void 0!==o&&void 0!==a?o-a:void 0!==o?-1:void 0!==a?1:0})}function c(e,t){var n=e.providers,i=u(n,b);return f(t,i)}function f(e,t){return e.sort(function(e,n){var i=e.name,r=n.name,o=t[i],a=t[r];return void 0!==o&&void 0!==a?o-a:void 0!==o?-1:void 0!==a?1:0})}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=e("../../../utils/deadline"),v=i(h),y=new window.BPlayerLog("CedexisPriorityProvider"),m="//hopx.cedexis.com/zones/1/customers/12403/apps/",_=500,g="host",b="provider",E=function(){function e(t){r(this,e),this.appId=t}return p(e,[{key:"prioritizeStreams",value:function(e){return e?this.appId?o(this.appId).then(function(t){return l(t,e)}).catch(function(t){return y.warn("Cedexis Priority Provider: unable to prioritize streams: "+t),e}):(y.info("No cedexis app id. Skipping Cedexis decision and returning streams unchanged"),Promise.resolve(e)):Promise.resolve(null)}},{key:"prioritizeCDNs",value:function(e){return e?this.appId?o(this.appId).then(function(t){return c(t,e)}).catch(function(t){return y.warn("Cedexis Priority Provider: unable to prioritize cdns: "+t),e}):(y.info("No cedexis app id. Skipping Cedexis decision and returning cdns unchanged"),Promise.resolve(e)):Promise.resolve(null)}}]),e}();n.default=E},{"../../../utils/deadline":54}],40:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=[].concat(e),i=[],r=n.reduce(function(e,n){return e+n[t]},0),o=void 0,a=void 0,s=void 0;n.length>0&&r>l;){o=0,a=Math.random()*r;for(var u=0,d=n.length;u<d;u++)if(s=n[u],o+=s[t],a<=o){i.push(s),n.splice(u,1),r-=s[t];break}}return i.concat(n)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a="percent",s="weight",l=1e-13,u=function(){function e(){i(this,e)}return o(e,[{key:"prioritizeStreams",value:function(e){return e?r(e,a):null}},{key:"prioritizeCDNs",value:function(e){return e?r(e,s):null}}]),e}();n.default=u},{}],41:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){videojs.addLanguage("en",y.default)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../projector-autoplay"),l=i(s),u=e("../bmmr-asset-js/bmmr-asset-js"),d=i(u),c=e("./cdn"),f=i(c),p=e("./prioritize-cdn/cedexis-priority-provider"),h=i(p),v=e("../../../config/errorStrings.json"),y=i(v),m=e("./flash-options"),g=i(m),b=e("./plugin-options"),E=i(b),A=e("./poster-size"),P=i(A),w=e("../projector-ads"),C=i(w),S=e("../../utils/projector-utils"),O=i(S),k=e("/bb/web/jenkins/workspace/deploy-projector/build//resources.js"),T=i(k),L=e("./prioritize-cdn/weighted-random-priority-provider"),R=i(L),j=new window.BPlayerLog("ProjectorSettings"),D=9999,M="application/x-mpegURL",I={MP4:!0,TS:!0,F4M:!0},U=["id","title","live","form_type","player_type","cedexisAppID"],x=function(){function e(t){var n=this;if(r(this,e),this.config=t,!this.config.version)return void j.error("Invalid version passed");if(this.liveId=null,this.dataSetup=null,this.prioritizeStreams=null,this.version=this.config.version,this.userOptions=this.config.userOptions,this.userOptions.live=Boolean(+this.userOptions.live),this.bmmrAsset=this.config.bmmrAsset,this.userOptions.live){if(!this.config.liveId)return void j.error("liveId not passed");this.liveId=this.config.liveId}return!this.bmmrAsset||this.bmmrAsset instanceof d.default?(this.debugLogEnabled=this.userOptions.log_debug,o(),this.determineAutoplay(),void 0!==this.userOptions.tech_order&&(this.userOptions.techOrder=this.userOptions.tech_order),void(this.readyPromise=this.prioritizeCDN().then(this.finalizeSettings.bind(this)).then(function(){return n}))):void j.error("Unexpected BMMR asset type")}return a(e,[{key:"ready",value:function(){return this.readyPromise}},{key:"finalizeSettings",value:function(){var e=new C.default(this.config.userOptions,this.config.bmmrAsset,l.default);this.dataSetup=Object.assign({swf:this.getSwfUrl(),ui_skin_url:this.getSkinUrl(),buffering_animation:this.getBufferingAnimationUrl(),asset_version:this.version,original_user_options:this.config.userOptions},this.config.defaultOptions||{},this.userOptions||{},this.generateProjectorAssetWithStreams(),e.prepare()),g.default.addOptions(this.dataSetup),E.default.addOptions(this.dataSetup),this.determineTechOrder(),this.determineTitle(),this.setControlsVisibility(),this.setNativeTextTrack(),this.addPlayerIdToPluginSettings(),this.determineMuteState(),this.filterStreamsForMobile(),this.dataSetup.autoplayReportingValues=l.default.getReportingValues(this)}},{key:"determineAutoplay",value:function(){O.default.isMobile()&&(this.userOptions.autoplay=!1)}},{key:"determineTechOrder",value:function(){var e=this.dataSetup.techOrder||[],t=[];if(O.default.isMobile())return void(this.dataSetup.techOrder=["html5"]);if(!Hls.isSupported())return void(this.dataSetup.techOrder=["flash"]);if(O.default.isSafariDesktop())return void(this.dataSetup.techOrder=["flash","html5"]);for(var n=0;n<e.length;n++)"html5"===e[n]?t.push("hlsjs"):t.push(e[n]);this.dataSetup.techOrder=t}},{key:"determineMuteState",value:function(){var e=this.config.userOptions.start_muted;this.dataSetup.muted=!O.default.isMobile()&&null!=e&&"true"===e.toString()}},{key:"setControlsVisibility",value:function(){O.default.forcedToPlayFlash(this.dataSetup)&&(this.dataSetup.controls=!1)}},{key:"setNativeTextTrack",value:function(){var e=this.dataSetup&&this.dataSetup.html5||{},t=!e.hasOwnProperty("nativeTextTracks")||e.nativeTextTracks,n=videojs.getTech("Html5");n&&(n.prototype.featuresNativeTextTracks=t);var i=videojs.getTech("Hlsjs");i&&(i.prototype.featuresNativeTextTracks=t)}},{key:"prioritizeCDN",value:function(){var e=new R.default,t=new h.default(this.getCedexisAppID()),n=void 0;if(this.userOptions.live){var i=e.prioritizeCDNs(this.config.liveStreams[this.liveId].cdns);n=t.prioritizeCDNs(i).then(function(e){return f.default.getStreams(e)})}else{var r=e.prioritizeStreams(this.getStreams());n=t.prioritizeStreams(r)}return n.then(this.setPrioritizedStreams.bind(this)).catch(function(e){return j.warn("Stream prioritize failure: "+e)})}},{key:"getCedexisAppID",value:function(){return this.bmmrAsset?this.bmmrAsset.getCedexisAppID():this.config.liveStreams[this.liveId].cedexisAppID}},{key:"getStreams",value:function(){if(this.bmmrAsset){var e="https:"===window.location.protocol;return this.bmmrAsset.getStreams(e)}return f.default.getStreams(this.config.liveStreams[this.liveId].cdns)}},{key:"setPrioritizedStreams",
value:function(e){this.prioritizeStreams=e}},{key:"getPrioritizedStreams",value:function(){return this.prioritizeStreams?this.prioritizeStreams:this.getStreams()}},{key:"addPlayerIdToPluginSettings",value:function(){return this.dataSetup&&this.dataSetup.plugins?void Object.keys(this.dataSetup.plugins).forEach(function(e){this.dataSetup.plugins[e].playerId=this.dataSetup.id}.bind(this)):void j.debug("Cannot add playerid tp plugin options")}},{key:"setProjectorAssetCaptionsVod",value:function(e){var t=this.bmmrAsset?this.bmmrAsset.getCaptions():null;if(t){for(var n=[],i=0;i<t.length;++i)n.push({url:t[i].getUrl()});e.metadata.captions=n}}},{key:"setProjectorAssetStreamsVod",value:function(e){for(var t=this.getPrioritizedStreams(),n=[],i=0;i<t.length;++i){var r=t[i],o=r.getMuxingFormat();I[o]&&n.push(r.toJSON())}e.streams=n}},{key:"setProjectorAssetNiCodesVod",value:function(e){for(var t=this.bmmrAsset?this.bmmrAsset.getNiCodes():null,n=[],i=0;i<t.length;++i)n.push(t[i].code);e.metadata.ni_codes=n}},{key:"getPosterTemplateImage",value:function(){return this.userOptions.poster?this.userOptions.poster:this.userOptions.live?this.config.liveStreams[this.liveId].poster:this.bmmrAsset?this.bmmrAsset.getPosterTemplateImage():null}},{key:"getPosterContainerSize",value:function(){if(this.userOptions.width&&this.userOptions.height)return{width:this.userOptions.width,height:this.userOptions.height};if(this.userOptions.containerElement){var e=this.userOptions.containerElement.getBoundingClientRect();return{width:e.width,height:e.height}}return{width:D,height:D}}},{key:"getPosterImage",value:function(){var e=this.getPosterTemplateImage();if(!e)return j.warn("No poster template image"),null;var t=this.getPosterContainerSize();return P.default.closestImage(t.width,t.height,e)}},{key:"generateProjectorAssetWithStreamsVod",value:function(){var e=this.getPosterImage(),t={posterUrl:e,metadata:{bb_pub_d:this.bmmrAsset.getComscoreMetadata().getBbPubD(),c5:this.bmmrAsset.getComscoreMetadata().getC5(),cedexisAppID:this.bmmrAsset.getCedexisAppID(),compressedID:this.bmmrAsset.getCompressedID(),createdate:this.bmmrAsset.getCreateDate(),duration:""+this.bmmrAsset.getDuration(),form_type:this.bmmrAsset.getComscoreMetadata().getNsStTy(),id:this.bmmrAsset.getId(),show_name:(this.bmmrAsset.getShowName()||"").replace(/[']/g,"&apos;"),title:this.bmmrAsset.getTitle(),version:this.version,poster:e}};return this.setProjectorAssetCaptionsVod(t),this.setProjectorAssetStreamsVod(t),this.setProjectorAssetNiCodesVod(t),t}},{key:"generateProjectorAssetWithStreamsLive",value:function(){var e=this.config.liveStreams[this.liveId],t=this.getPosterImage(),n=this.getPrioritizedStreams(),i={posterUrl:t,streams:n,playerType:e.player_type,metadata:Object.assign(_.clone(_.pick(e,U)),{streams:n,poster:t,version:this.version})};return i}},{key:"generateProjectorAssetWithStreams",value:function(){return this.userOptions.live?this.generateProjectorAssetWithStreamsLive():this.generateProjectorAssetWithStreamsVod()}},{key:"filterStreamsForMobile",value:function(){O.default.isMobile()&&(this.dataSetup.streams=this.dataSetup.streams.filter(function(e){return e.type===M}))}},{key:"getSwfUrl",value:function(){return T.default.SWF_FILE_NAME_INSIGHTS}},{key:"getSkinUrl",value:function(){return T.default.SKIN_FILE_NAME}},{key:"getBufferingAnimationUrl",value:function(){return T.default.BUFFERING_ANIMATION_FILE_NAME}},{key:"determineTitle",value:function(){var e=this.config.bmmrAsset?this.config.bmmrAsset.getTitle():this.config.title;this.dataSetup.title=e||""}}]),e}();n.default=x},{"../../../config/errorStrings.json":4,"../../utils/projector-utils":58,"../bmmr-asset-js/bmmr-asset-js":11,"../projector-ads":32,"../projector-autoplay":33,"./cdn":35,"./flash-options":36,"./plugin-options":37,"./poster-size":38,"./prioritize-cdn/cedexis-priority-provider":39,"./prioritize-cdn/weighted-random-priority-provider":40,"/bb/web/jenkins/workspace/deploy-projector/build//resources.js":1}],42:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n,r){i(this,e);var o=100*r;if(!t||!n)throw new Error("Invalid url and type specified");if(isNaN(o)||0>o||o>100)throw new Error("Invalid stream weight specified ("+r+")");this.url=t,this.type=n,this.percent=o}return r(e,[{key:"serialize",value:function(){return{url:this.url,type:this.type,percent:this.percent}}}]),e}();n.default=o},{}],43:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findScriptElement(){if(document.currentScript)return document.currentScript;var e=document.getElementsByTagName("script"),t=e[e.length-1],n=void 0;if(REGEXP_BPLAYER_HREF.test(t.src))n=t;else for(var i=0,r=e.length;i<r;++i)REGEXP_BPLAYER_HREF.test(e[i].src)&&!e[i].getAttribute(DATA_EXCLUDE)&&(n=e[i]);if(!n)for(var o=0,a=e.length;o<a;++o)REGEXP_BPLAYER_NAME.test(e[o].getAttribute(DATA_NAME))&&(n=e[o]);return n}function getScriptQueryParameters(scriptElement){log.warn("Specifying user options through URL query-string has been deprecated.");var query=scriptElement.src.split("?")[1];return query?(0,_queryString2.default)(query):("bplayer"!==scriptElement.getAttribute("data-name")&&(log.warn("Initialization of BPlayer within a script tag has been deprecated."),eval(scriptElement.innerHTML)),"undefined"==typeof setup?{}:setup)}Object.defineProperty(exports,"__esModule",{value:!0});var _queryString=require("../utils/query-string"),_queryString2=_interopRequireDefault(_queryString),REGEXP_BPLAYER_HREF=/bplayer\.js$|bplayer\.js\?/,REGEXP_BPLAYER_NAME=/^bplayer$/,DATA_EXCLUDE="data-exclude",DATA_NAME="data-name",log=new window.BPlayerLog("ScriptElement");exports.default={findScriptElement:findScriptElement,getScriptQueryParameters:getScriptQueryParameters}},{"../utils/query-string":59}],44:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=new window.BPlayerLog("UserOptionsValidator"),a={id:{required:!0,type:String},autoplay:Boolean,conviva_account:String,htmlChildId:String,serverUrl:String,width:String,height:String,log_debug:Boolean,comscore_ns_site:String,vertical:String,poster:String,start_muted:Boolean,live:Boolean,comscore_page_level_tags:Object,techOrder:Array,tech_order:Array,idType:String,share_metadata:Object,video_autoplay_on_page:Boolean,asset_protocol:String,controls:Boolean,ui_controls_popout:Boolean,ui_controls_fullscreen:Boolean,module_conviva_insights:String,containerElement:HTMLElement,source:String,zone:String,poster_as_slate:Boolean,forcePosterMobile:Boolean,use_comscore:Boolean,use_parsely:Boolean,use_mediabong:Boolean,use_share_overlay:Boolean,use_title_bar:Boolean,continuous_play_previous_url:String,use_google_tag_manager:Boolean,google_tag_manager_data_layer_id:String,offsite_embed:Boolean,module_ad_player:String,ad_tag:String,ad_tag_sz_preroll:String,ad_tag_sz_overlay:String,ad_tag_midroll:String,ad_tag_overlay:String,ad_tag_sz_midroll:String,ad_tag_gpt_preroll:Boolean,ad_tag_gpt_midroll:Boolean,ad_network_id_preroll:String,ad_network_id_midroll:String,ad_network_id_overlay:String,ad_tag_cust_params_preroll:String,ad_tag_cust_params_midroll:String,ad_tag_cust_params_overlay:String,ads_vast_timeout:Number,ads_playback_timeout:Number,use_js_ads:Boolean,ads_max_retries_preroll:Number,ads_max_retries_midroll:Number,ad_code_prefix:String},s=function(){function e(){i(this,e)}return r(e,null,[{key:"getValidatedOptions",value:function(e){var t=0,n=0;Object.keys(a).forEach(function(n){a[n].constructor!==Object||!a[n].required||void 0!==e[n]&&null!==e[n]||(o.error('Missing required option "'+n+'"'),t++)}),Object.keys(e).forEach(function(t){var i=e[t];if(void 0===a[t])return o.warn("Unexpected option passed: "+t+" with value: ",i),void n++;var r="[object Object]"===Object.prototype.toString.call(a[t])?a[t].type:a[t];void 0===i||null===i||i.constructor===r||i instanceof r||(o.warn("Unexpected option type: "+t+'. Was expecting type "'+r.name+'" but got',i),n++)}),o.info("validation complete with "+t+" errors and "+n+" warnings");var i=_.pick(e,Object.keys(a));return i}}]),e}();n.default=s},{}],45:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e)}return r(e,null,[{key:"isIEBasedXml",value:function(){return void 0!==window.ActiveXObject}},{key:"parseXml",value:function(e){if(this.isIEBasedXml()){var t=new window.ActiveXObject("Microsoft.XMLDOM");if(t)return t.async="false",t.loadXML(e),t}var n=new window.DOMParser;return n.parseFromString(e,"text/xml")}},{key:"removeXmlNamespaces",value:function(e){return e.replace(/xmlns[:]*[a-z]*=\"[^\"]*\"/g,"").replace(/xsi[:]*[a-z]*=\"[^\"]*\"/g,"")}},{key:"getNodeForXPath",value:function(e,t){if(this.isIEBasedXml())return e.selectSingleNode(t);var n=e.evaluate(t,e.documentElement,null,XPathResult.ANY_TYPE,null);return n?n.iterateNext():null}},{key:"getTextForXPath",value:function(e,t){var n=this.getNodeForXPath(e,t);if(n){var i=this.getTextForNode(n);if(i)return i}return null}},{key:"getTextForNode",value:function(e){return e?this.isIEBasedXml()?e.childNodes&&e.childNodes[0]&&void 0!==e.childNodes[0].nodeValue?e.childNodes[0].nodeValue:null:void 0!==e.textContent?e.textContent:null:null}}]),e}();n.default=o},{}],46:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("/bb/web/jenkins/workspace/deploy-projector/build//shims.js"),s=e("../lib/bmmr-asset-js/bmmr-asset-js"),l=i(s),u=e("../lib/bmmr-asset-js/bmmr-loader"),d=i(u),c=e("../lib/projector-settings-js/projector-settings-js"),f=i(c),p=e("../lib/projector-config"),h=i(p),v=e("../utils/utils"),y=i(v),m=e("../view/View"),_=i(m),g=e("../lib/user-options-validator"),b=i(g),E=["loadBMMRData","loadProjectorConfiguration","setProjectorSettings","setupViewRenderer","renderView"],A=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r(this,e),this.assetDetails=i,this.userOptions=b.default.getValidatedOptions(n),this.view=null,this.el_=null,y.default.isEmptyObject(this.userOptions))throw new Error("Unable to run strategy without userOptions");E.forEach(function(e){t[e]=t[e].bind(t)})}return o(e,[{key:"run",value:function(){return this.loadBMMRData(this.assetDetails).then(this.loadProjectorConfiguration).then(this.setProjectorSettings).then(this.setupViewRenderer).then(this.renderView)}},{key:"loadBMMRData",value:function(e){return this.isLive()?Promise.resolve():e?Promise.resolve(new l.default(e)):d.default.load(this.userOptions)}},{key:"loadProjectorConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.userOptions.live?this.userOptions.id:void 0;return h.default.load({userOptions:this.userOptions,version:a.version,bmmrAsset:e,liveId:t})}},{key:"setProjectorSettings",value:function(e){var t=new f.default(e);return t.ready()}},{key:"setupViewRenderer",value:function(e){return new this.view(this.el_,e)}},{key:"renderView",value:function(e){var t=this;return new Promise(function(n,i){e.on(_.default.ON_RENDER,function(e){var t=e.detail.player;n(t)}).on(_.default.ON_ERROR,function(e){var t=e.detail.error;i(t)}).on(_.default.ON_DISPOSE,function(){return t.dispose()}),e.render()})}},{key:"isLive",value:function(){return Boolean(this.userOptions.live)}},{key:"dispose",value:function(){this.assetDetails=this.userOptions=this.view=this.el_=null}}]),e}();n.default=A},{"../lib/bmmr-asset-js/bmmr-asset-js":11,"../lib/bmmr-asset-js/bmmr-loader":12,"../lib/projector-config":34,"../lib/projector-settings-js/projector-settings-js":41,"../lib/user-options-validator":44,"../utils/utils":61,"../view/View":87,"/bb/web/jenkins/workspace/deploy-projector/build//shims.js":2}],47:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=e("./AbstractViewStrategy"),l=i(s),u=e("../view/insert-view"),d=i(u),c=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(i.view=d.default,i.el_=e.containerElement,!i.el_)throw new Error("Container element is not found. Make sure userOptions.containerElement is set!");return i}return a(t,e),t}(l.default);t.exports=c},{"../view/insert-view":88,"./AbstractViewStrategy":46}],48:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=e("./AbstractViewStrategy"),l=i(s),u=e("../lib/script-element"),d=i(u),c=e("../view/replace-view"),f=i(c),p=function(e){function t(e,n){r(this,t);var i=e.containerElement||d.default.findScriptElement();e.containerElement=i.parentNode;var a=e?e:d.default.getScriptQueryParameters(i),s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,n));if(s.view=f.default,s.el_=i,!s.el_)throw new Error("Container element is not found. Make sure your code is wrapped in a script tag.");return s}return a(t,e),t}(l.default);t.exports=p},{"../lib/script-element":43,"../view/replace-view":89,"./AbstractViewStrategy":46}],49:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.EVENTS=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=e("./event-target"),d=i(u),c={VISIBLE:"VISIBLE",INVISIBLE:"INVISIBLE"},f={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},p=void 0,h=void 0,v=!1;for(var y in f)if("undefined"!=typeof document[y]){p=y,h=f[y],v=!0;break}var m=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return t._isVisibilityAPISupported()&&(e._onVisibilityChange=e._onVisibilityChange.bind(e),document.addEventListener(h,e._onVisibilityChange)),e}return a(t,e),s(t,[{key:"dispose",value:function(){t._isVisibilityAPISupported()&&document.removeEventListener(h,this._onVisibilityChange),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_onVisibilityChange",value:function(){var e=t.isPageVisible()?c.VISIBLE:c.INVISIBLE;this.trigger(e)}}],[{key:"isPageVisible",value:function(){return!document[p]}},{key:"_isVisibilityAPISupported",value:function(){return v}}]),t}(d.default);n.EVENTS=c,n.default=m},{"./event-target":55}],50:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return s.default.isDate(e)&&!isNaN(e.getTime())}function o(e){e=e||l;var t=new Date;if(t.setTime(t.getTime()+e),t&&!r(t))throw new Error("Invalid expires parameter");return t}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./utils"),s=i(a),l=7776e6,u={stringInGMT:function(e){var t=o(e);return t.toGMTString()},totalMilliseconds:function(e){var t=o(e);return t.getTime()}};n.default=u},{"./utils":61}],51:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("escape-string-regexp"),s=i(a),l=e("./cookie-expiration-date"),u=i(l),d="/",c=!1,f="",p=function(){function e(){r(this,e)}return o(e,[{key:"get",value:function(e){var t=new RegExp("[; ]"+(0,s.default)(e)+"=([^\\s;]*)"),n=document.cookie.match(t);return e&&n?decodeURI(n[1]):void 0}},{key:"set",value:function(e,t,n,i){var r=this.getCookieOptions(i||{});t=n?encodeURIComponent(t):t,document.cookie=this.generateCookieString(e,t,r)}},{key:"remove",value:function(e,t){var n=this.getCookieOptions(t||{});n.expires=new Date(-1).toGMTString(),this.set(e,"",!1,n)}},{key:"generateCookieString",value:function(e,t,n){var i=e+"="+t;return i+=";path="+n.path,i+=";domain="+n.domain,i+=n.expires?";expires="+n.expires:"",i+=n.secure?";secure":""}},{key:"getCookieOptions",value:function(e){e=e||{};var t=e&&e.expires?e.expires:null;return{path:e&&e.path?e.path:d,domain:f,expires:u.default.stringInGMT(t),secure:void 0!==e.secure?e.secure:c}}}]),e}();n.default=new p},{"./cookie-expiration-date":50,"escape-string-regexp":3}],52:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=e.length,i=0;i<n;i++)if(t===e[i])return i;return-1}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./utils"),l=i(s),u=/\s+/,d=" ",c=["-webkit-","-moz-","-ms-","-o-"],f=function(){function e(){r(this,e)}return a(e,null,[{key:"addClass",value:function(e,t){if(!e||!t)return this;if(e.classList)return e.classList.add(t),this;var n=e.className?e.className.trim().split(u):[];return o(n,t)!==-1?this:(e.className=n.concat([t]).join(d),this)}},{key:"addClassList",value:function(t,n){return l.default.isArray(n)&&n.forEach(function(n){e.addClass(t,n)}),this}},{key:"removeClass",value:function(e,t){if(!e)return this;if(e.classList)return e.classList.remove(t),this;var n=e.className?e.className.trim().split(u):[],i=o(n,t);return i===-1?this:(n.splice(i,1),e.className=n.join(d),this)}},{key:"hasClass",value:function(e,t){if(e){if(e.classList)return e.classList.contains(t);var n=e.className.trim().split(u);return o(n,t)!==-1}}},{key:"css",value:function(e,t){if("string"==typeof t)return void(e.style.cssText=t);var n=Object.keys(t).map(function(e){var n=e.toLowerCase(),i=t[e];return n+": "+i+";"}).join("");n&&(e.style.cssText=n)}},{key:"computedStylesFor",value:function(e){return document.defaultView.getComputedStyle(e,"")}},{key:"transform",value:function(e,t){if(e){var n="transform";if(!(n in e.style))for(var i,r=0,o=c.length;r<o&&(i=c[r],n=i+n,!(n in e.style));r++);e.style[n]=t}}}]),e}();n.default=f},{"./utils":61}],53:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=3600,a=60,s=["January","February","March","April","May","June","July","August","September","October","November","December"],l=function(){function e(){i(this,e)}return r(e,null,[{key:"convertToSeconds",value:function(e){if(!e)return null;var t=e.split(":");if(t.length<3)return null;var n=parseInt(t[0],10),i=parseInt(t[1],10),r=parseFloat(t[2]);return n*o+i*a+r}},{key:"formatSeconds",value:function(e){var t=Math.round(e),n=0;t>=60&&(n=Math.round(t/60),t%=60);var i=""+(n?n:"0"),r=""+(t<10?"0"+t:t);return i+":"+r}},{key:"formatForConviva",value:function(e){if(!e)return"";var t=e.getDate(),n=e.getMonth(),i=e.getFullYear();return s[n]+" "+t+", "+i}}]),e}();n.default=l},{}],54:[function(e,t,n){"use strict";function i(e,t){return new Promise(function(n,i){var r=setTimeout(function(){i(new Error("Promise timeout"))},e);t.then(function(e){clearTimeout(r),n(e)},function(e){clearTimeout(r),i(e)})})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{}],55:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){e&&t.bubbles&&!t.defaultPrevented&&(t.originalTarget||Object.defineProperty(t,"originalTarget",{value:n}),e.dispatchEvent(t))}function o(e,t){return a(e)&&t&&"function"==typeof t}function a(e){return e&&"string"==typeof e}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=/\s*,\s*/g,u=Symbol("listeners"),d=Symbol("parent"),c=function(){function e(){i(this,e),this[u]={},this[d]=null}return s(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e,t)&&(this[u][e]||(this[u][e]=[]),this[u][e].push({callback:t,deRegister:n}))}},{key:"removeEventListener",value:function(e,t){if(o(e,t)){var n=this[u][e];if(n){if(!t)return void(n.length=0);for(var i=0,r=n.length;i<r;i++)if(n[i].callback===t)return n.splice(i,1),this.removeEventListener(e,t)}}}},{key:"removeAllEventListeners",value:function(){var e=this;Object.keys(this[u]).forEach(function(t){e[u][t].length=0})}},{key:"dispatchEvent",value:function(e){var t=this,n=e.type;if(this[u].hasOwnProperty(n)){var i=this[u][n],o=[];this._overrideEventTarget(e);for(var a=0,s=i.length;a<s;a++){var l=i[a].callback,c=i[a].deRegister;l.call(this,e),c&&o.push(l)}o.forEach(function(e){return t.removeEventListener(n,e)})}r(this[d],e,this)}},{key:"setEventParent",value:function(t){t instanceof e&&(this[d]=t)}},{key:"on",value:function(e,t){var n=this;if(!o(e,t))return this;var i=e.split(l);return i.forEach(function(e){n.addEventListener(e,t)}),this}},{key:"one",value:function(e,t){var n=this;if(!o(e,t))return this;var i=e.split(l);return i.forEach(function(e){n.addEventListener(e,t,!0)}),this}},{key:"off",value:function(e,t){var n=this;if(!o(e,t))return this;var i=e.split(l);return i.forEach(function(e){n.removeEventListener(e,t)}),this}},{key:"trigger",value:function(e,t){if(!a(e))return this;var n=new CustomEvent(e,{detail:t,bubbles:!0,originalTarget:this,target:this});return this.dispatchEvent(n),this}},{key:"dispose",value:function(){this.removeAllEventListeners(),this[u]=null,this[d]=null}},{key:"_overrideEventTarget",value:function(e){Object.defineProperty(e,"target",{value:this,configurable:!0})}}]),e}();n.default=c},{}],56:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./utils"),s=i(a),l=Symbol("memoCache"),u=function(){function e(){r(this,e)}return o(e,null,[{key:"memoize",value:function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.reduce(function(e,t){return e+s.default.isObject(t)?JSON.stringify(t):t},"");return e[l]=e[l]?e[l]:{},e[l].hasOwnProperty(r)||(e[l][r]=e.apply(null,n)),e[l][r]}}}]),e}();n.default=u},{"./utils":61}],57:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./cookies"),o=i(r),a=new window.BPlayerLog("PersistControls"),s="com.bloomberg.player.volume.level",l={volume:s},u={get:function(e){var t=l[e];return t?o.default.get(t):(a.warn("Attempting to get an unknown type: "+e),null)},set:function(e,t){var n=l[e];return n?void o.default.set(n,t):void a.warn("Attempting to persist an unknown type: "+e)}};n.default=u},{"./cookies":51}],58:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){try{return new ActiveXObject(e)}catch(e){return!1}}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a="$version",s=/Firefox\//,l=/CriOS/,u="mini",d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,c=/[\d]+/g,f="ShockwaveFlash.ShockwaveFlash",p="ShockwaveFlash.ShockwaveFlash.6",h="ShockwaveFlash.ShockwaveFlash.7",v="Shockwave Flash",y="Shockwave Flash 2.0",m="application/x-shockwave-flash",_="",g=function(){function e(){i(this,e)}return o(e,null,[{key:"forcedToPlayFlash",value:function(t){var n=t&&Array.isArray(t.techOrder)&&t.techOrder[0];return!(e.isMobile()||!n||"flash"!==n)&&Boolean(e.getFlashVersion())}},{key:"getFlashVersion",value:function(){var t=void 0;return navigator.plugins&&navigator.plugins.length?(t=navigator.plugins[v])?e.parseFlashVersion(t.description):(t=navigator.plugins[y],t?"2.0.0.11":_):navigator.mimeTypes&&navigator.mimeTypes.length?(t=navigator.mimeTypes[m],t&&t.enabledPlugin?e.parseFlashVersion(t.enabledPlugin.description):_):(t=r(h))?e.parseFlashVersion(t.GetVariable(a)):r(p)?"6.0.21":(t=r(f))?e.parseFlashVersion(t.GetVariable(a)):_}},{key:"isHlsSupported",value:function(){return!!e.isMobile()||Hls.isSupported()}},{key:"isMiniPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.playerType===u}},{key:"isMobile",value:function(){return d.test(this.userAgent())}},{key:"isSafariDesktop",value:function(){var e=this.userAgent().toLocaleLowerCase();return e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1}},{key:"isFirefox",value:function(){return s.test(this.userAgent())}},{key:"isChromeIos",value:function(){return l.test(navigator.userAgent)}},{key:"parseFlashVersion",value:function(e){return e=e.match(c),e.slice(0,3).join(".")}},{key:"userAgent",value:function(){return navigator.userAgent}}]),e}();n.default=g},{}],59:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=/([^?=&]+)(=([^&]*))?/g,a=function(){function e(){i(this,e)}return r(e,null,[{key:"toQueryString",value:function(e){return Object.keys(e).reduce(function(t,n,i){return""+t+(i>0?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(e[n])},"")}},{key:"parseQueryString",value:function(e){if(!e||"string"!=typeof e)return{};var t={};return e.replace(o,function(e,n,i,r){var o=decodeURIComponent(n),a=void 0!==r?decodeURIComponent(r).replace("+"," "):void 0;return t.hasOwnProperty(o)?Array.isArray(t[o])?t[o].push(a):void(t[o]=[t[o],a]):void(t[o]=a)}),Object.freeze(t)}}]),e}();n.default=a},{}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=/^\w+:\/\/\w+/i,r={getURLExtension:function(e){if(!e)return"";e=e.split("?")[0].split("#")[0];var t=e.substr(1+e.lastIndexOf("/")),n=t.split(".").pop();return n==t?"":n},getDomain:function(e){if(!e)return"";if(URL&&e.match(i)){var t=new URL(e);return t.hostname}return e.indexOf("//")==-1?"":e.split("/")[2].split(":")[0]},getProtocol:function(e){if(!e)return null;if(URL&&e.match(i)){var t=new URL(e);return t.protocol}return e.indexOf("//")<1?null:e.split("/")[0]}};n.default=r},{}],61:[function(e,t,n){"use strict";function i(e){return Object.prototype.toString.call(e)}Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o="[object Object]",a="[object Array]",s="[object String]",l="[object Date]",u={isArray:function(e){return i(e)===a},isObject:function(e){return i(e)===o},isString:function(e){return i(e)===s},isDate:function(e){return i(e)===l},isEmptyObject:function(e){if(!u.isObject(e))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},deepMerge:function(e,t){if(!e)return JSON.parse(JSON.stringify(t));if(!t)return JSON.parse(JSON.stringify(e));var n=_.cloneDeep(e);e.streams&&(n.streams=e.streams);for(var i in t)t.hasOwnProperty(i)&&(i in n&&"object"===r(n[i])?n[i]=this.deepMerge(n[i],t[i]):n[i]=t[i]);return n}};n.default=u},{}],62:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e
}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("./css-helpers"),s=i(a),l=e("../utils/projector-utils"),u=i(l),d=new window.BPlayerLog("VideoTagGenerator"),c="metadata",f=function(){function e(t){if(r(this,e),!t)return void d.error("VideoTagGenerator requires a ProjectorSettings instance");var n=t.dataSetup,i=t.userOptions,o=n.streams,a=n.width,s=n.height;this.autoplay=e.shouldAutoPlay(i),this.height=s,this.isMiniPlayer=u.default.isMiniPlayer(n),this.playerId=e.getUniqueVideoTagId(n),this.preload=i.preload||c,this.streams=o,this.width=a,this.forcePosterMobile=i.forcePosterMobile,this.poster=n.posterUrl,this.autoplay||(t.dataSetup.autoplay=!1)}return o(e,[{key:"generateVideoTag",value:function(){var t=document.createElement("video");t.setAttribute("id",this.playerId),t.setAttribute("preload",this.preload);var n=["video-js","vjs-default-skin"];return this.isMiniPlayer&&n.push("bvp-mini-player"),s.default.addClassList(t,n),this.width&&this.height?s.default.css(t,{width:this.width,height:this.height}):(t.setAttribute("fluid",!0),s.default.addClass(t,"vjs-16-9")),this.autoplay&&t.setAttribute("autoplay",!0),this.forcePosterMobile&&u.default.isMobile()&&t.setAttribute("poster",this.poster),e.setVideoSources(t,this.streams),t}}],[{key:"shouldAutoPlay",value:function(e){return!u.default.isMobile()&&e.autoplay&&"disabled"===e.module_ad_player}},{key:"getUniqueVideoTagId",value:function(e){var t=String(e.htmlChildId||e.id);return"bvp-"+t.substr(0,6)+"-"+Math.floor(1e6*Math.random())}},{key:"setVideoSources",value:function(e,t){var n=document.createElement("source");t.forEach(function(t){var i=n.cloneNode(!1);i.setAttribute("src",t.url),i.setAttribute("type",t.type),t.percent&&i.setAttribute("data-percent",t.percent),e.appendChild(i)})}}]),e}();n.default=f},{"../utils/projector-utils":58,"./css-helpers":52}],63:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../../utils/projector-utils"),s=i(a),l=e("./videojs-vod-captions-helper"),u=i(l),d=new window.BPlayerLog("ClosedCaptionsPlugin"),c=function(){function e(){r(this,e)}return o(e,null,[{key:"isEnabled",value:function(e){return"true"===String(e.options_.use_captions)}},{key:"shouldParseVodCaptions",value:function(e){return!e.options_.metadata.live&&!s.default.isMobile()}},{key:"init",value:function(){var t=this;return e.isEnabled(t)?void(e.shouldParseVodCaptions(t)&&u.default.parse(t)):void d.info("plugin disabled")}}]),e}();videojs.plugin("ClosedCaptionsPlugin",c.init),n.default=c},{"../../utils/projector-utils":58,"./videojs-vod-captions-helper":64}],64:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../../utils/datetime-utils"),s=i(a),l=e("../../events/player-events"),u=i(l),d=new window.BPlayerLog("VodCaptionsHelper"),c=/<br.*?>\s*/g,f=window.VTTCue||window.TextTrackCue,p=function(){function e(){r(this,e)}return o(e,null,[{key:"onMetadataLoad",value:function(t){var n=e.getDfxpUrlFromOptions(t.options_);n&&fetch(n).then(e.handleLoadDfxpResponse.bind(this,n)).then(e.parseDfxpResponse.bind(this,t)).catch(function(e){d.warn("Fetching DFXP with url "+n+" failed",e)})}},{key:"handleLoadDfxpResponse",value:function(e,t){if(200!=t.status)throw new Error("Fetching DFXP with url "+e+" failed with status "+t.status);return t.text()}},{key:"parseDfxpResponse",value:function(t,n){for(var i=t.addTextTrack("captions","English","en"),r=e.extractCuesFrom(n),o=0,a=r.length;o<a;o++){var l=r[o],u=s.default.convertToSeconds(l["@begin"]),d=s.default.convertToSeconds(l["@end"]),c=new f(u,d,l.Text);i.addCue(c)}}},{key:"getDfxpUrlFromOptions",value:function(e){return!e.metadata||!e.metadata.captions||!e.metadata.captions.length>0?null:e.metadata.captions[0].url}},{key:"extractCuesFrom",value:function(e){e=e.replace(c,"\n");try{var t=window.xml.xmlToJSON(e);return t.tt.body.div.p}catch(e){return d.error("Unable to parse dfxp file with error: "+e),[]}}},{key:"parse",value:function(t){t.on(u.default.LOADED_METADATA,e.onMetadataLoad.bind(this,t))}}]),e}();n.default=p},{"../../events/player-events":9,"../../utils/datetime-utils":53}],65:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this;return e.options_.use_conviva_html5?(e.convivaInsights=new a.default(e),void e.on(l.default.DISPOSE,function(){e.convivaInsights.dispose(),e.convivaInsights=null})):void u.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./videojs-conviva-insights"),a=i(o),s=e("../../events/player-events"),l=i(s),u=new window.BPlayerLog("ConvivaInsightsPlugin");videojs.plugin("ConvivaInsightsPlugin",r),n.default=r},{"../../events/player-events":9,"./videojs-conviva-insights":66}],66:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t="";return!e.metadata.live&&e.id&&(t+="["+e.id+"] "),e.metadata.show_name&&(t+=e.metadata.show_name+" - "),e.metadata.title&&(t+=e.metadata.title),t}function s(e,t){return{autoplay:Boolean(e.original_user_options.autoplay).toString(),contentId:e.id,pubDate:c(e.metadata.bb_pub_d),source:l(t),ns_st_ty:d(e.metadata),playerVendor:k,playerVersion:e.asset_version,show:u(e.metadata),pageUrl:f(),streamURL:t}}function l(e){var t=m.default.getProtocol(e);return t||(t=m.default.getProtocol(window.location)),t+"//"+m.default.getDomain(e)}function u(e){return e.show_name?e.show_name:"N/A"}function d(e){return e.live?"long-form":e.form_type?e.form_type:"short-form"}function c(e){var t=e?new Date(e):new Date;return v.default.formatForConviva(t)}function f(){var e=window.location;return""+e.host+e.pathname}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=e("../../utils/datetime-utils"),v=i(h),y=e("../../utils/url-utils"),m=i(y),_=e("../../events/ad-events"),g=i(_),b=e("../../events/player-events"),E=i(b),A=e("../../utils/projector-utils"),P=i(A),w=e("../../lib/google-ads/ad-utils"),C=i(w),S=new window.BPlayerLog("ConvivaInsights"),O="BPlayer HTML5",k="video.js",T=1024,L=[E.default.ADS_TIMEOUT_ERROR,g.default.ALL_ADS_COMPLETED],R=["onPlayerReady","onPlayerPlay","onPlayerEnded","onAdRequested","onAdStarted","onAdCompleted","onFatalError","onBitrateChange","onHlsBridgeError","onWatchdogReload"],j=function(){function e(t){var n=this;if(o(this,e),this.sessionId=null,this.player=t,this.options=t.options_,this.configConvivaTags=this.options.conviva_custom_tags,this.lastBitrateReported=null,this.isPlayingAd=!1,this.delayedFatalErrors=[],!P.default.isHlsSupported()||P.default.forcedToPlayFlash(this.options))return void S.warn("Plugin not enabled for non-Html5 techs.");if(!Conviva||!Conviva.LivePass)return void S.error("Cannot initialize Conviva plugin - missing library");R.forEach(function(e){n[e]&&(n[e]=n[e].bind(n))}),this.player.on(E.default.READY,this.onPlayerReady).on(E.default.PLAY,this.onPlayerPlay).on(E.default.ENDED,this.onPlayerEnded).on(E.default.FATAL_ERROR,this.onFatalError).on(g.default.AD_STARTED,this.onAdStarted).on(g.default.AD_REQUESTED,this.onAdRequested).on(E.default.WATCHDOG_RELOAD,this.onWatchdogReload).on(L,this.onAdCompleted);var i=this.options.conviva_customer_number;Conviva.LivePass.init(i),Conviva.LivePass.toggleTraces(this.options.log_debug)}return p(e,[{key:"dispose",value:function(){this.closeSession(),this.player&&this.player.tech_&&this.player.tech_.off(E.default.BITRATE_CHANGE,this.onBitrateChange).off(E.default.HLS_BRIDGE_ERROR,this.onHlsBridgeError),this.sessionId=null,this.player=null,this.options=null,this.configConvivaTags=null,this.lastBitrateReported=null,this.isPlayingAd=!1,this.delayedFatalErrors=null}},{key:"onPlayerReady",value:function(){this.player.tech_.on(E.default.BITRATE_CHANGE,this.onBitrateChange).on(E.default.HLS_BRIDGE_ERROR,this.onHlsBridgeError),this.closeSession()}},{key:"onPlayerPlay",value:function(){null===this.sessionId&&this.createSession();var e=this.player.options_.plugins.GoogleAdsPlugin;C.default.canDisplayAds(e)&&C.default.hasPreroll(e)||this.reportDelayedFatalErrors()}},{key:"createSession",value:function(){var e=r({},Conviva.LivePass.OPTION_EXTERNAL_BITRATE_REPORTING,!0);S.debug("creating conviva session"),this.sessionId=Conviva.LivePass.createSession(new Conviva.ConvivaVideojsStreamerProxy(this.player),this.createMetadata(),e);var t=this.options.metadata.duration;if(t){var n=Math.floor(+t/1e3);Conviva.LivePass.setCurrentStreamMetadata(this.sessionId,{duration:n.toString()})}}},{key:"onPlayerEnded",value:function(){this.closeSession()}},{key:"createMetadata",value:function(){var e=this.player.currentSrc(),t=Object.assign({},this.configConvivaTags,s(this.options,e)),n=new Conviva.ConvivaContentInfo(a(this.options),t);return n.streamUrl=e,n.isLive=Boolean(+this.options.metadata.live),n.playerName=O,n.playerVersion=this.options.asset_version,n}},{key:"onAdRequested",value:function(){null===this.sessionId&&this.createSession()}},{key:"onAdStarted",value:function(){null===this.sessionId&&this.createSession(),S.debug("ad started"),Conviva.LivePass.adStart(this.sessionId),this.isPlayingAd=!0}},{key:"onAdCompleted",value:function(){null!==this.sessionId&&(S.debug("ad complete"),Conviva.LivePass.adEnd(this.sessionId),this.isPlayingAd=!1,this.reportDelayedFatalErrors())}},{key:"onBitrateChange",value:function(e){if(null!==this.sessionId){var t=Math.floor(e.newBitrate/T);S.debug("report bitrate change - new bitrate: "+t),Conviva.LivePass.setBitrate(this.sessionId,t)}}},{key:"onHlsBridgeError",value:function(e){return null===this.sessionId||this.isPlayingAd?void S.debug("ignoring non-fatal hls error before play: ",e.data):void this.reportError(e)}},{key:"onWatchdogReload",value:function(e){return null===this.sessionId||this.isPlayingAd?void S.debug("ignoring watchdog restart before play"):void this.reportError(e)}},{key:"onFatalError",value:function(e){return null===this.sessionId||this.isPlayingAd?(S.debug("saving delayed fatal error"),void this.delayedFatalErrors.push(e)):(this.reportFatalError(e),void this.closeSession())}},{key:"reportDelayedFatalErrors",value:function(){if(this.delayedFatalErrors.length>0){for(var e=0;e<this.delayedFatalErrors.length;e++)this.reportFatalError(this.delayedFatalErrors[e]);this.delayedFatalErrors.length=0,this.closeSession()}}},{key:"reportFatalError",value:function(e){if(null===this.sessionId)return void S.error("Attempting to log a fatal error to conviva but Conviva is not initialized: "+e.error);var t="report fatal error: "+e.error;S.error(t),Conviva.LivePass.reportError(this.sessionId,e.error,Conviva.StreamerError.SEVERITY_FATAL)}},{key:"reportError",value:function(e){if(null===this.sessionId)return void S.error("Attempting to log an error to conviva but Conviva is not initialized: "+e.error);var t=e.data.type+" - "+e.data.details,n="report error: "+t;S.error(n),Conviva.LivePass.reportError(this.sessionId,e.data.details,Conviva.StreamerError.SEVERITY_WARNING)}},{key:"closeSession",value:function(){null!==this.sessionId&&(S.debug("cleaning up session"),Conviva.LivePass.cleanupSession(this.sessionId),this.sessionId=null,this.delayedFatalErrors.length=0)}}]),e}();n.default=j},{"../../events/ad-events":8,"../../events/player-events":9,"../../lib/google-ads/ad-utils":23,"../../utils/datetime-utils":53,"../../utils/projector-utils":58,"../../utils/url-utils":60}],67:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=e("./videojs-hls-tag-parser"),d=i(u),c=e("../../events/player-events"),f=i(c),p=e("./videojs-hls-cue-handler"),h=i(p),v=e("../../events/ad-events"),y=i(v),m=videojs.getComponent("Component"),g=videojs.getTech("Tech"),b=videojs.getComponent("Html5"),E="application/x-mpegURL",A=1,P=1,w=100,C=new window.BPlayerLog("HlsjsBridge"),S=["onMediaAttached","onManifestParsed","onLevelLoaded","onFragLoaded","onFragChanged","onError","createTextTrack","startLoad"],O={cueHandler:h.default},k=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.numNetworkErrorRetries=0,n.numMediaErrorRetries=0,n.lastSource="",n.lastBitrateReported=null,n.hasLoadedSource=!1,n.el_.tech=n,S.forEach(function(e){n[e]=n[e].bind(n)});var i=Object.assign({},O,e.hlsConfig);return n.hls_=new Hls(i),n.hls_.on(Hls.Events.MEDIA_ATTACHED,n.onMediaAttached),n.hls_.on(Hls.Events.MANIFEST_PARSED,n.onManifestParsed),n.hls_.on(Hls.Events.LEVEL_LOADED,n.onLevelLoaded),n.hls_.on(Hls.Events.FRAG_CHANGED,n.onFragChanged),n.hls_.on(Hls.Events.FRAG_LOADED,n.onFragLoaded),n.hls_.on(Hls.Events.ERROR,n.onError),n.hls_.attachMedia(n.el_),n.hls_.timelineController.createTextTrack=n.createTextTrack,n.src(n.options_.source.src),e.__disableDebounceForTesting||(n.dispatchHlsBridgeError=_.debounce(n.dispatchFatalHlsBridgeError,w)),n.on(y.default.AD_ALMOST_FINISHED,n.startLoad),n}return a(t,e),l(t,null,[{key:"isSupported",value:function(){return Hls.isSupported()}},{key:"canPlaySource",value:function(e){return!(!e||e.type!==E)&&Hls.isSupported()}},{key:"getSourceType",value:function(){return E}}]),l(t,[{key:"createTextTrack",value:function(e,t,n){return this.addTextTrack(e,"english",n)}},{key:"onMediaAttached",value:function(){this.triggerReady()}},{key:"onLevelLoaded",value:function(e,t){this.duration=t.details.live?function(){return 1/0}:b.prototype.duration,this.live=t.details.live}},{key:"onManifestParsed",value:function(){this.player_.options_.autoplay&&this.player_.play()}},{key:"onFragLoaded",value:function(e,t){var n=t.frag,i=d.default.extractCueFrom(n);i&&i.event===f.default.HLS_CUE_OUT&&this.trigger({type:f.default.HLS_CUE_OUT_LOADED,data:i})}},{key:"onFragChanged",value:function(e,t){var n=t.frag,i=d.default.extractCueFrom(n);if(i&&this.trigger({type:i.event,data:i}),this.hls_&&this.hls_.levels){var r=parseInt(this.hls_.levels[n.level].bitrate,10);r!==this.lastBitrateReported&&(this.trigger({type:f.default.BITRATE_CHANGE,newBitrate:r}),this.lastBitrateReported=r)}}},{key:"currentSrc",value:function(){return this.hls_?this.hls_.url:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"currentSrc",this).call(this)}},{key:"setSrc",value:function(e){this.lastSource=e,this.numNetworkErrorRetries=0,this.numMediaErrorRetries=0,this.hls_&&this.hls_.loadSource(e)}},{key:"pause",value:function(){this.live&&this.stopLoad(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this)}},{key:"stopLoad",value:function(){this.hasLoadedSource=!1,this.hls_.stopLoad()}},{key:"play",value:function(){this.startLoad(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this)}},{key:"startLoad",value:function(){this.hasLoadedSource||(this.hasLoadedSource=!0,this.hls_.startLoad())}},{key:"onError",value:function(e,t){t.fatal&&this.handleFatalError(t),C.warn(t.type+" - "+t.details+". Fatal: "+t.fatal),this.broadcastHlsError(t)}},{key:"handleFatalError",value:function(e){switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:this.handleNetworkError();break;case Hls.ErrorTypes.MEDIA_ERROR:this.handleMediaError();break;default:this.dispatchFatalHlsBridgeError()}}},{key:"broadcastHlsError",value:function(e){this.trigger({type:f.default.HLS_BRIDGE_ERROR,data:e})}},{key:"handleNetworkError",value:function(){return this.numNetworkErrorRetries<A?(C.warn("Network error: retrying to load same manifest"),this.hls_.loadSource(this.lastSource),void this.numNetworkErrorRetries++):void this.dispatchFatalHlsBridgeError()}},{key:"handleMediaError",value:function(){return this.numMediaErrorRetries<P?(C.warn("Media error: attempting to get hls to recover from fatal media error"),this.hls_.recoverMediaError(),void this.numMediaErrorRetries++):void this.dispatchFatalHlsBridgeError()}},{key:"dispatchFatalHlsBridgeError",value:function(){this.trigger(f.default.HLS_BRIDGE_FATAL_ERROR)}},{key:"dispose",value:function(){this.hls_.off(Hls.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls_.off(Hls.Events.MANIFEST_PARSED,this.onManifestParsed),this.hls_.off(Hls.Events.LEVEL_LOADED,this.onLevelLoaded),this.hls_.off(Hls.Events.ERROR,this.onError),this.hls_.destroy(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(b);m.registerComponent("Hlsjs",k),g.registerTech("Hlsjs",k),videojs.options.techOrder.push("Hlsjs"),n.default=k},{"../../events/ad-events":8,"../../events/player-events":9,"./videojs-hls-cue-handler":68,"./videojs-hls-tag-parser":69}],68:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../../utils/projector-utils"),s=i(a),l=function(){function e(){r(this,e)}return o(e,null,[{key:"newCue",value:function(e,t,n,i){for(var r=window.VTTCue||window.TextTrackCue,o=0;o<i.rows.length;o++){var a=i.rows[o],l=!0,u=0,d="";if(!a.isEmpty()){for(var c=0;c<a.chars.length;c++)a.chars[c].uchar.match(/\s/)&&l?u++:(d+=a.chars[c].uchar,l=!1);a.cueStartTime=t;var f=new r(t,n,d.trim());u>=16?u--:u++;var p=s.default.isFirefox();p?f.line=o+1:f.line=o>7?o-2:o+1,f.align="left",f.positionAlign="left",f.position=Math.max(0,Math.min(100,100*(u/32)+(p?50:0))),e.addCue(f)}}}}]),e}();n.default=l},{"../../utils/projector-utils":58}],69:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=e.split(",");return t.reduce(function(e,t){var n=t.split("="),i=o(n,2),r=i[0],a=i[1];return e[r.toLowerCase()]=a,e},{})}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=e("../../events/player-events"),s=i(a),l="EXT-X-CUE-OUT",u="EXT-X-CUE-IN",d={extractCueFrom:function(e){var t=e.tagList;if(!t)return null;for(var n=0;n<t.length;n++){var i=t[n],o=i[0]||"",a=i[1]||"";switch(o){case l:return Object.assign({event:s.default.HLS_CUE_OUT,type:l},r(a));case u:return{event:s.default.HLS_CUE_IN,type:u}}}return null}};n.default=d},{"../../events/player-events":9}],70:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e.tech_;return t&&t.hls_?t.hls_:null}function a(e,t){s(e),l(e,t)}function s(e){e.error(E)}function l(e,t){e.trigger({type:f.default.FATAL_ERROR,error:t})}function u(e,t){for(var n=0;n<e.length;e++)if(t(e[n]))return n;return-1}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("../../events/player-events"),f=i(c),p=e("./videojs-hls-bridge"),h=i(p),v=new window.BPlayerLog("RecoverHlsError"),y=["onPlayerReady","onHlsBridgeFatalError","onWatchdogReload"],m=2,_="error_no_hls_tech",g="error_no_hls_stream",b="error_max_retries",E="The Media Player Encountered an Error, Please Reload the Web Page and Try Again",A=function(){function e(t){var n=this;r(this,e),this.player=t,this.streamCycleRetries=0,y.forEach(function(e){n[e]=n[e].bind(n)}),this.player.on(f.default.READY,this.onPlayerReady),this.player.on(f.default.WATCHDOG_RELOAD,this.onWatchdogReload)}return d(e,[{key:"onPlayerReady",value:function(){this.player.tech_.on(f.default.HLS_BRIDGE_FATAL_ERROR,this.onHlsBridgeFatalError)}},{key:"onWatchdogReload",value:function(){v.info("onWatchdogReload"),this.recoverStream()}},{key:"onHlsBridgeFatalError",value:function(){v.info("onHlsBridgeFatalError"),this.recoverStream()}},{key:"recoverStream",value:function(){var e=o(this.player);if(!e)return a(this.player,_),void v.error("Cannot recover from error. Can't find Hls tech on the player.");var t=h.default.getSourceType(),n=this.player.options_.filteredStreams||[],i=this.player.options_.sources.filter(function(e){return e.type===t&&n.indexOf(e)===-1}),r=this.player.currentSrc(),s=u(i,function(e){return e.src===r});if(s==-1)return a(this.player,g),void v.error("Could not find current source url "+r+" in original streams",i);if(n.push(i[s]),i.splice(s,1),0==i.length&&(v.warn("Ran out of original streams. Recycling filteredStreams"),i=n,n=[],this.streamCycleRetries++),this.streamCycleRetries>=m)return a(this.player,b),void v.error("Giving up on loading any manifest after "+this.streamCycleRetries+" attempts");this.player.options_.filteredStreams=n,v.info("Attempting to recover streams",i);var l=!this.player.paused();e.stopLoad(),this.player.src(i),e.recoverMediaError(),e.startLoad(),l&&this.player.play()}}],[{key:"init",value:function(){var t=this;return t.options_.use_recover_hls?void new e(t):void v.info("plugin disabled")}}]),e}();videojs.plugin("RecoverHlsError",A.init),n.default=A},{"../../events/player-events":9,"./videojs-hls-bridge":67}],71:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},l=videojs.getComponent("Button"),u=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"buildCSSClass",value:function(){return"blvs-share-button "+s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}}]),t}(l);n.default=u},{}],72:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this;return e.options_.use_share_overlay&&o(e.options_.share_metadata)?(videojs.registerComponent("ShareOverlay",u.default),videojs.registerComponent("ShareButton",s.default),e.on(p.default.READY,function(){var t=e.getChild("ShareOverlay"),n=e.controlBar.getChild("shareButton");n.on(["click","touchstart"],function(){t.toggleOverlay.call(t),e.trigger(p.default.REQUEST_SHARE)})}),void e.on(p.default.SHARE,function(){var t=e.getChild("ShareOverlay");t.toggleOverlay()})):void h.debug("Share control disabled. use_share_overlay: "+e.options_.use_share_overlay+", metadata: ",e.options_.share_metadata)}function o(e){return!c.default.isEmptyObject(e)&&!(!e.bitly_url&&!e.canonical_url)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./videojs-share-button"),s=i(a),l=e("./videojs-share-overlay"),u=i(l),d=e("../../utils/utils"),c=i(d),f=e("../../events/player-events"),p=i(f),h=new window.BPlayerLog("ShareControl");videojs.plugin("ShareControl",r),n.default=r},{"../../events/player-events":9,"../../utils/utils":61,"./videojs-share-button":71,"./videojs-share-overlay":73}],73:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return'<iframe src="'+e+"/iframe?id="+t+'" allowscriptaccess="always" frameborder="0"></iframe>'}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.bitly_url||e.canonical_url}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=e("../../utils/css-helpers"),f=i(c),p=e("../../events/player-events"),h=i(p),v=videojs.getComponent("Component"),y="blvs-share-overlay__line",m="blvs-share-overlay__close",_="blvs-share-overlay__title",g="blvs-share-overlay__share-link",b="vjs-hidden",E=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"createEl",value:function(){var e=this,t=document.createElement("div"),n=document.createElement("span"),i=document.createElement("input"),r="Share",o=["blvs-share-overlay",b],a="blvs-video-embed-"+this.player_.options_.id,u="blvs-video-permalink-"+this.player_.options_.id,d=this.playerOptions.metadata.live,c=this.playerOptions.metadata.title,p=t.cloneNode(!1);d&&(o.push("blvs-share-overlay__live"),c="Bloomberg TV"),f.default.addClassList(p,o);var v=t.cloneNode(!1);f.default.addClass(v,y);var E=t.cloneNode(!1),A=n.cloneNode(!1),P=document.createTextNode("x");f.default.addClass(A,"vjs-control-text"),f.default.addClass(E,m),E.addEventListener("click",this.toggleOverlay.bind(this)),p.appendChild(E);var w=t.cloneNode(!1);f.default.addClass(w,"blvs-share-overlay__share-controls"),p.appendChild(w);var C=t.cloneNode(!1),S=document.createTextNode(r);f.default.addClass(C,_);var O=n.cloneNode(!1),k=[g,g+"-facebook"];f.default.addClassList(O,k),O.addEventListener("click",this.socialShareClickHandlerFor("facebook",c));var T=n.cloneNode(!1),L=[g,g+"-twitter"];f.default.addClassList(T,L),T.addEventListener("click",this.socialShareClickHandlerFor("twitter",c));var R=n.cloneNode(!1),j=[g,g+"-linkedin"];f.default.addClassList(R,j),R.addEventListener("click",this.socialShareClickHandlerFor("linkedin",c));var D=n.cloneNode(!1),M=[g,g+"-email"];f.default.addClassList(D,M),D.addEventListener("click",this.socialShareClickHandlerFor("email",c));var I=n.cloneNode(!1),U=[g,g+"-google"];f.default.addClassList(I,U),I.addEventListener("click",this.socialShareClickHandlerFor("google",c)),w.appendChild(C),w.appendChild(v);var x=document.createElement("hr");if(f.default.addClassList(x,["blvs-share-overlay__divider","blvs-hide-on-mobile"]),w.appendChild(x),!d){var N=t.cloneNode(!1);f.default.addClassList(N,[y,"blvs-hide-on-mobile"]);var B=t.cloneNode(!1),F=document.createTextNode("Embed");f.default.addClassList(B,[_,"blvs-hide-on-mobile"]),w.appendChild(B),B.appendChild(F);var V=i.cloneNode(!1);f.default.addClass(V,"blvs-share-overlay__embed-input"),V.setAttribute("id",a),V.setAttribute("type","text"),V.setAttribute("readOnly",!0),V.setAttribute("size",35),V.setAttribute("value",s(this.playerOptions.serverUrl,this.playerOptions.metadata.id)),V.addEventListener("click",function(){return e.player_.trigger(h.default.SHARE_ACTION,"embed-text")}),w.appendChild(N),N.appendChild(V);var z=l(this.playerOptions.share_metadata);if(z){var H=t.cloneNode(!1);f.default.addClassList(H,[y,"blvs-hide-on-mobile"]);var G=t.cloneNode(!1),q=document.createTextNode("Permalink");f.default.addClassList(G,[_,"blvs-hide-on-mobile"]),w.appendChild(G),G.appendChild(q);var Y=i.cloneNode(!1);f.default.addClass(Y,"blvs-share-overlay__embed-input"),Y.setAttribute("id",u),Y.setAttribute("type","text"),Y.setAttribute("readOnly",!0),Y.setAttribute("size",35),Y.setAttribute("value",z),Y.addEventListener("click",function(){return e.player_.trigger(h.default.SHARE_ACTION,"permalink-text")}),w.appendChild(H),H.appendChild(Y),G=null,q=null,Y=null,H=null}V=null,B=null,F=null,N=null,w=null}return A.appendChild(P),E.appendChild(A),v.appendChild(O),v.appendChild(T),v.appendChild(R),v.appendChild(I),v.appendChild(D),C.appendChild(S),O=null,T=null,R=null,D=null,I=null,S=null,C=null,P=null,E=null,A=null,v=null,x=null,p}},{key:"socialShareClickHandlerFor",value:function(e,t){var n=this,i=this.shareUrlFor(e,t);
return function(){i.indexOf("mailto")>-1?window.location.href=i:window.open(i,e.toUpperCase(),"width=1000,height=500"),n.player_.trigger(h.default.SHARE_ACTION,e)}}},{key:"shareUrlFor",value:function(e,t){var n=this.playerOptions.share_metadata||{},i=encodeURI(n.bitly_url||n.canonical_url||"");if("twitter"==e){var r=n.twitter_handle?"&via="+n.twitter_handle:"";return"http://twitter.com/share?text="+t+"&url="+i+r}if("facebook"==e)return"https://www.facebook.com/sharer/sharer.php?u="+i;if("linkedin"==e){var o=n.twitter_handle?"&source="+n.twitter_handle:"";return"http://www.linkedin.com/shareArticle?mini=true&url="+i+"&title="+t+o}return"email"==e?"mailto:?subject="+t+"&body="+t+"%0D%0A"+i:"google"==e?"http://plus.google.com/share?url="+i:void 0}},{key:"toggleOverlay",value:function(){var e=f.default.hasClass(this.el_,b);return e?(f.default.removeClass(this.el_,b),void this.player_.pause()):(f.default.addClass(this.el_,b),void this.player_.play())}},{key:"buildCSSClass",value:function(){return"blvs-share-overlay "+d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"playerOptions",get:function(){return this.player_.options_}}]),t}(v);n.default=E},{"../../events/player-events":9,"../../utils/css-helpers":52}],74:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return e?void 0:t.createdate}function a(e,t){return e?0:t.duration}function s(e){return(e.ni_codes||[]).join(",")}function l(e,t){if(e)return t.id.replace("_","-").toLowerCase();var n=t.form_type||"short-form";return"vod-"+n}function u(e,t){return e?t.form_type:t.show_name}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=e("../../events/player-events"),f=i(c),p=e("../../events/ad-events"),h=i(p),v=new window.BPlayerLog("GoogleTagManagerPlugin"),y="video",m={PLAY:"play",END:"end",PAUSE:"pause",RESUME:"resume",COMPLETION:"completion",CAPTIONING:"captioning"},_={INITIAL:"initial",PREROLL:"preroll",MIDROLL:"midroll",CONTENT:"content"},g={"ad-preroll":_.PREROLL,"ad-midroll":_.MIDROLL},b="bplayer",E="bvpTrackVideo",A=["_createAdEventHandler","_createContentEventHandler","_handleInitialEvent","_handleContentPause","_handleTimeUpdate","_handleTextTrackChange","_handleCaptionsChange","_setContinuousPlayStatus"],P=[10,25,50,75,90,100],w="dataLayer",C=function(){function e(t,n){var i=this;r(this,e),this.player=t,this.dataLayer=n,this.isContinuousPlay=!1,A.forEach(function(e){i[e]=i[e].bind(i)}),t.on([h.default.AD_STARTED,f.default.PLAY],this._handleInitialEvent).on(h.default.AD_STARTED,this._createAdEventHandler(m.PLAY)).on(h.default.AD_PAUSED,this._createAdEventHandler(m.PAUSE)).on(h.default.AD_RESUMED,this._createAdEventHandler(m.RESUME)).on(h.default.AD_COMPLETED,this._createAdEventHandler(m.END)).on(f.default.PLAY,this._createContentEventHandler(m.PLAY)).on(f.default.PAUSE,this._handleContentPause).on(f.default.ENDED,this._createContentEventHandler(m.END)).on(f.default.CAPTIONS_CHANGE,this._handleCaptionsChange).on(f.default.CONTINUOUS_PLAY_START,this._setContinuousPlayStatus).on(f.default.TIMEUPDATE,this._handleTimeUpdate),t.ready(function(){t.textTracks().on("change",i._handleTextTrackChange)})}return d(e,[{key:"_setContinuousPlayStatus",value:function(){this.isContinuousPlay=!0}},{key:"_handleContentPause",value:function(){this.player.ended()||this._trackEvent({bvpEventAction:m.PAUSE,bvpEventLabel:_.CONTENT})}},{key:"_handleTimeUpdate",value:function(){var e=this.player;if(!e.options_.live){var t=e.duration();if(t<=0)return void v.error("Invalid video duration: "+t);var n=e.currentTime(),i=n/t*100,r=P.length;this.markersCache=this.markersCache||{};for(var o=0;o<r;o++){var a=P[o];if(i<a)return;this.markersCache[a]||(this.markersCache[a]=!0,this._trackEvent({bvpEventAction:m.COMPLETION,bvpEventLabel:a.toString()}))}}}},{key:"_createContentEventHandler",value:function(e){var t=this;return function(){t._trackEvent({bvpEventAction:e,bvpEventLabel:_.CONTENT})}}},{key:"_createAdEventHandler",value:function(e){var t=this;return function(n){if(!n.data)return void v.error("Missing event data, cannot log action: "+e);var i=n.data;t._trackEvent({bvpEventAction:e,bvpEventLabel:g[i.type],mediaDuration:1e3*i.duration})}}},{key:"_handleInitialEvent",value:function(){this.initEventHandled||(this.initEventHandled=!0,this._trackEvent({bvpEventAction:m.PLAY,bvpEventLabel:_.INITIAL}))}},{key:"_handleTextTrackChange",value:function(){for(var e=this.player.textTracks(),t=!1,n=0,i=e.length;n<i;n++){var r=e[n];if("showing"===r.mode&&"captions"===r.kind){t=!0;break}}this._trackCaptionEvent(t)}},{key:"_handleCaptionsChange",value:function(e){var t=e&&e.data&&e.data.enabled;this._trackCaptionEvent(t)}},{key:"_trackEvent",value:function(e){var t=Object.assign(this._createCommonEventData(),e);this.dataLayer.push(t)}},{key:"_trackCaptionEvent",value:function(e){this._trackEvent({bvpEventAction:m.CAPTIONING,bvpEventLabel:e?"on":"off"})}},{key:"_createCommonEventData",value:function(){var e=this.player,t=e.options_,n=(t.autoplayReportingValues||{}).analytics||{},i=t.metadata,r=t.live,d=Boolean(n.autoplay).toString(),c=(this.isContinuousPlay||Boolean(n.continuousPlay)).toString();return{bvpEventCategory:y,event:E,mediaTitle:u(r,i),mediaProgram:i.show_name,mediaType:l(r,i),niCodes:s(i),bmmrId:i.id,mediaDuration:a(r,i),mediaPublishedAt:o(r,i),mediaPlayer:b+"-"+e.options_.asset_version,mediaTech:e.techName_.toLowerCase(),continuousPlay:c,autoplay:d}}}],[{key:"init",value:function(){var t=this,n=t.options_;if(!n.use_google_tag_manager)return void v.info("plugin disabled");var i=n.google_tag_manager_data_layer_id||w,r=window[i];return r?void new e(t,r):void v.error("GTM data layer not found: "+i)}}]),e}();videojs.plugin("GoogleTagManagerPlugin",C.init),n.default=C},{"../../events/ad-events":8,"../../events/player-events":9}],75:[function(e,t,n){"use strict";function i(){function e(e){var t=e.screenX,r=e.screenY;t===p&&r===h||(p=t,h=r,n.userActive(!0)),i()}function t(){v||n.userActive(!1)}var n=this;if(!n.options_.use_activity_out)return void r.info("plugin disabled");var i=_.debounce(t.bind(n),o),c=e.bind(n),f=n.reportUserActivity.bind(n),p=null,h=null,v=!1;n.listenForUserActivity_=function(){var e=n.$(d);n.on(s,function(t){n.on(a,c),v=t.target!==e&&e.contains(t.target),i()}),n.on(l,function(){n.off(a,c),n.userActive(!1),v=!1}),n.on(u,i),n.on("mousedown",f),n.on("mouseup",f),n.on("keydown",f),n.on("keyup",f)}}Object.defineProperty(n,"__esModule",{value:!0});var r=new window.BPlayerLog("ActivityOverridePlugin"),o=5e3,a="mousemove",s="mouseover",l="mouseleave",u="play",d=".vjs-control-bar";videojs.plugin("ActivityOverridePlugin",i),n.default=i},{}],76:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"string"==typeof e&&0===e.indexOf("javascript:")}function a(e){var t=e.indexOf("("),n=t!==-1?e.slice(11,t).trim():null;if(n&&"function"==typeof window[n])return function(){try{return window[n]()}catch(e){h.error("Unable to execute page level tags",e)}}}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../events/ad-events"),u=i(l),d=e("../events/player-events"),c=i(d),f=e("../utils/projector-utils"),p=i(f),h=new window.BPlayerLog("ComscoreStreamSensePlugin"),v="3005059",y="6961552",m=0,_="embed",g=1,b=6e5,E=60,A=750,P=1e3,w="share",C={bb_pub_d:"bb_pub_d",bss_ni_codes:"ni_codes",c5:"c5",ns_st_ci:"id",ns_st_ct:!0,ns_st_dt:"createdate",ns_st_ep:"title",ns_st_li:"live",ns_st_pr:"show_name",ns_st_ty:"form_type"},S=function(){function e(){r(this,e)}return s(e,null,[{key:"ns_st_dt",value:function(e,t){return e[t]?e[t]:e.live===g?"N/A":void 0}},{key:"bss_ni_codes",value:function(e,t){if(e[t])return e[t].reduce(function(e,t,n){return""+e+(n>0?" ":"")+t},"")}},{key:"ns_st_ct",value:function(e){return this.isInAd?this.isLive?"va21":"va11":this.isLive?"vc13":"short-form"===e.form_type?"vc11":"vc12"}}]),e}(),O=["dispose","onAdClip","onAdCompleted","onAdLoading","onAdPaused","onAdPlayError","onAdResumed","onAdStarted","onAdTimeout","onBuffer","onContentChange","onDurationChange","onEnded","onError","onFullScreenChange","onPause","onPlay","onRetry","onShare","onShareAction","onTrackInfo","onVolumeChange"],k=function(){function e(t,n,i){var o=this;r(this,e),this.autoplayValues=n.autoplayReportingValues.comscore,this.clipDuration=0,this.clips={},this.clipsCount=0,this.currentClipId=null,this.initialClipId=null,this.isAsync=Boolean(n.ns_async),this.isInAd=!1,this.isLive=!1,this.player=i,this.playlistContentType=null,this.playlistDuration=0,this.playlistIndex=0,this.playlistTitle=null,this.lastRecordedTime=0,O.forEach(function(e){o[e]=o[e].bind(o)});var a=this.getBaseLabels(t,n),s=("https:"===window.location.protocol?"https://s":"http://")+"b.scorecardresearch.com/p?c1=2&c2="+("mini"===n.playerType?y:v);this.streamSense=new ns_.StreamSense(a,s),this.isAsync||this.initializePlaylist(),this.streamSense.setPauseOnBufferingInterval(0),this.streamSense.setKeepAliveInterval(b),this.startPositionPoll()}return s(e,[{key:"addDuration",value:function(e){e>0&&(this.playlistDuration+=e,this.streamSense.getPlaylist().setLabel("ns_st_ca",this.playlistDuration))}},{key:"getBaseLabels",value:function(e,t){var n=this.getDataFromClipMetadata(t.metadata),i=p.default.getFlashVersion();if(Object.assign(n,{bss_flash:i,bss_iframe:window!==window.top?g:m,c6:"*null",c7:window.location.href,c8:document.title,ns_st_mp:"BPlayer",ns_st_mv:t.metadata.version,ns_st_pu:"Bloomberg"},e),e.title&&(this.playlistTitle=e.title,delete n.title),e.page_level_tags)if(delete n.page_level_tags,o(e.page_level_tags)){var r=a(e.page_level_tags);r&&Object.assign(n,r())}else Object.assign(n,e.page_level_tags);return n.bss_auto_play=this.autoplayValues.bss_auto_play,n.bss_cont_play=this.autoplayValues.bss_cont_play,n}},{key:"getDataFromClipMetadata",value:function(e){var t=this,n={};return this.isLive=Boolean(e.live),e.form_type!==this.playlistContentType&&(this.playlistContentType=e.form_type,this.streamSense&&this.streamSense.getPlaylist().setLabel("bss_vid_type",this.playlistContentType)),e.title&&(this.isInAd||this.playlistTitle||(this.playlistTitle=e.title,this.streamSense&&this.streamSense.getPlaylist().setLabel("ns_st_pl",e.title))),e.duration&&!this.streamSense&&(this.playlistDuration=parseInt(e.duration,10),this.initialClipId=e.id),Object.keys(C).forEach(function(i){var r=C[i];if(S[i]){var o=S[i].call(t,e,r);return void(void 0!==o&&(n[i]=o))}var a=e[r];void 0!==a&&(n[i]=a)}),n}},{key:"getPosition",value:function(){if(this.isLive)return 0;try{return Math.round(this.player.currentTime()*P)}catch(e){return h.error("Failed to get currentTime",e),this.lastRecordedTime}}},{key:"getDuration",value:function(){return this.isLive?0:this.player.duration()}},{key:"getFullScreen",value:function(){return this.player.isFullscreen()?"full":"norm"}},{key:"startPositionPoll",value:function(){var e=this;this.pollIntervalId=setInterval(function(){e.lastRecordedTime=e.getPosition()},A)}},{key:"stopPositionPoll",value:function(){clearInterval(this.pollIntervalId),this.pollIntervalId=null}},{key:"shareNotify",value:function(e,t,n){var i=this.streamSense.getPlaylist().getLabel("ns_st_pl")||window.location.href;this.streamSense.customNotify({social_network:e,social_url:i,social_action:t,social_position:"video-controlbar"},n)}},{key:"isUserAction",value:function(){return this.player.userActive()}},{key:"initializePlaylist",value:function(){var e={};e.ns_st_pl=this.playlistTitle||"",e.ns_st_ca=this.playlistDuration||0,e.bss_vid_type=this.playlistContentType||"",e.bss_pl_num=this.playlistIndex,this.streamSense.setPlaylist(e)}},{key:"toggleHeartbeat",value:function(){this.streamSense.setHeartbeatIntervals([{playingtime:6e4,interval:this.isInAd?1e9:1e4},{playingtime:null,interval:this.isInAd?1e9:1e6}])}},{key:"onAdCompleted",value:function(){this.isInAd=!1,this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:g},this.getPosition())}},{key:"onAdPaused",value:function(){var e=this.isUserAction()?g:m;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,{bss_user_action:e},this.getPosition())}},{key:"onAdResumed",value:function(){var e=this.isUserAction()?g:m;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onAdStarted",value:function(){var e=this.isUserAction()?g:m;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onAdClip",value:function(e){if(e.data){var t=void 0,n="none";this.currentClipId=e.data.clip.content_id,this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{},this.getPosition()),this.isInAd=0===e.data.type.indexOf("ad-"),this.isInAd?(this.clipDuration=e.data.duration*P,this.currentClipId||(this.currentClipId="ad_clip_"+this.clipsCount)):this.clipDuration=this.getDuration(),e.data.url&&(n=e.data.url),this.clips[this.currentClipId]?(this.clips[this.currentClipId].part++,t=this.clips[this.currentClipId]):(this.currentClipId!==this.initialClipId&&this.addDuration(this.clipDuration),this.clipsCount++,this.streamSense.getPlaylist().setLabel("ns_st_cp",this.clipsCount),t=this.getDataFromClipMetadata(e.data.metadata),t.ns_st_cu=n,t.clip_num=this.clipsCount,t.part=1,this.clips[this.currentClipId]=t),this.isInAd?(this.isLive&&(t.ns_st_li=g),t.ns_st_ad=g,t.ns_st_ty=e.data.type.substring(3)):t.bss_precision=e.data.isConvivaPrecision?g:m,t.ns_st_cn=this.clips[this.currentClipId].clip_num,t.ns_st_ci=this.currentClipId,t.ns_st_cl=this.clipDuration,t.ns_st_pn=this.clips[this.currentClipId].part,t.ns_st_tp=m,t.ns_st_cs=this.player.width()+"x"+this.player.height(),t.bss_stream_url=n,t.bss_tech_name=this.player.techName_,this.streamSense.setClip(t)}}},{key:"onAdLoading",value:function(){0===this.clipsCount&&this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,{},this.getPosition())}},{key:"onAdPlayError",value:function(){var e=arguments[1]||"",t={bss_aderror:"adsplayerror",ns_st_adtype:e};this.streamSense.customNotify(t,this.getPosition())}},{key:"onAdTimeout",value:function(){var e=arguments[1],t=e.type||"",n=void 0;switch(t){case u.default.MAX_RETRIES_REACHED:n="adsloadtimeout";break;case u.default.AD_PLAYBACK_TIMED_OUT:n="adsplaytimeout";break;case u.default.AD_LOAD_TIMED_OUT:n="adsloadtimeout"}var i={bss_aderror:n,ns_st_adtype:t};this.streamSense.customNotify(i,this.getPosition())}},{key:"onBuffer",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,{},this.getPosition())}},{key:"onVolumeChange",value:function(){var e=this.player.muted(),t=e?0:this.player.volume();this.streamSense.setLabel("ns_st_vo",t)}},{key:"onContentChange",value:function(e){e.data&&(this.playlistIndex++,this.playlistTitle="",this.playlistDuration=0,this.playlistContentType="",e.data.title&&(this.playlistTitle=e.data.title),e.data.duration&&(this.playlistDuration=parseInt(e.data.duration)),e.data.form_type&&(this.playlistContentType=e.data.form_type),this.initializePlaylist())}},{key:"onDurationChange",value:function(){var e=this.getDuration();this.clipDuration||this.isInAd&&!(this.isInAd&&e<=E)||(this.clipDuration=e*P,this.currentClipId!==this.initialClipId&&this.addDuration(this.clipDuration),this.streamSense.getClip().setLabel("ns_st_cl",this.clipDuration))}},{key:"onEnded",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:g},this.getPosition())}},{key:"onError",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:g,ns_st_er:"Error"},this.getPosition())}},{key:"onFullScreenChange",value:function(){var e=this.getFullScreen();this.streamSense.setLabel("ns_st_ws",e),this.streamSense.customNotify({ns_st_ev:"wstate"},this.getPosition())}},{key:"onPause",value:function(){var e=this.isUserAction()?g:m;this.toggleHeartbeat(),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,{bss_user_action:e},this.getPosition())}},{key:"onPlay",value:function(){var e=this.isUserAction()?g:m;this.toggleHeartbeat(this.streamSense),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onRetry",value:function(e){if(!this.isInAd){var t=e.data&&e.data.url?e.data.url:"none";this.streamSense.getClip().setLabel("bss_stream_url",t),this.streamSense.customNotify({bss_stream_url:t},this.getPosition())}}},{key:"onShare",value:function(){this.shareNotify("share-menu","share",this.getPosition())}},{key:"onShareAction",value:function(){var e=arguments[1];if(e){var t=this.getPosition();return"embed-copy"===e||"embed-text"===e?void this.shareNotify(e,_,t):void this.shareNotify(e,w,t)}}},{key:"onTrackInfo",value:function(e){this.isAsync&&this.initializePlaylist(),e.data&&e.data.referrer&&(this.streamSense.setLabel("c9",e.data.referrer),this.streamSense.notify("c9",e.data.referrer))}},{key:"dispose",value:function(){this.stopPositionPoll(),this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:g},this.getPosition()),this.streamSense.setClip(null),this.streamSense=null,this.player=null}}],[{key:"init",value:function(t){var n=this,i=n.options_;if(!i.use_comscore||!ns_)return void h.info("plugin disabled");var r=new e(t,i,n);n.on(u.default.AD_COMPLETED,r.onAdCompleted),n.on(u.default.AD_PAUSED,r.onAdPaused),n.on(u.default.AD_RESUMED,r.onAdResumed),n.on(u.default.AD_STARTED,r.onAdStarted),n.on(u.default.CLIP,r.onAdClip),n.on(c.default.AD_LOADING,r.onAdLoading),n.on(c.default.ADS_PLAY_ERROR,r.onAdPlayError),n.on(c.default.ADS_TIMEOUT_ERROR,r.onAdTimeout),n.on(c.default.BUFFER,r.onBuffer),n.on([c.default.BVP_VOLUME_CHANGE,c.default.VOLUME_CHANGE],r.onVolumeChange),n.on(c.default.CONTENT_CHANGE,r.onContentChange),n.on(c.default.DURATION_CHANGE,r.onDurationChange),n.on(c.default.ENDED,r.onEnded),n.on(c.default.ERROR,r.onError),n.on(c.default.FULL_SCREEN_CHANGE,r.onFullScreenChange),n.on(c.default.PAUSE,r.onPause),n.on(c.default.PLAY,r.onPlay),n.on(c.default.RETRY,r.onRetry),n.on(c.default.SHARE,r.onShare),n.on(c.default.SHARE_ACTION,r.onShareAction),n.on(c.default.TRACK_INFO,r.onTrackInfo),n.on(c.default.DISPOSE,function(){r.dispose(),r=null})}}]),e}();videojs.plugin("ComscoreStreamSensePlugin",k.init),n.default=k},{"../events/ad-events":8,"../events/player-events":9,"../utils/projector-utils":58}],77:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../events/player-events"),s=i(a),l=e("../utils/query-string"),u=i(l),d=new window.BPlayerLog("MediabongPlugin"),c="//player.mediabong.net/se/123.js",f=function(){function e(){r(this,e)}return o(e,null,[{key:"sendAPICall",value:function(e){var t=u.default.toQueryString({url:location.href,cat:e}),n=c+"?"+t;return fetch(n,{mode:"cors"}).catch(function(e){d.error(e)})}},{key:"init",value:function(){var t=this;return t.options_.use_mediabong?void t.on(s.default.TRACK_INFO,function(t){var n=t.data&&t.data.section;n&&e.sendAPICall(n)}):void d.info("plugin disabled")}}]),e}();videojs.plugin("MediabongPlugin",f.init),n.default=f},{"../events/player-events":9,"../utils/query-string":59}],78:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this;return e.options_.use_moat?void e.on(s.default.AD_LOADED,o):void l.info("plugin disabled")}function o(e){var t=e.data,n=void 0===t?{}:t;if(!window.initMoatTracking)return void l.error("Cannot track ads: missing window.initMoatTracking");var i={partnerCode:u,viewMode:n.viewMode,slicer1:document.location.href,zMoatCP:"{"+decodeURIComponent(n.custParams)+"}",zMoatAT:n.adType,zMoatST:n.isLive?"live":"vod"};l.info("Moat Ad tracking: ",i),window.initMoatTracking(n.adsManager,i,n.adContainer)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("../events/ad-events"),s=i(a),l=new window.BPlayerLog("MoatAdViewabilityPlugin"),u="bloombergjsvideo915507035426";videojs.plugin("MoatAdViewabilityPlugin",r),r.__PARTNER_CODE=u,n.default=r},{"../events/ad-events":8}],79:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(e){r.videoPlaying=e}function t(t,n){e(n)}function n(){i.on(s.default.PLAY,function(e){if(t(e.type,!0),r.video){var n=o(i);r.video.trackPlay(n.id,{title:n.title,section:n.show_name,tags:n.ni_codes})}}),i.on(s.default.ENDED,function(e){if(t(e.type,!1),r.video){var n=o(i);r.video.trackPause(n.id)}}),i.on(s.default.PAUSE,function(e){if(t(e.type,!1),r.video){var n=o(i);r.video.trackPause(n.id)}})}var i=this,r=window.PARSELY;return r?i.options_.use_parsely?void n():void l.info("plugin disabled"):void l.info("Cannot track: missing window.PARSELY")}function o(e){var t=e.options_;return t.metadata}var a=e("../events/player-events"),s=i(a),l=new window.BPlayerLog("ParselyPlugin");videojs.plugin("ParselyPlugin",r)},{"../events/player-events":9}],80:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=this;return e.options_.use_persist_listeners?(e.on(l.default.VOLUME_CHANGE,function(){a.default.set("volume",e.volume())}),void e.on(l.default.READY,function(){var t=a.default.get("volume");void 0!==t&&e.volume(parseFloat(t))})):void u.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/persist-controls"),a=i(o),s=e("../events/player-events"),l=i(s),u=new window.BPlayerLog("PersistListeners");videojs.plugin("PersistListeners",r),n.default=r},{"../events/player-events":9,"../utils/persist-controls":57}],81:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=this;return e.options_.use_playback_outro?void videojs.registerComponent("PlaybackOutro",m):void h.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},d=e("../events/player-events"),c=i(d),f=e("../lib/google-ads/ad-utils"),p=i(f),h=new window.BPlayerLog("PlaybackOutroComponent"),v=videojs.getComponent("Component"),y=["onFinishedPlaying","onStartedPlaying","onReplayClick"],m=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.disabled=!1,i.hide(),y.forEach(function(e){i[e]=i[e].bind(i)}),e.on(c.default.ENDED,i.onFinishedPlaying),e.on(c.default.PLAY,i.onStartedPlaying);var a=e.options_.title||n.message;return i.setMessage(a),i.on(i.el(),"click",i.onReplayClick),i}return a(t,e),l(t,[{key:"createEl",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-playback-outro",innerHTML:'<div class="bvp-playback-outro__message"></div>\n        <input type="button" class="bvp-playback-outro__replay-button" aria-live="polite"/>'})}},{key:"setMessage",value:function(e){e&&(this.$(".bvp-playback-outro__message").textContent=e)}},{key:"onFinishedPlaying",value:function(){this.disabled||this.show()}},{key:"onStartedPlaying",value:function(){this.disabled||this.hide()}},{key:"onReplayClick",value:function(){var e=this.player_.options_.plugins.GoogleAdsPlugin;return p.default.canDisplayAds(e)&&p.default.hasPreroll(e)?(this.hide(),void this.player_.trigger(c.default.PLAY_PREROLL)):void this.player_.play()}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}}]),t}(v);videojs.plugin("PlaybackOutroPlugin",s),n.default=m},{"../events/player-events":9,"../lib/google-ads/ad-utils":23}],82:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e("../utils/projector-utils"),s=i(a),l=e("../events/player-events"),u=i(l),d=new window.BPlayerLog("PosterPlugin"),c="blvs-poster-as-slate",f=["onPlayerReady","onPlayerEnded"],p=function(){function e(t){var n=this;r(this,e),this.player=t,this.autoplay=t.options_.original_user_options.autoplay,this.posterUrl=t.options_.posterUrl,this.showPosterSlate=t.options_.poster_as_slate,this.hasLoadedPoster=!1,f.forEach(function(e){n[e]=n[e].bind(n)}),t.on(u.default.READY,this.onPlayerReady),t.on(u.default.ENDED,this.onPlayerEnded)}return o(e,[{key:"onPlayerReady",value:function(){return this.showPosterSlate?(s.default.isMobile()||this.player.addClass(c),void this.loadPoster()):void(this.autoplay||this.loadPoster())}},{key:"onPlayerEnded",value:function(){this.loadPoster(),this.player.hasStarted(!1)}},{key:"loadPoster",value:function(){this.hasLoadedPoster||(s.default.isMobile()?this.player.el_.setAttribute("poster",this.posterUrl):this.player.poster(this.posterUrl),this.hasLoadedPoster=!0)}}],[{key:"init",value:function(){var t=this;return t.options_.use_poster_slate?s.default.forcedToPlayFlash(t.options_)?void d.info("Not enabled for Flash tech"):void new e(t):void d.info("plugin disabled")}}]),e}();videojs.plugin("PosterPlugin",p.init),n.default=p},{"../events/player-events":9,"../utils/projector-utils":58}],83:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=this;if(!e.options_.use_smooth_scrub)return void u.info("plugin disabled");var t=e.currentTime.bind(e);e.currentTime=function(n){var i=t(n);return void 0!==n&&(e.cache_.currentTime=n),i},videojs.registerComponent("SeekBar",c)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=new window.BPlayerLog("SmoothScrubbingPlugin"),d=videojs.getComponent("SeekBar"),c=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"handleMouseMove",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleMouseMove",this).call(this,e),this.player_.trigger("timeupdate")}}]),t}(d);videojs.plugin("SmoothScrubbingPlugin",a),n.default=a},{}],84:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=this;if(!t.options_.use_stream_watchdog)return void f.info("plugin disabled");var n=new v(t,e);t.on(l.default.READY,function(){t.tech_&&n.start()})}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../events/player-events"),l=i(s),u=e("../utils/VisibilityMonitor"),d=i(u),c=["startCountdown","stopCountdown","onTimeUpdate","onSeekEnd","reloadPlayer","dispose"],f=new window.BPlayerLog("StreamWatchdog"),p="seeked",h="Flash",v=function(){function e(t,n){var i=this;r(this,e),this.countdownId=null,this.isLive=Boolean(t.options_.original_user_options.live),this.options=n,this.pastTime=null,this.player=t,this.timeout=this.isLive?this.options.liveStreamTimeout:this.options.vodStreamTimeout,c.forEach(function(e){i[e]=i[e].bind(i)})}return a(e,[{key:"start",value:function(){h!==this.player.techName_&&(d.default.isPageVisible()&&this.player.on(l.default.PLAY,this.startCountdown),this.player.on(l.default.TIMEUPDATE,this.onTimeUpdate),this.player.on(l.default.DISPOSE,this.dispose),this.player.on([l.default.ENDED,l.default.PAUSE,l.default.ERROR],this.stopCountdown),this.videoTag=this.player.tech_.el(),this.videoTag.addEventListener(p,this.onSeekEnd))}},{key:"onTimeUpdate",value:function(){var e=this.player.currentTime(),t=this.player.paused(),n=this.player.seeking(),i=this.player.scrubbing();t||n||i||e&&this.pastTime!==e&&(this.pastTime=e,this.startCountdown())}},{key:"onSeekEnd",value:function(){this.pastTime=null}},{key:"reloadPlayer",value:function(){f.warn("Stream playback stalled, triggering a reload request"),this.stopCountdown();var e={type:"watchdog-reload",details:"Playback stalled for "+this.timeout+"s"};this.player.trigger({type:l.default.WATCHDOG_RELOAD,data:e})}},{key:"startCountdown",value:function(){window.clearTimeout(this.countdownId),this.countdownId=setTimeout(this.reloadPlayer,this.timeout)}},{key:"stopCountdown",value:function(){window.clearTimeout(this.countdownId)}},{key:"dispose",value:function(){this.stopCountdown(),this.videoTag.removeEventListener(p,this.onSeekEnd),this.player=this.options=this.videoTag=null}}]),e}();videojs.plugin("StreamWatchdogPlugin",o),n.default=v},{"../events/player-events":9,"../utils/VisibilityMonitor":49}],85:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t;
}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=e("../events/player-events"),d=i(u),c=e("../events/ad-events"),f=i(c),p=new window.BPlayerLog("TitleBarComponent"),h=videojs.getComponent("Component"),v=["onAdCompleted","onAdLoaded","onFinishedPlaying","onPause","onPlay","onUserActive","onUserInactive"],y="bvp-title-bar__visible",m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return v.forEach(function(e){n[e]=n[e].bind(n)}),n.isAdPlaying=!1,n.isEmpty=!e.options_.title,n.isActive=!1,n.setTitle(e.options_.title),e.on([f.default.AD_COMPLETED,d.default.ADS_TIMEOUT_ERROR],n.onAdCompleted).on(f.default.AD_LOADED,n.onAdLoaded).on(d.default.ENDED,n.onFinishedPlaying).on(d.default.PAUSE,n.onPause).on(d.default.PLAY,n.onPlay).on(d.default.USER_ACTIVE,n.onUserActive).on(d.default.USER_INACTIVE,n.onUserInactive),n}return a(t,e),s(t,[{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-title-bar",innerHTML:'<div class="bvp-title-bar__text"></div>'})}},{key:"setTitle",value:function(e){this.$(".bvp-title-bar__text").textContent=e}},{key:"show",value:function(){this.addClass(y)}},{key:"hide",value:function(){this.removeClass(y)}},{key:"onAdLoaded",value:function(){this.isAdPlaying=!0,this.hide()}},{key:"onAdCompleted",value:function(){this.isAdPlaying=!1}},{key:"onPause",value:function(){this.isEmpty||this.player_.ended()||this.show()}},{key:"onPlay",value:function(){this.isEmpty||this.isActive||this.hide()}},{key:"onUserActive",value:function(){this.isActive=!0,this.isEmpty||this.player_.ended()||this.isAdPlaying||this.show()}},{key:"onUserInactive",value:function(){this.isActive=!1,this.player_.paused()||this.hide()}},{key:"onFinishedPlaying",value:function(){this.hide()}}],[{key:"init",value:function(){var e=this;return e.options_.use_title_bar?void videojs.registerComponent("TitleBar",t):void p.info("plugin disabled")}}]),t}(h);videojs.plugin("TitleBarPlugin",m.init),n.default=m},{"../events/ad-events":8,"../events/player-events":9}],86:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=this;return e.options_.use_bvp_volume_button?void videojs.registerComponent("VolumeMenuButton",c):void u.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=new window.BPlayerLog("VolumeMenuButton"),d=videojs.getComponent("VolumeMenuButton"),c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.menuContent.on("mouseleave",o.handleMouseLeave.bind(o)),o}return o(t,e),s(t,[{key:"handleMouseLeave",value:function(){this.el_.blur()}},{key:"handleClick",value:function(){(this.player_.muted()||0==this.player_.volume())&&this.player_.volume(1),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleClick",this).call(this)}}]),t}(d);videojs.plugin("OverrideVideojsVolumeButton",a),n.default=c},{}],87:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},u=e("../utils/event-target"),d=i(u),c=e("../utils/video-tag-generator"),f=i(c),p=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.element=e,i.settings=n,i.tagGenerator=new f.default(n),!e)throw new Error("View element is not provided");return i}return a(t,e),s(t,[{key:"preRender",value:function(){throw new Error("Required method preRender is not implemented.")}},{key:"render",value:function(){this.trigger(t.ON_BEFORE_RENDER);var e=this,n=this.settings.dataSetup,i=this.dispose.bind(this),r=this.tagGenerator.generateVideoTag(),o=r.id;if(!this.preRender(r))return void this.trigger(t.ON_ERROR,{error:new Error("Failed to pre-render video element")});var a=void 0;n.id=o;try{a=window.videojs(o,n)}catch(e){return this.element=null,void this.trigger(t.ON_ERROR,{error:e})}return a.ready(function(){e.element=null,e.trigger(t.ON_RENDER,{player:this})}),a.on("dispose",i),a}},{key:"dispose",value:function(){this.element=this.settings=this.tagGenerator=null,this.trigger(t.ON_DISPOSE),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeAllEventListeners",this).call(this)}}]),t}(d.default);Object.defineProperties(p,{ON_BEFORE_RENDER:{value:"beforeRender"},ON_RENDER:{value:"render"},ON_DISPOSE:{value:"dispose"},ON_ERROR:{value:"error"}}),n.default=p},{"../utils/event-target":55,"../utils/video-tag-generator":62}],88:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("./View"),u=i(l),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"preRender",value:function(e){return this.element.innerHTML="",this.element.appendChild(e),!0}}]),t}(u.default);n.default=d},{"./View":87}],89:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("./View"),u=i(l),d="Missing parent node. Cannot attach the video player",c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"preRender",value:function(e){var t=this.element.parentNode;return t?(t.replaceChild(e,this.element),!0):(this.trigger(u.default.ON_ERROR,{error:new Error(d)}),!1)}}]),t}(u.default);n.default=c},{"./View":87}]},{},[7]);