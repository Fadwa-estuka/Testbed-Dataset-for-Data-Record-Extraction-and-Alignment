!function(a,b,c,d){c.detectSource=function(){var a=document.location.pathname;return a.search(/^\/music\/track/)>=0?"Track":a.search(/^\/music\/genre/)>=0?"Genre":a.search(/^\/music\/moods/)>=0?"Moods":a.search(/^\/music\/search/)>=0?"Search":a.search(/^\/music\/artist/)>=0?"Artist":a.search(/^\/music\/(user\/)?soundboxes/)>=0?"Soundboxes":a.search(/^\/music\/cart/)>=0?"Cart":a.search(/^\/music\/?$/)>=0?"HP":"Undefined"}}(window,document,Ss,jQuery),function(a,b,c,d){c.analytics={search:function(a,b){window.hasOwnProperty("analytics")&&analytics.track("cart.searchText",{source:c.detectSource(),term:a,count:b,userId:c.userId})},addItem:function(a){window.hasOwnProperty("analytics")&&analytics.track("cart.addItem",{source:c.detectSource(),trackId:a,userId:c.userId})},playerStart:function(a){window.hasOwnProperty("analytics")&&analytics.track("player.play",{source:c.detectSource(),trackId:a,userId:c.userId})},transaction:function(a,b){if(a&&window.hasOwnProperty("analytics")){var d={userId:c.userId,transactionId:a.purchaseId,transactionTotal:a.revenue,currencyCode:a.currency,transactionProducts:[]};_.each(a.items,function(a){d.transactionProducts.push({sku:a.id,name:a.name,price:a.price,quantity:a.quantity})}),analytics.track(b,d),console.log("[GTM] Sent data.",d)}}}}(window,document,Ss,jQuery),function(a){function b(a){return a=a.replace(/^\/\w\w\//,"/")}function c(a,b){return a="/"+b+a}a(".footer-languages .languages a").click(function(d){d.preventDefault();var e=a(this).data("language"),f=window.location.pathname,g=window.location.search.replace("?","");f=b(f),f=c(f,e);var h=f;g&&g.length&&(h+="?"+g),window.location=h})}(jQuery),function(a){var b=a.sync;a.sync=function(a,c,d){return"delete"===a&&(d.data&&(d.data=JSON.stringify(d.data)),d.contentType="application/json"),b.apply(this,[a,c,d])}}(Backbone),function(a){function b(b,d){this.element=b,this.options=a.extend({},c,d),this._defaults=c,this.init()}var c={promptTemplate:"#are-you-sure-template",phrases:{message:"Are you sure?",executeLabel:"Yes",cancelLabel:"Cancel"},attachment:"top right",targetAttachment:"middle right",fadeDelay:"fast",onExecute:a.noop,onCancel:a.noop};b.prototype.init=function(){this.$button=a(this.element),this.$promptTemplate=a(this.options.promptTemplate);var b=this;this.$button.on("click.areYouSure",function(){b.displayPrompt()})},b.prototype.displayPrompt=function(){var b=swig.render(this.$promptTemplate.html(),{locals:this.options.phrases});this.$prompt=a(b),this.$prompt.show(),this.$prompt.css("opacity",0),a("body").append(this.$prompt);var c={element:this.$prompt,target:this.$button,attachment:this.options.attachment,targetAttachment:this.options.targetAttachment};this.tether=new Tether(c),this.$prompt.fadeTo(this.options.fadeDelay,1);var d=this;this.$executeButton=this.$prompt.find("button.btn-execute"),this.$executeButton.on("click",function(){d.execute()}),this.$cancelButton=this.$prompt.find("button.btn-cancel"),this.$cancelButton.on("click",function(){d.cancel()}),this.$prompt.on("mousedownoutside",function(){d.cancel()})},b.prototype.execute=function(){a.isFunction(this.options.onExecute)&&this.options.onExecute.call(this),this.clearPrompt()},b.prototype.cancel=function(){a.isFunction(this.options.onCancel)&&this.options.onCancel.call(this),this.clearPrompt()},b.prototype.clearPrompt=function(){if(this.$executeButton&&this.$executeButton.off(),this.$cancelButton&&this.$cancelButton.off(),this.$prompt){this.$prompt.off();var b=this;this.$prompt.fadeOut(this.options.fadeDelay,function(){b.tether&&b.tether.destroy(),a(this).remove()})}},b.prototype.destroy=function(){this.clearPrompt(),this.$button.off("click.areYouSure")},a.fn.areYouSure=function(c){return this.each(function(){a.data(this,"ss_areYouSure")||a.data(this,"ss_areYouSure",new b(this,c))})}}(jQuery),function(a){function b(b,d){this.element=b,this.options=a.extend({},c,d),this._defaults=c,this.init()}var c={};b.prototype.init=function(){this.$form=a(this.element),this.$input=this.$form.find(".page-input");var b=this;this.$form.on("submit.paginator",function(){return b.validatePage(),!0})},b.prototype.validatePage=function(){var a=Number(this.$form.data("lastPage")),b=Number(this.$input.val());isNaN(b)&&(b=1,this.$input.val(1)),b>a?this.$input.val(a):b<1&&this.$input.val(1)},b.prototype.destroy=function(){this.$form.off("submit.paginator")},a.fn.paginator=function(c){return this.each(function(){a.data(this,"ss_paginator")||a.data(this,"ss_paginator",new b(this,c))})}}(jQuery),function(a){function b(b,d){this.element=b,this.options=a.extend({},c,d),this._defaults=c,this.init()}var c={};b.prototype.init=function(){this.$listElement=a(this.element),this.$listElement.on("mouseover.tracklist","tr.track-row",function(){a(this).find(".form-cart-btn button.btn:not(.btn-added):not(.btn-wait)").addClass("btn-primary")}).on("mouseout.tracklist","tr.track-row",function(){a(this).find(".form-cart-btn button.btn").removeClass("btn-primary")}),this.$listElement.find(".deleted-tooltip").tooltip({trigger:"hover",placement:"right",container:"#item-tooltips"})},b.prototype.destroy=function(){this.$listElement.off("mouseover.tracklist mouseout.tracklist"),this.$listElement.find(".deleted-tooltip").tooltip("destroy"),a.removeData(this.element,"ss_tracklist")},a.fn.tracklist=function(c){return this.each(function(){a.data(this,"ss_tracklist")||a.data(this,"ss_tracklist",new b(this,c))})}}(jQuery),function(a,b){function c(b){this.options=a.extend({},d,b),this._defaults=d,this.init()}var d={formAction:null,cartUrl:null,defaultCoverArtUrl:null,headerCartLink:".cart-link a",headerCountElement:".cart-link .count",buttonElement:"button.add-to-cart",buttonWaitClass:"btn-wait",buttonAddedClass:"btn-added",addedPopupTemplate:"#added-to-cart-template",tetherTarget:"#shutterstock-header",hideTimeoutDelay:4e3,messageAction:null,phrases:{itemAdded:"Added to your cart.",by:"by",viewCart:"View Cart",couldNotAddToCart:'We couldn\'t add "__title__" to your cart. Please try again later.',oops:"Oops"}};c.prototype.init=function(){this.$cartLink=a(document).find(this.options.headerCartLink),this.$cartCount=a(document).find(this.options.headerCountElement)},c.prototype.handleAddItemForm=function(b,c){c=a.extend({onSuccess:function(){}},c||{}),this.cartItems=this.cartItems||{};var d={submittedForm:b,formButton:b.find(this.options.buttonElement),addedTrack:b.closest(".track").data("playerMetadata")},e=(new Date).getTime().toString();this.cartItems[e]=d,this.disableSubmitted(d),this.disableCartLinks();var f=b.serialize(),g=this.options.formAction?this.options.formAction:b.attr("action"),h=this;d.request=a.ajax({url:g,type:"POST",dataType:"json",data:f,async:!0,complete:function(){h.enableSubmitted(d),delete h.cartItems[e];var a=0;for(var b in h.cartItems)a++;0===a&&h.enableCartLinks()},success:function(a){h.updateCartDisplay(a),d.formButton.addClass(h.options.buttonAddedClass),h.displayPopup(d),h.disableCartLinks(),c.onSuccess(a)},error:function(a){h.displayErrorMessage(d)}})},c.prototype.disableSubmitted=function(a){a.formButton.removeClass("btn-primary"),a.formButton.addClass(this.options.buttonWaitClass),a.submittedForm.attr("disabled","disabled")},c.prototype.enableSubmitted=function(a){a.formButton.removeClass(this.options.buttonWaitClass),a.submittedForm.removeAttr("disabled")},c.prototype.disableCartLinks=function(){this.$cartLink.addClass("disabled").removeAttr("href"),this.$popup&&this.$popup.length&&this.$popup.find(".btn-view-cart").addClass("disabled").removeAttr("href")},c.prototype.enableCartLinks=function(){this.$cartLink.removeClass("disabled").attr("href",this.options.cartUrl),this.$popup&&this.$popup.length&&this.$popup.find(".btn-view-cart").removeClass("disabled").attr("href",this.options.cartUrl)},c.prototype.updateCartDisplay=function(a){this.$cartCount.html(a.count)},c.prototype.displayPopup=function(b){this.removePopup();var c=swig.render(a(this.options.addedPopupTemplate).html(),{locals:{item:b.addedTrack,phrases:this.options.phrases,cartUrl:this.options.cartUrl}});this.$popup=a(c),a("body").append(this.$popup);var d=this;this.$popup.one("mousedownoutside",function(){d.hidePopup()}),this.$popup.find(".btn-close").one("click",function(){d.hidePopup()}),a(document).one("pjax:start.add-to-cart",function(){d.hidePopup()}),this.setPopupTimeout(),a.isFunction(Tether)&&(this.popupTether=new Tether({element:this.$popup,target:a(this.options.tetherTarget),attachment:"top right",targetAttachment:"bottom right",constraints:[{to:"window",pin:!0}]}),a(window).trigger("resize"))},c.prototype.hidePopup=function(){if(this.$popup){var a=this;this.$popup.fadeOut("fast",function(){a.removePopup()})}},c.prototype.removePopup=function(){a(document).off("pjax:start.add-to-cart"),this.popupTether&&this.popupTether.destroy(),this.$popup&&(this.$popup.off("mousedownoutside"),this.$popup.off("mouseover"),this.$popup.off("mouseout"),this.$popup.off("mousedownoutside"),this.$popup.find(".btn-close").off("click"),this.$popup.remove()),this.popupTimeout&&clearTimeout(this.popupTimeout)},c.prototype.setPopupTimeout=function(){var b=this;this.popupTimeout=setTimeout(function(){b.hidePopup()},this.options.hideTimeoutDelay),this.$popup.one("mouseover",function(){clearTimeout(b.popupTimeout),a(this).one("mouseout",function(){b.setPopupTimeout()})})},c.prototype.displayErrorMessage=function(a){if(this.options.messageAction){var b=this.options.phrases.couldNotAddToCart.replace("__title__",a.addedTrack.title),c={messageClass:"alert-error",boldMessage:this.options.phrases.oops,message:b};this.options.messageAction.addMessageItem(c)}},c.prototype.destroy=function(){this.removePopup()},a.addToCart=function(b){return a("html").data("ss_addToCart")||a("html").data("ss_addToCart",new c(b)),a("html").data("ss_addToCart")}}(jQuery,Ss),function(a,b){b.plugins=b.plugins?b.plugins:{},b.plugins.windowEvents={breakpoints:[{name:"phone-v",size:"320"},{name:"phone-h",size:"480"},{name:"mini-tablet",size:"600"},{name:"tablet-v",size:"768"},{name:"tablet-h",size:"1024"},{name:"desktop",size:"1280"},{name:"large-desktop",size:"1600"},{name:"very-large-desktop",size:"999999"}],init:function(){this.$window=a(window),this.size={width:0,height:0},this.currentBreakpoint=null,this.screenDisplayId=null,a(window).on({resize:a.proxy(this.onResize,this)}),this.onResize()},onResize:function(){this.size.width=this.$window.width(),this.size.height=this.$window.height(),this.checkMatches()},checkMatches:function(){for(var a=!1,b=0,c=this.breakpoints.length;b<c;){var d=this.breakpoints[b];if(this.size.width<=d.size&&(this.isCurrentBreakpoint(d.name)||this.breakMatch(d.name),a=!0),a)return!1;b++}},isCurrentBreakpoint:function(a){return this.currentBreakpoint===a},breakMatch:function(a){this.currentBreakpoint=a,this.$window.trigger("window:breakMatch")}},b.plugins.windowEvents.init()}(jQuery,Ss),function(a,b){function c(b,c){this.element=b,this.options=a.extend({},d,c),this._defaults=d,this.init()}var d={breakPointsColumns:{"phone-v":3,"phone-h":3,"mini-tablet":3,"tablet-v":4,"tablet-h":4,desktop:5,"large-desktop":5,"very-large-desktop":5}};c.prototype.init=function(){var b=this;a(window).on("window:breakMatch",function(){b.resizeBrowseColumns()}),b.resizeBrowseColumns()},c.prototype.resizeBrowseColumns=function(){var a=this.options.breakPointsColumns[String(b.plugins.windowEvents.currentBreakpoint)];this.createBrowseColumns(a)},c.prototype.createBrowseColumns=function(b){this.element.each(function(){var c=a(this),d=c.find("li").toArray();c.find("ul").remove();for(var e=0,f=0,g=Math.floor(d.length/b),h=d.length-b*g,i=0;i<d.length;i++){if(0===f){c.append('<ul class="item-list">');var j=c.width()/b/c.width()*100;c.find("ul").width(j+"%")}c.find("ul:eq("+e+")").append(d[i]);var k=Math.ceil(h/b)>0?g+Math.ceil(h/b):g;f+1<k?f++:(f=0,e++,h--)}})},a.fn.itemlistsColumns=function(a){return new c(this,a)}}(jQuery,Ss),$.fn.autocomplete=function(a){this.each(function(){return this.isLoaded?void("disable"===a?(this.isDisabled=!0,this.isInitiated=!1):"enable"===a?(this.isDisabled=!1,this.isInitiated=!1):"reset"===a&&this.resetState()):(this.options=$.extend(!0,{minCharacters:3,transitionSpeed:100,debouncedTime:300,templates:{category:"<div class='category'><div class='name'>{name}</div>{items}</div>",item:"<a class='result' href='{href}' data-result=\"{result}\"><div class='name'>{title}</div></a>",showMore:"<a href='{href}' class='more'>Search for '{search}'</a>"},selectors:{_result:".result",_fakeInput:".fake",_showMore:".more",results:".results",input:"input[type=text]:not(.fake)"},events:{onKeyUp:$.noop,onItemSelected:$.noop},ajaxOptions:{success:$.noop,onResponse:$.noop}},a||{}),this.state={},this.isInitiated=!1,this.isLoaded=!1,this.isDisabled=!1,$(this).append($("<input type='text' class='fake' />")),this.$results=$(this.options.selectors.results,this),this.$input=$(this.options.selectors.input,this),this.$fakeInput=$(this.options.selectors._fakeInput,this),this.init=function(){this.resetState(),this.hideResults(),this.bindEvents(),this.isLoaded=!0},this.resetState=function(){this.state={currentSearchText:"",savedValue:"",currentItem:-1,isEmpty:!0}},this.bindEvents=function(){this.$input.on("keyup",this.onKeyUp.bind(this)),this.$input.on("click",this.onClick.bind(this)),this.$fakeInput.on("keyup",this.onKeyUp.bind(this)),this.$input.on("focusout",this.onBlur.bind(this)),this.$fakeInput.on("focusout",this.onBlur.bind(this)),this.$input.on("focusin",this.onFocus.bind(this)),this.$results.on("click",this.onResultClick.bind(this)),this.$results.delegate(this.options.selectors._result,"mouseenter click",this.onResultHover.bind(this)),this.$results.delegate(this.options.selectors._result,"mouseleave",this.onResultLeave.bind(this)),this.$results.delegate(this.options.selectors._showMore,"mouseenter click",this.onResultHover.bind(this)),$(window).bind("keyup",this.onWindowKeyUp.bind(this))},this.query=function(a){var b=this;if(this.resetState(),this.state.currentSearchText=a,!a||0===a.length)return void this.hideResults();var c=this.options.ajaxOptions.url.replace("{query}",encodeURIComponent(a.toLowerCase()));this.ajax&&this.ajax.abort(),this.ajax=$.ajax($.extend(!0,{},this.options.ajaxOptions,{url:c,dataType:"json",success:function(c){b.onQuerySuccess(c,a)}}))},this.onQuerySuccess=function(a,b){var c="",d=this;if(a=$.extend({results:{}},a),this.options.ajaxOptions.onResponse!==$.noop&&(a=this.options.ajaxOptions.onResponse(a)),c=$.map(a.results,function(a){a=$.extend(!0,{name:"",results:{}},a);var c=$.map(a.results,function(a){var c=a.title.replace(new RegExp(b,"i"),function(a){return"<strong>"+a+"</strong>"});return d.options.templates.item.replace("{title}",c).replace("{result}",a.title).replace("{href}",a.url)}).join("");return d.options.templates.category.replace("{items}",c).replace("{name}",a.name)}).join(""),this.$results.html($(c)),""===c||this.getInputValue().length<this.options.minCharacters)this.state.isEmpty=!0,this.hideResults();else{var e="search/?autocomplete_id=&language=en&lang=en&search_source=&safesearch=1&version=llv1&searchterm="+b+"&site=music",f=this.options.isProFree?"/music/pro-free/"+e:"/music/"+e;this.$results.append(this.options.templates.showMore.replace("{href}",f).replace("{search}",b)),this.state.isEmpty=!1,this.showResults()}this.options.ajaxOptions.success.apply(this,arguments)},this.onClick=function(a){if(!this.isInitiated){var b=this.getInputValue();b.length>0&&this.query(b),this.isInitiated=!0}},this.onKeyUp=function(a){var b=a.keyCode,c=this.getInputValue(),d=this;if(c.length>=this.options.minCharacters&&!this.isDisabled)switch(b){case 40:this.goDown(),a.preventDefault();break;case 38:this.goUp(),a.preventDefault();break;case 27:this.hideResults(),a.preventDefault();break;case 13:if(this.state.currentItem>=0&&a.target===this.$fakeInput[0])return window.hasOwnProperty("analytics")&&window.analytics&&analytics.track("autocomplete.keyboardSelect",{path:$(".selected",this).attr("href"),query:this.state.savedValue,selected:this.getInputValue()}),this.goToUrl(),a.preventDefault(),a.stopPropagation(),!1;break;default:a.target===this.$input[0]&&c!==this.state.currentSearchText&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){var a=d.getInputValue();a!==d.state.currentSearchText&&a.length>=d.options.minCharacters&&d.query(a)},this.options.debouncedTime))}else this.resetState(),this.hideResults()},this.onWindowKeyUp=function(a){27===a.keyCode&&(window.hasOwnProperty("analytics")&&window.analytics&&analytics.track("autocomplete.keyboardEscape"),this.hideResults())},this.onFocus=function(a){this.state.isEmpty||this.showResults(),this.focus($(a.target))},this.onBlur=function(a){var b=this;setTimeout(function(){a.target!==b.$input[0]||b.$fakeInput.hasClass("focus")?a.target!==b.$fakeInput[0]||b.$input.hasClass("focus")||b.hideResults():b.hideResults()},200)},this.onResultHover=function(a){var b=0,c=!1,d=$(a.target).closest(this.options.selectors._result)[0];0===this.state.savedValue.length&&(this.state.savedValue=this.getInputValue()),$(this.options.selectors._result,this.$results).each(function(a,e){d===e||c?d===e&&(c=!0):++b}),this.select(c?b:"all",!1)},this.onResultLeave=function(){this.$input.val(this.state.savedValue)},this.onResultClick=function(){window.hasOwnProperty("analytics")&&window.analytics&&analytics.track("autocomplete.clickResult",{path:$(".selected",this).attr("href"),query:this.state.savedValue,selected:this.getInputValue()}),this.focus(this.$fakeInput)},this.goDown=function(){var a=this.state.currentItem+1,b=$(this.options.selectors._result,this.$results),c=b.length;window.hasOwnProperty("analytics")&&window.analytics&&analytics.track("autocomplete.keyboardGoDown"),this.state.currentItem===-1&&(this.state.savedValue=this.getInputValue()),a<c?this.select(a,!0):c>0&&(this.$input.val(this.state.savedValue),this.select("all",!0))},this.goUp=function(){var a=this.state.currentItem-1;window.hasOwnProperty("analytics")&&window.analytics&&analytics.track("autocomplete.keyboardGoUp"),a>=0?this.select(a,!0):(this.removeSelectedClass(),this.state.currentItem=-1,this.$input.val(this.state.savedValue),this.focus(this.$input))},this.goToUrl=function(){var a=$(".selected",this);document.location=a.attr("href")},this.select=function(a,b){var c=$(this.options.selectors._result,this.$results);"all"!==a?(this.removeSelectedClass(),$(c[a]).addClass("selected"),this.state.currentItem=a,this.$input.val($(c[a]).data("result"))):(this.removeSelectedClass(),$(this.options.selectors._showMore,this).addClass("selected"),this.state.currentItem=c.length),b&&this.focus(this.$fakeInput)},this.removeSelectedClass=function(){var a=$(this.options.selectors._result+", "+this.options.selectors._showMore,this.$results);a.removeClass("selected")},this.focus=function(a){a.hasClass("focus")||(this.$input.removeClass("focus"),this.$fakeInput.removeClass("focus"),a&&(a.addClass("focus"),a.focus()))},this.hideResults=function(){this.$results.fadeOut(this.options.transitionSpeed)},this.showResults=function(){this.isDisabled||this.$results.show(this.options.transitionSpeed)},this.getInputValue=function(){return $.trim(this.$input.val())},void this.init())})},function(a,b){function c(){b.session.isIdle=!1,clearTimeout(k),clearTimeout(j),j=setTimeout(function(){f(),d()},6e4*m)}function d(){clearTimeout(k),k=setTimeout(function(){b.session.isIdle=!0},6e4*(l-m))}function e(){h(),c()}function f(){g([n,o,p,q])}function g(a){_.each(a,function(a){_.each(a,function(a){document.addEventListener(a,e)})})}function h(){i([n,o,p,q])}function i(a){_.each(a,function(a){_.each(a,function(a){document.removeEventListener(a,e)})})}b.session=b.session?b.session:{};var j,k,l=30,m=5,n=["keydown","keyup","keypress"],o=["mousemove","mousedown","click","dblclick","mousewheel","DOMMouseScroll"],p=["touchstart","touchmove","touchended","MSPointerMove","MSPointerHover"],q=["focus","blur"];a(function(){c()})}(jQuery,Ss),function(a,b,c,d){function e(){var a=d(window).height();a-=60;var b=d("#announcement-placeholder").length?d("#announcement-placeholder").height():0;a-=b,d("#mobile-nav").css("max-height",a)}function f(){var a=d("#announcement"),b=d("#announcement-placeholder");a&&a.length&&b&&b.length&&b.height(a.outerHeight())}function g(a){var b="/music/";return l?b+"pro-free/"+a:b+a}c.plugins=c.plugins?c.plugins:{},"ontouchstart"in document.documentElement||(document.documentElement.className+=" no-touch"),c.plugins.slideOutContent=d.slideOutContent({slideOutOptions:{panel:document.getElementById("body-panel"),menu:document.getElementById("slide-out-content"),padding:300,tolerance:70,side:"right"},slideOutPanel:"#slide-out-content"}),c.plugins.messageAction=d.messageAction({phrases:{undo:c.i18n.phrases.UNDO}}),Tether.modules.push({position:function(a){if(!this.options.pinOffset||!d(this.element).hasClass("tether-pinned"))return!0;var b=a.top+this.options.pinOffset[0],c=a.left+this.options.pinOffset[1];return{top:b,left:c}}}),c.plugins.messageActionTether=new Tether({element:d("#message-action-container"),target:d("#content-container"),attachment:"top center",targetAttachment:"top center",constraints:[{to:"window",pin:!0}]}),c.plugins.addToCart=d.addToCart({formAction:c.webRoot+"cart",cartUrl:c.webRoot+"cart",defaultCoverArtUrl:c.staticRoot+"/implementation/images/album_artwork_placeholder_detail.jpg",messageAction:c.plugins.messageAction,phrases:{itemAdded:c.i18n.phrases.ADDED_TO_YOUR_CART,by:c.i18n.phrases.BY_AS_IN_MADE_BY,viewCart:c.i18n.phrases.VIEW_CART,couldNotAddToCart:c.i18n.phrases.COULD_NOT_ADD_ITEM_TO_CART,oops:c.i18n.phrases.OOPS}}),d(b).on("submit","form.form-cart-btn",function(a){var b=d(window).width();if(b>=980){var e=d(this);return a.preventDefault(),c.plugins.addToCart.handleAddItemForm(e,{onSuccess:function(){c.analytics&&c.analytics.addItem&&c.analytics.addItem(parseInt(d("[name=itemId]",e).val(),10))}}),!1}return!0}),c.player.trackHistory=new c.player.collection.TrackHistory,c.player.trackList=new c.player.collection.TrackList,c.player.playerModel=new c.player.model.PlayerModel({trackHistory:c.player.trackHistory,trackList:c.player.trackList});var h="html,flash";if(c.player.player=new c.player.view.Player({model:c.player.playerModel,webRoot:c.webRoot,staticRoot:c.staticRoot,searchRoot:"search/",detailRoot:"track/",phrases:{by:c.i18n.phrases.BY_AS_IN_MADE_BY,vocals:c.i18n.phrases.VOCALS,descriptionMood:c.i18n.phrases.DESCRIPTION_MOOD,noLongerAvailable:c.i18n.phrases.TRACK_NO_LONGER_AVAILABLE,youtubeLicenseKey:c.i18n.phrases.YOUTUBE_LICENSE_KEY,orderNumber:c.i18n.phrases.ORDER_NUMBER,audioStandardLicense:c.i18n.phrases.AUDIO_STANDARD_LICENSE,audioEnhancedLicense:c.i18n.phrases.AUDIO_ENHANCED_LICENSE,download:c.i18n.phrases.DOWNLOAD,addToCart:c.i18n.phrases.ADD_TO_CART,deleteItem:c.i18n.phrases.DELETE_ITEM,addToASoundbox:c.i18n.phrases.ADD_TO_SOUNDBOX,downloadComp:c.i18n.phrases.DOWNLOAD_COMP},jPlayerSolution:h,jPlayerSwfPath:c.staticRoot+"/vendor/swf/jquery.jplayer.swf",disableCompDownload:c.disableCompDownload,error:function(a){d.isFunction(ga)&&ga("send","event","player","error",a.jPlayer.error.type+" context: "+a.jPlayer.error.context+" message: "+a.jPlayer.error.message+" hint: "+a.jPlayer.error.hint+" src: "+a.jPlayer.status.src)}}),d(b).on("click",".track-row:not(.playing):not(.paused) .btn-play-cover-art",function(a){var b=d(a.currentTarget).closest(".track");c.player.player.changeTrack(b.data("item-id"))}),d(b).on("click",".playing .btn-play-cover-art, .paused .btn-play-cover-art",function(){c.player.player.togglePlayButton()}),c.player.player.model.on("player:start",function(a){c.analytics&&c.analytics.playerStart&&c.analytics.playerStart(a.id)}),c.player.player.on("addToCart",function(a){if(d("form.form-cart-btn",a.getDOMElement()).length>0){var b=d("form.form-cart-btn",a.getDOMElement());c.plugins.addToCart.handleAddItemForm(b,{onSuccess:function(){c.analytics&&c.analytics.addItem&&c.analytics.addItem(parseInt(d("[name=itemId]",b).val(),10))}})}else d("form.form-cart-btn",a.getDOMElement().parent()).length>0&&d("form.form-cart-btn button",a.getDOMElement().parent()).trigger("click")}),c.player.player.on("download",function(a){d("form.download-form",a.getDOMElement()).length>0&&d("form.download-form",a.getDOMElement()).trigger("submit")}),c.player.player.on("addToPlaylist",function(a){d(".add-to-playlist",a.getDOMElement()).trigger("click")}),c.plugins.signIn=d.ssSignIn({getSignInUrl:c.webRoot+"sign-up-url",receiveMessageOrigin:c.accountsHost,loginUrl:c.iframeLoginUrl,registerUrl:c.iframeRegisterUrl,hasLoggedIn:c.hasLoggedIn,slideOutContentPlugin:c.plugins.slideOutContent}),c.plugins.userCollectionsModel=new c.userCollections.model.AppModel({urlBase:"/music/user/soundboxes",isLoggedIn:c.userId>0,csrf:c.csrf,signInUrl:"/music/login"}),c.plugins.userCollectionsWidget=new c.userCollections.view.AddWidget({model:c.plugins.userCollectionsModel,inputMaxLength:50,btnSelector:".add-to-playlist",itemRowSelector:".track",rowSelectedClass:"hover",itemRowDataAttr:"player-metadata",itemDataProperties:{itemId:"id",itemName:"title"},login:function(a){c.plugins.signIn.show({message:c.hasLoggedIn?c.i18n.phrases.SIGN_IN_TO_SAVE_TO_A_SOUNDBOX:c.i18n.phrases.CREATE_AN_ACCOUNT_TO_SAVE_TO_A_SOUNDBOX,success:function(){window.location=window.location}})},phrases:{saveLabel:c.i18n.phrases.SAVE_AS_IN_FILE,inputPlaceHolder:c.i18n.phrases.NEW_SOUNDBOX,loggedOutMessage:c.i18n.phrases.LOGIN_TO_SAVE_TO_SOUNDBOX,widgetLabel:c.i18n.phrases.ADD_TO_A_SOUNDBOX,widgetLabelWithName:c.i18n.phrases.ADD_ITEMNAME_TO_SOUNDBOX,savedToPlaylistMessage:c.i18n.phrases.SAVED_TO_NAME,savedToPlaylistMessageWithUrl:c.i18n.phrases.SAVED_TO_NAME_URL}}),c.plugins.userCollectionsWidget.on("addError",function(a){var b=a.item.itemId,d=a.item.itemName,e=a.collection.name;c.plugins.messageAction.addMessageItem({messageClass:"alert-error",boldMessage:c.i18n.phrases.OOPS,message:c.i18n.phrases.ERROR_ADDING_NAME_TO_COLLECTION.replace("__itemName__",d).replace("__collectionName__",e),actions:[{type:"link",location:c.webRoot+"detail/"+b,label:c.i18n.phrases.VIEW_TRACK}]})}),c.plugins.userCollectionsWidget.on("createError",function(a){var b=a.item.itemId,d=a.item.itemName,e=a.collection.name,f=b&&d?c.i18n.phrases.ERROR_ADDING_NAME_TO_COLLECTION.replace("__itemName__",d).replace("__collectionName__",e):c.i18n.phrases.ERROR_CREATING_NAME.replace("__name__",e),g=b&&d?[{type:"link",location:c.webRoot+"detail/"+b,label:c.i18n.phrases.VIEW_TRACK}]:[];c.plugins.messageAction.addMessageItem({messageClass:"alert-error",boldMessage:c.i18n.phrases.OOPS,message:f,actions:g})}),d(b).on("submit","form.download-form",function(){return c.userId?!c.requiresTosAgreement||(d("#tos-modal").find("iframe").prop("src",c.webRoot+"terms-iframe"),d("#tos-modal").find("h5").html(c.i18n.phrases.WEVE_IMPROVED_OUR_TOS_SHORT+"<br/>"+c.i18n.phrases.AGREE_TO_TOS_TO_DOWNLOAD_COMP),d("#tos-modal").simpleModal("show"),!1):(c.plugins.signIn.show({message:c.hasLoggedIn?c.i18n.phrases.SIGN_IN_TO_DOWNLOAD_A_COMP:c.i18n.phrases.CREATE_AN_ACCOUNT_TO_DOWNLOAD_A_COMP,success:function(){window.location=window.location}}),!1)}),d(window).on("resize.mobile-menu",d.debounce(300,function(){e(),f()})),c.player.playerModel.on("change:playerPosition",function(){e()}),e(),f(),ZeroClipboard.config({swfPath:c.staticRoot+"/vendor/swf/ZeroClipboard.swf"}),d(".js-item-lists-header").itemlistsColumns(),d("#shutterstock-header .filter-menu").on("mouseenter",function(a){d(this).addClass("active")}),d("#shutterstock-header .filter-menu").on("mouseleave",function(a){d(this).removeClass("active")}),d(b).on("ready pjax:ready",function(){d(".product-list").length&&(c.plugins.tracklists=d(".product-list").tracklist()),d("form.paginate").length&&(c.plugins.paginators=d("form.paginate").paginator()),c.pageMessage&&(c.plugins.messageAction.addMessageItem({message:c.pageMessage}),delete c.pageMessage),c.errorMessage&&(c.plugins.messageAction.addMessageItem({messageClass:"alert-error",message:c.errorMessage}),delete c.errorMessage),c.player.player&&c.player.player.resetTrackList();var a=d("#content-container > div.content"),b=a.attr("id");a&&a.length&&b&&d("body").append('<div id="qa-page-ready" class="'+b+'"></div>')}),d(b).on("pjax:ready",function(){if(window.location.hash){var a=window.location.hash.replace("#",""),b=document.getElementById(a);d.isFunction(b.scrollIntoView)&&b.scrollIntoView(!0)}}),d(b).on("pjax:start",function(){c.plugins.tracklists&&(c.plugins.tracklists.each(function(){d(this).data("ss_tracklist").destroy()}),delete c.plugins.tracklists),c.plugins.paginators&&(c.plugins.paginators.each(function(){d(this).data("ss_paginator").destroy()}),delete c.plugins.paginators),d("#shutterstock-header .nav-collapse").each(function(){d(this).hasClass("in")&&d(this).collapse("hide")}),d("#browse-filters .filter-menu").removeClass("active"),d("#qa-page-ready").remove(),d(b).find(".simple-modal").each(function(){d(this).simpleModal("hide")}),c.plugins.slideOutContent.hide(),c.plugins.userCollectionsWidget.hide(!1)}),c.supportsPjax){var i=d(b),j=d("#content-container");d.pjax.defaults&&(d.pjax.defaults.timeout=0,d.pjax.defaults.maxCacheLength=0,d.pjax.defaults.ignoreOutsideDirectory=window.location.pathname.search(/\/music\/pro-free/)>-1?/^\/(\w\w\/)?music\/pro-free/:/^\/(\w\w\/)?music/,d.pjax.defaults.ignoreRoutes=[/^\/(\w\w\/)?music\/login/,/^\/(\w\w\/)?music\/logout/]);var k=function(a){a.isDefaultPrevented()||d.pjax[a.type](a,{container:j})};i.on("click",'a[data-pjax-ignore!="true"]',k),i.on("submit",'form[data-pjax-ignore!="true"]',k),i.on("pjax:start",function(){j.append('<iframe class="spinner" style="display: none" src="'+c.webRoot+'spinner"></iframe>')}),i.on("pjax:ready",function(){j.find("iframe.spinner").remove()}),i.on("pjax:success",function(){window.hasOwnProperty("analytics")&&analytics.page("VirtualPageview",{VirtualPageURL:document.location.pathname,VirtualPageTitle:document.title}),d(".sttk-autocomplete.wrapper").autocomplete("reset")})}var l=window.location.pathname.indexOf("music/pro-free")!==-1;"en"===window.Ss.currentLanguageCode&&(d(".form-control").append(d('<div class="sttk-autocomplete wrapper"><div class="ui input"></div><div class="sttk-autocomplete results"></div></div>')),d(".form-control input").attr("autocomplete","off"),d(".form-control .ui.input").append(d(".form-control input").detach()),d(".sttk-autocomplete.wrapper").autocomplete({isProFree:l,ajaxOptions:{url:"/music/ac/{query}",data:{isProFree:l},minCharacters:3,onResponse:function(a){a=a||{};var b={};return a.track&&a.track.length>0&&(b.tracks={name:"Tracks",results:_.map(_.take(a.track,3),function(a){return{title:a.value.name,url:g("track/"+a.value.slug+"/"+a.value.id+"?auto")}})}),a.mood&&a.mood.length>0&&(b.mood={name:"Moods",results:_.map(_.take(a.mood,3),function(a){return{title:a.value.name,url:g("moods/"+a.value.slug+"?auto")}})}),a.artist&&a.artist.length>0&&(b.artist={name:"Artists",results:_.map(_.take(a.artist,3),function(a){return{title:a.value.name,url:g("artist/"+a.value.name+"?auto")}})}),a.genre&&a.genre.length>0&&(b.genre={name:"Genres",results:_.map(_.take(a.genre,3),function(a){return{title:a.value.name,url:g("genre/"+a.value.slug+"?auto")}})}),{results:b}}}}),d("#site-search").click(function(){setTimeout(function(){d("#site-search").attr("action").search(/music/)>-1?d(".sttk-autocomplete.wrapper").autocomplete("enable"):d(".sttk-autocomplete.wrapper").autocomplete("disable")},50)})),window.hasOwnProperty("analytics")&&d("body").data("transaction")&&d("body").data("transaction").purchaseId&&c.analytics&&c.analytics.transaction&&c.analytics.transaction(d("body").data("transaction"),"ecommerce.purchase"),d("body").delegate("#checkout","submit",function(){c.analytics&&c.analytics.transaction&&c.analytics.transaction(d("#cart").data("checkout"),"ecommerce.checkout")})}(window,document,Ss,jQuery);