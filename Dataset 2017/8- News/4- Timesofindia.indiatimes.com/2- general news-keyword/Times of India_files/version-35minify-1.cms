String.prototype.capitalize=function(){return this.replace(/(^|\s)([a-z])/g,function(a,c,b){return c+b.toUpperCase()})};castObj=new Object();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a}for(;c<a;c++){if(c in this&&this[c]===b){return c}}return -1}}castObj.getData=function(a){if(!castObj.cityname){if(times.cookie.get("geolocation")){castObj.cityname=times.cookie.get("geolocation")
}else{castObj.cityname=""}}castObj.country=getCityJSON[castObj.cityname]["country"];if(castObj.cityname){castObj.makeReqSkynet(getCityJSON[castObj.cityname]["sid"])}};castObj.makeReqSkynet=function(a){if(!a){return true}castObj.aUrl="/forecast_skynet_ext.cms?lat="+a;$.ajax({url:castObj.aUrl,type:"GET",dataType:"json",context:document.body}).done(function(d){castObj.json=d.actual;castObj.json.icon=castObj.json.sky;castObj.json.temp_max=d.forecast[0]["temp_max"];castObj.json.temp_min=d.forecast[0]["temp_min"];
castObj.json.sky=(castObj.iconImg[castObj.json.icon])?castObj.iconImg[castObj.json.icon]["name"]:castObj.iconImg.sunny["name"];castObj.json.district=castObj.cityname;castObj.json.country=castObj.country;castObj.jsonHr=d.forecast;castObj.renderObj("SkyNet");var b=new Date();var c=15;b.setTime(b.getTime()+(c*60*1000))})};castObj.renderObj=function(){if(castObj.json["class"]=="error"){return false}castObj.typeArr=castObj.type.split(",");for(var a in castObj.typeArr){if(castObj.typeArr.hasOwnProperty(a)){var b=$("#"+castObj.typeArr[a]).html();
castObj.icon=70;if(castObj.typeArr[a]=="city"||castObj.typeArr[a]=="weather"){castObj.icon=25}if(castObj.typeArr[a]=="detail"){castObj.icon=80;curCity=castObj.render(castObj.jsonHr[0],castObj.icon,castObj.typeArr[a],b)}else{if(castObj.typeArr[a]=="wshour"){castObj.icon=25;curCity=castObj.renderHourly(castObj.jsonHr,b,castObj.icon,castObj.typeArr[a])}else{curCity=castObj.render(castObj.json,castObj.icon,castObj.typeArr[a],b)}}}}if(document.getElementById("cityWeather")){castObj.select(document.getElementById("cityWeather"),curCity)
}castObj.loadScript("SkyNet")};castObj.select=function(a,b){};castObj.render=function(d,c,b,a){var e="";d.description=d.icon;a=castObj.loop(d,a,c);$("#"+b+"show").html(a);return e};castObj.renderHourly=function(h,c,g,e){var i,d,b="";for(var a in h){if(a!=0&&h.hasOwnProperty(a)){d=c;if((h[a]["ist"]=="3 AM"||h[a]["ist"]=="6 AM"||h[a]["ist"]=="6 PM"||h[a]["ist"]=="9 PM"||h[a]["ist"]=="12 AM")&&h[a]["icon"]=="sunny"){h[a]["icon"]="moon"}d=castObj.loop(h[a],c,g);b+=d}}$("#"+e+"show").html('<ul class="weather_5day">'+b+"</ul>");
if(b){$("#fiveDay").show("slow")}else{$("#fiveDay").hide("slow")}return i};castObj.loop=function(e,b,d){for(var a in e){if(e.hasOwnProperty(a)){var c=new RegExp("~"+a+"~","g");if(e[a]&&(a=="district"||a=="obsName")){if(e[a].indexOf("/")!=-1){e[a]=e[a].substring(0,e[a].indexOf("/"))}}if(a=="temp"||a=="temp_max"||a=="temp_min"){regExpf=new RegExp("~"+a+"F~","g");F=parseInt(e[a])*2;F-=F*10/100;F=F+32;b=b.replace(regExpf,Math.round(F))}if(a=="wxIcon"||a=="icon"){if(a=="icon"){p=castObj.iconImg[e[a]]?parseInt(castObj.iconImg[e[a]]["id"]):castObj.iconImg.sunny["id"]
}else{p=parseInt(e[a])+2}m=(p%4);f=Math.floor(p/4);v="-"+(d*m)+"px -"+((d*f)-2)+"px;";b=b.replace(c,v)}else{txt=e[a];if(a=="description"){txt=castObj.iconImg[txt]?castObj.iconImg[txt]["name"]:castObj.iconImg.sunny["name"]}if(a=="temp_max"||a=="temp_min"||a=="temp"){txt=Math.round(txt)}b=b.replace(c,txt)}}}return b};castObj.sort=function(e,d){var c=e.city.substr(0,1).toLowerCase();var g=d.city.substr(0,1).toLowerCase();return c<g?-1:c>g?1:0};castObj.loadScript=function(d){var c=[];var b=0;for(var a in getCityJSON){c[b]={label:a+", "+getCityJSON[a]["country"],rid:a};
b++}$.getScript("http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js",function(){$("#search").autocomplete({source:c,select:function(e,g){$("#search").val(g.item.rid);$("#rid").val(g.item.rid);return false}});castObj.changeAjax=function(){castObj.cityname=$("#rid").val();if(!castObj.cityname){return true}castObj.country=getCityJSON[castObj.cityname]["country"];castObj.type="widgetAjax";castObj.makeReqSkynet(getCityJSON[castObj.cityname]["sid"])}})};castObj.iconImg={};castObj.iconImg.cloudyheavyrain={id:0,name:"Cloudy Heavy Rain"};
castObj.iconImg.cloudylightrain={id:1,name:"Cloudy Light Rain"};castObj.iconImg.cloudymoderaterain={id:2,name:"Cloudy Moderate Rain"};castObj.iconImg.cloudy={id:3,name:"Cloudy"};castObj.iconImg.overcastheavyrain={id:4,name:"Overcast Heavy Rain"};castObj.iconImg.overcastlightrain={id:5,name:"Overcast Light Rain"};castObj.iconImg.overcastmoderaterain={id:6,name:"Over Cast Moderate Rain"};castObj.iconImg.overcast={id:7,name:"Overcast"};castObj.iconImg.partlycloudy={id:8,name:"Partly Cloudy"};castObj.iconImg.partlycloudylightrain={id:9,name:"Partly Cloudy Light Rain"};
castObj.iconImg.partlycloudyheavyrain={id:10,name:"Partly Cloudy Heavy Rain"};castObj.iconImg.partlycloudymoderaterain={id:11,name:"Partly Cloudy Moderate Rain"};castObj.iconImg.sunny={id:12,name:"Clear Sky"};castObj.iconImg.moon={id:13,name:"Clear Sky"};