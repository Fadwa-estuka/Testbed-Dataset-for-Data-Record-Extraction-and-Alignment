PULSE.app.templates.managerSearch='<li class="statsCard"><ul class="statsList"><li class="statsHero"><div class="statInfo"><a class="statName" href="{{ url }}">{{ name.display }}</a> {{#team}} <a href="{{ url }}" class="statNameSecondary">{{ name }} </a>{{/team}} {{#nationality}}<div class="statNameSecondary"><span class="flag {{ isoCode }}"></span> <span class="playerCountry">{{ country }}</span></div>{{/nationality}}</div>{{#team}}<div class="cardClubColour {{ opta }}-bg"><div class="heroBadgeContainer"><div class="statsBadge"><div class="badge-20 {{ opta }}"></div></div></div></div>{{/team}}<div class="imgCropContainer"><img class="img statCardImg playerPhotoContainer" data-player="{{ optaId }}" data-size="{{ imageSize }}" src="{{ playerImage }}" alt="{{ name.display }}"></div></li></ul><a class="btn" href="{{ url }}"><span class="visuallyHidden">{{ name.display }}</span>{{ profileLabel }}<span class="icn arrow-right"></span></a></li>',PULSE.app.templates.noresults='<li class="noResults">{{ label }}</li>',PULSE.app.templates.photoSearch='<li class="galleryItem" data-ui-src="{{ galleryVariant }}" data-index="{{ thisIndex }}"><div class="thumbnail"><figure>{{#variant}} <span class="image"><img src="{{ url }}" alt="{{ title }}"> <span class="openModal" data-ui-modal="#galleryModal" role="button" tabindex="0"><svg class="expandIcon" version="1.1" id="Layer_1" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 75 75" style="enable-background:new 0 0 75 75" xml:space="preserve"><path d="{{ svgPath }}"/></svg> <span class="ieOpenModal icn expand-w"></span> </span></span>{{/variant}}</figure></div></li>',PULSE.app.templates.playerSearch='<li class="statsCard"><ul class="statsList"><li class="statsHero"><div class="statInfo"><a class="statName" href="{{ url }}">{{ name.display }}</a> {{#team}} <a href="{{ url }}" class="statNameSecondary">{{ name }} </a>{{/team}}<div class="statNameSecondary">{{ positionLabel }}</div>{{#nationality}}<div class="statNameSecondary"><span class="flag {{ isoCode }}"></span> <span class="playerCountry">{{ country }}</span></div>{{/nationality}}</div>{{#team}}<div class="cardClubColour {{ opta }}-bg"><div class="heroBadgeContainer"><div class="statsBadge"><div class="badge-20 {{ opta }}"></div></div></div></div>{{/team}}<div class="imgCropContainer"><img class="img statCardImg playerPhotoContainer" data-player="{{ optaId }}" data-size="{{ imageSize }}" src="{{ playerImage }}" alt="{{ name.display }}"></div></li>{{#stats}}<li class="statsRow"><div class="pos">{{ label }}</div><div class="stat">{{ stat }}</div></li>{{/stats}}</ul><a class="btn" href="{{ url }}"><span class="visuallyHidden">{{ name.display }}</span>{{ profileLabel }}<span class="icn arrow-right"></span></a></li>',PULSE.app.templates.teamSearch='<li class="clubIndex"><div class="indexItem {{ optaId }}"><div class="indexImg"><svg class="mob-heroSvg clubColourSvg" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="170" height="40" viewBox="0 0 343 79"><path class="fill" d="M3998,4894l51.91,18-1,5.29c75.27,22.9,152.4,34.56,231.23,40.06-0.44,2-.81,3.87-1.26,5.7s-1,3.77-1.78,6.41c7.79,0.53,15.17,1.17,22.57,1.51,12.14,0.56,24.29.9,36.43,1.38,1.65,0.07,3.28.42,4.92,0.64H3998v-79Z" transform="translate(-3998 -4894)"></path></svg></div><div class="indexBadge"><span alt="" class="badge-50 {{ optaId }}"></span></div><div class="indexInfo clubColourBg"><div class="indexBadge-mob"><span alt="" class="badge-25 {{ optaId }}"></span></div><div class="clubName">{{ displayName }}</div><div class="stadiumName"><span class="icn stadium-w"></span>{{ stadium.name }}</div><a href="{{ url }}" class="btn clubColourBtn">{{ labelClubHome }}<span class="icn arrow-right-w"></span></a></div></div></li>',PULSE.app.templates.textSearch='<a href="{{ articleUrl }}" class="thumbnail thumbLong"><figure>{{#variant}} <span class="image"><img src="{{ url }}" alt="{{ title }}"> </span>{{/variant}}<figcaption>{{#subtitle}} <span class="tag">{{ subtitle }}</span> {{/subtitle}} <span class="title">{{ title }}</span> <span class="text">{{ description }}</span></figcaption></figure></a>',PULSE.app.templates.videoSearch='<li data-ui-modal="#videoPlayer" data-ui-args="{{uiArgs}}"><a href="#!" class="thumbnail videoThumb"><figure><span class="image">{{#thumbnailUrl}} <img src="{{thumbnailUrl}}" alt=""> {{/thumbnailUrl}} <span class="runTime"><span class="icn play"></span><time datetime="PT2M59S">{{durationString}}</time></span></span><figcaption><span class="title">{{title}}</span></figcaption></figure></a></li>',function(a,e,t,r,s){"use strict";var n=function(a,e,t,r){var s=t?t:[],n=0;if(e&&e.data&&e.data.length>0)for(var l=0;l<e.data.length;l++){var i=e.data[l],o="";if(i.name&&(i.name.display||i.name.first||i.name.last)?o=i.name.display?i.name.display:i.name.first+" "+i.name.last:i.name&&(o=i.name),i.shortName&&(o+=" "+i.shortName),o.toLowerCase().indexOf(a.toLowerCase())>-1&&(i.type=e.type,s.push(i),n++,r&&r<=n))return s}return s},l=function(a,e){var r=a?a:{};switch(r.type){case"text":case"photo":case"video":r=t.getContentModel(a);break;case"player":r=t.getPlayerModel(a);break;case"manager":r=t.getManagerModel(a);break;case"team":r.url=t.generateContentUrl(r.type,r.club.id,r.club.name.replace(new RegExp(" ","g"),"-")),r.optaId=r.altIds&&r.altIds.opta?r.altIds.opta:void 0,r.displayName=r.club.name,r.stadium=r.grounds[0],r.labelClubHome=s.lookup("label.club.home")}return r},i=function(a){return"all"!=a&&"manager"!=a&&"team"!=a},o=function(a){if(a){for(var e in a)if(!a[e])return!1;return!0}};a.search=function(e,t){var r=this;r.element=e,r.requestConfig={},r.term="",r.loader=new a.common.scrollLoader(r.element,r),r.tabContainer=r.element.getElementsByClassName("searchTabsContainer"),r.getManagersCache(),r.getClubCache();var s=r.element.getElementsByClassName("searchResultTab");r.typeArray=[];for(var n=0;n<s.length;n++){var l=JSON.parse(s[n].getAttribute("data-ui-args"));l.type&&l.type&&"all"!=l.type&&"managers"!=l.type&&"team"!=l.type&&r.typeArray.push(l.type)}},a.search.prototype.getManagersCache=function(){var t=this,r="team-officials.all",s={pageSize:500,type:"manager",comps:a.competition.FIRST,compCodeForActivePlayer:a.defaultCompCode,altIds:!0},n={url:a.common.createApiPath(r,s),method:"GET",callback:t.storeManagers,target:this};e.data.manager.add(n)},a.search.prototype.storeManagers=function(a,e){var t=this;a&&a.content&&(t.managers={data:a.content,type:"manager"},t.initSearch())},a.search.prototype.getClubCache=function(){var t=this,r="teams.all",s={pageSize:100,comps:a.competition.FIRST,altIds:!0},n={url:a.common.createApiPath(r,s),method:"GET",callback:t.storeClubs,target:this};e.data.manager.add(n)},a.search.prototype.storeClubs=function(a,e){var t=this;a&&a.content&&(t.clubs={data:a.content,type:"team"},t.initSearch())},a.search.prototype.initSearch=function(){var a=this;a.clubs&&a.managers&&(a.renderTabs(),a.searchContainer=a.element.getElementsByClassName("searchInputContainer"),a.searchContainer&&a.searchContainer.length>0&&(a.search=new t.search(a.searchContainer[0],{callback:a.searchTerm,target:a,updateUrl:!0}),a.search.checkParam()))},a.search.prototype.renderTabs=function(){var a=this,e=a.element.getElementsByClassName("searchResultTab"),t={tabItems:e,tabLinkWrap:a.element.querySelector(".searchTabsContainer"),builtClass:"tabbedContent",tabCallback:function(e){a.initTab(e),a.searchTerm(a.term)},buildCallback:function(e){a.initTab(e),a.initMoreTab(e)}};a.tabs=new r.tab(t)},a.search.prototype.initTab=function(a){var e=this;e.requestConfig.page=0,e.loader.removeLoader(),e.tabContainer=a.config.current.content,e.type=a.config.current.uiArgs.type},a.search.prototype.initMoreTab=function(){var a=document.querySelector('[data-ui-more-nav="search-nav"]'),t=function(t){for(var r=a.querySelectorAll(".moreToggleDropdown li"),s=function(){var a=this.getAttribute("data-nav-index");document.querySelector('.searchTabsContainer li[data-nav-index="'+a+'"]').click(),e.style.removeClass(t.moreNavs.nav,"open")},n=0;n<r.length;n++)r[n].addEventListener("click",s)},s={navWrap:a,moreLabel:"More",buildCallback:t};new r.moreNav(s)},a.search.prototype.didRequestLoad=function(){var a=this;a.requestConfig.page++,a.term&&a.term.length>0&&a.searchTerm(a.term)},a.search.prototype.searchTerm=function(t,r){var s=this,l=r?r:{};if(s.term=t,i(s.type)&&s.loader.newLoader(),s.term.length>0){var o=l.type?l.type:s.type;if("text"===o||"video"===o||"players"===o?s.requestConfig.fullObjectResponse=!0:s.requestConfig.fullObjectResponse=!1,"all"===o)s.searchAllContent();else if("team"===o){var c=n(s.term,s.clubs);s.renderSearch({content:c})}else if("managers"===o){var c=n(s.term,s.managers);s.renderSearch({content:c})}else{var p=[o];s.requestConfig.pageSize=l.pageSize?l.pageSize:12;var d=s.search?s.search.getSearchParams(s.requestConfig):{},m={url:a.common.createSearchPath([t,t+"*"],p,d),method:"GET",callback:s.contentSearch,target:s,forceCallback:!0,searchType:o};e.data.manager.add(m)}}else o&&"all"!==o?s.renderSearch():(s.searchAllContent(),s.renderAllContent())},a.search.prototype.searchAllContent=function(){var a=this;a.searchContent={};for(var e=0;e<a.typeArray.length;e++)a.searchContent[a.typeArray[e]]=!1;if(a.term.length>0)for(var e=0;e<a.typeArray.length;e++){var t=5;"photo"===a.typeArray[e]||"video"===a.typeArray[e]?t=6:"text"===a.typeArray[e]?t=8:"players"===a.typeArray[e]&&(t=2),a.searchTerm(a.term,{pageSize:t,type:a.typeArray[e]})}},a.search.prototype.contentSearch=function(a,e){var t=this;if(a&&a.hits){var r=t.search.evaluateHits(a.hits);"all"===t.type?(t.searchContent[e.searchType]=r,o(t.searchContent)&&t.renderAllContent()):t.renderSearch({content:r,pageInfo:t.requestConfig})}},a.search.prototype.checkForModal=function(a,e){var r=this;if("video"===e){new t.videoList(a)}else"photo"===e?r.galleryModal?(r.galleryModal.element=a,r.galleryModal.initModal()):r.galleryModal=new t.galleryModal(a):"players"!==e&&"managers"!==e&&"manager"!==e||t.getPhotosForContainer(a)},a.search.prototype.renderAllContent=function(){var a=this;if(a.term.length>0){var e=n(a.term,a.clubs,[],2);a.addSearchResultsToContainer(e,"team");var t=n(a.term,a.managers,[],2);a.addSearchResultsToContainer(t,"manager")}for(var r in a.searchContent)a.addSearchResultsToContainer(a.searchContent[r],r)},a.search.prototype.addSearchResultsToContainer=function(e,t){var r=this,n=r.element.getElementsByClassName(t+"AllContainer");if(n&&n.length>0)if(e&&e.length>0){for(var i=Math.ceil(e.length/n.length),o="",c=0,p=0;c<e.length;){var d=l(e[c],t);d.thisIndex=c;var m=d.type+"Search";o+=Mustache.render(a.templates[m],d),c-i*p+1>i-1&&(n[p].innerHTML=o,r.checkForModal(n[p],t),p++,o=""),c++}n[p]&&(n[p].innerHTML=o,r.checkForModal(n[p],t))}else for(var h=0;h<n.length;h++){var o="";"manager"!==t&&"team"!==t&&"players"!==t||(o=Mustache.render(a.templates.noresults,{label:s.lookup("label.nosearchresults")})),n[h].innerHTML=o}},a.search.prototype.renderSearch=function(e){var t=this,r="";t.loader.contentLoaded(),i(t.type)&&(!e||!e.content||e.content.length<1)&&t.loader.removeLoader(),e&&e.content&&e.content.length>0&&e.content.forEach(function(e,t){var s=l(e);s.thisIndex=t;var n=s.type+"Search";r+=Mustache.render(a.templates[n],s)}),e&&e.pageInfo&&e.pageInfo.page>0?t.tabContainer.innerHTML+=r:((!e||!e.content||e.content.length<1)&&(r=Mustache.render(a.templates.noresults,{label:s.lookup("label.nosearchresults")})),t.tabContainer.innerHTML=r),t.checkForModal(t.tabContainer,t.type)};for(var c=document.querySelectorAll('[data-widget="search"]'),p=0;p<c.length;p++)new a.search(c[p],{})}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.ui,PULSE.I18N);