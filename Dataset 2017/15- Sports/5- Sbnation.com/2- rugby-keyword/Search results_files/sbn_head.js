function BrightcoveWrapper(e,t,n){var r=this,o=function(){},i="4063572901001";this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.meta.type="brightcove",this.options=n=jQuery.extend({autoplay:!1,account_id:i,callback:o,onAdsPlayed:o,onCreate:o,onPlay:o},window.brightcove_options||{},n||{}),this.insertVideoTag.call(this,this.$el),this.perfMark("brightcoveInitializeStart"),yepnope({load:r.getPlayerUrl(n),complete:function(){r.setupPlayer(n),r.options.callback()}})}function OoyalaWrapper(e,t,n){function r(e){var t=e.mb,r=!1,i=function(){t.unsubscribe("initialPlay","basePlaying"),t.unsubscribe("playing","basePlaying"),o.perfMark("ooyalaUserPlay"),o.pub("ooyalaVideoPlay"),o.markAsViewed(!0),Chorus.Analytics.event(o.formatEvent("play")),n.onPlay(e,!1),t.subscribe("disablePlaybackControls","basePlaying",function(){t.unsubscribe("disablePlaybackControls","basePlaying"),o.perfMark("ooyalaFirstFrame"),o.perfMeasure("ttff","ooyalaUserPlay","ooyalaFirstFrame")})};t.subscribe("initialPlay","basePlaying",i),t.subscribe("playing","basePlaying",i),t.subscribe("downloading","basePlaying",function(){t.unsubscribe("downloading","basePlaying"),r=!0}),t.subscribe("embedCodeChanged","discovery",function(){r&&t.subscribe("contentTreeFetched","discovery",function(e,n){t.unsubscribe("contentTreeFetched","discovery");var r=n.title+" | discovery",i=o.formatEvent("play");i.eventLabel=r,Chorus.Analytics.event(i)}),r=!0}),t.subscribe("adsPlayed","taprAdsPlayed",function(){t.unsubscribe("adsPlayed","taprAdsPlayed"),o.perfMark("ooyalaVideoStart"),t.subscribe("playing","taprPlaying",function(){t.unsubscribe("playing","taprPlaying"),o.perfMark("ooyalaVideoPlay"),o.perfMeasure("tapr","ooyalaVideoStart","ooyalaVideoPlay")})}),t.subscribe("error","baseError",function(){Chorus.Analytics.event(o.formatEvent("error"))}),t.subscribe("adsPlayed","baseAdsPlayed",function(){t.unsubscribe("adsPlayed","baseAdsPlayed"),n.onAdsPlayed(e)}),t.subscribe(window[n.namespace].EVENTS.PLAYBACK_READY,"basePlayer",function(){t.unsubscribe(window[n.namespace].EVENTS.PLAYBACK_READY,"basePlayer"),o.pub("ooyalaVideoReady"),o.perfMark("ooyalaVideoReady"),o.perfMeasure("loadtime","ooyalaInitializeStart","ooyalaVideoReady"),o.perfLoadComplete()})}var o=this,i=function(){};t.type=t.type||"ooyala",this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,namespace:"OO",platform:"html5-fallback",player_id:window.ooyala_player_id||"",callback:i,onAdsPlayed:i,onCreate:i,onPlay:i,initialTime:n&&n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},window.ooyala_options||{},n||{}),o.perfMark("ooyalaInitializeStart"),yepnope({test:window[n.namespace],nope:o.getOoyalaParams(n),complete:function(){var i=window[n.namespace];i.ready(function(){o.perfLoadStart(),o.player=i.Player.create(e,t.ooyala_id||t.provider_video_id,n),r(o.player),n.callback(o.player)})}})}function YoutubeWrapper(e,t,n){function r(e){e.data===YT.PlayerState.PLAYING?(n.onPlay(o.player),i||(Chorus.Analytics.event(o.formatEvent("play")),o.pub("youtubeVideoPlay"),i=!0)):e.data===YT.PlayerState.PAUSED&&n.onPause(o.player)}var o=this,i=!1,a=function(){};t.type=t.type||"youtube";var s=jQuery("<div>").attr("id","youtube-video-inside-wrapper-"+e);jQuery("#"+e).html(s),e=s.attr("id"),this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,controls:1,modestbranding:1,rel:0,showInfo:0,onAdsPlayed:a,onCreate:a,onPause:a,onPlay:a,onPlayerReady:a,onPreRollEnd:a,timedEvents:{},start:n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},n||{}),n.autoplay=n.autoplay?1:0,Chorus.Video.youtubeApiLoaded||Chorus.Video.loadYoutubeApi(),this.init=function(){o.player=new YT.Player(e,{videoId:t.youtube_id||t.provider_video_id,playerVars:n,events:{onReady:n.onCreate,onStateChange:r},width:"100%",height:"100%"})},"undefined"!=typeof YT&&YT.Player?o.init():(YoutubeWrapper.initQueue.push(o),window.onYouTubeIframeAPIReady=function(){for(var e=0;e<YoutubeWrapper.initQueue.length;e++)YoutubeWrapper.initQueue[e].init()})}function EmbedWrapper(e,t,n){this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=n||this.options;var r=t.provider_video_id;n.autoplay&&(r=Util.addQueryParam("autoplay","1",r));this.$el.html(r).find("iframe")}window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function o(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var r in e){var o=e[r];if(!i(o,"-")&&g[o]!==n)return"pfx"!=t||o}return!1}function s(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function u(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+x.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?a(i,t):(i=(e+" "+k.join(r+" ")+r).split(" "),s(i,t,n))}function l(){p.input=function(n){for(var r=0,o=n.length;r<o;r++)P[n[r]]=n[r]in b;return P.list&&(P.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),P}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var c,d,f="2.7.1",p={},m=!0,h=t.documentElement,v="modernizr",y=t.createElement(v),g=y.style,b=t.createElement("input"),w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),C="Webkit Moz O ms",x=C.split(" "),k=C.toLowerCase().split(" "),A={},P={},_=[],T=_.slice,E=function(e,n,r,o){var i,a,s,u,l=t.createElement("div"),c=t.body,d=c||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=o?o[r]:v+(r+1),l.appendChild(s);return i=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),l.id=v,(c?l:d).innerHTML+=i,d.appendChild(l),c||(d.style.background="",d.style.overflow="hidden",u=h.style.overflow,h.style.overflow="hidden",h.appendChild(d)),a=n(l,e),c?l.parentNode.removeChild(l):(d.parentNode.removeChild(d),h.style.overflow=u),!!a},S={}.hasOwnProperty;d=o(S,"undefined")||o(S.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return S.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=T.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(T.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(T.call(arguments)))};return r}),A.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:E(["@media (",w.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},A.history=function(){return!!e.history&&!!history.pushState},A.backgroundsize=function(){return u("backgroundSize")},A.cssanimations=function(){return u("animationName")},A.csstransforms3d=function(){var e=!!u("perspective");return e&&"webkitPerspective"in h.style&&E("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},A.csstransitions=function(){return u("transition")},A.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}};for(var V in A)d(A,V)&&(c=V.toLowerCase(),p[c]=A[V](),_.push((p[c]?"":"no-")+c));return p.input||l(),p.addTest=function(e,t){if("object"==typeof e)for(var r in e)d(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof m&&m&&(h.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),y=b=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=y[e[h]];return t||(t={},v++,e[h]=v,y[v]=t),t}function i(e,n,r){if(n||(n=t),c)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():m.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||p.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function a(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),u=s.length;a<u;a++)i.createElement(s[a]);return i}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function u(e){e||(e=t);var r=o(e);return g.shivCSS&&!l&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||s(e,r),e}var l,c,d="3.7.0",f=e.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",v=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(e){l=!0,c=!0}}();var g={elements:f.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:f.shivCSS!==!1,supportsUnknownElements:c,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:u,createElement:i,createDocumentFragment:a};e.html5=g,u(t)}(this,t),p._version=f,p._prefixes=w,p._domPrefixes=k,p._cssomPrefixes=x,p.testProp=function(e){return a([e])},p.testAllProps=u,p.testStyles=E,p.prefixed=function(e,t,n){return t?u(e,t,n):u(e,"pfx")},h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+_.join(" "):""),p}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==v.call(e)}function o(e){return"string"==typeof e}function i(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=y.shift();g=1,e?e.t?m(function(){("c"==e.t?f.injectCss:f.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):g=0}function u(e,n,r,o,i,u,l){function c(t){if(!p&&a(d.readyState)&&(b.r=p=1,!g&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&m(function(){C.removeChild(d)},50);for(var r in _[n])_[n].hasOwnProperty(r)&&_[n][r].onload()}}var l=l||f.errorTimeout,d=t.createElement(e),p=0,v=0,b={t:r,s:n,e:i,a:u,x:l};1===_[n]&&(v=1,_[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){c.call(this,v)},y.splice(o,0,b),"img"!=e&&(v||2===_[n]?(C.insertBefore(d,w?null:h),m(c,l)):_[n].push(d))}function l(e,t,n,r,i){return g=0,t=t||"j",o(e)?u("c"==t?k:x,e,t,this.i++,n,r,i):(y.splice(this.i++,0,e),1==y.length&&s()),this}function c(){var e=f;return e.loader={load:l,i:0},e}var d,f,p=t.documentElement,m=e.setTimeout,h=t.getElementsByTagName("script")[0],v={}.toString,y=[],g=0,b="MozAppearance"in p.style,w=b&&!!t.createRange().compareNode,C=w?p:h.parentNode,p=e.opera&&"[object Opera]"==v.call(e.opera),p=!!t.attachEvent&&!p,x=b?"object":p?"script":"img",k=p?"script":x,A=Array.isArray||function(e){return"[object Array]"==v.call(e)},P=[],_={},T={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};f=function(e){function t(e){var t,n,r,e=e.split("!"),o=P.length,i=e.pop(),a=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;n<a;n++)r=e[n].split("="),(t=T[r.shift()])&&(i=t(i,r));for(n=0;n<o;n++)i=P[n](i);return i}function a(e,o,i,a,s){var u=t(e),l=u.autoCallback;u.url.split(".").pop().split("?").shift(),u.bypass||(o&&(o=r(o)?o:o[e]||o[a]||o[e.split("/").pop().split("?")[0]]),u.instead?u.instead(e,o,i,a,s):(_[u.url]?u.noexec=!0:_[u.url]=1,i.load(u.url,u.forceCSS||!u.forceJS&&"css"==u.url.split(".").pop().split("?").shift()?"c":n,u.noexec,u.attrs,u.timeout),(r(o)||r(l))&&i.load(function(){c(),o&&o(u.origUrl,s,a),l&&l(u.origUrl,s,a),_[u.url]=2})))}function s(e,t){function n(e,n){if(e){if(o(e))n||(d=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}),a(e,d,t,0,l);else if(Object(e)===e)for(u in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(u)&&(!n&&!--s&&(r(d)?d=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}:d[u]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(f[u])),a(e[u],d,t,u,l))}else!n&&p()}var s,u,l=!!e.test,c=e.load||e.both,d=e.callback||i,f=d,p=e.complete||i;n(l?e.yep:e.nope,!!c),c&&n(c)}var u,l,d=this.yepnope.loader;if(o(e))a(e,0,d,0);else if(A(e))for(u=0;u<e.length;u++)l=e[u],o(l)?a(l,0,d,0):A(l)?f(l):Object(l)===l&&s(l,d);else Object(e)===e&&s(e,d)},f.addPrefix=function(e,t){T[e]=t},f.addFilter=function(e){P.push(e)},f.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,o,u,l){var c,d,p=t.createElement("script"),o=o||f.errorTimeout;p.src=e;for(d in r)p.setAttribute(d,r[d]);n=l?s:n||i,p.onreadystatechange=p.onload=function(){!c&&a(p.readyState)&&(c=1,n(),p.onload=p.onreadystatechange=null)},m(function(){c||(c=1,n(1))},o),u?p.onload():h.parentNode.insertBefore(p,h)},e.yepnope.injectCss=function(e,n,r,o,a,u){var l,o=t.createElement("link"),n=u?s:n||i;o.href=e,o.rel="stylesheet",o.type="text/css";for(l in r)o.setAttribute(l,r[l]);a||(h.parentNode.insertBefore(o,h),m(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},window.Chorus=window.Chorus||{},Chorus.Modernizr=window.Modernizr,function(e){if(!e.browser){e.browser={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1,version:0};var t=navigator.userAgent;t.indexOf("Chrome")>-1?e.browser.chrome=!0:t.indexOf("Safari")>-1?e.browser.safari=!0:t.indexOf("Opera")>-1?e.browser.opera=!0:t.indexOf("Firefox")>-1?e.browser.mozilla=!0:navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(e.browser.msie=!0,e.browser.version=parseFloat(RegExp.$1))}}(jQuery),function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,o=window.console=window.console||{};r--;)e=n[r],o[e]||(o[e]=t)}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),this.JSON||(this.JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,o,i,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;n<i;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;n<i;n+=1)r=rep[n],"string"==typeof r&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,o=e[t];if(o&&"object"==typeof o)for(n in o)Object.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var Chorus=Chorus||{},CA=Chorus.Analytics=CA||{};!function(){function e(){return window.innerHeight||f&&f.clientHeight||document.body.clientHeight}function t(){return window.innerWidth||f&&f.clientWidth||document.body.clientWidth}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function r(e,t){var n=null,r=!1,o=function(){return n?void(r=!0):(e(),void(n=setTimeout(function(){var e=r;n=null,r=!1,e&&o()},t)))};return o}function o(e,t){var n;if(d)return d(e).each(t);if("string"==typeof e?n=document.querySelectorAll(e):e instanceof NodeList?n=e:e instanceof Element&&(n=[e]),n)for(var r=0;r<n.length;r++)t.call(n[r])}function i(e,t,n){d?d(e).on(t,n):e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n){return n=n||{},function(){for(var r=arguments[0]instanceof Array?arguments[0]:arguments,o=0,i={},a=0;a<r.length||o<t.length;a++){var s=r[a];if("function"==typeof s)i.eventCallback=s;else if("boolean"==typeof s)s&&(i.eventNonInt=s);else if("object"==typeof s)for(var u in s)s.hasOwnProperty(u)&&(i[n[u]||u]=s[u]);else if(t[o]){var l=t[o++];i.hasOwnProperty(l)||(i[l]=s)}}return i.event=e,i}}function s(e,t){return function(){var n=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments);n.length&&(n[0].match&&n[0].match(/send|_track/)&&n.shift(),n[0]===e.toLowerCase()&&n.shift(),CA.push(t(n)))}}function u(n){var r=n&&n.getBoundingClientRect();return r&&r.bottom>0&&r.right>0&&r.top<e()&&r.left<t()}var l=[25,50,75,90],c=[],d=window.jQuery,f=document.documentElement,p=d||function(){var e,t=[],n=document,r=n.documentElement.doScroll,o="DOMContentLoaded",i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener(o,e=function(){for(n.removeEventListener(o,e),i=1;e=t.shift();)e()}),function(e){i?e():t.push(e)}}(),m=a("analyticsEvent",["eventCategory","eventAction","eventLabel","eventValue","eventNonInt"],{nonInteraction:"eventNonInt",hitCallback:"eventCallback"}),h=a("social",["socialNetwork","socialAction","socialTarget","socialPagePath"],{page:"socialPagePath",hitCallback:"eventCallback"}),v=a("virtualPageView",["virtualPagePath","virtualPageTitle"],{page:"virtualPagePath",title:"virtualPageTitle",hitCallback:"eventCallback"});n(CA,{_dataLayer:CA.dataLayer||"dataLayer",dataLayer:function(){var e=this._dataLayer;return"object"==typeof e&&e.push?e:"string"==typeof e&&window[e]&&window[e].push?this._dataLayer=window[e]:[]},event:s("Event",m),social:s("Social",h),pageview:s("Pageview",v),push:function(e){this.dataLayer().push(e)},eventAutoFormat:function(e,t,n){var r=[e,t].join(":"),o=[e,this.contentType(),t].join(":");this.event(e,r,o,n)},trackElementView:function(e){var t=m(Array.prototype.slice.call(arguments,1));o(e,function(){c.push({el:this,data:n({},t)})}),g()},onElementView:function(e,t){o(e,function(){c.push({el:this,data:t})}),g()},disableScrollDepth:function(){l=[]},getVariable:function(e,t){for(var n=this.dataLayer(),r=n.length-1;r>=0;r--){var o=n[r][e];if(o)return o}return t},isMobile:function(){return t()<=600},contentDisplay:function(){return this.isMobile()?"mobile":"desktop"},contentType:function(){return this.getVariable("Content Type","other")},pageTitle:function(){return document.title.replace(/\s*(-|\|)\s*(Curbed|Eater|Polygon|Racked|SBNation|The Verge|Vox( Media)?)(.com)?$/,"")},crossDomains:function(){return"undefined"!=typeof __xdomains__?__xdomains__:document.domain.replace("www.","")},placement:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-placement");if(n)return":"+n;t=t.parentNode}return""},socialAction:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-action");if(n)return n;t=t.parentNode}return"share"},socialPlacement:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-placement");if(n)return n;t=t.parentNode}return"main"},headerText:function(e){var t=e,n=t.querySelectorAll("h1,h2,h3,h4,h5,h6");return n.length?(n=Array.prototype.slice.call(n),n.sort(function(e,t){return e.tagName.localeCompare(t.tagName)}),n[0].innerText):t.innerText},siblingText:function(e){for(var t=e,n=t.getAttribute("data-analytics-link").replace(/([^:]+).*/,"$1"),r='[data-analytics-link="'+n+'"]';(t=t.parentNode)&&t.querySelector;){var o=t.querySelector(r);if(o)return o.innerText}return e.getAttribute("href")},isOutboundLink:function(e,t){var n=e.hostname||"";if(!n||n==document.domain)return!1;for(var r=t.split(","),o=0;o<r.length;o++)if(n.indexOf(r[o])>=0)return!1;return!0}});var y=function(t){for(var n=window.pageYOffset||f&&f.scrollTop||document.body.scrollTop,r=document.body.scrollHeight,o=n/r*100,i=(n+e())/r*100,a=l.length-1;a>=0;a--){var s=l[a];if((s>o&&s<i||t&&s<i)&&(CA.eventAutoFormat("interaction",s,!0),l.splice(a,1),t))return}},g=r(function(){for(var e=c.length-1;e>=0;e--){var t=c[e].el;if(u(t)){var n=c[e].data;if(c.splice(e,1),"function"==typeof n)return n();n.eventCategory=n.eventCategory||t.getAttribute("data-analytics-category")||t.getAttribute("data-analytics-viewport")||"interaction",n.eventAction=n.eventAction||t.getAttribute("data-analytics-action")||n.eventCategory+":view",n.eventLabel=n.eventLabel||t.getAttribute("data-analytics-label")||t.innerText,n.eventNonInt=!0,CA.event(n)}}},300);p(function(){if(CA._q)for(;CA._q.length;){var e=CA._q.pop();CA[e[0]].apply(CA,e[1])}i(window,"scroll",r(function(){l.length&&y(),c.length&&g()},50)),CA.trackElementView("[data-analytics-viewport]"),y(!0)})}();var Util=Util||{};Util.getUrlVars=function(){for(var e,t={},n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++){var e=n[r].split("=");val=e[1],retVal="true"==val||"false"!=val&&null,null==retVal&&(retVal=0==isNaN(parseInt(val))?parseInt(val):0==isNaN(parseFloat(val))?parseFloat(val):val),t[e[0]]=retVal}return t},Util.inViewport=function(e){var t,n;return!(!e||1!==e.nodeType)&&(n=document.documentElement,t=e.getBoundingClientRect(),!!t&&t.bottom>0&&t.right>0&&t.top<n.clientHeight&&t.left<n.clientWidth)},Util.detectCSSFeature=function(e){var t=["Webkit","Moz","ms","O"],n=document.createElement("div"),r=null,e=e.toLowerCase();if(n.style[e])return!0;r=e.charAt(0).toUpperCase()+e.substr(1);for(var o=t.length-1;o>-1;o--)if(void 0!==n.style[t[o]+r])return!0;return!1},Util.getReferrerDomain=function(){return document.referrer.split("/")[2]},Util.socialReferrer=function(){var e=Util.getUrlVars().debugReferrer,t=e||this.getReferrerDomain();if(t){if(t=t.replace(/^www\./i,""),["twitter.com","t.co"].indexOf(t)>-1)return"twitter";if(["facebook.com","fb.me"].indexOf(t)>-1)return"facebook";if("plus.google.com"===t)return"google-plus";if("sports.yahoo.com"===t)return"yahoo sports";if("yahoo.com"===t)return"yahoo"}return null},Util.isReferrerSocialDomain=function(e){var t=this.socialReferrer();if(e)return e===t;var n=["twitter","facebook","google-plus","yahoo","yahoo sports"],r=jQuery.inArray(t,n);return r>-1},Util.isReferrerCurrentDomain=function(){var e=this.getReferrerDomain(),t=location.href.split("/")[2];return e===t},Util.isReferrerCurrentNetwork=function(){var e=this.getReferrerDomain(),t=location.href;if(!e)return!1;var n=/eater|polygon|racked|sbnation|vox|voxmedia|voxcreative|theverge/;return t.match(n)+""==e.match(n)+""},Util.isReferrerVoxMediaNetwork=function(){var e=this.getReferrerDomain();if(!e)return!1;var t=/eater|polygon|racked|sbnation|vox|voxmedia|voxcreative|theverge/,n=e.match(t);return n&&n.length>0},Util.characterCountdown=function(e,t,n){var r=e.attr("maxlength");t.text(r-e.val().length);var o=jQuery("<div class='error' style='display:none'>Some of your text was cut off because it exceeded the limit</div>");e.before(o),e.removeAttr("maxlength"),e.keyup(function(){var i=e.val().length;i>r?n||(e.val(e.val().substr(0,r)),o.show(),i=e.val().length):o.hide(),t.text(r-i)})},Util.addQueryParam=function(e,t,n){var r=new RegExp("([?|&])"+e+"=.*?(&|#|$)","gi");if(n.match(r))return t?n.replace(r,"$1"+e+"="+t+"$2"):n.replace(r,"$2");if(t){var o=n.indexOf("?")!==-1?"&":"?",i=n.split("#");return n=i[0]+o+e+"="+t,i[1]&&(n+="#"+i[1]),n}return n},Util.trackFacebook=function(e){return e?void(window.fbAsyncInit=function(){FB.init({version:"v2.6",appId:e,status:!0,cookie:!0,xfbml:!0});var t=Chorus.Analytics;FB.Event.subscribe("edge.create",function(e){t.event("social","facebook:like",e),t.social("facebook","like",e),e.match(/facebook\.com\/verge/i)&&t.event("follow-bar","facebook:like",e)}),FB.Event.subscribe("edge.remove",function(e){t.event("social","facebook:unlike",e),t.social("facebook","unlike",e),e.match(/facebook\.com\/verge/i)&&t.event("follow-bar","facebook:unlike",e)})}):console.log("[Util.trackFacebook]: Specify a Facebook App ID")},Util.trackTwitter=function(){window.twttr=window.twttr||(t={_e:[],ready:function(e){t._e.push(e)}});var e=Chorus.Analytics;twttr.ready(function(t){t.events.bind("tweet",function(){e.event("social","twitter:tweet",location.href),e.social("twitter","tweet",location.href)}),t.events.bind("follow",function(t){e.event("social","twitter:follow","@"+t.data.screen_name),e.social("twitter","follow","@"+t.data.screen_name),jQuery(t.target).parent().hasClass("follow-the-verge")&&e.event("follow-bar","twitter:follow","@"+t.data.screen_name)}),t.events.bind("retweet",function(t){e.event("social","twitter:retweet",t.data.source_tweet_id),e.social("twitter","retweet",t.data.source_tweet_id)}),t.events.bind("favorite",function(t){e.event("social","twitter:favorite",t.data.tweet_id),e.social("twitter","favorite",t.data.tweet_id)})})},Util.stringToTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})};var Chorus=Chorus||{};Chorus.Environment=function(e){function t(){var t=e.innerWidth;i=t>e.innerHeight?"landscape":"portrait";for(var r=n.length-1;r>-1;r--){var o=n[r];if(t>=o.min&&(void 0===o.max||t<=o.max))return void(null!=a&&a.index==o.index||(a=JSON.parse(JSON.stringify(o))))}}var n=[{index:0,name:"xsmall",min:0,max:400},{index:1,name:"small",min:401,max:600},{index:2,name:"medium_small",min:601,max:728},{index:3,name:"medium",min:749,max:880},{index:4,name:"large_medium",min:881,max:950},{index:5,name:"large",min:956,max:1080},{index:6,name:"xlarge_large",min:1081,max:1200},{index:7,name:"xlarge",min:1201,max:1500},{index:8,name:"xxlarge",min:1501}],r=null,o="ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,i=null,a=null,s=function(){clearTimeout(r),r=setTimeout(function(){clearTimeout(r),t()},20)};return e.addEventListener("resize",s),e.addEventListener("orientationchange",s),{currentBreakpoint:function(){return null==a&&t(),a},touch:function(){return o},clickEvent:function(){return o&&e.navigator.msPointerEnabled?"MSPointerDown":"click"},orientation:function(){return i},setBreakpoints:function(e){"undefined"!=typeof e&&e.constructor===Array&&(n=e,t())}}}(window),Chorus.Environment.setBreakpoints([{index:0,name:"xsmall",min:0,max:399},{index:1,name:"small",min:400,max:599},{index:2,name:"medium_small",min:600,max:727},{index:3,name:"medium",min:728,max:879},{index:4,name:"large_medium",min:880,max:949},{index:5,name:"large",min:950,max:1079},{index:6,name:"xlarge_large",min:1080,max:1199},{index:7,name:"xlarge",min:1200,max:1499},{index:8,name:"xxlarge",min:1500}]);var Util=Util||{};Util.UserAgentProfiler=function(){var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,t=window.innerWidth,n=window.navigator.userAgent,r=e&&t<728||window.location.href.indexOf("mobile=true")>0,o=e&&t>=728,i=!r&&!o,a=/(iPad|iPhone|iPod)/g.test(n),s=a&&/OS\s(7|6_1_4)/g.test(n),u=/Android/g.test(n),l=!1,c=r?"mobile":o?"tablet":"desktop";if(n.indexOf("Android")>0)for(var d=n.split(";"),f=0,p=d.length;f<p;f++)if(d[f].indexOf("Android")>0){var m=d[f].split(" ");if(parseInt(m[m.length-1].split(".")[0])<3){l=!0;break}}return{screenWidth:function(){return t},profile:function(){return c},isTablet:function(){return o},isMobile:function(){return r},isDesktop:function(){return i},isAndroid:function(){return u},isAndroidLt3:function(){return l},isIOS:function(){return a},isIOS7:function(){return s},deviceTypeForAds:function(){return this.profile()},browserWidthForAds:function(){return Chorus.Environment.currentBreakpoint().name},doNotTrack:function(){var e;if(void 0!==navigator.doNotTrack)e=navigator.doNotTrack;else if(void 0!==window.doNotTrack)e=window.doNotTrack;else{if(void 0===navigator.msDoNotTrack)return"unsupported";e=navigator.msDoNotTrack}return/1|yes|true/.test(e)?"1":"0"}}}();var Chorus=Chorus||{};Chorus.EventDispatcher=function(){function e(e){return _?_.clone(e):JSON.parse(JSON.stringify(jsonObject))}function t(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function n(n,r,o){var r=r||{},u=i[n];if(s&&console.log("Chorus.EventDispatcher is publishing the following event",n,r),o&&(s&&console.log("Chorus.EventDispatcher event "+n+" should be applied to all subsequent events",n,r),t(a,n,r)),i[n]){r.eventType=n;for(var l=0,c=u.length;l<c;l++)u[l](e(r))}}function r(e,n){t(i,e,n),s&&!u&&console.log("Chorus.EventDispatcher is subscribing to the following event",e),s&&u&&console.log("Chorus.EventDispatcher is subscribing to the following event",e,n);var r=a[e];if(r)for(var o=0,l=r.length;o<l;o++)s&&console.log("Chorus.EventDispatcher has found an event of the type "+e+" that should be applied to any subsequent subscriber",e,r[o]),n(r[o])}function o(e,t){if(i[e])for(var n=i[e],r=n.length-1;r>-1;r--)n[r]==t&&n.splice(r,1)}var i={},a={},s=1==Util.getUrlVars().debugEventDispatcher,u=1==Util.getUrlVars().debugVerbose;return{publish:function(e,t,r){var r=r||!1;n(e,t,r)},subscribe:function(e,t){r(e,t)},unsubscribe:function(e,t){o(e,t)},debug:function(e){s=!0,e===!0&&(u=!0)}}}(),jQuery(document).ready(function(e){var t=e(".m-ad-survey__form"),n=!0;setTimeout(function(){n&&t.addClass("show_survey").removeClass("hidden_survey")},1e3),Chorus.EventDispatcher.subscribe("first_ad_rendered",function(){n=!1,t.addClass("hidden_survey").removeClass("show_survey")})});var $j=jQuery.noConflict(),SBN=SBN||{};SBN.init=function(e){jQuery.address&&jQuery.address.tracker(null),Chorus.EventDispatcher.subscribe("campaignReskinApplied",function(){e("body").addClass("has-reskin")})},jQuery(SBN.init),/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function r(e){return t(s.json?JSON.stringify(e):String(e))}function o(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),s.json?JSON.parse(e):e}catch(e){}}function i(t,n){var r=s.raw?t:o(t);return e.isFunction(n)?n(r):r}var a=/\+/g,s=e.cookie=function(o,a,u){if(void 0!==a&&!e.isFunction(a)){if(u=e.extend({},s.defaults,u),"number"==typeof u.expires){var l=u.expires,c=u.expires=new Date;c.setDate(c.getDate()+l)}return document.cookie=[t(o),"=",r(a),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var d=o?void 0:{},f=document.cookie?document.cookie.split("; "):[],p=0,m=f.length;p<m;p++){var h=f[p].split("="),v=n(h.shift()),y=h.join("=");if(o&&o===v){d=i(y,a);break}o||void 0===(y=i(y))||(d[v]=y)}return d};s.defaults={},e.removeCookie=function(t,n){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}(jQuery);var Chorus=Chorus||{};Chorus.DataStore=function(e){"use strict";function t(e){if(null===e||void 0===e)return null;var t=e.toLowerCase();if("true"===t||e===!0)return!0;if("false"===t||e===!1)return!1;if(!isNaN(parseFloat(e)))return parseFloat(e);try{var n=Json.parse(e);return n}catch(t){return e}}function n(t,n){return Chorus.Modernizr.localstorage?(localStorage.setItem(t,n),!0):e.cookie?(e.cookie(t,n),!0):(console.error("there was an error storing "+t+" : "+n),!1)}function r(n,r){var o,i=r||!1;return Chorus.Modernizr.localstorage?o=t(localStorage.getItem(n)):e.cookie?o=e.cookie(n):console.error("there was an error retrieving "+n),i===!0?t(o):o}return{set:function(e,t){return n(e,t)},get:function(e){return r(e)}}}(jQuery);var NativeAds=NativeAds||{};!function(e){NativeAds.Util={toPositionInteger:function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n},insertBefore:function(t,n,r){var o=e(t).get(r);o?e(o).before(n):e(t).last().after(n)},appendStyle:function(t,n){e(t).append("<style>"+n+"</style>")},colorize:function(t,n,r){r=r||"color",e(t).css(r,n)},assignOddEven:function(t){e(t).each(function(t){t%2===0?(e(this).removeClass("odd"),e(this).addClass("even")):(e(this).addClass("odd"),e(this).removeClass("even"))})},nativeAdPlacement:function(t){var n=function(){return[].map.call(arguments,function(e){return'[data-native-ad-id="'+e+'"]'}).join(", ")},r=e(t._element).parents(n("container")),o=t.fields;r.find(n("container")).length>0&&r.find(n("container")).remove(),r.find(n("preamble_bg")).css({"background-color":o.brand_color}),r.find(n("preamble_text")).css({color:o.brand_color,"border-color":o.brand_color}),r.find("a").attr("href",t.clickThroughUrl),o.byline||(o.byline="Our Partner"),o.preamble?o.byline=o.preamble+" "+o.byline:o.byline="Paid Content From "+o.byline;var i={body_text:o.description||o.pull_quote||"",headline:o.title||"",byline:o.byline||"",pull_quote:o.pull_quote||"",eyebrow:o.eyebrow||"From Our Sponsor"};e.each(i,function(e,t){r.find(n(e)).text(t)}),o.description&&r.find(n("description")).text(o.description);var a=r.find(n("thumbnail"));a.hasClass("vox-lazy-load")||a.hasClass("c-dynamic-image")||(a=a.find(".vox-lazy-load").length?a.find(".vox-lazy-load"):a),a.removeClass("lazy-image","vox-lazy-load","lazy-loaded");var s=a[0].className,u={src:o.thumbnail,"data-original":o.thumbnail,alt:o.description,style:"background-image:url("+o.thumbnail+"); background-size: cover; background-repeat:no-repeat;","class":s};a.attr(u);var l=a.siblings("svg");l.length&&l.remove(),r.find(n("logo")).attr({src:o.logo,alt:o.description}),t.adSlot=r,e(document).trigger("hymnal:nativeAdPlaced",t)},createVideoIframeFromEmbedCodeAndPlaceIn:function(t,n){var r=document.createElement("IFRAME");r.style.width="100%",r.style.height="100%",r.style.border="0";var o='<script>var e = document.getElementsByTagName("div");for(var i = 0; i < e.length; i++){e[i].style.width = "auto"; e[i].style.height="auto";}</script>',i="<html><head><style>body{margin:0;} .OoyalaVideoPlayer {width:100%; height:100%;}</style></head>"+t+o+"<body></body></html>";e(n).empty().append(r),r.contentWindow.document.open(),r.contentWindow.document.write(i),r.contentWindow.document.close()},waitForLazyContent:function(t,n){var r=!1,o=function(){!r&&e(t).length&&(r=!0,n())};o(),Chorus.EventDispatcher.subscribe("moduleInserted",o)},limitCharacterCount:function(e,t){var n=e.indexOf(" ",t);if(n==-1)return e;var r=e.substring(0,n),o=/[A-Za-z0-9]/;return o.test(r.slice(-1))&&(r+="\u2026"),r},declobberBackground:function(t){var n=e(t),r=n.css("background-image");n.attr("style",""),n.css("background-image",r)},makeSponsorClickable:function(t,n){n=n||".native-ad-sponsorship,.native-ad-byline",e(t._element).find(n).css("cursor","pointer").click(function(){window.location=t.clickThroughUrl})}}}(jQuery),function(e){var t={LatestTreatment:function(e){NativeAds.Util.colorize(".native-ad-latest .native-ad-sponsorship",e.fields.brand_color);var t=NativeAds.Util.toPositionInteger(e.fields.position,4);NativeAds.Util.insertBefore(".m-rock.m-latest-news ul.m-rock__list li",e._element,t)},VideoTreatment:function(t){e(t._element).hide(),NativeAds.Util.waitForLazyContent(".m-breaker.video",function(){var n=NativeAds.Util.toPositionInteger(t.fields.position,3);NativeAds.Util.insertBefore(".m-breaker__body a",t._element,n),e(t._element).show(),NativeAds.Util.colorize(".native-ad-video .native-ad-sponsorship",t.fields.brand_color);var r=e(".m-breaker.video .m-breaker__body a");r.length>4&&e(".m-breaker.video .m-breaker__body a").last().remove()})},MobileTreatment:function(e){NativeAds.Util.colorize(".native-ad-mobile .native-ad-sponsorship",e.fields.brand_color),NativeAds.Util.colorize(".native-ad-mobile .native-ad-title",e.fields.brand_color)},ContentLinkTreatment:function(t){e(t._element).parents('[data-native-ad-id="container"]').find('[data-native-ad-id="eyebrow"]').css("background-color",t.fields.brand_color)}},n=function(e){if("Native Ad"===e.type){switch(e.design_template){case"Native Ad Latest":t.LatestTreatment(e);break;case"Native Ad Video":t.VideoTreatment(e);break;case"Native Ad Mobile":t.MobileTreatment(e);break;case"Native Ad Sponsored Link":NativeAds.Util.nativeAdPlacement(e);break;case"Native Ad Content Link":NativeAds.Util.nativeAdPlacement(e)}NativeAds.Util.makeSponsorClickable(e)}};e(document).on("hymnal:render",function(e,t){n(t.ad)}),e(document).on("hymnal:nativeAdPlaced",function(e,n){t.ContentLinkTreatment(n)})}(jQuery),/*! usertiming v0.1.6 */
!function(e){"use strict";"undefined"==typeof e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var t,n,r=[],o=[],i=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,o=["webkitNow","msNow","mozNow"],t=0;t<o.length;t++)if("function"==typeof e.performance[o[t]]){e.performance.now=e.performance[o[t]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart&&(a=e.performance.timing.navigationStart),"function"!=typeof e.performance.now&&(e.performance.now=Date.now?function(){return Date.now()-a}:function(){return+new Date-a})}var s=function(){},u=function(){},l=[],c=!1,d=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(d=!0),e.performance.userTimingJsPerformanceTimeline=!0,r=["webkit","moz"],o=["getEntries","getEntriesByName","getEntriesByType"],t=0;t<o.length;t++)for(n=0;n<r.length;n++)i=r[n]+o[t].substr(0,1).toUpperCase()+o[t].substr(1),"function"==typeof e.performance[i]&&(e.performance[o[t]]=e.performance[i],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);s=function(e){l.push(e),"measure"===e.entryType&&(c=!0)};var f=function(){c&&(l.sort(function(e,t){return e.startTime-t.startTime}),c=!1)};if(u=function(e,n){for(t=0;t<l.length;)l[t].entryType!==e||"undefined"!=typeof n&&l[t].name!==n?t++:l.splice(t,1)},"function"!=typeof e.performance.getEntries||d){var p=e.performance.getEntries;e.performance.getEntries=function(){f();var t=l.slice(0);return d&&p&&(Array.prototype.push.apply(t,p.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}}if("function"!=typeof e.performance.getEntriesByType||d){var m=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if("undefined"==typeof n||"mark"!==n&&"measure"!==n)return d&&m?m.call(e.performance,n):[];"measure"===n&&f();var r=[];for(t=0;t<l.length;t++)l[t].entryType===n&&r.push(l[t]);return r}}if("function"!=typeof e.performance.getEntriesByName||d){var h=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,r){if(r&&"mark"!==r&&"measure"!==r)return d&&h?h.call(e.performance,n,r):[];"undefined"!=typeof r&&"measure"===r&&f();var o=[];for(t=0;t<l.length;t++)("undefined"==typeof r||l[t].entryType===r)&&l[t].name===n&&o.push(l[t]);return d&&h&&(Array.prototype.push.apply(o,h.call(e.performance,n,r)),o.sort(function(e,t){return e.startTime-t.startTime})),o}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,r=["webkit","moz","ms"],o=["mark","measure","clearMarks","clearMeasures"],t=0;t<o.length;t++)for(n=0;n<r.length;n++)i=r[n]+o[t].substr(0,1).toUpperCase()+o[t].substr(1),"function"==typeof e.performance[i]&&(e.performance[o[t]]=e.performance[i],e.performance.userTimingJsUserTimingPrefixed=!0);var v={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var n=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");v[t]||(v[t]=[]),v[t].push(n),s({entryType:"mark",name:t,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?v[e]=[]:v={},u("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,n,r){var o=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Measure must be specified");if(!n)return void s({entryType:"measure",name:t,startTime:0,duration:o});var i=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");i=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in v))throw new Error(n+" mark not found");i=v[n][v[n].length-1]}var a=o;if(r)if(a=0,e.performance.timing&&r in e.performance.timing){if("navigationStart"!==r&&0===e.performance.timing[r])throw new Error(r+" has a timing of 0");a=e.performance.timing[r]-e.performance.timing.navigationStart}else{if(!(r in v))throw new Error(r+" mark not found");a=v[r][v[r].length-1]}var u=a-i;s({entryType:"measure",name:t,startTime:i,duration:u})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){u("measure",e)})}"undefined"!=typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0),/*!
 * IframeClient v0.0.5
 * Copyright 2015, Vox Media
 * Released under MIT license
 */
function(e,t){var n={debug:!1,create:function(n,r){return t(this,n,r,e)},isInIframe:function(){try{return e.parent&&e.self!==e.top}catch(e){return!0}},error:function(e){if(this.debug)throw e}};"object"==typeof module&&module.exports?module.exports=n:e.IframeClient=n}(window,function(e,t,n,r){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var i=o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o(),a="@app",s=t||"xframe",u="@res",l=200,c=[],d={},f={},p=0,m=null,h=null;return{host:n||"*",get id(){return i},src:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e&&e instanceof Element&&e.contentWindow&&(e=e.contentWindow),e&&"function"==typeof e.postMessage?e:null},post:function(t,n,r){if(t=this.src(t),!t||!n)return e.error("invalid post");var o="string"==typeof n?{message:n}:n;if(void 0!==r&&(o.value=r),o.message){o[a]=s;try{t.postMessage(JSON.stringify(o),this.host)}catch(t){e.error(t)}}},request:function(t,n,r,o,a){function s(){var e=!1;for(var t in d)if(d.hasOwnProperty(t)){var n=d[t];n.attempts++<n.timeout/l?(u.post(n.src,n.data),e=!0):u.end(t,new Error("request timeout"))}m=e?setTimeout(s,l):null}if(t=this.src(t),!t||!n)return e.error("invalid request");var u=this,c=i+"-"+("0000"+p++).slice(-4),f=d[c]={timeout:a||15e3,attempts:0,src:t,cb:o,data:{message:n,value:r,id:c}};return m?this.post(t,f.data):s(),c},end:function(e,t){var n=e.id||e,r=t&&t.abort;if(d.hasOwnProperty(n)){var o=d[n];delete d[n],r||"function"!=typeof o.cb||o.cb(t||null,e.value)}},on:function(e,t,n){return c.push({message:e,fn:t,ctx:n}),this},listen:function(){function e(e,t){for(var n,r=0;r<c.length;r++){var o=c[r];o.message===t.message&&(n=o.fn.call(o.ctx,e,t.value))}return n}if(!h){var t=this;h=function(n){var r,o="*"===t.host||String(n.origin).indexOf(t.host)>=0;if(o&&/^\{.*\}$/.test(n.data))try{r=JSON.parse(n.data)}catch(e){r=null}if(o&&r&&r[a]===s)if(r.id){var i=r.message===u;i&&d.hasOwnProperty(r.id)?t.end(r):i||f.hasOwnProperty(r.id)||(f[r.id]=!0,t.post(n.source,{message:u,value:e(n,r)||"success",id:r.id}))}else e(n,r)},r.addEventListener("message",h)}return this},stopListening:function(){return h&&(r.removeEventListener("message",h),h=null),this},dispose:function(){clearInterval(m),this.stopListening()}}}),function(e){function t(e){return new n(e)}function n(e){if(!r)throw"volume is not installed";this.el=r.src(e)}var r,o={production:"https://volume.vox-cdn.com",sandbox:"https://volume-staging.vox-cdn.com",development:"http://localhost:4000"};t.embedHost=o[Chorus.Context.environment],t.selectAllEmbeds=function(){return document.querySelectorAll('iframe[src^="'+this.embedHost+'/embed"]')},t.install=function(e){e&&(this.embedHost=e);var n,o=(this.selectAllEmbeds(),document.querySelectorAll(".volume-video"));for(r?r.host=this.embedHost:r=IframeClient.create("volume",this.embedHost).on("analytics",function(e,n){t.reportEvent(n)}).on("pauseOthers",function(e){t.postToAll("pause",null,e.source)}).on("host",function(){return{url:location.href,origin:location.origin,title:document.title,api:!0}}).listen(),n=0;n<o.length;n+=1)this.embedVideo(o[n]);return this},t.uninstall=function(){r&&(r.dispose(),r=null)},t.reportEvent=function(e){Chorus.Analytics.event(e)},t.embedVideo=function(e){if(e){var t=e.getAttribute("data-volume-uuid");if(t){var n={placement:e.getAttribute("data-volume-placement"),tracking:e.getAttribute("data-analytics-placement"),player_type:e.getAttribute("data-volume-player-choice"),start_time:e.getAttribute("data-volume-start-time")},r=String(e.getAttribute("data-volume-autoplay"));"1"!==r&&"true"!==r||(n.autoplay=!0);var o=Object.keys(n).filter(function(e){return void 0!==n[e]}).map(function(e){return e+"="+encodeURIComponent(n[e])});e.className=e.className.replace(/volume-video|p-scalable-video/g,"")+" p-scalable-video",e.innerHTML='<iframe src="'+this.embedHost+"/embed/"+t+"?"+o.join("&")+'" frameborder="0" allowfullscreen></iframe>'}}},t.postToAll=function(e,t,n){for(var o=this.selectAllEmbeds(),i=0;i<o.length;i++){var a=r.src(o[i]);a!==n&&r.post(a,e,t)}},n.prototype={play:function(e){var t="play";return e&&e.request?this.request(t):this.post(t)},pause:function(e){var t="pause";return e&&e.request?this.request(t):this.post(t)},post:function(e,t){return r&&r.post(this.el,e,t),this},request:function(e,t,n){return r&&r.request(this.el,e,t,n),this}},jQuery(document).ready(function(){e.volume=t.install()})}(this);var Volume=Volume||{};Volume.Config=function(){function e(e){if(0!==Object.keys(e).length){s=e.configs;var t=Util.UserAgentProfiler;if(t.isMobile())var n="mobile";else if(t.isTablet())var n="tablet";else var n="desktop";var r=e.device[n];r&&(a=r)}}function t(e){if("undefined"!=typeof a&&a.hasOwnProperty(e))return a[e]}function n(e){var n=t(e);if("undefined"!=typeof n)return n.preferred}function r(e,n){var r=t(e);if("undefined"!=typeof r){var o=n||r.preferred,i=r[o];return i?s[i]:void 0}}function o(e){"function"==typeof e?u=e:"undefined"==typeof e&&u()}function i(t){"undefined"!=typeof t&&(e(t),Volume.Config.ready())}var a,s,u=function(){};return{init:i,ready:o,placementConfig:r,preferredPlacementPlayer:n}}(jQuery),jQuery(function(){Volume.Config.init(window.volume_profile)});var Volume=Volume||{};Volume.Player=function(e){function t(){var t=e(r);t.each(function(t,r){var o=e(r),i=o.attr("id");"undefined"==typeof o.data("volume-uuid")&&n(i)})}function n(t){var n=e("#"+t),r=n.data("volume-id"),o=(n.data("volume-placement"),n.data());"undefined"!=typeof o&&(o.autoplay=o.volumeAutoplay),"undefined"!=typeof t&&"undefined"!=typeof r&&Chorus&&Chorus.VideoContext&&Chorus.VideoContext.createVolumePlayer(t,r,o)}var r=".volume-video:not(.prevent-init)";return{init:t,create:n}}(jQuery),Volume.Config.ready(function(){Volume.Player.init()});var Chorus=Chorus||{};!function(e){function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];i[n]=function(){return console.log('[VideoContext]: The "'+n+'" method is deprecated. Please use "'+e+'" instead.'),i[e].apply(i,arguments)}}}function n(){function e(e){return function(){for(var t in i.players)"function"==typeof i.players[t][e]&&i.players[t][e]()}}n.init||(n.init=!0,jQuery(document).on("pause",e("suspend")).on("resume",e("resume")).find("head").append('<script src="https://resources.amazonwebapps.com/v1/latest/Amazon-Web-App-API.min.js" async></script>'))}var r="viewedVideos",o=1e5,i=Chorus.VideoContext={videos:{},players:{},getVideo:function(e){return this.videos[e]||null},getVideoById:function(e){for(var t in this.videos)if(this.videos[t].id===e)return this.videos[t]},addPlacementForId:function(t,n){var r=this.getVideoById(t);r&&(r=e.extend({},r),r.placement=n,this.addVideo(r))},addVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];n.preview_urls=n.preview_urls||{},n.provider_video_data=n.provider_video_data||{},n.provider_video_id=n.provider_video_id||"",n.placement=n.placement||null,n.type=n.provider_video_type=n.provider_video_type||"other",n.title=n.title||"No Title",delete n.hasViewport,this.videos[n.placement||n.id]=n}return this},addVolumeVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.videos[n.id]=n}return this},createVolumePlayer:function(t,r,o){var i=this.getVideo(r);if(i){for(var a=e("#"+t),s=a.data("volume-placement"),u=o.volumePlayerChoice,l=Volume.Config.preferredPlacementPlayer(s),c=["ooyala","youtube","brightcove"],d=u||l,f=i[d+"_id"],p=0;null==f&&p<c.length;p++)d=c[p],f=i[d+"_id"];if(null!=f){var o=e.extend(Volume.Config.placementConfig(s,d),o),m={ooyala:OoyalaWrapper,youtube:YoutubeWrapper,brightcove:BrightcoveWrapper,embed:EmbedWrapper}[d];if(m){var h,v=a.attr("id");m!==BrightcoveWrapper&&(v=a.attr("id")+"-target",h='<div id="'+v+'"></div>'),this.destroyPlacement(v),a.addClass("p-scalable-video"),a.append(h),this.players[r]=new m(v,i,o),this.createViewport(v,r,o)}n()}}},addOoyalaVideo:function(e,t,n){var r={id:"ooyala"+Object.keys(this.videos).length,provider_video_id:e,provider_video_type:"ooyala",placement:n,title:t};return this.addVideo(r),r.id},destroyPlayer:function(e){var t=this.players[e];t&&"function"==typeof t.destroy&&t.destroy(),delete this.players[e]},destroyAllPlayers:function(){for(var e in this.players)this.destroyPlayer(e)},destroyPlacement:function(e){for(var t in this.players){var n=this.players[t];if(n.elementId===e)return this.destroyPlayer(t)}},createPlayer:function(e,t,r){r=r||{};var o=this.getVideo(t);if(o){var i={brightcove:BrightcoveWrapper,ooyala:OoyalaWrapper,youtube:YoutubeWrapper,embed:EmbedWrapper}[o.type];i&&(this.destroyPlacement(e),this.players[t]=new i(e,o,r),this.createViewport(e,t,r)),n()}},createViewport:function(t,n,r){if(r=r||{},!r.disableViewport){var o=this.getVideo(n),i=this;if(o&&!o.hasViewport){o.hasViewport=!0,"string"==typeof t&&(t=e("#"+t));var a=this.formatVideoEvent("view",o,t,function(){"ooyala"===o.type&&i.addViewedVideo(o)});Chorus.Analytics.trackElementView(t,a)}}},createViewportProxy:function(t,n,r){var o="data-analytics-placement",i=e(n).attr(o,e(t).attr(o));return this.createViewport(i,r)},createViewportGroup:function(t,n,r){"function"==typeof n&&(r=n,n=null),n=n||"data-placement",e(t).each(function(){var t=e(this);Chorus.Analytics.onElementView(t,function(){var e=t.find("["+n+"]").map(function(){return this.getAttribute(n)});i.trackPlacementsInViewport(e),"function"==typeof r&&r()})})},trackPlacementsInViewport:function(e){for(var t=0;t<e.length;t++){var n=this.getVideo(e[t]);n&&!n.hasViewport&&(n.hasViewport=!0,Chorus.Analytics.event(this.formatVideoEvent("view",n)))}},formatVideoEvent:function(t,n,r,o){var i=n.placement;!i&&r&&(i="data-analytics-placement",r=e("string"==typeof r?"#"+r:r),i=r.closest("["+i+"]").attr(i));var a="embed"===n.type,s=a?n.provider_video_id.replace(/.*embed\/([^"']+).*/,"$1"):n.id;return{eventCategory:a?"videotemp":"video",eventAction:[n.type||"volume",t,i||"other"].join(":"),eventLabel:[n.title,s].join(" | "),nonInteraction:"view"===t,eventCallback:o}},getViewedVideos:function(){return Chorus.Modernizr.localstorage?JSON.parse(localStorage.getItem(r)||"[]"):[]},addViewedVideo:function(e){var t=this.getViewedVideos();t.unshift(e),Chorus.Modernizr.localstorage&&localStorage.setItem(r,JSON.stringify(t.slice(0,6)))},findUnviewedVideo:function(e,t){var n=this.getViewedVideos(),r={};n.push(t||{}),n.forEach(function(e){e.id&&(r[e.id]=1),e.provider_video_id&&(r[e.provider_video_id]=1)});for(var o=0;o<e.length;o++){var i=e[o];if(!r[i.id]&&!r[i.provider_video_id])return i}return e[0]}};t("addVideo","addVideos","addChorusVideos"),t("addOoyalaVideo","addCustomVideo","addVideoFromOoyalaIdWithTitle"),i.Wrapper={$el:null,elementId:"",meta:{},options:{},player:null,played:!1,destroy:function(){},suspend:function(){},resume:function(){},pub:function(e,t){var n=Chorus.EventDispatcher;n&&n.publish(e,t||{player:this.player})},perfMark:function(){var e=window.performance;e&&e.mark&&e.mark.apply(e,arguments)},perfMeasure:function(e){var t=window.performance;if(t&&t.measure){t.measure.apply(t,arguments);var n=t.getEntriesByName(e),r=n[n.length-1],i=Math.floor(r.duration);if(i>o)return;var a=[this.meta.type,e].join(":"),s=[this.meta.title,this.meta.id].join(" | ");Chorus.Analytics.event("video",a,s,i,!0)}},perfLoadStart:function(){"undefined"==typeof BOOMR||this._timer||(this._timer=BOOMR.requestStart("tag"))},perfLoadComplete:function(){this._timer&&(this._timer.loaded(),delete this._timer)},markAsViewed:function(e){e&&!this.options.setPlayedVideos||i.addViewedVideo(this.meta)},formatEvent:function(e,t){return i.formatVideoEvent(e,this.meta,this.$el,t)}}}(jQuery),BrightcoveWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{THUMB_FALLBACK:"http://assets.volume.voxmedia.com/static-images/default-thumb.jpg",insertVideoTag:function(e){var t=this.getVideoClass(),n='<video class="video-js '+t+'"';n+=' id="brightcove_'+this.meta.id+'"',n+=' data-player="'+this.options.player_id+'"',n+=' data-account="'+this.options.account_id+'"',n+=' data-embed="default"',n+="></video>",jQuery(n).appendTo(e)},getVideoClass:function(){var e=[Chorus.Context.network_slug];return"true"===this.options.hideAdOverlay&&e.push("hide-ad-overlay"),"true"===this.options.hideAdCountdown&&e.push("hide-ad-countdown"),e.join(" ")},setupPlayer:function(e){var t=this;videojs("brightcove_"+t.meta.id).ready(function(){var n=this,r=t.getEmbedCode(),o=function(){this.currentTime()>0&&(this.off("timeupdate",o),t.perfMark("playbackStart"),t.perfMeasure("ttff","playbackRequest","playbackStart"))};t.player=n,t.options.onCreate(),"true"==t.options.enableSocialSharing&&"function"==typeof this.social&&n.social({title:t.meta.title,displayAfterVideo:!0,description:t.meta.description,services:{facebook:!0,twitter:!0,pinterest:!1,tumblr:!1,linkedin:!1,google:!1}}),n.preload("metadata"),e.autoplay?n.autoplay(!0):null!=t.meta.brightcove_thumbnail?n.poster(t.meta.brightcove_thumbnail):n.poster(t.THUMB_FALLBACK),this.one("loadedmetadata",function(){t.perfMark("brightcoveReady"),t.perfMeasure("loadtime","brightcoveInitializeStart","brightcoveReady")}),this.one("firstplay",function(){t.perfMark("playbackRequest"),t.options.onPlay(),Chorus.Analytics.event(t.formatEvent("play")),this.on("timeupdate",o)}),this.one("error",function(e){console.log("Brightcove: error"),console.log(e),Chorus.Analytics.event(t.formatEvent("error"))}),r.indexOf("onceux.unicornmedia.com")>=0?n.onceux({metadataUri:r,contentHeaders:!0}):n.src({src:r})})},getEmbedCode:function(){var e=this.options,t=this.meta;if(null!==e.applicationId&&null!==e.deliveryType&&null!==e.fileType&&null!==e.extension){var n="0c2129c5-42b8-49e0-aa4c-f560c7bc0ba7",r="",o=["http://onceux.unicornmedia.com/now/ads/vmap",e.deliveryType,e.fileType,n,e.applicationId,t.brightcove_uuid,"content."+e.extension].join("/");return null!==t.brightcove_query_params&&null!==e.umoprofiles?r=t.brightcove_query_params+"&umoprofiles="+e.umoprofiles:null!==e.umoprofiles?r="?umoprofiles="+e.umoprofiles:null!==t.brightcove_query_params&&(r=t.brightcove_query_params),o+r}return t.brightcove_id},destroy:function(){this.player&&this.player.dispose()},getPlayerUrl:function(e){var t=["//players.brightcove.net",e.account_id,e.player_id+"_default","index.min.js"];return t.join("/")}}),OoyalaWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getState(),this.player.pause())},resume:function(){var e=this.suspendState;!this.player||"playing"!==e&&"buffering"!==e||(this.player.play(),this.suspendState=null)},getOoyalaParams:function(e){for(var t=["//player.ooyala.com/v3/",e.player_id,"?"],n=["namespace","platform","version","tweaks"],r=0;r<n.length;r++){var o=n[r];e.hasOwnProperty(o)&&t.push(o,"=",e[o],"&")}return t.join("")}}),YoutubeWrapper.initQueue=[],YoutubeWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getPlayerState(),this.player.stopVideo())},resume:function(){var e=this.suspendState;!this.player||e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||(this.player.playVideo(),this.suspendState=null)}}),EmbedWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.$el.empty()}});var Chorus=Chorus||{};Chorus.Video=Chorus.Video||{},Chorus.Video.youtubeApiLoaded=!1,Chorus.Video.loadYoutubeApi=function(){jQuery.getScript("//www.youtube.com/iframe_api"),Chorus.Video.youtubeApiLoaded=!0},Chorus.Video.wrapVideoIframe=function(){var e=jQuery,t=e(this),n="",r=t.attr("src");if(!t.parent().hasClass("chorus-video-embed")&&!t.parent().attr("data-volume-uuid")){if(!r||!/youtube|livestream|vimeo|vine|hulu|dailymotion|instagram/.test(r))return!0;/hulu\.com/.test(r)?(t.attr("width","100%"),t.attr("height","100%")):/instagram\.com/.test(r)?n=" instagram":/vine\.co/.test(r)&&(n=" vine"),t.attr("src",r),t.wrap('<div class="video-wrap'+n+'"></div>')}},Chorus.Video.fixLegacyOoyalaPlayer=function(){var e=jQuery;e("div[id*=ooyalaPlayer]").each(function(){e(this).css({height:"100%",width:"100%"})})},Chorus.Video.playInViewport=function(e){var t=500,n=[],r=[];e.each(function(){this.pause(),n.push(this)});var o=function(){for(var e,i=[];e=n.pop();)Util.inViewport(e)?(e.play(),r.push(e)):i.push(e);for(n=i,i=[];e=r.pop();)Util.inViewport(e)?i.push(e):(e.pause(),n.push(e));r=i,setTimeout(o,t)};o()},Chorus.Video.autoplay=!1,Chorus.Video.checkForAutoplay=function(){return!(window.history.length<=1)&&(!!Chorus.Video.autoplay||Util.isReferrerCurrentDomain()&&jQuery("body").hasClass("video-entry")&&Util.UserAgentProfiler.isDesktop())},Chorus.Video.init=function(e){e=e||{};var t=jQuery,n=e.callback;e=t.extend({checkForExistingPlayer:!1},e),Chorus.Video.fixLegacyOoyalaPlayer(),t(".chorus-video-embed").each(function(r,o){if(!e.checkForExistingPlayer||!t(o).hasClass("chorus-video-player-loaded")){var i=t.extend({},e,{autoplay:0===r&&Chorus.Video.checkForAutoplay(),callback:function(e){Chorus.VideoContext.ooyalaPlayer=e,t(o).addClass("chorus-video-player-loaded"),Chorus.EventDispatcher.publish("ooyalaPlayerLoaded",{ooyalaPlayer:e}),"function"==typeof n&&n.call(o,e)}});Chorus.VideoContext.createPlayer(o.id,t(o).data("chorus-video-id"),i)}})},window.jQuery&&jQuery(function(){Chorus.Video.init()});