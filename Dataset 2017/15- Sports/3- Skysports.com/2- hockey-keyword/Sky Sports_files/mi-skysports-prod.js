var _min=_min||{_publisher:""};_min=function(e){function t(e,t,n){var i=function(){var n=new E(e,t);return n.init(),function(){return n}}(),r=function(){var i=new E(e,t,n.ServerAnalytics,!0);return i.enableStorage("_minEE0"),i.init(),function(){return i}}(),o=function(){var i=new E(e,t,n.UrlReporter,!0);return i.init(),function(){return i}}(),a=function(){var i=new E(e,t,n.UrlReporter,!0);return i.enableStorage("_minEE1"),i.init(),function(){return i}}(),s=function(){var i=new E(e,t,n.VideoData,!1);return i.init(),function(){return i.setValidator(e.validateScraperURL),i}}(),l=function(){var i=new E(e,t,n.UrlReporter,!1);return i.init(),function(){return i.setValidator(e.validateScraperURLForDelayedInternal),i}}();return{getError:i,getAnalytics:r,getVideoViewsReporter:o,getUrlReporter:a,getPlayerContent:s,getPlayerContentDelayed:l}}function n(e,t){function n(){var n=null;switch(e.isTestGroup()&&(n=new s.analytics.ViewportAnalyticsService),t.getDefaultPlayMode()){case f.config.PlayModes.Hover:n=new s.analytics.HoverAnalyticsService;break;case f.config.PlayModes.SemiHover:n=new s.analytics.SemiHoverAnalyticsService;break;default:n=new s.analytics.ViewportAnalyticsService}return n}return{create:n}}function i(e,t,n){function i(){var t=a(),n=e.getlistAsArray(t[P]);n=r(n),n.length>0&&u([n]),t[P]=[],l(t)}function r(e){if(e.length<=1)return e;var t=[];e.forEach(function(e,n,i){t.push(JSON.stringify(e))});var n=t.filter(function(e,n){return t.indexOf(e)==n});return t=[],n.forEach(function(e,n,i){t.push(JSON.parse(e))}),t}function o(t,n){var i,r=a();r[n]=e.getlistAsArray(r[n]),i=r[n],i.push(t),l(r)}function a(){var e=L.getItem(I);return e=e?C?d(e):JSON.parse(e):{}}function l(e){var t;t=C?p(e):JSON.stringify(e),L.setItem(I,t,O)}function c(e,t){var n,i,r=typeof e;if("string"==r||"number"==r){if(n=a(),n[t]=n[t]||[],i=n[t],0===i.length)return null;for(var o=0;o<i.length;o++)if(i[o].id==e)return i[o];return null}}function u(t){if(!e.isArray(t))return void e.log("Report not an array");for(var i,r="Test:"+oe.getGroupCode(),o=0;o<t.length;o++){i=e.isArray(t[o])?t[o]:[t[o]];for(var a=0;a<i.length;a++){var s=JSON.parse(JSON.stringify(i[a]));n.getAnalytics().push(f.Emitter.ANALYTICS_EVENT,s),n.getUrlReporter().push(f.Emitter.CLICK,s),r+=","+s.id+":PClick:"+(s.product||"0");var l=ie.get(s.id,s.placementFunction,f.Emitter.CLICK_TYPE_CLICK,s.test_mode,s.product);l.isSent()||(s.uniq=!0,n.getAnalytics().push(f.Emitter.ANALYTICS_EVENT,s),r+=","+s.id+":UClick:"+(s.product||"0")),e.optimizely.trackEvent(0==s.product?"click_minute_apv":"click_minute_ia"),l.setAnalyticState()}}h.add(r),n.getAnalytics().flush(),n.getUrlReporter().flush()}function d(e){for(var t=e.split("-"),n=[],i=0;i<t.length;i++){var r=t[i].split("."),o={id:r[0],highlight_id:r[1],test_mode:!!parseInt(r[2]),playMode:r[3],source:r[4],type:r[5],placementFunction:r[6],uniq:!!parseInt(r[7]),product:r[8]};n.push(o)}return{clicks:n}}function p(e){for(var t=e.clicks,n=[],i="",r=0;r<t.length;r++){var o=t[r],a=[];a.push(o.id),a.push(o.highlight_id),a.push(0==o.test_mode?0:1),a.push(o.playMode),a.push(o.source),a.push(o.type),a.push(o.placementFunction),a.push(0==o.uniq?0:1),a.push(o.product),a=a.join("."),n.push(a)}return i+=n.join("-")}function g(e,n){L=t.getLocalStorageInstance(),T=e,C=ae.isCookieDomain(),C&&(L=Q,I="MinTestClick",O={path:"/",domain:ae.getCookieDomain()}),i(),J.addEventListener(f.Events.DomWindow.URL_CHANGE,i,this),ae.isForceFlushAnalytics()&&v()}function v(){A=new s.utils.Timer(f.FLUSH_ANALYTICS,i,this),A.start()}function m(){e.log("sent Logs Due To In Article or placement force Click"),i()}function y(e){o(e,P)}function E(e){o(e,w)}function _(e,t){var n,i,r=typeof e;if(("string"==r||"number"==r)&&(n=a(),n[t]=n[t]||[],i=n[t],0!==i.length)){for(var o=0;o<i.length;o++)if(i[o].id==e){i.splice(o,1);break}l(n)}}function S(e){_(e,w)}function b(e){var t=c(e,w);t&&(t.type=f.Emitter.ANALYTICS_CLICK_EVENT,u([t]),S(e))}var A,I="minAnalytics",P="clicks",w="clicksDelay",L=null,T=null,O={},C=!1;return{init:g,startForceFlush:v,sendLogsDueToInArticleClick:m,log:y,logDelay:E,removeLogFromList:_,removeLogDelayById:S,sendLogDelayById:b}}function r(t,n,i){function r(e,t){return document.querySelectorAll("div["+e+"='"+t+"']")||[]}function o(){return document.querySelectorAll(n)||[]}function a(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=n.exec(t);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}function c(e,t){if("undefined"==typeof t.length)return t;for(var n=0;n<t.length;n++)if(e==t[n].dataset.videoId)return t[n];return null}var u,d,p=new q.PlayerAdapter("ooyala"),h=!1;return p.seek_flag=!1,p.volumeStruct={volume_timeout:null,currentVol:0,time_of_change:0},p.scrubbing=!1,p.CONSTS={vol_interval:2e3,watch_interval:5},p.getPlayer=function(){return window[i].__internal.players[Object.keys(window[i].__internal.players)[0]]},p.isFlashPlayer=function(){return window[i].__internal.supportsFlash},p.isUsedInPage=function(){var e=o();return e&&e.length?(l.log("ooyala player exist"),!0):!1},p.setOnReadyCallback=function(e){d=e,u=s.utils.Timer.start(f.TIMER_ELEMENT_CHECK),u.addEventListener(s.utils.Timer.Tick,this.handleTimerElementCheck,this)},p.handleTimerElementCheck=function(){this.isUsedInPage()&&(u.kill(),d(),d=null)},p.videoIsLoaded=function(e){if("undefined"==typeof window[i]||!this.get_player(e))return!1;var t=c(e,this.playerContainer);if(!t)return!1;var n,r;return n=this.isFlashPlayer()?"object.video":"video.video",r=document.querySelector("#"+t.getAttribute("id")+" "+n),null!==r},p.isLoaded=function(e){return"undefined"==typeof e?"undefined"!=typeof window[i]:this.videoIsLoaded(e)},p.getScrapVideoData=function(){var t=document.querySelector("div[data-video-id]");if(!t)return l.log("ooyala scraper no player was found"),null;var n=t.getAttribute("data-video-id"),r={};return r.version="ooyala_flash "+a("version",window[i].__internal.$("param[name=flashvars]").val()),r.duration=0,r.stream=n,r.video_id=n,r.url=l.urls.getStructuredByUrl(k.getWindowLocationHref()),r.title=document.title,r.publisher=e._publisher,r.player_id=f.Scraper.PlayerList.OOYALA,r},p.scrapperGetPlayer=function(){this.player=p.getPlayer(),this.playerContainer=o()[0]},p.videoGetPlayer=function(e){for(var n=window[i].__internal.players,o=Object.keys(n),a=0;a<o.length;a++)if(n[o[a]].embedCode===e)return this.player=n[o[a]],this.playerContainer=r(t,e)[0],!0;return!1},p.get_player=function(e){return"undefined"!=typeof e?this.videoGetPlayer(e):void this.scrapperGetPlayer()},p.init_data_collection=function(){if(this.isInitialized===!1&&this.player.adPlaying===!1){switch(this.volumeStruct.currentVol=this.player.volume,this.player.getState()){case"playing":this.properties.status.last_state=this.states.PLAY;break;case"paused":this.properties.status.last_state=this.states.PAUSE}this.properties.watched.from=0,this.player.parameters.autoplay=document.querySelector("#"+this.flashId+'_internal param[name="flashvars"]').value.indexOf("autoplay")>-1,Se.init(l.getDateNow(),100*this.player.volume,this.player.parameters.autoplay),this.isInitialized=!0}},p.register_listeners=function(){this.isFlashPlayer()?this.load_flash_events():this.load_html_events(),l.win_lose_focus(this.notifiy_focus_callback,this)},p.activateDataCollection=function(e){var t=this;this.video_id=e,window[i].ready(function(){t.register_listeners()})},p.load_html_events=function(e){var t=this;this.player.mb.subscribe("*","debug",function(e,t){}),this.player.mb.subscribe("playheadTimeChanged","playhead_event",function(e){t.scrubbing||t.on_play_time_changed(t.player.playheadTime)}),this.player.mb.subscribe("scrubbing","start_seek_event",function(e,n){t.scrubbing=!0,t.properties.seek.from=t.player.playheadTime,t.properties.status.last_state!=t.states.PAUSE&&t.send_watch_time(t.properties.watched.from,t.properties.seek.from)}),this.player.mb.subscribe("seek","get_seek_time",function(e,n){t.scrubbing||(l.log("30 sec html jump"),t.seek_flag=!0,t.properties.seek.from=t.player.playheadTime),t.properties.seek.to=n}),this.player.mb.subscribe("seeked","end_seek_event",function(e,n){t.scrubbing||(t.seek_flag=!1,Se.seek(t.properties.seek.from,t.properties.seek.to),t.properties.watched.from=t.properties.seek.to)}),this.player.mb.subscribe("scrubbed","end_seek_event",function(e,n){t.scrubbing=!1,Se.seek(t.properties.seek.from,t.properties.seek.to),t.properties.watched.from=t.properties.seek.to}),this.player.mb.subscribe("playing","play_event",function(){t.on_play()}),this.player.mb.subscribe("pause","pause_event",function(){t.scrubbing||t.on_pause()}),this.player.mb.subscribe("buffering","buffering_event",function(){t.scrubbing||t.isInitialized===!1||t.on_buffering()}),this.player.mb.subscribe("fullscreenChanged","fs_event",function(e,n){t.on_full_screen_change(n)}),this.player.mb.subscribe("endScreenShown","end_event",function(e,n){t.on_video_ends()})},p.isInitialized=!1,p.load_flash_events=function(){var e=c(this.video_id,this.playerContainer);this.flashId=document.querySelector("#"+e.getAttribute("id")+" object.video").getAttribute("id"),l.adapters.wrap.call(this,window[i],this.flashId,function(e,t,n,r,o,a,s){if(this.player.adPlaying===!1)switch(t){case"volumeChanged":this.on_volume_change(n);break;case"playheadTimeChanged":this.on_play_time_changed(n.playheadTime);break;case"seeked":this.on_seek(n.oldPlayheadTime,n.newPlayheadTime);break;case"stateChanged":this.on_state_changed(n.state);break;case"fullscreenChanged":var c="normal"==n.state;this.on_full_screen_change(c);break;case"playComplete":this.on_video_ends();break;case"embedCodeChanged":n.embedCode!=this.player.embedCode&&(l.adapters.unWrap.call(this,window[i],this.flashId),this.properties.status.last_state=this.states.FINISHED)}})},p.on_state_changed=function(e){switch(l.log("on_state_changed --> "+e),e){case"playing":this.on_play();break;case"paused":this.on_pause();break;case"buffering":this.on_buffering()}},p.stream_change=function(e){return e==this.properties.status.last_state?!1:(this.properties.status.last_state==this.states.PAUSE?Se.pauseDuration(this.properties.pause.second,l.timestampDiffInSec(l.getDateNow(),this.properties.pause.paused_timestamp)):this.properties.status.last_state==this.states.PLAY?this.send_watch_time(this.properties.watched.from,this.get_current_play_time()):this.properties.status.last_state==this.states.FINISHED&&e==this.states.PLAY&&Se.replay(),!0)},p.on_video_ends=function(){this.stream_change(this.states.FINISHED)&&(Se.ended(),this.was_ended=!0,this.properties.status.last_state=this.states.FINISHED)},p.on_play=function(){this.stream_change(this.states.PLAY)&&(this.properties.watched.from=this.get_current_play_time(),this.properties.status.last_state=this.states.PLAY)},p.on_pause=function(){this.properties.status.last_state==this.states.PLAY&&this.stream_change(this.states.PAUSE)&&(this.properties.pause.paused_timestamp=l.getDateNow(),this.properties.pause.second=this.get_current_play_time(),Se.pause(this.properties.pause.second),this.properties.status.last_state=this.states.PAUSE),this.properties.status.last_state==this.states.PAUSE&&this.properties.buffering.buffering_timestamp&&this.check_and_send_buffer(this.get_current_play_time(),l.getDateNow())},p.on_buffering=function(){if(0===this.properties.buffering.buffering_timestamp){this.properties.buffering.buffering_timestamp=l.getDateNow();var e=this.get_current_play_time();this.properties.status.last_state==this.states.PLAY&&this.properties.watched.from<e&&!this.seek_flag&&this.send_watch_time(this.properties.watched.from,e)}},p.on_seek=function(e,t){this.properties.status.last_state==this.states.PLAY&&this.send_watch_time(this.properties.watched.from,e),this.properties.seek.from=e,this.properties.seek.to=t,Se.seek(e,t),this.seek_flag=!0},p.check_and_send_buffer=function(e,t){this.properties.buffering.buffering_timestamp&&(t||(t=l.getDateNow()),Se.startBuffering(e),Se.bufferDuration(e,l.timestampDiffInSec(t,this.properties.buffering.buffering_timestamp)),this.properties.buffering.buffering_timestamp=0)},p.on_play_time_changed=function(e){if(this.init_data_collection(),this.check_and_send_buffer(e),this.seek_flag===!1){var t=e-this.properties.watched.from;0>t?this.properties.watched.from=e:t>this.CONSTS.watch_interval&&this.send_watch_time(this.properties.watched.from,e)}else e!=this.properties.seek.to&&this.isFlashPlayer()&&(this.properties.watched.from=e,this.seek_flag=!1)},p.on_volume_change=function(e){null!==this.volumeStruct.volume_timeout&&clearTimeout(this.volumeStruct.volume_timeout),0===this.volumeStruct.time_of_change&&(this.volumeStruct.time_of_change=this.get_current_play_time()),this.volumeStruct.volume_timeout=setTimeout(function(e){e.on_volume_change_handler()},this.CONSTS.vol_interval,this)},p.on_volume_change_handler=function(){var e=this.volumeStruct.currentVol,t=this.player.volume-e;this.volumeStruct.currentVol=this.player.volume,Se.volume(this.volumeStruct.time_of_change,Math.round(100*e),Math.round(100*t)),this.volumeStruct.time_of_change=0},p.fullScreenStatus=!1,p.on_full_screen_change=function(e){this.fullscreen_changed=!0,this.fullScreenStatus!=e&&(this.fullScreenStatus=e,Se.fullscreen(this.get_current_play_time(),this.fullScreenStatus===!1?0:1))},p.send_watch_time=function(e,t){t>e&&6>t-e&&(Se.watched(e,t-e),this.properties.watched.from=t)},p.get_current_play_time=function(){var e=this.player.getPlayheadTime();return void 0===e?0:e},p.notifiy_focus_callback=function(e){setTimeout(function(){this.properties.status.last_state!=this.states.PLAY&&this.properties.status.last_state!=this.states.PAUSE||this.fullscreen_changed||(this.fullscreen_changed=!1,Se.focus(this.get_current_play_time(),e,this.properties.status.last_state==this.states.PLAY))}.bind(this),100)},p.getCorrectPlayer=function(){return"undefined"!=typeof window[i]?p.isFlashPlayer()?document.querySelector("object.video"):document.querySelector("video.video"):void 0},p.addPlayEventListener=function(e,t,n){function r(){h||(h=!0,l.adapters.VirtualClickOrganizer.isValid(n)&&e(n))}function o(){if(!window[i]||!window[i].__internal||!window[i].__internal.players)return null;for(var e=0;e<Object.keys(window[i].__internal.players).length;e++){var t=window[i].__internal.players[Object.keys(window[i].__internal.players)[e]];if(t.embedCode==n.getPublisherVideoId())return t}return null}function a(){"ready"!=s.state&&"loading"!=s.state?r():s.mb.subscribe("playheadTimeChanged","apvClickHandle",function(e,t){l.log("apvClickHandle "+e),s.mb.unsubscribe("playheadTimeChanged","apvClickHandle"),r()})}var s=o(),c=function(){s=o(),s&&(clearInterval(c),a())};return s?void a():void setInterval(c,1e3)},p.checkPlugin=function(){return!1},p}function o(e,t,n){this._sessionId=e,this._apvId=t,this._minVidId=n,this.queue=[],this.INTERVAL_TIME=2e3,this._interactionId=0,this._myTimeout=null}var a=function(){"use strict";function e(e,t,n,i){function r(n){o=t(r,i),e(n-(a||n)),a=n}var o,a;return{start:function(){o||r(0)},stop:function(){n(o),o=null,a=0}}}function t(t){return e(t,requestAnimationFrame,cancelAnimationFrame)}function n(e,t,n,i){function r(t){Boolean(e[n])===Boolean(i)&&t.stopImmediatePropagation(),delete e[n]}return e.addEventListener(t,r,!1),r}function i(e,t,n,i){function r(){return n[t]}function o(e){n[t]=e}i&&o(e[t]),Object.defineProperty(e,t,{get:r,set:o})}function r(e,t,n){n.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function o(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function a(e){var t=new Audio;return r(e,"play",t),r(e,"playing",t),r(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function s(e,t,n){(f||0)+200<Date.now()&&(e[E]=!0,f=Date.now()),n||(e.currentTime=t),b[++A%3]=100*t|0}function l(e){return e.driver.currentTime>=e.video.duration}function c(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&l(t)&&(t.driver.currentTime=0)),s(t.video,t.driver.currentTime)):t.video.networkState!==t.video.NETWORK_IDLE||t.video.buffered.length||t.video.load(),t.video.ended&&(delete t.video[E],t.video.pause(!0))}function u(){var e=this,t=e[y];return e.webkitDisplayingFullscreen?void e[_]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(s(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,e.buffered.length||e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(o(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&o(e,"playing")))))}function d(e){var t=this,n=t[y];n.driver.pause(),n.updater.stop(),t.webkitDisplayingFullscreen&&t[S](),n.paused&&!e||(n.paused=!0,n.hasAudio||o(t,"pause"),t.ended&&(t[E]=!0,o(t,"ended")))}function p(e,n){var i=e[y]={};i.paused=!0,i.hasAudio=n,i.video=e,i.updater=t(c.bind(i)),n?i.driver=a(e):(e.addEventListener("canplay",function(){e.paused||o(e,"playing")}),i.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,l(i)&&s(e,0)},get ended(){return l(i)}}),e.addEventListener("emptied",function(){var t=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(s(e,0,!0),i.driver.src=e.src,t?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?n&&!i.driver.buffered.length&&i.driver.load():(e.pause(),e[_]())}),n&&(e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){b.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)}))}function h(e){var t=e[y];e[_]=e.play,e[S]=e.pause,e.play=u,e.pause=d,i(e,"paused",t.driver),i(e,"muted",t.driver,!0),i(e,"playbackRate",t.driver,!0),i(e,"ended",t.driver),i(e,"loop",t.driver,!0),n(e,"seeking"),n(e,"seeked"),n(e,"timeupdate",E,!1),n(e,"ended",E,!1)}function g(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),n&&!m||e[y]||(p(e,t),h(e),e.classList.add("IIV"),!t&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}var f,v="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,m=/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,y=v(),E=v(),_=v("nativeplay"),S=v("nativepause"),b=[],A=0;return g.isWhitelisted=m,g}();e=e,e.ver="1.7.7.7",e._publisher=e._publisher||"",e._publisherDebugUrl=e._publisherDebugUrl||"";var s={},l={},c={},u="production",d=(new Date).getTime(),p=window.performance?window.performance.timing.navigationStart:d,h={add:function(){}},g={add:function(){}},f={};f.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.map2.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.map2.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e],Error:["http://errors.snackly.co/","https://errors.snackly.co/"][e]}}(),f.SELECTOR="selectors",f.Selectors={PREVIEW_SELECTOR:"preview",LINK_SELECTOR:"link",CLICK_SELECTOR:"click",CONTAINER_SELECTOR:"container",HOVER_SELECTOR:"hover",OBSERVER_SELECTOR:"observer",CAROUSEL_SELECTOR:"carousel",VALIDATOR_SELECTOR:"validator",VIDEO_DATA_SELECTOR:"videoDataSelector"},f.styleOverrides={CONTAINER:"container",APV:"apv",CLONE:"clone",ELEMENT_TO_REPLACE:"elementToReplace",LOGO:"logo",CUSTOM:"custom"},f.DEFAULT_MEDIAQUERY="active",f.USE_APV_ORIGIN="apvOrigin",f.styles={},f.styles.MARGIN_TOP="margin-top",f.styles.PARENT="parent",f.styles.HEIGHT="height",f.styles.WIDTH="width",f.styles.OBJECT_FIT="object-fit",f.values={},f.values.RELATIVE="relative",f.values.ABSOLUTE="absolute",f.values.HIDDEN="hidden",f.values.COVER="cover",f.values.NONE="none",f.values.BLOCK="block",f.values.HUNDRED_PERCENT="100%",f.APV={Origin:{source:"[o]",target:"o",size:450}},f.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},f.Analytics={},f.Analytics.PlayModes={unknown:0,viewport:2,semihover:4,hover:5},f.config={},f.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},f.config.PlayModes={Viewport:"viewport",SemiHover:"semihover",Hover:"hover",InArticle:"in_article",BrightcovePlugin:"brightcove_plugin"},f.DOM_ADAPTER_TYPE="domAdapter",f.LOGO_TYPE="logoType",f.LOGO_SMALLEST_WIDTH=12,f.DEFAULT_LOGO_SIZE="16px",f.DEFAULT_MOBILE_LOGO_SIZE="12px",f.FLUSH_ANALYTICS=5e3,f.APPEND_CHILD_CODE=-1,f.APV_MOUSE_ENTER_SEND_TIMEOUT=2e3,f.HOVER_IMPRESSION_DELAY=1e4,f.TIMER_ELEMENT_CHECK=5e3,f.PLACEMENTS_DOM_REFRESH_INTERVAL=5e3,f.WindowKeys={COMPATIBILITY:"compatibility"},f.PlacementKeys={COMPATIBILITY:"compatibility",CHILD:"child"},f.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse",FIRST_APV_CREATED:"firstApvCreated",VIDEOS_UPDATE:"videosUpdate",PLAYER_VIDEO_VIEW_CLICK:"playerVideoViewClick",APV_LOGO_CLICK:"apvLogoClick"},f.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",MOUSE_OUT:"mouseout",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},f.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error"},f.Events.DomWindow={SCROLL:"scroll",RESIZE:"resize",URL_CHANGE:"urlChange",CHECK_VISIBILITY:"checkVisibility"},f.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},f.Effects={APV_FADE:500},f.Emitter={ANALYTICS_EVENT:0,STATS_EVENT:1,NEW_VIDEO_EVENT:2,ERROR:3,VIDEO_VIEWS:42,CLICK:94,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,VIDEO_PRESENT:96,CLIENT_DESCRIPTION:99,CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c"},f.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},f.Scraper={},f.Scraper.PlayerList={FLOW_PLAYER:1,OOYALA:2,SMPFLASH:3,VIDEOJS_PLAYER:4,YOUTUBE:6,HTML5_PLAYER:7,JW_PLAYER:8,DAILY_PLAYER:20,CLUBIC_PLAYER:10,LEMONDE_PLAYER:11,KALTURA_PLAYER:12,BRIGHTCOVE_PLAYER:13,CNN_PLAYER:14,NBA_PLAYER:15,ABC_PLAYER:16,BET_PLAYER:17,KOTAKU_PLAYER:18,SPORTING_PLAYER:21,HEATST_PLAYER:23,RGJBRIGHTCOVE_PLAYER:24,AOL_PLAYER:25,FOXSPORTS_PLAYER:26,VJSBRIGHTCOVE_PLAYER:27,OOYALA_TELEGRAPH_PLAYER:28,THE_PLATFORM_IFRAME_PLAYER:29},f.LocalStorage={POTENTIAL:"_minPotentialScrapers"},f.Scraper.ALL_PLAYERS=[f.Scraper.PlayerList.FLOW_PLAYER,f.Scraper.PlayerList.OOYALA,f.Scraper.PlayerList.SMPFLASH,f.Scraper.PlayerList.YOUTUBE,f.Scraper.PlayerList.HTML5_PLAYER,f.Scraper.PlayerList.JW_PLAYER,f.Scraper.PlayerList.VIDEOJS_PLAYER,f.Scraper.PlayerList.DAILY_PLAYER,f.Scraper.PlayerList.CLUBIC_PLAYER,f.Scraper.PlayerList.LEMONDE_PLAYER,f.Scraper.PlayerList.KALTURA_PLAYER,f.Scraper.PlayerList.BRIGHTCOVE_PLAYER,f.Scraper.PlayerList.RGJBRIGHTCOVE_PLAYER,f.Scraper.PlayerList.CNN_PLAYER,f.Scraper.PlayerList.NBA_PLAYER,f.Scraper.PlayerList.ABC_PLAYER,f.Scraper.PlayerList.BET_PLAYER,f.Scraper.PlayerList.KOTAKU_PLAYER,f.Scraper.PlayerList.SPORTING_PLAYER,f.Scraper.PlayerList.AOL_PLAYER,f.Scraper.PlayerList.HEATST_PLAYER,f.Scraper.PlayerList.VJSBRIGHTCOVE_PLAYER,f.Scraper.PlayerList.FOXSPORTS_PLAYER,f.Scraper.PlayerList.OOYALA_TELEGRAPH_PLAYER,f.Scraper.PlayerList.THE_PLATFORM_IFRAME_PLAYER],f.MinuteUiTests={},f.MinuteUiTests.HtmlAttributes={EXISTS:"minute-ui-test",ACTIVE:"minute-ui-test-active"},f.ReportMethods={GIF:"gif",GET:"get",POST:"post"},f.GROUP_42="__42_group",s.utils=s.utils||{},s.utils.Signal=function(){function e(e,t,n,i,r){this._listener=t,this._isOnce=n,this.context=i,this._signal=e,this._priority=r||0}function t(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function n(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){n.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,r){var o,a=this._indexOfListener(t,i);if(-1!==a){if(o=this._bindings[a],o.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===e&&n.context===t)return i;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,n,i){return t(e,"add"),this._registerListener(e,!1,n,i)},addOnce:function(e,n,i){return t(e,"addOnce"),this._registerListener(e,!0,n,i)},remove:function(e,n){t(e,"remove");var i=this._indexOfListener(e,n);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n}();var v={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",IGNORE_REFERRERS:"ignoreReferrers",DISABLE_SCRIPT:"disableScript",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",MINUTE_UI_TEST:"uiTest",DEBUG_VISIBILITY:"debugVisibility",FORCE_VIDEO:"forceVideo",FORCE_ENABLE:"forceEnable"},m={SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};e.debugParams={},s.utils=s.utils||{},s.utils.Debounce=function(e,t,n){function i(e){v=e||d}function r(e,t){y=e||d,E=t||E}function o(){var e=arguments.length>0?l.cloneArray(arguments):g;S(e),b(e)}function a(){u()}function s(){u(),p=null,h=null,g=null}function c(){return f>0}function u(){c()&&(clearTimeout(f),f=0)}var d=e,p=t,h=n||null,g=l.cloneArray(arguments).slice(3),f=0,v=0,m=0,y=0,E=1,_=0,S=function(e){if(!(0>=v)){var t=l.getDateNow(),n=t>m+v;n&&(p.apply(h,e),m=t)}},b=function(e){var t=l.cloneArray(e);u(),_=0,f=setTimeout(function n(){_+1===E&&(t=t.concat(!0)),p.apply(h,t),_++,E>_&&setTimeout(n,d),a()},d)};return{enableFilter:i,setEcho:r,start:o,stop:a,kill:s,isRunning:c}},s.utils=s.utils||{},s.utils.Timer=function(e,t,n){function i(){if(0===S){var e=arguments.length>0?l.cloneArray(arguments):_;w(e)}}function r(e){A=e||0}function o(){return I}function a(){I=0}function c(){P=null,f()}function u(){f(),m=null,E=null,_=null,P=null,b.removeAllEventListener()}function d(){return 0!==S}function p(){b.addEventListener.apply(b,l.cloneArray(arguments))}function h(){b.removeEventListener.apply(b,l.cloneArray(arguments))}function g(e){m&&m.apply(E,e),0===A||A>I?(I++,b.dispatchEvent(s.utils.Timer.Tick)):f()}function f(){S>0&&(clearInterval(S),S=0)}var v=e,m=t,E=n||null,_=l.cloneArray(arguments).slice(3),S=0,b=new y,A=0,I=0,P=null,w=function(e){P=e,f(),S=setInterval(function(){g(P)},v)};return{start:i,stop:c,kill:u,reset:a,isRunning:d,setCounterLimit:r,getCounter:o,addEventListener:p,removeEventListener:h}},s.utils.Timer.Tick="timerTick",s.utils.Timer.start=function(e){var t=new s.utils.Timer(e);return t.start(),t};var y=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners={}};return t.prototype.addEventListener=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!1,args:r})},t.prototype.addEventListenerOnce=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!0,args:r})},t.prototype.removeEventListener=function(e,t,n){if(this.listeners[e]){for(var i=this.listeners[e].length,r=[],o=0;i>o;o++){var a=this.listeners[e][o];a.context==n&&a.callback==t||r.push(a)}this.listeners[e]=r}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(t,n){var i,r,o=0,a={type:t,data:n},s=e(arguments).slice(2);s=[a].concat(s);var l=this.listeners[t];if(l){var c=l.length;for(i=0;c>i;i++)if(r=l[i],r&&r.callback){var u=s.concat(r.args);r.callback.apply(r.context,u),o+=1}for(i=c-1;i>=0;i--)r=l[i],r&&r.isOnce&&l.splice(i,1)}},t}(),E=function(t,n,i,r){function o(e){A=e,I=!0}function a(e){e.session=te.getId(),e.url=t.urls.getStructuredByUrl(k.getWindowLocationHref()),e.stor=!!P}function s(n,i){if(S){if(t.isArray(i))for(var r=0;r<i.length;r++)a(i[r]);else a(i);var o={ver:e.ver,type:n,payload:i};_&&(o.timestamp=(new Date).getTime()),I&&d(o),m.push(o),m.length>y&&c()}}function l(){S=!1}function c(){if(document&&document.body&&0!==m.length){if(I&&(m=p(),h([])),0===m.length||b&&!b())return void(m=[]);var e,n=m.slice();m=[];var i=!0;if("string"==typeof n&&""!==n?e=0===n.indexOf('"[{\\"')?JSON.parse(n):n:t.isArray(n)&&n.length>0?e=JSON.stringify(n):t.isArray(n)&&0===n.length?i=!1:(t.sendErrorReport("EmitterEventsCorrupt"),i=!1),!le.isDebug()&&i&&!le.isActiveAll()){var r="data="+encodeURIComponent(t.b64EncodeUnicode(e));t.sendReportByUrl(E,r)}t.log("Emitter Send: "+e),t.log(n)}}function u(e){b=e}function d(e){var t=p();t.push(e),h(t)}function p(){var e=P.getItem(A);return e=e?JSON.parse(e):[]}function h(e){P.setItem(A,JSON.stringify(e))}function g(){setInterval(c.bind(this),v)}var v=3e3,m=[],y=50,E=i||f.Urls.ServerData,_="undefined"!=typeof r?r:!0,S=!0,b=null,A=null,I=!1,P=n.getLocalStorageInstance();return{enableStorage:o,push:s,disable:l,flush:c,setValidator:u,init:g}};!function(){l.sendReportByUrl=function(e,t){S.send(e,t)},l.sendLoggerReport=function(e){S.sendLog(e),l.log("sendLoggerReport: "+e)},l.sendUserAgentLoggerReport=function(e){S.sendLog(e)},l.sendErrorReport=function(e){ae.getIsEnableErrorReport()&&(S.sendError(e),l.log("sendErrorReport: "+e))}}();var _=function(){function e(e,i){var r=n(e.split("."),4),o=n(i.split("."),4);return t(r,o)}function t(e,t){if(e.length!==t.length)return null;for(var n=0;n<t.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function n(e,t){for(var n=t?t:3,i=e.map(function(e){return parseInt(e,10)}),r=n-i.length,o=r;o>0;o--)i.push(0);return i}return{compare:t,convertVersionToNumbers:n,compareStr:e}};l.urls={},l.urls.setReferrerUrl=function(){window.parent===window&&(_min.referrer=window.location.href||"")},l.urls._getReferrerUrlCommon=function(e){var t;if(ae.getIsTopWindowReferrerEnabled()&&window.parent!==window)try{t=window.parent._min.referrer||""}catch(n){}t||(t=document.referrer||"");var i=e(t);return i.length<1500?i:""},l.urls.getReferrerUrl=function(){return l.urls._getReferrerUrlCommon(l.urls.getStructuredByUrlWithoutOrigin)},l.urls.getReferrerUrlWithOrigin=function(){return l.urls._getReferrerUrlCommon(l.urls.getStructuredByUrl)},l.hasOwnProperty=Object.prototype.hasOwnProperty,l.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(l.hasOwnProperty.call(e,t))return!1;return!0},l.urls.getCurrentUrl=function(){return window.location.href},l.urls.removeOrigin=function(){var e=document.createElement("a");return function(t){return e.href=t,t.split(e.origin)[1]}}(),l.urls.removeTrailingSlash=function(e){return e&&e.length>0&&"/"==e.charAt(e.length-1)?e.substring(0,e.length-1):e},l.urls.getCanonicalUrl=function(){var e=null;return function(){return e||(e=l.urls.getCurrentUrl().replace(/^(https?:\/\/)www\./i,"$1")),e}}(),l.urls.getStructuredByUrl=function(){var e=document.createElement("a");return function(t,n){e.href=t;var i="",r=n||ae.getUrlStructure();if(0===r.length)return t;for(var o=0;o<r.length;o++)i+=r[o]!==f.UrlStructure.Origin||e.origin?r[o]!==f.UrlStructure.PathName||"/"==e[r[o]].charAt(0)?e[r[o]]:"/"+e[r[o]]:window.location.origin;return l.urls.removeTrailingSlash(i)}}(),l.urls.getStructuredByUrlWithoutOrigin=function(e,t){var n=l.cloneArray(t||ae.getUrlStructure());return n.indexOf(f.UrlStructure.Origin)>-1&&n.splice(0,1),l.urls.getStructuredByUrl(e,n)},l.urls.isImageUrl=function(){var e=document.createElement("a"),t=/\.(?:gif|png|webp|jpg|jpeg)$/i;return function(n){return e.href=n,t.test(e.pathname)}}();var l=l||{};!function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}(),function(){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){if(void 0===e)return!1;var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t})}()}(),function(){function t(){n&&n();var t=e.debugParams[v.PREVENT_PAGE_LOAD]||"";return J&&""===t&&J.dispatchEvent(f.Events.WINDOW_DISPOSE),""!==t?t:void 0}var n=window.onbeforeunload;window.onbeforeunload=t}(),l.globalTasks={},l.globalTasks.listenToWindowErrors=function(){!l.isDebugEnabled()&&window.addEventListener&&window.addEventListener("error",function(e){e.error&&l.reportErrorIfNeeded(e.error)})},l.config={},l.config.getIndexLocation=function(e){return"undefined"==typeof e.getContainerIndexLocation()?f.APPEND_CHILD_CODE:parseInt(e.getContainerIndexLocation(),10)},l.config.isParentAppend=function(e){return":parent"===e.getContainerIndexLocation()},l.DomAdapter={},l.DomAdapter.getContainingsElements=function(e,t,n){var i,r,o=s.utils.DomFinder,a=o.selector(t.getLinkSelector(),e),c=t.getContainerSelector();return"undefined"==typeof c||""===c||"self"==c?(i=o.getLinkElement(n,a),r=i):(r=o.getElementByType(e,t,f.Selectors.CONTAINER_SELECTOR),r&&(i=o.getLinkElementFromContainer(r,n,a,t))),r||l.log("no wrapper element was found."),i||l.log("no link element was found."),{wrapperElement:r,linkElement:i}},l.flags={},l.flags.isNewScraper=function(){return s.scrap&&s.scrap.ScraperService},l.isDebugEnabled=function(){return l.debugParamsOverrides(),e.debug},l.reportErrorIfNeeded=function(t){var n=/(mi-[\d\w_-]*\.js|mi\.js)/i;if(t&&t.stack&&n.test(t.stack)){l.log("Error found!");var i={ver:e.ver,message:t.message,agent:navigator.userAgent||navigator.vendor||window.opera,stack:t.stack};l.sendErrorReport(JSON.stringify(i))}},l.log=function(){if(e.debug===!0&&("string"==typeof arguments[0]&&(arguments[0]=l.getDateNow()-p+"ms >> "+arguments[0]),console.log.apply(console,arguments)),ee.isUserAgentDebug()){var t=l.cloneArray(arguments).join(" ");l.sendUserAgentLoggerReport(t)}},l.logWarning=function(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FFAD33;font-weight: bold;font-size:14px";l.log(t,n)},l.generateUID=function(){function e(){return Math.floor((1+Math.random())*l.getDateNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},l.timestampDiffInSec=function(e,t){return Math.floor((e-t)/1e3)},l.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);128>i?t+=String.fromCharCode(i):i>127&&2048>i?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var n,i,r,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(e=t(e);d<e.length;)n=e.charCodeAt(d++),i=e.charCodeAt(d++),r=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},l.timeRounder=function(e){return Math.round(10*e)/10},l.getComputedStyle=function(e){return l.cloneObject(window.getComputedStyle(e))},l.win_lose_focus=function(e,t){function n(){e.call(t,1)}function i(){e.call(t,0)}t&&(ee.isIE()?(window.onfocus=n,window.onblur=i):window.addEventListener?(window.addEventListener("focus",n,!1),window.addEventListener("blur",i,!1)):window.attachEvent&&(window.attachEvent("focus",n),window.attachEvent("blur",i)))},l.restore_style_property=function(e,t,n){var i=n[t];i?e.style[t]=n[t]:e.style.removeProperty(t)},l.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},l.setMediaElementSize=function(e,t,n){t=t||e.videoWidth||e.naturalWidth,n=n||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+n)},l.extractElementSize=function(e){var t=l.getComputedStyle(e),n=Math.round(parseFloat(t.width)),i=Math.round(parseFloat(t.height)),r="";return"auto"!==t.width&&"auto"!==t.height||(r="auto"),(t.width.indexOf("%")>-1||t.height.indexOf("%")>-1)&&(r="%"),{width:n,height:i,error:r}},l.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},l.ElementObjectFit=function(){function e(e,t,n){var i,r=e.parentNode;if(r&&(i=l.getMediaElementSize(e))){n=n||{};var o,a,s=n.origin||"0% 0%",c=l.getComputedStyle(t);if("100%"!==c.width||"100%"!==c.height){var u,d=i[0],p=i[1],h=parseFloat(c.width),g=parseFloat(c.height),f=g/p;h>d*f&&(f=h/d),u=(d*f-h)/2,f=Math.ceil(10*f)/10,o="scale("+f+")",e.style.transformOrigin=s,e.style.webkitTransformOrigin=s,e.style.msTransformOrigin=s,e.style.mozTransformOrigin=s,e.style.oTransformOrigin=s,e.style.transform=o,e.style.msTransform=o,e.style.mozTransform=o,e.style.webkitTransform=o,e.style.oTransform=o,e.style.width="auto",e.style.height="auto",e.style.maxWidth="none",e.style.maxHeight="none",e.style.left="-"+u+"px",a=e.style.borderRadius,0!=a&&(r.style.borderRadius=a,r.style.overflow="hidden")}}}function t(t,r,o){if(!ee.isObjectFitSupported()){var a;if(o=o||{},o[i])return void e(t,r,o[i]);a=o[n]?o[n]||t.style.objectFit:t.style.objectFit||"cover","cover"===a&&e(t,r)}}var n="object-fit",i="object-fit-polyfill";return{set:t}}(),l.getProtocol=function(){var e="https:"==document.location.protocol?"https":"http";return function(){return e}}(),l.setUrlProtocol=function(){return function(e){return 0===e.indexOf("http")?e:l.getProtocol()+"://"+e}}(),l.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},l.isFunction=function(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)},l.cloneArray=function(e){return Array.prototype.slice.call(e)},l.cloneObject=function(e){var t={};for(var n in e)if(l.isArray(e[n]))t[n]=l.cloneArray(e[n]);else if(null!==e[n])switch(typeof e[n]){case"boolean":case"number":case"string":case"undefined":t[n]=e[n];break;case"object":t[n]=l.cloneObject(e[n])}else t[n]=null;return t},l.extentObject=function(e,t){for(var n in e)if(null!==e[n]&&void 0!==e[n]||null===t[n])if(l.isArray(e[n]))t[n]=l.cloneArray(e[n]);else if(void 0!==t[n])switch(typeof e[n]){case"boolean":case"number":case"string":t[n]=e[n];break;case"object":t[n]=l.extentObject(e[n],t[n])}else t[n]=e[n];return t},l.debugParamsOverrides=function(t){if(t||!(Object.keys(e.debugParams).length>0)){var n=l.parseUrlDebugParams();e.debugParams=n,"undefined"!=typeof n[v.ENABLE_DEBUG]&&(e.debug="true"==n[v.ENABLE_DEBUG]),l.parseScriptDomain()}},l.parseUrlDebugParams=function(){var e=l.urls.getStructuredByUrl(k.getWindowLocationHref(),[f.UrlStructure.Search]),t={};if(""===e)return t;0===e.indexOf("?")&&(e=e.slice(1));for(var n,i,r=e.split("&"),o=/^qadt([\d\w]+)$/,a=0;a<r.length;a++)n=r[a].split("="),i=n[0],o.test(i)&&(i=i.replace(o,"$1"),t[i]=n[1]);return t},l.parseScriptDomain=function(){var t="snippet.minute.ly",n="d2d4r7w8.map2.ssl.hwcdn.net",i=l.getScriptHostname();e.debugParams[m.IS_PROCUTION]=i===t||i===n,e.debugParams[m.IS_PROCUTION]&&(i=""),e.debugParams[m.SCRIPT_HOSTNAME]=i},l.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),l.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n},l.ceil_style_value=function(){var e=/[0-9,\.]*/;return function(t,n){return n=n||0,Math.ceil(parseFloat(t)+n)+""+t.toString().replace(e,"")}}(),l.checkPotentialScraperUrls=function(){var t=null,n=null,i=$.getSessionStorageInstance();return function(){if(e.debugParams[v.IGNORE_REFERRERS])return!0;if(!i)return!0;if(t||(t=decodeURIComponent(i.getItem(f.LocalStorage.POTENTIAL))),!t)return!0;try{n=n||JSON.parse(t)}catch(r){return!0}if(!n||0===n.length)return!0;for(var o=l.urls.getStructuredByUrl(window.location.href),a=0;a<n.length;a++)if(n[a]==o)return!0;return!1}},l.scrapperWouldHaveBeenBlocked=function(){return!l.validateScraperReferrerURL()||!l.checkPotentialScraperUrls()},l.validateScraperURLForDelayedInternal=function(){return l.isCurrentUrlFilterValid(ae.getFilterScraper())&&!l.isApvExists()},l.validateScraperURL=function(){if(ee.isScraperEnabled())if(ae.getIsScrapOgTypeEnabled()&&!l.OgType.isArticle())l.log("** Scraper disabled by og:type not valid. **");else if(ae.isEnableNewScrapper())if(l.checkPotentialScraperUrls(),l.isCurrentUrlFilterValid(ae.getFilterScraper())){if(!l.isApvExists())return!0;l.log("** Scraper blocked by APV already exist. **")}else l.log("** Scraper blocked by Filter URL. **");else if(l.validateScraperReferrerURL())if(l.isCurrentUrlFilterValid(ae.getFilterScraper()))if(l.isApvExists())l.log("** Scraper blocked by APV already exist. **");else{if(l.checkPotentialScraperUrls())return!0;l.log("** Scraper blocked by no Potential Urls. **")}else l.log("** Scraper blocked by Filter URL. **");else l.log("** Scraper blocked by Referrer URL. **");else l.log("** Scraper disabled by configuration. **");return ne.getPlayerContent().disable(),ne.getPlayerContentDelayed().disable(),!1},l.OgType=function(){function e(){return!!r}function t(){return e()?(s=r.getAttribute("content"),a=0===s.indexOf("video"),o=a||0===s.indexOf("article")):void 0}function n(){return o}function i(){return a}var r=document.querySelector("meta[property='og:type'][content]"),o=!1,a=!1,s=null;return t(),{isExist:e,isArticle:n,isVideo:i}}(),l.isPlacementEnabled=function(){return"undefined"!=typeof e.debugParams[v.ACTIVE_ALL]?!0:l.isCurrentUrlFilterValid(ae.getFilterPlacements())},l.validateScraperReferrerURL=function(){if("undefined"!=typeof e.debugParams[v.IGNORE_REFERRERS])return!0;var t=ae.getReferrers(),n=l.urls.getReferrerUrl();if(0===t.length)return!0;for(var i,r=0;r<t.length;r++)if(i=new RegExp(t[r],"i"),i.test(n))return!0;return l.log("Referrer URL not match."),!1},l.isCurrentUrlFilterValid=function(e){return l.isUrlFilterValid(l.urls.getCurrentUrl(),e)},l.isUrlFilterValid=function(e,t){return l.isUrlMatchPattern(e,t.white)?!0:0!==t.white.length?!1:!l.isUrlMatchPattern(e,t.black)},l.isApvExists=function(){for(var e,t=l.urls.getStructuredByUrl(k.getWindowLocationHref()),n=0;n<le.getVideosCount();n++){e=le.getByIndex(n);var i=l.urls.getStructuredByUrl(e.getArticleUrl());if(i===t)return l.log("ContentScraper - video is already known! no need to update server! "+e.getArticleUrl()),!0}return!1},l.isUrlMatchPattern=function(e,t){for(var n,i=0;i<t.length;i++)if(n=new RegExp(t[i],"i"),null!==e.match(n))return!0;return!1},l["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},l.overrideObjectItems=function(e,t){for(var n in t)e.hasOwnProperty(n)&&(t[n]=e[n])},l.fadeout=function(e){var t=1,n=setInterval(function(){.1>=t&&(clearInterval(n),e.style.opacity=0),e.style.opacity=t,e.style.filter="alpha(opacity="+100*t+")",t-=.1*t},50)},l.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},l.createArrayFromDictinary=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},l.extractImageUrlFromStyle=function(){var e=/^url\("?([^"]+)"?\)$/i;return function(t){return t&&e.test(t)?t.replace(e,"$1"):null}}(),l.getIFrameWindow=function(e){try{var t=e.contentWindow,n=Object.keys(t);if(n.length>0)return t}catch(i){}return null},l.isElementHasSize=function(e){if(l.plugins.isPlugin())return!0;if(!e)return!1;var t=l.getComputedStyle(e),n=parseInt(t.width,10),i=parseInt(t.height,10);if(i>0&&n>0||"auto"===t.height&&"auto"===t.width)return!0;var r=e.getBoundingClientRect();return r.width>0&&r.height>0},l.plugins=function(){function e(){for(var e=[],t=[],n=0;n<r.length;n++){t=r[n].getIframeWindows();for(var i=0;i<t.length;i++)e.push(t[i])}return e}function t(){for(var e=0;e<r.length;e++)if(r[e].checkPlugin())return!0;return!1}function n(e){e&&r.push({checkPlugin:e.checkPlugin||function(){return!1},getIframeWindows:e.getIframeContentWindow||function(){return[]},addPlayEventListener:e.addPlayEventListener||function(){}})}function i(e,t,n){for(var i=0;i<r.length;i++)r[i].addPlayEventListener(e,t,n)}var r=[];return{addSpecialCheck:n,isPlugin:t,getIframeWindows:e,addPlayEventListener:i}}(),l.getProductByPlayMode=function(e){var t=f.config.PlayModes;switch(e){case t.InArticle:case t.BrightcovePlugin:return f.Emitter.PRODUCT_IN_ARTICLE}return f.Emitter.PRODUCT_APV},l.parseBool=function(e){return"true"===e||e===!0},l.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},l.getDateNow=function(){return(new Date).getTime()},l.trackMinuteGenesis=function(){h.add("MinGenesis*T"+(d-p))},l.getTrackerTiming=function(e){return e+"*T"+(l.getDateNow()-p)},l.getRequestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}},l.getCancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(){}},l.optimizely={},l.optimizely.trackEvent=function(e){ae.getIsOptimizelyEnabled()&&("undefined"==typeof window.optimizely&&(window.optimizely=[]),window.optimizely.push(["trackEvent",e]))},l.hasVideoViewEnabled=function(){return!!s.videoViews&&!!s.videoViews.VideoViewManager},l.adapters={},l.adapters.wrap=function(e,t,n){this.originalHandler=e[t];var i=this;e[t]=function(){return n.apply(i,arguments),i.originalHandler.apply(e,arguments)}},l.adapters.unWrap=function(e,t){"function"==typeof this.originalHandler&&(e[t]=this.originalHandler)},l.adapters.VirtualClickOrganizer=function(){function e(e){n[e.getId()]=!0}function t(t){return t.isApvEnabled()&&!n[t.getId()]?(e(t),!0):!1}var n={};return{isValid:t,validate:e}}(),function(){function e(e){function t(){return S}function n(){if(!h){var e=void 0;h=new XMLHttpRequest,f===l?g+="_.gif?"+y:(f=c,g+="_.gif",e=y),h.open(f,g,!0),v&&h.setRequestHeader(r,v),h.onload=i,h.onerror=p,h.ontimeout=d,h.timeout=m,h.send(e)}}function i(){h.status>=200&&h.status<300?E.dispatch():_.dispatch("XHR_Complete:"+h.status)}function d(){_.dispatch("timeout")}function p(){_.dispatch("error:"+h.status)}var h,g=e.url||"",f=e.method||l,v=f===l?o:a,m=e.timeout||5e3,y=e.data,E=new s.utils.Signal,_=new s.utils.Signal,S="XHR"+u++;return{getID:t,load:n,onComplete:E,onError:_,Methods:{GET:l,POST:c}}}function t(t,n){var i=new e(t),r=function(e){d[i.getID()]=void 0,i.onComplete.removeAll(),i.onError.removeAll(),n(e)};return d[i.getID()]=i,i.onComplete.addOnce(r),i.onError.addOnce(r),i.load(),i}function n(e,n){return e.method=l,t(e,n)}function i(e,n){return e.method=c,t(e,n)}var r="Content-Type",o="image/gif",a="application/text",l="get",c="post",u=0;s.utils=s.utils||{},s.utils.ajax=s.utils.ajax||{},s.utils.ajax.XHRRequest=e;var d={};s.utils.ajax.sendGetRequest=n,s.utils.ajax.sendPostRequest=i}();var S=function(){function e(e){n(f.Urls.Logger,e,f.ReportMethods.GIF)}function t(e){n(f.Urls.Error,e,f.ReportMethods.POST)}function n(e,t,n){if(!n&&U)return void d(e+"_.gif?"+t);n=n||ae.getReportMethod()||f.ReportMethods.GIF;var o=s.utils.ajax;switch(n){case f.ReportMethods.GIF:r(e,t);break;case f.ReportMethods.GET:o.sendGetRequest({url:e,data:t},i);break;case f.ReportMethods.POST:ae.getBeaconReportMethod()?navigator.sendBeacon(e+"_.gif",t):o.sendPostRequest({url:e,data:t},i)}}function i(e){e&&l.sendErrorReport("EmitterErrorContent:"+e)}function r(e,t){var n=new Image;n.onload=function(){o(this)},n.onerror=function(){l.sendErrorReport("EmitterErrorContent:NoTrace"),o(this)},n.src=e+"_.gif?"+t,document.body.appendChild(n)}function o(e){try{document.body.removeChild(e)}catch(t){}}function a(){var e=U.getItem(P);e=e?JSON.parse(e):[],M=e}function c(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({owner:i.owner,url:i.url,state:i.state,time:i.time,retry:i.retry})}return t}function u(){clonedList=c(M),U.setItem(P,JSON.stringify(clonedList)),M=null}function d(e){var t={owner:N,url:e,image:null,state:w,time:0,retry:-1};a(),p(t),M.push(t),u()}function p(e){e.image=h(e),e.time=l.getDateNow(),e.retry+=1,e.state=L,document.body.appendChild(e.image)}function h(e){var t=new Image;return t.onload=function(){g(e)},t.onerror=function(){v(e)},t.src=e.url,t}function g(e){a(),y(e),u()}function v(e){if(l.sendErrorReport("EmitterErrorContent:"+JSON.stringify(e)),e.retry===k)return a(),y(e),void u();var t=e.retry*V;setTimeout(function(){a(),m(e),u()},t)}function m(e){_(e),E(e),p(e),M.push(e)}function y(e){_(e),E(e)}function E(e){for(var t=-1,n=0;n<M.length;n++)e.url===M[n].url&&(t=n);t>-1&&M.splice(t,1)}function _(e){try{document.body.removeChild(e.image)}catch(t){}}function S(){a(),b(),u()}function b(){for(var e,t=0;t<M.length;t++)e=M[t],A(e)&&I(e)}function A(e){if(e.guid===N)return!0;var t=l.getDateNow()-e.time;return t>R?(e.guid=N,e.retry=-1,!0):!1}function I(e){var t=!1;switch(e.state){case w:case T:t=!0;break;case O:y(e);break;case L:var n=l.getDateNow()-e.time;n>C&&(t=!0)}t&&m(e)}var P="_minRTrs",w=0,L=1,T=2,O=3,C=2e4,R=35e3,D=5e3,V=5e3,k=20,N=l.generateUnique(),U=null,M=null,B=null;return U&&(B=new s.utils.Timer(D,S),B.start()),{send:n,sendLog:e,sendError:t}}(),b=function(){function e(e,t){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.right>n.right,a=i.left<n.left,s=i.top>=n.bottom,l=i.bottom<=n.top,c={state:r.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=r.HIDDEN,c):(a?c.percentage=(i.right-n.left)/i.width:o&&(c.percentage=(i.width-(i.right-n.right))/i.width),c.percentage>0&&c.percentage<1?c.state=r.ANALYTICS_VISIBLE:c.percentage<=0?c.state=r.HIDDEN:c.state=r.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,n){if(l.plugins.isPlugin())return{state:r.FULLY_VISIBLE,percentage:100};var i,a=100*o(t);return i=0===a?r.HIDDEN:100===a?r.FULLY_VISIBLE:r.ANALYTICS_VISIBLE,i!==r.HIDDEN&&n?e(t,n):{state:i,percentage:a}}function n(e,n){if(l.plugins.isPlugin())return!0;var i=t(e,n).state;return i!==r.HIDDEN}function i(e,n){return t(e,n).percentage}var r={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function n(e,t){return(t||window).getComputedStyle(e,null)}function i(e,t){return e.getPropertyValue(t)}function r(t,o){o||(o=n(t));var a=i(o,"display");if("none"===a)return!1;var s=t.parentNode;return e(s)?r(s):!0}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=n(e,t),a=i(o,"visibility");return"hidden"===a||"collapse"===a?!1:r(e,o)}function a(e,t){return!e||e.width<=0||e.height<=0?!1:e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width}return function(e,n){if(!e)return 0;var i=e.getBoundingClientRect(),r=t(n);if(!a(i,r)||!o(e,n))return 0;var s=0,l=0;return i.top>=0?s=Math.min(i.height,r.height-i.top):i.bottom>0&&(s=Math.min(r.height,i.bottom)),i.left>=0?l=Math.min(i.width,r.width-i.left):i.right>0&&(l=Math.min(r.width,i.right)),s*l/(i.height*i.width)}}();return{isElementVisible:n,getViewportState:t,getElementVisiblePercents:i,state:r}}(),A=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(l){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var p=c[d].split("="),h=p.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var g=p[0].replace(u,decodeURIComponent);if(h=n.read?n.read(h,g):n(h,g)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(l){}if(t===g){a=h;break}t||(a[g]=h)}catch(l){}}return a}}return i.setItem=i,i.getItem=function(e){return i(e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.removeItem=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i.isCookiesEnable=function(){var e=!1;try{i.setItem("_minTest","exist"),e=!!i.getItem("_minTest"),i.removeItem("_minTest","true")}catch(t){return!1}return e}(),i}return t(function(){})},I=function(e){function t(t){return i?localStorage:r?sessionStorage:t!==!1&&e.isCookiesEnable?e:null}function n(){return r?sessionStorage:i?localStorage:null}var i=function(){try{localStorage.setItem("_minTest","test value"),localStorage.removeItem("_minTest")}catch(e){return!1}return"undefined"!=typeof Storage}(),r=function(){try{sessionStorage.setItem("_minTest","test value"),sessionStorage.removeItem("_minTest")}catch(e){return!1}return!0}();return{getLocalStorageInstance:t,getSessionStorageInstance:n,isLocalStorageEnable:i,isSessionStorageEnable:r}},P=function(e,t){function n(e){return c[e]}function i(t,n){c[t]=n,c[p]=e.getDateNow(),g.setItem(u,JSON.stringify(c))}function r(t){var n=Math.abs(e.getDateNow()-t);return n>d}function o(){if(g=t.getLocalStorageInstance())if(c=JSON.parse(g.getItem(u)||"{}")){var n=Math.abs(e.getDateNow()-c[p]);n>d?(g.removeItem(u),a()):c[h]||i(h,e.generateUID())}else a()}function a(){var t={};t[h]=e.generateUID(),t[p]=e.getDateNow(),g.setItem(u,JSON.stringify(t)),c=t}function s(){c={},g.removeItem(u)}function l(){return n(h)}var c={},u="minSessionToken",d=18e5,p="__timestamp__",h="sessionId",g=null;return{get:n,set:i,isSessionTimeExpired:r,reset:s,init:o,getId:l}};!function(){var e={};s.utils=s.utils||{},s.utils.DomFinder=e;var t=[];e.AddSpecialElement=function(e){t.push({getPattern:e.getPattern,getElement:e.getElement})},e.getCustomSelectors=function(){return/(:parent|:contentDocument)/},e.getElementToReplace=function(t,n){return e.getElementByType(t,n,f.Selectors.PREVIEW_SELECTOR)},e.setElementAsReplaced=function(e){e.setAttribute("data-apv_replaced","true")},e.getIsElementReplaced=function(e){return"true"===e.getAttribute("data-apv_replaced")},e.getElementByType=function(t,n,i){return n.getSelectorByType(i)?e.getElementByVideoAndSelector(t,n.getSelectorByType(i)):null},e.getElementBySelector=function(t){if(!t)return null;var n=t.split(e.getCustomSelectors());return n.length>1?e.traverse(n.slice(0),document):e.querySelector(t)},e.getElementsClicks=function(t,n,i){for(var r,o,a=n.getSelectorByType(i).split(","),s=[],l=0;l<a.length;l++)r=e.selector(a[l],t),r&&(o=this.getElementBySelector(r),o&&s.push(o));return s.length>0?s:null},e.getElementByVideoAndSelector=function(t,n){for(var i,r,o=n.split(","),a=0;a<o.length;a++)if(i=e.selector(o[a],t),i&&(r=this.getElementBySelector(i)))return r;return null},e.traverse=function(t,n){if(null===n)return null;if(0===t.length)return n;var i=t.shift();if(""===i)return e.traverse(t,n);if(i.match(e.getCustomSelectors()))switch(i){case":parent":n=n.parentNode;break;case":contentDocument":n=n.contentDocument}else n=e.querySelector(i,n);return e.traverse(t,n)},e.querySelector=function(e,t){for(var n=(t||document).querySelectorAll(e),i=0;i<n.length;i++){var r=n[i];if(l.isElementHasSize(r))return r}return null},e.selector=function(e,n){if(!e||!n)return null;for(var i,r,o,a={},s=ae.getVideoDataSearch(),l=0;l<s.length;l++)a[s[l]]=n.getOriginData()[s[l]];for(var c in a){for(i=new RegExp("{"+c+"}","g"),r=0;r<t.length;r++)o=t[r],e.indexOf(o.getPattern())>-1&&(e=e.replace(i,o.getElement(a[c])));e=e.replace(i,a[c])}for(r=0;r<t.length;r++)o=t[r],e.indexOf(o.getPattern())>-1&&(e=e.replace(o.getPattern(),""));return e},e.changeSelectorAttributes=function(e,t){if(!e||arguments.length<=1)return e;for(var n,i=ae.getVideoDataSearch(),r=0;r<i.length;r++){var o=i[r];n=new RegExp("{"+o+"}"),e=e.replace(n,t)}return e},e.getLinkElement=function(e,t){for(var n=document.querySelectorAll(t),i=0;i<n.length;i++){var r=n[i];if(r.contains(e))return r}return null},e.getLinkElementFromContainer=function(e,t,n,i){return e.contains(t)||i.doesContainsIframe()?e.querySelector(n):void 0},e.getAttrBySelector=function(e){var t=/(?:\[([^=*$]+)[=*$]+'\{[^}]+}'])/gi,n=/^\[([^=*$]+)[^\n]+$/,i=e.match(t);return i&&0!==i.length?i[0].match(n)[1]:null}}();var w=function(e,t,n,i){function r(){t.parent.postMessage(o(),"*")}function o(){return JSON.stringify({origin:v,type:y.DATA_REQUEST,window_origin:t.location.origin})}function a(t){var n=d(t.data);n.type==y.DATA_REQUEST&&(e.log("got request from post message: "+t.data),s())}function s(){for(var t=e.plugins.getIframeWindows(),n=0;n<t.length;n++)t[n].postMessage(l(),"*")}function l(){return JSON.stringify({origin:v,type:y.DATA_RESPONSE,isTestGroup:m,window_origin:t.location.origin,href:t.location.href})}function c(){n||t.addEventListener("message",a)}function u(e){m=e,n?r():s()}function d(e){try{var t=JSON.parse(e);if(t.origin===v)return t}catch(n){}return{type:y.INVALID}}function p(e,t){var n=d(e.data);n.type==y.DATA_RESPONSE&&t(n)}function h(e){t.addEventListener("message",function(t){var n=d(t.data);n.type==y.MINUTE_REQUEST_FROM_IFRAME&&e(n)})}function g(e,t){e.addEventListener("message",function(e){p(e,t)})}function f(n){var i={origin:v,type:y.MINUTE_REQUEST_FROM_IFRAME,window_origin:t.location.origin};e.extend(i,n),e.log("********* sendToParent "+JSON.stringify(i)),t.parent.postMessage(JSON.stringify(i),"*")}var v="minute",m=null,y={DATA_REQUEST:"minuteDataRequest",DATA_RESPONSE:"minuteDataResponse",INVALID:"invalid",MINUTE_REQUEST_FROM_IFRAME:"minuteRequestFromIFrame"};return{broadcast:u,listen:c,addPostMessageListener:g,DataTypes:y,sendToParent:f,addParentListener:h}};!function(){function e(e,t,n){function i(){f||(f=new s.utils.Timer(p,o),f.setCounterLimit(d)),v=null,o(),f.start(),f.reset()}function r(){f.kill(),f=null,h.removeAll(),h=null,u=null}function o(){var e=l.extractElementSize(u);if(!e.error)return v?void(v.width!==e.width||v.height!==e.height?(v=e,f.reset(),h.dispatch()):f.getCounter()>=d&&g.dispatch()):void(v=e)}function a(){return h.add.bind(h)}function c(){return g}var u=e,d=t,p=n,h=new s.utils.Signal,g=new s.utils.Signal,f=null,v=null;return{start:i,addSizeChangedListener:a,addSizeChangeFailedListener:c,dispose:r}}s.utils=s.utils||{},s.utils.ElementSizeTracer=e}();var L=function(e,t,n,i,r){function o(){if(!e.shouldHideNativePlayIcon())return void n.log("Charmer: no need to hide native play button, set by config");var t=".IIV::-webkit-media-controls-play-button,.IIV::-webkit-media-controls-start-playback-button {opacity: 0;pointer-events: none;width: 5px;}",r=document.createElement("style");r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),i.getElementsByTagName("head")[0].appendChild(r)}function a(e){return n.log("Charmer: Init..."),l?u?void n.log("Charmer: Android 53+ - no need for package, native play"):c&&9==t.getiOSVersion()?void n.log("Charmer: iOS 9 shouldnt be charmer here, where is the gif?"):(o(),n.log("Charmer: iOS>=10 + feed apv = multiple apv's activating non native inline play $3=false"),void r(e,!1,!1)):void n.log("Charmer: Not mobile - no charmer needed")}s.utils=s.utils||{},s.utils.CharmerService=L;var l=t.isMobile(),c=(t.getiOSVersion()>=10,t.isSafari()),u=t.isAndroid();t.isiPad()&&t.getiOSVersion()>=9;return{start:a}},T=function(e,t,n){function i(e){var t,n,i=e.compatibility;switch(typeof i){case"undefined":return;case"string":i=JSON.parse(i)}V?(t=i.mobile||{},n=i.os||{},B.overrideObjectItems(n,M)):t=i.desktop||{},B.overrideObjectItems(t,U)}function r(){var e=F.match(/android\s*(\d+\.?\d*\.?\d*)/i);return e&&2===e.length?n.convertVersionToNumbers(e[1].split(".")):null}function o(e,t,n,i){var r=null;if(n&&e.match(n))return r;i=i||2;var o=e.match(t);return o&&(r=parseInt(o[i],10)),r}function a(e){return{firefox:function(){return o(e,/mozilla\/[\w\.]+.+rv\:.+gecko\/\d+.+(firefox)\/([\w\.]+)/i,W)},edge:function(){return o(e,/(edge)\/((\d+)?[\w\.]+)/i,W)},chrome:function(){return o(e,/(chrome)\/v?([\w\.]+)/i,W)},msie:function(){var t=o(e,/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i),n=o(e,/(?:ms|\()(ie)\s([\w\.]+)/i);return t||n},safari:function(){return o(e,/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,W,1)},crios:function(){return o(e,/(CriOS)\/v?([\w\.]+)/i,W,2)}}}function s(){var e,t=/(?:iPhone|iPod|iPad)/i;return t.test(F)?(e=F.match(/OS (\d+)_(\d+)_?(\d+)?/i),e?n.convertVersionToNumbers(e.slice(1,3)):null):null}function l(){var e,t;if(!V)return!1;if(e=r())return t=H.chrome(),C=t>=U.chrome||n.compare(e,M.android)>=0?t:0,O="chrome",R=U.chrome,!0;if(e=s()){var i=n.compare(e,M.ios)>=0;if(i){var o=H.crios();return o?(C=o,R=U.crios,O="crios"):(C=e[0],O="safari",R=U.safari),!0}}return!1}function c(){var e;for(var t in U)if(H[t]){if(e=H[t]())return C=e,O=t,R=U[t],!0}else B.log("Can't find vendor '"+t+"' version function in comparability");
return!1}function u(e){for(var t,n=e.userAgentDebugTime||[],i=0;i<n.length;i++)if(t=new RegExp(n[i],"i"),t.test(F))return void(k=!0);k=!1}function d(){"boolean"!=typeof V&&(V=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(F)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(F.substr(0,4)))}function p(e){i(e);var t=l();t||c(),u(e),N=F.indexOf("fban")>-1||F.indexOf("fbav")>-1}function h(){if(R>C)return!1;if(V){var e=r();if(e)return n.compare(e,M.android)>=0;if(e=s())return n.compare(e,M.ios)>=0}return!0}function g(){return/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(F)}function f(){return z}function v(){return G}function m(){return Y}function y(){if("undefined"!=typeof D)return D;var e={firefox:36,safari:7.1,chrome:31,crios:99};return D=!!e[O]&&C>=e[O]}function E(){return k}function _(){return N}function S(){return!z&&!G}function b(e){if(!e||!e.desktop)return!0;var t;for(var n in e.desktop)if(H[n]&&(t=H[n]()))return t>=e.desktop[n];return!0}function A(){return V}function I(){return A()?null==s()?0:s()[0]:0}function P(){return!!H.chrome()}function w(){return P()?H.chrome():null}function L(){return!!r()}function T(){return"iPad"==t.platform}var O,C,R,D,V,k,N,U={firefox:34,msie:9,edge:12,chrome:31,safari:9,crios:40},M={android:[4,4,4],ios:[9,0,0]},B=e,x=t,F=(x.userAgent||"").toLowerCase(),W=/opr|opera|Yandex|SeaMonkey|Maxthon|Avant|Deepnet|Comodo_Dragon|Dooble|Palemoon|Flock/i;d();var H=a(F),z=!!H.msie(),G=!!H.edge(),Y=!!H.firefox();return{init:p,isBrowserSupported:h,isSafari:g,isIE:f,isEdge:v,isFF:m,isObjectFitSupported:y,isUserAgentDebug:E,isUserAgentFacebook:_,isScraperEnabled:S,checkPlacement:b,isMobile:A,getiOSVersion:I,isChrome:P,getChromeVersion:w,isAndroid:L,isiPad:T}},O=function(e,t,n){function i(e,t,n,i,o){Ne=e,ze=n,Ue=i,Me=o,Be=t,xe=!0,r()}function r(){"undefined"==typeof Ne.disableMobileScrap?Ne.disableMobileScrap=!0:ke=Ne.disableMobileScrap=Ne.disableMobileScrap===!0||"true"==Ne.disableMobileScrap,Be.isMobile()?Ne.playMode=f.config.PlayModes.Viewport:Ne.playMode=Ne.playMode||f.config.PlayModes.Viewport,Ne.forceFlushAnalytics=t.parseBool(Ne.forceFlushAnalytics),"undefined"!=typeof Ne.allowedAnalytics&&(He=100*Math.random()<parseInt(Ne.allowedAnalytics)),Ne.urlStruct=Ne.urlStruct||[f.UrlStructure.Origin,f.UrlStructure.PathName],Ne.numberOfLoops=parseInt(Ne.numOfLoops||"0",10),Ne.enableOptimizely=t.parseBool(Ne.enableOptimizely),Ne.enableMobileVideo=t.parseBool(Ne.enableMobileVideo)||"true"===e.debugParams[v.FORCE_VIDEO],Ne.hideNativePlayIcon="undefined"==typeof Ne.hideNativePlayIcon||t.parseBool(Ne.hideNativePlayIcon),Ne.blockerCheck=t.parseBool(Ne.blockerCheck),Ne.beaconReportMethod=t.parseBool(Ne.beaconReportMethod)&&"undefined"!=typeof navigator.sendBeacon,Ne.loadMoreObservers=Ne.loadMoreObservers||[],Ne.definePlayers=Ne.definePlayers||"",o(),a(),_(),l(),Ne.videoDataSearch=Ne.videoDataSearch||["articleUrl","videoId"],p(),u(),h(),g(),m(),y(),E()}function o(){if(void 0!==Ue&&(Ne.disableScript=Ue),void 0===Ne.disableScript||Ne.disableScript===!1||"false"===Ne.disableScript)Ne.disableScript=!1;else if(Ne.disableScript===!0||"true"===Ne.disableScript)Ne.disableScript=!0;else{var e=parseInt(Ne.disableScript,10);Ne.disableScript=100*Math.random()<e}}function a(){if(void 0===Ne.errorReport||Ne.errorReport===!1||"false"===Ne.errorReport)Ne.errorReport=!1;else if(Ne.errorReport===!0||"true"===Ne.errorReport)Ne.errorReport=!0;else{var e=parseInt(Ne.errorReport,10);Ne.errorReport=Math.floor(100*Math.random())<e}}function l(){Ne.window=Ne.window||{},t.isArray(Ne.window)?c():(Ne.window.intervals=Ne.window.intervals||{},Ve=Ne.window.loadTimeout?parseInt(Ne.window.loadTimeout,10):2e3,Ne.window.topWindowReferrer=Ne.window.topWindowReferrer||!1)}function c(){for(var e=null,t=0;t<Ne.window.length;t++){var n=Ne.window[t],i=n.hasOwnProperty(f.WindowKeys.COMPATIBILITY);if(e||i){if(i&&Be.checkPlacement(n[f.WindowKeys.COMPATIBILITY])){e=n;break}}else e=n}e&&(Ne.window=e)}function u(){d(),t.isArray(Ne.pageFilterBlackList)?Ne.filter.scraper.black=Ne.pageFilterBlackList:"string"==typeof Ne.pageFilterBlackList&&Ne.filter.scraper.black.push(Ne.pageFilterBlackList),t.isArray(Ne.pageFilter)?Ne.filter.scraper.white=Ne.pageFilter:"string"==typeof Ne.pageFilter&&Ne.filter.scraper.white.push(Ne.pageFilter)}function d(){Ne.filters&&(Ne.filter=Ne.filters),Ne.filter&&(Ne.filter.mobile&&Be.isMobile()?Ne.filter=Ne.filter.mobile:Ne.filter.desktop&&!Be.isMobile()&&(Ne.filter=Ne.filter.desktop)),Ne.filter=Ne.filter||{},Ne.filter.scraper=Ne.filter.scraper||{},Ne.filter.scraper.white=Ne.filter.scraper.white||[],Ne.filter.scraper.black=Ne.filter.scraper.black||[],"undefined"==typeof Ne.filter.scraper.ogtype?Ne.filter.scraper.ogtype=!0:Ne.filter.scraper.ogtype="true"===Ne.filter.scraper.ogtype,Ne.filter.placements=Ne.filter.placements||{},Ne.filter.placements.white=Ne.filter.placements.white||[],Ne.filter.placements.black=Ne.filter.placements.black||[],Ne.filter.blocking=Ne.filter.blocking||{},Ne.filter.blocking.white=Ne.filter.blocking.white||[],Ne.filter.blocking.black=Ne.filter.blocking.black||[]}function p(){var e=Ne.rezList||["s","m","l","xl"],t=function(t){for(var n,i={},r=0;r<e.length;r++)n=t[e[r]],n&&(i[e[r]]=n);return i};Ne.rezGif||(Ne.rezGif={s:50,m:100,l:150}),Ne.rezVideo||(Ne.rezVideo={s:100,m:200,l:300}),Ne.rezGif=t(Ne.rezGif),Ne.rezVideo=t(Ne.rezVideo)}function h(){Ne.scraper=Ne.scraper||{},Ne.scraper.checkInternal=parseInt(Ne.scraper.checkInternal||"5000"),Ne.scraper.maxCheckCount=parseInt(Ne.scraper.maxCheckCount||"0"),Ne.scraper.maxFound=parseInt(Ne.scraper.maxFound||"1"),Ne.scraper.eventsInternal=parseInt(Ne.scraper.eventsInternal||"250"),Ne.scraper.players?t.isArray||(Ne.scraper.players=[Ne.scraper.players]):Ne.scraper.players=[]}function g(){Ne.pollVisibility=parseInt(Ne.pollVisibility||"0",10),Ne.viewportAnalytics=Ne.viewportAnalytics||{},Ne.viewportAnalytics.percentage=parseInt(Ne.viewportAnalytics.percentage||"50",10),n.isTestGroup()?Ne.viewportAnalytics.timeSpan=1:Ne.viewportAnalytics.timeSpan=parseInt(Ne.viewportAnalytics.timeSpan||"3000",10)}function m(){Ne.viewportPercentage=parseInt(Ne.viewportPercentage||"1",10)}function y(){Ne.effects=Ne.effects||{},Ne.effects.apvShowDelay=parseInt(Ne.effects.apvShowDelay||"500",10),Ne.effects.apvTransitionVideo=Ne.effects.apvTransitionVideo||"opacity 0.5s ease-out",Ne.effects.apvTransitionLogo=Ne.effects.apvTransitionLogo||"opacity 0.5s ease-out"}function E(){Ne.eagerApv=Ne.eagerApv||{},Ne.eagerApv.interval=parseInt(Ne.eagerApv.interval||"500",10),Ne.eagerApv.count=parseInt(Ne.eagerApv.count||"20",10)}function _(){Ne.placementService=Ne.placementService||{},Ne.placementService.wrapperCenterElement=Ne.placementService.wrapperCenterElement===!0||"true"===Ne.placementService.wrapperCenterElement,Ne.placementService.baseHeightPercent=parseFloat(Ne.placementService.baseHeightPercent||.5),Ne.placementService.baseThumbPx=parseInt(Ne.placementService.baseThumbPx||250),Ne.placementService.domRefresh=parseInt(Ne.placementService.domRefresh||5e3),void 0!==Me?Ne.placementService.enableBlockingDistance=Me:Ne.placementService.enableBlockingDistance=Ne.placementService.enableBlockingDistance===!0||"true"===Ne.placementService.enableBlockingDistance,void 0!==Me?Ne.placementService.debug="true"==Me:"production"!==ze?Ne.placementService.debug=Ne.placementService.debug===!0||"true"===Ne.placementService.debug:Ne.placementService.debug=!1,Ne.placementService.naRankPercent=parseInt(Ne.placementService.naRankPercent||80)}function S(){return Ne.playerIdPattern||Ne.brightcovePlayerPattern}function b(){return Ne.trackingFunnel}function A(){return Ne.blockerCheck}function I(){return xe}function P(){return We}function w(){return Ne.filter.scraper}function L(){return Ne.filter.placements}function T(){return Ne.filter.blocking}function O(){return Ne.window.scrollElement?document.querySelector(Ne.window.scrollElement):null}function C(){return Ne.window.intervals}function R(){return Ve}function D(){return Ne.window.topWindowReferrer}function V(){return Ne.rezVideo}function k(){return Ne.rezGif}function N(){return ke}function U(){return"true"===Ne.disableScript||Ne.disableScript===!0}function M(){return Ne.forceFlushAnalytics}function B(){return Fe?Fe:Fe=Ne.activePlayers&&t.isArray(Ne.activePlayers)?Ne.activePlayers:t.flags.isNewScraper()?s.scrap.ScrapEnumAll:f.Scraper.ALL_PLAYERS}function x(){return Ne.scraper.checkInternal}function F(){return Ne.scraper.maxCheckCount}function W(){return Ne.scraper.maxFound}function H(){return Ne.scraper.eventsInternal}function z(e){for(var t=Ne.scraper.players,n=0;n<t.length;n++)if(t[n].id===e)return JSON.parse(JSON.stringify(t[n]));return{id:e}}function G(){return Ne.placementService.naRankPercent}function Y(){return Ne.pollVisibility}function j(){return Ne.viewportAnalytics.percentage}function q(){return Ne.viewportAnalytics.timeSpan}function K(){return Ne.viewportPercentage}function J(){return Ne.placementService.baseHeightPercent<=10&&(Ne.placementService.baseHeightPercent=window.innerHeight*Ne.placementService.baseHeightPercent),Ne.placementService.baseHeightPercent}function Z(){return Ne.placementService.debug}function Q(){return Ne.placementService.wrapperCenterElement}function $(){return Ne.placementService.baseThumbPx}function X(){return Ne.playMode}function ee(){return He}function te(){return Ne.enableOptimizely}function ne(){return Ne.urlStruct}function ie(){return Ne.referrers||Ne.referrer||[]}function re(){return Ne.placementService.domRefresh}function oe(){var e=t.isCurrentUrlFilterValid(Ne.filter.blocking);return Ne.placementService.enableBlockingDistance&&e}function ae(){return Ne.videoDataSearch}function se(){return void 0!==e.test?parseInt(e.test):parseInt(Ne.testGroupSize||"10")}function le(){return Ne.effects.apvShowDelay}function ce(){return Ne.effects.apvTransitionVideo}function ue(){return Ne.effects.apvTransitionLogo}function de(){return t.parseBool(Ne.newScrap)}function pe(){return Ne.numberOfLoops}function he(){return Ne.playerSelector}function ge(){return"undefined"==typeof Ne.overrideAllPlacements?!0:t.parseBool(Ne.overrideAllPlacements)}function fe(){return"undefined"!=typeof Ne.cookieDomain}function ve(){return Ne.cookieDomain}function me(){return Ne.minimumVer?Ne.minimumVer:"0"}function ye(){return Ne.reportMethod}function Ee(){return Ne.beaconReportMethod}function _e(){return Ne.placements||{}}function Se(){return Ne.mobile_placements||{}}function be(){return Ne.tooltip||"Optimized by minute.ly"}function Ae(){return Ne.enableMobileVideo&&Be.isMobile()?Be.getiOSVersion()>=10&&Be.isSafari()?!0:!!(Be.isAndroid()&&Be.isChrome()&&Be.getChromeVersion()>=53):!1}function Ie(){return Ne.hideNativePlayIcon}function Pe(){return Ne.filter.scraper.ogtype}function we(){return Ne.loadMoreObservers}function Le(){return Ne.baseVideoUrl||""}function Te(){return Ne.errorReport}function Oe(){return!!Ne.definePlayers}function Ce(){return Ne.definePlayers}function Re(){return Ne.eagerApv.interval}function De(){return Ne.eagerApv.count}var Ve,ke=!0,Ne={},Ue=null,Me=null,Be=null,xe=!1,Fe=null,We=e._publisher,He=!0,ze=null;return{init:i,isReady:I,getPublisherId:P,isDisableMobileScrap:N,isDisableScript:U,getWindowLoadTimeout:R,getFilterScraper:w,getFilterPlacements:L,getFilterBlocking:T,getWindowScrollElement:O,getWindowIntervals:C,getIsTopWindowReferrerEnabled:D,getRezVideo:V,getRezGif:k,isForceFlushAnalytics:M,getActivePlayers:B,getScraperInternal:x,getScraperMaxCheckCount:F,getScraperMaxFound:W,getScraperEventsInternal:H,getScraperPlayerById:z,getVideoNaRankPercent:G,getViewportAnalyticsPercentage:j,getViewportAnalyticsTimeSpan:q,getViewportPercentage:K,getBaseHeightPercent:J,isPlacementsDebugEnabled:Z,isWrapperCenterElement:Q,getPollVisibility:Y,getDefaultPlayMode:X,getBaseThumbPx:$,getIsAnalyticsEnabled:ee,getIsOptimizelyEnabled:te,getUrlStructure:ne,getReferrers:ie,getPlacementDomRefresh:re,isBlockingDistanceEnabled:oe,getPlayerIdPattern:S,getVideoDataSearch:ae,getTestGroupSize:se,getEffectApvShowDelay:le,getEffectApvTransitionVideo:ce,getEffectApvTransitionLogo:ue,getTrackingFunnel:b,getIsBlockerCheck:A,isEnableNewScrapper:de,getNumberOfLoops:pe,getPlayerSelector:he,isOverrideAllPlacements:ge,isCookieDomain:fe,getCookieDomain:ve,getMinimumVer:me,getReportMethod:ye,getBeaconReportMethod:Ee,getPlacements:_e,getMobilePlacements:Se,getTooltip:be,shouldHideNativePlayIcon:Ie,getIsScrapOgTypeEnabled:Pe,getLoadMoreObservers:we,getBaseVideoUrl:Le,shouldEnableCharmer:Ae,getIsEnableErrorReport:Te,hasDefinePlayers:Oe,getDefinePlayers:Ce,getEagerApvInterval:Re,getEagerApvCount:De}},C=function(e,t,n){function i(n,i){function r(){return M.videoUrl?F&&""!=F?0==M.videoUrl.indexOf(F)?M.videoUrl:F+M.videoUrl:M.videoUrl:""}function a(){w=parseInt(M.id),L=M.videoId,O=o.isMobile()?!1:M.doesCollect===!0||"true"===M.doesCollect,T=parseInt(M.minVidId),C=r(),R=M.videoRatio?parseFloat(M.videoRatio):1.78,D=M.hltId?parseInt(M.hltId):null,V=M.articleUrl,k=M.force===!0||"true"===M.force,C?N="undefined"!=typeof M.rank?parseInt(M.rank):t.getVideoNaRankPercent():(k=!1,N=0)}function s(){return w}function l(){return!!C}function c(){return B}function u(){return x}function d(){return e.urls.getStructuredByUrlWithoutOrigin(V)}function p(){return O}function h(){return L}function g(){return T}function f(){return D}function v(){return C}function m(){return R}function y(){return k}function E(){return N}function _(e){N=e}function S(){return n}function b(e){U=e}function A(){return U}function I(e){return M[e]}function P(){return!(!D||!C)}var w,L,T,O,C,R,D,V,k,N,U,M=n,B=i,x=!0,F=t.getBaseVideoUrl();return a(),{getId:s,getArticleUrl:d,getDoesCollect:p,getPublisherVideoId:h,getVideoDBId:g,getHighlightId:f,getAPVUrl:v,getVideoRatio:m,isForcePlacement:y,getRank:E,setRank:_,getOriginData:S,hasAPV:l,setAbsoluteCenter:b,getAbsoluteCenter:A,getValueByKey:I,isApvEnabled:P,shouldPlayRegular:c,shouldPlayInArticle:u}}function r(e,t){return new i(e,t)}var o=n;return{create:r}},R=function(t,n,i,r){function o(e,t,n){e[t]?e[t].push(n):e[t]=[n]}function a(e){O.push(e),o(R,e.getArticleUrl(),e),o(R,e.getPublisherVideoId(),e)}function s(e,t){for(var n,i,o=0;o<e.length;o++)i=e[o],l(i.articleUrl)&&(n=r.create(i,t),a(n))}function l(e){return!!e&&"/"!==e&&t.isUrlFilterValid(e,n.getFilterScraper())}function c(n){w=n.videos||[],L=n.inArticle||[],A=e.debugParams[v.ACTIVE_ALL]||e.debugParams[v.MINUTE_UI_TEST],t.log("VideoManager total original video count: "+(w.length+L.length)),s(w,!0),s(L,!1),t.log("VideoManager total valid video count: "+O.length),h()}function u(e){var n=e.videos||[],i=e.inArticle||[];w=w.concat(n),L=L.concat(i),t.log("VideoManager append total original video count: "+(w.length+L.length)),s(n,!0),s(i,!1),t.log("VideoManager total valid video count: "+O.length),h(),J.dispatchEvent(f.Events.VIDEOS_UPDATE)}function d(){return T!==I}function p(){return A}function h(){var e,t,i,r=0,o=0;for(t=0;t<O.length;t++)i=O[t],i.getRank()===P||i.isForcePlacement()||(r+=i.getRank(),o++);for(e=r/o*(n.getVideoNaRankPercent()/100),t=0;t<O.length;t++)i=O[t],i.getRank()!==P||i.isForcePlacement()||i.setRank(e)}function g(){return O}function m(){return O.length}function y(e){return O[e]}function E(){return C}function _(){C++}function S(e,n){if(e){if("0"==e.indexOf("http")&&(e=t.urls.removeOrigin(e)),A)return b(e,n);var i=R[e];if(i||(i=R[t.urls.removeTrailingSlash(e)])){var r=t.urls.getStructuredByUrlWithoutOrigin(k.getWindowLocationHref());if(1==i.length){if(!n||n.getPlayMode()!=f.config.PlayModes.InArticle)return i[0];var o=i[0].getArticleUrl()==r;if(!n.shouldInArticleMatchUrl())return i[0];if(n.shouldInArticleMatchUrl()&&o)return i[0]}for(var a=0;a<i.length;a++)if(i[a].getArticleUrl()==r)return i[a]}}}function b(e,t){var n=e+t.getName(),i=e&&e.indexOf("/")>-1;if(!D[n]){var o={id:Math.floor(1e8*Math.random()+1),videoId:e,doesCollect:!1,videoUrl:"apv-static.minute.ly/videos/v-5e58bd81-5a30-4cc5-29911-86fe-f9c941bb412b-s61-65",articleUrl:i?e:"articleUrl",rank:0,hltId:Math.floor(1e8*Math.random()+1),videoRatio:1.78};D[n]=r.create(o,!0)}return D[n]}var A,I=-2,P=-999,w=[],L=[],T=I,O=[],C=0,R={},D={};return{init:c,isDebug:d,appendVideos:u,isActiveAll:p,getVideoList:g,getVideosCount:m,getByIndex:y,getApvCounter:E,increaseApvCounter:_,getVideoDataByKey:S}},D=function(e,t){function n(t,n){function i(){var e={};return e.styleOverrides={},e}function a(){for(var e=0;e<de.length;e++){var t=de[e];ce.styleOverrides[t]=ce.styleOverrides[t]||{active:{}}}}function s(){for(var e=0;e<de.length;e++){var t=de[e];if(!ce.styleOverrides[t].active){ce.styleOverrides[t].active=r.cloneObject(ce.styleOverrides[t]);var n=Object.keys(ce.styleOverrides[t].active);n.forEach(function(e){delete ce.styleOverrides[t][e]})}}}function l(){return ce.playMode==f.config.PlayModes.InArticle?"SPAN":"SVG"}function c(){ce.styleOverrides=r.extentObject(ce.styleOverrides,r.cloneObject(ue.styleOverrides)),a(),s(),ce.domAdapter=ce.domAdapter||ue.domAdapter,ce.lazyBackgroundSrc=ce.lazyBackgroundSrc||ue.lazyBackgroundSrc,ce.containerIndexLocation=ce.containerIndexLocation||ue.containerIndexLocation,ce.apvOrigin=ce.apvOrigin||ue.apvOrigin,ce.pollVisibility=ce.pollVisibility||ue.pollVisibility,ce.compatibility=ce.compatibility||ue.compatibility,ce.playMode=ce.playMode||ue.playMode||o.getDefaultPlayMode(),ce.logoType=l(),ce.observerSelectorTimeout=ce.observerSelectorTimeout||ue.observerSelectorTimeout||500,ce.safariWebkitFix=r.parseBool(ce.safariWebkitFix),ce.noClone=ce.noClone||ue.noClone||!1,ce.hasContainerOverlay=!(!ce.containerOverlay&&!ue.containerOverlay),ce.containerOverlay=ce.containerOverlay||ue.containerOverlay||"none",ce.isSingleClick=ce.isSingleClick||r.getProductByPlayMode(ce.playMode)===f.Emitter.PRODUCT_IN_ARTICLE,ce.isAttributeUrl=void 0===ce.isAttributeUrl||"true"===ce.isAttributeUrl||ce.isAttributeUrl===!0,ce.isForceFlush=ce.isForceFlush||ue.isForceFlush||o.isForceFlushAnalytics(),ce.sizeObserveEcho=parseInt(ce.sizeObserveEcho||"0",10),ce.sizeObserveDelay=parseInt(ce.sizeObserveDelay||"500",10),ce.sizeObserveDelay=parseInt(ce.sizeObserveDelay||"500",10),ce.viewportPercentage=parseInt(ce.viewportPercentage||ue.viewportPercentage||o.getViewportPercentage()||"1",10),ce.enableMobileVideo="undefined"==typeof ce.enableMobileVideo||e.parseBool(ce.enableMobileVideo),ce.containerFullSize=e.parseBool(ce.containerFullSize)}function u(e,t){return p(e,t).styles}function d(e){var t=ce.styleOverrides[e];if(t){var n=Object.keys(t);if(n.length>1)return!0}return!1}function p(e,t){if(!e)return r.logWarning("No type was sent for style overrides"),{};var n,i=ce.styleOverrides[e];if(i){var o=Object.keys(i);"MimicInheritETRClasses"===ce.domAdapter&&-1===o.indexOf(f.DEFAULT_MEDIAQUERY)&&r.logWarning("Make sure you set 'active' and sizes for different page media queries")}if(t&&i[t])n={styles:i[t]||{}};else{for(var a=f.DEFAULT_MEDIAQUERY,o=Object.keys(i),s=0;s<o.length;s++)if(o[s]!==f.DEFAULT_MEDIAQUERY){var l=parseInt(o[s]);l>window.innerWidth&&(a===f.DEFAULT_MEDIAQUERY||l<=parseInt(a))&&(a=o[s])}n={size:a,styles:i[a]||{}}}return n}function h(){return ce.id}function g(){return ce.selectors.preview}function v(){return ce.selectors.link}function m(){return ce.selectors.click}function y(){return ce.selectors.hover}function E(){return ce.selectors.carousel}function _(){return ce.selectors.container}function S(){return ce.selectors.observer}function b(){return ce.selectors.validator}function A(){return ce.selectors.indicators.placement}function I(){return ce.selectors.indicators.linkElement}function P(){return ce.priority}function w(){return ce.name}function L(e){return u(f.styleOverrides.CONTAINER,e)}function T(e){return u(f.styleOverrides.APV,e)}function O(e){return u(f.styleOverrides.CLONE,e)}function C(e){return u(f.styleOverrides.ELEMENT_TO_REPLACE,e)}function R(e){return u(f.styleOverrides.LOGO,e)}function D(e){return u(f.styleOverrides.CUSTOM,e)}function V(){return ce.domAdapter}function k(){return ce.playMode}function l(){return ce.logoType}function N(){return ce.lazyBackgroundSrc}function U(){return ce.containerIndexLocation}function M(){return ce.apvOrigin}function B(){return ce.pollVisibility}function x(){return ce.compatibility}function F(){return ce.isSingleClick}function W(){return ce.isAttributeUrl}function H(){return!!ce.selectors.indicators.placement}function z(e){return ce.selectors[e]}function G(){return ce.observerSelectorTimeout}function Y(){return ce.svgStyle}function j(){return ce.safariWebkitFix}function q(){return ce.additionalResizeEcho&&ce.additionalResizeEcho.echoTime||0}function K(){return ce.additionalResizeEcho&&ce.additionalResizeEcho.echoRepeat||0}function J(){return ce}function Z(){return ce.minuteLocation}function Q(){return ce.isForceFlush}function $(){return ce.noClone}function X(){return ce.hasContainerOverlay}function ee(){return ce.containerOverlay}function te(){return ce.sizeObserveEcho}function ne(){return ce.sizeObserveDelay}function ie(){if(ce.selectors.videoDataSelector)return!!ce.selectors.videoDataSelector.shouldInArticleMatchUrl;if("undefined"!=typeof ce.shouldInArticleMatchUrl)return e.parseBool(ie);var t=/.*'{(.*)}'.*/,n=ce.selectors.preview.replace(t,"$1");return"videoId"==n}function re(){return ce.selectors.preview.indexOf(":contentDocument")>-1}function oe(){return ce.viewportPercentage}function ae(){return ce.enableMobileVideo}function se(){return ce.containerFullSize}function le(){switch(k()){case f.config.PlayModes.BrightcovePlugin:case f.config.PlayModes.InArticle:return!0}return!1}var ce=t,ue=n||i(),de=["container","apv","clone","logo","elementToReplace","custom"];return c(),{getPlacementId:h,getPreviewSelector:g,getLinkSelector:v,getClickSelector:m,getHoverSelector:y,getCarouselSelector:E,getContainerSelector:_,getObserverSelector:S,getValidatorSelector:b,getIndicatorPlacement:A,getIndicatorLink:I,getContainerStyleOverride:L,getApvStyleOverride:T,getCloneStyleOverride:O,getElementToReplaceStyleOverride:C,getLogoStyleOverride:R,getCustomStyleOverride:D,getPriority:P,getName:w,getDomAdapter:V,getPlayMode:k,getLogoType:l,getLazyBackgroundSrc:N,getContainerIndexLocation:U,getApvOrigin:M,getPollVisibility:B,getCompatibility:x,getIsSingleClick:F,getIsAttributeUrl:W,hasIndicators:H,getSelectorByType:z,getActiveOverridesWithSize:p,getObserverSelectorTimeout:G,getSvgStyle:Y,getSafariWebkitFix:j,getAdditionalEchoTime:q,getAdditionalEchoRepeat:K,getPlacementDataForPrint:J,getMinuteLocation:Z,getIsForceFlush:Q,getNoClone:$,hasContainerOverlay:X,getContainerOverlayType:ee,getSizeObserveEcho:te,getSizeObserveDelay:ne,shouldInArticleMatchUrl:ie,doesContainsIframe:re,getViewportPercentage:oe,getIsEnableMobileVideo:ae,isContainerFullSize:se,isInArticle:le,hasMediaQueries:d}}function i(e,t){return new n(e,t)}var r=e,o=t;return{create:i}},V=function(e,t,n){function i(e){delete e.linkSelector,delete e.clickSelector,delete e.hoverSelector,delete e.carouselSelector,delete e.containerSelector,delete e.observerSelector,delete e.previewSelector,delete e.containerOverrides,delete e.apvStyleOverrides,delete e.cloneOverrides,delete e.elementToReplaceStyle,delete e.logoStyle,delete e.containerOverrides,delete e.elementToReplaceStyle,delete e.apvStyleOverrides,delete e.cloneOverrides,delete e.logoStyle}function r(){for(var e=0;e<y.length;e++){var t=y[e];t.selectors||(t.selectors={preview:t.previewSelector,link:t.linkSelector,click:t.clickSelector,hover:t.hoverSelector,carousel:t.carouselSelector,container:t.containerSelector,observer:t.observerSelector,validator:t.validator}),t.selectors.indicators||(t.indicators||(t.indicators={},t.indicators.placement=null,t.indicators.linkElement=null),t.selectors.indicators={placement:t.indicators.placement,linkElement:t.indicators.linkElement}),t.styleOverrides||(t.styleOverrides={container:t.containerOverrides,apv:t.apvStyleOverrides,clone:t.cloneOverrides,logo:t.logoStyle,elementToReplace:t.elementToReplaceStyle}),t.priority=S--,"AppendToElement"===t.domAdapter&&(t.minuteLocation=f.PlacementKeys.CHILD),i(t)}}function o(){for(var e,t=0;t<m.length;t++)e=m[t],e.parentId?(e.parentId=parseInt(e.parentId),_.push(e)):(e.inheritId&&(e.inheritId=parseInt(e.inheritId)),y.push(e))}function a(e){var t=e[f.PlacementKeys.COMPATIBILITY];return!(t&&!v.checkPlacement(t))}function s(e){if(e.inheritId){for(var t=0;t<_.length;t++){var n=_[t];if(n.parentId===e.inheritId)return n}h.log("No parent with parentId "+e.inheritId+" was found to be inherit from placement: "+e.name)}}function l(e){for(var t=e.getPlacements(),n=e.getMobilePlacements(),i=0;i<n.length;i++){for(var r=!1,o=0;o<t.length;o++)if(t[o].name==n[i].name){t[o]=n[i],r=!0;break}r||t.push(n[i])}return t}function c(e){var t,n;if(m=e.getPlacements()||[],v.isMobile()&&(m=e.isOverrideAllPlacements()?e.getMobilePlacements()||m:l(e)),0===m.length&&h.log("Configuration has NO PLACEMENTS!"),m.length){o(),r();for(var i=0;i<y.length;i++)n=y[i],a(n)&&(t=s(n),n.id="p"+E.length,E.push(g.create(n,t)))}}function u(){return E}function d(e){return E[e]}function p(){for(var e=[],t=0;t<E.length;t++){var n=E[t];e.push(n.getPlacementDataForPrint())}return e}var h=e,g=t,v=n,m=[],y=[],E=[],_=[],S=100;return{init:c,getAllPlacements:u,getAllPlacementsAsObject:p,getPlacementById:d}},k=function(){function t(){c(),u(),g(),o(),i()}function n(){return I}function i(){l.plugins.isPlugin()?re.addPostMessageListener(window,r.bind(this)):I=!0}function r(e){P||(l.log("got window location message. href="+e.href),y=e.href,I=!0,J.dispatchEvent(f.Events.WINDOW_SERVICE_READY),P=!0)}function o(){ae.getPollVisibility()&&setInterval(function(){h(f.Events.DomWindow.CHECK_VISIBILITY),b===window.innerWidth&&A===window.innerHeight||(b=window.innerWidth,A=window.innerHeight,h(f.Events.DomWindow.RESIZE))},ae.getPollVisibility())}function a(e,t){var n=new s.utils.Debounce(t,h,null,e);n.enableFilter(),d(f.config.WindowIntervals.ECHO_TIME)&&n.setEcho(d(f.config.WindowIntervals.ECHO_TIME),d(f.config.WindowIntervals.ECHO_REPEAT)),window.addEventListener(e,function(e){n.start()})}function c(){_=d(f.config.WindowIntervals.RESIZE)||_,a(f.Events.DomWindow.RESIZE,_)}function u(){var t=ae.getWindowScrollElement();E=d(f.config.WindowIntervals.SCROLL)||E,e.debugParams[v.DEBUG_VISIBILITY]&&(t?(l.log("DEBUG_VISIBILITY: scrollElem is set to:"),l.log(t)):l.log("DEBUG_VISIBILITY: scroll is calculated relative to window")),t?p(t):a(f.Events.DomWindow.SCROLL,E)}function d(e){var t=ae.getWindowIntervals()[e];return t?parseInt(t,10):null}function p(e){var t=0,n=5,i=200,r=0,o=setInterval(function(){return t++,t>=n?(clearInterval(o),void(o=0)):e?(setInterval(function(){e.scrollTop!==r&&(r=e.scrollTop,h(f.Events.DomWindow.SCROLL))},E),clearInterval(o),void(o=0)):void l.log("Attempt "+t+": No Scroll Element found!")},i)}function h(e,t){J.dispatchEvent(e,!!t)}function g(){S=d(f.config.WindowIntervals.URL)||S,S>0&&(y=window.location.href,setInterval(function(){y!==window.location.href&&(y=window.location.href,h(f.Events.DomWindow.URL_CHANGE))},S))}function m(){return y?y:window.location.href}var y,E=100,_=50,S=0,b=0,A=0,I=!1,P=!1;return{init:t,getWindowLocationHref:m,isReady:n}}(),N=function(e,t){function n(t){e(u+":"+t)}function i(){return d.getItem(l)||null}function r(e){d.setItem(l,e||"")}function o(e,t){var n=i();n||(n=u+":"),t&&n.indexOf(e)>-1||(n.length>0&&(n+=","),n+=e,r(n))}function a(){var t=i();t&&t.length>0&&(e(t),d.removeItem(l))}function s(e){return e?(u=c+e,d?(a(),{add:o,flush:a,forceFlush:n}):{add:function(){},flush:function(){},forceFlush:n}):{add:function(){},flush:function(){},forceFlush:function(){}}}var l="_minFlow",c="Flow",u=null,d=t.getLocalStorageInstance();return{get:s}},U=function(t){function n(e,t){t||(t={});var n=t.callbackName||"void",i=t.onSuccess||d,r=t.onTimeout||d,o=window.setTimeout(function(){window[n]=d,r()},u);window[n]=function(e){window.clearTimeout(o),i(e),window[n]=function(){}};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}function i(t){t.onSuccess=t.onSuccess||d,t.onTimeout=t.onTimeout||d;var i="jsonCallback",r=e._publisherDebugUrl||f.Urls.Configuration+"api/v1/web/configuration/"+e._publisher+".json?callback="+i;n(r,{callbackName:i,onTimeout:t.onTimeout,onSuccess:t.onSuccess})}function r(e){return("jsc"+l.b64EncodeUnicode(e||"JsonMinuteReadyNoURL")).replace(/=/g,"")}function o(e){return encodeURIComponent(l.b64EncodeUnicode(e))}function a(e){e.onSuccess=e.onSuccess||d,e.onTimeout=e.onTimeout||d;var t=v,i="";l.OgType.isArticle()&&(i=l.urls.getStructuredByUrlWithoutOrigin(k.getWindowLocationHref(),[f.UrlStructure.PathName]));var a=r(i),s={config:!0};i||(s.fallback=!0),t=t.replace(p,o(i)||g),t=t.replace(h,o(JSON.stringify(s))),t+="callback="+a,n(t,{callbackName:a,onTimeout:e.onTimeout,onSuccess:e.onSuccess})}function s(e){if("undefined"!=typeof e.pageUrl&&""!==e.pageUrl){e.onSuccess=e.onSuccess||d,e.onTimeout=e.onTimeout||d;var t=v,i=l.urls.getStructuredByUrlWithoutOrigin(e.pageUrl,ae.getUrlStructure()),a=r(i),s={config:!1};t=t.replace(p,o(i)),t=t.replace(h,o(JSON.stringify(s))),t+="callback="+a,n(t,{callbackName:a,onTimeout:e.onTimeout,onSuccess:e.onSuccess})}}function c(e){e.onSuccess=e.onSuccess||d,e.onTimeout=e.onTimeout||d;var t=v,i=r(),a={fallback:!0,config:!1};t=t.replace(p,g),t=t.replace(h,o(JSON.stringify(a))),t+="callback="+i,n(t,{callbackName:i,onTimeout:e.onTimeout,onSuccess:e.onSuccess})}var u=t.isMobile()?1e4:5e3,d=function(){},p="[article_url]",h="[params]",g="_",v=e._publisherDebugUrl||f.Urls.Configuration+"api/v2/web/configuration/"+e._publisher+"/"+p+"/"+h+".json?";return{loadAll:i,loadFirstArticle:a,loadNextArticle:s,loadVideosFallback:c}},M=function(e,t,n,i,r,o){function a(){return Math.floor(100*Math.random()+1)<=P}function s(){if(100===P)return!0;var e=100*P/(100-P);return 100*Math.random()<=e}function l(){var t="undefined"!=typeof o;if(t){if("clear"!==o)return S="true"==o,n.set(y,!0),c(s,E),void e.log("Force test group: "+S);e.log("Force RESET test group"),n.reset()}else;S=c(a,y),b=c(s,E),A||(e.log("** Is Test Group: "+S),A=!0)}function c(e,t){var i=n.get(t);return void 0===i&&(i=e(),n.set(t,i)),i}function u(n,r){P=n,w=r,w?(I=_.PENDING,e.log("** Snippet is plugin."),
i.addPostMessageListener(t,d)):(I=_.READY,l())}function d(t){I!=_.READY&&(e.log("plugin got message!"),S=Boolean(t.isTestGroup),I=_.READY,e.log("dispatching consts.Events.TEST_MODE_READY so the script can move on"),e.log("*** _isTestGroup:"+S),r.dispatchEvent(f.Events.TEST_MODE_READY,{isTestGroup:S}))}function p(){return I===_.READY}function h(){return S}function g(){return b}function v(){return S===!0?"1":"0"}function m(){S=null,b=null,A=!1,I=_.NONE,P=null,w=null,n.reset()}var y="_minTestModeEnabled",E="_minSubTestMode",_={NONE:0,PENDING:1,READY:2},S=null,b=null,A=!1,I=_.NONE,P=null,w=null;return{init:u,isReady:p,isTestGroup:h,getSubTestGroup:g,getGroupCode:v,reset:m}},B=function(e,t,n){function i(){return{time:e.getDateNow(),list:[]}}function r(){g=t.getLocalStorageInstance(),h=i(),a(),(void 0===h.list||0===h.list.length||n.isSessionTimeExpired(h.time))&&(h=i(),o())}function o(){var t;h.time=e.getDateNow(),d.test(h.time)||(h.time=(new Date).getTime()),t=JSON.stringify(h),t=t.replace(/"/g,""),g.setItem(p,t)}function a(){if(g){var e=g.getItem(p);h=e&&u.test(e)?s(e):h||i()}}function s(e){var t,n=e.replace("time:",'"time":').replace("list:",'"list":');return-1===n.indexOf("[]")&&(n=n.replace("[",'["').replace("]",'"]'),t=n.split("["),t[1]=t[1].replace(/,/g,'","'),n=t.join("[")),JSON.parse(n)}function l(t){function n(){return a(),h.list.indexOf(r)>-1}function i(){h.time=e.getDateNow(),-1===h.list.indexOf(r)&&h.list.push(r),o()}var r=t;return{isSent:n,setAnalyticState:i}}function c(e,t,n,i,r){var o=e.toString()+t+n+(i?"t":"f")+r;return new l(o)}var u=/\{(time)\:\d+,(list)\:\[([\d\w\,]*)+\]\}/,d=/^\d+$/,p="_minUsherData2",h={},g=null;return{get:c,init:r}};!function(){function e(){this._analytics={}}s.analytics=s.analytics||{};var t={IN_VIEWPORT_NOT_SENT:0,IN_VIEWPORT_SENT:1,OUT_OF_VIEWPORT:2};s.analytics.ViewportRestAnalyticsUsher=e,e.prototype.inViewport=function(e){var n=this._analytics[e];void 0===n?this._analytics[e]=t.IN_VIEWPORT_NOT_SENT:this._analytics[e]===t.OUT_OF_VIEWPORT&&(this._analytics[e]=t.IN_VIEWPORT_NOT_SENT)},e.prototype.outViewport=function(e){this._analytics[e]=t.OUT_OF_VIEWPORT},e.prototype.shouldSend=function(e){var n=this._analytics[e];return n===t.IN_VIEWPORT_NOT_SENT?(this._analytics[e]=t.IN_VIEWPORT_SENT,!0):!1}}();var x=function(t,n,i,r,o,a,s){function l(){return g?f.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:f.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}function c(e,t){v=n.isTestGroup(),g=i.isMobile(),m=r.getIsAnalyticsEnabled(),y=e,E=t}function u(e,n,i){if((m||i)&&(o.getAnalytics().push(e,n),n&&0==n.uniq)){var r=t.cloneObject(n);o.getUrlReporter().push(f.Emitter.VIEWPORT,r)}}function d(e,n,i){var r=a.get(e.getId(),n.placementFunction,f.Emitter.CLICK_TYPE_NONE,v,i);r.isSent()||(u(f.Emitter.ANALYTICS_EVENT,n),r.setAnalyticState(),y.add(t.getTrackerTiming(e.getPublisherVideoId()+":UImpression:"+i),!0))}function p(e){var i={test_mode:v,playMode:f.Analytics.PlayModes[r.getDefaultPlayMode()],sub_test_group:n.isTestGroup()?!1:n.getSubTestGroup(),source:l()};return t.extend(i,e)}function h(n,r){var o={id:n.getId(),highlight_id:n.getHighlightId(),comp:i.isBrowserSupported()?1:0,publisher:e._publisher,hadImpression:E.hadImpression(n.getPublisherVideoId()),hadImpressionSession:E.hadImpressionSession(n.getPublisherVideoId())};return t.extend(o,p(r))}var g,v=null,m=!1,y=null,E=null;return{init:c,pushAnalytics:u,sendSessionImpression:d,getAnalyticPayload:p,getAnalyticPayloadWithVideoData:h}},F=function(){function e(e,t){if(e&&t){i(e.getId());var n=l.getProductByPlayMode(t.getPlayMode()),r=fe.getAnalyticPayloadWithVideoData(e,{type:f.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:f.Placements.HOVER_IMPRESSION,uniq:!1,product:n,placement:t.getName()});l.optimizely.trackEvent(0==n?"click_apv":"click_ia"),ue.log(r),(n===f.Emitter.PRODUCT_IN_ARTICLE||t.getIsForceFlush())&&ue.sendLogsDueToInArticleClick()}}function t(e,t){var n=_e.hadImpression(e);if(n){var i=le.getVideoDataByKey(e);if(i&&i.isApvEnabled()){var r=fe.getAnalyticPayloadWithVideoData(i,{type:f.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:f.Placements.HOVER_IMPRESSION,uniq:!1,product:1,placement:t.getName()});ue.log(r),ue.sendLogsDueToInArticleClick()}}}function n(n,i){if(i.isInArticle()){if(l.hasVideoViewEnabled())return void J.addEventListener(f.Events.PLAYER_VIDEO_VIEW_CLICK,function(e){t(e.data.videoId,i)});var a=function(t){return function(n){e(n,t)}}(i);return void l.plugins.addPlayEventListener(a,i,n)}var s=[],c=!1;i.getClickSelector()?(s=y.getElementsClicks(n,i,f.Selectors.CLICK_SELECTOR)||[],c=!0):s=document.querySelectorAll(y.selector(i.getSelectorByType(f.Selectors.LINK_SELECTOR),n));for(var u=0;u<s.length;u++){var d=s[u];if(!(A.indexOf(d)>-1)){var p=function(t,n,i){return function(){e(t,n),n.getIsSingleClick()&&i.removeEventListener("click",p,c)}}(n,i,d);d.addEventListener("click",p,c),ee.isMobile()?r(n,d,i):o(n,d,i),A.push(d)}}}function i(e){E>0&&(clearTimeout(E),E=0,ue.removeLogDelayById(e))}function r(e,t,n){t.addEventListener("touchstart",function(){a(e,n)}),t.addEventListener("touchend",function(){u(e)})}function o(e,t,n){t.addEventListener?t.addEventListener("contextmenu",function(){p(e,n)}):t.attachEvent("oncontextmenu",function(){p(e,n)})}function a(e,t){_=setTimeout(function(){p(e,t)},v),b=setTimeout(function(){c(e)},m),S=l.getDateNow()}function c(e){b=0,u(e)}function u(e){if(0!==b&&(clearTimeout(b),b=0),0!==_){clearTimeout(_),_=0;var t=l.getDateNow()-S;v>t&&ue.removeLogDelayById(e.getId())}}function d(e){i(e),E=setTimeout(function(){i(e)},g)}function p(e,t){d(e.getId());var n=l.getProductByPlayMode(t.getPlayMode()),i=fe.getAnalyticPayloadWithVideoData(e,{type:f.Emitter.CONTEXT_MENU_OPEN_EVENT,placementFunction:f.Placements.HOVER_IMPRESSION,uniq:!1,product:n});ue.logDelay(i)}function h(){J.addEventListener(f.Events.APV_LOGO_CLICK,function(t){e(t.data.videoData,t.data.placement)})}var g=6e4,v=700,m=1500,y=s.utils.DomFinder,E=0,_=0,S=0,b=0,A=[];return{init:h,addLinkSelector:n}}(),W=function(){function t(){return ee.isMobile()?f.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:f.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}function n(n){var i={id:e._publisher,user_agent:navigator.userAgent,uniq:n,test_mode:oe.isTestGroup(),sub_test_group:oe.isTestGroup()?!1:oe.getSubTestGroup(),url:l.urls.getStructuredByUrl(k.getWindowLocationHref()),referrer:l.urls.getReferrerUrlWithOrigin(),source:t(),comp:ee.isBrowserSupported(),stor:!!$.getLocalStorageInstance(),script_time:r(d-p),config_time:r(l.getDateNow()-p)};ne.getUrlReporter().push(f.Emitter.URL_REPORT,l.cloneObject(i)),n&&(i.uniq=!1,ne.getUrlReporter().push(f.Emitter.URL_REPORT,i))}function i(){if(!l.plugins.isPlugin()){var e=!1;te.get(o)||(te.set(o,!0),e=!0),n(e)}}function r(e){return 100*Math.floor(e/100)}var o="minSessionAnalytics";return{sendUrlReport:i}}();!function(){function e(){this._observedElements=[],this._addObservedElementHandler=null,this._sentSubjects={}}var t="hadImpression";s.analytics=s.analytics||{};var n=new s.analytics.ViewportRestAnalyticsUsher;s.analytics.BaseAnalyticsService=e,e.prototype.register=function(e){this._addObservedElementHandler=this.addObservedElement.bind(this),e.getDomAdapter().addEventListener(f.Events.Element.READY,this._addObservedElementHandler)},e.prototype.unregister=function(e){e.getDomAdapter().removeEventListener(f.Events.Element.READY,this._addObservedElementHandler),this._addObservedElementHandler=null},e.prototype.addObservedElement=function(e){var t=e.data,n={id:t.videoData.getId(),videoData:t.videoData,elem:t.apvElement,placement:t.placement,hadImpression:!1};return this._observedElements.push(n),n},e.prototype.getUsher=function(){return n},e.prototype.findSubjectById=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t];if(n.id===e)return n}return null},e.prototype.sendImpression=function(e){e.hadImpression=!0,te.set(t,!0);var n=l.getProductByPlayMode(e.placement.getPlayMode()),i=fe.getAnalyticPayloadWithVideoData(e.videoData,{type:f.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:f.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:n,placement:e.placement.getName()}),r=""+e.videoData.getId()+n;this._sentSubjects[r]!==!0&&(this._sentSubjects[r]=!0,F.addLinkSelector(e.videoData,e.placement),fe.pushAnalytics(f.Emitter.ANALYTICS_EVENT,i),h.add(l.getTrackerTiming(e.videoData.getPublisherVideoId()+":AImpression:"+l.getProductByPlayMode(e.placement.getPlayMode()))))},e.prototype.sendSessionImpression=function(e){var t=l.getProductByPlayMode(e.placement.getPlayMode()),n=fe.getAnalyticPayloadWithVideoData(e.videoData,{type:f.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:f.Placements.VIEWPORT_IMPRESSION,uniq:!0,product:t,placement:e.placement.getName()});fe.sendSessionImpression(e.videoData,n,t)},e.prototype.hadImpression=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t],i=n.videoData.getPublisherVideoId()==e;if(i&&n.hadImpression&&n.placement.isInArticle())return!0}return!1},e.prototype.hadImpressionSession=function(e){return l.parseBool(te.get(t))}}(),function(){function e(){e.__superCtor__.call(this),this._handleMouseEnterHandler=null}l["extends"](e,s.analytics.BaseAnalyticsService),s.analytics.SemiHoverAnalyticsService=e,e.prototype.register=function(t){e.__super__.register.call(this,t),this._handleMouseEnterHandler=this.handleMouseEnter.bind(this),t.getDomAdapter().addEventListener(f.Events.Element.MOUSE_ENTER,this._handleMouseEnterHandler)},e.prototype.unregister=function(t){e.__super__.unregister.call(this,t),t.getDomAdapter().removeEventListener(f.Events.Element.MOUSE_ENTER,this._handleMouseEnterHandler),this._handleMouseEnterHandler=null},e.prototype.addObservedElement=function(t){var n=e.__super__.addObservedElement.call(this,t);return n.sent=!1,n},e.prototype.handleMouseEnter=function(e){var t=e.data,n=t.videoData.getId(),i=this.findSubjectById(n);i.sent||(this.getUsher().inViewport(n),this.getUsher().shouldSend(n)&&this.sendSessionImpression(t),this.sendImpression(t),i.sent=!0)},e.prototype.init=function(){}}(),function(){function e(){e.__superCtor__.call(this)}l["extends"](e,s.analytics.SemiHoverAnalyticsService),s.analytics.HoverAnalyticsService=e,e.prototype.addObservedElement=function(t){var n=e.__super__.addObservedElement.call(this,t);return n.debounce=new s.utils.Debounce(f.HOVER_IMPRESSION_DELAY,this.handleElementMouseDelay,this,n),n},e.prototype.handleMouseEnter=function(e){var t=e.data,n=t.videoData.getId(),i=this.findSubjectById(n);return i.debounce.isRunning()?void i.debounce.start():(this.getUsher().inViewport(n),this.getUsher().shouldSend(n)&&this.sendSessionImpression(t),this.sendImpression(t),void i.debounce.start())},e.prototype.handleElementMouseDelay=function(e){this.getUsher().outViewport(e.id)},e.prototype.init=function(){}}(),function(){function e(){e.__superCtor__.call(this),this._updateCarouselElementHandler=null,this._notifyVisibleHandler=null,this._notifyVisibleTimeoutHandler=null}var t,n,i={INIT:0,IN_VIEWPORT:1,OUT_VIEWPORT:2,DONE:3},r={};l["extends"](e,s.analytics.BaseAnalyticsService),s.analytics.ViewportAnalyticsService=e,e.prototype.init=function(){var e=this;t=ae.getViewportAnalyticsTimeSpan(),n=ae.getViewportAnalyticsPercentage(),J.addEventListener(f.Events.DomWindow.RESIZE,function(){e._debounceStartAll()}),J.addEventListener(f.Events.DomWindow.SCROLL,function(){e._debounceStartAll()}),J.addEventListener(f.Events.DomWindow.URL_CHANGE,function(){e._debounceStartAll()}),window.addEventListener("load",function(){e._debounceStartAll()})},e.prototype.register=function(t){e.__super__.register.call(this,t),r[t.getVideoData().getId()]=!1,this._updateCarouselElementHandler=this.updateCarouselElement.bind(this),this._notifyVisibleHandler=this.notifyVisible.bind(this),this._notifyVisibleTimeoutHandler=this.notifyVisibleTimeout.bind(this),t.getDomAdapter().addEventListener(f.Events.Element.UPDATE_CAROUSEL_ELEMENT,this._updateCarouselElementHandler),t.getDomAdapter().addEventListener(f.Events.Element.ANALYTICS_VISIBLE,this._notifyVisibleHandler),t.getDomAdapter().addEventListener(f.Events.Element.MUTANT,this._notifyVisibleTimeoutHandler)},e.prototype.unregister=function(t){e.__super__.unregister.call(this,t),t.getDomAdapter().removeEventListener(f.Events.Element.UPDATE_CAROUSEL_ELEMENT,this._updateCarouselElementHandler),t.getDomAdapter().removeEventListener(f.Events.Element.ANALYTICS_VISIBLE,this._notifyVisibleHandler),t.getDomAdapter().removeEventListener(f.Events.Element.MUTANT,this._notifyVisibleTimeoutHandler),this._updateCarouselElementHandler=null,this._notifyVisibleHandler=null,this._notifyVisibleTimeoutHandler=null},e.prototype.addObservedElement=function(n){var r=e.__super__.addObservedElement.call(this,n),o=n.data;return r.carouselElement=o.carouselElement,r.inViewport=l.getDateNow(),r.state=i.INIT,r.debounce=new s.utils.Debounce(t,this._handleObservedElementDebounce,this,r),r.debounce.enableFilter(),r},e.prototype.updateCarouselElement=function(e){var t=e.data,n=this.findSubjectById(t.videoData.getId());n&&(n.carouselElement=t.carouselElement)},e.prototype._debounceStartAll=function(){for(var e=0;e<this._observedElements.length;e++){var t=this._observedElements[e];t.debounce.start()}},e.prototype.notifyVisible=function(e){for(var t=e.data.videoData,n=0;n<this._observedElements.length;n++){var i=this._observedElements[n];if(i.videoData===t)return void i.debounce.start()}},e.prototype.notifyVisibleTimeout=function(e){var t=this;setTimeout(function(){t.notifyVisible(e)},e.data.timeout)},e.prototype._handleObservedElementDebounce=function(e){this.doUpdate(e),t>0&&setTimeout(this.doUpdate.bind(this,e),t)},e.prototype.doUpdate=function(e){if(!r[e.videoData.getId()]){var t=b.getViewportState(e.elem,e.carouselElement),o=t.percentage>=n;o?this._handleVisible(e):(e.state=i.OUT_VIEWPORT,this._outViewport(e.videoData))}},e.prototype._handleVisible=function(e){switch(e.state){case i.IN_VIEWPORT:var n=l.getDateNow()-e.inViewport;n>t&&(this._inViewport(e),e.state=i.DONE,r[e.videoData.getId()]=!0);break;case i.INIT:case i.OUT_VIEWPORT:e.state=i.IN_VIEWPORT,e.inViewport=l.getDateNow()}},e.prototype._inViewport=function(e){this.getUsher().inViewport(e.videoData.getId()),this.getUsher().shouldSend(e.videoData.getId())&&s.analytics.delayImpression(e,this.sendImpression.bind(this)),s.analytics.delayImpression(e,this.sendSessionImpression.bind(this))},e.prototype._outViewport=function(e){this.getUsher().outViewport(e.getId())}}(),function(){function e(){function e(e){for(var n in e)i[n]||(i[n]=e[n]);t()}function t(){var e={},t=!1;for(var o in i)r[o]||(e[o]=i[o],t=!0);t&&n(e)}function n(e){var t,n;for(var i in e)e[i]&&(t=e[i],n=fe.getAnalyticPayloadWithVideoData(t.getVideoData(),{type:f.Emitter.ANALYTICS_BLOCKING_DISTANCE_POTENTIAL}),o.push(f.Emitter.ANALYTICS_EVENT,n),r[i]=t)}var i={},r={},o=ne.getAnalytics();return{addPotentialAPVs:e}}s.analytics=s.analytics||{},s.analytics.BlockingDistanceAnalytics=e}();var H=function(t,n,i,r,o,a,s){function l(a){var s;if(1===arguments.length?s=a:2===arguments.length&&(s={url:arguments[0],videoId:arguments[1],counter:u,hadImpression:!1}),s&&s.videoId&&s.url&&"number"==typeof s.counter){var l={url:s.url,vid:s.videoId,test_mode:i.getGroupCode(),group:r.get(f.GROUP_42),comp:o.isBrowserSupported()?1:0,sub_test_group:i.isTestGroup()?!1:i.getSubTestGroup(),source:o.isMobile()?f.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:f.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP,publisher:e._publisher,hadImpression:s.hadImpression,hadImpressionSession:d.hadImpressionSession(s.videoId),counter:s.counter};u+=1,n.getVideoViewsReporter().push(f.Emitter.VIDEO_VIEWS,l),t.log("--SEND VIDEO VIEW ANALYTICS--"),p.add(t.getTrackerTiming("Sent42:"+s.videoId))}}function c(e,t){p=e,d=t}var u=0,d=null,p={add:function(){}};return{sendVideoView:l,init:c}},z=function(){function e(){return JSON.parse(r.getItem(s)||"{}")}function t(e,t){p[e]=t;var n=JSON.stringify(p);r.setItem(s,n)}function n(e,t,n,i){var r=t.exec(e);if(a.isArray(r)){var o=r[1].indexOf(n)>-1;if(o){var s=r[1].substring(n.length),l=r[2]?r[2]:void 0;i(s,l)}}}function i(e,t,n){return new h(e,t,n)}var r=null,o=null,a=null,s="__mff__",l="+mff",c="-mff",u=/[https?:\/\/]?.*#(\+\w+)=(.*)/g,d=/[https?:\/\/]?.*#(-\w+)/g,p={},h=function(i,s,h){r=s.getLocalStorageInstance(),r&&(o=h,a=i,p=e(),n(o.hash,u,l,function(e,n){t(e,n)}),n(o.hash,d,c,function(e){t(e,void 0)}))};return h.prototype.get=function(e){return p[e]},h.prototype.CONSTS={DISABLE_VERSION:"disableVersion"},{create:i}}();!function(){s.analytics=s.analytics||{},s.analytics.delayImpression=function(e,t){function n(){var e=null;return"undefined"!=typeof OO&&OO&&OO.__internal&&OO.__internal.players&&Object.keys(OO.__internal.players).length>0&&(e=OO.__internal.players),e}function i(){s=n()||{},o=Object.keys(s),o.forEach(function(t){s[t].embedCode==e.videoData.getPublisherVideoId()&&(a=s[t],clearInterval(l),r())})}function r(){1==a.playbackReady?t(e):a.mb.subscribe("*","delayedImp",function(n){"playbackReady"==n&&(t(e),a.mb.unsubscribe("*","delayedImp"))})}if(e.placement.getPlayMode()!=f.config.PlayModes.InArticle||0==ee.isMobile())return void t(e);var o,a,s={},l=setInterval(i,500)}}(),function(){function e(){e.__superCtor__.call(this),this.ATTR_MEDIA_SIZE="data-media_file_size",this.mediaHeightIndex="",this.lastMediaHeightIndex="",this._apvElement=null}s.apv=s.apv||{},s.apv.players=s.apv.players||{},l["extends"](e,y),s.apv.players.ApvPlayerBase=e,e.prototype.init=function(e,t,n){var i=this;this.elementToReplace=e,this._videoData=t,this._placement=n,this.displayType=l.getComputedStyle(this.elementToReplace).display,oe.isTestGroup()||J.addEventListener(f.Events.DomWindow.RESIZE,function(){i.updateMediaSources(),l.ElementObjectFit.set(i.getApvElement(),e)}),this.mediaHeightIndex=this.getNearestSize(this.elementToReplace),this.lastMediaHeightIndex=this.mediaHeightIndex},e.prototype.setOriginalImage=function(e){},e.prototype.play=function(){},e.prototype.charmerPlay=function(){},e.prototype.setAutoplay=function(){},e.prototype.pause=function(){},e.prototype.isPaused=function(){},e.prototype.sendEventPlaying=function(){l.log("APV Playing: "+this._videoData.getId()),this.dispatchEvent(f.Events.Players.PLAYING)},e.prototype.sendEventPaused=function(){l.log("APV Paused: "+this._videoData.getId()),this.dispatchEvent(f.Events.Players.PAUSED)},e.prototype.getApvElement=function(){return this._apvElement},e.prototype.getSizeData=function(){return{}},e.prototype.getStyle=function(e){return this._apvElement?this._apvElement.style[e]:null},e.prototype.setStyles=function(e){if(this._apvElement)for(var t in e)this._apvElement.style[t]=e[t]},e.prototype.getElementAttribute=function(e){return this._apvElement?this._apvElement.getAttribute(e):null},e.prototype.setElementAttribute=function(e,t){this._apvElement&&this._apvElement.setAttribute(e,t)},e.prototype.getNearestSize=function(e){var t,n,i,r="m",o=l.extractElementSize(e),a=this.getSizeData();if(!o.width||!o.height)return a[r]?r:Object.keys(a)[0];if(n=Math.ceil(o.width/o.height*100)/100,t=this._videoData.getVideoRatio(),o.width*=.9,o.height*=.9,!t||t>n){for(i in a)if(a.hasOwnProperty(i)&&a[i]>=o.height)return i}else{var s;for(i in a)if(a.hasOwnProperty(i)&&(s=a[i]*t,s>=o.width))return i}return i||"R"},e.prototype.getFullVideoUrl=function(e,t){var n=this._videoData.getAPVUrl()+this.mediaHeightIndex+(t||"")+"."+e;for(var i in f.APV)n=n.replace(f.APV[i].source,f.APV[i].target);return l.setUrlProtocol(n)},e.prototype.getValidHeightElement=function(){return this._apvElement.clientHeight>=20?this._apvElement:this.elementToReplace},e.prototype.updateMediaSources=function(){var e=this.getNearestSize(this.getValidHeightElement()),t=1*this._apvElement.getAttribute(this.ATTR_MEDIA_SIZE),n=this.getSizeData()[e];t>=n||(this.mediaHeightIndex=e,this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,n),l.log("update video size! (new size: "+this.mediaHeightIndex+" new: "+n+", old:"+t+" )"))},e.prototype.isShow=function(){return!0},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.handleMediaMetadataLoaded=function(){l.setMediaElementSize(this.getApvElement()),l.ElementObjectFit.set(this.getApvElement(),this.elementToReplace,this._placement.getApvStyleOverride())},e.prototype.updateSize=function(){}}(),function(){function e(){e.__superCtor__.call(this),this.SUPPORTED_TYPES=["mp4"],this._handleVideoEvent_CanPlayThrough=null,this._rezVideo=null,this.charmerActivated=!1}s.apv=s.apv||{},s.apv.players=s.apv.players||{},l["extends"](e,s.apv.players.ApvPlayerBase),s.apv.players.ApvVideoPlayer=e,e.States={STATE_HAVE_NOTHING:0,STATE_HAVE_METADATA:1,STATE_HAVE_CURRENT_DATA:2,STATE_HAVE_FUTURE_DATA:3,STATE_HAVE_ENOUGH_DATA:4},e.prototype.init=function(t,n,i){e.__super__.init.call(this,t,n,i),this._apvElement=document.createElement("video"),this._apvElement.setAttribute("minVideoID",this._videoData.getId()),this._apvElement.setAttribute("autoplay",""),ee.isMobile()&&(this._apvElement.setAttribute("muted",""),this._apvElement.volume=0),ee.isFF()&&(this._apvElement.volume=0),this._apvElement.setAttribute("playsinline",""),this._apvElement.setAttribute("webkit-playsinline",""),this.setVideoLoops(),this._apvElement.style.transition=ae.getEffectApvTransitionVideo(),this._apvElement.style.opacity=0,this.attachVideoEvents(),this.buildVideoSources(),me.start(this._apvElement)},e.prototype.setVideoLoops=function(){try{this._apvElement.setAttribute("loop","")}catch(e){}},e.prototype.setAutoplay=function(){try{this._apvElement.setAttribute("autoplay","")}catch(e){}},e.prototype.buildVideoSources=function(){for(var e=0;e<this.SUPPORTED_TYPES.length;e++){var t=document.createElement("source");t.src=this.getFullVideoUrl(this.SUPPORTED_TYPES[e]),this._apvElement.appendChild(t)}this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,ae.getRezVideo()[this.mediaHeightIndex])},e.prototype.attachVideoEvents=function(){var e=this,t=function(e){return e.stopImmediatePropagation(),!1};this._apvElement.addEventListener("loadedmetadata",function(){e.dispatchEvent("loadedmetadata"),e.handleMediaMetadataLoaded()}),this._apvElement.addEventListener("play",function(n){return e.handleVideoEvent_Play(),t(n)}),this._apvElement.addEventListener("pause",function(n){return e.handleVideoEvent_Pause(),t(n)}),this._apvElement.addEventListener("error",function(n){return e.handleVideoEvent_Error(),t(n)}),this._apvElement.addEventListener("ended",function(n){return e.handleVideoEvent_Ended(),t(n)}),this._apvElement.addEventListener("timeupdate",t),this._apvElement.addEventListener("playing",t),this._apvElement.addEventListener("waiting",t),this._apvElement.addEventListener("load",t),this._apvElement.addEventListener("progress",t),this._apvElement.addEventListener("durationchange",t);var n=function(){e.dispatchEvent(f.Events.Players.LOADED),e._apvElement.removeEventListener("canplaythrough",n)};this._apvElement.addEventListener("canplaythrough",n)},e.prototype.handleVideoEvent_Play=function(){this._apvElement.style.display=this.displayType,this.dispatchEvent(f.Events.Players.PLAYING),l.log("playing video for article "+this._videoData.getArticleUrl())},e.prototype.handleVideoEvent_Pause=function(){this.shouldPlay===!0?this._apvElement.play():this.sendEventPaused()},e.prototype.handleVideoEvent_Ended=function(){this.dispatchEvent("ended"),l.log("video ended for article "+this._videoData.getArticleUrl())},e.prototype.handleVideoEvent_Error=function(){this.dispatchEvent("error"),l.log("Browser cannot play video!")},e.prototype.setOriginalImage=function(e){this._apvElement&&e&&l.urls.isImageUrl(e)&&this._apvElement.setAttribute("poster",e)},e.prototype.play=function(){this.shouldPlay=!0,this._apvElement.readyState===e.States.STATE_HAVE_ENOUGH_DATA?(this.charmerActivated||(this.charmerActivated=!0),this._apvElement.play(),this.sendEventPlaying()):(this._handleVideoEvent_CanPlayThrough=this._handleVideoEvent_CanPlayThrough||this.handleVideoEvent_CanPlayThrough.bind(this),this._apvElement.addEventListener("canplaythrough",this._handleVideoEvent_CanPlayThrough))},e.prototype.charmerPlay=function(){this._apvElement.play()},e.prototype.pause=function(){this.shouldPlay=!1,this._apvElement.pause()},e.prototype.isShow=function(){return this._apvElement.style.opacity>0},e.prototype.show=function(){this._apvElement.style.opacity=1},e.prototype.hide=function(){this._apvElement.style.opacity=0},e.prototype.getSizeData=function(){return this._rezVideo?this._rezVideo:(this._rezVideo=l.cloneObject(ae.getRezVideo()),this._placement.getApvOrigin()===!0&&(this._rezVideo[f.APV.Origin.source]=f.APV.Origin.size),this._rezVideo)},e.prototype.isPaused=function(){return this._apvElement.paused},e.prototype.updateMediaSources=function(){if(e.__super__.updateMediaSources.call(this),this.lastMediaHeightIndex!==this.mediaHeightIndex){this.lastMediaHeightIndex=this.mediaHeightIndex;var t,n=this._apvElement.querySelectorAll("source"),i=!this._apvElement.paused;this.pause();for(var r=0;r<this.SUPPORTED_TYPES.length;r++)t=n[r],t.type="video/"+this.SUPPORTED_TYPES[r],t.src=this.getFullVideoUrl(this.SUPPORTED_TYPES[r]),this._apvElement.currentSrc.indexOf(this.SUPPORTED_TYPES[r],-5)>-1&&(this._apvElement.src=t.src);i&&this.play()}},e.prototype.handleVideoEvent_CanPlayThrough=function(){this.shouldPlay&&(this._apvElement.play(),this.sendEventPlaying()),this._apvElement.removeEventListener("canplaythrough",this._handleVideoEvent_CanPlayThrough)}}(),function(){function e(){e.__superCtor__.call(this)}s.apv=s.apv||{},s.apv.players=s.apv.players||{},l["extends"](e,s.apv.players.ApvPlayerBase),s.apv.players.ApvGifPlayer=e,e.prototype.init=function(t,n,i){e.__super__.init.call(this,t,n,i),l.log("Mobile detected. Loading GIFs.");var r=document.createElement("img");this._apvElement=r,r.setAttribute("data-apv_replaced","true"),r.setAttribute("minVideoID",this._videoData.getId()),r.setAttribute("src",l.setUrlProtocol(this._videoData.getAPVUrl()+this.mediaHeightIndex+".gif")),this.addGifEvents(r)},e.prototype.addGifEvents=function(){var e=this;if(l.plugins.isPlugin()){var t="gifCreatedPlugin:"+this._videoData.getPublisherVideoId();re.sendToParent({funnelData:t})}else{var t="gifCreated:"+this._videoData.getPublisherVideoId();h.add(l.getTrackerTiming(t))}this._apvElement.addEventListener("load",function(t){if(e.dispatchEvent(f.Events.Players.LOADED),e.handleMediaMetadataLoaded(),l.plugins.isPlugin()){var n="gifLoadedPlugin:"+e._videoData.getPublisherVideoId();re.sendToParent({funnelData:n})}else{var n="gifLoaded:"+e._videoData.getPublisherVideoId();h.add(l.getTrackerTiming(n))}})},e.prototype.getSizeData=function(){return ae.getRezGif()},e.prototype.updateMediaSources=function(){e.__super__.updateMediaSources.call(this),this.lastMediaHeightIndex!==this.mediaHeightIndex&&(document.contains(this._apvElement)||this.elementToReplace.setAttribute("src",this.getFullVideoUrl("gif")),this._apvElement.setAttribute("src",this.getFullVideoUrl("gif")),this.lastMediaHeightIndex=this.mediaHeightIndex)},e.prototype.hide=function(){this._apvElement.style.opacity=0}}(),function(){s.placements=s.placements||{},s.placements.getContainerOverlay=function(){return l.logWarning("config set with container overlay but no file was gulped"),document.createElement("img")}}(),s.apv=s.apv||{},s.apv.logos=s.apv.logos||{};var G=s.apv.logos;G.LogoElmBase=function(){G.LogoElmBase.__superCtor__.call(this)},l["extends"](G.LogoElmBase,y),G.LogoElmBase.prototype.init=function(e,t){this.currentPlacement=e,this.isMobile=t,this.buildLogoLinkElement(),this.hide()},G.LogoElmBase.prototype.buildLogoLinkElement=function(){var e=this.createElement();e.title=e.alt=ae.getTooltip(),this.logoSize=this.isMobile?f.DEFAULT_MOBILE_LOGO_SIZE:f.DEFAULT_LOGO_SIZE;var t=this.getLogoDefaultStyle(),n=this.currentPlacement.getLogoStyleOverride(),i=l.extend(t,n);e.innerHTML=this.getLogoInnerHtml();for(var r in i)e.style[r]=i[r],"width"==r&&(this.logoSize=i[r]);e.style.cursor="pointer",e.style.minWidth=e.style.width=this.logoSize,e.style.minHeight=e.style.height=this.logoSize,""==e.style.left&&""==e.style.right&&(e.style.right="2%"),""==e.style.top&&""==e.style.bottom&&(e.style.bottom="4%"),e.style.outline="none",e.style.transition=ae.getEffectApvTransitionLogo(),this.minuteLinkElm=e},G.LogoElmBase.prototype.createElement=function(){},G.LogoElmBase.prototype.getLogoElement=function(){return this.minuteLinkElm},G.LogoElmBase.prototype.show=function(){this.getLogoElement().style.opacity=.6},G.LogoElmBase.prototype.hide=function(){this.getLogoElement().style.opacity=0},s.apv=s.apv||{},s.apv.logos=s.apv.logos||{};var G=s.apv.logos;G.LogoElmReg=function(){G.LogoElmReg.__superCtor__.call(this)},l["extends"](G.LogoElmReg,G.LogoElmBase),G.LogoElmReg.prototype.getLogoDefaultStyle=function(){return{position:"absolute",display:"block",opacity:"0.7",backgroundImage:"url("+l.getProtocol()+"://videos.minute.ly/videos/watermark.png)","background-size":"100% 100%",border:"none",title:"minute.ly","background-color":"transparent","z-index":"9999"}},G.LogoElmReg.prototype.getLogoInnerHtml=function(){return""},G.LogoElmReg.prototype.createElement=function(){return document.createElement("a")},s.apv=s.apv||{},s.apv.logos=s.apv.logos||{};var G=s.apv.logos;G.LogoElmSVG=function(){G.LogoElmSVG.__superCtor__.call(this)},l["extends"](G.LogoElmSVG,G.LogoElmBase),G.LogoElmSVG.prototype.getLogoDefaultStyle=function(){var e="16px";return{position:"absolute",display:"block",width:e,height:"auto",border:"none",title:"minute.ly","background-color":"transparent","z-index":"9999"}},G.LogoElmSVG.prototype.getLogoInnerHtml=function(){return'<svg version="1.1" id="MinuteLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 46 46" style="'+this.currentPlacement.getSvgStyle()+'" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M42.7,13.4L42.7,13.4l-6.8,3.3c1,2,1.5,4.2,1.5,6.5c0,8-6.5,14.4-14.4,14.4c-8,0-14.4-6.5-14.4-14.4 S15.1,8.8,23.1,8.8c1.3,0,2.5,0.2,3.6,0.5l2-7.4c-2-0.5-3.6-0.7-5.7-0.7h0h0c-3.4,0-6.5,0.7-9.6,2.2C2.5,8.6-2,21.7,3.3,32.6 C8.6,43.5,21.7,48,32.6,42.7C43.5,37.4,48,24.3,42.7,13.4"/><circle style="fill:#2ABFD5;" cx="23" cy="23" r="9"/> </svg>'},G.LogoElmSVG.prototype.createElement=function(){return document.createElement("a")},s.apv=s.apv||{},s.apv.logos=s.apv.logos||{};var G=s.apv.logos;G.LogoElmSpan=function(){G.LogoElmSpan.__superCtor__.call(this)},l["extends"](G.LogoElmSpan,G.LogoElmReg),G.LogoElmSpan.prototype.createElement=function(){return document.createElement("span")},s.apv=s.apv||{},s.apv.logos=s.apv.logos||{};var G=s.apv.logos;G.LogoElmSpanSVG=function(){G.LogoElmSpanSVG.__superCtor__.call(this)},l["extends"](G.LogoElmSpanSVG,G.LogoElmSVG),G.LogoElmSpanSVG.prototype.createElement=function(){return document.createElement("span")},function(){function t(){t.__superCtor__.call(this),this._handleWindowDisposeEvent=null,this._handleApvPlayerLoadedEvent=null,this.minContainer=null,this.blockingState=f.APVStates.Active,this._isLastVisibleAnalytics=!1,this._isLastVisible=!1}s.apv=s.apv||{},s.apv.domAdapter=s.apv.domAdapter||{};var n=s.apv.domAdapter,i=s.utils.DomFinder;n.Base=t,l["extends"](t,y),t.prototype.getState=function(){return this.state},t.prototype.init=function(e,t,n){this.apvData=e,this.elementToReplace=this.apvData.getElementToReplace(),this.apvPlayer=t,this.minuteLink=n,this.videoData=this.apvData.getVideoData(),this._placement=this.apvData.getPlacement(),this.elmToObserve=null,this.initElements(),this.wrapperElement&&this.linkElement?(l.log("initializing DOM adapter. videoData.getId(): "+this.videoData.getId()),this._init(),this.attachWrapperEvents(),this.attachWindowEvents()):l.log("DOM Adapter is disabled. videoData.id: "+this.videoData.getId()),this.addEvents(),this.dispatchReadyEvent()},t.prototype.addEvents=function(){var e=this;this._handleWindowDisposeEvent=this.handleWindowDisposeEvent.bind(this),J.addEventListener(f.Events.WINDOW_DISPOSE,this._handleWindowDisposeEvent),this.apvPlayer.addEventListenerOnce(f.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),
this.apvPlayer.addEventListener(f.Events.Players.PAUSED,this.handlePlayerEvent_Paused,this),J.addEventListener(f.Events.DomWindow.CHECK_VISIBILITY,function(){e.dispatchViewportEvent()}),this.setElementToObserve()},t.prototype._init=function(){},t.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.decorateElementWithPlacementName(this.minContainer)},t.prototype.decorateElementWithPlacementName=function(e){e.setAttribute("selector",this._placement.getName())},t.prototype.overrideCustomElementStyle=function(){var e=this._placement.getCustomStyleOverride();if(e&&0!==e.length)for(var t,n,r,o,a,s,c=0;c<e.length;c++)if(n=e[c],r=i.getElementByVideoAndSelector(this.videoData,n.selector),o=!0,r){a=n.condition||{},s=l.getComputedStyle(r);for(t in a)if(a.hasOwnProperty(t)&&a[t]!==s[t]){o=!1;break}if(o){var u=n.change||{};for(t in u)u.hasOwnProperty(t)&&(r.style[t]=u[t])}}},t.prototype.createVideoElement=function(){var e={},t=this._placement.getApvStyleOverride();this.apvPlayer.setOriginalImage(this.getOriginalUrl()),e.position="relative",e[f.styles.OBJECT_FIT]="cover";for(var n in t)e[n]=t[n];this.apvPlayer.setStyles(e),this._handleApvPlayerLoadedEvent=this.handleApvPlayerLoadedEvent.bind(this),this.apvPlayer.addEventListener(f.Events.Players.LOADED,this._handleApvPlayerLoadedEvent)},t.prototype.insertContainerToDOM=function(e){var t=l.config.getIndexLocation(this._placement),n=l.config.isParentAppend(this._placement);n&&(t=0,e=e.parentElement),t===f.APPEND_CHILD_CODE?e.appendChild(this.minContainer):e.insertBefore(this.minContainer,e.childNodes[t])},t.prototype.getOriginalUrl=function(){return this.elementToReplace.src},t.prototype.dispose=function(){this.apvPlayer.removeEventListener(f.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),this.apvPlayer.removeEventListener(f.Events.Players.PAUSED,this.handlePlayerEvent_Paused,this)},t.prototype.initElements=function(){var e=l.DomAdapter.getContainingsElements(this.videoData,this._placement,this.elementToReplace);this.linkElement=e.linkElement,this.wrapperElement=e.wrapperElement,this.hoverElement=i.getElementByType(this.videoData,this._placement,f.Selectors.HOVER_SELECTOR),this.wrapperElement&&this.linkElement||l.log("No element were found for wrapperElement or link_elm")},t.prototype.getCarouselElement=function(){return this.carouselElement||(this.carouselElement=i.getElementByType(this.videoData,this._placement,f.Selectors.CAROUSEL_SELECTOR)),document.body.contains(this.carouselElement)||(this.carouselElement=i.getElementByType(this.videoData,this._placement,f.Selectors.CAROUSEL_SELECTOR),this.carouselElement&&this.dispatchUpdateCarouselElementEvent()),this.carouselElement},t.prototype.setElementToObserve=function(){!this._placement.getObserverSelector()||this.elmToObserve&&document.body.contains(this.elmToObserve)&&this.isElementVisible(this.elmToObserve)||(this.elmToObserve=i.getElementByType(this.videoData,this._placement,f.Selectors.OBSERVER_SELECTOR),this.observerAttrChange(this.elmToObserve))},t.prototype.handleWindowDisposeEvent=function(){J.removeEventListener(f.Events.WINDOW_DISPOSE,this._handleWindowDisposeEvent),this.dispose()},t.prototype.handleApvPlayerLoadedEvent=function(e){this.handlerResize(),this.minuteLink.show()},t.prototype.handlePlayerEvent_Playing=function(e){this.minuteLink.show(),this.dispatchViewportEvent()},t.prototype.handlePlayerEvent_Paused=function(e){},t.prototype.setLoopPlay=function(){this.apvPlayer.setElementAttribute("loop","")},t.prototype.keepVideoVisible=function(){"visible"!=this.apvPlayer.getStyle("visibility")&&(this.apvPlayer.setStyles({visibility:"visible"}),this.dispatchViewportEvent())},t.prototype.hide=function(){this.hideVideo(),this.hideLogo(),this.hideOverlay()},t.prototype.hideVideo=function(){if(this.apvPlayer.isShow()){this.apvPlayer.hide();var e=this._placement.getContainerStyleOverride("inactive");if(e)for(var t in e)this.minContainer.style[t]=e[t];l.log("hide video send inactive")}},t.prototype.showLogo=function(){this.minuteLink&&this.minuteLink.show()},t.prototype.hideLogo=function(){this.minuteLink&&this.minuteLink.hide()},t.prototype.isElementVisible=function(){return b.isElementVisible(this.hoverElement||this.wrapperElement,this.getCarouselElement())},t.prototype.getElementVisiblePercents=function(){return b.getElementVisiblePercents(this.hoverElement||this.wrapperElement,this.getCarouselElement())},t.prototype.dispatchViewportEvent=function(){var t=this.getElementVisiblePercents();e.debugParams[v.DEBUG_VISIBILITY]&&l.log("DEBUG_VISIBILITY: Visibility for APV Id="+this.videoData.getId()+" is: "+t+"%; the threshold is: "+ae.getViewportAnalyticsPercentage()+"%"),this._updateVisible(t>=this._placement.getViewportPercentage()),this._updateVisibleAnalytics(t>=ae.getViewportAnalyticsPercentage())},t.prototype._updateVisible=function(e){this._isLastVisible!==e&&(this._isLastVisible=e,e?this.dispatchEvent(f.Events.Element.VISIBLE,{videoData:this.videoData}):this.dispatchEvent(f.Events.Element.NON_VISIBLE,{videoData:this.videoData}))},t.prototype._updateVisibleAnalytics=function(e){this._isLastVisibleAnalytics!==e&&(this._isLastVisibleAnalytics=e,e&&this.dispatchEvent(f.Events.Element.ANALYTICS_VISIBLE,{videoData:this.videoData}))},t.prototype.dispatchReadyEvent=function(){this.dispatchEvent(f.Events.Element.READY,{videoData:this.videoData,apvElement:this.apvPlayer.getApvElement(),carouselElement:this.getCarouselElement(),placement:this._placement})},t.prototype.dispatchUpdateCarouselElementEvent=function(){this.dispatchEvent(f.Events.Element.UPDATE_CAROUSEL_ELEMENT,{videoData:this.videoData,apvElement:this.apvPlayer.getApvElement(),carouselElement:this.getCarouselElement()})},t.prototype.play=function(){this.apvPlayer.isPaused()&&(this.keepVideoVisible(),this.apvPlayer.play())},t.prototype.pause=function(){this.apvPlayer.isPaused()||this.apvPlayer.pause()},t.prototype.charmerPreloadPlay=function(){this.apvPlayer.charmerPlay()},t.prototype.handlerResize=function(){this.resetLogoStyle(),this.dispatchViewportEvent(),this.apvPlayer.updateSize(),this.startSizeElementTracer()},t.prototype.startSizeElementTracer=function(){ee.isMobile()&&0!==this._placement.getSizeObserveEcho()&&(this._elementSizeTracer||(this._elementSizeTracer=new s.utils.ElementSizeTracer(this.elementToReplace,this._placement.getSizeObserveEcho(),this._placement.getSizeObserveDelay()),this._elementSizeTracer.addSizeChangedListener(this.handleElementSizeChanged,this)),this._elementSizeTracer.start())},t.prototype.handleElementSizeChanged=function(){this.resetLogoStyle(),this.dispatchViewportEvent(),this.apvPlayer.updateSize()},t.prototype.attachWindowEvents=function(){var e=this;J.addEventListener(f.Events.DomWindow.SCROLL,function(){e.dispatchViewportEvent()}),J.addEventListener(f.Events.DomWindow.RESIZE,function(t){var n=t.data;if(n&&e._placement.getAdditionalEchoRepeat()>0){var i=new s.utils.Timer(e._placement.getAdditionalEchoTime(),e.handlerResize,e);i.setCounterLimit(e._placement.getAdditionalEchoRepeat()),i.start()}e.handlerResize()}),J.addEventListener(f.Events.DomWindow.URL_CHANGE,function(){e.resetLogoStyle(),e.dispatchViewportEvent()})},t.prototype.attachWrapperEvents=function(){function e(){return{videoData:t.videoData,placement:t._placement}}var t=this,n=this.getObservedElement();ee.isMobile()?l.log("hover analytics disabled in mobile"):(n.addEventListener(f.Events.Element.MOUSE_ENTER,function(){t.dispatchEvent(f.Events.Element.MOUSE_ENTER,e())}),n.addEventListener(f.Events.Element.MOUSE_OUT,function(i){var r=i.toElement||i.relatedTarget;n.contains(r)||t.dispatchEvent(f.Events.Element.MOUSE_OUT,e())}))},t.prototype.getObservedElement=function(){return this.hoverElement?this.hoverElement:this.wrapperElement.contains(this.minContainer)?this.wrapperElement:this.minContainer||this.wrapperElement},t.prototype.handleCarouselDebounceCallback=function(){var e=this._placement.getObserverSelectorTimeout();l.log("charmer: carousel debounce"),this.handlerResize(),this.dispatchEvent(f.Events.Element.MUTANT,{timeout:e,videoData:this.videoData})},t.prototype.observerAttrChange=function(e){var t={attributes:!0},n=new s.utils.Debounce(250,this.handleCarouselDebounceCallback,this);this.observer&&this.observer.disconnect(),this.observer=new MutationObserver(function(e){n.start()}),e&&this.observer.observe(e,t)},t.prototype.createLogoElement=function(){this.minuteLinkElm=this.minuteLink.getLogoElement(),this._placement.getPlayMode()!==f.config.PlayModes.InArticle&&this.minuteLinkElm.addEventListener("click",this.handleMinuteLinkClick.bind(this))},t.prototype.resetLogoStyle=function(){if(this.minuteLinkElm){var e=l.getComputedStyle(this.minuteLinkElm);this.setLogoPadding(),this.setLogoSize(e)}},t.prototype.setLogoPadding=function(){function e(e,i){n&&""!==n.style[e]&&(t.minuteLinkElm.style[i]=parseInt(t._placement.getLogoStyleOverride()[i],10)+parseInt(n.style[e],10)+"px")}var t=this,n=t.minContainer||t.wrapperElement;e("paddingLeft","left"),e("paddingRight","right"),e("paddingTop","top"),e("paddingBottom","bottom")},t.prototype.setLogoSize=function(e){var t=parseInt(e.width,10),n=this.minuteLinkElm.style.width;t<f.LOGO_SMALLEST_WIDTH&&(n=f.LOGO_SMALLEST_WIDTH+"px"),this.minuteLinkElm.style.width=n,this.minuteLinkElm.style.height=n,this.minuteLinkElm.style.backgroundSize=n},t.prototype.handleMinuteLinkClick=function(e){var t=i.getAttrBySelector(this._placement.getLinkSelector());return e.preventDefault(),e.stopImmediatePropagation(),window.open(this.linkElement.getAttribute(t),"_blank"),window.open("http://www.minute.ly/publisher","_self"),J.dispatchEvent(f.Events.APV_LOGO_CLICK,{videoData:this.videoData,placement:this._placement}),!1},t.prototype.getBoundingClientRect=function(){return this.minContainer.getBoundingClientRect()},t.prototype.hideElementToReplace=function(){this.elementToReplace.style.visibility="hidden",this.elementToReplace.style.opacity=0},t.prototype.activateApv=function(){ae.isBlockingDistanceEnabled()&&l.log("BlockingD: "+this.videoData.getArticleUrl()+" is now active"),this.showElement(this.apvPlayer.getApvElement()),this.showLogo(),this.hideElementToReplace(),this.showDebugBlocking()},t.prototype.blockApv=function(){ae.isBlockingDistanceEnabled()&&l.log("BlockingD: "+this.videoData.getArticleUrl()+" is now Blocked"),this.hideElement(this.apvPlayer.getApvElement()),this.hideLogo(),this.hideDebugBlocking()},t.prototype.setState=function(e){if(this.videoData&&this.blockingState!==e)switch(this.blockingState=e,e){case f.APVStates.Active:this.activateApv();break;case f.APVStates.Disabled:case f.APVStates.Blocked:this.blockApv()}},t.prototype.hideElement=function(e){e&&(e.style.opacity=0)},t.prototype.showElement=function(e){e&&(e.style.opacity=1)},t.prototype.hideDebugBlocking=function(){this.apvData.getDebug()&&(this.apvData.getDebug().style.opacity=0)},t.prototype.showDebugBlocking=function(){this.apvData.getDebug()&&(this.apvData.getDebug().style.opacity=1)},t.prototype.hideOverlay=function(){}}(),function(){function e(){e.__superCtor__.call(this),this.currentSize={},this.hasMediaQueryChanged=!1,this._cloneImageLoaded=!1,this._containerOL=null,this.resizeDecouncer=new s.utils.Debounce(100,this.handlerDebounceResize,this)}s.apv=s.apv||{},s.apv.domAdapter=s.apv.domAdapter||{};var t=s.apv.domAdapter,n={"box-shadow":"none",border:0};t.MimicInheritETRClasses=e,l["extends"](e,t.Base),e.getTypeName=function(){return"MimicInheritETRClasses"},e.prototype.dispose=function(){e.__super__.dispose.call(this),ee.isSafari()||(this.cloneOriginal&&(this.cloneOriginal.style.opacity=1),this.apvPlayer.setStyles({opacity:0}))},e.prototype.buildMinuteDomElements=function(){if(this.createMinContainer(),this.createVideoElement(),this.createLogoElement(),this._placement.hasContainerOverlay()){var e=this._placement.getContainerOverlayType();this._containerOL=s.placements.getContainerOverlay(e)}this._containerOL&&this.minContainer.appendChild(this._containerOL),0==this._placement.getNoClone()&&(this.createCloneImg(),this.minContainer.appendChild(this.cloneOriginal)),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this.minContainer.appendChild(this.minuteLinkElm),this.insertContainerToDOM(this.elementToReplace.parentNode),this.hideElementToReplace(),"self"==this._placement.containerSelector&&(this.wrapperElement=this.minContainer),this.resetLogoStyle(this.minContainer),this.overrideCustomElementStyle()},e.prototype._init=function(){this.buildMinuteDomElements();var e={attributes:!0},t=this;this.observer=new MutationObserver(function(e){t.handlerResize()}),this.observer.observe(this.elementToReplace,e),J.addEventListener(f.Events.DomWindow.RESIZE,this.handlerResize,this),J.addEventListener(f.Events.DomWindow.URL_CHANGE,this.handlerResize,this)},e.prototype.createMinContainer=function(){e.__super__.createMinContainer.call(this),this._updateElementSizeFromOriginal();var t=this._placement.getContainerStyleOverride();for(var n in t)this.minContainer.style[n]=t[n];this._copyStylesFromElement(this.elementToReplace,this.minContainer),this.hasMediaQueryChanged=this._setOverridesAndReturnHasChanged(this.minContainer,f.styleOverrides.CONTAINER)},e.prototype.createVideoElement=function(){e.__super__.createVideoElement.call(this),this.apvPlayer.setOriginalImage(this.getOriginalUrl());var t=this._getApvDefaultStyles();t[f.styles.OBJECT_FIT]="cover",this.apvPlayer.setStyles(t),this._setOverridesAndReturnHasChanged(this.apvPlayer.getApvElement(),f.styleOverrides.APV),this.apvPlayer.setStyles({width:"100%",height:"100%"}),this._handleApvPlayerLoadedEvent=this.handleApvPlayerLoadedEvent.bind(this),this.apvPlayer.addEventListener(f.Events.Players.LOADED,this._handleApvPlayerLoadedEvent)},e.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.src||this.elementToReplace.srcset;return"undefined"!=typeof t&&""!=t||"PICTURE"!==this.elementToReplace.parentElement.tagName||(e=this.elementToReplace.parentElement.querySelector("source[src], source[srcset]"),t=e.src,"undefined"!=typeof t&&""!=t||(t=e.getAttribute("srcset").substr(0,e.getAttribute("srcset").indexOf(" ")))),t},e.prototype.handleCloneImageLoaded=function(){this.cloneOriginal.removeEventListener("load",this._listenerCloneImageLoaded),this._listenerCloneImageLoaded=null,this._cloneImageLoaded=!0},e.prototype.createCloneImg=function(){this.cloneOriginal=document.createElement("img"),this._listenerCloneImageLoaded=this.handleCloneImageLoaded.bind(this),this.cloneOriginal.addEventListener("load",this._listenerCloneImageLoaded),this.cloneOriginal.src=this.getOriginalUrl();var e=this._getCloneImageDefaultStyles();for(var t in e)this.cloneOriginal.style[t]=e[t];this.decorateElementWithPlacementName(this.cloneOriginal),s.utils.DomFinder.setElementAsReplaced(this.cloneOriginal);for(var i in n)this.cloneOriginal.style[i]=n[i];this._setOverridesAndReturnHasChanged(this.cloneOriginal,f.styleOverrides.CLONE)},e.prototype.handlerDebounceResize=function(){e.__super__.handlerResize.call(this),this._updateElementSizeFromOriginal()},e.prototype.handlerResize=function(){this.resizeDecouncer.start()},e.prototype._updateElementSizeFromOriginal=function(){var e=this,t=function(){if(e._placement.isContainerFullSize())return e.minContainer.style.width="100%",void(e.minContainer.style.height="100%");var t=l.extractElementSize(e.elementToReplace);t.width&&t.height&&(e.minContainer.style.width=t.width+"px",e.minContainer.style.height=t.height+"px")};this.hasMediaQueryChanged=this._setOverridesAndReturnHasChanged(this.minContainer,f.styleOverrides.CONTAINER),this.apvPlayer.getApvElement()&&this._setOverridesAndReturnHasChanged(this.apvPlayer.getApvElement(),f.styleOverrides.APV),this._setOverridesAndReturnHasChanged(this.elementToReplace,f.styleOverrides.ELEMENT_TO_REPLACE),t(),setTimeout(function(){t()},0),this.handleSafariWebkitFixOnResize()},e.prototype._setOverridesAndReturnHasChanged=function(e,t,n){var i=this._getActiveOverridesIfChanged(t)||{},r=l.extentObject(i.styles,n||this.getDefaultContainerStyle());for(var o in r)r.hasOwnProperty(o)&&e.style[o]!==r[o]&&(e.style[o]=r[o]);var a="-"+e.style[f.styles.HEIGHT];return f.styles.MARGIN_TOP in r&&r[f.styles.MARGIN_TOP]==f.styles.PARENT&&e.style[f.styles.MARGIN_TOP]!==a&&(e.style[f.styles.MARGIN_TOP]=a),i.hasMediaQueryChanged},e.prototype._getActiveOverridesIfChanged=function(e){var t,n=this.currentSize[e];this.currentSize[e]||(this.currentSize[e]=f.DEFAULT_MEDIAQUERY);var i=this._placement.getActiveOverridesWithSize(e);return this.currentSize[e]=i.size,t={hasMediaQueryChanged:!1,styles:i.styles},n!==i.size&&this._placement.hasMediaQueries(e)&&(t.hasMediaQueryChanged=!0),t},e.prototype._copyStylesFromElement=function(e,t){var i=l.getComputedStyle(e);for(var r in n)t.style[r]=i[r]},e.prototype.handleSafariWebkitFixOnResize=function(){var e=this,t=function(){e.minContainer.style.display=f.values.NONE,setTimeout(function(){e.minContainer.style.display=f.values.BLOCK,e.shouldPlay!==!0&&"undefined"!=typeof e.shouldPlay||e.apvPlayer.play()},0)};ee.isSafari()&&this.hasMediaQueryChanged&&(t(),setTimeout(function(){t()},250))},e.prototype.getDefaultContainerStyle=function(){return{position:"absolute",overflow:"hidden"}},e.prototype.hideElementToReplace=function(){function t(){if(n._cloneImageLoaded===!1)return void i(t);e.__super__.hideElementToReplace.call(n);var r=n._placement.getElementToReplaceStyleOverride()||n._getHideElementToReplaceStyleDefaults(),o=n.elementToReplace;for(var a in r)o.style[a]=r[a]}var n=this,i=l.getRequestAnimationFrame();i(t)},e.prototype.handlePlayerEvent_Playing=function(t){e.__super__.handlePlayerEvent_Playing.call(this),this.hideElementToReplace()},e.prototype._getHideElementToReplaceStyleDefaults=function(){return{position:f.values.RELATIVE,visibility:f.values.HIDDEN,opacity:0}},e.prototype._getApvDefaultStyles=function(){return{position:f.values.RELATIVE,display:f.values.BLOCK,width:f.values.HUNDRED_PERCENT,height:f.values.HUNDRED_PERCENT}},e.prototype._getCloneImageDefaultStyles=function(){return{position:f.values.ABSOLUTE,display:f.values.BLOCK,width:f.values.HUNDRED_PERCENT,height:f.values.HUNDRED_PERCENT}},e.prototype.hideOverlay=function(){e.__super__.hideOverlay.call(this),this._containerOL&&(this._containerOL.style.opacity=0)}}(),function(){function e(){e.__superCtor__.call(this),this.bgImageUrl=null}s.apv=s.apv||{},s.apv.domAdapter=s.apv.domAdapter||{};var t=s.apv.domAdapter;t.AppendToElement=e,l["extends"](e,t.Base),e.getTypeName=function(){return"AppendToElement"},e.prototype._init=function(){this.createMinContainer(),this.createVideoElement(),this.createLogoElement(),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this.minContainer.appendChild(this.minuteLinkElm),this.insertContainerToDOM(this.elementToReplace),"self"==this._placement.containerSelector&&(this.wrapperElement=this.minContainer),this.resetLogoStyle(this.minContainer,this.minuteLink),this.overrideCustomElementStyle()},e.prototype.insertContainerToDOM=function(e){var t=e.childNodes&&e.childNodes.length>0,n=l.config.getIndexLocation(this._placement);return t&&n!==f.APPEND_CHILD_CODE?void(n!==f.APPEND_CHILD_CODE?e.insertBefore(this.minContainer,e.childNodes[n]):e.insertBefore(this.minContainer,e.childNodes[0])):void e.appendChild(this.minContainer)},e.prototype.initElements=function(){e.__super__.initElements.call(this);var t=s.utils.DomFinder.getElementByType(this.videoData,this._placement,f.Selectors.IMAGE_SELECTOR)||this.elementToReplace;this.bgImageUrl=l.extractImageUrlFromStyle(t.style.backgroundImage)},e.prototype.createMinContainer=function(){e.__super__.createMinContainer.call(this);var t=this._placement.getContainerStyleOverride();for(var n in t)this.minContainer.style[n]=t[n];this.minContainer.style.width="100%",this.minContainer.style.height="100%"},e.prototype.createVideoElement=function(){e.__super__.createVideoElement.call(this),this.apvPlayer.setStyles({width:"100%",height:"100%"})},e.prototype.getOriginalUrl=function(){return this.bgImageUrl},e.prototype.dispose=function(){e.__super__.dispose.call(this),ee.isSafari()||this.apvPlayer.setStyles({opacity:0})},e.prototype.hideElementToReplace=function(){}}(),function(){function e(){e.__superCtor__.call(this)}s.apv=s.apv||{},s.apv.domAdapter=s.apv.domAdapter||{};var t=s.apv.domAdapter;t.TestGroup=e,l["extends"](e,t.Base),e.getTypeName=function(){return"TestGroup"},e.prototype._init=function(){this.wrapperElement=this.elementToReplace},e.prototype.dispatchReadyEvent=function(){this.dispatchEvent(f.Events.Element.READY,{videoData:this.videoData,apvElement:this.hoverElement||this.wrapperElement,carouselElement:this.getCarouselElement(),placement:this._placement})},e.prototype.getBoundingClientRect=function(){return this.elementToReplace.getBoundingClientRect()},e.prototype.hideElementToReplace=function(){}}(),function(){function e(){e.__superCtor__.call(this),this.domAdapter=null,this.videoData=null,this.currentPlacement=null}s.apv=s.apv||{},s.apv.playmodes=s.apv.playmodes||{},s.apv.playmodes.Base=e,l["extends"](e,y),e.prototype.setDomAdapter=function(e,t,n){this.apvData=n,this.domAdapter=e,this.apvPlayer=t,this.videoData=this.apvData.getVideoData(),this.currentPlacement=this.apvData.getPlacement()},e.prototype.start=function(){}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.AndroidCharmerInArticle=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.addEventListener(f.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.apvPlayer.addEventListener(f.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ae.getEffectApvShowDelay())}),this.domAdapter.addEventListener(f.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(f.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),l.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData)}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.AndroidCharmerViewport=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.addEventListener(f.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.apvPlayer.addEventListener(f.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ae.getEffectApvShowDelay())}),this.domAdapter.addEventListener(f.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(f.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(f.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},e.data.timeout)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.iOSCharmerInArticle=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.addEventListener(f.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ae.getEffectApvShowDelay())}),l.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData)}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.iOSCharmerViewport=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.charmerPlay(),this.apvPlayer.addEventListener(f.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ae.getEffectApvShowDelay())}),this.domAdapter.addEventListener(f.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},e.data.timeout)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.Viewport=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.setLoopPlay(),this.apvPlayer.addEventListener(f.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.apvPlayer.addEventListener(f.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ae.getEffectApvShowDelay())}),this.domAdapter.addEventListener(f.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(f.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(f.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},e.data.timeout)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.MobileGif=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this),this.domAdapter.showLogo()}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.InArticleMobile=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.addEventListener(f.Events.Players.LOADED,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ae.getEffectApvShowDelay()),t.domAdapter.showLogo(),t.domAdapter.play()}),l.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData)}}(),function(){function e(){e.__superCtor__.call(this)}s.apv.playmodes.TestGroup=e,l["extends"](e,s.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.addEventListener(f.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},e.data.timeout)})}}(),function(){function e(e){function t(e,t){u.has(e,t)||u.add(e,t)}function n(){return!u||u.getNumListeners()>0}function i(){c&&(d.disconnect(),d=null,u.removeAll(),u=null,c=null)}function r(){d=new MutationObserver(o),d.observe(c.getElementToReplace(),{attributes:!0})}function o(e){for(var t=0;t<e.length;t++){var n=e[t];if(("src"===n.attributeName||"srcset"===n.attributeName)&&n.target.currentSrc!==c.getPlacement().getLazyBackgroundSrc()){a();break}if("style"===n.attributeName&&l.extractImageUrlFromStyle(n.target.style.backgroundImage)){a();break}}}function a(){l.isElementHasSize(c.getElementToReplace())?u.dispatch(c):setTimeout(a,50)}var c=e,u=new s.utils.Signal,d=null;return r(),{addListener:t,isWatched:n,dispose:i}}s.apv=s.apv||{},s.apv.LazyLoadWatcher=e}(),function(){function e(){if(c[0]===a.INIT[0]){for(var e=0,t=ge.getAllPlacements(),n=0;n<t.length;n++){var i=t[n];i.hasIndicators()&&e++}0===e?(c=a.WARNING,l.log("** Warning! Placements don't have placement indicators. Please add 'indicators' key to ALL placements for optimized placement performance.")):e>0&&e!==ge.getAllPlacements().length?(c=a.WARNING,l.log("** Warning! Some placements don't have placement indicators. Please add 'indicators' key to ALL placements.")):c=a.NO_WARNING}}function t(){if(!u){var e=ge.getAllPlacements().length>0&&ge.getAllPlacements()[0].hasIndicators();u=e?new r.Page:new r.Server}return u}function n(e,t,n){var i=""+e.getId()+t.getPlacementId(),r=e,o=t,a=n,s=null,l=0,c=null,u=null,d=null,p="";this.getKey=function(){return i},this.getVideoData=function(){return r},this.getPlacement=function(){return o},this.getElementToReplace=function(){return a},this.setWatcher=function(e){s=e},this.removeWatcher=function(){s=null},this.getWatcher=function(){return s},this.setBlockingDistance=function(e){l=e},this.getBlockingDistance=function(){return l},this.setPosition=function(e){c=e},this.getPosition=function(){return c},this.setRect=function(e){u=e},this.getRect=function(){return u},this.setDebug=function(e){d=e},this.getDebug=function(){return d},this.setState=function(e){p=e},this.getState=function(){return p}}function i(){}s.services=s.services||{},s.services.VideoGenerator=s.services.VideoGenerator||{};var r=s.services.VideoGenerator,o=s.utils.DomFinder,a={INIT:[0,"init"],WARNING:[1,"warning"],NO_WARNING:[2,"no warning"]},c=a.INIT,u=null;r.getVideos=function(){return e(),t(),u.getVideos()},r.Base=i,i.prototype.isValidPlacement=function(e,t){return e&&e.hasAPV()&&(t.isInArticle()||e.shouldPlayRegular())?!t.isInArticle()||e.shouldPlayInArticle():!1},i.prototype.getElementToReplace=function(e,t){var n;return this.isValidPlacement(e,t)?(n=o.getElementToReplace(e,t),n&&null!==n.offsetParent&&0!==n.offsetHeight&&l.isElementHasSize(n)?n:null):null},i.prototype.getVideos=function(){},i.prototype.sortVideos=function(e,t){var n=e.getVideoData(),i=t.getVideoData();return n.isForcePlacement()===!0&&i.isForcePlacement()===!0?0:n.isForcePlacement()===!0&&i.isForcePlacement()===!1?1:n.isForcePlacement()===!1&&i.isForcePlacement()===!0?-1:n.getRank()>i.getRank()?1:n.getRank()<i.getRank()?-1:0},i.prototype.createData=function(e,t,i){return new n(e,t,i)}}(),function(){function t(){t.__superCtor__.call(this),this._isMinuteUiTestEnabled=e.debugParams[v.MINUTE_UI_TEST],this._videoScanCounter=0}var n=s.services.VideoGenerator,i=s.utils.DomFinder,r=document.createElement("a");n.Page=t,l["extends"](t,n.Base),t.prototype.getStructured=function(e){r.href=e;for(var t="",n=ae.getUrlStructure(),i=0;i<n.length;i++)n[i]!==f.UrlStructure.Origin&&(t+=r[n[i]]);return""!==t&&"/"!=t.charAt(0)&&(t="/"+t),t},t.prototype.getVideoDataFromSelector=function(e,t){var n=e.getSelectorByType(f.Selectors.VIDEO_DATA_SELECTOR);if(n){var n=ce.create(n.type);return n.getVideoData(e)}return this.getVideoDataFromLinkSelector(e,t)},t.prototype.getVideoDataFromLinkSelector=function(e,t){var n=i.getAttrBySelector(e.getSelectorByType(f.Selectors.LINK_SELECTOR)),r=n&&t.getAttribute(n),o=r,a=ae.getPlayerIdPattern();if(r){if(e.getIsAttributeUrl())o=this.getStructured(r);else if(a){var s=new RegExp(a);o=o.replace(s,"$1")}}else;if(this._isMinuteUiTestEnabled){var l=t&&t.getAttribute(f.MinuteUiTests.HtmlAttributes.ACTIVE);if(!l)return null}return le.getVideoDataByKey(o,e)},t.prototype.getVideos=function(){for(var e,t,n,r,o=ge.getAllPlacements(),a=[],s=[],c=[],u=0;u<o.length;u++)if(r=o[u],r.hasIndicators()&&document.querySelector(r.getIndicatorPlacement())&&(n=document.querySelectorAll(r.getIndicatorLink()),n&&0!==n.length)){this._videoScanCounter+=1,n.length>20&&this._videoScanCounter%15===1&&l.logWarning("VideoByPageGenerator: InidicatorLink returns too many elements. Please revise. elementList.length="+n.length+"; placement.getName() = "+r.getName());for(var d=0;d<n.length;d++){var p=n[d];if(this._isMinuteUiTestEnabled&&p.setAttribute(f.MinuteUiTests.HtmlAttributes.EXISTS,"true"),t=this.getVideoDataFromSelector(r,p),!(s.indexOf(t)>-1)){var h=i.getAttrBySelector(r.getLinkSelector())||"href",g=l.urls.getStructuredByUrl(p.getAttribute(h));-1==c.indexOf(g)&&c.push(g),e=this.getElementToReplace(t,r),e&&this.checkValidation(r,t)&&(s.push(t),i.getIsElementReplaced(e)||a.push(this.createData(t,r,e)))}}}var v=$.getSessionStorageInstance();return v&&v.setItem(f.LocalStorage.POTENTIAL,encodeURIComponent(JSON.stringify(c))),a&&a.length&&a.sort(this.sortVideos).reverse(),a},t.prototype.checkValidation=function(e,t){if(!e.getValidatorSelector())return!0;var n=i.selector(e.getValidatorSelector(),t),r=document.querySelector(n);return!!r}}(),function(){function e(){e.__superCtor__.call(this)}var t=s.services.VideoGenerator,n=s.utils.DomFinder;t.Server=e,l["extends"](e,t.Base),e.prototype.getVideos=function(){for(var e,t,i,r=ge.getAllPlacements(),o=le.getVideoList(),a={},s=[],l=0;l<o.length;l++){i=o[l];for(var c=0;c<r.length&&(e=r[c],a[i.getArticleUrl()]!==!0);c++)t=this.getElementToReplace(i,e),t&&(a[i.getArticleUrl()]=!0,n.getIsElementReplaced(t)||s.push(this.createData(i,e,t)))}return s.length>0&&(s.sort(this.sortVideos),s.reverse()),s}}(),function(){function e(){function e(){for(var e=0;e<2*Math.PI;e+=a)u["cos"+e]=Math.cos(e),
u["sin"+e]=Math.sin(e)}function t(e,t){var n=t.getElementToReplace();e===f.APVStates.Blocked||e===f.APVStates.Disabled?(n.style.border="13px solid black",n.style.boxSizing="border-box",n.style.opacity=.2,l.log("BlockingD: "+t.getVideoData().getArticleUrl()+" is BLOCKED")):(n.style.border="0 solid black",n.style.boxSizing="border-box",n.style.opacity=1,l.log("BlockingD: "+t.getVideoData().getArticleUrl()+" is ACTIVE"))}function n(e){var t=2*Math.PI,n=document.createElement("div");n.className="minCircle";for(var r=0;t>r;r+=a){var o=e.getPosition().top+e.getBlockingDistance()*u["cos"+r],l=e.getPosition().left+e.getBlockingDistance()*u["sin"+r];n.appendChild(i(o,l,s,"green"))}return n}function i(e,t,n,i){var r=document.createElement("div");return r.className="minPoint",r.style.position="absolute",r.style.width=n+"px",r.style.height=n+"px",r.style.top=e+"px",r.style.left=t+"px",r.style.zIndex=1e7,r.style.backgroundColor=i,r.style.borderRadius="10px",r}function r(e){var t=e.getDebug()||document.createElement("div"),r=n(e),o=t.getElementsByClassName("minCircle"),a=!o||0===o.length;a||t.removeChild(o[0]),t.appendChild(r),a||t.removeChild(t.getElementsByClassName("minPoint")[0]);var s=e.getVideoData().isForcePlacement()?"gold":"red",c=i(e.getPosition().top,e.getPosition().left,6,s);t.appendChild(c),e.setDebug(t),l.log("Top: "+e.getPosition().top+", Left: "+e.getPosition().left)}function o(e){var n=!e.getDebug();switch(r(e),n&&c.insertBefore(e.getDebug(),c.childNodes[0]),e.getState()){case f.APVStates.Active:t(f.APVStates.Active,e);break;case f.APVStates.Blocked:case f.APVStates.Disabled:case f.APVStates.Disposed:e.getDebug().style.opacity=0,t(f.APVStates.Blocked,e)}}var a=.02,s=3,c=ae.getWindowScrollElement()||document.body,u={};return e(),{updateApvGraphics:o}}s.placements=s.placements||{},s.placements.debug=s.placements.debug||{},s.placements.debug.DocumentRadiusPainter=e}(),function(){function e(e){for(var t={},n=0;n<e.length;n++)t[e[n].getKey()]=e[n];return t}function t(e){var t=!1;for(var n in u)u.hasOwnProperty(n)&&!e[n]&&(u[n].state=f.APVStates.Disposed,t=!0);return t}function n(e){var t=!1;for(var n in e)e.hasOwnProperty(n)&&(u[n]?(u[n].getPosition()!==e[n].getPosition()&&(u[n].setPosition(e[n].getPosition()),t=!0),u[n].getBlockingDistance()!==e[n].getBlockingDistance()&&(u[n].setBlockingDistance(e[n].getBlockingDistance()),t=!0)):(u[n]=e[n],u[n].state=f.APVStates.New,t=!0));return t}function i(e,t){var n=Math.pow(e.top-t.top,2),i=Math.pow(e.left-t.left,2);return Math.sqrt(i+n)}function r(e,t){for(var n,r,o=0;e>o;o++)if(r=c[o],r.getState()!==f.APVStates.Blocked&&r.getState()!==f.APVStates.Disabled&&(n=i(t.getPosition(),r.getPosition()),n<r.getBlockingDistance()))return ae.isPlacementsDebugEnabled()&&l.log("BlockingD: ID: "+r.getVideoData().getId()+" with URL: "+r.getVideoData().getArticleUrl()+" is blocking "+t.getVideoData().getArticleUrl()),t.getState()===f.APVStates.New||t.getState()===f.APVStates.Blocked?f.APVStates.Blocked:f.APVStates.Disabled;return f.APVStates.Active}function o(e){return ae.getBaseHeightPercent()+e.getRect().width/ae.getBaseThumbPx()}function a(e){e.setBlockingDistance(o(e))}s.services=s.services||{},s.services.BlockingDistance={};var c,u={};s.services.BlockingDistance.calculate=function(i){var o,s,d={hasChanged:!1,APVs:{}},p=e(i);if(d.hasChanged=t(p),d.hasChanged=n(p),!d.hasChanged)return d;c=l.createArrayFromDictinary(u);for(var h=0;h<c.length;h++)s=c[h],ae.isBlockingDistanceEnabled()?s.getVideoData().isForcePlacement()?o=f.APVStates.Active:(a(s),o=r(h,s)):o=f.APVStates.Active,s.getState()!==o&&s.setState(o),d.APVs[s.getKey()]=s;return d}}(),function(){function e(e,t){var n=s.apv.domAdapter;return oe.isTestGroup()?new n.TestGroup:e.getMinuteLocation()===f.PlacementKeys.CHILD?new s.apv.domAdapter.AppendToElement:new s.apv.domAdapter.MimicInheritETRClasses}function t(e){return ee.isUserAgentFacebook()?new s.apv.players.ApvGifPlayer:!ee.isMobile()||ae.shouldEnableCharmer()&&e.getIsEnableMobileVideo()?new s.apv.players.ApvVideoPlayer:new s.apv.players.ApvGifPlayer}function n(e,t){return oe.isTestGroup()?new s.apv.playmodes.TestGroup:ee.isMobile()?i(e,t):r()}function i(e,t){var n=s.apv.playmodes,i=f.config.PlayModes,r=ee.isSafari(),o=ee.isChrome()&&ee.isAndroid();return ae.shouldEnableCharmer()?r?e.getPlayMode()==i.InArticle?new n.iOSCharmerInArticle:new n.iOSCharmerViewport:o?e.getPlayMode()==i.InArticle?new n.AndroidCharmerInArticle:new n.AndroidCharmerViewport:void 0:e.getPlayMode()==i.InArticle?new n.InArticleMobile:new n.MobileGif}function r(){var e=s.apv.playmodes;return new e.Viewport}function o(e){var t=s.apv.logos;switch(e.getLogoType()){case"SVG":return new t.LogoElmSVG;case"REG":return new t.LogoElmReg;case"SPAN":return new t.LogoElmSpan;case"SPANSVG":return new t.LogoElmSpanSVG}return new t.LogoElmSVG}function a(e){this.videoData=e.getVideoData(),this.placement=e.getPlacement(),this.id=e.getKey(),this.apvData=e,this.domAdapter=null,this.apvPlayer=null,this.minuteLink=null,this.playmode=null,c=_e,this._initElements()}var c,u=s.utils.DomFinder;s.apv=s.apv||{},s.apv.APVWrapper=a,a.prototype.getId=function(){return this.id},a.prototype.getDomAdapter=function(){return this.domAdapter},a.prototype._addDomAdapterEvents=function(){c.register(this)},a.prototype.getBoundingClientRect=function(){return this.domAdapter.getBoundingClientRect()},a.prototype._initElements=function(){var i=this.apvData.getElementToReplace();return this.apvPlayer=t(this.placement),this.apvPlayer.init(i,this.videoData,this.placement),this.minuteLink=o(this.placement),this.minuteLink.init(this.placement,ee.isMobile()),this.domAdapter=e(this.placement,this.videoData),this.domAdapter?(this._addDomAdapterEvents(),this.domAdapter.init(this.apvData,this.apvPlayer,this.minuteLink),this.playmode=n(this.placement,this.videoData),this.playmode.setDomAdapter(this.domAdapter,this.apvPlayer,this.apvData),void u.setElementAsReplaced(i)):(l.log("No DomAdapter found."),null)},a.prototype.start=function(){this.playmode.start()},a.prototype.setState=function(e){this.domAdapter.setState(e)},a.prototype.getVideoData=function(){return this.videoData}}(),function(){function t(e){var t,n=e.getPlacement().getLazyBackgroundSrc();return n?(t=e.getElementToReplace(),"AppendToElement"===e.getPlacement().getDomAdapter()||e.getPlacement().getMinuteLocation()===f.PlacementKeys.CHILD?!l.extractImageUrlFromStyle(t.style.backgroundImage):t.src&&""!==t.src&&t.src.indexOf(n)>-1?!0:t.srcset&&""!==t.srcset&&t.srcset.indexOf(n)>-1?!0:!t.src&&!t.srcset):!1}function n(){this._apvWrapperHash={},this._lazyWatcherHash={},this._numOfFoundApvs=0,this._htmlReport=null,this._firstRun=!0,this._windowSize={width:window.innerWidth,height:window.innerHeight};var e=l.isCurrentUrlFilterValid(ae.getFilterBlocking());ae.isBlockingDistanceEnabled()&&(e?l.log("Blocking Distance filter is true"):l.log("BlockingD: page doesnt comply with blocking distance filter"),ae.isPlacementsDebugEnabled()&&(this._debugPainter=s.placements.debug.DocumentRadiusPainter())),this.startEagerInterval(),this.setLoadMoreObserver(),this.findReplaceableElementsAndPlaceVideos(),J.addEventListener(f.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}s.services=s.services||{},s.services.PlacementServices=n,n.prototype.startEagerInterval=function(){var e=this,t=ae.getEagerApvCount(),n=ae.getEagerApvInterval();this.eagerInterval=setInterval(function(){return 0===t||e._numOfFoundApvs>0?(clearInterval(e.eagerInterval),setInterval(e.findReplaceableElementsAndPlaceVideos.bind(e),ae.getPlacementDomRefresh()),void e.sendFirstApvEvent()):(t--,void e.findReplaceableElementsAndPlaceVideos())},n)},n.prototype.setLoadMoreObserver=function(){var e=ae.getLoadMoreObservers();if(0!=e.length){var t=e.join(),n=document.querySelectorAll(t);n.length>10&&l.log("Load More Observer: more than 10 results are caught, refine the 'loadmoreObserver' config");for(var i=new s.utils.Debounce(200,this.findReplaceableElementsAndPlaceVideos,this),r=0;r<n.length;r++){var o=n[r],a=new MutationObserver(function(){i.start()}),c={childList:!0};a.observe(o,c)}}},n.prototype.calculateGeometry=function(e){for(var t,n,i,r=0;r<e.length;r++)i=e[r],n=i.getKey(),t=this._apvWrapperHash[n]?this._apvWrapperHash[n].getBoundingClientRect():i.getElementToReplace().getBoundingClientRect(),i.setRect(t),i.setPosition({top:t.top+document.body.scrollTop+parseInt(t.height)/2,left:t.left+document.body.scrollLeft+parseInt(t.width)/2})},n.prototype._setWindowSize=function(){this._windowSize={width:window.innerWidth,height:window.innerHeight}},n.prototype._resizeWindow=function(e){var t,n,i=[];for(t in e.APVs)i.push(e.APVs[t]);this.calculateGeometry(i);for(t in e.APVs)e.APVs.hasOwnProperty(t)&&(n=e.APVs[t],this.updateApvDataDebug(n))},n.prototype.handleVideosUpdate=function(){this.findReplaceableElementsAndPlaceVideos()},n.prototype.findReplaceableElementsAndPlaceVideos=function(){var e,n,i,r=s.services.VideoGenerator.getVideos();this.calculateGeometry(r);var o=s.services.BlockingDistance.calculate(r);if(this._windowSize.width==window.innerWidth&&this._windowSize.height==window.innerHeight||(this._setWindowSize(),this._resizeWindow(o)),!o.hasChanged)return void this.reportCounters();for(e in o.APVs)o.APVs.hasOwnProperty(e)&&(i=this._apvWrapperHash[e],n=o.APVs[e],i?(i.setState(n.getState()),this.updateApvDataDebug(n)):this._lazyWatcherHash[e]||(this.updateApvDataDebug(n),n.getState()!==f.APVStates.Blocked&&n.getState()!==f.APVStates.Disabled&&(t(n)&&!oe.isTestGroup()?this.createLazyWatcher(n):this.createApvWrapper(n))));this.reportCounters()},n.prototype.sendFirstApvEvent=function(){this._firstRun&&(this._firstRun=!1,J.dispatchEvent(f.Events.FIRST_APV_CREATED))},n.prototype.updateApvDataDebug=function(e){this._debugPainter&&this._debugPainter.updateApvGraphics(e)},n.prototype.createLazyWatcher=function(e){var t=new s.apv.LazyLoadWatcher(e);e.setWatcher(t),t.addListener(this.handleLazyLoadWatcher,this),this._lazyWatcherHash[e.getKey()]=e,l.log("Lazy Load Watcher Created. VideoId: "+e.getVideoData().getId()+', selector: "'+e.getPlacement().getName()+'"')},n.prototype.deleteLazyWatcher=function(e){var t=e.getWatcher();t.dispose(),e.removeWatcher(),this._lazyWatcherHash[e.getKey()]=null,delete this._lazyWatcherHash[e.getKey()]},n.prototype.createApvWrapper=function(e){var t=new s.apv.APVWrapper(e);t.start(),this._apvWrapperHash[e.getKey()]=t,l.log("APV Wrapper Created. VideoId: "+e.getVideoData().getId()+', selector: "'+e.getPlacement().getName()+'"')},n.prototype.handleLazyLoadWatcher=function(e){this.createApvWrapper(e),this.deleteLazyWatcher(e)},n.prototype.reportCounters=function(){var t=e._report||{APVs:-1,Watchers:-1};e._report={APVs:Object.keys(this._apvWrapperHash).length,Watchers:Object.keys(this._lazyWatcherHash).length},t.Watchers===e._report.Watchers&&t.APVs===e._report.APVs||document.body&&document.body.appendChild&&(this._numOfFoundApvs=e._report.Watchers+e._report.APVs,l.log("Total APVs: "+e._report.APVs+", Total APVs Watchers: "+e._report.Watchers),this._htmlReport||(this._htmlReport=document.createElement("div"),this._htmlReport.setAttribute("id","minReport"),this._htmlReport.style.display="none",document.body.appendChild(this._htmlReport)),this._htmlReport.setAttribute("data-apvs",e._report.APVs),this._htmlReport.setAttribute("data-watchers",e._report.Watchers))}}();var Y=function(e,t){function n(n){var i=n.getSelectorByType(f.Selectors.VIDEO_DATA_SELECTOR),r=t.querySelector(i.querySelector),o=new RegExp(i.regex||"(.*)"),a=r.getAttribute(i.attr).match(o,"$1")[1];return e.getVideoDataByKey(a,n)}return{getVideoData:n}},j=function(e){function t(t){return"document"==t?new Y(e,document):"head"==t?new Y(e,document.head):void 0}return{create:t}},q=function(){function e(){this.active_adapter=null,this.adapters=[],this.usedInPageCallback=[]}return e.prototype.add_adapter=function(e,t){t&&(this.adapters[e]=t)},e.prototype.getAdapter=function(e){return this.adapters[e]},e.prototype.getActiveAdapter=function(){if(null!=this.active_adapter)return this.active_adapter;for(var e=ae.getActivePlayers(),t=!1,n=0;n<e.length;n++)if(-1===f.Scraper.ALL_PLAYERS.indexOf(e[n]))return l.log("Player "+e[n]+" does not exist"),null;for(var i=0;i<e.length;i++){var r=this.getAdapter(e[i]);if(r){if(r.isUsedInPage())return this.active_adapter=r,l.log("Adapters - found active adapter "+r.name),t=!0,this.active_adapter;r.setOnReadyCallback&&(t=!0,r.setOnReadyCallback(this.isUsedInPageCallback.bind(this)))}}return t||l.log("No adapters found."),null},e.prototype.addUsedInPageCallback=function(e){"function"==typeof e&&this.usedInPageCallback.push(e)},e.prototype.resetUsedInPageCallback=function(){this.usedInPageCallback=[],this.active_adapter=null},e.prototype.executeUsedInPageCallback=function(){for(var e=0;e<this.usedInPageCallback.length;e++)this.usedInPageCallback[e](this.active_adapter);this.usedInPageCallback=[]},e.prototype.isUsedInPageCallback=function(e){this.active_adapter||(this.active_adapter=e,this.executeUsedInPageCallback())},new e}();!function(){function e(e){this.name=e,this.states={BEFORE_START:0,PLAY:1,PAUSE:2,FINISHED:3},this.properties={status:{last_state:this.states.BEFORE_START},pause:{second:void 0,paused_timestamp:0},seek:{from:void 0,to:void 0},mute:{second:void 0,status:void 0},buffering:{buffering_timestamp:0},watched:{from:void 0}}}e.prototype.isUsedInPage=function(){},e.prototype.isLoaded=function(e){},e.prototype.getScrapVideoData=function(){},e.prototype.activateDataCollection=function(e){},e.prototype.addPlayEventListener=function(e,t){},q.PlayerAdapter=e}();var K;window.location.host.indexOf("skysports.com")>=0&&(K=r("data-video-id","div[data-fn='create-video'],div[data-fn='sp-player']","OO")),l.plugins.addSpecialCheck(K),q.add_adapter(f.Scraper.PlayerList.OOYALA,K),function(){function e(){this.active_adapter=null,J.addEventListener(f.Events.DomWindow.URL_CHANGE,this.handleUrlChanged,this),this.init()}var t=/[^\d\w\s\-?!]/g;e.prototype.init=function(){return this.active_adapter=null,ee.isMobile()&&ae.isDisableMobileScrap()?(l.log("Mobile Scraper disabled."),!1):(this.active_adapter=q.getActiveAdapter(),this.active_adapter?(l.log("ContentScraper - waiting for video to load."),this.waitForVideoToLoad()):(q.addUsedInPageCallback(this.isUsedInPageCallback.bind(this)),l.log("ContentScraper - waiting for adapter callback.")),!0)},e.prototype.handleUrlChanged=function(){q.resetUsedInPageCallback(),l.isCurrentUrlFilterValid(ae.getFilterScraper())&&this.init()},e.prototype.isUsedInPageCallback=function(e){this.active_adapter=e,l.log("ContentScraper - found adapter "+e.name),l.log("ContentScraper - waiting for video to load"),this.waitForVideoToLoad()},e.prototype.waitForVideoToLoad=function(){this.interval_id&&clearInterval(this.interval_id),this.interval_id=setInterval(this.checkForLoadedVideoPlayers.bind(this),f.TIMER_ELEMENT_CHECK)},e.prototype.checkForLoadedVideoPlayers=function(){var e=null;this.active_adapter.isLoaded()&&(l.log("ContentScraper - adapter "+this.active_adapter.name+" is loaded"),e=this.active_adapter.getScrapVideoData()),e&&(e.title=e.title.replace(t,""),l.log(e),this.reportVideoPlayerContent(e),clearInterval(this.interval_id))},e.prototype.reportVideoPlayerContent=function(e){ae.isEnableNewScrapper()&&l.scrapperWouldHaveBeenBlocked()?ne.getPlayerContentDelayed().push(f.Emitter.NEW_SCRAPE_EVENT,e):ne.getPlayerContent().push(f.Emitter.NEW_VIDEO_EVENT,e)},s.scrap=s.scrap||{},s.scrap.ContentScraper=e}(),o.prototype.log=function(e){this.queue.push(e),null!==this._myTimeout&&clearTimeout(this._myTimeout);var t=this;this._myTimeout=setTimeout(function(){t.send_interaction()},this.INTERVAL_TIME)},o.prototype.send_interaction=function(){0!==this.queue.length&&(ne.getAnalytics().push(f.Emitter.STATS_EVENT,{session_id:this._sessionId,interaction_id:this._interactionId,apv_id:this._apvId,min_vid_id:this._minVidId,events:this.queue}),l.log(this.queue),this.queue=[],this._interactionId++)},function(){function e(e){this._collector=new o(l.generateUID(),e.getId(),e.getVideoDBId())}e.prototype.init=function(e,t,n,i){var r={};r.clientTimestamp=e,r.initVol=Math.round(t),r.isAutoPlay=+n,r.isMute="undefined"!=typeof i?+i:0,this._collector.log({init:r})},e.prototype.pause=function(e){var t={};t.second=l.timeRounder(e),this._collector.log({pause:t})},e.prototype.pauseDuration=function(e,t){var n={};n.second=l.timeRounder(e),n.duration=l.timeRounder(t),this._collector.log({pauseDuration:n})},e.prototype.play=function(e){var t={};t.second=l.timeRounder(e),this._collector.log({play:t})},e.prototype.seek=function(e,t){var n={};n.from=l.timeRounder(e),n.to=l.timeRounder(t),this._collector.log({seek:n})},e.prototype.fullscreen=function(e,t){var n={};n.second=l.timeRounder(e),n.status=+t,this._collector.log({fullscreen:n})},e.prototype.mute=function(e,t){var n={};n.second=l.timeRounder(e),n.status=+t,this._collector.log({mute:n})},e.prototype.volume=function(e,t,n){var i={};i.second=l.timeRounder(e),i.from=l.timeRounder(t),i.delta=l.timeRounder(n),this._collector.log({vol:i})},e.prototype.watched=function(e,t){var n={};Math.round(t)>0&&(n.second=l.timeRounder(e),n.duration=l.timeRounder(t),this._collector.log({watched:n}))},e.prototype.focus=function(e,t,n){var i={};i.second=l.timeRounder(e),i.status=+t,i.isPlay=+n,this._collector.log({focus:i})},e.prototype.startBuffering=function(e){var t={};t.second=l.timeRounder(e),this._collector.log({buffer:t})},e.prototype.bufferDuration=function(e,t){var n={};n.second=l.timeRounder(e),n.duration=l.timeRounder(t),this._collector.log({bufferDuration:n})},e.prototype.qualityChange=function(e,t){var n={};n.second=l.timeRounder(e),n.quality=t,this._collector.log({qualityChange:n})},e.prototype.replay=function(){var e={};this._collector.log({replay:e})},e.prototype.ended=function(){var e={};this._collector.log({ended:e})},s.DataCollectorService=e}(),function(){function e(){this.activeCollector=null,this.init()}e.prototype.init=function(){for(var e,t,n=l.urls.getStructuredByUrl(l.urls.getCurrentUrl()),i=0;i<le.getVideosCount();i++)if(t=le.getByIndex(i),n.indexOf(t.getArticleUrl())>-1&&ue.sendLogDelayById(t.getId()),e=l.urls.getStructuredByUrl(t.getArticleUrl()),t.getDoesCollect()&&n===e){l.log("CollectorManager - Found video for data collection: "+t.getArticleUrl()),this.waitForVideoToLoad(t.getPublisherVideoId()),this.getActiveAdapter(),Se=new s.DataCollectorService(t);break}},e.prototype.getActiveAdapter=function(){var e=this;e.activeCollector=q.getActiveAdapter(),e.activeCollector||q.addUsedInPageCallback(function(t){e.activeCollector=t})},e.prototype.waitForVideoToLoad=function(e){var t=this;this.interval_id=setInterval(function(){t.checkForLoadedVideoPlayers(e)},f.TIMER_ELEMENT_CHECK)},e.prototype.checkForLoadedVideoPlayers=function(e){l.log("CollectorManager - checkForLoadedVideoPlayers"),e&&l.log("Looking for loaded video: "+e),this.activeCollector&&this.activeCollector.isLoaded(e)&&(l.log("collector "+this.activeCollector.name+" is loaded"),e&&l.log("activating video ID:"+e),this.activeCollector.activateDataCollection(e),clearInterval(this.interval_id))},s.scrap=s.scrap||{},s.scrap.CollectorManager=e}(),function(){function t(){this._activeAdapter=null,this._intervalId=0,this.init()}t.prototype.init=function(){this._activeAdapter=q.getActiveAdapter(),this._activeAdapter?this.waitForVideoToLoad():q.addUsedInPageCallback(this.isUsedInPageCallback.bind(this))},t.prototype.isUsedInPageCallback=function(e){this._activeAdapter=e,this.waitForVideoToLoad()},t.prototype.waitForVideoToLoad=function(){this._intervalId&&clearInterval(this._intervalId),this._intervalId=setInterval(this.checkForLoadedVideoPlayers.bind(this),f.TIMER_ELEMENT_CHECK)},t.prototype.checkForLoadedVideoPlayers=function(){var e=null;this._activeAdapter.isLoaded()&&(e=this._activeAdapter.getScrapVideoData()),e&&(clearInterval(this._intervalId),this._intervalId=0,this.reportVideoPresent(e))},t.prototype.reportVideoPresent=function(t){var n={id:e._publisher,url:t.url,exist:this.isUrlExistInList(t.url)};ne.getUrlReporter().push(f.Emitter.VIDEO_PRESENT,n)},t.prototype.isUrlExistInList=function(e){for(var t,n,i=l.urls.getStructuredByUrlWithoutOrigin(e),r=le.getVideosCount(),o=0;r>o;o++)if(n=le.getByIndex(o),t=l.urls.getStructuredByUrlWithoutOrigin(n.getArticleUrl()),i===t)return n.hasAPV();return!1},s.scrap=s.scrap||{},s.scrap.ScrapSearcher=t}(),function(){function e(e){function t(e,t){"authTokenChanged"==e&&t.auth_token&&(u.mb.unsubscribe("*","minuteDebug"),u.mb.subscribe("*","minuteDebug",r))}function n(){var e=_e.hadImpression(s);return!p&&e&&(p=!0),{url:c,videoId:s,counter:d,hadImpression:p}}function i(){0===d&&J.dispatchEvent(f.Events.PLAYER_VIDEO_VIEW_CLICK,n())}function r(e,r){return"error"==e?(u.mb.unsubscribe("*","minuteDebug"),u.mb.subscribe("*","minuteDebug",t),i(),d+=1,void l.log("42: -- error! Waiting for next valid video")):void(g!==h.INITIALIZING||"initialPlay"!=e&&"playheadTimeChanged"!=e?g===h.PLAY_STARTED&&"embedCodeChanged"==e&&(g=h.INITIALIZING):(g=h.PLAY_STARTED,s=u.getCurrentItemEmbedCode(),ve.sendVideoView(n()),i(),d+=1))}function o(){u.mb.subscribe("*","minuteDebug",r)}function a(){o()}var s=e.embedCode||null,c=k.getWindowLocationHref(),u=e,d=0,p=!1,h={INITIALIZING:0,PLAY_STARTED:1},g=h.INITIALIZING;a()}function t(){this.players={},this.init()}function n(){var e=null;return"undefined"!=typeof OO&&OO&&OO.__internal&&OO.__internal.players&&Object.keys(OO.__internal.players).length>0&&(e=OO.__internal.players),e}l["extends"](t,y),s.videoViews=s.videoViews||{},s.videoViews.VideoViewManager=t,t.prototype.addVideos=function(t){var n=this,i=Object.keys(t);i.forEach(function(i){"undefined"==typeof n.players[i]&&(n.players[i]=new e(t[i]),h.add(l.getTrackerTiming("PlayerLoaded")))})},t.prototype.init=function(){var e=this,t=n(),i=0,r=te.get(f.GROUP_42);void 0===r&&(r=(Math.random()>=.5?1:0)+3,te.set(f.GROUP_42,r)),setInterval(function(){t=n()||{},i!=Object.keys(t).length&&e.addVideos(t)},500)}}();var J=new y;l.debugParamsOverrides();var Z=null,Q=new A,$=new I(Q),X=new _,ee=new T(l,navigator,X),te=new P(l,$),ne=new t(l,$,f.Urls),ie=new B(l,$,te),re=new w(l,window,l.plugins.isPlugin(),l.plugins.getIframeWindows()),oe=new M(l,window,te,re,J,e.debugParams[v.FORCE_TEST]),ae=new O(e,l,oe),se=new C(l,ae,ee),le=new R(l,ae,ee,se),ce=new j(le),ue=new i(l,$,ne),de=new D(l,ae),pe=new N(l.sendLoggerReport,$),he=new N(l.sendErrorReport,$),ge=new V(l,de,ee),fe=new x(l,oe,ee,ae,ne,ie),ve=new H(l,ne,oe,te,ee,le,fe),me=new L(ae,ee,l,document,a),ye=new U(ee),Ee=new n(oe,ae),_e=null,Se=null,be=parseInt("2");l.checkPotentialScraperUrls(),c.utils=c.utils||{};var Ae=function(){function t(){return l.globalTasks.listenToWindowErrors(),l.log(e.debugParams),Z=z.create(l,$,window.location),Z.get(Z.CONSTS.DISABLE_VERSION)===e.ver?void l.log("disabled by feature flag"):e.debugParams[m.IS_PROCUTION]&&"true"==e.debugParams[v.DISABLE_PROD]?void l.log("Minute Production disabled by debug tool"):(console.log("Welcome to Minute "+e.ver+" "+e.debugParams[m.SCRIPT_HOSTNAME]),l.log("Getting configuration for publisher: "+e._publisher),l.urls.setReferrerUrl(),n(),T=_.bind(this),window.addEventListener("load",T),void J.addEventListener(f.Events.FIRST_APV_CREATED,b))}function n(){switch(U+=1,be){case 1:ye.loadAll({onSuccess:o,onTimeout:i});break;case 2:ye.loadFirstArticle({onSuccess:o,onTimeout:i})}}function i(){y(),window.removeEventListener("load",T),U>O?l.logWarning("Configuration timeout "+U+", NO more tryout."):(l.log("Configuration timeout "+U+", trying again ..."),n())}function r(){G||(h=pe.get(ae.getTrackingFunnel()),g=he.get(ae.getTrackingFunnel()),ae.getIsBlockerCheck()&&(h.forceFlush("BlockerCounter"),g.forceFlush("BlockerCounter")),h.add("Test:"+oe.getGroupCode()),h.add("Mobile:"+(ee.isMobile()?1:0)),l.plugins.isPlugin()&&h.add("Plugin:1"),l.trackMinuteGenesis(),h.add(l.getTrackerTiming("ConfigLoaded")),h.add("Mobile:"+(ee.isMobile()?1:0)),fe.init(h,_e),G=!0)}function o(t){l.log("Configuration loaded"),x=t,x.fallbackUsed=l.parseBool(x.fallbackUsed),ee.init(x.config),te.init(),ie.init(),ae.init(x.config,ee,u,e.debugParams[v.DISABLE_SCRIPT],e.debugParams[v.ENABLE_BLOCKING_DISTANCE]),_e=Ee.create(),_e.init(),ve.init(h,_e);var n=X.compareStr(e.ver,ae.getMinimumVer())<0;return n?void l.log("minute blocked by minimum version"):(oe.init(ae.getTestGroupSize(),l.plugins.isPlugin()),k.init(),re.broadcast(oe.isTestGroup()),l.plugins.isPlugin()||re.addParentListener(function(e){r(),e.funnelData&&(l.log("Got tracker data"),h.add(l.getTrackerTiming(e.funnelData)))}),!l.plugins.isPlugin()||oe.isReady()&&k.isReady()?(r(),E(),_()):(J.addEventListener(f.Events.TEST_MODE_READY,a),J.addEventListener(f.Events.WINDOW_SERVICE_READY,c)),void re.listen())}function a(){l.log("testGroupService.isTest = "+oe.isTestGroup()+" "+window.location.origin),J.removeEventListener(f.Events.TEST_MODE_READY,a),d()}function c(){l.log("Plugin Top Window URL = "+k.getWindowLocationHref()),J.removeEventListener(f.Events.WINDOW_SERVICE_READY,c),l.debugParamsOverrides(!0),d()}function d(){oe.isReady()&&k.isReady()&&(r(),E(),_())}function p(){y(),B=setTimeout(function(){M=!0,l.log("Minute window load start after timeout."),_()}.bind(this),ae.getWindowLoadTimeout())}function y(){B&&clearTimeout(B),B=0}function E(){if(!H){if(W.sendUrlReport(),l.hasVideoViewEnabled()&&(V=new s.videoViews.VideoViewManager),!ee.isBrowserSupported())return l.log("Minute is not supported "+e.ver+" "+e.debugParams[m.SCRIPT_HOSTNAME]),h.add("NoBrowser"),l.sendLoggerReport("ver="+e.ver+"&pid="+e._publisher+"&incompatibility=Browser"),void y();if(!$.getLocalStorageInstance())return l.log("Local Storage and Session Storage are not supported. Disable Minute."),h.forceFlush("Storage:No"),$.isLocalStorageEnable||$.isSessionStorageEnable||Q.isCookiesEnable||l.sendLoggerReport("ver="+e.ver+"&pid="+e._publisher+"&incompatibility=NoStorage"),void y();$.isLocalStorageEnable?h.add("Storage:Local"):$.isSessionStorageEnable?h.add("Storage:Session"):Q.isCookiesEnable&&h.add("Storage:Cookies"),l.log("** PlayMode is set to: "+ae.getDefaultPlayMode()),h.add("Visit"),le.init(x),ue.init(h),ge.init(ae),ge.getAllPlacements(),l.validateScraperURL(),H=!0}}function _(){S()&&(h.add("Start"),I(),P())}function S(){return H?ae.isReady()?(le.getVideosCount()||l.log("no videos found in configuration"),"complete"===document.readyState||"true"==e.debugParams[v.BYPASS_WINDOW_LOAD]||M?(y(),"true"!=e.debugParams[v.FORCE_ENABLE]&&ae.isDisableScript()?(l.log("Minute disable by configuration."),!1):(window.removeEventListener("load",T),!0)):(p(),l.log("Minute wait for window load."),!1)):(l.log("Configuration did not load yet."),!1):!1}function b(){J.removeEventListener(f.Events.FIRST_APV_CREATED,b),h.add("Scraper"),A()}function A(){h.add("Scraper"),l.log("Scraper creation."),l.flags.isNewScraper()?C=new s.scrap.ScraperService:(C=new s.scrap.ContentScraper,R=new s.scrap.CollectorManager,D=new s.scrap.ScrapSearcher)}function I(){l.isPlacementEnabled()?(N=new s.services.PlacementServices,F.init()):(A(),l.log("** Placement Disabled by configuration. See filter configuration. **"))}function P(){2===be&&(x.fallbackUsed||ye.loadVideosFallback({onSuccess:w,onTimeout:L}),J.addEventListener(f.Events.DomWindow.URL_CHANGE,function(){ye.loadNextArticle({onSuccess:w,videosFallback:!1,pageUrl:k.getWindowLocationHref()})}))}function w(e){le.appendVideos(e)}function L(){U>O?l.logWarning("All videos timeout "+U+", NO more tryout."):(l.log("All videos timeout "+U+", trying again ..."),P())}var T,O=10,C=null,R=null,D=null,V=null,N=null,U=0,M=!1,B=0,x=null,H=!1,G=!1;t()};new Ae;return e}(_min||{});