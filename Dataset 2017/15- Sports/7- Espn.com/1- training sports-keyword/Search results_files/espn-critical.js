function buildOutHeadlinesForPinnedSite(){}function StrategyInterface(){}function OoyalaStrategy(player){this.player_=player,this.ready_=!1,this.currentAdPosition_=void 0,this.videoPlayed_=!1,this.adPlayed_=!1,this.viewStartTime_=void 0,this.adStartTime_=void 0,this.autoplayType_=void 0,this.initialize_()}!function(a,b){function cy(a){return f.isWindow(a)?a:9===a.nodeType&&(a.defaultView||a.parentWindow)}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove(),"none"!==e&&""!==e||(cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl),cm&&cl.createElement||(cm=(cl.contentWindow||cl.contentDocument).document,cm.write(("CSS1Compat"===c.compatMode?"<!doctype html>":"")+"<html><body>"),cm.close()),d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)),ck[a]=e}return ck[a]}function cu(a,b){var c={};return f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a}),c}function ct(){cr=b}function cs(){return setTimeout(ct,0),cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var g,h,j,l,m,n,o,p,d=a.dataTypes,e={},i=d.length,k=d[0];for(g=1;g<i;g++){if(1===g)for(h in a.converters)"string"==typeof h&&(e[h.toLowerCase()]=a.converters[h]);if(l=k,k=d[g],"*"===k)k=l;else if("*"!==l&&l!==k){if(m=l+" "+k,n=e[m]||e["* "+k],!n){p=b;for(o in e)if(j=o.split(" "),(j[0]===l||"*"===j[0])&&(p=e[j[1]+" "+k])){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function cb(a,c,d){var h,i,j,k,e=a.contents,f=a.dataTypes,g=a.responseFields;for(i in g)i in d&&(c[g[i]]=d[i]);for(;"*"===f[0];)f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function ca(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+("object"==typeof e||f.isArray(e)?b:"")+"]",e,c,d)});else if(c||null==b||"object"!=typeof b)d(a,b);else for(var e in b)ca(a+"["+e+"]",b[e],c,d)}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var l,h=a[f],i=0,j=h?h.length:0,k=a===bT;i<j&&(k||!l);i++)l=h[i](c,d,e),"string"==typeof l&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g)),l}function bZ(a){return function(b,c){if("string"!=typeof b&&(c=b,b="*"),f.isFunction(c))for(var h,i,j,d=b.toLowerCase().split(bP),e=0,g=d.length;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}function bC(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?bx:by,g=0,h=e.length;if(d>0){if("border"!==c)for(;g<h;g++)c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),"margin"===c?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0;return d+"px"}if(d=bz(a,b,b),(d<0||null==d)&&(d=a.style[b]||0),d=parseFloat(d)||0,c)for(;g<h;g++)d+=parseFloat(f.css(a,"padding"+e[g]))||0,"padding"!==c&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),"margin"===c&&(d+=parseFloat(f.css(a,c+e[g]))||0);return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");return bh.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();"input"===b?bm(a):"script"!==b&&"undefined"!=typeof a.getElementsByTagName&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){"checkbox"!==a.type&&"radio"!==a.type||(a.defaultChecked=a.checked)}function bl(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function bk(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando))}function bj(a,b){if(1===b.nodeType&&f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function T(a,b,c){if(b=b||0,f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if("string"==typeof b){var d=f.grep(a,function(a){return 1===a.nodeType});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&("queue"===c||!f._data(a,e))&&("mark"===c||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a)if(("data"!==b||!f.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function l(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(k,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d||"false"!==d&&("null"===d?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d)}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var c,d,b=g[a]={};for(a=a.split(/\s+/),c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){return void setTimeout(J,1)}e.ready()}}var h,z,A,B,e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/gi,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("body"===a&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if("string"==typeof a){if(g="<"!==a.charAt(0)||">"!==a.charAt(a.length-1)||a.length<3?i.exec(a):[null,a,null],g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);if(h=c.getElementById(g[2]),h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return null==a?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),A.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;for("boolean"==typeof i&&(l=i,i=arguments[1]||{},j=2),"object"!=typeof i&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);j<k;j++)if(null!=(a=arguments[j]))for(c in a)d=i[c],f=a[c],i!==f&&(l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f));return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);if(e.isReady=!0,a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){if(A=e.Callbacks("once memory"),"complete"===c.readyState)return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=null==a.frameElement}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return"function"===e.type(a)},isArray:Array.isArray||function(a){return"array"===e.type(a)},isWindow:function(a){return a&&"object"==typeof a&&"setInterval"in a},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==e.type(a)||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){return"string"==typeof b&&b?(b=e.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):n.test(b.replace(o,"@").replace(p,"]").replace(q,""))?new Function("return "+b)():void e.error("Invalid JSON: "+b)):null},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d)if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h&&c.apply(a[g++],d)!==!1;);else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h&&c.call(a[g],g,a[g++])!==!1;);return a},trim:G?function(a){return null==a?"":G.call(a)}:function(a){return null==a?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var d=e.type(a);null==a.length||"string"===d||"function"===d||"regexp"===d||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);for(d=b.length,c=c?c<0?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if("number"==typeof c.length)for(var f=c.length;e<f;e++)a[d++]=c[e];else for(;c[e]!==b;)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var e,d=[];c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&"number"==typeof j&&(j>0&&a[0]&&a[j-1]||0===j||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),null!=f&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),null!=f&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if("string"==typeof c){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h){var i=a.length;if("object"==typeof c){for(var j in c)e.access(a,j,c[j],f,g,d);return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++)g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h);return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){return f&&f instanceof e&&!(f instanceof a)&&(f=a(f)),e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){"complete"===c.readyState&&(c.detachEvent("onreadystatechange",B),e.ready())}),e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var e,i,j,k,l,c=[],d=[],m=function(b){var d,e,g,h;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),"array"===h?m(g):"function"===h&&(!a.unique||!o.has(g))&&c.push(g)},n=function(b,f){for(f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;c&&l<k;l++)if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c)for(var b=arguments,d=0,e=b.length;d<e;d++)for(var f=0;f<c.length&&(b[d]!==c[f]||(i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1),!a.unique));f++);return this},has:function(a){if(c)for(var b=0,d=c.length;b<d;b++)if(a===c[b])return!0;return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=b,this},disabled:function(){return!c},lock:function(){return d=b,(!e||e===!0)&&o.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var j,b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var g,c=b[0],e=b[1];f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({});for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;return i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i),i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,n,o,p,q=c.createElement("div");c.documentElement;if(q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0],!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:3===q.firstChild.nodeType,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:"/a"===e.getAttribute("href"),opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:"on"===i.value,optSelected:h.selected,getSetAttribute:"t"!==q.className,enctype:!!c.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==c.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}if(!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue="t"===i.value,i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)),q.attachEvent)for(o in{submit:1,change:1,focusin:1})n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p="function"==typeof q[n]),b[o+"Bubbles"]=p;return k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div><table "+n+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&0===l[0].offsetHeight,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=2===q.offsetWidth,"undefined"!=typeof q.style.zoom&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=2===q.offsetWidth,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=2!==q.offsetWidth),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:5!==e.offsetTop,doesAddBorderForTableAndCells:5===h.offsetTop},e.style.position="fixed",e.style.top="20px",i.fixedPosition=20===e.offsetTop||15===e.offsetTop,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))}),b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!m(a)},data:function(a,c,d,e){if(f.acceptData(a)){var g,h,i,j=f.expando,k="string"==typeof c,l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o="events"===c;if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;return n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop)),"object"!=typeof c&&"function"!=typeof c||(e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)),g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d),o&&!h[c]?g.events:(k?(i=h[c],null==i&&(i=h[f.camelCase(c)])):i=h,i)}},removeData:function(a,b,c){if(f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b&&(d=c?j[k]:j[k].data)){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b=b in d?[b]:b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}if(!c&&(delete j[k].data,!m(j[k])))return;f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if("undefined"==typeof a){if(this.length&&(h=f.data(this[0]),1===this[0].nodeType&&!f._data(this[0],"parsedAttrs"))){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++)g=e[i].name,0===g.indexOf("data-")&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]));f._data(this[0],"parsedAttrs",!0)}return h}return"object"==typeof a?this.each(function(){f.data(this,a)}):(d=a.split("."),d[1]=d[1]?"."+d[1]:"",c===b?(h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h)),h===b&&d[1]?this.data(d[0]):h):this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)}))},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){if(a!==!0&&(c=b,b=a,a=!1),b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){return"string"!=typeof a&&(c=a,a="fx"),c===b?f.queue(this[0],a):this.each(function(){var b=f.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}"string"!=typeof a&&(c=a,a=b),a=a||"fx";for(var l,d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark";g--;)(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))&&(h++,l.add(m));return m(),d.promise()}});var w,x,y,o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(p),c=0,d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(g=" "+e.className+" ",h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}else e.className=a;return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(p),d=0,e=this.length;d<e;d++)if(g=this[d],1===g.nodeType&&g.className)if(a){for(h=(" "+g.className+" ").replace(o," "),i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className="";return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,g=0,h=f(this),i=b,j=a.split(p);e=j[g++];)i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e);else"undefined"!==c&&"boolean"!==c||(this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;c<d;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];return arguments.length?(e=f.isFunction(a),this.each(function(d){var h,g=f(this);1===this.nodeType&&(h=e?a.call(this,d,g.val()):a,null==h?h="":"number"==typeof h?h+="":f.isArray(h)&&(h=f.map(h,function(a){return null==a?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type],c&&"set"in c&&c.set(this,h,"value")!==b||(this.value=h))})):g?(c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type],c&&"get"in c&&(d=c.get(g,"value"))!==b?d:(d=g.value,"string"==typeof d?d.replace(q,""):null==d?"":d)):void 0}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j="select-one"===a.type;if(g<0)return null;for(c=j?g:0,d=j?g+1:i.length;c<d;c++)if(e=i[c],e.selected&&(f.support.optDisabled?!e.disabled:null===e.getAttribute("disabled"))&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){if(b=f(e).val(),j)return b;h.push(b)}return j&&!h.length&&i.length?f(i[g]).val():h},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(a&&3!==j&&8!==j&&2!==j)return e&&c in f.attrFn?f(a)[c](d):"undefined"==typeof a.getAttribute?f.prop(a,c,d):(i=1!==j||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w)),d!==b?null===d?void f.removeAttr(a,c):h&&"set"in h&&i&&(g=h.set(a,d,c))!==b?g:(a.setAttribute(c,""+d),d):h&&"get"in h&&i&&null!==(g=h.get(a,c))?g:(g=a.getAttribute(c),null===g?b:g))},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&1===a.nodeType)for(d=b.toLowerCase().split(p),g=d.length;h<g;h++)e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&"radio"===b&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return w&&f.nodeName(a,"button")?w.get(a,b):b in a?a.value:null},set:function(a,b,c){return w&&f.nodeName(a,"button")?w.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return h=1!==i||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]),d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&null!==(e=g.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(y[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);return e||(e=c.createAttribute(d),a.setAttributeNode(e)),e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){""===b&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){
var b=F.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,r,s;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(h=f._data(a))){for(d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return"undefined"==typeof f||a&&f.event.triggered===a.type?b:f.event.dispatch.apply(i.elem,arguments)},i.elem=a),c=f.trim(I(c)).split(" "),k=0;k<c.length;k++)l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m],r||(r=j[m]=[],r.delegateCount=0,s.setup&&s.setup.call(a,e,n,i)!==!1||(a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i))),s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var h,i,j,k,l,m,n,o,p,q,r,s,g=f.hasData(a)&&f._data(a);if(g&&(o=g.events)){for(b=f.trim(I(b||"")).split(" "),h=0;h<b.length;h++)if(i=A.exec(b[h])||[],j=k=i[1],l=i[2],j){for(p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||"**"===d&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));0===r.length&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}else for(j in o)f.event.remove(a,j+b[h],c,d,!0);f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||3!==e.nodeType&&8!==e.nodeType){var j,k,l,m,n,o,p,q,r,s,h=c.type||c,i=[];if(E.test(h+f.event.triggered))return;if(h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort()),(!e||f.event.customEvent[h])&&!f.event.global[h])return;if(c="object"==typeof c?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"",!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}if(c.result=b,c.target||(c.target=e),d=null!=d?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{},p.trigger&&p.trigger.apply(e,d)===!1)return;if(r=[[e,p.bindType||h]],!g&&!p.noBubble&&!f.isWindow(e)){for(s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();return c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&("click"!==h||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&("focus"!==h&&"blur"!==h||0!==c.target.offsetWidth)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n)),c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var j,k,l,m,n,o,p,q,r,s,d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[];if(g[0]=c,c.delegateTarget=this,e&&!c.target.disabled&&(!c.button||"click"!==c.type))for(m=f(this),m.context=this.ownerDocument||this,l=c.target;l!=this;l=l.parentNode||this){for(o={},q=[],m[0]=l,j=0;j<e;j++)r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r);q.length&&i.push({elem:l,matches:q})}for(d.length>e&&i.push({elem:this,matches:d.slice(e)}),j=0;j<i.length&&!c.isPropagationStopped();j++)for(p=i[j],c.currentTarget=p.elem,k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++)r=p.matches[k],(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace))&&(c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation())));return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;return null==a.pageX&&null!=d.clientX&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=1&h?1:2&h?3:4&h?2:0),a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;for(a=f.Event(g),d=i.length;d;)e=i[--d],a[e]=g[e];return a.target||(a.target=g.srcElement||c),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){return this instanceof f.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0,void 0):new f.Event(a,b)},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var h,c=this,d=a.relatedTarget,e=a.handleObj;e.selector;return d&&(d===c||f.contains(c,d))||(a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b),h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){return!f.nodeName(this,"form")&&void f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){return!f.nodeName(this,"form")&&void f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){return z.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(f.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})),!1):void f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){0===d++&&c.addEventListener(a,e,!0)},teardown:function(){0===--d&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if("object"==typeof a){"string"!=typeof c&&(d=c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=J;else if(!e)return this;return 1===g&&(h=e,e=function(a){return f().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++)),this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler),this}if("object"==typeof a){for(var g in a)this.off(g,c,a[g]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=J),this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return f(this.context).on(a,this.selector,b,c),this},die:function(a,b){return f(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;return f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;for(j=j[a];j;){if(j[d]===c){k=e[j.sizset];break}if(1===j.nodeType)if(g||(j[d]=c,j.sizset=h),"string"!=typeof b){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;for(j=j[a];j;){if(j[d]===c){k=e[j.sizset];break}if(1===j.nodeType&&!g&&(j[d]=c,j.sizset=h),j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(1!==d.nodeType&&9!==d.nodeType)return[];if(!b||"string"!=typeof b)return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do if(a.exec(""),i=a.exec(x),i&&(x=i[3],w.push(i[1]),i[2])){l=i[3];break}while(i);if(w.length>1&&p.exec(b))if(2===w.length&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else for(j=o.relative[w[0]]?[d]:m(w.shift(),d);w.length;)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f);else if(!f&&w.length>1&&9===d.nodeType&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]),d)for(n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!d.parentNode?d:d.parentNode,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;w.length;)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",null==r&&(r=d),o.relative[q](k,r,v);else k=w=[];if(k||(k=j),k||m.error(q||b),"[object Array]"===g.call(k))if(u)if(d&&1===d.nodeType)for(t=0;null!=k[t];t++)k[t]&&(k[t]===!0||1===k[t].nodeType&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;null!=k[t];t++)k[t]&&1===k[t].nodeType&&e.push(j[t]);else e.push.apply(e,k);else s(k,e);return l&&(m(l,h,e,f),m.uniqueSort(e)),e};m.uniqueSort=function(a){if(u&&(h=i,a.sort(u),h))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++)if(h=o.order[e],(g=o.leftMatch[h].exec(a))&&(i=g[1],g.splice(1,1),"\\"!==i.substr(i.length-1)&&(g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c),null!=d))){a=a.replace(o.match[h],"");break}return d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){for(var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);a&&c.length;){for(h in o.filter)if(null!=(f=o.leftMatch[h].exec(a))&&f[2]){if(k=o.filter[h],l=f[1],g=!1,f.splice(1,1),"\\"===l.substr(l.length-1))continue;if(s===r&&(r=[]),o.preFilter[h])if(f=o.preFilter[h](f,s,d,r,e,t)){if(f===!0)continue}else g=i=!0;if(f)for(n=0;null!=(j=s[n]);n++)j&&(i=k(j,f,n,s),p=e^i,d&&null!=i?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){if(d||(s=r),a=a.replace(o.match[h],""),!g)return[];break}}if(a===q){if(null!=g)break;m.error(a)}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(1===d||9===d){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(3===d||4===d)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var h,f=0,g=a.length;f<g;f++)if(h=a[f]){for(;(h=h.previousSibling)&&1!==h.nodeType;);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!l.test(b)){for(b=b.toLowerCase();e<f;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b&&g}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;"string"==typeof b&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;"string"==typeof b&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!=typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(j,"")+" ",f)return a;for(var h,g=0;null!=(h=b[g]);g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if("not"===b[1]){if(!((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))){var g=m.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}b[3]=m(b[3],null,null,c)}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,i,j,k=b[1],l=a;switch(k){case"only":case"first":for(;l=l.previousSibling;)if(1===l.nodeType)return!1;if("first"===k)return!0;l=a;case"last":for(;l=l.nextSibling;)if(1===l.nodeType)return!1;return!0;case"nth":if(c=b[2],e=b[3],1===c&&0===e)return!0;if(f=b[0],g=a.parentNode,g&&(g[d]!==f||!a.nodeIndex)){for(i=0,l=g.firstChild;l;l=l.nextSibling)1===l.nodeType&&(l.nodeIndex=++i);g[d]=f}return j=a.nodeIndex-e,0===c?0===j:j%c===0&&j/c>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:!f&&m.attr?null!=d:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f&&(e===g||e.substr(0,g.length+1)===g+"-"):e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if("[object Array]"===g.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b)?-1:1:a.compareDocumentPosition?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if("undefined"!=typeof c.getElementById&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||"undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){m=function(b,e,f,g){if(e=e||c,!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(1===e.nodeType||9===e.nodeType)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(9===e.nodeType){if("body"===b&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(1===e.nodeType&&"object"!==e.nodeName.toLowerCase()){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){if(c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&11!==a.document.nodeType)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");if(a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length){if(a.lastChild.className="e",1===a.getElementsByClassName("e").length)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if("undefined"!=typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(!a.contains||a.contains(b))}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return!!b&&"HTML"!==b.nodeName};var y=function(a,b,c){for(var d,e=[],f="",g=b.nodeType?[b]:b;d=o.match.PSEUDO.exec(a);)f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var c,d,b=this;if("string"!=typeof a)return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var g,h,i,e=this.pushStack("","find",a);for(c=0,d=this.length;c<d;c++)if(g=e.length,f.find(a,this[c],e),c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var d,e,c=[],g=this[0];if(f.isArray(a)){for(var h=1;g&&g.ownerDocument&&g!==b;){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||"string"!=typeof a?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++)for(g=this[d];g;){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}if(g=g.parentNode,!g||!g.ownerDocument||g===b||11===g.nodeType)break}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?"string"==typeof a?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"==typeof a?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);return L.test(a)||(d=c),d&&"string"==typeof d&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse()),this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){for(var e=[],g=a[c];g&&9!==g.nodeType&&(d===b||1!==g.nodeType||!f(g).is(d));)1===g.nodeType&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;for(var e=0;a&&(1!==a.nodeType||++e!==b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.isFunction(a)?this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))}):"object"!=typeof a&&a!==b?this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a)):f.text(this)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){
1===this.nodeType&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1===this.nodeType&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f.clean(arguments)),a}},remove:function(a,b){for(var d,c=0;null!=(d=this[c]);c++)a&&!f.filter(a,[d]).length||(!b&&1===d.nodeType&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d));return this},empty:function(){for(var b,a=0;null!=(b=this[a]);a++)for(1===b.nodeType&&f.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(W,""):null;if("string"!=typeof a||ba.test(a)||!f.support.leadingWhitespace&&X.test(a)||bg[(Z.exec(a)||["",""])[1].toLowerCase()])f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a);else{a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++)1===this[c].nodeType&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}catch(e){this.empty().append(a)}}return this},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&3===arguments.length&&"string"==typeof j&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){if(i=j&&j.parentNode,e=f.support.parentNode&&i&&11===i.nodeType&&i.childNodes.length===this.length?{fragment:i}:f.buildFragment(a,this,k),h=e.fragment,g=1===h.childNodes.length?h=h.firstChild:h.firstChild,g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),1===a.length&&"string"==typeof j&&j.length<512&&i===c&&"<"===j.charAt(0)&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&1!==h&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=1===this.length&&this[0].parentNode;if(g&&11===g.nodeType&&1===g.childNodes.length&&1===e.length)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if(!(f.support.noCloneEvent&&f.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||f.isXMLDoc(a)))for(bk(a,h),d=bl(a),e=bl(h),g=0;d[g];++g)e[g]&&bk(d[g],e[g]);if(b&&(bj(a,h),c))for(d=bl(a),e=bl(h),g=0;d[g];++g)bj(d[g],e[g]);return d=e=null,h},clean:function(a,b,d,e){var g;b=b||c,"undefined"==typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var i,k,h=[],j=0;null!=(k=a[j]);j++)if("number"==typeof k&&(k+=""),k){if("string"==typeof k)if(_.test(k)){k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");for(b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];n--;)o=o.lastChild;if(!f.support.tbody){var p=$.test(k),q="table"!==l||p?"<table>"!==m[1]||p?[]:o.childNodes:o.firstChild&&o.firstChild.childNodes;for(i=q.length-1;i>=0;--i)f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}else k=b.createTextNode(k);var r;if(!f.support.appendChecked)if(k[0]&&"number"==typeof(r=k.length))for(i=0;i<r;i++)bn(k[i]);else bn(k);k.nodeType?h.push(k):h=f.merge(h,k)}if(d)for(g=function(a){return!a.type||be.test(a.type)},j=0;h[j];j++)if(!e||!f.nodeName(h[j],"script")||h[j].type&&"text/javascript"!==h[j].type.toLowerCase()){if(1===h[j].nodeType){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}else e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j]);return h},cleanData:function(a){for(var b,c,i,d=f.cache,e=f.event.special,g=f.support.deleteExpando,h=0;null!=(i=a[h]);h++)if((!i.nodeName||!f.noData[i.nodeName.toLowerCase()])&&(c=i[f.expando])){if(b=d[c],b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}});var bz,bA,bB,bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"];f.fn.css=function(a,c){return 2===arguments.length&&c===b?this:f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];if(c=f.cssProps[i]||i,d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];if(h=typeof d,"string"===h&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number"),null==d||"number"===h&&isNaN(d))return;if("number"===h&&!f.cssNumber[i]&&(d+="px"),!(k&&"set"in k&&(d=k.set(a,d))===b))try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;return c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,"cssFloat"===c&&(c="float"),g&&"get"in g&&(e=g.get(a,!0,d))!==b?e:bz?bz(a,c):void 0},swap:function(a,b,c){var d={};for(var e in b)d[e]=a.style[e],a.style[e]=b[e];c.call(a);for(e in b)a.style[e]=d[e]}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c)return 0!==a.offsetWidth?bC(a,b,d):(f.swap(a,bw,function(){e=bC(a,b,d)}),e)},set:function(a,b){return bt.test(b)?(b=parseFloat(b),b>=0?b+"px":void 0):b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+100*b+")":"",g=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===f.trim(g.replace(bq,""))&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=bq.test(g)?g.replace(bq,e):g+" "+e)}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;return f.swap(a,{display:"inline-block"},function(){c=b?bz(a,"margin-right","marginRight"):a.style.marginRight}),c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;return b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""===c&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return null===f&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),""===f?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return 0===b&&0===c||!f.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||f.css(a,"display"))},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});var bV,bW,bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if("string"!=typeof a&&bS)return bS.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):"object"==typeof c&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return null==c?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b),a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(2!==s){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,y,z,w=c,x=l?cb(d,v,l):b;if(a>=200&&a<300||304===a)if(d.ifModified&&((y=v.getResponseHeader("Last-Modified"))&&(f.lastModified[k]=y),(z=v.getResponseHeader("Etag"))&&(f.etag[k]=z)),304===a)w="notmodified",o=!0;else try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}else u=w,w&&!a||(w="error",a<0&&(a=0));v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}"object"==typeof a&&(c=a,a=b),c=c||{};var k,n,o,p,q,r,t,u,d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},l={},m={},s=0,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return 2===s?n:null},getResponseHeader:function(a){var c;if(2===s){if(!o)for(o={};c=bH.exec(n);)o[c[1].toLowerCase()]=c[2];c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};if(h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),null==d.crossDomain&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||("http:"===r[1]?80:443))==(bW[3]||("http:"===bW[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v),2===s)return!1;if(t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&0===f.active++&&f.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url,d.cache===!1)){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||2===s))return v.abort(),!1;for(u in{success:1,error:1,complete:1})v[u](d[u]);if(p=b$(bU,d,c,v)){v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(!(s<2))throw z;w(-1,z)}}else w(-1,"No Transport");return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=f.ajaxSettings.traditional),f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)ca(g,a[g],c,e);return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e="application/x-www-form-urlencoded"===b.contentType&&"string"==typeof b.data;if("jsonp"===b.dataTypes[0]||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){(c||!d.readyState||/loaded|complete/.test(d.readyState))&&(d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success"))},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ch,cf=!!a.ActiveXObject&&function(){for(var a in ch)ch[a](0,1)},cg=0;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var i,j,h=c.xhr();if(c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async),c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||4===h.readyState))if(d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]),e)4!==h.readyState&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}j||!c.isLocal||c.crossDomain?1223===j&&(j=204):j=m.text?200:404}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},c.async&&4!==h.readyState?(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cl,cm,cp,cr,ck={},cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];f.fn.extend({show:function(a,b,c){var d,e;if(a||0===a)return this.animate(cu("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&"none"===e&&(e=d.style.display=""),""===e&&"none"===f.css(d,"display")&&f._data(d,"olddisplay",cv(d.nodeName)));for(g=0;g<h;g++)d=this[g],d.style&&(e=d.style.display,""!==e&&"none"!==e||(d.style.display=f._data(d,"olddisplay")||""));return this},hide:function(a,b,c){if(a||0===a)return this.animate(cu("hide",3),a,b,c);for(var d,e,g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),"none"!==e&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d="boolean"==typeof a;return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var g,h,i,j,k,l,m,n,o,b=f.extend({},e),c=1===this.nodeType,d=c&&f(this).is(":hidden");b.animatedProperties={};for(i in a){if(g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing","hide"===h&&d||"show"===h&&!d)return b.complete.call(this);c&&("height"===g||"width"===g)&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===f.css(this,"display")&&"none"===f.css(this,"float")&&(f.support.inlineBlockNeedsLayout&&"inline"!==cv(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=b.overflow&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||("toggle"===h?d?"show":"hide":0),o?(f._data(this,"toggle"+i,"show"===o?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),"px"!==n&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=("-="===k[1]?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""));return!0}var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),e.queue===!1?this.each(g):this.queue(e.queue,g))},stop:function(a,c,d){return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);if(d||f._unmark(!0,this),null==a)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(null==a||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&"object"==typeof a?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};return d.duration=f.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)},d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?b&&"auto"!==b?b:0:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){if(null!=i.overflow&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide(),i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}return i.duration==1/0?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){for(var a,b=f.timers,c=0;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?f.fn.offset=function(a){var c,b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b))return c?{top:c.top,left:c.left}:{top:0,left:0};var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a)return this.each(function(b){f.offset.setOffset(this,a,b)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return f.offset.bodyOffset(b);for(var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;(b=b.parentNode)&&b!==i&&b!==h&&(!f.support.fixedPosition||"fixed"!==k.position);)c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&"visible"!==c.overflow&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c;return"relative"!==k.position&&"static"!==k.position||(l+=i.offsetTop,m+=i.offsetLeft),f.support.fixedPosition&&"fixed"===k.position&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft)),{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");"static"===d&&(a.style.position="relative");var m,n,e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=("absolute"===d||"fixed"===d)&&f.inArray("auto",[h,i])>-1,k={},l={};j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),null!=b.top&&(k.top=b.top-g.top+m),null!=b.left&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||c.body;a&&!cx.test(a.nodeName)&&"static"===f.css(a,"position");)a=a.offsetParent;return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;return c===b?(e=this[0])?(g=cy(e),g?"pageXOffset"in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]):null:this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e)return null==a?null:this;if(f.isFunction(a))return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))});if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return"CSS1Compat"===e.document.compatMode&&g||h&&h["client"+c]||g}if(9===e.nodeType)return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c]);if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,"string"==typeof a?a:a+"px")}}),a.jQuery=a.$=f,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})}(window),function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||"undefined"==typeof n&&e)return 1;if(n<t||!e||"undefined"==typeof t&&r)return-1}return 0}function t(n,t,r){if(t!==t)return h(n,r);r=(r||0)-1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function r(n){return"function"==typeof n||!1}function e(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function u(n){return"string"==typeof n?n:null==n?"":n+""}function o(n){return n.charCodeAt(0)}function i(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r}function f(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function a(t,r){return n(t.a,r.a)||t.b-r.b}function c(t,r){for(var e=-1,u=t.a,o=r.a,i=u.length;++e<i;){var f=n(u[e],o[e]);if(f)return f}return t.b-r.b}function l(n){return Nt[n]}function s(n){return Ut[n]}function p(n){return"\\"+$t[n]}function h(n,t,r){var e=n.length;for(t=r?t||e:(t||0)-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function _(n){return n&&"object"==typeof n||!1}function g(n){return 160>=n&&9<=n&&13>=n||32==n||160==n||5760==n||6158==n||8192<=n&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function v(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function y(n){for(var t=-1,r=n.length;++t<r&&g(n.charCodeAt(t)););return t}function d(n){for(var t=n.length;t--&&g(n.charCodeAt(t)););return t}function m(n){return Ft[n]}function w(g){function Nt(n){if(_(n)&&!(Wo(n)||n instanceof Lt)){if(n instanceof Ft)return n;if(Fu.call(n,"__chain__")&&Fu.call(n,"__wrapped__"))return ge(n)}return new Ft(n)}function Ut(){}function Ft(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Lt(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=po,this.__views__=null}function $t(){this.__data__={}}function zt(n){var t=n?n.length:0;for(this.data={hash:ro(null),set:new Gu};t--;)this.push(n[t])}function Dt(n,t){var r=n.data;return("string"==typeof t||He(t)?r.set.has(t):r.hash[t])?0:-1}function qt(n,t){var r=-1,e=n.length;for(t||(t=bu(e));++r<e;)t[r]=n[r];return t}function Pt(n,t){for(var r=-1,e=n.length;++r<e&&!1!==t(n[r],r,n););return n}function Kt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Vt(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Yt(n,t){for(var r=-1,e=n.length,u=bu(e);++r<e;)u[r]=t(n[r],r,n);return u}function Zt(n){for(var t=-1,r=n.length,e=so;++t<r;){var u=n[t];u>e&&(e=u)}return e}function Gt(n,t,r,e){
var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Jt(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function Xt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function Ht(n,t){return"undefined"==typeof n?t:n}function Qt(n,t,r,e){return"undefined"!=typeof n&&Fu.call(e,r)?n:t}function nr(n,t,r){var e=$o(t);if(!r)return rr(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&("undefined"!=typeof f||i in n)||(n[i]=a)}return n}function tr(n,t){for(var r=-1,e=n.length,u=fe(e),o=t.length,i=bu(o);++r<o;){var f=t[r];u?(f=parseFloat(f),i[r]=oe(f,e)?n[f]:b):i[r]=n[f]}return i}function rr(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function er(n,t,r){var e=typeof n;if("function"==e){if(e="undefined"!=typeof t){var e=Nt.support,u=!(e.funcNames?n.name:e.funcDecomp);if(!u){var o=Nu.call(n);e.funcNames||(u=!mt.test(o)),u||(u=Et.test(o)||Qe(n),xo(n,u))}e=u}n=e?Fr(n,t,r):n}else n=null==n?yu:"object"==e?Ar(n):"undefined"==typeof t?Er(n+""):jr(n+"",t);return n}function ur(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),"undefined"!=typeof f)return f;if(!He(n))return n;if(e=Wo(n)){if(f=re(n),!t)return qt(n,f)}else{var a=$u.call(n),c=a==V;if(a!=Z&&a!=D&&(!c||u))return St[a]?ue(n,a,t):u?n:{};if(f=ee(c?{}:n),!t)return rr(n,f,$o(n))}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Pt:vr)(n,function(e,u){f[u]=ur(e,t,r,u,n,o,i)}),f}function or(n,t,r,e){if("function"!=typeof n)throw new Cu(B);return Ju(function(){n.apply(b,Or(r,e))},t)}function ir(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=te(),f=i==t,a=f&&200<=r.length?Ao(r):null,c=r.length;a&&(i=Dt,f=!1,r=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(r[l]===a)continue n;u.push(a)}else 0>i(r,a)&&u.push(a);return u}function fr(n,t){var r=n?n.length:0;if(!fe(r))return vr(n,t);for(var e=-1,u=_e(n);++e<r&&!1!==t(u[e],e,u););return n}function ar(n,t){var r=n?n.length:0;if(!fe(r))return yr(n,t);for(var e=_e(n);r--&&!1!==t(e[r],r,e););return n}function cr(n,t){var r=!0;return fr(n,function(n,e,u){return r=!!t(n,e,u)}),r}function lr(n,t){var r=[];return fr(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function sr(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function pr(n,t,r,e){e=(e||0)-1;for(var u=n.length,o=-1,i=[];++e<u;){var f=n[e];if(_(f)&&fe(f.length)&&(Wo(f)||Ge(f))){t&&(f=pr(f,t,r));var a=-1,c=f.length;for(i.length+=c;++a<c;)i[++o]=f[a]}else r||(i[++o]=f)}return i}function hr(n,t,r){var e=-1,u=_e(n);r=r(n);for(var o=r.length;++e<o;){var i=r[e];if(!1===t(u[i],i,u))break}return n}function _r(n,t,r){var e=_e(n);r=r(n);for(var u=r.length;u--;){var o=r[u];if(!1===t(e[o],o,e))break}return n}function gr(n,t){hr(n,t,iu)}function vr(n,t){return hr(n,t,$o)}function yr(n,t){return _r(n,t,$o)}function dr(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];Uo(n[i])&&(o[++u]=i)}return o}function mr(n,t,r){var e=-1,u="function"==typeof t,o=n?n.length:0,i=fe(o)?bu(o):[];return fr(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):b}),i}function wr(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,f=typeof t;if("function"!=i&&"object"!=i&&"function"!=f&&"object"!=f||null==n||null==t)n=n!==n&&t!==t;else n:{var i=wr,f=Wo(n),a=Wo(t),c=M,l=M;f||(c=$u.call(n),c==D?c=Z:c!=Z&&(f=eu(n))),a||(l=$u.call(t),l==D?l=Z:l!=Z&&eu(t));var s=c==Z,a=l==Z,l=c==l;if(!l||f||s)if(c=s&&Fu.call(n,"__wrapped__"),a=a&&Fu.call(t,"__wrapped__"),c||a)n=i(c?n.value():n,a?t.value():t,r,e,u,o);else if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?Jr:Hr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=!1;else n=Xr(n,t,c)}return n}function br(n,t,r,e,u){var o=t.length;if(null==n)return!o;for(var i=-1,f=!u;++i<o;)if(f&&e[i]?r[i]!==n[t[i]]:!Fu.call(n,t[i]))return!1;for(i=-1;++i<o;){var a=t[i];if(f&&e[i])a=Fu.call(n,a);else{var c=n[a],l=r[i],a=u?u(c,l,a):b;"undefined"==typeof a&&(a=wr(l,c,u,!0))}if(!a)return!1}return!0}function xr(n,t){var r=[];return fr(n,function(n,e,u){r.push(t(n,e,u))}),r}function Ar(n){var t=$o(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(ae(u))return function(n){return null!=n&&n[e]===u&&Fu.call(n,e)}}for(var o=bu(r),i=bu(r);r--;)u=n[t[r]],o[r]=u,i[r]=ae(u);return function(n){return br(n,t,o,i)}}function jr(n,t){return ae(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&wr(t,r[n],null,!0)}}function kr(n,t,r,e,u){if(!He(n))return n;var o=fe(t.length)&&(Wo(t)||eu(t));return(o?Pt:vr)(t,function(t,i,f){if(_(t)){e||(e=[]),u||(u=[]);n:{t=e;for(var a=u,c=t.length,l=f[i];c--;)if(t[c]==l){n[i]=a[c],i=void 0;break n}c=n[i],f=r?r(c,l,i,n,f):b;var s="undefined"==typeof f;s&&(f=l,fe(l.length)&&(Wo(l)||eu(l))?f=Wo(c)?c:c?qt(c):[]:Fo(l)||Ge(l)?f=Ge(c)?uu(c):Fo(c)?c:{}:s=!1),t.push(l),a.push(f),s?n[i]=kr(f,l,r,t,a):(f===f?f!==c:c===c)&&(n[i]=f),i=void 0}return i}a=n[i],f=r?r(a,t,i,n,f):b,(l="undefined"==typeof f)&&(f=t),!o&&"undefined"==typeof f||!l&&(f===f?f===a:a!==a)||(n[i]=f)}),n}function Er(n){return function(t){return null==t?b:t[n]}}function Rr(n,t){return n+Ku(lo()*(t-n+1))}function Ir(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Or(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r="undefined"==typeof r||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=bu(u);++e<u;)r[e]=n[e+t];return r}function Cr(n,t){var r;return fr(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Tr(n,r){var e=-1,u=te(),o=n.length,i=u==t,f=i&&200<=o,a=f?Ao():null,c=[];a?(u=Dt,i=!1):(f=!1,a=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;r&&a.push(s),c.push(l)}else 0>u(a,s)&&((r||f)&&a.push(s),c.push(l))}return c}function Sr(n,t){for(var r=-1,e=t.length,u=bu(e);++r<e;)u[r]=n[t[r]];return u}function Wr(n,t){var r=n;r instanceof Lt&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var r=[r],o=t[e];Yu.apply(r,o.args),r=o.func.apply(o.thisArg,r)}return r}function Nr(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&u<=go){for(;e<u;){var o=e+u>>>1,i=n[o];(r?i<=t:i<t)?e=o+1:u=o}return u}return Ur(n,t,yu,r)}function Ur(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f="undefined"==typeof t;u<o;){var a=Ku((u+o)/2),c=r(n[a]),l=c===c;(i?l||e:f?l&&(e||"undefined"!=typeof c):e?c<=t:c<t)?u=a+1:o=a}return io(o,_o)}function Fr(n,t,r){if("function"!=typeof n)return yu;if("undefined"==typeof t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Lr(n){return Mu.call(n,0)}function $r(n,t,r){for(var e=r.length,u=-1,o=oo(n.length-e,0),i=-1,f=t.length,a=bu(o+f);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function Br(n,t,r){for(var e=-1,u=r.length,o=-1,i=oo(n.length-u,0),f=-1,a=t.length,c=bu(i+a);++o<i;)c[o]=n[o];for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function zr(n,t){return function(r,e,u){var o=t?t():{};if(e=ne(e,u,3),Wo(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else fr(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Dr(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(3<t&&ie(arguments[1],arguments[2],arguments[3])&&(t=2),3<t&&"function"==typeof arguments[t-2])var e=Fr(arguments[--t-1],arguments[t--],5);else 2<t&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function Mr(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=Pr(n);return r}function qr(n){return function(t){var r=-1;t=hu(au(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Pr(n){return function(){var t=bo(n.prototype),r=n.apply(t,arguments);return He(r)?r:t}}function Kr(n,t){return function(r,e,u){u&&ie(r,e,u)&&(e=null);var i=ne(),f=null==e;if(i===er&&f||(f=!1,e=i(e,u,3)),f){if(e=Wo(r),e||!ru(r))return n(e?r:he(r));e=o}return Qr(r,e,t)}}function Vr(n,t,r,e,u,o,i,f,a,c){function l(){for(var w=arguments.length,x=w,k=bu(w);x--;)k[x]=arguments[x];if(e&&(k=$r(k,e,u)),o&&(k=Br(k,o,i)),_||y){var x=l.placeholder,E=v(k,x),w=w-E.length;if(w<c){var R=f?qt(f):null,w=oo(c-w,0),C=_?E:null,E=_?null:E,T=_?k:null,k=_?null:k;return t|=_?I:O,t&=~(_?O:I),g||(t&=~(A|j)),k=Vr(n,t,r,T,C,k,E,R,a,w),k.placeholder=x,k}}if(x=p?r:this,h&&(n=x[m]),f)for(R=k.length,w=io(f.length,R),C=qt(k);w--;)E=f[w],k[w]=oe(E,R)?C[E]:b;return s&&a<k.length&&(k.length=a),(this instanceof l?d||Pr(n):n).apply(x,k)}var s=t&T,p=t&A,h=t&j,_=t&E,g=t&k,y=t&R,d=!h&&Pr(n),m=n;return l}function Yr(n,t,r){return n=n.length,t=+t,n<t&&eo(t)?(t-=n,r=null==r?" ":r+"",su(r,qu(t/r.length)).slice(0,t)):""}function Zr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=bu(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&A,i=Pr(n);return u}function Gr(n,t,r,e,u,o,i,f){var a=t&j;if(!a&&"function"!=typeof n)throw new Cu(B);var c=e?e.length:0;if(c||(t&=~(I|O),e=u=null),c-=u?u.length:0,t&O){var l=e,s=u;e=u=null}var p=!a&&jo(n);if(r=[n,t,r,e,u,l,s,o,i,f],p&&!0!==p){e=r[1],t=p[1],f=e|t,o=T|C,u=A|j,i=o|u|k|R;var l=e&T&&!(t&T),s=e&C&&!(t&C),h=(s?r:p)[7],_=(l?r:p)[8];o=f>=o&&f<=i&&(e<C||(s||l)&&h.length<=_),(!(e>=C&&t>u||e>u&&t>=C)||o)&&(t&A&&(r[2]=p[2],f|=e&A?0:k),(e=p[3])&&(u=r[3],r[3]=u?$r(u,e,p[4]):qt(e),r[4]=u?v(r[3],z):qt(p[4])),(e=p[5])&&(u=r[5],r[5]=u?Br(u,e,p[6]):qt(e),r[6]=u?v(r[5],z):qt(p[6])),(e=p[7])&&(r[7]=qt(e)),t&T&&(r[8]=null==r[8]?p[8]:io(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]}return r[9]=null==f?a?0:n.length:oo(f-c,0)||0,(p?xo:ko)(t==A?Mr(r[0],r[2]):t!=I&&t!=(A|I)||r[4].length?Vr.apply(b,r):Zr.apply(b,r),r)}function Jr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length,l=!0;if(a!=c&&(!u||c<=a))return!1;for(;l&&++f<a;){var s=n[f],p=t[f],l=b;if(e&&(l=u?e(p,s,f):e(s,p,f)),"undefined"==typeof l)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function Xr(n,t,r){switch(r){case q:case P:return+n==+t;case K:return n.name==t.name&&n.message==t.message;case Y:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case G:case J:return n==t+""}return!1}function Hr(n,t,r,e,u,o,i){var f=$o(n),a=f.length,c=$o(t).length;if(a!=c&&!u)return!1;for(var l,c=-1;++c<a;){var s=f[c],p=Fu.call(t,s);if(p){var h=n[s],_=t[s],p=b;e&&(p=u?e(_,h,s):e(h,_,s)),"undefined"==typeof p&&(p=h&&h===_||r(h,_,e,u,o,i))}if(!p)return!1;l||(l="constructor"==s)}return!(!l&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)))}function Qr(n,t,r){var e=r?po:so,u=e,o=u;return fr(n,function(n,i,f){i=t(n,i,f),((r?i<u:i>u)||i===e&&i===o)&&(u=i,o=n)}),o}function ne(n,t,r){var e=Nt.callback||gu,e=e===gu?er:e;return r?e(n,t,r):e}function te(n,r,e){var u=Nt.indexOf||we,u=u===we?t:u;return n?u(n,r,e):u}function re(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Fu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function ee(n){return n=n.constructor,"function"==typeof n&&n instanceof n||(n=Ru),new n}function ue(n,t,r){var e=n.constructor;switch(t){case X:return Lr(n);case q:case P:return new e((+n));case H:case Q:case nt:case tt:case rt:case et:case ut:case ot:case it:return t=n.buffer,new e(r?Lr(t):t,n.byteOffset,n.length);case Y:case J:return new e(n);case G:var u=new e(n.source,dt.exec(n));u.lastIndex=n.lastIndex}return u}function oe(n,t){return n=+n,t=null==t?yo:t,-1<n&&0==n%1&&n<t}function ie(n,t,r){if(!He(r))return!1;var e=typeof t;return"number"==e?(e=r.length,e=fe(e)&&oe(t,e)):e="string"==e&&t in r,!!e&&(t=r[t],n===n?n===t:t!==t)}function fe(n){return"number"==typeof n&&-1<n&&0==n%1&&n<=yo}function ae(n){return n===n&&(0===n?0<1/n:!He(n))}function ce(n,t){n=_e(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function le(n,t){var r={};return gr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function se(n){var t;if(!_(n)||$u.call(n)!=Z||!(Fu.call(n,"constructor")||(t=n.constructor,"function"!=typeof t||t instanceof t)))return!1;var r;return gr(n,function(n,t){r=t}),"undefined"==typeof r||Fu.call(n,r)}function pe(n){for(var t=iu(n),r=t.length,e=r&&n.length,u=Nt.support,u=e&&fe(e)&&(Wo(n)||u.nonEnumArgs&&Ge(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&oe(f,e)||Fu.call(n,f))&&i.push(f)}return i}function he(n){return null==n?[]:fe(n.length)?He(n)?n:Ru(n):fu(n)}function _e(n){return He(n)?n:Ru(n)}function ge(n){return n instanceof Lt?n.clone():new Ft(n.__wrapped__,n.__chain__,qt(n.__actions__))}function ve(n,t,r){return n&&n.length?((r?ie(n,t,r):null==t)&&(t=1),Or(n,0>t?0:t)):[]}function ye(n,t,r){var e=n?n.length:0;return e?((r?ie(n,t,r):null==t)&&(t=1),t=e-(+t||0),Or(n,0,0>t?0:t)):[]}function de(n,t,r){var e=-1,u=n?n.length:0;for(t=ne(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function me(n){return n?n[0]:b}function we(n,r,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?oo(u+e,0):e||0;else if(e)return e=Nr(n,r),n=n[e],(r===r?r===n:n!==n)?e:-1;return t(n,r,e)}function be(n){return ve(n,1)}function xe(n,r,e,u){if(!n||!n.length)return[];null!=r&&"boolean"!=typeof r&&(u=e,e=ie(n,r,u)?null:r,r=!1);var o=ne();if((o!==er||null!=e)&&(e=o(e,u,3)),r&&te()==t){r=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=r?r(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=Tr(n,e);return n}function Ae(n){for(var t=-1,r=(n&&n.length&&Zt(Yt(n,Uu)))>>>0,e=bu(r);++t<r;)e[t]=Yt(n,Er(t));return e}function je(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Wo(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function ke(n){return n=Nt(n),n.__chain__=!0,n}function Ee(n,t,r){return t.call(r,n)}function Re(n,t,r){var e=Wo(n)?Kt:cr;return("function"!=typeof t||"undefined"!=typeof r)&&(t=ne(t,r,3)),e(n,t)}function Ie(n,t,r){var e=Wo(n)?Vt:lr;return t=ne(t,r,3),e(n,t)}function Oe(n,t,r){return Wo(n)?(t=de(n,t,r),-1<t?n[t]:b):(t=ne(t,r,3),sr(n,t,fr))}function Ce(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Wo(n)?Pt(n,t):fr(n,Fr(t,r,3))}function Te(n,t,r){if("function"==typeof t&&"undefined"==typeof r&&Wo(n))for(r=n.length;r--&&!1!==t(n[r],r,n););else n=ar(n,Fr(t,r,3));return n}function Se(n,t,r){var e=n?n.length:0;return fe(e)||(n=fu(n),e=n.length),!!e&&(r="number"==typeof r?0>r?oo(e+r,0):r||0:0,"string"==typeof n||!Wo(n)&&ru(n)?r<e&&-1<n.indexOf(t,r):-1<te(n,t,r))}function We(n,t,r){var e=Wo(n)?Yt:xr;return t=ne(t,r,3),e(n,t)}function Ne(n,t,r,e){return(Wo(n)?Gt:Ir)(n,ne(t,e,4),r,3>arguments.length,fr)}function Ue(n,t,r,e){return(Wo(n)?Jt:Ir)(n,ne(t,e,4),r,3>arguments.length,ar)}function Fe(n,t,r){return(r?ie(n,t,r):null==t)?(n=he(n),t=n.length,0<t?n[Rr(0,t-1)]:b):(n=Le(n),n.length=io(0>t?0:+t||0,n.length),n)}function Le(n){n=he(n);for(var t=-1,r=n.length,e=bu(r);++t<r;){var u=Rr(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function $e(n,t,r){var e=Wo(n)?Xt:Cr;return("function"!=typeof t||"undefined"!=typeof r)&&(t=ne(t,r,3)),e(n,t)}function Be(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Cu(B);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function ze(n,t){var r=A;if(2<arguments.length)var e=Or(arguments,2),u=v(e,ze.placeholder),r=r|I;return Gr(n,r,t,e,u)}function De(n,t){var r=A|j;if(2<arguments.length)var e=Or(arguments,2),u=v(e,De.placeholder),r=r|I;return Gr(t,r,n,e,u)}function Me(n,t,r){return r&&ie(n,t,r)&&(t=null),n=Gr(n,E,null,null,null,null,null,t),n.placeholder=Me.placeholder,n}function qe(n,t,r){return r&&ie(n,t,r)&&(t=null),n=Gr(n,R,null,null,null,null,null,t),n.placeholder=qe.placeholder,n}function Pe(n,t,r){function e(){var r=t-(So()-c);0>=r||r>t?(f&&Pu(f),r=p,f=s=p=b,r&&(h=So(),a=n.apply(l,i),s||f||(i=l=null))):s=Ju(e,r)}function u(){s&&Pu(s),f=s=p=b,(g||_!==t)&&(h=So(),a=n.apply(l,i),s||f||(i=l=null))}function o(){if(i=arguments,c=So(),l=this,p=g&&(s||!v),!1===_)var r=v&&!s;else{f||v||(h=c);var o=_-(c-h),y=0>=o||o>_;y?(f&&(f=Pu(f)),h=c,a=n.apply(l,i)):f||(f=Ju(u,o))}return y&&s?s=Pu(s):s||t===_||(s=Ju(e,t)),r&&(y=!0,a=n.apply(l,i)),!y||s||f||(i=l=null),a}var i,f,a,c,l,s,p,h=0,_=!1,g=!0;if("function"!=typeof n)throw new Cu(B);if(t=0>t?0:+t||0,!0===r)var v=!0,g=!1;else He(r)&&(v=r.leading,_="maxWait"in r&&oo(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=function(){s&&Pu(s),f&&Pu(f),f=s=p=b},o}function Ke(){var n=arguments,t=n.length-1;if(0>t)return function(n){return n};if(!Kt(n,r))throw new Cu(B);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function Ve(n,t){function r(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o}if("function"!=typeof n||t&&"function"!=typeof t)throw new Cu(B);return r.cache=new Ve.Cache,r}function Ye(n){var t=Or(arguments,1),r=v(t,Ye.placeholder);return Gr(n,I,null,t,r)}function Ze(n){var t=Or(arguments,1),r=v(t,Ze.placeholder);return Gr(n,O,null,t,r)}function Ge(n){return fe(_(n)?n.length:b)&&$u.call(n)==D||!1}function Je(n){return n&&1===n.nodeType&&_(n)&&-1<$u.call(n).indexOf("Element")||!1}function Xe(n){return _(n)&&"string"==typeof n.message&&$u.call(n)==K||!1}function He(n){var t=typeof n;return"function"==t||n&&"object"==t||!1}function Qe(n){return null!=n&&($u.call(n)==V?zu.test(Nu.call(n)):_(n)&&bt.test(n)||!1)}function nu(n){return"number"==typeof n||_(n)&&$u.call(n)==Y||!1}function tu(n){return _(n)&&$u.call(n)==G||!1}function ru(n){return"string"==typeof n||_(n)&&$u.call(n)==J||!1}function eu(n){return _(n)&&fe(n.length)&&Tt[$u.call(n)]||!1}function uu(n){return rr(n,iu(n))}function ou(n){return dr(n,iu(n))}function iu(n){if(null==n)return[];He(n)||(n=Ru(n));for(var t=n.length,t=t&&fe(t)&&(Wo(n)||wo.nonEnumArgs&&Ge(n))&&t||0,r=n.constructor,e=-1,r="function"==typeof r&&r.prototype===n,u=bu(t),o=0<t;++e<t;)u[e]=e+"";for(var i in n)o&&oe(i,t)||"constructor"==i&&(r||!Fu.call(n,i))||u.push(i);return u}function fu(n){return Sr(n,$o(n))}function au(n){return(n=u(n))&&n.replace(xt,l)}function cu(n){return(n=u(n))&&kt.test(n)?n.replace(jt,"\\$&"):n}function lu(n,t,r){return r&&ie(n,t,r)&&(t=0),co(n,t)}function su(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!eo(t))return r;do t%2&&(r+=n),t=Ku(t/2),n+=n;while(t);return r}function pu(n,t,r){var e=n;return(n=u(n))?(r?ie(e,t,r):null==t)?n.slice(y(n),d(n)+1):(t+="",n.slice(i(n,t),f(n,t)+1)):n}function hu(n,t,r){return r&&ie(n,t,r)&&(t=null),n=u(n),n.match(t||It)||[]}function _u(){var n=arguments.length,t=arguments[0];try{for(var r=bu(n?n-1:0);0<--n;)r[n-1]=arguments[n];return t.apply(b,r)}catch(e){return Xe(e)?e:new Au(e)}}function gu(n,t,r){return r&&ie(n,t,r)&&(t=null),_(n)?du(n):er(n,t)}function vu(n){return function(){return n}}function yu(n){return n}function du(n){return Ar(ur(n,!0))}function mu(n,t,r){if(null==r){var e=He(t),u=e&&$o(t);((u=u&&u.length&&dr(t,u))?u.length:e)||(u=!1,r=t,t=n,n=this)}u||(u=dr(t,$o(t)));var o=!0,e=-1,i=Uo(n),f=u.length;!1===r?o=!1:He(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=qt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return r=[this.value()],Yu.apply(r,arguments),t.apply(n,r)}}(a))}return n}function wu(){}g=g?Mt.defaults(Bt.Object(),g,Mt.pick(Bt,Ct)):Bt;var bu=g.Array,xu=g.Date,Au=g.Error,ju=g.Function,ku=g.Math,Eu=g.Number,Ru=g.Object,Iu=g.RegExp,Ou=g.String,Cu=g.TypeError,Tu=bu.prototype,Su=Ru.prototype,Wu=(Wu=g.window)&&Wu.document,Nu=ju.prototype.toString,Uu=Er("length"),Fu=Su.hasOwnProperty,Lu=0,$u=Su.toString,Bu=g._,zu=Iu("^"+cu($u).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Du=Qe(Du=g.ArrayBuffer)&&Du,Mu=Qe(Mu=Du&&new Du(0).slice)&&Mu,qu=ku.ceil,Pu=g.clearTimeout,Ku=ku.floor,Vu=Qe(Vu=Ru.getPrototypeOf)&&Vu,Yu=Tu.push,Zu=Su.propertyIsEnumerable,Gu=Qe(Gu=g.Set)&&Gu,Ju=g.setTimeout,Xu=Tu.splice,Hu=Qe(Hu=g.Uint8Array)&&Hu,Qu=Qe(Qu=g.WeakMap)&&Qu,no=function(){try{var n=Qe(n=g.Float64Array)&&n,t=new n(new Du(10),0,1)&&n}catch(r){}return t}(),to=Qe(to=bu.isArray)&&to,ro=Qe(ro=Ru.create)&&ro,eo=g.isFinite,uo=Qe(uo=Ru.keys)&&uo,oo=ku.max,io=ku.min,fo=Qe(fo=xu.now)&&fo,ao=Qe(ao=Eu.isFinite)&&ao,co=g.parseInt,lo=ku.random,so=Eu.NEGATIVE_INFINITY,po=Eu.POSITIVE_INFINITY,ho=ku.pow(2,32)-1,_o=ho-1,go=ho>>>1,vo=no?no.BYTES_PER_ELEMENT:0,yo=ku.pow(2,53)-1,mo=Qu&&new Qu,wo=Nt.support={};!function(n){wo.funcDecomp=!Qe(g.WinRTError)&&Et.test(w),wo.funcNames="string"==typeof ju.name;try{wo.dom=11===Wu.createDocumentFragment().nodeType}catch(t){wo.dom=!1}try{wo.nonEnumArgs=!Zu.call(arguments,1)}catch(r){wo.nonEnumArgs=!0}}(0,0),Nt.templateSettings={escape:_t,evaluate:gt,interpolate:vt,variable:"",imports:{_:Nt}};var bo=function(){function n(){}return function(t){if(He(t)){n.prototype=t;var r=new n;n.prototype=null}return r||g.Object()}}(),xo=mo?function(n,t){return mo.set(n,t),n}:yu;Mu||(Lr=Du&&Hu?function(n){var t=n.byteLength,r=no?Ku(t/vo):0,e=r*vo,u=new Du(t);if(r){var o=new no(u,0,r);o.set(new no(n,0,r))}return t!=e&&(o=new Hu(u,e),o.set(new Hu(n,e))),u}:vu(null));var Ao=ro&&Gu?function(n){return new zt(n)}:vu(null),jo=mo?function(n){return mo.get(n)}:wu,ko=function(){var n=0,t=0;return function(r,e){var u=So(),o=U-(u-t);if(t=u,0<o){if(++n>=N)return r}else n=0;return xo(r,e)}}(),Eo=zr(function(n,t,r){Fu.call(n,r)?++n[r]:n[r]=1}),Ro=zr(function(n,t,r){Fu.call(n,r)?n[r].push(t):n[r]=[t]}),Io=zr(function(n,t,r){n[r]=t}),Oo=Kr(Zt),Co=Kr(function(n){for(var t=-1,r=n.length,e=po;++t<r;){var u=n[t];u<e&&(e=u)}return e},!0),To=zr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),So=fo||function(){return(new xu).getTime()},Wo=to||function(n){return _(n)&&fe(n.length)&&$u.call(n)==M||!1};wo.dom||(Je=function(n){return n&&1===n.nodeType&&_(n)&&!Fo(n)||!1});var No=ao||function(n){return"number"==typeof n&&eo(n)},Uo=r(/x/)||Hu&&!r(Hu)?function(n){return $u.call(n)==V}:r,Fo=Vu?function(n){if(!n||$u.call(n)!=Z)return!1;var t=n.valueOf,r=Qe(t)&&(r=Vu(t))&&Vu(r);return r?n==r||Vu(n)==r:se(n)}:se,Lo=Dr(nr),$o=uo?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&r&&fe(r)?pe(n):He(n)?uo(n):[]}:pe,Bo=Dr(kr),zo=qr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Do=qr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=co(Ot+"08")&&(lu=function(n,t,r){return(r?ie(n,t,r):null==t)?t=0:t&&(t=+t),n=pu(n),co(n,t||(wt.test(n)?16:10))});var Mo=qr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),qo=qr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return Nt.prototype=Ut.prototype,Ft.prototype=bo(Ut.prototype),Ft.prototype.constructor=Ft,Lt.prototype=bo(Ut.prototype),Lt.prototype.constructor=Lt,$t.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},$t.prototype.get=function(n){return"__proto__"==n?b:this.__data__[n]},$t.prototype.has=function(n){return"__proto__"!=n&&Fu.call(this.__data__,n)},$t.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},zt.prototype.push=function(n){var t=this.data;"string"==typeof n||He(n)?t.set.add(n):t.hash[n]=!0},Ve.Cache=$t,Nt.after=function(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Cu(B);var r=n;n=t,t=r}return n=eo(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Nt.ary=function(n,t,r){return r&&ie(n,t,r)&&(t=null),t=n&&null==t?n.length:oo(+t||0,0),Gr(n,T,null,null,null,null,t)},Nt.assign=Lo,Nt.at=function(n){return fe(n?n.length:0)&&(n=he(n)),tr(n,pr(arguments,!1,!1,1))},Nt.before=Be,Nt.bind=ze,Nt.bindAll=function(n){for(var t=n,r=1<arguments.length?pr(arguments,!1,!1,1):ou(n),e=-1,u=r.length;++e<u;){var o=r[e];t[o]=Gr(t[o],A,t)}return t},Nt.bindKey=De,Nt.callback=gu,Nt.chain=ke,Nt.chunk=function(n,t,r){t=(r?ie(n,t,r):null==t)?1:oo(+t||1,1),r=0;for(var e=n?n.length:0,u=-1,o=bu(qu(e/t));r<e;)o[++u]=Or(n,r,r+=t);return o},Nt.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Nt.constant=vu,Nt.countBy=Eo,Nt.create=function(n,t,r){var e=bo(n);return r&&ie(n,t,r)&&(t=null),t?rr(t,e,$o(t)):e},Nt.curry=Me,Nt.curryRight=qe,Nt.debounce=Pe,Nt.defaults=function(n){if(null==n)return n;var t=qt(arguments);return t.push(Ht),Lo.apply(b,t)},Nt.defer=function(n){return or(n,1,arguments,1)},Nt.delay=function(n,t){return or(n,t,arguments,2)},Nt.difference=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Wo(r)||Ge(r))break}return ir(r,pr(arguments,!1,!0,++n))},Nt.drop=ve,Nt.dropRight=ye,Nt.dropRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=ne(t,r,3);e--&&t(n[e],e,n););return Or(n,0,e+1)},Nt.dropWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=ne(t,r,3);++u<e&&t(n[u],u,n););return Or(n,u)},Nt.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&"number"!=typeof r&&ie(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e="undefined"==typeof e||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;return n},Nt.filter=Ie,Nt.flatten=function(n,t,r){var e=n?n.length:0;return r&&ie(n,t,r)&&(t=!1),e?pr(n,t):[]},Nt.flattenDeep=function(n){return n&&n.length?pr(n,!0):[]},Nt.flow=function(){var n=arguments,t=n.length;if(!t)return function(n){return n};if(!Kt(n,r))throw new Cu(B);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}},Nt.flowRight=Ke,Nt.forEach=Ce,Nt.forEachRight=Te,Nt.forIn=function(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=Fr(t,r,3)),hr(n,t,iu)},Nt.forInRight=function(n,t,r){return t=Fr(t,r,3),_r(n,t,iu)},Nt.forOwn=function(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=Fr(t,r,3)),vr(n,t)},Nt.forOwnRight=function(n,t,r){return t=Fr(t,r,3),_r(n,t,$o)},Nt.functions=ou,Nt.groupBy=Ro,Nt.indexBy=Io,Nt.initial=function(n){return ye(n,1)},Nt.intersection=function(){for(var n=[],r=-1,e=arguments.length,u=[],o=te(),i=o==t;++r<e;){var f=arguments[r];(Wo(f)||Ge(f))&&(n.push(f),u.push(i&&120<=f.length?Ao(r&&f):null))}var e=n.length,i=n[0],a=-1,c=i?i.length:0,l=[],s=u[0];n:for(;++a<c;)if(f=i[a],0>(s?Dt(s,f):o(l,f))){for(r=e;--r;){var p=u[r];if(0>(p?Dt(p,f):o(n[r],f)))continue n}s&&s.push(f),l.push(f)}return l},Nt.invert=function(n,t,r){r&&ie(n,t,r)&&(t=null),r=-1;for(var e=$o(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?Fu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Nt.invoke=function(n,t){return mr(n,t,Or(arguments,2))},Nt.keys=$o,Nt.keysIn=iu,Nt.map=We,Nt.mapValues=function(n,t,r){var e={};return t=ne(t,r,3),vr(n,function(n,r,u){e[r]=t(n,r,u)}),e},Nt.matches=du,Nt.matchesProperty=function(n,t){return jr(n+"",ur(t,!0))},Nt.memoize=Ve,Nt.merge=Bo,Nt.mixin=mu,Nt.negate=function(n){if("function"!=typeof n)throw new Cu(B);return function(){return!n.apply(this,arguments)}},Nt.omit=function(n,t,r){if(null==n)return{};if("function"!=typeof t){var e=Yt(pr(arguments,!1,!1,1),Ou);return ce(n,ir(iu(n),e))}return t=Fr(t,r,3),le(n,function(n,r,e){return!t(n,r,e)})},Nt.once=function(n){return Be(n,2)},Nt.pairs=function(n){for(var t=-1,r=$o(n),e=r.length,u=bu(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},Nt.partial=Ye,Nt.partialRight=Ze,Nt.partition=To,Nt.pick=function(n,t,r){return null==n?{}:"function"==typeof t?le(n,Fr(t,r,3)):ce(n,pr(arguments,!1,!1,1))},Nt.pluck=function(n,t){return We(n,Er(t))},Nt.property=function(n){return Er(n+"")},Nt.propertyOf=function(n){return function(t){return null==n?b:n[t]}},Nt.pull=function(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=te(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];-1<(u=r(n,o,u));)Xu.call(n,u,1);return n},Nt.pullAt=function(t){var r=t||[],e=pr(arguments,!1,!1,1),u=e.length,o=tr(r,e);for(e.sort(n);u--;){var i=parseFloat(e[u]);if(i!=f&&oe(i)){var f=i;Xu.call(r,i,1)}}return o},Nt.range=function(n,t,r){r&&ie(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;var e=-1;t=oo(qu((t-n)/(r||1)),0);for(var u=bu(t);++e<t;)u[e]=n,n+=r;return u},Nt.rearg=function(n){var t=pr(arguments,!1,!1,1);return Gr(n,C,null,null,null,t)},Nt.reject=function(n,t,r){var e=Wo(n)?Vt:lr;return t=ne(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Nt.remove=function(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=ne(t,r,3);++e<u;)r=n[e],t(r,e,n)&&(o.push(r),Xu.call(n,e--,1),u--);return o},Nt.rest=be,Nt.shuffle=Le,Nt.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&ie(n,t,r)&&(t=0,r=e),Or(n,t,r)):[]},Nt.sortBy=function(n,t,r){var u=-1,o=n?n.length:0,i=fe(o)?bu(o):[];return r&&ie(n,t,r)&&(t=null),t=ne(t,r,3),fr(n,function(n,r,e){i[++u]={a:t(n,r,e),b:u,c:n}}),e(i,a)},Nt.sortByAll=function(n){var t=arguments;3<t.length&&ie(t[1],t[2],t[3])&&(t=[n,t[1]]);var r=-1,u=n?n.length:0,o=pr(t,!1,!1,1),i=fe(u)?bu(u):[];return fr(n,function(n){for(var t=o.length,e=bu(t);t--;)e[t]=null==n?b:n[o[t]];i[++r]={a:e,b:r,c:n}}),e(i,c)},Nt.spread=function(n){if("function"!=typeof n)throw new Cu(B);return function(t){return n.apply(this,t)}},Nt.take=function(n,t,r){return n&&n.length?((r?ie(n,t,r):null==t)&&(t=1),Or(n,0,0>t?0:t)):[]},Nt.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?ie(n,t,r):null==t)&&(t=1),t=e-(+t||0),Or(n,0>t?0:t)):[]},Nt.takeRightWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=ne(t,r,3);e--&&t(n[e],e,n););return Or(n,e+1)},Nt.takeWhile=function(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=ne(t,r,3);++u<e&&t(n[u],u,n););return Or(n,0,u)},Nt.tap=function(n,t,r){return t.call(r,n),n},Nt.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Cu(B);return!1===r?e=!1:He(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Wt.leading=e,Wt.maxWait=+t,Wt.trailing=u,Pe(n,t,Wt)},Nt.thru=Ee,Nt.times=function(n,t,r){if(n=+n,1>n||!eo(n))return[];var e=-1,u=bu(io(n,ho));for(t=Fr(t,r,1);++e<n;)e<ho?u[e]=t(e):t(e);return u},Nt.toArray=function(n){var t=n?n.length:0;return fe(t)?t?qt(n):[]:fu(n)},Nt.toPlainObject=uu,Nt.transform=function(n,t,r,e){var u=Wo(n)||eu(n);return t=ne(t,e,4),null==r&&(u||He(n)?(e=n.constructor,r=u?Wo(n)?new e:[]:bo(Uo(e)&&e.prototype)):r={}),(u?Pt:vr)(n,function(n,e,u){return t(r,n,e,u)}),r},Nt.union=function(){return Tr(pr(arguments,!1,!0))},Nt.uniq=xe,Nt.unzip=Ae,Nt.values=fu,Nt.valuesIn=function(n){return Sr(n,iu(n))},Nt.where=function(n,t){return Ie(n,Ar(t))},Nt.without=function(n){return ir(n,Or(arguments,1))},Nt.wrap=function(n,t){return t=null==t?yu:t,Gr(t,I,null,[n],[])},Nt.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Wo(r)||Ge(r))var e=e?ir(e,r).concat(ir(r,e)):r}return e?Tr(e):[]},Nt.zip=function(){for(var n=arguments.length,t=bu(n);n--;)t[n]=arguments[n];return Ae(t)},Nt.zipObject=je,Nt.backflow=Ke,Nt.collect=We,Nt.compose=Ke,Nt.each=Ce,Nt.eachRight=Te,Nt.extend=Lo,Nt.iteratee=gu,Nt.methods=ou,Nt.object=je,Nt.select=Ie,Nt.tail=be,Nt.unique=xe,mu(Nt,Nt),Nt.attempt=_u,Nt.camelCase=zo,Nt.capitalize=function(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Nt.clone=function(n,t,r,e){return t&&"boolean"!=typeof t&&ie(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),r="function"==typeof r&&Fr(r,e,1),ur(n,t,r)},Nt.cloneDeep=function(n,t,r){return t="function"==typeof t&&Fr(t,r,1),ur(n,!0,t)},Nt.deburr=au,Nt.endsWith=function(n,t,r){n=u(n),t+="";var e=n.length;return r=("undefined"==typeof r?e:io(0>r?0:+r||0,e))-t.length,0<=r&&n.indexOf(t,r)==r},Nt.escape=function(n){return(n=u(n))&&ht.test(n)?n.replace(st,s):n},Nt.escapeRegExp=cu,Nt.every=Re,Nt.find=Oe,Nt.findIndex=de,Nt.findKey=function(n,t,r){return t=ne(t,r,3),sr(n,t,vr,!0)},Nt.findLast=function(n,t,r){return t=ne(t,r,3),sr(n,t,ar)},Nt.findLastIndex=function(n,t,r){
var e=n?n.length:0;for(t=ne(t,r,3);e--;)if(t(n[e],e,n))return e;return-1},Nt.findLastKey=function(n,t,r){return t=ne(t,r,3),sr(n,t,yr,!0)},Nt.findWhere=function(n,t){return Oe(n,Ar(t))},Nt.first=me,Nt.has=function(n,t){return!!n&&Fu.call(n,t)},Nt.identity=yu,Nt.includes=Se,Nt.indexOf=we,Nt.inRange=function(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=t&&n<r},Nt.isArguments=Ge,Nt.isArray=Wo,Nt.isBoolean=function(n){return!0===n||!1===n||_(n)&&$u.call(n)==q||!1},Nt.isDate=function(n){return _(n)&&$u.call(n)==P||!1},Nt.isElement=Je,Nt.isEmpty=function(n){if(null==n)return!0;var t=n.length;return fe(t)&&(Wo(n)||ru(n)||Ge(n)||_(n)&&Uo(n.splice))?!t:!$o(n).length},Nt.isEqual=function(n,t,r,e){return r="function"==typeof r&&Fr(r,e,3),!r&&ae(n)&&ae(t)?n===t:(e=r?r(n,t):b,"undefined"==typeof e?wr(n,t,r):!!e)},Nt.isError=Xe,Nt.isFinite=No,Nt.isFunction=Uo,Nt.isMatch=function(n,t,r,e){var u=$o(t),o=u.length;if(r="function"==typeof r&&Fr(r,e,3),!r&&1==o){var i=u[0];if(e=t[i],ae(e))return null!=n&&e===n[i]&&Fu.call(n,i)}for(var i=bu(o),f=bu(o);o--;)e=i[o]=t[u[o]],f[o]=ae(e);return br(n,u,i,f,r)},Nt.isNaN=function(n){return nu(n)&&n!=+n},Nt.isNative=Qe,Nt.isNull=function(n){return null===n},Nt.isNumber=nu,Nt.isObject=He,Nt.isPlainObject=Fo,Nt.isRegExp=tu,Nt.isString=ru,Nt.isTypedArray=eu,Nt.isUndefined=function(n){return"undefined"==typeof n},Nt.kebabCase=Do,Nt.last=function(n){var t=n?n.length:0;return t?n[t-1]:b},Nt.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?oo(e+r,0):io(r||0,e-1))+1;else if(r)return u=Nr(n,t,!0)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;if(t!==t)return h(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1},Nt.max=Oo,Nt.min=Co,Nt.noConflict=function(){return g._=Bu,this},Nt.noop=wu,Nt.now=So,Nt.pad=function(n,t,r){n=u(n),t=+t;var e=n.length;return e<t&&eo(t)?(e=(t-e)/2,t=Ku(e),e=qu(e),r=Yr("",e,r),r.slice(0,t)+n+r):n},Nt.padLeft=function(n,t,r){return(n=u(n))&&Yr(n,t,r)+n},Nt.padRight=function(n,t,r){return(n=u(n))&&n+Yr(n,t,r)},Nt.parseInt=lu,Nt.random=function(n,t,r){r&&ie(n,t,r)&&(t=r=null);var e=null==n,u=null==t;return null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=lo(),io(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t)):Rr(n,t)},Nt.reduce=Ne,Nt.reduceRight=Ue,Nt.repeat=su,Nt.result=function(n,t,r){return t=null==n?b:n[t],"undefined"==typeof t&&(t=r),Uo(t)?t.call(n):t},Nt.runInContext=w,Nt.size=function(n){var t=n?n.length:0;return fe(t)?t:$o(n).length},Nt.snakeCase=Mo,Nt.some=$e,Nt.sortedIndex=function(n,t,r,e){var u=ne(r);return u===er&&null==r?Nr(n,t):Ur(n,t,u(r,e,1))},Nt.sortedLastIndex=function(n,t,r,e){var u=ne(r);return u===er&&null==r?Nr(n,t,!0):Ur(n,t,u(r,e,1),!0)},Nt.startCase=qo,Nt.startsWith=function(n,t,r){return n=u(n),r=null==r?0:io(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r},Nt.template=function(n,t,r){var e=Nt.templateSettings;r&&ie(n,t,r)&&(t=r=null),n=u(n),t=nr(nr({},r||t),e,Qt),r=nr(nr({},t.imports),e.imports,Qt);var o,i,f=$o(r),a=Sr(r,f),c=0;r=t.interpolate||At;var l="__p+='";r=Iu((t.escape||At).source+"|"+r.source+"|"+(r===vt?yt:At).source+"|"+(t.evaluate||At).source+"|$","g");var s="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Rt,p),r&&(o=!0,l+="'+__e("+r+")+'"),f&&(i=!0,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(ft,""):l).replace(at,"$1").replace(ct,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=_u(function(){return ju(f,s+"return "+l).apply(b,a)}),t.source=l,Xe(t))throw t;return t},Nt.trim=pu,Nt.trimLeft=function(n,t,r){var e=n;return(n=u(n))?n.slice((r?ie(e,t,r):null==t)?y(n):i(n,t+"")):n},Nt.trimRight=function(n,t,r){var e=n;return(n=u(n))?(r?ie(e,t,r):null==t)?n.slice(0,d(n)+1):n.slice(0,f(n,t+"")+1):n},Nt.trunc=function(n,t,r){r&&ie(n,t,r)&&(t=null);var e=S;if(r=W,null!=t)if(He(t)){var o="separator"in t?t.separator:o,e="length"in t?+t.length||0:e;r="omission"in t?u(t.omission):r}else e=+t||0;if(n=u(n),e>=n.length)return n;if(e-=r.length,1>e)return r;if(t=n.slice(0,e),null==o)return t+r;if(tu(o)){if(n.slice(e).search(o)){var i,f=n.slice(0,e);for(o.global||(o=Iu(o.source,(dt.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;t=t.slice(0,null==i?e:i)}}else n.indexOf(o,e)!=e&&(o=t.lastIndexOf(o),-1<o&&(t=t.slice(0,o)));return t+r},Nt.unescape=function(n){return(n=u(n))&&pt.test(n)?n.replace(lt,m):n},Nt.uniqueId=function(n){var t=++Lu;return u(n)+t},Nt.words=hu,Nt.all=Re,Nt.any=$e,Nt.contains=Se,Nt.detect=Oe,Nt.foldl=Ne,Nt.foldr=Ue,Nt.head=me,Nt.include=Se,Nt.inject=Ne,mu(Nt,function(){var n={};return vr(Nt,function(t,r){Nt.prototype[r]||(n[r]=t)}),n}(),!1),Nt.sample=Fe,Nt.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Fe(t,n)}):Fe(this.value())},Nt.VERSION=x,Pt("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Nt[n].placeholder=Nt}),Pt(["filter","map","takeWhile"],function(n,t){var r=t==F||t==$;Lt.prototype[n]=function(n,e){var u=this.clone(),o=u.__iteratees__||(u.__iteratees__=[]);return u.__filtered__=u.__filtered__||r,o.push({iteratee:ne(n,e,3),type:t}),u}}),Pt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Lt.prototype[n]=function(e){e=null==e?1:oo(Ku(e)||0,0);var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?io(o,e):o+e}else(u.__views__||(u.__views__=[])).push({size:e,type:n+(0>u.__dir__?"Right":"")});return u},Lt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Lt.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),Pt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Lt.prototype[n]=function(){return this[r](1).value()[0]}}),Pt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Lt.prototype[n]=function(){return this[r](1)}}),Pt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?Ar:Er;Lt.prototype[n]=function(n){return this[r](e(n))}}),Lt.prototype.compact=function(){return this.filter(yu)},Lt.prototype.dropWhile=function(n,t){var r,e,u=0>this.__dir__;return n=ne(n,t,3),this.filter(function(t,o,i){return r=r&&(u?o<e:o>e),e=o,r||(r=!n(t,o,i))})},Lt.prototype.reject=function(n,t){return n=ne(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Lt.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);return"undefined"!=typeof t&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Lt.prototype.toArray=function(){return this.drop(0)},vr(Lt.prototype,function(n,t){var r=Nt[t],e=/^(?:first|last)$/.test(t);Nt.prototype[t]=function(){function t(n){return n=[n],Yu.apply(n,o),r.apply(Nt,n)}var u=this.__wrapped__,o=arguments,i=this.__chain__,f=!!this.__actions__.length,a=u instanceof Lt,c=a&&!f;return e&&!i?c?n.call(u):r.call(Nt,this.value()):a||Wo(u)?(u=n.apply(c?u:new Lt(this),o),e||!f&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Ee,args:[t],thisArg:Nt}),new Ft(u,i)):this.thru(t)}}),Pt("concat join pop push shift sort splice unshift".split(" "),function(n){var t=Tu[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);Nt.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Lt.prototype.clone=function(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Lt(this.__wrapped__);return e.__actions__=n?qt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?qt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?qt(r):null,e},Lt.prototype.reverse=function(){if(this.__filtered__){var n=new Lt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},Lt.prototype.value=function(){var n=this.__wrapped__.value();if(!Wo(n))return Wr(n,this.__actions__);var t,r=this.__dir__,e=0>r;t=n.length;for(var u=this.__views__,o=0,i=-1,f=u?u.length:0;++i<f;){var a=u[i],c=a.size;switch(a.type){case"drop":o+=c;break;case"dropRight":t-=c;break;case"take":t=io(t,o+c);break;case"takeRight":o=oo(o,t-c)}}t={start:o,end:t},i=t.start,f=t.end,t=f-i,u=this.__dropCount__,o=io(t,this.__takeCount__),e=e?f:i-1,f=(i=this.__iteratees__)?i.length:0,a=0,c=[];n:for(;t--&&a<o;){for(var e=e+r,l=-1,s=n[e];++l<f;){var p=i[l],h=p.iteratee(s,e,n),p=p.type;if(p==L)s=h;else if(!h){if(p==F)continue n;break n}}u?u--:c[a++]=s}return c},Nt.prototype.chain=function(){return ke(this)},Nt.prototype.commit=function(){return new Ft(this.value(),this.__chain__)},Nt.prototype.plant=function(n){for(var t,r=this;r instanceof Ut;){var e=ge(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Nt.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Lt?(this.__actions__.length&&(n=new Lt(this)),new Ft(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})},Nt.prototype.toString=function(){return this.value()+""},Nt.prototype.run=Nt.prototype.toJSON=Nt.prototype.valueOf=Nt.prototype.value=function(){return Wr(this.__wrapped__,this.__actions__)},Nt.prototype.collect=Nt.prototype.map,Nt.prototype.head=Nt.prototype.first,Nt.prototype.select=Nt.prototype.filter,Nt.prototype.tail=Nt.prototype.rest,Nt}var b,x="3.3.1",A=1,j=2,k=4,E=8,R=16,I=32,O=64,C=128,T=256,S=30,W="...",N=150,U=16,F=0,L=1,$=2,B="Expected a function",z="__lodash_placeholder__",D="[object Arguments]",M="[object Array]",q="[object Boolean]",P="[object Date]",K="[object Error]",V="[object Function]",Y="[object Number]",Z="[object Object]",G="[object RegExp]",J="[object String]",X="[object ArrayBuffer]",H="[object Float32Array]",Q="[object Float64Array]",nt="[object Int8Array]",tt="[object Int16Array]",rt="[object Int32Array]",et="[object Uint8Array]",ut="[object Uint8ClampedArray]",ot="[object Uint16Array]",it="[object Uint32Array]",ft=/\b__p\+='';/g,at=/\b(__p\+=)''\+/g,ct=/(__e\(.*?\)|\b__t\))\+'';/g,lt=/&(?:amp|lt|gt|quot|#39|#96);/g,st=/[&<>"'`]/g,pt=RegExp(lt.source),ht=RegExp(st.source),_t=/<%-([\s\S]+?)%>/g,gt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,yt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,mt=/^\s*function[ \n\r\t]+\w/,wt=/^0[xX]/,bt=/^\[object .+?Constructor\]$/,xt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,At=/($^)/,jt=/[.*+?^${}()|[\]\/\\]/g,kt=RegExp(jt.source),Et=/\bthis\b/,Rt=/['\n\r\u2028\u2029\\]/g,It=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]{2,}(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Ot=" \t\x0B\f\ufeff\n\r\u2028\u2029",Ct="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),Tt={};Tt[H]=Tt[Q]=Tt[nt]=Tt[tt]=Tt[rt]=Tt[et]=Tt[ut]=Tt[ot]=Tt[it]=!0,Tt[D]=Tt[M]=Tt[X]=Tt[q]=Tt[P]=Tt[K]=Tt[V]=Tt["[object Map]"]=Tt[Y]=Tt[Z]=Tt[G]=Tt["[object Set]"]=Tt[J]=Tt["[object WeakMap]"]=!1;var St={};St[D]=St[M]=St[X]=St[q]=St[P]=St[H]=St[Q]=St[nt]=St[tt]=St[rt]=St[Y]=St[Z]=St[G]=St[J]=St[et]=St[ut]=St[ot]=St[it]=!0,St[K]=St[V]=St["[object Map]"]=St["[object Set]"]=St["[object WeakMap]"]=!1;var Wt={leading:!1,maxWait:0,trailing:!1},Nt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ft={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Lt={"function":!0,object:!0},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bt=Lt[typeof window]&&window!==(this&&this.window)?window:this,zt=Lt[typeof exports]&&exports&&!exports.nodeType&&exports,Lt=Lt[typeof module]&&module&&!module.nodeType&&module,Dt=zt&&Lt&&"object"==typeof global&&global;!Dt||Dt.global!==Dt&&Dt.window!==Dt&&Dt.self!==Dt||(Bt=Dt);var Dt=Lt&&Lt.exports===zt&&zt,Mt=w();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Bt._=Mt,define(function(){return Mt})):zt&&Lt?Dt?(Lt.exports=Mt)._=Mt:zt._=Mt:Bt._=Mt}.call(this),function($){var defaults={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},windowLoaded=!1;$(window).bind("load.jcarousel",function(){windowLoaded=!0}),$.jcarousel=function(e,o){this.options=$.extend({},defaults,o||{}),this.locked=!1,this.autoStopped=!1,this.container=null,this.clip=null,this.list=null,this.buttonNext=null,this.buttonPrev=null,this.buttonNextState=null,this.buttonPrevState=null,o&&void 0!==o.rtl||(this.options.rtl="rtl"==($(e).attr("dir")||$("html").attr("dir")||"").toLowerCase()),this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":this.options.rtl?"right":"left";for(var skin="",split=e.className.split(" "),i=0;i<split.length;i++)if(split[i].indexOf("jcarousel-skin")!=-1){$(e).removeClass(split[i]),skin=split[i];break}"UL"==e.nodeName.toUpperCase()||"OL"==e.nodeName.toUpperCase()?(this.list=$(e),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=$(e),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip")),0===this.clip.size()&&(this.clip=this.list.wrap("<div></div>").parent()),0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent()),""!==skin&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+skin+'"></div>'),this.buttonPrev=$(".jcarousel-prev",this.container),0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=$(this.options.buttonPrevHTML).appendTo(this.container)),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.buttonNext=$(".jcarousel-next",this.container),0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=$(this.options.buttonNextHTML).appendTo(this.container)),this.buttonNext.addClass(this.className("jcarousel-next")),this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"}),this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0),this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}),!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var di=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,li=this.list.children("li"),self=this;if(li.size()>0){var wh=0,j=this.options.offset;li.each(function(){self.format(this,j++),wh+=self.dimension(this,di)}),this.list.css(this.wh,wh+100+"px"),o&&void 0!==o.size||(this.options.size=li.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){return self.next(),!1},this.funcPrev=function(){return self.prev(),!1},this.funcResize=function(){self.resizeTimer&&clearTimeout(self.resizeTimer),self.resizeTimer=setTimeout(function(){self.reload()},100)},null!==this.options.initCallback&&this.options.initCallback(this,"init"),!windowLoaded&&$jc.isSafari()?(this.buttons(!1,!1),$(window).bind("load.jcarousel",function(){self.setup()})):this.setup()};var $jc=$.jcarousel;$jc.fn=$jc.prototype={jcarousel:"0.2.9"},$jc.fn.extend=$jc.extend=$.extend,$jc.fn.extend({setup:function(){if(this.first=null,this.last=null,this.prevFirst=null,this.prevLast=null,this.animating=!1,this.timer=null,this.resizeTimer=null,this.tail=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var p=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null,this.animate(p,!1),$(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize),null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!==this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(null!==this.tail&&this.inTail&&this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!==this.options.reloadCallback&&this.options.reloadCallback(this),null!==this.options.visible){var self=this,di=Math.ceil(this.clipping()/this.options.visible),wh=0,lt=0;this.list.children("li").each(function(i){wh+=self.dimension(this,di),i+1<self.first&&(lt=wh)}),this.list.css(this.wh,wh+"px"),this.list.css(this.lt,-lt+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(s){return void 0!==s&&(this.options.size=s,this.locked||this.buttons()),this.options.size},has:function(i,i2){void 0!==i2&&i2||(i2=i),null!==this.options.size&&i2>this.options.size&&(i2=this.options.size);for(var j=i;j<=i2;j++){var e=this.get(j);if(!e.length||e.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(i){return $(">.jcarousel-item-"+i,this.list)},add:function(i,s){var e=this.get(i),old=0,n=$(s);if(0===e.length){var c,j=$jc.intval(i);for(e=this.create(i);;)if(c=this.get(--j),j<=0||c.length){j<=0?this.list.prepend(e):c.after(e);break}}else old=this.dimension(e);"LI"==n.get(0).nodeName.toUpperCase()?(e.replaceWith(n),e=n):e.empty().append(s),this.format(e.removeClass(this.className("jcarousel-item-placeholder")),i);var di=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,wh=this.dimension(e,di)-old;return i>0&&i<this.first&&this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-wh+"px"),this.list.css(this.wh,$jc.intval(this.list.css(this.wh))+wh+"px"),e},remove:function(i){var e=this.get(i);if(e.length&&!(i>=this.first&&i<=this.last)){var d=this.dimension(e);i<this.first&&this.list.css(this.lt,$jc.intval(this.list.css(this.lt))+d+"px"),e.remove(),this.list.css(this.wh,$jc.intval(this.list.css(this.wh))-d+"px")}},next:function(){null===this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null===this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(b){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var pos=$jc.intval(this.list.css(this.lt));pos=b?pos+this.tail:pos-this.tail,this.inTail=!b,this.prevFirst=this.first,this.prevLast=this.last,this.animate(pos)}},scroll:function(i,a){this.locked||this.animating||(this.pauseAuto(),this.animate(this.pos(i),a))},pos:function(i,fv){var pos=$jc.intval(this.list.css(this.lt));if(this.locked||this.animating)return pos;"circular"!=this.options.wrap&&(i=i<1?1:this.options.size&&i>this.options.size?this.options.size:i);for(var g,back=this.first>i,f="circular"!=this.options.wrap&&this.first<=1?1:this.first,c=back?this.get(f):this.get(this.last),j=back?f:f-1,e=null,l=0,p=!1,d=0;back?--j>=i:++j<i;)e=this.get(j),p=!e.length,0===e.length&&(e=this.create(j).addClass(this.className("jcarousel-item-placeholder")),c[back?"before":"after"](e),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(j<=0||j>this.options.size)&&(g=this.get(this.index(j)),g.length&&(e=this.add(j,g.clone(!0))))),c=e,d=this.dimension(e),p&&(l+=d),null!==this.first&&("circular"==this.options.wrap||j>=1&&(null===this.options.size||j<=this.options.size))&&(pos=back?pos+d:pos-d);var clipping=this.clipping(),cache=[],visible=0,v=0;for(c=this.get(i-1),j=i;++visible;){if(e=this.get(j),p=!e.length,0===e.length&&(e=this.create(j).addClass(this.className("jcarousel-item-placeholder")),0===c.length?this.list.prepend(e):c[back?"before":"after"](e),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(j<=0||j>this.options.size)&&(g=this.get(this.index(j)),g.length&&(e=this.add(j,g.clone(!0))))),c=e,d=this.dimension(e),0===d)throw new Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");if("circular"!=this.options.wrap&&null!==this.options.size&&j>this.options.size?cache.push(e):p&&(l+=d),v+=d,v>=clipping)break;j++}for(var x=0;x<cache.length;x++)cache[x].remove();l>0&&(this.list.css(this.wh,this.dimension(this.list)+l+"px"),back&&(pos-=l,this.list.css(this.lt,$jc.intval(this.list.css(this.lt))-l+"px")));var last=i+visible-1;if("circular"!=this.options.wrap&&this.options.size&&last>this.options.size&&(last=this.options.size),j>last)for(visible=0,j=last,v=0;++visible&&(e=this.get(j--),e.length)&&(v+=this.dimension(e),!(v>=clipping)););var first=last-visible+1;if("circular"!=this.options.wrap&&first<1&&(first=1),this.inTail&&back&&(pos+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&last==this.options.size&&last-visible+1>=1){var m=$jc.intval(this.get(last).css(this.options.vertical?"marginBottom":"marginRight"));v-m>clipping&&(this.tail=v-clipping-m)}for(fv&&i===this.options.size&&this.tail&&(pos-=this.tail,this.inTail=!0);i-- >first;)pos+=this.dimension(this.get(i));return this.prevFirst=this.first,this.prevLast=this.last,this.first=first,this.last=last,pos},animate:function(p,a){if(!this.locked&&!this.animating){this.animating=!0;var self=this,scrolled=function(){if(self.animating=!1,0===p&&self.list.css(self.lt,0),!self.autoStopped&&("circular"==self.options.wrap||"both"==self.options.wrap||"last"==self.options.wrap||null===self.options.size||self.last<self.options.size||self.last==self.options.size&&null!==self.tail&&!self.inTail)&&self.startAuto(),self.buttons(),self.notify("onAfterAnimation"),"circular"==self.options.wrap&&null!==self.options.size)for(var i=self.prevFirst;i<=self.prevLast;i++)null===i||i>=self.first&&i<=self.last||!(i<1||i>self.options.size)||self.remove(i)};if(this.notify("onBeforeAnimation"),this.options.animation&&a!==!1){var o=this.options.vertical?{top:p}:this.options.rtl?{right:p}:{left:p},settings={duration:this.options.animation,easing:this.options.easing,complete:scrolled};$.isFunction(this.options.animationStepCallback)&&(settings.step=this.options.animationStepCallback),this.list.animate(o,settings)}else this.list.css(this.lt,p+"px"),scrolled()}},startAuto:function(s){if(void 0!==s&&(this.options.auto=s),0===this.options.auto)return this.stopAuto();if(null===this.timer){this.autoStopped=!1;var self=this;this.timer=window.setTimeout(function(){self.next()},1e3*this.options.auto)}},stopAuto:function(){this.pauseAuto(),this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(n,p){null==n&&(n=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),this.locked||this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||!(this.last>=this.options.size)||(n=null!==this.tail&&!this.inTail)),null==p&&(p=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1),this.locked||this.options.wrap&&"last"!=this.options.wrap||null===this.options.size||1!=this.first||(p=null!==this.tail&&this.inTail));var self=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),n&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[n?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",!n),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=n&&this.buttonNext.each(function(){self.options.buttonNextCallback(self,this,n)}).data("jcarouselstate",n)):null!==this.options.buttonNextCallback&&this.buttonNextState!=n&&this.options.buttonNextCallback(self,null,n),this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),p&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[p?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",!p),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=p&&this.buttonPrev.each(function(){self.options.buttonPrevCallback(self,this,p)}).data("jcarouselstate",p)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=p&&this.options.buttonPrevCallback(self,null,p),this.buttonNextState=n,this.buttonPrevState=p},notify:function(evt){var state=null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",evt,state),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",evt,state,this.first),this.callback("itemFirstOutCallback",evt,state,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",evt,state,this.last),this.callback("itemLastOutCallback",evt,state,this.prevLast)),this.callback("itemVisibleInCallback",evt,state,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",evt,state,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(cb,evt,state,i1,i2,i3,i4){if(null!=this.options[cb]&&("object"==typeof this.options[cb]||"onAfterAnimation"==evt)){var callback="object"==typeof this.options[cb]?this.options[cb][evt]:this.options[cb];if($.isFunction(callback)){var self=this;if(void 0===i1)callback(self,state,evt);else if(void 0===i2)this.get(i1).each(function(){callback(self,this,i1,state,evt)});else for(var call=function(i){self.get(i).each(function(){callback(self,this,i,state,evt)})},i=i1;i<=i2;i++)null===i||i>=i3&&i<=i4||call(i)}}},create:function(i){return this.format("<li></li>",i)},format:function(e,i){e=$(e);for(var split=e.get(0).className.split(" "),j=0;j<split.length;j++)split[j].indexOf("jcarousel-")!=-1&&e.removeClass(split[j]);return e.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+i)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",i),e},className:function(c){return c+" "+c+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(e,d){var el=$(e);if(null==d)return this.options.vertical?el.innerHeight()+$jc.intval(el.css("margin-top"))+$jc.intval(el.css("margin-bottom"))+$jc.intval(el.css("border-top-width"))+$jc.intval(el.css("border-bottom-width"))||$jc.intval(this.options.itemFallbackDimension):el.innerWidth()+$jc.intval(el.css("margin-left"))+$jc.intval(el.css("margin-right"))+$jc.intval(el.css("border-left-width"))+$jc.intval(el.css("border-right-width"))||$jc.intval(this.options.itemFallbackDimension);var w=this.options.vertical?d-$jc.intval(el.css("marginTop"))-$jc.intval(el.css("marginBottom")):d-$jc.intval(el.css("marginLeft"))-$jc.intval(el.css("marginRight"));return $(el).css(this.wh,w+"px"),this.dimension(el)},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-$jc.intval(this.clip.css("borderTopWidth"))-$jc.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-$jc.intval(this.clip.css("borderLeftWidth"))-$jc.intval(this.clip.css("borderRightWidth"))},index:function(i,s){return null==s&&(s=this.options.size),Math.round(((i-1)/s-Math.floor((i-1)/s))*s)+1}}),$jc.extend({defaults:function(d){return $.extend(defaults,d||{})},intval:function(v){return v=parseInt(v,10),isNaN(v)?0:v},windowLoaded:function(){windowLoaded=!0},isSafari:function(){var ua=navigator.userAgent.toLowerCase(),match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||[],browser=match[1]||"";return"webkit"===browser}}),$.fn.jcarousel=function(o){if("string"==typeof o){var instance=$(this).data("jcarousel"),args=Array.prototype.slice.call(arguments,1);return instance[o].apply(instance,args)}return this.each(function(){var instance=$(this).data("jcarousel");instance?(o&&$.extend(instance.options,o),instance.reload()):$(this).data("jcarousel",new $jc(this,o))})}}(jQuery),function($,undefined){function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();if("area"===nodeName){var img,map=element.parentNode,mapName=map.name;return!(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())&&(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img))}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"==nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return!$(element).parents().andSelf().filter(function(){return"hidden"===$.curCSS(this,"visibility")||$.expr.filters.hidden(this)}).length}$.ui=$.ui||{},$.ui.version||($.extend($.ui,{version:"@VERSION",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(delay,fn){return"number"==typeof delay?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;return scrollParent=$.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.curCSS(this,"position",1))&&/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test($.curCSS(this,"overflow",1)+$.curCSS(this,"overflow-y",1)+$.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length)for(var position,value,elem=$(this[0]);elem.length&&elem[0]!==document;){if(position=elem.css("position"),("absolute"===position||"relative"===position||"fixed"===position)&&(value=parseInt(elem.css("zIndex"),10),!isNaN(value)&&0!==value))return value;elem=elem.parent()}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){
size-=parseFloat($.curCSS(elem,"padding"+this,!0))||0,border&&(size-=parseFloat($.curCSS(elem,"border"+this+"Width",!0))||0),margin&&(size-=parseFloat($.curCSS(elem,"margin"+this,!0))||0)}),size}var side="Width"===name?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return"number"!=typeof size?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=100===div.offsetHeight,$.support.selectstart="onselectstart"in div,body.removeChild(div).style.display="none"}),$.extend($.ui,{plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var set=instance.plugins[name];if(set&&instance.element[0].parentNode)for(var i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(el,a){if("hidden"===$(el).css("overflow"))return!1;var scroll=a&&"left"===a?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0||(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},isOverAxis:function(x,reference,size){return x>reference&&x<reference+size},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)}}))}(jQuery),function($,undefined){if($.cleanData){var _cleanData=$.cleanData;$.cleanData=function(elems){for(var elem,i=0;null!=(elem=elems[i]);i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)}}else{var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){return keepData||selector&&!$.filter(selector,[this]).length||$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove")}catch(e){}}),_remove.call($(this),selector,keepData)})}}$.widget=function(name,base,prototype){var fullName,namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName]=function(elem){return!!$.data(elem,name)},$[namespace]=$[namespace]||{},$[namespace][name]=function(options,element){arguments.length&&this._createWidget(options,element)};var basePrototype=new base;basePrototype.options=$.extend(!0,{},basePrototype.options),$[namespace][name].prototype=$.extend(!0,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype),$.widget.bridge(name,$[namespace][name])},$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall="string"==typeof options,args=Array.prototype.slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.extend.apply(null,[!0,options].concat(args)):options,isMethodCall&&"_"===options.charAt(0)?returnValue:(isMethodCall?this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined)return returnValue=methodValue,!1}):this.each(function(){var instance=$.data(this,name);instance?instance.option(options||{})._init():$.data(this,name,new object(options,this))}),returnValue)}},$.Widget=function(options,element){arguments.length&&this._createWidget(options,element)},$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(options,element){$.data(element,this.widgetName,this),this.element=$(element),this.options=$.extend(!0,{},this.options,this._getCreateOptions(),options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(key,value){var options=key;if(0===arguments.length)return $.extend({},this.options);if("string"==typeof key){if(value===undefined)return this.options[key];options={},options[key]=value}return this._setOptions(options),this},_setOptions:function(options){var self=this;return $.each(options,function(key,value){self._setOption(key,value)}),this},_setOption:function(key,value){return this.options[key]=value,"disabled"===key&&this.widget()[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",value),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(type,event,data){var callback=this.options[type];if(event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),data=data||{},event.originalEvent)for(var prop,i=$.event.props.length;i;)prop=$.event.props[--i],event[prop]=event.originalEvent[prop];return this.element.trigger(event,data),!($.isFunction(callback)&&callback.call(this.element[0],event,data)===!1||event.isDefaultPrevented())}}}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function getNextListId(){return++listId}var tabId=0,listId=0;$.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(key,value){if("selected"==key){if(this.options.collapsible&&value==this.options.selected)return;this.select(value)}else this.options[key]=value,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+getNextTabId()},_sanitizeSelector:function(hash){return hash.replace(/:/g,"\\:")},_cookie:function(){var cookie=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+getNextListId());return $.cookie.apply(null,[cookie].concat($.makeArray(arguments)))},_ui:function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var el=$(this);el.html(el.data("label.tabs")).removeData("label.tabs")})},_tabify:function(init){function resetStyle($el,fx){$el.css("display",""),!$.support.opacity&&fx.opacity&&$el[0].style.removeAttribute("filter")}var self=this,o=this.options,fragmentId=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=$(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return $("a",this)[0]}),this.panels=$([]),this.anchors.each(function(i,a){var baseEl,href=$(a).attr("href"),hrefBase=href.split("#")[0];if(hrefBase&&(hrefBase===location.toString().split("#")[0]||(baseEl=$("base")[0])&&hrefBase===baseEl.href)&&(href=a.hash,a.href=href),fragmentId.test(href))self.panels=self.panels.add(self.element.find(self._sanitizeSelector(href)));else if(href&&"#"!==href){$.data(a,"href.tabs",href),$.data(a,"load.tabs",href.replace(/#.*$/,""));var id=self._tabId(a);a.href="#"+id;var $panel=self.element.find("#"+id);$panel.length||($panel=$(o.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(self.panels[i-1]||self.list),$panel.data("destroy.tabs",!0)),self.panels=self.panels.add($panel)}else o.disabled.push(i)}),init?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),o.selected===undefined?(location.hash&&this.anchors.each(function(i,a){if(a.hash==location.hash)return o.selected=i,!1}),"number"!=typeof o.selected&&o.cookie&&(o.selected=parseInt(self._cookie(),10)),"number"!=typeof o.selected&&this.lis.filter(".ui-tabs-selected").length&&(o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),o.selected=o.selected||(this.lis.length?0:-1)):null===o.selected&&(o.selected=-1),o.selected=o.selected>=0&&this.anchors[o.selected]||o.selected<0?o.selected:0,o.disabled=$.unique(o.disabled.concat($.map(this.lis.filter(".ui-state-disabled"),function(n,i){return self.lis.index(n)}))).sort(),$.inArray(o.selected,o.disabled)!=-1&&o.disabled.splice($.inArray(o.selected,o.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),o.selected>=0&&this.anchors.length&&(self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(o.selected).addClass("ui-tabs-selected ui-state-active"),self.element.queue("tabs",function(){self._trigger("show",null,self._ui(self.anchors[o.selected],self.element.find(self._sanitizeSelector(self.anchors[o.selected].hash))[0]))}),this.load(o.selected)),$(window).bind("unload",function(){self.lis.add(self.anchors).unbind(".tabs"),self.lis=self.anchors=self.panels=null})):o.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[o.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),o.cookie&&this._cookie(o.selected,o.cookie);for(var li,i=0;li=this.lis[i];i++)$(li)[$.inArray(i,o.disabled)==-1||$(li).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(o.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==o.event){var addState=function(state,el){el.is(":not(.ui-state-disabled)")&&el.addClass("ui-state-"+state)},removeState=function(state,el){el.removeClass("ui-state-"+state)};this.lis.bind("mouseover.tabs",function(){addState("hover",$(this))}),this.lis.bind("mouseout.tabs",function(){removeState("hover",$(this))}),this.anchors.bind("focus.tabs",function(){addState("focus",$(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){removeState("focus",$(this).closest("li"))})}var hideFx,showFx;o.fx&&($.isArray(o.fx)?(hideFx=o.fx[0],showFx=o.fx[1]):hideFx=showFx=o.fx);var showTab=showFx?function(clicked,$show){$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active"),$show.hide().removeClass("ui-tabs-hide").animate(showFx,showFx.duration||"normal",function(){resetStyle($show,showFx),self._trigger("show",null,self._ui(clicked,$show[0]))})}:function(clicked,$show){$(clicked).closest("li").addClass("ui-tabs-selected ui-state-active"),$show.removeClass("ui-tabs-hide"),self._trigger("show",null,self._ui(clicked,$show[0]))},hideTab=hideFx?function(clicked,$hide){$hide.animate(hideFx,hideFx.duration||"normal",function(){self.lis.removeClass("ui-tabs-selected ui-state-active"),$hide.addClass("ui-tabs-hide"),resetStyle($hide,hideFx),self.element.dequeue("tabs")})}:function(clicked,$hide,$show){self.lis.removeClass("ui-tabs-selected ui-state-active"),$hide.addClass("ui-tabs-hide"),self.element.dequeue("tabs")};this.anchors.bind(o.event+".tabs",function(){var el=this,$li=$(el).closest("li"),$hide=self.panels.filter(":not(.ui-tabs-hide)"),$show=self.element.find(self._sanitizeSelector(el.hash));if($li.hasClass("ui-tabs-selected")&&!o.collapsible||$li.hasClass("ui-state-disabled")||$li.hasClass("ui-state-processing")||self.panels.filter(":animated").length||self._trigger("select",null,self._ui(this,$show[0]))===!1)return this.blur(),!1;if(o.selected=self.anchors.index(this),self.abort(),o.collapsible){if($li.hasClass("ui-tabs-selected"))return o.selected=-1,o.cookie&&self._cookie(o.selected,o.cookie),self.element.queue("tabs",function(){hideTab(el,$hide)}).dequeue("tabs"),this.blur(),!1;if(!$hide.length)return o.cookie&&self._cookie(o.selected,o.cookie),self.element.queue("tabs",function(){showTab(el,$show)}),self.load(self.anchors.index(this)),this.blur(),!1}if(o.cookie&&self._cookie(o.selected,o.cookie),!$show.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";$hide.length&&self.element.queue("tabs",function(){hideTab(el,$hide)}),self.element.queue("tabs",function(){showTab(el,$show)}),self.load(self.anchors.index(this)),$.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(index){return"string"==typeof index&&(index=this.anchors.index(this.anchors.filter("[href$="+index+"]"))),index},destroy:function(){var o=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var href=$.data(this,"href.tabs");href&&(this.href=href);var $this=$(this).unbind(".tabs");$.each(["href","load","cache"],function(i,prefix){$this.removeData(prefix+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){$.data(this,"destroy.tabs")?$(this).remove():$(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),o.cookie&&this._cookie(null,o.cookie),this},add:function(url,label,index){index===undefined&&(index=this.anchors.length);var self=this,o=this.options,$li=$(o.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=url.indexOf("#")?this._tabId($("a",$li)[0]):url.replace("#","");$li.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var $panel=self.element.find("#"+id);return $panel.length||($panel=$(o.panelTemplate).attr("id",id).data("destroy.tabs",!0)),$panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),index>=this.lis.length?($li.appendTo(this.list),$panel.appendTo(this.list[0].parentNode)):($li.insertBefore(this.lis[index]),$panel.insertBefore(this.panels[index])),o.disabled=$.map(o.disabled,function(n,i){return n>=index?++n:n}),this._tabify(),1==this.anchors.length&&(o.selected=0,$li.addClass("ui-tabs-selected ui-state-active"),$panel.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){self._trigger("show",null,self._ui(self.anchors[0],self.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[index],this.panels[index])),this},remove:function(index){index=this._getIndex(index);var o=this.options,$li=this.lis.eq(index).remove(),$panel=this.panels.eq(index).remove();return $li.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(index+(index+1<this.anchors.length?1:-1)),o.disabled=$.map($.grep(o.disabled,function(n,i){return n!=index}),function(n,i){return n>=index?--n:n}),this._tabify(),this._trigger("remove",null,this._ui($li.find("a")[0],$panel[0])),this},enable:function(index){index=this._getIndex(index);var o=this.options;if($.inArray(index,o.disabled)!=-1)return this.lis.eq(index).removeClass("ui-state-disabled"),o.disabled=$.grep(o.disabled,function(n,i){return n!=index}),this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index])),this},disable:function(index){index=this._getIndex(index);var o=this.options;return index!=o.selected&&(this.lis.eq(index).addClass("ui-state-disabled"),o.disabled.push(index),o.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]))),this},select:function(index){if(index=this._getIndex(index),index==-1){if(!this.options.collapsible||this.options.selected==-1)return this;index=this.options.selected}return this.anchors.eq(index).trigger(this.options.event+".tabs"),this},load:function(index){index=this._getIndex(index);var self=this,o=this.options,a=this.anchors.eq(index)[0],url=$.data(a,"load.tabs");if(this.abort(),!url||0!==this.element.queue("tabs").length&&$.data(a,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(index).addClass("ui-state-processing"),o.spinner){var span=$("span",a);span.data("label.tabs",span.html()).html(o.spinner)}return this.xhr=$.ajax($.extend({},o.ajaxOptions,{url:url,success:function(r,s){self.element.find(self._sanitizeSelector(a.hash)).html(r),self._cleanup(),o.cache&&$.data(a,"cache.tabs",!0),self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.success(r,s)}catch(e){}},error:function(xhr,s,e){self._cleanup(),self._trigger("load",null,self._ui(self.anchors[index],self.panels[index]));try{o.ajaxOptions.error(xhr,s,index,a)}catch(e){}}})),self.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(index,url){return this.anchors.eq(index).removeData("cache.tabs").data("load.tabs",url),this},length:function(){return this.anchors.length}}),$.extend($.ui.tabs,{version:"@VERSION"}),$.extend($.ui.tabs.prototype,{rotation:null,rotate:function(ms,continuing){var self=this,o=this.options,rotate=self._rotate||(self._rotate=function(e){clearTimeout(self.rotation),self.rotation=setTimeout(function(){var t=o.selected;self.select(++t<self.anchors.length?t:0)},ms),e&&e.stopPropagation()}),stop=self._unrotate||(self._unrotate=continuing?function(e){t=o.selected,rotate()}:function(e){e.clientX&&self.rotate(null)});return ms?(this.element.bind("tabsshow",rotate),this.anchors.bind(o.event+".tabs",stop),rotate()):(clearTimeout(self.rotation),this.element.unbind("tabsshow",rotate),this.anchors.unbind(o.event+".tabs",stop),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){$.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var self=this,options=self.options;if(self.running=0,self.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),self.headers=self.element.find(options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){options.disabled||$(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){options.disabled||$(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){options.disabled||$(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){options.disabled||$(this).removeClass("ui-state-focus")}),self.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),options.navigation){var current=self.element.find("a").filter(options.navigationFilter).eq(0);if(current.length){var header=current.closest(".ui-accordion-header");header.length?self.active=header:self.active=current.closest(".ui-accordion-content").prev()}}self.active=self._findActive(self.active||options.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),self.active.next().addClass("ui-accordion-content-active"),self._createIcons(),self.resize(),self.element.attr("role","tablist"),self.headers.attr("role","tab").bind("keydown.accordion",function(event){return self._keydown(event)}).next().attr("role","tabpanel"),self.headers.not(self.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),self.active.length?self.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):self.headers.eq(0).attr("tabIndex",0),$.browser.safari||self.headers.find("a").attr("tabIndex",-1),options.event&&self.headers.bind(options.event.split(" ").join(".accordion ")+".accordion",function(event){self._clickHandler.call(self,event,this),event.preventDefault()})},_createIcons:function(){var options=this.options;options.icons&&($("<span></span>").addClass("ui-icon "+options.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(options.icons.header).toggleClass(options.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var options=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var contents=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(options.autoHeight||options.fillHeight)&&contents.css("height",""),$.Widget.prototype.destroy.call(this)},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments),"active"==key&&this.activate(value),"icons"==key&&(this._destroyIcons(),value&&this._createIcons()),"disabled"==key&&this.headers.add(this.headers.next())[value?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(event){if(!(this.options.disabled||event.altKey||event.ctrlKey)){var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=!1;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._clickHandler({target:event.target},event.target),event.preventDefault()}return!toFocus||($(event.target).attr("tabIndex",-1),$(toFocus).attr("tabIndex",0),toFocus.focus(),!1)}},resize:function(){var maxHeight,options=this.options;if(options.fillSpace){if($.browser.msie){var defOverflow=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}maxHeight=this.element.parent().height(),$.browser.msie&&this.element.parent().css("overflow",defOverflow),this.headers.each(function(){maxHeight-=$(this).outerHeight(!0)}),this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else options.autoHeight&&(maxHeight=0,this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight));return this},activate:function(index){this.options.active=index;var active=this._findActive(index)[0];return this._clickHandler({target:active},active),this},_findActive:function(selector){return selector?"number"==typeof selector?this.headers.filter(":eq("+selector+")"):this.headers.not(this.headers.not(selector)):selector===!1?$([]):this.headers.filter(":eq(0)")},_clickHandler:function(event,target){var options=this.options;if(!options.disabled){if(!event.target){if(!options.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(options.icons.headerSelected).addClass(options.icons.header),this.active.next().addClass("ui-accordion-content-active");var toHide=this.active.next(),data={options:options,newHeader:$([]),oldHeader:options.active,newContent:$([]),oldContent:toHide},toShow=this.active=$([]);return void this._toggle(toShow,toHide,data)}var clicked=$(event.currentTarget||target),clickedIsActive=clicked[0]===this.active[0];if(options.active=(!options.collapsible||!clickedIsActive)&&this.headers.index(clicked),!(this.running||!options.collapsible&&clickedIsActive)){var active=this.active,toShow=clicked.next(),toHide=this.active.next(),data={options:options,newHeader:clickedIsActive&&options.collapsible?$([]):clicked,oldHeader:this.active,newContent:clickedIsActive&&options.collapsible?$([]):toShow,oldContent:toHide},down=this.headers.index(this.active[0])>this.headers.index(clicked[0]);this.active=clickedIsActive?$([]):clicked,this._toggle(toShow,toHide,data,clickedIsActive,down),active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(options.icons.headerSelected).addClass(options.icons.header),clickedIsActive||(clicked.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(options.icons.header).addClass(options.icons.headerSelected),clicked.next().addClass("ui-accordion-content-active"))}}},_toggle:function(toShow,toHide,data,clickedIsActive,down){var self=this,options=self.options;self.toShow=toShow,self.toHide=toHide,self.data=data;var complete=function(){if(self)return self._completed.apply(self,arguments)};if(self._trigger("changestart",null,self.data),self.running=0===toHide.size()?toShow.size():toHide.size(),options.animated){var animOptions={};animOptions=options.collapsible&&clickedIsActive?{toShow:$([]),toHide:toHide,complete:complete,down:down,autoHeight:options.autoHeight||options.fillSpace}:{toShow:toShow,toHide:toHide,complete:complete,down:down,autoHeight:options.autoHeight||options.fillSpace},options.proxied||(options.proxied=options.animated),options.proxiedDuration||(options.proxiedDuration=options.duration),options.animated=$.isFunction(options.proxied)?options.proxied(animOptions):options.proxied,options.duration=$.isFunction(options.proxiedDuration)?options.proxiedDuration(animOptions):options.proxiedDuration;var animations=$.ui.accordion.animations,duration=options.duration,easing=options.animated;!easing||animations[easing]||$.easing[easing]||(easing="slide"),animations[easing]||(animations[easing]=function(options){this.slide(options,{easing:easing,duration:duration||700})}),animations[easing](animOptions)}else options.collapsible&&clickedIsActive?toShow.toggle():(toHide.hide(),toShow.show()),complete(!0);toHide.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),toShow.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(cancel){this.running=cancel?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),$.extend($.ui.accordion,{version:"@VERSION",animations:{slide:function(options,additions){if(options=$.extend({easing:"swing",duration:300},options,additions),!options.toHide.size())return void options.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},options);if(!options.toShow.size())return void options.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},options);var originalWidth,overflow=options.toShow.css("overflow"),percentDone=0,showProps={},hideProps={},fxAttrs=["height","paddingTop","paddingBottom"],s=options.toShow;originalWidth=s[0].style.width,s.width(parseInt(s.parent().width(),10)-parseInt(s.css("paddingLeft"),10)-parseInt(s.css("paddingRight"),10)-(parseInt(s.css("borderLeftWidth"),10)||0)-(parseInt(s.css("borderRightWidth"),10)||0)),$.each(fxAttrs,function(i,prop){hideProps[prop]="hide";var parts=(""+$.css(options.toShow[0],prop)).match(/^([\d+-.]+)(.*)$/);showProps[prop]={value:parts[1],unit:parts[2]||"px"}}),options.toShow.css({height:0,overflow:"hidden"}).show(),options.toHide.filter(":hidden").each(options.complete).end().filter(":visible").animate(hideProps,{step:function(now,settings){"height"==settings.prop&&(percentDone=settings.end-settings.start===0?0:(settings.now-settings.start)/(settings.end-settings.start)),options.toShow[0].style[settings.prop]=percentDone*showProps[settings.prop].value+showProps[settings.prop].unit},duration:options.duration,easing:options.easing,complete:function(){options.autoHeight||options.toShow.css("height",""),options.toShow.css({width:originalWidth,overflow:overflow}),options.complete()}})},bounceslide:function(options){this.slide(options,{easing:options.down?"easeOutBounce":"swing",duration:options.down?1e3:200})}}})}(jQuery),window.Modernizr=function(window,document,undefined){function setCss(str){mStyle.cssText=str}function is(obj,type){return typeof obj===type}function contains(str,substr){return!!~(""+str).indexOf(substr)}function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined)return"pfx"!=prefixed||prop}return!1}function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined)return elem===!1?props[i]:is(item,"function")?item.bind(elem||obj):item}return!1}function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssomPrefixes.join(ucProp+" ")+ucProp).split(" ");return is(prefixed,"string")||is(prefixed,"undefined")?testProps(props,prefixed):(props=(prop+" "+domPrefixes.join(ucProp+" ")+ucProp).split(" "),testDOMProps(props,prefixed,elem))}function webforms(){Modernizr.input=function(props){for(var i=0,len=props.length;i<len;i++)attrs[props[i]]=!!(props[i]in inputElem);return attrs.list&&(attrs.list=!(!document.createElement("datalist")||!window.HTMLDataListElement)),attrs}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var featureName,hasOwnProp,version="2.8.3",Modernizr={},enableClasses=!0,docElement=document.documentElement,mod="modernizr",modElem=document.createElement(mod),mStyle=modElem.style,inputElem=document.createElement("input"),prefixes=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),omPrefixes="Webkit Moz O ms",cssomPrefixes=omPrefixes.split(" "),domPrefixes=omPrefixes.toLowerCase().split(" "),tests={},attrs={},classes=[],slice=classes.slice,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement("div"),body=document.body,fakeBody=body||document.createElement("body");if(parseInt(nodes,10))for(;nodes--;)node=document.createElement("div"),node.id=testnames?testnames[nodes]:mod+(nodes+1),div.appendChild(node);return style=["&#173;",'<style id="s',mod,'">',rule,"</style>"].join(""),div.id=mod,(body?div:fakeBody).innerHTML+=style,fakeBody.appendChild(div),body||(fakeBody.style.background="",fakeBody.style.overflow="hidden",docOverflow=docElement.style.overflow,docElement.style.overflow="hidden",
docElement.appendChild(fakeBody)),ret=callback(div,rule),body?div.parentNode.removeChild(div):(fakeBody.parentNode.removeChild(fakeBody),docElement.style.overflow=docOverflow),!!ret},_hasOwnProperty={}.hasOwnProperty;hasOwnProp=is(_hasOwnProperty,"undefined")||is(_hasOwnProperty.call,"undefined")?function(object,property){return property in object&&is(object.constructor.prototype[property],"undefined")}:function(object,property){return _hasOwnProperty.call(object,property)},Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError;var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F,result=target.apply(self,args.concat(slice.call(arguments)));return Object(result)===result?result:self}return target.apply(that,args.concat(slice.call(arguments)))};return bound}),tests.touch=function(){var bool;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?bool=!0:injectElementWithStyles(["@media (",prefixes.join("touch-enabled),("),mod,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(node){bool=9===node.offsetTop}),bool},tests.history=function(){return!(!window.history||!history.pushState)},tests.video=function(){var elem=document.createElement("video"),bool=!1;try{(bool=!!elem.canPlayType)&&(bool=new Boolean(bool),bool.ogg=elem.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),bool.h264=elem.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),bool.webm=elem.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return bool},tests.localstorage=function(){try{return localStorage.setItem(mod,mod),localStorage.removeItem(mod),!0}catch(e){return!1}};for(var feature in tests)hasOwnProp(tests,feature)&&(featureName=feature.toLowerCase(),Modernizr[featureName]=tests[feature](),classes.push((Modernizr[featureName]?"":"no-")+featureName));return Modernizr.input||webforms(),Modernizr.addTest=function(feature,test){if("object"==typeof feature)for(var key in feature)hasOwnProp(feature,key)&&Modernizr.addTest(key,feature[key]);else{if(feature=feature.toLowerCase(),Modernizr[feature]!==undefined)return Modernizr;test="function"==typeof test?test():test,"undefined"!=typeof enableClasses&&enableClasses&&(docElement.className+=" "+(test?"":"no-")+feature),Modernizr[feature]=test}return Modernizr},setCss(""),modElem=inputElem=null,Modernizr._version=version,Modernizr._prefixes=prefixes,Modernizr._domPrefixes=domPrefixes,Modernizr._cssomPrefixes=cssomPrefixes,Modernizr.testProp=function(prop){return testProps([prop])},Modernizr.testAllProps=testPropsAll,Modernizr.testStyles=injectElementWithStyles,Modernizr.prefixed=function(prop,obj,elem){return obj?testPropsAll(prop,obj,elem):testPropsAll(prop,"pfx")},docElement.className=docElement.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(enableClasses?" js "+classes.join(" "):""),Modernizr}(this,this.document),function(){function strToLongs(s){var i,l=new Array(Math.ceil(s.length/4));for(i=0;i<l.length;i++)l[i]=s.charCodeAt(4*i)+(s.charCodeAt(4*i+1)<<8)+(s.charCodeAt(4*i+2)<<16)+(s.charCodeAt(4*i+3)<<24);return l}function longsToStr(l){var i,a=new Array(l.length);for(i=0;i<l.length;i++)a[i]=String.fromCharCode(255&l[i],l[i]>>>8&255,l[i]>>>16&255,l[i]>>>24&255);return a.join("")}function escCtrlCh(str){return str.replace(/[\0\t\n\v\f\r\xa0'"!]/g,function(c){return"!"+c.charCodeAt(0)+"!"})}function unescCtrlCh(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1))})}this.TEAencrypt=function(plaintext,password){if(0===plaintext.length)return"";var k,n,z,y,delta,mx,e,q,sum,p,ciphertext,asciitext=escape(plaintext).replace(/%20/g," "),v=strToLongs(asciitext);for(v.length<=1&&(v[1]=0),k=strToLongs(password.slice(0,16)),n=v.length,z=v[n-1],y=v[0],delta=2654435769,q=Math.floor(6+52/n),sum=0;q-- >0;)for(sum+=delta,e=sum>>>2&3,p=0;p<n;p++)y=v[(p+1)%n],mx=(z>>>5^y<<2)+(y>>>3^z<<4)^(sum^y)+(k[3&p^e]^z),z=v[p]+=mx;return ciphertext=longsToStr(v),escCtrlCh(ciphertext)},this.TEAdecrypt=function(ciphertext,password){if(0===ciphertext.length)return"";for(var mx,e,p,plaintext,v=strToLongs(unescCtrlCh(ciphertext)),k=strToLongs(password.slice(0,16)),n=v.length,z=v[n-1],y=v[0],delta=2654435769,q=Math.floor(6+52/n),sum=q*delta;0!==sum;){for(e=sum>>>2&3,p=n-1;p>=0;p--)z=v[p>0?p-1:n-1],mx=(z>>>5^y<<2)+(y>>>3^z<<4)^(sum^y)+(k[3&p^e]^z),y=v[p]-=mx;sum-=delta}return plaintext=longsToStr(v),plaintext=plaintext.replace(/\0+$/,""),unescape(plaintext)}}(),function($){$.extend({metadata:{defaults:{type:"class",name:"metadata",cre:/({.*})/,single:"metadata"},setType:function(type,name){this.defaults.type=type,this.defaults.name=name},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);settings.single.length||(settings.single="metadata");var data=$.data(elem,settings.single);if(data)return data;if(data="{}","class"==settings.type){var m=settings.cre.exec(elem.className);m&&(data=m[1])}else if("elem"==settings.type){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);e.length&&(data=$.trim(e[0].innerHTML))}else if(void 0!=elem.getAttribute){var attr=elem.getAttribute(settings.name);attr&&(data=attr)}return data.indexOf("{")<0&&(data="{"+data+"}"),data=eval("("+data+")"),$.data(elem,settings.single,data),data}}}),$.fn.metadata=function(opts){return $.metadata.get(this[0],opts)}}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t+b:-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t+b:c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t+b:-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){return(t/=d/2)<1?c/2*t*t*t*t*t+b:c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return 0==t?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){return 0==t?b:t==d?b+c:(t/=d/2)<1?c/2*Math.pow(2,10*(t-1))+b:c/2*(-Math.pow(2,-10*--t)+2)+b},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){return(t/=d/2)<1?-c/2*(Math.sqrt(1-t*t)-1)+b:c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(1==(t/=d))return b+c;if(p||(p=.3*d),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158,p=0,a=c;if(0==t)return b;if(2==(t/=d/2))return b+c;if(p||(p=d*(.3*1.5)),a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return t<1?-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b:a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b},easeInBack:function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){return void 0==s&&(s=1.70158),(t/=d/2)<1?c/2*(t*t*(((s*=1.525)+1)*t-s))+b:c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){return(t/=d)<1/2.75?c*(7.5625*t*t)+b:t<2/2.75?c*(7.5625*(t-=1.5/2.75)*t+.75)+b:t<2.5/2.75?c*(7.5625*(t-=2.25/2.75)*t+.9375)+b:c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},easeInOutBounce:function(x,t,b,c,d){return t<d/2?.5*jQuery.easing.easeInBounce(x,2*t,0,c,d)+b:.5*jQuery.easing.easeOutBounce(x,2*t-d,0,c,d)+.5*c+b}}),function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY,track=function(ev){cX=ev.pageX,cY=ev.pageY},compare=function(ev,ob){return ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t),Math.abs(pX-cX)+Math.abs(pY-cY)<cfg.sensitivity?($(ob).unbind("mousemove",track),ob.hoverIntent_s=1,cfg.over.apply(ob,[ev])):(pX=cX,pY=cY,ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval),void 0)},delay=function(ev,ob){return ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t),ob.hoverIntent_s=0,cfg.out.apply(ob,[ev])},handleHover=function(e){for(var p=("mouseover"==e.type?e.fromElement:e.toElement)||e.relatedTarget;p&&p!=this;)try{p=p.parentNode}catch(e){p=this}if(p==this)return!1;var ev=jQuery.extend({},e),ob=this;ob.hoverIntent_t&&(ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)),"mouseover"==e.type?(pX=ev.pageX,pY=ev.pageY,$(ob).bind("mousemove",track),1!=ob.hoverIntent_s&&(ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval))):($(ob).unbind("mousemove",track),1==ob.hoverIntent_s&&(ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)))};return this.mouseover(handleHover).mouseout(handleHover)}}(jQuery),function($){function toLowerCase(s){return s&&s.toLowerCase?s.toLowerCase():s}function isNum(n){var x=/^\s*?[\+-]?(\d*\.?\d*?)\s*?$/.exec(n);return x&&x.length>0?x[1]:f}function contains(a,n){var bInside=f;return $.each(a,function(i,m){bInside||(bInside=m==n)}),bInside}var f=!1,n=null;$.tinysort={id:"TinySort",version:"1.1.1",copyright:"Copyright (c) 2008-2011 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licenced:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},defaults:{order:"asc",attr:n,data:n,useVal:f,place:"start",returns:f,cases:f,forceStrings:f,sortFunction:n}},$.fn.extend({tinysort:function(_find,_settings){_find&&"string"!=typeof _find&&(_settings=_find,_find=n);var sParent,oSettings=$.extend({},$.tinysort.defaults,_settings),p=parseFloat,oElements={},bFind=!(!_find||""==_find),bAttr=!(oSettings.attr===n||""==oSettings.attr),bData=oSettings.data!==n,bFilter=bFind&&":"==_find[0],$Filter=bFilter?this.filter(_find):this,fn=oSettings.sortFunction;fn||(fn="rand"==oSettings.order?function(){return Math.random()<.5?1:-1}:function(a,b){var x=oSettings.cases?a.s:toLowerCase(a.s),y=oSettings.cases?b.s:toLowerCase(b.s);return!oSettings.forceStrings&&isNum(a.s)&&isNum(b.s)&&(x=p(a.s),y=p(b.s)),("asc"==oSettings.order?1:-1)*(x<y?-1:x>y?1:0)}),this.each(function(i,el){var $This=$(el),mElm=bFind?bFilter?$Filter.filter(this):$This.find(_find):$This,sSort=bData?mElm.data(oSettings.data):bAttr?mElm.attr(oSettings.attr):oSettings.useVal?mElm.val():mElm.text(),mParent=$This.parent();oElements[mParent]||(oElements[mParent]={s:[],n:[]}),mElm.length>0?oElements[mParent].s.push({s:sSort,e:$This,n:i}):oElements[mParent].n.push({e:$This,n:i})});for(sParent in oElements)oElements[sParent].s.sort(fn);var aNewOrder=[];for(sParent in oElements){var oParent=oElements[sParent],aOrg=[],iLow=$(this).length;switch(oSettings.place){case"first":$.each(oParent.s,function(i,obj){iLow=Math.min(iLow,obj.n)});break;case"org":$.each(oParent.s,function(i,obj){aOrg.push(obj.n)});break;case"end":iLow=oParent.n.length;break;default:iLow=0}for(var aCnt=[0,0],i=0;i<$(this).length;i++){var bSList=i>=iLow&&i<iLow+oParent.s.length;contains(aOrg,i)&&(bSList=!0);var mEl=(bSList?oParent.s:oParent.n)[aCnt[bSList?0:1]].e;mEl.parent().append(mEl),!bSList&&oSettings.returns||aNewOrder.push(mEl.get(0)),aCnt[bSList?0:1]++}}return this.pushStack(aNewOrder)}}),$.fn.TinySort=$.fn.Tinysort=$.fn.tsort=$.fn.tinysort}(jQuery),function(d){var cache={};d.publish=function(topic,args){cache[topic]&&d.each(cache[topic],function(){this.apply(d,args||[])})},d.subscribe=function(topic,callback){return cache[topic]||(cache[topic]=[]),cache[topic].push(callback),[topic,callback]},d.unsubscribe=function(handle){var t=handle[0];cache[t]&&d.each(cache[t],function(idx){this==handle[1]&&cache[t].splice(idx,1)})}}(jQuery),window.debug=function(){function exec_callback(args){!callback_func||!callback_force&&con&&con.log||callback_func.apply(window,args)}function is_level(level){return log_level>0?log_level>level:log_methods.length+log_level<=level}for(var callback_func,callback_force,window=this,aps=Array.prototype.slice,con=window.console,that={},log_level=9,log_methods=["error","warn","info","debug","log"],pass_methods="assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "),idx=pass_methods.length,logs=[];--idx>=0;)!function(method){that[method]=function(){0!==log_level&&con&&con[method]&&con[method].apply(con,arguments)}}(pass_methods[idx]);for(idx=log_methods.length;--idx>=0;)!function(idx,level){that[level]=function(){var args=aps.call(arguments),log_arr=[level].concat(args);logs.push(log_arr),exec_callback(log_arr),con&&is_level(idx)&&(con.firebug?con[level].apply(window,args):con[level]?con[level](args):con.log(args))}}(idx,log_methods[idx]);return that.setLevel=function(level){log_level="number"==typeof level?level:9},that.setCallback=function(){var args=aps.call(arguments),max=logs.length,i=max;for(callback_func=args.shift()||null,callback_force="boolean"==typeof args[0]&&args.shift(),i-="number"==typeof args[0]?args.shift():max;i<max;)exec_callback(logs[i++])},that}(),window.espn=window.espn||{},espn.l10n={lang:"en",siteId:1,dayNamesLong:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesMedium:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesShort:"Su Mo Tu We Th Fr Sa".split(" "),monthNamesLong:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),headlines:{edit:'<a class="cbOverlay" data-language="en" tref="/personalization/v3_1/personalization" href="">Edit myHeadlines &#187;</a>',setup:'<p><a class="cbOverlay" data-language="en" tref="/personalization/v3_1/personalization" href="">Set up</a> your preferences and get news delivered about your favorite sports, teams and players.</p>',signin:"<p>Sign in above to set up your preferences and get news delivered about your favorite sports, teams and players.</p>",error:"<p>We could not retrieve your personalized options at this time. Please try again later.</p>",noHeadlines:'<p id="myheadlines">There are no headlines currently for this topic. Please try another topic.</p>',sysError:'<p id="myheadlines">We could not retrieve your headlines at this time. Please try again later.</p>',composerURI:"/composer/cached/tea/myheadlines"},megadropdown:{allMenusUrl:"http://sports-ak.espn.go.com/espn/mega/allMenus",allMenusSecureUrl:"https://a248.e.akamai.net/f/12/621/5m/proxy.espn.go.com/espn/mega/allMenus",menuUrl:"http://sports-ak.espn.go.com/espn/mega/menuJSON",menuSecureUrl:"https://a248.e.akamai.net/f/12/621/5m/proxy.espn.go.com/espn/mega/menuJSON"},video:{tsOverlayURI:"/video/overlay"},myEspnText:{imgRef:"https://a248.e.akamai.net/f/12/621/5m/proxy.espn.go.com/prod",urlPrefix:"https://r.espn.go.com",isProd:"true",language:"en",welcometext:"Welcome",register:"Register",myespntext:"myESPN",signin:"Sign In",or:"or",signout:"Sign Out",heliumdown:"Login Temporarily Unavailable",myespnerrortext1:"We're sorry, an error has occurred during your request.",myespnerrortext2:"Please sign in on our",myespnerrortext3:"login page",mserrortext2:"We apologize for the inconvenience.",viewall:"View All",addlc:"Add",sportstext:"Sports",teamstext:"Teams",playerstext:"Players",columniststext:"Columnists",joininsider:"Join Insider",activate:"Activate",activateinsider:"Activate Insider",freemembership:"Free Membership",freefantasy:"Free Fantasy Football",playfantasy:"Play Fantasy Football",followyoursports:"Follow Your Sports",personalizenow:"Personalize Now",connectedfacebook:"Connected to Facebook",connectfacebook:"Connect with Facebook"}};var swfobject=function(){function f(){if(!J){try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=!0;for(var X=U.length,Y=0;Y<X;Y++)U[Y]()}}function K(X){J?X():U[U.length]=X}function s(Y){if(typeof O.addEventListener!=D)O.addEventListener("load",Y,!1);else if(typeof j.addEventListener!=D)j.addEventListener("load",Y,!1);else if(typeof O.attachEvent!=D)i(O,"onload",Y);else if("function"==typeof O.onload){var X=O.onload;O.onload=function(){X(),Y()}}else O.onload=Y}function h(){T?V():H()}function V(){var X=j.getElementsByTagName("body")[0],aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;!function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");ab&&(ab=ab.split(" ")[1].split(","),M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)])}else if(Y<10)return Y++,void setTimeout(arguments.callee,10);X.removeChild(aa),Z=null,H()}()}else H()}function H(){var ag=o.length;if(ag>0)for(var af=0;af<ag;af++){var Y=o[af].id,ab=o[af].callbackFn,aa={success:!1,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae)if(!F(o[af].swfVersion)||M.wk&&M.wk<312)if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall,ai.width=ae.getAttribute("width")||"0",ai.height=ae.getAttribute("height")||"0",ae.getAttribute("class")&&(ai.styleclass=ae.getAttribute("class")),ae.getAttribute("align")&&(ai.align=ae.getAttribute("align"));for(var ah={},X=ae.getElementsByTagName("param"),ac=X.length,ad=0;ad<ac;ad++)"movie"!=X[ad].getAttribute("name").toLowerCase()&&(ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value"));P(ai,ah,Y,ab)}else p(ae),ab&&ab(aa);else w(Y,!0),ab&&(aa.success=!0,aa.ref=z(Y),ab(aa))}else if(w(Y,!0),ab){var Z=z(Y);Z&&typeof Z.SetVariable!=D&&(aa.success=!0,aa.ref=Z),ab(aa)}}}function z(aa){var X=null,Y=c(aa);if(Y&&"OBJECT"==Y.nodeName)if(typeof Y.SetVariable!=D)X=Y;else{var Z=Y.getElementsByTagName(r)[0];Z&&(X=Z)}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=!0,E=Z||null,B={success:!1,id:X};var ae=c(X);if(ae){"OBJECT"==ae.nodeName?(l=g(ae),Q=null):(l=ae,Q=X),aa.id=R,(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)&&(aa.width="310"),(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)&&(aa.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D?ab.flashvars+="&"+ac:ab.flashvars=ac,M.ie&&M.win&&4!=ae.readyState){var Y=C("div");X+="SWFObjectNew",Y.setAttribute("id",X),ae.parentNode.insertBefore(Y,ae),ae.style.display="none",function(){4==ae.readyState?ae.parentNode.removeChild(ae):setTimeout(arguments.callee,10)}()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&4!=Y.readyState){var X=C("div");Y.parentNode.insertBefore(X,Y),X.parentNode.replaceChild(g(Y),X),Y.style.display="none",function(){4==Y.readyState?Y.parentNode.removeChild(Y):setTimeout(arguments.callee,10)}()}else Y.parentNode.replaceChild(g(Y),Y)}function g(ab){var aa=C("div");if(M.win&&M.ie)aa.innerHTML=ab.innerHTML;else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad)for(var X=ad.length,Z=0;Z<X;Z++)1==ad[Z].nodeType&&"PARAM"==ad[Z].nodeName||8==ad[Z].nodeType||aa.appendChild(ad[Z].cloneNode(!0))}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312)return X;if(aa)if(typeof ai.id==D&&(ai.id=Y),M.ie&&M.win){var ah="";for(var ae in ai)ai[ae]!=Object.prototype[ae]&&("data"==ae.toLowerCase()?ag.movie=ai[ae]:"styleclass"==ae.toLowerCase()?ah+=' class="'+ai[ae]+'"':"classid"!=ae.toLowerCase()&&(ah+=" "+ae+'="'+ai[ae]+'"'));var af="";for(var ad in ag)ag[ad]!=Object.prototype[ad]&&(af+='<param name="'+ad+'" value="'+ag[ad]+'" />');aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>",N[N.length]=ai.id,X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai)ai[ac]!=Object.prototype[ac]&&("styleclass"==ac.toLowerCase()?Z.setAttribute("class",ai[ac]):"classid"!=ac.toLowerCase()&&Z.setAttribute(ac,ai[ac]));for(var ab in ag)ag[ab]!=Object.prototype[ab]&&"movie"!=ab.toLowerCase()&&e(Z,ab,ag[ab]);aa.parentNode.replaceChild(Z,aa),X=Z}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X),aa.setAttribute("value",Y),Z.appendChild(aa)}function y(Y){var X=c(Y);X&&"OBJECT"==X.nodeName&&(M.ie&&M.win?(X.style.display="none",function(){4==X.readyState?b(Y):setTimeout(arguments.callee,10)}()):X.parentNode.removeChild(X))}function b(Z){var Y=c(Z);if(Y){for(var X in Y)"function"==typeof Y[X]&&(Y[X]=null);Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y),I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");return X[0]=parseInt(X[0],10),X[1]=parseInt(X[1],10)||0,X[2]=parseInt(X[2],10)||0,Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]}function v(ac,Y,ad,ab){if(!M.ie||!M.mac){var aa=j.getElementsByTagName("head")[0];if(aa){var X=ad&&"string"==typeof ad?ad:"screen";if(ab&&(n=null,G=null),!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css"),Z.setAttribute("media",X),n=aa.appendChild(Z),M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0&&(n=j.styleSheets[j.styleSheets.length-1]),G=X}M.ie&&M.win?n&&typeof n.addRule==r&&n.addRule(ac,Y):n&&typeof j.createTextNode!=D&&n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(m){var Y=X?"visible":"hidden";J&&c(Z)?c(Z).style.visibility=Y:v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/,X=null!=Z.exec(Y);return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var l,Q,E,B,n,G,D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=!1,U=[h],o=[],N=[],I=[],J=!1,a=!1,m=!0,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=!!/webkit/.test(ah)&&parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),X=!1,ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r)ab=t.plugins[S].description,!ab||typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin||(T=!0,X=!1,ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10),ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10),ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=D)try{var ad=new ActiveXObject(W);ad&&(ab=ad.GetVariable("$version"),ab&&(X=!0,ab=ab.split(" ")[1].split(","),ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]))}catch(Z){}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}();(function(){M.w3&&((typeof j.readyState!=D&&"complete"==j.readyState||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))&&f(),J||(typeof j.addEventListener!=D&&j.addEventListener("DOMContentLoaded",f,!1),M.ie&&M.win&&(j.attachEvent(x,function(){"complete"==j.readyState&&(j.detachEvent(x,arguments.callee),f())}),O==top&&!function(){if(!J){try{j.documentElement.doScroll("left")}catch(X){return void setTimeout(arguments.callee,0)}f()}}()),M.wk&&!function(){if(!J)return/loaded|complete/.test(j.readyState)?void f():void setTimeout(arguments.callee,0)}(),s(f)))})(),function(){M.ie&&M.win&&window.attachEvent("onunload",function(){for(var ac=I.length,ab=0;ab<ac;ab++)I[ab][0].detachEvent(I[ab][1],I[ab][2]);for(var Z=N.length,aa=0;aa<Z;aa++)y(N[aa]);for(var Y in M)M[Y]=null;M=null;for(var X in swfobject)swfobject[X]=null;swfobject=null})}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab,Y.swfVersion=X,Y.expressInstall=aa,Y.callbackFn=Z,o[o.length]=Y,w(ab,!1)}else Z&&Z({success:!1,id:ab})},getObjectById:function(X){if(M.w3)return z(X)},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:!1,id:ah};M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y?(w(ah,!1),K(function(){ae+="",ag+="";var aj={};if(af&&typeof af===r)for(var al in af)aj[al]=af[al];aj.data=ab,aj.width=ae,aj.height=ag;var am={};if(ad&&typeof ad===r)for(var ak in ad)am[ak]=ad[ak];if(Z&&typeof Z===r)for(var ai in Z)typeof am.flashvars!=D?am.flashvars+="&"+ai+"="+Z[ai]:am.flashvars=ai+"="+Z[ai];if(F(Y)){var an=u(aj,am,ah);aj.id==ah&&w(ah,!0),X.success=!0,X.ref=an}else{if(aa&&A())return aj.data=aa,void P(aj,am,ah,ac);w(ah,!0)}ac&&ac(X)})):ac&&ac(X)},switchOffAutoHideShow:function(){m=!1},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){return M.w3?u(Z,Y,X):void 0},showExpressInstall:function(Z,aa,X,Y){M.w3&&A()&&P(Z,aa,X,Y)},removeSWF:function(X){M.w3&&y(X)},createCSS:function(aa,Z,Y,X){M.w3&&v(aa,Z,Y,X)},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)&&(Z=Z.split("?")[1]),null==aa)return L(Z);for(var Y=Z.split("&"),X=0;X<Y.length;X++)if(Y[X].substring(0,Y[X].indexOf("="))==aa)return L(Y[X].substring(Y[X].indexOf("=")+1))}return""},expressInstallCallback:function(){if(a){var X=c(R);X&&l&&(X.parentNode.replaceChild(l,X),Q&&(w(Q,!0),M.ie&&M.win&&(l.style.display="block")),E&&E(B)),a=!1}}}}();!function(window,document,undefined){function renderObject(render){var params,attrs,div,divID,altContent,self=this,swf=null;return self.compiled=!1,self.src=undefined,function libCheck(){if(window.__FLASH_JS_DONE__){if(!window.swfobject.hasFlashPlayerVersion(""+self.FlashVer))return altContent=self.altTxt?self.altTxt:"<IMG SRC="+self.altImg+" WIDTH="+self.width+" HEIGHT="+self.height+" BORDER=0>",div=document.createElement("DIV"),div.setAttribute("id",divID),div.innerHTML=altContent,self._currentBlock&&self._currentBlock.parentNode&&"HEAD"!==self._currentBlock.parentNode.nodeName?self._currentBlock.parentNode.insertBefore(div,self._currentBlock):document.getElementsByTagName("body")[0].appendChild(div),undefined;params={flashVars:self.flashVars,bgcolor:self.bgcolor,wmode:self.wmode,allowscriptaccess:self.allowScriptAccess,allownetworking:self.allowNetworking,quality:self.quality,scale:self.scale,align:self.align,salign:self.salign,swliveconnect:self.LiveConnect,menu:self.menu,play:self.play,allowfullscreen:self.allowfullscreen,seamlesstabbing:self.seamlesstabbing,devicefont:self.deviceFont},attrs={data:self.flashFile,height:self.height,width:self.width,id:self.ID},divID="swfDiv"+ +new Date,div=document.createElement("DIV"),div.setAttribute("id",divID),self.useDOM?document.getElementById(self.targetElement).appendChild(div):self._currentBlock&&self._currentBlock.parentNode&&"HEAD"!==self._currentBlock.parentNode.nodeName?self._currentBlock.parentNode.insertBefore(div,self._currentBlock):document.getElementsByTagName("body")[0].appendChild(div),preExistingElement=document.getElementById(self.ID),preExistingElement&&render!==!0&&(genID="_____TEMP_SWF_REPLACEMENT_"+ +new Date+"_____",preExistingElement.setAttribute("id",genID)),swf=swfobject.createSWF(attrs,params,divID),self.compiled=!0,render!==!0&&(self.src=swf,preExistingElement&&preExistingElement.setAttribute("id",self.ID),swfobject.removeSWF(self.ID))}else setTimeout(libCheck,10)}(),render!==!0?self:undefined}var cId,script,s,preExistingElement,genID,asset_path="https:"===document.location.protocol?"https://a248.e.akamai.net/f/12/621/5m/proxy.espn.go.com/prod/":"http://a.espncdn.com/prod/";window.swfobject||window.__FLASH_JS_DONE__?window.swfobject&&(window.__FLASH_JS_DONE__=!0):(window.__FLASH_JS_DONE__=!1,script=document.createElement("script"),script.type="text/javascript",script.async=!0,script.src=asset_path+"scripts/swfobject/2.2/swfobject.js",s=document.getElementsByTagName("script")[0],s.parentNode.insertBefore(script,s),function libCheck(){window.swfobject?window.__FLASH_JS_DONE__=!0:setTimeout(libCheck,10)}()),window.____FLASH_RENDERER_____=renderObject,window.flashObj||(window.flashObj=function(){var scripts=document.getElementsByTagName("script"),currentBlock=scripts[scripts.length-1],self=this;cId=+new Date,self._currentBlock=currentBlock,self.play=!0,self.flashFile="/flash/blank.swf",self.LiveConnect="FALSE",self.IEonly=null,self.wmode="opaque",self.redirect=null,self.DenyIEdl="FALSE",self.altImg="/blank.gif",self.bgcolor=null,self.altTxt=null,self.height="1",self.width="1",self.scale="exactfit",self.salign="lt",self.align="left",self.flashVars=null,self.ID="flash"+cId,self.name="flash"+cId,self.webTV="true",self.quality="best",self.menu="false",self.deviceFont="false",self.FlashVer=8,self.cabVersion="8,0,0,0",self.allowScriptAccess="Always",self.allowNetworking="All",self.useDOM=!1,self.targetElement=null,self.render=renderObject,self.allowfullscreen=!0,self.seamlesstabbing=!0})}(this,document),function($,document,window){function $tag(tag,id,css){var element=document.createElement(tag);return id&&(element.id=prefix+id),css&&(element.style.cssText=css),$(element)}function winheight(){return window.innerHeight?window.innerHeight:$(window).height()}function Settings(element,options){options!==Object(options)&&(options={}),this.cache={},this.el=element,this.value=function(key){var dataAttr;return void 0===this.cache[key]&&(dataAttr=$(this.el).attr("data-cbox-"+key),void 0!==dataAttr?this.cache[key]=dataAttr:void 0!==options[key]?this.cache[key]=options[key]:void 0!==defaults[key]&&(this.cache[key]=defaults[key])),this.cache[key]},this.get=function(key){var value=this.value(key);return $.isFunction(value)?value.call(this.el,this):value}}function getIndex(increment){var max=$related.length,newIndex=(index+increment)%max;return newIndex<0?max+newIndex:newIndex}function setSize(size,dimension){return Math.round((/%/.test(size)?("x"===dimension?$window.width():winheight())/100:1)*parseInt(size,10))}function isImage(settings,url){return settings.get("photo")||settings.get("photoRegex").test(url)}function retinaUrl(settings,url){return settings.get("retinaUrl")&&window.devicePixelRatio>1?url.replace(settings.get("photoRegex"),settings.get("retinaSuffix")):url}function trapFocus(e){"contains"in $box[0]&&!$box[0].contains(e.target)&&e.target!==$overlay[0]&&(e.stopPropagation(),$box.focus())}function setClass(str){setClass.str!==str&&($box.add($overlay).removeClass(setClass.str).addClass(str),setClass.str=str)}function getRelated(rel){index=0,rel&&rel!==!1&&"nofollow"!==rel?($related=$("."+boxElement).filter(function(){var options=$.data(this,colorbox),settings=new Settings(this,options);return settings.get("rel")===rel}),index=$related.index(settings.el),index===-1&&($related=$related.add(settings.el),index=$related.length-1)):$related=$(settings.el)}function trigger(event){$(document).trigger(event),$events.triggerHandler(event)}function launch(element){var options;if(!closing){if(options=$(element).data(colorbox),settings=new Settings(element,options),getRelated(settings.get("rel")),
!open){open=active=!0,setClass(settings.get("className")),$box.css({visibility:"hidden",display:"block",opacity:""}),$loaded=$tag(div,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),$content.css({width:"",height:""}).append($loaded),interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(!0)-$content.height(),interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(!0)-$content.width(),loadedHeight=$loaded.outerHeight(!0),loadedWidth=$loaded.outerWidth(!0);var initialWidth=setSize(settings.get("initialWidth"),"x"),initialHeight=setSize(settings.get("initialHeight"),"y"),maxWidth=settings.get("maxWidth"),maxHeight=settings.get("maxHeight");settings.w=Math.max((maxWidth!==!1?Math.min(initialWidth,setSize(maxWidth,"x")):initialWidth)-loadedWidth-interfaceWidth,0),settings.h=Math.max((maxHeight!==!1?Math.min(initialHeight,setSize(maxHeight,"y")):initialHeight)-loadedHeight-interfaceHeight,0),$loaded.css({width:"",height:settings.h}),publicMethod.position(),trigger(event_open),settings.get("onOpen"),$groupControls.add($title).hide(),$box.focus(),settings.get("trapFocus")&&document.addEventListener&&(document.addEventListener("focus",trapFocus,!0),$events.one(event_closed,function(){document.removeEventListener("focus",trapFocus,!0)})),settings.get("returnFocus")&&$events.one(event_closed,function(){$(settings.el).focus()})}var opacity=parseFloat(settings.get("opacity"));$overlay.css({opacity:opacity===opacity?opacity:"",cursor:settings.get("overlayClose")?"pointer":"",visibility:"visible"}).show(),settings.get("closeButton")?$close.html(settings.get("close")).appendTo($content):$close.appendTo("<div/>"),load()}}function appendHTML(){$box||(init=!1,$window=$(window),$box=$tag(div).attr({id:colorbox,"class":$.support.opacity===!1?prefix+"IE":"",role:"dialog",tabindex:"-1"}).hide(),$overlay=$tag(div,"Overlay").hide(),$loadingOverlay=$([$tag(div,"LoadingOverlay")[0],$tag(div,"LoadingGraphic")[0]]),$wrap=$tag(div,"Wrapper"),$content=$tag(div,"Content").append($title=$tag(div,"Title"),$current=$tag(div,"Current"),$prev=$('<button type="button"/>').attr({id:prefix+"Previous"}),$next=$('<button type="button"/>').attr({id:prefix+"Next"}),$slideshow=$('<button type="button"/>').attr({id:prefix+"Slideshow"}),$loadingOverlay),$close=$('<button type="button"/>').attr({id:prefix+"Close"}),$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,!1,"clear:left").append($leftBorder=$tag(div,"MiddleLeft"),$content,$rightBorder=$tag(div,"MiddleRight")),$tag(div,!1,"clear:left").append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find("div div").css({"float":"left"}),$loadingBay=$tag(div,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),$groupControls=$next.add($prev).add($current).add($slideshow)),document.body&&!$box.parent().length&&$(document.body).append($overlay,$box.append($wrap,$loadingBay))}function addBindings(){function clickHandler(e){e.which>1||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),launch(this))}return!!$box&&(init||(init=!0,$next.click(function(){publicMethod.next()}),$prev.click(function(){publicMethod.prev()}),$close.click(function(){publicMethod.close()}),$overlay.click(function(){settings.get("overlayClose")&&publicMethod.close()}),$(document).bind("keydown."+prefix,function(e){var key=e.keyCode;open&&settings.get("escKey")&&27===key&&(e.preventDefault(),publicMethod.close()),open&&settings.get("arrowKey")&&$related[1]&&!e.altKey&&(37===key?(e.preventDefault(),$prev.click()):39===key&&(e.preventDefault(),$next.click()))}),$.isFunction($.fn.on)?$(document).on("click."+prefix,"."+boxElement,clickHandler):$("."+boxElement).live("click."+prefix,clickHandler)),!0)}function load(){var href,setResize,$inline,prep=publicMethod.prep,request=++requests;if(active=!0,photo=!1,trigger(event_purge),trigger(event_load),settings.get("onLoad"),settings.h=settings.get("height")?setSize(settings.get("height"),"y")-loadedHeight-interfaceHeight:settings.get("innerHeight")&&setSize(settings.get("innerHeight"),"y"),settings.w=settings.get("width")?setSize(settings.get("width"),"x")-loadedWidth-interfaceWidth:settings.get("innerWidth")&&setSize(settings.get("innerWidth"),"x"),settings.mw=settings.w,settings.mh=settings.h,settings.get("maxWidth")&&(settings.mw=setSize(settings.get("maxWidth"),"x")-loadedWidth-interfaceWidth,settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw),settings.get("maxHeight")&&(settings.mh=setSize(settings.get("maxHeight"),"y")-loadedHeight-interfaceHeight,settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh),href=settings.get("href"),loadingTimer=setTimeout(function(){$loadingOverlay.show()},100),settings.get("inline")){var $target=$(href).eq(0);$inline=$("<div>").hide().insertBefore($target),$events.one(event_purge,function(){$inline.replaceWith($target)}),prep($target)}else settings.get("iframe")?prep(" "):settings.get("html")?prep(settings.get("html")):isImage(settings,href)?(href=retinaUrl(settings,href),photo=settings.get("createImg"),$(photo).addClass(prefix+"Photo").bind("error."+prefix,function(){prep($tag(div,"Error").html(settings.get("imgError")))}).one("load",function(){request===requests&&setTimeout(function(){var percent;settings.get("retinaImage")&&window.devicePixelRatio>1&&(photo.height=photo.height/window.devicePixelRatio,photo.width=photo.width/window.devicePixelRatio),settings.get("scalePhotos")&&(setResize=function(){photo.height-=photo.height*percent,photo.width-=photo.width*percent},settings.mw&&photo.width>settings.mw&&(percent=(photo.width-settings.mw)/photo.width,setResize()),settings.mh&&photo.height>settings.mh&&(percent=(photo.height-settings.mh)/photo.height,setResize())),settings.h&&(photo.style.marginTop=Math.max(settings.mh-photo.height,0)/2+"px"),$related[1]&&(settings.get("loop")||$related[index+1])&&(photo.style.cursor="pointer",$(photo).bind("click."+prefix,function(){publicMethod.next()})),photo.style.width=photo.width+"px",photo.style.height=photo.height+"px",prep(photo)},1)}),photo.src=href):href&&$loadingBay.load(href,settings.get("data"),function(data,status){request===requests&&prep("error"===status?$tag(div,"Error").html(settings.get("xhrError")):$(this).contents())})}var $overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,index,photo,open,active,closing,loadingTimer,publicMethod,init,defaults={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return $(this).attr("href")},title:function(){return this.title},createImg:function(){var img=new Image,attrs=$(this).data("cbox-img-attrs");return"object"==typeof attrs&&$.each(attrs,function(key,val){img[key]=val}),img},createIframe:function(){var iframe=document.createElement("iframe"),attrs=$(this).data("cbox-iframe-attrs");return"object"==typeof attrs&&$.each(attrs,function(key,val){iframe[key]=val}),"frameBorder"in iframe&&(iframe.frameBorder=0),"allowTransparency"in iframe&&(iframe.allowTransparency="true"),iframe.name=(new Date).getTime(),iframe.allowFullscreen=!0,iframe}},colorbox="colorbox",prefix="cbox",boxElement=prefix+"Element",event_open=prefix+"_open",event_load=prefix+"_load",event_complete=prefix+"_complete",event_cleanup=prefix+"_cleanup",event_closed=prefix+"_closed",event_purge=prefix+"_purge",$events=$("<a/>"),div="div",requests=0,previousCSS={},slideshow=function(){function clear(){clearTimeout(timeOut)}function set(){(settings.get("loop")||$related[index+1])&&(clear(),timeOut=setTimeout(publicMethod.next,settings.get("slideshowSpeed")))}function start(){$slideshow.html(settings.get("slideshowStop")).unbind(click).one(click,stop),$events.bind(event_complete,set).bind(event_load,clear),$box.removeClass(className+"off").addClass(className+"on")}function stop(){clear(),$events.unbind(event_complete,set).unbind(event_load,clear),$slideshow.html(settings.get("slideshowStart")).unbind(click).one(click,function(){publicMethod.next(),start()}),$box.removeClass(className+"on").addClass(className+"off")}function reset(){active=!1,$slideshow.hide(),clear(),$events.unbind(event_complete,set).unbind(event_load,clear),$box.removeClass(className+"off "+className+"on")}var active,timeOut,className=prefix+"Slideshow_",click="click."+prefix;return function(){active?settings.get("slideshow")||($events.unbind(event_cleanup,reset),reset()):settings.get("slideshow")&&$related[1]&&(active=!0,$events.one(event_cleanup,reset),settings.get("slideshowAuto")?start():stop(),$slideshow.show())}}();$[colorbox]||($(appendHTML),publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var settings,$obj=this;return options=options||{},$.isFunction($obj)&&($obj=$("<a/>"),options.open=!0),$obj[0]?(appendHTML(),addBindings()&&(callback&&(options.onComplete=callback),$obj.each(function(){var old=$.data(this,colorbox)||{};$.data(this,colorbox,$.extend(old,options))}).addClass(boxElement),settings=new Settings($obj[0],options),settings.get("open")&&launch($obj[0])),$obj):$obj},publicMethod.position=function(speed,loadedCallback){function modalDimensions(){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=parseInt($box[0].style.width,10)-interfaceWidth+"px",$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=parseInt($box[0].style.height,10)-interfaceHeight+"px"}var css,scrollTop,scrollLeft,top=0,left=0,offset=$box.offset();if($window.unbind("resize."+prefix),$box.css({top:-9e4,left:-9e4}),scrollTop=$window.scrollTop(),scrollLeft=$window.scrollLeft(),settings.get("fixed")?(offset.top-=scrollTop,offset.left-=scrollLeft,$box.css({position:"fixed"})):(top=scrollTop,left=scrollLeft,$box.css({position:"absolute"})),left+=settings.get("right")!==!1?Math.max($window.width()-settings.w-loadedWidth-interfaceWidth-setSize(settings.get("right"),"x"),0):settings.get("left")!==!1?setSize(settings.get("left"),"x"):Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2),top+=settings.get("bottom")!==!1?Math.max(winheight()-settings.h-loadedHeight-interfaceHeight-setSize(settings.get("bottom"),"y"),0):settings.get("top")!==!1?setSize(settings.get("top"),"y"):Math.round(Math.max(winheight()-settings.h-loadedHeight-interfaceHeight,0)/2),$box.css({top:offset.top,left:offset.left,visibility:"visible"}),$wrap[0].style.width=$wrap[0].style.height="9999px",css={width:settings.w+loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left},speed){var tempSpeed=0;$.each(css,function(i){if(css[i]!==previousCSS[i])return void(tempSpeed=speed)}),speed=tempSpeed}previousCSS=css,speed||$box.css(css),$box.dequeue().animate(css,{duration:speed||0,complete:function(){modalDimensions(),active=!1,$wrap[0].style.width=settings.w+loadedWidth+interfaceWidth+"px",$wrap[0].style.height=settings.h+loadedHeight+interfaceHeight+"px",settings.get("reposition")&&setTimeout(function(){$window.bind("resize."+prefix,publicMethod.position)},1),$.isFunction(loadedCallback)&&loadedCallback()},step:modalDimensions})},publicMethod.resize=function(options){var scrolltop;open&&(options=options||{},options.width&&(settings.w=setSize(options.width,"x")-loadedWidth-interfaceWidth),options.innerWidth&&(settings.w=setSize(options.innerWidth,"x")),$loaded.css({width:settings.w}),options.height&&(settings.h=setSize(options.height,"y")-loadedHeight-interfaceHeight),options.innerHeight&&(settings.h=setSize(options.innerHeight,"y")),options.innerHeight||options.height||(scrolltop=$loaded.scrollTop(),$loaded.css({height:"auto"}),settings.h=$loaded.height()),$loaded.css({height:settings.h}),scrolltop&&$loaded.scrollTop(scrolltop),publicMethod.position("none"===settings.get("transition")?0:settings.get("speed")))},publicMethod.prep=function(object){function getWidth(){return settings.w=settings.w||$loaded.width(),settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w,settings.w}function getHeight(){return settings.h=settings.h||$loaded.height(),settings.h=settings.mh&&settings.mh<settings.h?settings.mh:settings.h,settings.h}if(open){var callback,speed="none"===settings.get("transition")?0:settings.get("speed");$loaded.remove(),$loaded=$tag(div,"LoadedContent").append(object),$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.get("scrolling")?"auto":"hidden"}).css({height:getHeight()}).prependTo($content),$loadingBay.hide(),$(photo).css({"float":"none"}),setClass(settings.get("className")),callback=function(){function removeFilter(){$.support.opacity===!1&&$box[0].style.removeAttribute("filter")}var iframe,complete,total=$related.length;open&&(complete=function(){clearTimeout(loadingTimer),$loadingOverlay.hide(),trigger(event_complete),settings.get("onComplete")},$title.html(settings.get("title")).show(),$loaded.show(),total>1?("string"==typeof settings.get("current")&&$current.html(settings.get("current").replace("{current}",index+1).replace("{total}",total)).show(),$next[settings.get("loop")||index<total-1?"show":"hide"]().html(settings.get("next")),$prev[settings.get("loop")||index?"show":"hide"]().html(settings.get("previous")),slideshow(),settings.get("preloading")&&$.each([getIndex(-1),getIndex(1)],function(){var img,i=$related[this],settings=new Settings(i,$.data(i,colorbox)),src=settings.get("href");src&&isImage(settings,src)&&(src=retinaUrl(settings,src),img=document.createElement("img"),img.src=src)})):$groupControls.hide(),settings.get("iframe")?(iframe=settings.get("createIframe"),settings.get("scrolling")||(iframe.scrolling="no"),$(iframe).attr({src:settings.get("href"),"class":prefix+"Iframe"}).one("load",complete).appendTo($loaded),$events.one(event_purge,function(){iframe.src="//about:blank"}),settings.get("fastIframe")&&$(iframe).trigger("load")):complete(),"fade"===settings.get("transition")?$box.fadeTo(speed,1,removeFilter):removeFilter())},"fade"===settings.get("transition")?$box.fadeTo(speed,0,function(){publicMethod.position(0,callback)}):publicMethod.position(speed,callback)}},publicMethod.next=function(){!active&&$related[1]&&(settings.get("loop")||$related[index+1])&&(index=getIndex(1),launch($related[index]))},publicMethod.prev=function(){!active&&$related[1]&&(settings.get("loop")||index)&&(index=getIndex(-1),launch($related[index]))},publicMethod.close=function(){open&&!closing&&(closing=!0,open=!1,trigger(event_cleanup),settings.get("onCleanup"),$window.unbind("."+prefix),$overlay.fadeTo(settings.get("fadeOut")||0,0),$box.stop().fadeTo(settings.get("fadeOut")||0,0,function(){$box.hide(),$overlay.hide(),trigger(event_purge),$loaded.remove(),setTimeout(function(){closing=!1,trigger(event_closed),settings.get("onClosed")},1)}))},publicMethod.remove=function(){$box&&($box.stop(),$[colorbox].close(),$box.stop(!1,!0).remove(),$overlay.remove(),closing=!1,$box=null,$("."+boxElement).removeData(colorbox).removeClass(boxElement),$(document).unbind("click."+prefix).unbind("keydown."+prefix))},publicMethod.element=function(){return $(settings.el)},publicMethod.settings=defaults)}(jQuery,document,window),function($){"$:nomunge";var interval_id,last_hash,rm_callback,p_receiveMessage,cache_bust=1,window=this,FALSE=!1,postMessage="postMessage",addEventListener="addEventListener",has_postMessage=window[postMessage];$[postMessage]=function(message,target_url,target){target_url&&(message="string"==typeof message?message:$.param(message),target=target||parent,has_postMessage?target[postMessage](message,target_url.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):target_url&&(target.location=target_url.replace(/#.*$/,"")+"#"+ +new Date+cache_bust++ +"&"+message))},$.receiveMessage=p_receiveMessage=function(callback,source_origin,delay){has_postMessage?(callback&&(rm_callback&&p_receiveMessage(),rm_callback=function(e){return"string"==typeof source_origin&&e.origin!==source_origin||$.isFunction(source_origin)&&source_origin(e.origin)===FALSE?FALSE:void callback(e)}),window[addEventListener]?window[callback?addEventListener:"removeEventListener"]("message",rm_callback,FALSE):window[callback?"attachEvent":"detachEvent"]("onmessage",rm_callback)):(interval_id&&clearInterval(interval_id),interval_id=null,callback&&(delay="number"==typeof source_origin?source_origin:"number"==typeof delay?delay:100,interval_id=setInterval(function(){var hash=document.location.hash,re=/^#?\d+&/;hash!==last_hash&&re.test(hash)&&(last_hash=hash,callback({data:hash.replace(re,"")}))},delay)))}}(jQuery);var presByOriginalWidth;!function(jQuery,window,document,undefined){function unRewriteURL(uri){if("string"==typeof uri&&uri.indexOf("/_/")>-1){var parts=uri.split("/_/");if(parts.length>1){var uri=parts[0]+"?",params=parts[1],values=params.split("/"),amp="";if(values.length%2==1&&values.pop(),values.length>0)for(i=0;i<values.length-1;i+=2){var key=values[i],value=values[i+1];uri+=amp+key+"="+value,amp="&"}}}return uri}document.documentElement.className+=" js ",jQuery.ajaxSetup({data:{xhr:1},cache:!0}),jQuery.support.touch="ontouchstart"in window,jQuery.support.WebKitCSSMatrix="object"==typeof WebKitCSSMatrix,jQuery.support.WebKitAnimationEvent="object"==typeof WebKitTransitionEvent,window.newWin=function(url){var subWindow,sNewWin="newWin",options="width=800,height=525,resizable=yes,scrollbars=yes,location=yes,status=yes,toolbar=yes,menubar=yes,directories=yes",w=window;url.indexOf("http")<0&&(url="http://games.espn.com"+url),!subWindow||subWindow.closed?subWindow=w.open(url,sNewWin,options):(subWindow.focus(),subWindow=w.open(url,sNewWin,options))},window.initPresBy=function(){var $presby=jQuery("#sub-branding .presby, .mod-feature-header .presby"),$parent=$presby.parents("#sub-branding,.mod-feature-header");parentWidth=$parent.width(),parentHeight=$parent.height(),"undefined"==typeof presByOriginalWidth&&(presByOriginalWidth=$presby.width()),$parent.css({position:"relative"}),$presby.css({width:parentWidth+"px",height:parentHeight+"px",margin:"0px",overflow:"hidden",position:"absolute",right:"0px","text-align":"right"})},window.reducePresBy=function(){var $presby=jQuery("#sub-branding .presby, .mod-feature-header .presby");$presby.css({width:presByOriginalWidth+"px"})},window.rIF=function(ht){document.getElementById("spFrame").height=parseInt(ht)+40},window.gotosite=function(l){l&&(location.href=l)},String.prototype.namespace=function(separator){var i,len,ns=this.split(separator||"."),p=window;for(i=0,len=ns.length;i<len;i++)p=p[ns[i]]=p[ns[i]]||{}},String.prototype.repeat=function(n){return new Array(n+1).join(this)},String.prototype.escapeSingleQuotes=function(){return this.replace(/'/gim,"\\'")},String.prototype.escapeDoubleQuotes=function(){return this.replace(/"/gim,'\\"')},jQuery.getScriptCache=function(url,callback){jQuery.ajax({url:url,cache:!0,success:callback,type:"GET",dataType:"script"})},jQuery.parseUri=function(str){str=unRewriteURL(str);for(var o=jQuery.parseUri.options,m=o.parser[o.strictMode?"strict":"loose"].exec(str),uri={},i=14;i--;)uri[o.key[i]]=m[i]||"";return uri[o.q.name]={},uri[o.key[12]].replace(o.q.parser,function($0,$1,$2){$1&&(uri[o.q.name][$1]=$2)}),uri},jQuery.parseUri.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},debug.setLevel(0),(jQuery.parseUri(window.location).queryKey.debug||jQuery.parseUri(window.location).queryKey.development)&&debug.setLevel(5),jQuery.cookie=function(key,value,options){var regex,r,date,expires,settings=jQuery.extend({domain:/www.espn.com/i.test(window.location.hostname)?".www.espn.com":/espnfc.com/i.test(window.location.hostname)?".espnfc.com":window.location.hostname,path:"/",secure:"https:"===window.location.protocol,expires:null},options),path=null!==settings.path?"; path="+settings.path:"",domain=null!==settings.domain?"; domain="+settings.domain:"",secure=settings.path===!0?"; secure=":"";return"undefined"==typeof value?(regex=new RegExp("(^|;) ?"+key+"=([^;]+)(;|$)","g"),r=regex.exec(document.cookie),null!==r?decodeURIComponent(r[2]):null):(null===settings.expires||"number"!=typeof settings.expires&&!settings.expires.toUTCString||("number"==typeof settings.expires?(date=new Date,date.setTime(date.getTime()+24*settings.expires*60*60*1e3)):date=settings.expires,expires="; expires="+date.toUTCString()),document.cookie=[key,"=",encodeURIComponent(value),expires,path,domain,secure].join(""),document.cookie)},"espn.cookie".namespace(),espn.cookie={get:function(key){return jQuery.cookie(key)},set:function(key,value,days){jQuery.cookie(key,value,{expires:days})},del:function(key){jQuery.cookie(key,"",{expires:-1})}},window.getCookie=espn.cookie.get,window.setCookie=espn.cookie.set,window.deleteCookie=espn.cookie.del,"espn.refresh".namespace(),espn.refresh.stop=window.ESPN_refresh_stop=function(){"undefined"!=typeof ESPN_refresh&&clearTimeout(ESPN_refresh)},espn.refresh.start=window.ESPN_refresh_start=function(msec){ESPN_refresh=window.setTimeout(function(){window.location.href=window.location.href},msec||9e5)},"espn.sport".namespace(),function(){var sportIdCache=[];espn.sport.id=function(){var sportId="sportId";return sportIdCache[sportId]||(sportIdCache[sportId]=jQuery("body").metadata()[sportId]),sportIdCache[sportId]}}(),espn.sport.is=function(id){var sportId=espn.sport.id(),idType=typeof sportId;return"number"===idType||"string"===idType?+id===+sportId:jQuery.inArray(id,sportId)>-1},"espn.core".namespace(),espn.core.mobileApple=/iP(od|ad|hone)/i.test(navigator.userAgent),espn.core.ipod=/iPod/i.test(navigator.userAgent),espn.core.iphone=/iPhone/i.test(navigator.userAgent),espn.core.ipad=/iPad/i.test(navigator.userAgent),espn.core.android=/Android/i.test(navigator.userAgent),espn.core.googletv=/GoogleTV/i.test(navigator.userAgent),espn.core.palm=/webOS/i.test(navigator.userAgent),espn.core.blackberry=/BlackBerry/i.test(navigator.userAgent),espn.core.SWID=espn.cookie.get("SWID")||"",espn.core.loggedIn=/^\{[\w-]+\}/.test(espn.core.SWID),espn.core.cdnHTTPPath="http://a.espncdn.com/",espn.core.cdnHTTPSPath="https://secure.espncdn.com/",espn.core.secure=!("https:"!==document.location.protocol),espn.core.asset_path=espn.core.secure?espn.core.cdnHTTPSPath+"prod/":espn.core.cdnHTTPPath+"prod/",espn.core.combiner_path=espn.core.secure?espn.core.cdnHTTPSPath+"combiner/c/":espn.core.cdnHTTPPath+"combiner/c/",espn.core.jquery_ui_path=espn.core.asset_path+"scripts/ui/1.8.2/minified/",espn.core.benchmark=function(func,iterations,label){iterations+=1;for(var stop,start=+new Date;--iterations;)func.call(this);stop=+new Date,window.console&&window.console.log?window.console.log(label,stop-start):alert(label+" "+stop-start)},espn.core.type=function(obj){return Object.prototype.toString.call(obj).match(/^\[object (.*)\]$/i)[1]},espn.core.is=function(obj,type){return Object.prototype.toString.call(obj)==="[object "+type+"]"},function($){function ad_segments(){var o="",c=jQuery.cookie("CRBLM");if(c)for(var c=c.substring(9),index=0,value=0,count=0,key="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,n=c.length,nn=n-n%4;i<nn;){var enc1=key.indexOf(c.charAt(i++)),enc2=key.indexOf(c.charAt(i++));if(value|=(enc1<<2|enc2>>4)<<(index++?0:8),!(index-2)&&value&&(o+="seg="+value+";",20==++count))break;value*=(index%=6)&&index-2?1:0;var enc3=key.indexOf(c.charAt(i++));if(64!=enc3){if(value|=((15&enc2)<<4|enc3>>2)<<(index++?0:8),!(index-2)&&value&&(o+="seg="+value+";",20==++count))break;value*=(index%=6)&&index-2?1:0}var enc4=key.indexOf(c.charAt(i++));if(64!=enc4){if(value|=((3&enc3)<<6|enc4)<<(index++?0:8),!(index-2)&&value&&(o+="seg="+value+";",20==++count))break;value*=(index%=6)&&index-2?1:0}}return o}function initAccordion(el){findAccordions(el)}function findAccordions(el){var acc,a=el?$(el):$("div.mod-accordion").not(".ui-accordion"),ac="active",activate=function(e){$(e.target).parent().siblings("a.active").removeClass(ac).end().end().addClass(ac)},stylize=function(event,ui){ui.newHeader.addClass(ac),ui.newContent.addClass(ac),ui.oldHeader.removeClass(ac),ui.oldContent.removeClass(ac)},len=a.length;if(len){for(;len--;)acc=a.get(len),$("div.mod-sub-accordion",acc).accordion({header:"a.mod-sub-accordion-trigger",active:".active",autoHeight:!1,fillSpace:!1}).bind("accordionchange",function(event,ui){stylize(event,ui)}),$("a.mod-sub-accordion-trigger",acc).click(function(e){activate(e)});a.accordion({header:"a.mod-accordion-trigger",active:".active",autoHeight:!1,fillSpace:!1}).bind("accordionchange",function(event,ui){stylize(event,ui)}),$("a.mod-accordion-trigger").click(function(e){activate(e)})}}function initFlashSubHeader(section){window.Jiffy&&Jiffy.mark("initFlashSubheaderStart");var title,indexUrl,data,gh,suspendRender,useNonFlashHeader,cufon_load_only_once=!0;section.length&&(title=section.find("span").html(),indexUrl=section.attr("href"),data=section.metadata(),useNonFlashHeader=!!espn.core.mobileApple||!!espn.core.android||!!jQuery.parseUri(window.location).queryKey.useNonFlashHeader,useNonFlashHeader?window.Cufon||espn.core.init.nonFlashHeader?espn.core.init.nonFlashHeader(section,data):($.subscribe("espn.cufon.loaded",function(){espn.core.init.nonFlashHeader(section,data)}),cufon_load_only_once&&(cufon_load_only_once=!1,$("head").append('<link rel="stylesheet" href="'+espn.core.combiner_path+'27?css=modules/nonflash.css" type="text/css" media="screen" charset="utf-8" />'),$.getScriptCache(espn.core.combiner_path+"?js=cufon-yui.js,fonts/DejaVu_Sans_oblique_700.font.js,espn.nonflash.r3.js",function(){$.publish("espn.cufon.loaded")}))):(gh=new flashObj,gh.flashFile=data.src||"swf/globalHeader_redesign.swf",gh.flashVars="&title="+title+"&titlex="+(data.titlex||"")+"&titley="+(data.titley||"")+"&renderLogo="+(data.renderLogo||"")+"&indexUrl="+(indexUrl||"")+"&logo1url="+(data.logo1url||"")+"&clicktag="+(data.clicktag||"")+"&logo1Align="+(data.logo1Align||"")+"&logo2url="+(data.logo2url||"")+"&clicktag2="+(data.clicktag2||"")+"&logo2Align="+(data.logo2Align||"")+"&header="+(data.header||"")+"&headerPadding="+(data.headerPadding||"")+"&section="+(data.section||"")+"&sectionUrl="+(data.sectionUrl||"")+"&sectionPadding="+(data.sectionPadding||"")+"&gradientTopColor="+(data.gradientTopColor||"")+"&gradientBottomColor="+(data.gradientBottomColor||"")+(data.adTag||""),gh.width=data.width||"924",gh.height=data.height||"45",gh.scale=data.scale||"noScale",gh.salign=data.salign||"lt",gh.wmode=data.wmode||"opaque",gh.DenyIEdl=data.DenyIEdl||"true",gh.allowScriptAccess=data.allowScriptAccess||"Always",gh.allowNetworking=data.allowNetworking||"All",gh.FlashVer=data.FlashVer||7,gh.cabVersion=data.cabVersion||"7,0,19,0",gh.altTxt=section.html(),gh.ID=data.id||section.attr("id")?section.attr("id"):"section-title",suspendRender=function(gh,section){gh.compiled===!0&&gh.src?section.replaceWith(gh.src):setTimeout(function(){suspendRender(gh,section)},10)},gh.render!==window.____FLASH_RENDERER_____&&(gh.render=window.____FLASH_RENDERER_____),gh.render(),suspendRender(gh,section))),window.Jiffy&&Jiffy.measure("initFlashSubheaderDone","initFlashSubheaderStart")}function trackButtonClicks(e,type){if("function"==typeof anTrackLink){var lpos,target,mod,lid,bId,lposrx,lidrx;"carousel"===type?(lpos="carousel",target=$(e.target),mod=":topstory",bId="rightarrow","http://www.espn.com/"===window.location.href||"http://www.espn.com/index"===window.location.href?lpos="fp"+lpos:(bodyClass=b.attr("class").replace(/\{[^{]*\}|[\W_]/g,""),bodyClass.indexOf("espn360")>-1&&(bodyClass=bodyClass.replace("espn360","")),lpos=bodyClass+"index"+lpos),$("div.videoplayer-show","#top-stories").length>0&&(mod=":topvideos"),lpos+=mod,target.hasClass("jcarousel-prev")&&(bId="leftarrow"),lid=bId,anTrackLink(target,"espn",lpos,lid)):(lposrx=/\=([A-Za-z-\+]+)&/,lidrx=/\=([A-Za-z-\+]+)$/,lpos=lposrx.exec(e.name)||[],lid=lidrx.exec(e.name)||[],lpos.length>1&&lid.length>1&&anTrackLink(e,"espn",lpos[1],lid[1]+"+tab"))}}function initTabs(sel,tabSettings){var tabContainer=$(sel).parent().filter(function(){var $this=$(this);return!($this.parents("#scoreboard").length>0||$this.data("initialized")===!0)}),settings=$.extend({cache:!0,spinner:"",select:function(event,ui){var panel=$(ui.panel);debug.log("select",event,ui),trackButtonClicks(ui.tab,"tab"),$.publish("espn.tabs.select",[panel,ui])},load:function(event,ui){var panel=$(ui.panel);debug.log("load",event,ui),$.publish("espn.tabs.load",[panel,ui])},show:function(event,ui){debug.log("show",event,ui);var panel=$(ui.panel);$.publish("espn.tabs.show",[panel,ui])}},tabSettings);window.Jiffy&&Jiffy.mark("initTabsStart"),tabContainer.data("initialized",!0),tabContainer.tabs(settings),window.Jiffy&&Jiffy.measure("initTabsEnd","initTabsStart")}function init(){window.Jiffy&&Jiffy.mark("onDOMReady"),arguments.callee.done||(arguments.callee.done=!0,b=$("body"),$("form.js-goto").find("select").espnSelectRedirect(),$("#myespn").bind("mouseover",function(){$("select").each(function(){(this.size<1||typeof this.size===UNDEF)&&(this.blur(),this.size=0)})}),window.Jiffy&&Jiffy.measure("onDOMReady::Complete","onDOMReady"))}var b,bodyClass,initMyHeadlines,initMyFaves,tabControl,userABValue,userABCookie,debug=window.debug,UNDEF="undefined",SWID=("https:"===document.location.protocol?"https://secure.espncdn.com/prod/":"http://a.espncdn.com/prod/",""),loggedIn=!1;SWID=espn.core.SWID,loggedIn=espn.core.loggedIn,espn.core.ad_segments=ad_segments,userABCookie=$.cookie("userAB"),""!==SWID&&null===userABCookie&&(userABValue="}"===SWID.charAt(SWID.length-1)?SWID.charAt(SWID.length-2):SWID.charAt(SWID.length-1),$.cookie("userAB",userABValue,{domain:".www.espn.com",expires:7})),$.fn.espnSelectRedirect=function(){return this.each(function(){$(this).bind("change",function(){var option=$(this).find("option").get(this.selectedIndex),href=option.value,data=$(option).metadata();"#"!==href&&""!==href&&(typeof data.popup!==UNDEF?window.open(href,data.popup.name||"espnpop",data.popup.features||null):window.location.href=href)})})},"espn.core.track".namespace(),tabControl={videoPlayer:null,espn360Player:null,topStories:!1},"espn.core.init".namespace(),espn.core.init.tabs=initTabs,espn.core.init.carousel=function(parent){$.getScriptCache(espn.core.combiner_path+"?js=plugins/jquery.jcarousel.js,espn.carousel.r2.js",function(){espn.core.init.carousel(parent)})},espn.core.init.accordion=initAccordion,espn.core.init.flashHeader=initFlashSubHeader,$.espn={initTabs:initTabs,initMyFaves:initMyFaves,initAccordion:initAccordion,
initMyHeadlines:initMyHeadlines},$(function(){init()}),$(window).unload(function(){document.onkeypress=null})}(jQuery),jQuery.debug=debug.debug,jQuery.log=debug.log,jQuery.info=debug.info,jQuery.warn=debug.warn,jQuery.error=debug.error,jQuery.assert=debug.assert,jQuery.trace=debug.trace,jQuery.group=debug.group,jQuery.groupEnd=debug.groupEnd,jQuery.time=debug.time,jQuery.timeEnd=debug.timeEnd,jQuery.profile=debug.profile,jQuery.profileEnd=debug.profileEnd,jQuery.count=debug.count}(jQuery,window,document);var espn_ui=window.espn_ui||{};espn.subscribe=jQuery.subscribe,espn.publish=jQuery.publish,window.espn_util=window.espn_util||{},window.espn_util.find=function(obj,keys){if(keys)if(keys instanceof Array)for(var i=0;i<keys.length;i++){var key=keys[i];if(!obj)break;if(obj instanceof Array&&"number"==typeof key){var k=key;key<0&&(k=obj.length+key),obj=k>=0&&k<obj.length?obj[k]:null}else obj=obj[key]}else obj=obj[keys];else obj=null;return obj},function($,window,document,undefined){function ESPN_WindowNameStorage(){function __getKey(){var i=64,a=[],s=$.cookie("ESPN_WindowNameStorage")||"",charMap="0123456789abcdefghijklmnopqrstuvwxyz".split("");if(""!==s)return s;for(;i--;){var c=charMap[~~(Math.random()*charMap.length)];a.push(~~(2*Math.random())?c.toUpperCase():c)}return s=a.join(""),$.cookie("ESPN_WindowNameStorage",s,{domain:".espn.go.com"}),s}this.SWID=espn.core.SWID||__getKey(),this._storedData=function(){var data={};try{data=window.name.length?TEAdecrypt(window.name,this.SWID):"",data.length&&(data=JSON.parse(data),data="object"==typeof data?data:{})}catch(e){}return data}}function ESPN_SessionStorage(){}function ESPN_LocalStorage(){}ESPN_WindowNameStorage.prototype={getItem:function(key){var data=this._storedData();return data[key]||null},setItem:function(key,val){var data=this._storedData();data[key]=val,window.name=TEAencrypt(JSON.stringify(data),this.SWID)},removeItem:function(key){var data=this._storedData();try{delete data[key]}catch(e){}window.name=TEAencrypt(JSON.stringify(data),this.SWID)}},ESPN_SessionStorage.prototype={getItem:function(key){var val=null;try{val=window.sessionStorage[key].value?window.sessionStorage[key].value:window.sessionStorage[key],val=JSON.parse(val)}catch(e){}return val},setItem:function(key,val){window.sessionStorage[key]=JSON.stringify(val)},removeItem:function(key){window.sessionStorage.removeItem(key)}};var proto={setItem:function(){},getItem:function(){},removeItem:function(){}};try{Modernizr.localstorage&&(proto={getItem:function(k){var val=null;try{val=window.localStorage[k]||null,val&&(val=JSON.parse(val))}catch(e){}return val},setItem:function(k,v){try{window.localStorage[k]=JSON.stringify(v)}catch(e){}},removeItem:function(k){try{window.localStorage.removeItem(k)}catch(e){}}})}catch(e){}ESPN_LocalStorage.prototype=proto,"espn.storage".namespace(),function(){var useSessionStorage=function(){try{return"sessionStorage"in window&&null!==window.sessionStorage&&((window.sessionStorage.__testSetter=1)||!0)}catch(e){return!1}}();$&&$.support&&($.support.sessionStorage=useSessionStorage);var store=useSessionStorage?new ESPN_SessionStorage:new ESPN_WindowNameStorage,permStore=new ESPN_LocalStorage;espn.storageFactory={getTransient:function(){return store},getMostPermanent:function(){return Modernizr.localstorage?permStore:store}},espn.storage={getItem:function(key){return store.getItem(key)},getPermItem:function(key){return permStore.getItem(key)},setItem:function(key,val){return store.setItem(key,val)},setPermItem:function(key,val){return permStore.setItem(key,val)},removeItem:function(key){return store.removeItem(key)},removePermItem:function(key){return permStore.removeItem(key)}},jQuery.publish("espn.storage_initialized")}()}(this.jQuery,this,this.document),function(root,factory){"function"==typeof define&&define.amd?define(["jquery","underscore"],function($,_){return root.espn.fanapi=factory($,_)}):"object"==typeof module&&module.exports?module.exports=factory(require("jquery"),require("underscore")):root.espn.fanapi=factory(root.jQuery,root._)}(this,function($,_){function getCoreFanAPIHost(){var host="qa"===$.cookie("FAN_API_ENV")?"fan.core.api.qa.":"fan.core.api.";switch(getEditionContext()){case"uk":return host+"espn.co.uk";case"india":return host+"espn.in";case"australia":return host+"espn.com.au";case"argentina":return host+"espn.com.ar";case"chile":return host+"espn.cl";case"columbia":return host+"espn.com.co";case"mexico":return host+"espn.com.mx";case"venezuela":return host+"espn.com.ve";default:return host+rootDomain}}function getProductFanAPIHost(){return"qa"===$.cookie("FAN_API_ENV")?"fan.api.qa."+rootDomain:"fan.api."+rootDomain}function getStore(cacheKey){return cacheKey===KEYS_CACHE_KEY?espn.storageFactory.getMostPermanent():cacheKey.toString().match(/displayEvents=true/)?espn.storageFactory.getTransient():espn.storageFactory.getMostPermanent()}function getStorageItem(cacheKey){return getStore(cacheKey).getItem(cacheKey)}function setStorageItem(cacheKey,item){return getStore(cacheKey).setItem(cacheKey,item)}function removeStorageItem(cacheKey){return getStore(cacheKey).removeItem(cacheKey)}function handleSuccess(callback,scopeObj,data,jqXHR){callback&&callback.success&&callback.success.apply(scopeObj,[data,jqXHR])}function handleError(callback,scopeObj,jqXHR){callback&&callback.error&&callback.error.call(scopeObj,jqXHR)}function cacheItem(cacheKey,item){setStorageItem(cacheKey,{item:item,expiresAt:(new Date).getTime()+6e5});var allCacheKeys=getStorageItem(KEYS_CACHE_KEY)||[];allCacheKeys.push(cacheKey),setStorageItem(KEYS_CACHE_KEY,_.uniq(allCacheKeys))}function stripContent(data){return data=$.extend(!0,{},data),data&&_.each([data.preferences,data.recommendations],function(collection){_.isArray(collection)&&_.each(collection,function(preference){if(preference){var metadata=preference.metaData;metadata&&(delete metadata.events,delete metadata.nowFeed,metadata.entry&&(delete metadata.entry.scoreboardFeedURL,delete metadata.entry.points))}})}),data}function filterFetchResponse(fanData){var rejectedTeams=espn.storage.getPermItem("favTeamReject");if(_.isArray(fanData&&fanData.recommendations)&&_.isArray(rejectedTeams))for(var i=fanData.recommendations.length-1;i>=0;i--){var recommendation=fanData.recommendations[i];if(recommendation&&recommendation.type&&2===recommendation.type.id){for(var rejectedTeamFound=!1,j=0;j<rejectedTeams.length;j++){var rejectedTeam=rejectedTeams[j];if((rejectedTeam.sportId&&rejectedTeam.sportId.toString())===recommendation.metaData.sportId.toString()&&(rejectedTeam.teamId&&rejectedTeam.teamId.toString())===recommendation.metaData.teamId.toString()){rejectedTeamFound=!0;break}}rejectedTeamFound&&fanData.recommendations.splice(i,1)}}return fanData}function getEditionContext(){var contexts={"espnuk-en":"uk","espnin-en":"india","espnau-en":"australia","espn-es-us":"deportes","espn-es-ar":"argentina","espn-es-cl":"chile","espn-es-co":"columbia","espn-es-mx":"mexico","espn-es-ve":"venezuela"};return contexts[window.espn_util.find(espn,["i18n","editionKey"])]}function getPersonalizationSource(){var sport=espn.sports.getSport(),editionContext=getEditionContext();return"fantasy"===sport?"espncom-fantasy":editionContext?"espncom-"+editionContext:"ESPN.com - FAM"}function executeCreateFanRequest(callback){if(!espn.core.loggedIn)return void handleError(callback,this,{status:401,statusText:"Unauthorized",statusCode:function(){return 401}});if(espn.i18n&&!espn.i18n.personalization)return void handleError(callback,this,{status:403,statusText:"Forbidden",statusCode:function(){return 403}});var fanData={id:espn.core.SWID,profile:{settings:{videoAutoStart:{value:"1"}},useSortGlobal:!1}},createFan=function(data,callback){$.ajax("http://"+getCoreFanAPIHost()+"/apis/v2/fans/"+encodeURIComponent(espn.core.SWID),{type:"POST",data:JSON.stringify(data),contentType:"application/json",cache:!1,xhrFields:{withCredentials:!0},beforeSend:function(jqXHR){jqXHR.setRequestHeader("X-Personalization-Source",getPersonalizationSource())}}).done(function(createFanData,textStatus,jqXHR){handleSuccess(callback,this,createFanData,jqXHR)}).fail(function(jqXHR){handleError(callback,this,jqXHR)})};$.when(espn.geo.getLocation()).done(function(locationData){locationData&&locationData.postCode?(fanData.profile.postalCode=locationData.postCode,createFan(fanData,callback)):createFan(fanData,callback)}).fail(function(){createFan(fanData,callback)})}function executeRequest(type,endpoint,data,callback,force){if(force||!isExecutingRequest){if(!espn.core.loggedIn)return handleError(callback,this,{status:401,statusText:"Unauthorized",statusCode:function(){return 401}}),void(requestQueue=[]);if(espn.i18n&&!espn.i18n.personalization)return handleError(callback,this,{status:403,statusText:"Forbidden",statusCode:function(){return 403}}),void(requestQueue=[]);isExecutingRequest=!0;var ajaxOptions={};navigator.userAgent.match(/MSIE 9\.0/)?ajaxOptions={url:"/core/api/v0/favorites/proxyFanAPIRequest",type:"POST",data:{espn_s2:$.cookie("espn_s2"),SWID:espn.core.SWID,endpoint:endpoint,type:type,data:data,personalizationSource:getPersonalizationSource()},dataType:"html",cache:!1,_noCdn:!0}:(ajaxOptions={url:"http://"+getCoreFanAPIHost()+"/apis/v2/fans/"+encodeURIComponent(espn.core.SWID)+endpoint,type:type,data:data,dataType:"html",xhrFields:{withCredentials:!0},cache:!1,beforeSend:function(jqXHR){jqXHR.setRequestHeader("X-Personalization-Source",getPersonalizationSource())}},"string"==typeof data&&data.match(/^[{[].*[\]}]$/)&&(ajaxOptions.contentType="application/json")),$.ajax(ajaxOptions).done(function(data,textStatus,jqXHR){espn.fanapi.emptyCache(),handleSuccess(callback,this,data,jqXHR),"function"==typeof window.postMessage&&window!==window.parent&&$.postMessage("fanapi_change","*",window.parent)}).fail(function(jqXHR){404===jqXHR.status?executeCreateFanRequest({success:function(){executeRequest(type,endpoint,data,callback,force)},error:function(jqXHR){handleError(callback,this,jqXHR)}}):handleError(callback,this,jqXHR)}).always(function(){if(requestQueue.length){var params=requestQueue.shift();executeRequest(params[0],params[1],params[2],params[3],!0)}else isExecutingRequest=!1,$.publish("fanapi_request_queue_cleared")})}else requestQueue.push([type,endpoint,data,callback])}function executeFetch(data,cacheKey){function getAJAXOptions(){var editionContext=getEditionContext(),ajaxURL="http://"+getProductFanAPIHost()+"/apis/v2/";ajaxURL+=_.has(data,"SWID")?"cached/fans/"+encodeURIComponent(data.SWID):"fans/"+encodeURIComponent(espn.core.SWID);var ajaxData=_.extend({},data,{source:getPersonalizationSource()});editionContext&&_.extend(ajaxData,{context:editionContext,lang:window.espn_util.find(espn,["i18n","lang"])});var ajaxOptions={url:ajaxURL,data:ajaxData,dataType:"json"};return ajaxURL.match(/cached/)||_.extend(ajaxOptions,{xhrFields:{withCredentials:!0}}),ajaxOptions}var getDeferredObject=getDeferredObjects[cacheKey];if(getDeferredObject){if(!espn.core.loggedIn&&!data.hasOwnProperty("SWID"))return void getDeferredObject.reject({status:401,statusText:"Unauthorized",statusCode:function(){return 401}});if(espn.i18n&&!espn.i18n.personalization)return void getDeferredObject.reject({status:403,statusText:"Forbidden",statusCode:function(){return 403}});$.ajax(getAJAXOptions()).done(function(data,textStatus,jqXHR){cacheItem(cacheKey,data),getDeferredObject.resolve(filterFetchResponse(data),jqXHR),espn.storage.setPermItem(BASE_CACHE_KEY+"_lastGoodFavorites",stripContent(data))}).fail(function(jqXHR){var savedFavorites=espn.storage.getPermItem(BASE_CACHE_KEY+"_lastGoodFavorites");savedFavorites?getDeferredObject.resolve(filterFetchResponse(savedFavorites),jqXHR):getDeferredObject.reject(jqXHR)})}}var BASE_CACHE_KEY="fanapi_fan",KEYS_CACHE_KEY=BASE_CACHE_KEY+"_keys",requestQueue=[],isExecutingRequest=!1,getDeferredObjects={},pageHost=window.location.hostname,rootDomain="espn.com";return/espn\.com$/.test(pageHost)?rootDomain="espn.com":/espnqa\.com$/.test(pageHost)&&(rootDomain="espnqa.com"),$.subscribe("favorite-game:update",function(updatedEvent){var allCacheKeys=getStorageItem(KEYS_CACHE_KEY)||[];_.each(_.filter(allCacheKeys,function(key){return key.toString().match(/displayEvents=true/)}),function(key){var flag=!1,cache=getStorageItem(key);if(cache&&cache.item){var preferences=cache.item.preferences||[];_.each(preferences,function(preference){if(preference.metaData&&_.isArray(preference.metaData.events))for(var events=preference.metaData.events,eventIndex=0;eventIndex<events.length;eventIndex++){var event=events[eventIndex];if(event.id.toString()===updatedEvent.id.toString()){events[eventIndex]=$.extend(updatedEvent,{league:event.league}),flag=!0;break}}}),flag&&(setStorageItem(key,{item:cache.item,expiresAt:cache.expiresAt}),getDeferredObjects[key]=null)}})}),{get:function(optionsSetOrOptions){var options={};optionsSetOrOptions&&"object"==typeof optionsSetOrOptions&&(options=optionsSetOrOptions),_.isEmpty(options)&&("/preferences/favorites_management"===window.location.pathname?optionsSetOrOptions="fam":$("body").hasClass("index")&&"index"===$("body").data("pagetype")&&(optionsSetOrOptions="index"),"string"==typeof optionsSetOrOptions&&(options=espn.fanapi.getOptions(optionsSetOrOptions)));var cacheKey=null;if(_.isEmpty(options)){var allCacheKeys=getStorageItem(KEYS_CACHE_KEY);_.isArray(allCacheKeys)&&$.each(allCacheKeys,function(){if("string"==typeof this&&!this.match(/displayHiddenPrefs/))return cacheKey=this,!1})}null===cacheKey&&(cacheKey=espn.fanapi.buildCacheKey(options));var cache=getStorageItem(cacheKey),getDeferredObject=getDeferredObjects[cacheKey];if(cache){if(cache.expiresAt>(new Date).getTime())return getDeferredObject||(getDeferredObject=new $.Deferred,getDeferredObjects[cacheKey]=getDeferredObject),getDeferredObject.resolve(filterFetchResponse(cache.item)),getDeferredObject.promise();removeStorageItem(cacheKey),getDeferredObject=getDeferredObjects[cacheKey]=null}return getDeferredObject&&"rejected"!==getDeferredObject.state()||(getDeferredObject=new $.Deferred,getDeferredObjects[cacheKey]=getDeferredObject,isExecutingRequest?$.subscribe("fanapi_request_queue_cleared",function onRequestQueueCleared(){executeFetch(options,cacheKey),window.setTimeout(function(fxn){return function(){$.unsubscribe(["fanapi_request_queue_cleared",fxn])}}(onRequestQueueCleared),0)}):executeFetch(options,cacheKey)),getDeferredObject.promise()},getAsP13n:function(optionsSetOrOptions){if(window.espn_ui.webview!==!0){var deferred=new $.Deferred;return $.when(espn.fanapi.get(optionsSetOrOptions)).done(function(data,jqXHR){var p13nData={myPreferences:data&&data.preferences,myFantasy:{entries:{favorites:[]}},myPlayers:[],mySettings:{},mySports:[],myTeams:[]},tmpSports=[];if(data&&data.profile&&$.extend(p13nData.mySettings,{hasNotificationPreferences:data.profile.hasNotificationPreferences,videoAutoStart:data.profile.settings&&data.profile.settings.videoAutoStart&&data.profile.settings.videoAutoStart.value}),data&&_.isArray(data.preferences)){var DRAFT_STATUS_DESCRIPTIONS={0:"PrePreDraft",1:"Undrafted",2:"Drafted",3:"InProgress",4:"Paused"},DRAFT_TYPE_DESCRIPTIONS={0:"Offline",1:"Snake",2:"Autopick",3:"Snail",4:"Auction"};_.each(data.preferences,function(preference){if("object"==typeof preference){var typeId=+preference.typeId||preference.type&&+preference.type.id;switch(typeId){case 1:var sport=preference.metaData&&preference.metaData.sport;sport&&tmpSports.push([preference.sortGlobal,{id:+sport.id||+preference.metaData.sportId,text:sport.abbreviation,sportAbbrev:sport.abbreviation,sportName:sport.name,fanAffinity:0}]);break;case 2:var team=preference.metaData&&preference.metaData.team;team&&p13nData.myTeams.push({sport:+preference.metaData.sportId,id:+preference.metaData.teamId,isFav:!0,text:team.text,sportAbbrev:team.sportAbbreviation,sportName:team.sportName,fanAffinity:0});break;case 3:var player=preference.metaData&&preference.metaData.player;player&&p13nData.myPlayers.push({sport:+preference.metaData.sportId,id:+preference.metaData.playerId,text:player.text,isFav:!0});break;case 9:var entry=preference.metaData&&preference.metaData.entry;if(entry){var favorite=_.find(p13nData.myFantasy.entries.favorites,function(obj){return obj.id===entry.seasonId});favorite||(favorite={id:entry.seasonId,sports:[]},p13nData.myFantasy.entries.favorites.push(favorite));var entryGroups=[],entryRecord="";if(_.isArray(entry.groups)&&entry.groups.length){var entryGroup=entry.groups[0];entryGroups.push({activationDate:new Date(entryGroup.activationDate||0).toISOString(),draftDate:new Date(entryGroup.draftDate||0).toISOString(),draftStatus:DRAFT_STATUS_DESCRIPTIONS[entryGroup.draftStatus]||entryGroup.draftStatus,draftType:DRAFT_TYPE_DESCRIPTIONS[entryGroup.draftType]||entryGroup.draftType,drafting:3===entryGroup.draftStatus||4===entryGroup.draftStatus,fantasyCastHref:entryGroup.fantasyCastHref,groupManager:entryGroup.groupManager,groupRank:entryGroup.rank,groupSize:entryGroup.groupSize,href:entryGroup.href,id:entryGroup.groupId,losses:entryGroup.losses,name:entryGroup.groupName,rankFormatted:entryGroup.rank+"/"+entryGroup.groupSize,ties:entryGroup.ties,wins:entryGroup.wins}),entryRecord=entryGroup.rank+"-"+entryGroup.groupSize}favorite.sports.push({organizations:[{games:[{abbrev:entry.abbrev,entries:[{archived:entry.archived,entryLocation:entry.entryLocation,entryURL:entry.entryURL,groups:entryGroups,id:[entry.entryId,entry.gameId,entryGroups[0]&&entryGroups[0].id||0,entry.seasonId].join(":"),logoId:entry.logoId,logoType:entry.logoType,logoURL:entry.logoUrl,name:entry.entryNickname,points:entry.points,priority:entry.priority,rank:entry.rank,record:entryRecord,scoresFeedURL:entry.scoreboardFeedURL,visible:entry.visible}],href:entry.href,id:entry.gameId,logoURL:entry.logoURL,name:entry.name,signupURL:entry.signupURL}]}]})}}}}),tmpSports.length&&(p13nData.mySports=_.map(_.sortBy(tmpSports,function(arr){return parseInt(arr[0],10)}),function(arr){return arr[1]}))}deferred.resolve(p13nData,jqXHR)}).fail(function(jqXHR){deferred.reject(jqXHR)}),deferred.promise()}},getRecommendations:function(options){options=$.extend({},options);var deferred=new $.Deferred,editionKey=window.espn_util.find(espn,["i18n","editionKey"]),executeRecommendationsFetch=function(deferred,options){function getAJAXOptions(options){var ajaxOptions={},editionContext=getEditionContext();return"espn-en"===editionKey&&options.postalCode?_.extend(ajaxOptions,{url:"http://"+getProductFanAPIHost()+"/apis/v2/recommendations/postalCode/"+options.postalCode}):editionContext&&_.extend(ajaxOptions,{url:"http://"+getProductFanAPIHost()+"/apis/v2/recommendations/context/"+editionContext,data:{lang:window.espn_util.find(espn,["i18n","lang"])}}),_.extend(ajaxOptions,{data:_.extend(ajaxOptions.data||{},{limit:5,source:getPersonalizationSource()},_.omit(options,["postalCode"])),cache:!0})}var ajaxOptions=getAJAXOptions(options);if(!window.espn_util.find(espn,["i18n","personalization"])||!ajaxOptions.url)return void deferred.reject({status:403,statusText:"Forbidden",statusCode:function(){return 403}});var cacheKey=espn.fanapi.buildCacheKey(_.extend({},options,{edition:editionKey})),cache=getStorageItem(cacheKey);return cache&&cache.item?void deferred.resolve(filterFetchResponse(cache.item)):void $.ajax(ajaxOptions).done(function(data,textStatus,jqXHR){cacheItem(cacheKey,data),deferred.resolve(filterFetchResponse(data),jqXHR)}).fail(function(jqXHR){deferred.reject(jqXHR)})};return"espn-en"===editionKey?options.postalCode?executeRecommendationsFetch(deferred,options):$.when(espn.geo.getLocation()).done(function(locationData){"usa"===window.espn_util.find(locationData,["country","isoCode"])&&locationData.postCode?executeRecommendationsFetch(deferred,_.extend({},options,{postalCode:locationData.postCode})):deferred.reject()}).fail(function(){deferred.reject()}):executeRecommendationsFetch(deferred,options),deferred.promise()},buildCacheKey:function(options){if(options&&!_.isEmpty(options)){var optionsArr=[];for(var key in options)options.hasOwnProperty(key)&&optionsArr.push([key,options[key]]);return optionsArr=_.sortBy(optionsArr,function(pair){return pair[0].toString().toLowerCase()}),BASE_CACHE_KEY+"_"+($.cookie("FAN_API_ENV")||"prod")+"_"+_.map(optionsArr,function(pair){return pair[0]+"="+pair[1]}).join("&")}return BASE_CACHE_KEY},getOptions:function(optionsSetOrOptions){var options={};if("string"==typeof optionsSetOrOptions)switch(optionsSetOrOptions.toLowerCase()){case"fam":options={displayHiddenPrefs:!0,displayRecs:!0,recLimit:5,userId:espn.core.SWID};break;case"index":options={displayEvents:!0,displayNow:!0,displayRecs:!0,recLimit:5,userId:espn.core.SWID}}var context=espn.sports.getLeagueBySportAbbrev(espn.sports.getSport()),swidsToSection={boston:"{F1C637A0-6339-4679-BA6A-A2CBD3BB0BC0}",chicago:"{4AD05FA3-60AA-4761-8FFF-E12EAB7BF9CF}",cleveland:"{3D2C9385-0687-4A2D-844F-37C4188253C0}",dallas:"{4DAD5844-8769-4440-93B1-722ED0161B2F}","los-angeles":"{49C48C4C-044F-4F08-8B86-670ED28674F0}",losangeles:"{49C48C4C-044F-4F08-8B86-670ED28674F0}",milwaukee:"{D2D1F2FC-1A82-4618-8D07-3480737E95D7}","new-york":"{CF2FAA7B-4923-4077-89BF-524C6A8859CB}",newyork:"{CF2FAA7B-4923-4077-89BF-524C6A8859CB}"};return context.match(/nfl|nba|mlb|nhl|college-football|mens-college-basketball|womens-college-basketball|fantasy|flb|ffl|fba|fhl/)?options=$.extend(options,{context:context}):swidsToSection.hasOwnProperty(context)&&(options=$.extend(options,{SWID:swidsToSection[context]})),options},createPreference:function(data,callback){if(data&&data.preferenceTypeId){var entityIdKey=null;switch(data.entityTypeId&&data.entityTypeId.toString()||data.preferenceTypeId.toString()){case"1":entityIdKey="sportId";break;case"2":entityIdKey="teamId"}var metadata=null;if(null!=entityIdKey&&null!=data.entityId&&(metadata={},metadata[entityIdKey]=data.entityId.toString()),null!=metadata){data.sportId&&(metadata.sportId=data.sportId.toString()),data.entityTypeId&&(metadata.typeId=data.entityTypeId),"11"===data.preferenceTypeId.toString()&&(metadata.action="reject");var stringData=JSON.stringify({typeId:data.preferenceTypeId.toString(),metaData:metadata});executeRequest("PUT","/preferences",stringData,{success:function(data,jqXHR){var match=null,preferenceId=null,location=jqXHR.getResponseHeader("Location");"string"==typeof location&&(match=location.match(/\/preferences\/([0-9A-Za-z-]+)/))&&(preferenceId=match[1]),callback&&"function"==typeof callback.success&&callback.success({preference_id:preferenceId})},error:callback&&callback.error})}}},updatePreference:function(data,callback){if(data&&data.preferenceId){var stringData=JSON.stringify(_.pick(data,"isHidden","sortGlobal"));executeRequest("POST","/preferences/"+data.preferenceId,stringData,callback)}},deletePreference:function(data,callback){data&&data.preferenceId&&executeRequest("DELETE","/preferences/"+data.preferenceId,"",callback)},updateProfile:function(data,callback){if(data){var stringData=JSON.stringify(_.pick(data,"settings","useSortGlobal"));executeRequest("POST","/profile/",stringData,callback)}},rejectRecommendation:function(data,callback){var createData={preferenceTypeId:11,sportId:data.sportId};data.teamId&&$.extend(createData,{entityId:data.teamId,entityTypeId:2}),this.createPreference(createData,{success:callback&&callback.success,error:callback&&callback.error})},emptyCache:function(){var allCacheKeys=getStorageItem(KEYS_CACHE_KEY)||[];_.each(allCacheKeys,function(key){espn.storage.removePermItem(key),espn.storage.removeItem(key)}),removeStorageItem(KEYS_CACHE_KEY),_.each(getDeferredObjects,function(deferred,key){deferred&&"pending"===deferred.state()||delete getDeferredObjects[key]}),espn.p13nEvents&&espn.p13nEvents.deferreds&&_.each(espn.p13nEvents.deferreds,function(deferred,key){deferred&&"pending"===deferred.state()||delete espn.p13nEvents.deferreds[key]});for(var i=0;i<window.sessionStorage.length;i++){var key=window.sessionStorage.key(i);key.match(BASE_CACHE_KEY)&&(window.sessionStorage.removeItem(key),espn.storage.removeItem(key))}espn.storage.removePermItem(BASE_CACHE_KEY+"_lastGoodFavorites")}}}),function($,window){function launchOverlay(elem,options){$.colorbox($.extend(options,{scrolling:!1,iframe:!0,opacity:"0.7",onOpen:function(){void 0!==options.css&&($("#colorbox").removeClass().addClass(options.css),$("body").addClass("inactive scroll-locked"))},onClosed:function(){$("#colorbox").removeClass(),$("body").removeClass("inactive scroll-locked")},onCleanup:function(){$("#colorbox iframe").attr("src","about:blank")},onLoad:function(){$("iframe.cboxIframe").first().focus()}})),$("#colorbox").attr("tabIndex","")}espn.hasOwnProperty("login_refresh")||(espn.login_refresh=!0),$(".mod-didyouknow .dykText a.dykLogic, .mod-didyouknow .dykText a.dykRedirect").on("click",function(evt){var finalHref=this.href;launchOverlay(this,{css:"dyk_overlay",href:finalHref,innerHeight:580,innerWidth:769}),evt.preventDefault()}),$("body.search a.launchVideoOverlay, body.search a.launchSearchGallery").on("click",function(evt){var finalHref=this.href;$(this).is(".launchVideoOverlay")?launchOverlay(this,{css:"media_overlay video_overlay",href:finalHref,innerHeight:579,innerWidth:959,slideshow:!0,loadPosition:"loadTop"}):$(this).is(".launchSearchGallery")&&launchOverlay(this,{css:"media_overlay photo_overlay",href:finalHref,innerHeight:614,innerWidth:964,slideshow:!0,loadPosition:"loadTop"}),evt.preventDefault()}),$(".launchHOF").on("click",function(evt){espn.video.pause();var tHref=this.href.split("?"),finalHref="http://espn.go.com/stations/sc?"+tHref[1]+"&type=hof",h="605",w="985";launchOverlay(this,{css:"sc_overlay",href:finalHref,open:!0,height:h,width:w,slideshow:!1,loadPosition:"loadTop"}),evt.preventDefault()}),$(".launchSC").on("click",function(evt){espn.video.pause();var tHref=this.href.split("?"),finalHref="http://espn.go.com/stations/sc?"+tHref[1],h="605",w="985";launchOverlay(this,{css:"sc_overlay",href:finalHref,open:!0,height:h,width:w,slideshow:!1,loadPosition:"loadTop"}),evt.preventDefault()}),$(".launchX").on("click",function(evt){espn.video.pause();var tHref=this.href.split("?"),finalHref="http://espn.go.com/action/video/ov?"+tHref[1],h="605",w="985";launchOverlay(this,{css:"sc_overlay",href:finalHref,open:!0,height:h,width:w,slideshow:!1,loadPosition:"loadTop"}),evt.preventDefault()}),$("a.enlarge").on("click",function(e){e.preventDefault();var eurl=$(this).attr("href"),credit=$(this).attr("credit");return $.fn.colorbox({opacity:"0.7",href:eurl,photo:!0,title:credit}),!1}),$(".launchGallery, .launchZoom").on("click",function(evt){var finalHref=this.href,h="744",w="964";(finalHref.match(/(espndeportes|soccernet)\.espn\.go\.com/i)||finalHref.match(/espnfc\.com/i))&&(finalHref.indexOf("http://espn.go.com")>=0&&(finalHref=finalHref.replace("http://espn.go.com","")),$(this).is(".launchZoom")?(top.window.moveTo(0,0),document.all?top.window.resizeTo(screen.availWidth,screen.availHeight):(document.layers||document.getElementById)&&(top.window.outerHeight<screen.availHeight||top.window.outerWidth<screen.availWidth)&&(top.window.outerHeight=top.screen.availHeight,top.window.outerWidth=top.screen.availWidth),h="100%",w="100%",finalHref.indexOf("overlay")<0&&(finalHref=finalHref.replace("/photos/gallery/","/photos/gallery/overlay/zoom/"))):finalHref.indexOf("overlay")<0&&(finalHref=finalHref.replace("/photos/gallery/","/photos/gallery/overlay/overlay/")),launchOverlay(this,{css:"media_overlay",href:finalHref,open:!0,innerHeight:h,innerWidth:w,slideshow:!0,loadPosition:"loadTop"}),evt.preventDefault())}),$(document).on("click",".cbOverlay",function(evt){var trigger=$(this),loggedIn=espn.core.loggedIn,validOriginRegEx=/(espn|disney|go.com)/i;$.receiveMessage(function(e){var origin=e.origin||"espn";if(origin.search(validOriginRegEx)!==-1&&e.data.indexOf("_FB_")<0){var h=parseInt(e.data.replace(/.*height=(\d+)(?:&|$)/,"$1"),10),w=parseInt(e.data.replace(/.*width=(\d+)(?:&|$)/,"$1"),10);"close=true"===e.data?$.colorbox.close():(w>0||h>0)&&(w+=40,h+=40,w>0?$.colorbox.resize({height:h+27,width:w}):$.colorbox.resize({height:h+27}))}}),$(document).bind("cbox_complete",function(){espn.core.android||$("iframe").first().focus()}),$(document).bind("cbox_cleanup",function(){var isLoggedIn=/^\{[\w-]+\}/.test(espn.cookie.get("SWID"));window.location.href.indexOf("insider.espn.go.com")!=-1&&window.location.href.indexOf("&action=")!=-1&&isLoggedIn?window.location=window.location.href.substring(0,window.location.href.indexOf("&action=")):!loggedIn&&isLoggedIn?window.location.reload():finalHref.indexOf("login?")!=-1&&isLoggedIn?window.location.reload():finalHref.indexOf("register?")!=-1&&isLoggedIn?window.location.reload():finalHref.indexOf("personalization?")!=-1&&isLoggedIn?(espn.storage.removeItem("p13n"),window.location.reload()):finalHref.indexOf("insiderOverlay?")!=-1&&isLoggedIn?window.location.reload():finalHref.indexOf("purchase?")!=-1&&isLoggedIn?window.location.reload():finalHref.indexOf("thankyou?")!=-1&&isLoggedIn&&window.location.reload()});var params,height=!1,width=!1,parentLocation=window.location.href,parentHost=window.location.hostname+"",pageLocation=trigger.attr("tref"),urlPrefix="https://",URL="r.espn.go.com",css="registration_overlay";(parentHost.indexOf("espn-qa.")>-1||parentHost.indexOf("games.qa.")>-1)&&(URL="rqa.espn.go.com");var settings={regFormId:trigger.attr("data-regFormid")||"espn",language:trigger.attr("data-language")||"en",affiliateName:trigger.attr("data-affiliateName")||"espn",href:trigger.attr("tref")||"/members/v3_1/login",tab:trigger.attr("tab")||"teams",forwardUrl:"",appRedirect:encodeURIComponent(trigger.attr("data-appRedirect")||window.location.href)};if("/"==pageLocation.charAt(0)&&(pageLocation=urlPrefix+URL+pageLocation),trigger.attr("data-options")){var jsonObj=$.parseJSON(trigger.attr("data-options"));jsonObj.parentLocation=parentLocation;for(var key in jsonObj)jsonObj.hasOwnProperty(key)&&("width"==key?(width=jsonObj[key],delete jsonObj.width):"height"==key?(height=jsonObj[key],delete jsonObj.height):"css"==key&&(css=jsonObj[key],delete jsonObj.css));params="?"+$.param(jsonObj),pageLocation.indexOf("/personalization/v3_1/personalization")>=0&&(pageLocation="http://espn.go.com/personalization/v3_1/personalization")}else{if(parentLocation=encodeURIComponent(parentLocation),"undefined"!=typeof trigger.attr("data-forwardUrl")&&trigger.attr("data-forwardUrl")!==!1&&(settings.forwardUrl=encodeURIComponent(trigger.attr("data-forwardUrl"))),window.location.href.indexOf("/insider/")>-1){var refreshString="&refresh=true";window.location.href.indexOf("?")===-1&&(refreshString="?refresh=true"),settings.appRedirect=encodeURIComponent(window.location.href+refreshString)}switch(settings.href){case"/members/v3_1/register":width=820,height=515,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&forwardUrl="+settings.forwardUrl+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v4_0/register":width=805,height=600,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&forwardUrl="+settings.forwardUrl+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v5_0/register":width=800,height=325,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&forwardUrl="+settings.forwardUrl+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/personalization/v3_1/personalization":width=820,height=550,params="?tab="+settings.tab+"&language="+settings.language+"&parentLocation="+parentLocation,pageLocation="http://espn.go.com"+settings.href;break;case"/members/v3_1/login":width=820,height=325,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&forwardUrl="+settings.forwardUrl+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;
break;case"/members/v3_1/forgotMembernamePassword":width=490,height=380,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v3_1/tou":width=769,height=470,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v3_1/validateEmail":width=500,height=425,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v3_1/fbConnect":width=450,height=225,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v3_1/fbDisconnect":width=450,height=225,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v3_1/registration":var regPage="";trigger.attr("data-pageid")&&(regPage=trigger.attr("data-pageid")),width=820,height=600,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation+"&type="+regPage;break;case"/members/v3_1/modifyAccount":width=820,height=550,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/v3_1/acctUpdate":width=820,height=550,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/commerce/purchase":width=820,height=600,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;case"/members/commerce/account":width=876,height=533,params="?tab="+settings.tab+"&language="+settings.language+"&parentLocation="+parentLocation,pageLocation=urlPrefix+URL+settings.href;break;case"/members/v3_1/modifyNewsletters":width=796,height=553,params="?tab="+settings.tab+"&language="+settings.language+"&parentLocation="+parentLocation,pageLocation=urlPrefix+URL+settings.href;break;case"/members/commerce/insiderOverlay":width=430,height=580,params="?language="+settings.language+"&registrationFormId="+settings.regFormId+"&affiliateName="+settings.affiliateName+"&appRedirect="+settings.appRedirect+"&parentLocation="+parentLocation;break;default:width=!1,height=!1}}var didDID=!1;if(!!espn.memberservices.DisneyID==!0){settings.href.indexOf("/login")>-1?(did.launchLogin(),didDID=!0):settings.href.indexOf("/register")>-1?(did.launchSocialRegistration(),didDID=!0):settings.href.indexOf("/modifyAccount")>-1?(did.launchProfile(),didDID=!0):(settings.href.indexOf("/modifyNewsletters")>-1||settings.href.indexOf("/commerce/account")>-1)&&(espn.memberservices.ensureHighTrust(function(){finalHref=pageLocation+params;var finalHeight=$("div.ie6, div.ie7").length?height+49:height;launchOverlay(this,{css:css,href:finalHref,speed:400,height:finalHeight,width:width,overlayClose:!1})}),didDID=!0);var reloadPage=function(){espn.login_refresh?setTimeout(function(){window.location.reload()},100):espn.login_refresh=!0};espn.memberservices.DisneyID.on("login",reloadPage),espn.memberservices.DisneyID.on("reauth",function(){espn.login_refresh=!1}),espn.memberservices.DisneyID.on("close",function(){espn.memberservices.DisneyID.off("login",reloadPage)})}if(!didDID){finalHref=pageLocation+params;var finalHeight=$("div.ie6, div.ie7").length?height+49:height;launchOverlay(this,{css:css,href:finalHref,speed:400,height:finalHeight,width:width,overlayClose:!1})}evt.preventDefault()})}(jQuery,window),espn.p13n=function(window,$){return{get:function(callback){jQuery.when(espn.fanapi.getAsP13n()).done(function(data){callback.success.call(this,data)})},reset:function(callback){espn.fanapi.emptyCache(),callback.success.call(this)},add:function(data,callback){if("object"==typeof data){var entityId,sportId,preferenceTypeId,teams=data.teams;teams&&(preferenceTypeId=2,teamsParts=teams.split(":"),teamsParts.length>1&&(sportId=parseInt(teamsParts[0],10),entityId=parseInt(teamsParts[1],10))),espn.fanapi.createPreference({preferenceTypeId:preferenceTypeId,entityId:entityId,sportId:sportId},{success:function(){callback.success.call(this)}})}}}}(this,this.jQuery),jQuery.myespn={init:espn.p13n.get,reset:espn.p13n.reset},function($,window,document,undefined){"espn.mem".namespace(),espn.mem.container=null,espn.mem.topstories=null,espn.mem.tabinitalized={},espn.mem.lastCarousel=0,espn.mem.autoscroll=!1,espn.mem.scrolling=!1,espn.mem.autoScrollTimeout=7e3,espn.mem.currentMemScrollItem=0,espn.mem.hasVideo=!1;var videoPlayTimeout,tabPanel,lastHref,userInitiated=!1,redBarTimeout=[],slideUpTimeout=[],hideWatchStripe=!1,html5=!1,memScrollTimeout=null;!function(){$.each(["mobileApple","android","palm","blackberry"],function(i,device){espn.core[device]&&(html5=!0)})}(),espn.mem.init=function(memContainer,autoscroll){function handleMEMResponse(currentHref,hideVideo,target){var i;for(i=0;i<redBarTimeout.length;i++)clearTimeout(redBarTimeout[i]);for(i=0;i<slideUpTimeout.length;i++)clearTimeout(slideUpTimeout[i]);return function(data,status){if(currentHref===lastHref){if(tabPanel=$(".mod-tab-content").not(".ui-tabs-hide"),hideVideo){debug.log(data);try{espn.video.pause(),espn.video.player.state=VIDEO_STATE.PAUSE}catch(e){}try{espn.watchespn.pause()}catch(e){}espn.mem.topstories.find("div.videoplayer").removeClass("videoplayer-show"),espn.mem.topstories.find("div.watchplayer").removeClass("watchplayer-show")}tabPanel.find(".top-story-content").replaceWith(data),$.publish("espn.mem.show.story",[target])}}}function handleMEMItem(e,track){var carousel,link,href,lpos,lid,theBody,bodyClass,index,headline,target=$(e.target).parents("li"),hideVideo=!1,loc=window.location;0===target.length&&(target=jQuery(e.target)),carousel=target.attr("id"),link=target.find("a"),href=link.attr("href"),clearTimeout(videoPlayTimeout),userInitiated=!1,carousel&&target.parents(".mod-tab-content").attr("data-carousel",carousel),/^#/.test(href)||(hideVideo=!0,espn.mem.hasVideo=!1,lastHref=href,$.ajax({url:href,dataType:"html",cache:!0,success:handleMEMResponse(href,hideVideo,target)})),target.closest("ul").find("li.active").removeClass("active"),target.addClass("active"),espn.core.is(window.anTrackLink,"Function")&&href.indexOf("watch-espn")===-1&&espn.mem.autoscroll===!1&&(lpos="","http://espn.go.com/"===loc.href||"http://espn.go.com/index"===loc.href?lpos+="fpcarousel:":(theBody=$("body"),bodyClass=theBody.attr("class").replace(/\{[^{]*\}|[\W_]/g,""),bodyClass.indexOf("espn360")>-1&&(bodyClass=bodyClass.replace("espn360","")),lpos+=bodyClass+"indexcarousel:"),lpos+=/videos/i.test(espn.mem.topstories.find(".ui-tabs-selected").text())?"topvideos:":"topstory:",index=$(target.parents("ul")).find("li").index(target)+1,headline=target.find("h3").html(),headline.indexOf("<span>")>-1&&(headline=headline.substr(0,headline.indexOf("<span>"))),headline=headline.replace(/\s+/g,""),lid="thumbnail"+index+":"+headline,window.anTrackLink(loc,"espn",lpos,lid)),e.preventDefault()}if(window.Jiffy&&Jiffy.mark("espn.mem.init.start"),1==autoscroll&&(espn.mem.autoscroll=!0),espn.mem.container=memContainer=$(memContainer),espn.mem.topstories=$("#top-stories"),espn.mem.container.data("initialized"))return!0;tabPanel=espn.mem.topstories.find(".top-story-content").not(".videoplayer").not(".watchplayer").parent(),$.support.touch||memContainer.find("li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$.support.touch?memContainer.find("li").bind("touchstart",function(e,track){$(this).one("touchend",function(){handleMEMItem(e,track)}),e.preventDefault()}):(memContainer.find(".mod-mem-carousel li").live("click",function(e,track){1==espn.mem.autoscroll&&1!=espn.mem.scrolling&&(null!=memScrollTimeout&&clearTimeout(memScrollTimeout),espn.mem.autoscroll=!1),handleMEMItem(e,track)}),jQuery("#channels li").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")})),$(".play-live-espn360, .replay-espn360").click(function(e){e.preventDefault(),window.open($(this).attr("href"),"m3Window","resize=yes,status=0,top=0,left=0,width=1130,height=800,directories=no")}),$("div#top-stories").find("a.watch-mem-link").live("click",function(e,track){var $this=$(this),carousel=$this.attr("data-carousel");$this.attr("data-tab");return $("#Watch_Live, #Watch_Now").filter(":visible").attr("data-carousel",carousel),$(".mod-header #watch-espn-a, .mod-header #watch-espn-b").hasClass("ui-tabs-selected")?$("#top-stories .ui-tabs-panel").not(".ui-tabs-hide").find("#"+carousel+" a").trigger("click"):($(".mod-header #watch-espn-a > a, .mod-header #watch-espn-b > a").filter(":visible").trigger("click"),$.subscribe("espn.watchespn.init",function(){$("#top-stories .ui-tabs-panel").not(".ui-tabs-hide").find("#"+carousel+" a").trigger("click")})),!1});$.subscribe("espn.mem.show.story",function(target){espn.mem.topstories.find("cite").show()}),function(){espn.subscribe("espn.tabs.show",function(panel,ui){var $panel=$(panel),panelId=$panel.attr("id"),carousel=$panel.attr("data-carousel");espn.mem.tabinitalized[panelId]===!0?carousel&&carousel!=espn.mem.lastCarousel&&(espn.mem.lastCarousel=carousel,$("#"+carousel).find("a").trigger("click")):espn.mem.tabinitalized[panelId]=!0}),espn.subscribe("espn.tabs.load",function(panel,ui){var $panel=$(panel);$panel.attr("data-carousel")}),espn.subscribe("espn.tabs.select",function(panel,ui){if(panel.closest("#top-stories").length){clearTimeout(videoPlayTimeout);try{espn.video.pause(),espn.video.player.state=VIDEO_STATE.PAUSE}catch(e){}try{espn.watchespn.pause()}catch(e){}var $networkTabs=jQuery("#channels li");$networkTabs.length>0&&$networkTabs.removeClass("active");$(panel).attr("id");espn.mem.topstories.find("div.videoplayer").removeClass("videoplayer-show"),espn.mem.topstories.find("div.watchplayer").removeClass("watchplayer-show")}})}();if(1==espn.mem.autoscroll){memItemCount=memContainer.find(".mod-mem-carousel li").length,espn.subscribe("espn.video.play",function(){clearTimeout(memScrollTimeout),espn.mem.autoscroll=!1});var autoScrollMem=function(){espn.mem.scrolling=!0,memItemCount<=espn.mem.currentMemScrollItem+1?espn.mem.currentMemScrollItem=0:espn.mem.currentMemScrollItem++,espn.mem.container.find(".mod-mem-carousel li:eq("+espn.mem.currentMemScrollItem+")").trigger("click"),memScrollTimeout=setTimeout(autoScrollMem,espn.mem.autoScrollTimeout),espn.mem.scrolling=!1};memScrollTimeout=setTimeout(autoScrollMem,espn.mem.autoScrollTimeout)}espn.mem.container.data("initialized",!0),window.Jiffy&&Jiffy.mark("espn.mem.init.end")},espn.mem.video=function(mediaId,options,userInitiated){$(document).ready(function(){function injectNewsStrips(){debug.log("injectNewsStrips");var breakingNews,container=espn.video.player.container(options.playerType);breakingNews=container.find(".breaking-news"),breakingNews.closest(".mod-mem-carousel").length||breakingNews.remove(),breakingNews=container.siblings(".ui-tabs-panel").not(".ui-tabs-hide").find(".breaking-news"),breakingNews.length&&!breakingNews.closest(".mod-mem-carousel").length&&container.prepend(breakingNews.get(0))}function slideUpRedBar(){slideUpTimeout.push(setTimeout(function(){espn.mem.topstories.find("div.breaking-news").slideUp()},1e3))}if(debug.log("espn.mem.video",mediaId,options,userInitiated),clearTimeout(videoPlayTimeout),espn.mem.hasVideo=!0,espn.video.play(mediaId,options,userInitiated,!0),espn.video.player.ready)injectNewsStrips();else var newsStripHandle=espn.subscribe("espn.video.ready",function(){injectNewsStrips(),espn.unsubscribe(newsStripHandle)});espn.publish("espn.mem.video.play",[mediaId]);(function(){var adIsPlaying=!1,hasSeenRedBar=!1;espn.subscribe("espn.video.play",function(){espn.mem.topstories&&(hasSeenRedBar===!1?(espn.mem.topstories.find("div.breaking-news").show(),redBarTimeout.push(setTimeout(function(){espn.mem.topstories.find("div.breaking-news").slideUp(),hasSeenRedBar=!0},5e3))):espn.mem.topstories.find("div.breaking-news").hide())}),espn.subscribe("espn.video.ad.start",function(){espn.mem.topstories&&(clearTimeout(redBarTimeout),espn.mem.topstories.find("div.breaking-news").hide(),adIsPlaying=!0)}),espn.subscribe("espn.video.ad.end",function(){espn.mem.topstories&&(adIsPlaying=!1)}),jQuery.subscribe("espn.video.hoverIn",function(){if(espn.video.isPlaying&&hasSeenRedBar&&!adIsPlaying&&espn.mem.topstories){var i;for(i=0;i<slideUpTimeout.length;i++)clearTimeout(slideUpTimeout[i]);espn.mem.topstories.find("div.breaking-news").slideDown(),slideUpRedBar()}}),jQuery.subscribe("espn.video.ready",function(){espn.video.playerElement.onmousemove=function(){if(espn.video.isPlaying&&!adIsPlaying&&espn.mem.topstories){var i;for(i=0;i<slideUpTimeout.length;i++)clearTimeout(slideUpTimeout[i]);espn.mem.topstories.find("div.breaking-news").slideDown(),slideUpRedBar()}}}),espn.subscribe("espn.video.switch",function(autoplay){espn.mem.topstories&&(autoplay?espn.mem.topstories.find("cite").hide().end().find("div.breaking-news").hide():espn.mem.topstories.find("cite").show().end().find("div.breaking-news").show())}),espn.subscribe("espn.video.stop",function(){espn.mem.topstories&&espn.mem.topstories.find("cite").show().end().find("div.breaking-news").show()}),espn.subscribe("espn.tabs.select",function(panel,ui){if(panel.closest("#top-stories").length){clearTimeout(videoPlayTimeout);try{espn.video.pause(),espn.video.player.state=VIDEO_STATE.PAUSE}catch(e){}try{espn.watchespn.pause()}catch(e){}espn.mem.topstories.find("div.videoplayer").removeClass("videoplayer-show"),espn.mem.topstories.find("div.watchplayer").removeClass("watchplayer-show")}}),espn.subscribe("espn.video.error",function(){espn.mem.topstories.find("div.videoplayer").removeClass("videoplayer-show")})})()})},espn.mem.watchespn=function(options){function injectWatchStrips(){debug.log("injectWatchStrips");var watchStrip,container=$("div.watchplayer");watchStrip=container.find(".espn360.ribbon, .networks-mem.ribbon"),watchStrip.closest(".mod-mem-carousel").length||watchStrip.remove(),watchStrip=container.siblings(".ui-tabs-panel").not(".ui-tabs-hide").find(".espn360.ribbon, .networks-mem.ribbon"),watchStrip.length&&!watchStrip.closest(".mod-mem-carousel").length&&container.prepend(watchStrip.get(0))}var watchStripHandle,$networkTabs=(jQuery("#top-stories .ui-tabs-panel").not(".ui-tabs-hide"),jQuery("body"),jQuery("#channels li")),watchPlayerLoaded=!1;espn.mem.topstories=$("#top-stories"),espn.watchespn.ready()?injectWatchStrips():watchStripHandle=espn.subscribe("espn.watchespn.init",function(){injectWatchStrips(),espn.unsubscribe(watchStripHandle)}),options=$.extend({partnerId:"espnfrontpage"},options),"espn3"!==options.channel&&delete options.eventId,html5===!1&&($("object#watchespn-player").length>0?(options.channel&&"espn3"!==options.channel?options.thumbnail?espn.watchespn.changeChannel(options.channel,options.thumbnail):espn.watchespn.changeChannel(options.channel):options.thumbnail?espn.watchespn.changeEvent(options.eventId,!0,options.thumbnail):espn.watchespn.changeEvent(options.eventId,!0),espn.watchespn.play()):($(document).ready(function(){espn.watchespn.embed(options)}),watchPlayerLoaded=!0,$.subscribe("espn.watchespn.play",function(){$("div.espn360.ribbon, div.networks-mem.ribbon, a.espn360, a.networks-mem").remove(),hideWatchStripe=!0,$(".scoreStrip").hide()})),$(document).ready(function(){$networkTabs.length>0&&$("#watch-espn-a").hasClass("ui-tabs-selected")&&$networkTabs.removeClass("active").filter("#channel-"+options.channel).addClass("active"),$("div#top-stories").find("div.watchplayer").addClass("watchplayer-show"),hideWatchStripe?$("div.espn360.ribbon, div.networks-mem.ribbon, a.espn360, a.networks-mem").remove():$("a.espn360, a.networks-mem").remove(),$("div.breaking-news.hideFromAffiliate").hide(),$(".scoreStrip").css("z-index","5000")}))}}(jQuery,window,document),window.espn=window.espn||{},function($,scope){function getGmtOffset(offset){var minuteOffset;if(offset=parseInt(offset),!isNaN(offset)){var minutes=offset%100;hours=(offset-minutes)/100,minuteOffset=60*hours+minutes}return minuteOffset}var STORAGE_KEY="geo",UNLOCATED=!1,countryMap={ABW:"AW",AFG:"AF",AGO:"AO",AIA:"AI",ALA:"AX",ALB:"AL",AND:"AD",ANT:"AN",ARE:"AE",ARG:"AR",ARM:"AM",ASM:"AS",ATA:"AQ",ATF:"TF",ATG:"AG",AUS:"AU",AUT:"AT",AZE:"AZ",BDI:"BI",BEL:"BE",BEN:"BJ",BFA:"BF",BGD:"BD",BGR:"BG",BHR:"BH",BHS:"BS",BIH:"BA",BLM:"BL",BLR:"BY",BLZ:"BZ",BMU:"BM",BOL:"BO",BRA:"BR",BRB:"BB",BRN:"BN",BTN:"BT",BVT:"BV",BWA:"BW",CAF:"CF",CAN:"CA",CCK:"CC",CHE:"CH",CHL:"CL",CHN:"CN",CIV:"CI",CMR:"CM",COD:"CD",COG:"CG",COK:"CK",COL:"CO",COM:"KM",CPV:"CV",CRI:"CR",CUB:"CU",CXR:"CX",CYM:"KY",CYP:"CY",CZE:"CZ",DEU:"DE",DJI:"DJ",DMA:"DM",DNK:"DK",DOM:"DO",DZA:"DZ",ECU:"EC",EGY:"EG",ERI:"ER",ESH:"EH",ESP:"ES",EST:"EE",ETH:"ET",FIN:"FI",FJI:"FJ",FLK:"FK",FRA:"FR",FRO:"FO",FSM:"FM",GAB:"GA",GBR:"GB",GEO:"GE",GGY:"GG",GHA:"GH",GIB:"GI",GIN:"GN",GLP:"GP",GMB:"GM",GNB:"GW",GNQ:"GQ",GRC:"GR",GRD:"GD",GRL:"GL",GTM:"GT",GUF:"GF",GUM:"GU",GUY:"GY",HKG:"HK",HMD:"HM",HND:"HN",HRV:"HR",HTI:"HT",HUN:"HU",IDN:"ID",IMN:"IM",IND:"IN",IOT:"IO",IRL:"IE",IRN:"IR",IRQ:"IQ",ISL:"IS",ISR:"IL",ITA:"IT",JAM:"JM",JEY:"JE",JOR:"JO",JPN:"JP",KAZ:"KZ",KEN:"KE",KGZ:"KG",KHM:"KH",KIR:"KI",KNA:"KN",KOR:"KR",KWT:"KW",LAO:"LA",LBN:"LB",LBR:"LR",LBY:"LY",LCA:"LC",LIE:"LI",LKA:"LK",LSO:"LS",LTU:"LT",LUX:"LU",LVA:"LV",MAC:"MO",MAF:"MF",MAR:"MA",MCO:"MC",MDA:"MD",MDG:"MG",MDV:"MV",MEX:"MX",MHL:"MH",MKD:"MK",MLI:"ML",MLT:"MT",MMR:"MM",MNE:"ME",MNG:"MN",MNP:"MP",MOZ:"MZ",MRT:"MR",MSR:"MS",MTQ:"MQ",MUS:"MU",MWI:"MW",MYS:"MY",MYT:"YT",NAM:"NA",NCL:"NC",NER:"NE",NFK:"NF",NGA:"NG",NIC:"NI",NIU:"NU",NLD:"NL",NOR:"NO",NPL:"NP",NRU:"NR",NZL:"NZ",OMN:"OM",PAK:"PK",PAN:"PA",PCN:"PN",PER:"PE",PHL:"PH",PLW:"PW",PNG:"PG",POL:"PL",PRI:"PR",PRK:"KP",PRT:"PT",PRY:"PY",PSE:"PS",PYF:"PF",QAT:"QA",REU:"RE",ROU:"RO",RUS:"RU",RWA:"RW",SAU:"SA",SDN:"SD",SEN:"SN",SGP:"SG",SGS:"GS",SHN:"SH",SJM:"SJ",SLB:"SB",SLE:"SL",SLV:"SV",SMR:"SM",SOM:"SO",SPM:"PM",SRB:"RS",SSD:"SS",STP:"ST",SUR:"SR",SVK:"SK",SVN:"SI",SWE:"SE",SWZ:"SZ",SYC:"SC",SYR:"SY",TCA:"TC",TCD:"TD",TGO:"TG",THA:"TH",TJK:"TJ",TKL:"TK",TKM:"TM",TLS:"TL",TON:"TO",TTO:"TT",TUN:"TN",TUR:"TR",TUV:"TV",TWN:"TW",TZA:"TZ",UGA:"UG",UKR:"UA",UMI:"UM",URY:"UY",USA:"US",UZB:"UZ",VAT:"VA",VCT:"VC",VEN:"VE",VGB:"VG",VIR:"VI",VNM:"VN",VUT:"VU",WLF:"WF",WSM:"WS",YEM:"YE",ZAF:"ZA",ZMB:"ZM",ZWE:"ZW"};scope.geo={countryMap:countryMap,getLocation:function(reload){if(!reload&&scope.geo.promise)return scope.geo.promise;var deferred=new $.Deferred,storedLocation=espn.storage.getItem(STORAGE_KEY),alpha2Cookie=espn.cookie.get("isoCodeAlpha2");if(!reload&&$.isPlainObject(storedLocation))deferred.resolve(storedLocation);else if(alpha2Cookie)deferred.resolve({country:{isoCodeAlpha2:alpha2Cookie}});else if(reload||storedLocation!==!1){var tredirTimeout=setTimeout(function(){deferred.reject(),espn.storage.setItem(STORAGE_KEY,UNLOCATED)},5e3);$.getScript("//tredir.espn.com/capmon/GetDE?set=j&param=country&param=countryisocode&param=state&param=metro&param=metrocode&param=postcode&param=offset&param=dst&param=countrycode&param=connection").done(function(){if(clearTimeout(tredirTimeout),"string"==typeof country&&country.length>0&&"string"==typeof countryisocode&&countryisocode.length>0){var geoLocation={country:{name:country,isoCode:countryisocode}},lookupKey=countryisocode.toUpperCase();if(void 0!==countryMap&&void 0!==countryMap[lookupKey]&&(geoLocation.country.isoCodeAlpha2=countryMap[lookupKey].toLowerCase()),"string"==typeof state&&state.length>0&&"no state"!==state&&(geoLocation.state=state),"string"==typeof metro&&metro.length>0&&"no metro"!==metro&&(geoLocation.metro=metro),"string"==typeof metrocode&&metrocode.length>0&&"0"!==metrocode&&(geoLocation.dma=metrocode),"string"==typeof postcode&&postcode.length>0&&"0"!==postcode&&(geoLocation.postCode=postcode),"string"==typeof countrycode&&countrycode.length>0&&"0"!==countrycode&&(geoLocation.countryCode=countrycode),"string"==typeof offset&&offset.length>0){var gmtOffset=getGmtOffset(offset);gmtOffset&&(geoLocation.gmtOffset=gmtOffset)}"string"==typeof dst&&dst.length>0&&(geoLocation.dst="y"===dst),"string"==typeof connection&&connection.length>0&&(geoLocation.connection=connection),deferred.resolve(geoLocation),espn.storage.setItem(STORAGE_KEY,geoLocation)}else deferred.reject(),espn.storage.setItem(STORAGE_KEY,UNLOCATED)}).fail(function(){clearTimeout(tredirTimeout),deferred.reject(),espn.storage.setItem(STORAGE_KEY,UNLOCATED)})}else deferred.reject();return scope.geo.promise=deferred.promise()}}}(jQuery,window.espn),function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.ESPNVideoPlayer=f()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function loadBrightcovePlayer(){function onSuccess(){_isBrightcoveLoaded=!0,callback()}var callback=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},brightcovePlayerId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ByiDlPnWg_default",brightcoveAccountId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"3948005062001";return _isBrightcoveLoaded?void callback():void load("//players.brightcove.net/"+brightcoveAccountId+"/"+brightcovePlayerId+"/index.min.js",function(err){err?load("//secure.espncdn.com/players/web-player-bundle/latest/perform-assets/players/"+brightcovePlayerId+"/index.min.js",function(err){err||onSuccess()}):onSuccess()})}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),EventEmitter=require("events"),load=require("load-script"),BrightcovePlayer=require("./player/brightcove5/index"),ConfigLogger=require("./config-logger/index"),Analytics=require("./analytics"),Advertising=require("./advertising"),Html5Player=require("./player/native-player/index"),MobileDetect=require("mobile-detect"),_bundle=void 0,_container=void 0,_element=void 0,_containerClone=void 0,_isBrightcoveLoaded=!1,ESPNVideoPlayer=function(_EventEmitter){function ESPNVideoPlayer(native,brightcovePlayerId,brightcoveAccountId){_classCallCheck(this,ESPNVideoPlayer);var _this=_possibleConstructorReturn(this,(ESPNVideoPlayer.__proto__||Object.getPrototypeOf(ESPNVideoPlayer)).call(this));return _this["native"]=native,_this.brightcoveAccountId=brightcoveAccountId,_this.brightcovePlayerId=brightcovePlayerId,_this}return _inherits(ESPNVideoPlayer,_EventEmitter),_createClass(ESPNVideoPlayer,[{key:"player",get:function(){return _bundle&&_bundle.player()}},{key:"bundle",get:function(){return _bundle}},{key:"analytics",get:function(){return Analytics}},{key:"advertising",get:function(){return Advertising}}]),ESPNVideoPlayer}(EventEmitter);ESPNVideoPlayer.prototype.embed=function(guid,el,options){var _this2=this,callback=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},element=el;"[object String]"===Object.prototype.toString.call(el)&&(element=document.getElementById(el)),_element=element,_container=element.parentNode,_containerClone=_container.cloneNode(!0);var config=_extends({},options);return guid&&(config.cerebroId=guid),_bundle=new this.playerTech(element,config),_bundle.player().ready(function(){callback(_this2)}),this},ESPNVideoPlayer.prototype.pause=function(){return this.player&&this.player.pause(),this},ESPNVideoPlayer.prototype.ready=function(){var callback=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},md=new MobileDetect(window.navigator.userAgent);if(this.playerTech=BrightcovePlayer,this["native"]===!0)return this.playerTech=Html5Player,callback(),this;if(this["native"]instanceof Array){var i,len,platform;for(i=0,len=this["native"].length;i<len;i++)if(platform=this["native"][i],md[platform]())return this.playerTech=Html5Player,callback(),this}return loadBrightcovePlayer(callback.bind(this),this.brightcovePlayerId,this.brightcoveAccountId),this},ESPNVideoPlayer.prototype.switchVideo=function(guid){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},callback=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(_bundle&&(guid||options.clipId)){var autoplay="boolean"!=typeof options.autoplay||options.autoplay,source=options.clipSource||_bundle.clipSource,clipId=options.clipId;if(this.player.trigger("switch",{guid:guid,clipId:clipId,autoplay:autoplay,source:source}),this.player&&this.player.ads&&"ad-playback"===this.player.ads.state){this.unembed();var newPlaceholder=_containerClone?_containerClone.children[0]:{},newPlaceholderId=newPlaceholder.getAttribute?newPlaceholder.getAttribute("id"):null;newPlaceholderId?this.embed(guid,newPlaceholderId,options,callback):callback(new Error("cloned placeholder missing ID"))}else guid&&(options.cerebroId=guid),_bundle.player().reset(),_bundle.registerConfiguration(options),guid?_bundle.loadShield(guid,autoplay):clipId&&_bundle.loadClip(clipId,autoplay,source),callback(null,this)}},ESPNVideoPlayer.prototype.unembed=function(){var removeContainer=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _bundle.dispose(),_bundle=null,_container&&_container.parentNode&&(removeContainer?_container.parentNode.removeChild(_container):_container.parentNode.replaceChild(_containerClone,_container)),this},ESPNVideoPlayer.prototype.remove=function(){this.unembed(!0)},ESPNVideoPlayer.prototype.error=function(err,content){return this.bundle.error(err,content),this},ESPNVideoPlayer.loadBrightcovePlayer=loadBrightcovePlayer,ESPNVideoPlayer.ConfigLogger=ConfigLogger,ESPNVideoPlayer.VERSION="1.5.1",module.exports=ESPNVideoPlayer},{"./advertising":5,"./analytics":7,"./config-logger/index":13,"./player/brightcove5/index":51,"./player/native-player/index":53,events:24,"load-script":25,"mobile-detect":28}],2:[function(require,module,exports){"use strict";(function(){module.exports={desktop:["freewheel_admanager"],tablet:["brightcove_once","freewheel_admanager"],mobile:["brightcove_once","freewheel_admanager"]}}).call(void 0)},{}],3:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(){var AdManager,AdProvider,Advertising,BrightcoveOnce,Fan,OnceUX,defaultProviderOrders,request;Advertising=require("../advertising"),Fan=require("../fan"),defaultProviderOrders=require("./config"),request=require("superagent"),AdProvider=function(){function AdProvider(player,data,providerOrders,callback){var currentPlatform;switch(this.player=player,this.data=data,this.sources=data.sources,this.onReady=callback,providerOrders="object"===("undefined"==typeof providerOrders?"undefined":_typeof(providerOrders))?providerOrders:defaultProviderOrders,currentPlatform=data._shield&&data._shield.device){case"MOBILE":this.chooseProvider(providerOrders.mobile);break;case"TABLET":this.chooseProvider(providerOrders.tablet);break;case"PC":this.chooseProvider(providerOrders.desktop);break;default:this.chooseProvider()}this.provider?this.provider.setSource.call(this):this.onReady(this)}return AdProvider.prototype.chooseProvider=function(providerOrder){var i,len,provider;for(providerOrder=providerOrder||["freewheel_admanager"],i=0,len=providerOrder.length;i<len&&(provider=providerOrder[i],"function"!=typeof this[provider]||(this.provider=this[provider](),!this.provider));i++);},AdProvider.prototype.data=void 0,AdProvider.prototype.player=void 0,AdProvider.prototype.provider=AdManager,AdProvider.prototype.sources=void 0,AdProvider.prototype.initAds=function(options){return"function"==typeof this.provider.initAds&&this.provider.initAds.call(this,this.player,options)},AdProvider.prototype.brightcove_once=function(){return!!this.data.ONCE&&BrightcoveOnce},AdProvider.prototype.freewheel_admanager=function(){return!!this.player.FreeWheelPlugin&&AdManager},AdProvider.prototype.onceux=function(){return!!this.player.onceux&&OnceUX},AdProvider.prototype.toString=function(){return this.provider.toString()},AdProvider}(),AdManager={toString:function(){return"AdManager"},setSource:function(){return this.onReady(this)},initAds:function(player,opts){var options,postroll,preroll,slots;player.FreeWheelPlugin&&(preroll=opts.slots&&opts.slots.preroll,postroll=opts.slots&&opts.slots.postroll,slots=[],preroll&&slots.push({adUnit:"preroll",timePosition:0}),postroll&&slots.push({adUnit:"postroll",timePosition:opts.duration}),(preroll||postroll)&&(options=Advertising.adManager({networkId:opts.networkId,assetId:opts.id,assetDuration:opts.duration},slots),opts.logger("FreeWheelPlugin",options),"function"==typeof player.FreeWheelPlugin?player.FreeWheelPlugin(options):player.FreeWheelPlugin&&(player.FreeWheelPlugin.settings=options,"Html5"===player.FreeWheelPlugin.tech&&player.FreeWheelPlugin.Html5&&player.FreeWheelPlugin.Html5._parameters.update(options.Html5))))}},BrightcoveOnce={toString:function(){return"BrightcoveOnce"},setSource:function(){var _this=this;this.data.ONCE=this.data.ONCE.replace("now/od","now/ads/vmap/od"),request.get(this.data.ONCE).query({UMADPARAM_fw_euid:Fan.SWID,output:"1"}).end(function(err,res){var unicornOnce;res.body&&(unicornOnce=res.body["vmap:VMAP"]&&res.body["vmap:VMAP"]["vmap:Extensions"]&&res.body["vmap:VMAP"]["vmap:Extensions"]["uo:unicornOnce"],
_this.sources=[{src:unicornOnce["@contenturi"],type:unicornOnce["@contenttype"].replace("audio","application")}]),_this.onReady(_this)})},initAds:null},OnceUX={toString:function(){return"OnceUX"},setSource:function(){return this.onReady(this)},initAds:function(player,opts){var options;player.onceux&&("function"==typeof player.onceux?(options={metadataUri:this.data.ONCE.replace("now/od","now/ads/vmap/od")},opts.logger("onceux",options),player.onceux(options)):"function"==typeof player.onceux.src&&(options=this.data.ONCE.replace("now/od","now/ads/vmap/od"),opts.logger("onceux",{src:options}),player.onceux.src(options)))}},module.exports=AdProvider}).call(void 0)},{"../advertising":5,"../fan":16,"./config":2,superagent:32}],4:[function(require,module,exports){"use strict";(function(){module.exports={host:"http://bd0dc.v.fwmrm.net/ad/p/1",siteSectionId:"espn:video",networkId:87146,flash:{profile:"87146:espn_desktop_as3",serverUrl:"http://bd0dc.v.fwmrm.net/ad/p/1",sdkurl:"http://adm.fwmrm.net/p/espn_desktop_prod/AdManager.swf",swfurl:"https://players.brightcove.net/videojs-freewheel/2/videojs.freewheel.swf"},html5:{profile:"87146:espn_desktop_js",serverUrl:"http://1546a.v.fwmrm.net/ad/g/1",sdkurl:"http://adm.fwmrm.net/p/espn_desktop_prod/AdManager.js"},adTechOrder:["flash","html5"],debug:!1,prerollTimeout:3e3,timeout:5e3,assetId:void 0,assetDuration:void 0,mimeType:void 0,live:!1,keyValues:[],beforeAdManager:function(options){return options},pageViewRandomNumber:1,videoPlayRandomNumber:1,responseType:"vast2"}}).call(void 0)},{}],5:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(){var Advertising,Fan,config,_extend,hasProp;hasProp={}.hasOwnProperty,_extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&("object"===_typeof(parent[key])?(child[key]=child[key]||{},child[key]=_extend(child[key],parent[key])):null!==parent[key]&&"undefined"!=typeof parent[key]&&(child[key]=parent[key]));return child},Fan=require("../fan"),config=require("./config"),Advertising={configure:function(obj){return obj&&_extend(config,obj),config},adManager:function(options){return this.configure({keyValues:[{_fw_euid:Fan.SWID}]}),null!=options&&this.configure(options),this.configure(config.beforeAdManager(config)),{Flash:{networkId:""+config.networkId,sdkurl:config.flash.sdkurl,serverUrl:config.flash.serverUrl,siteSectionCustomId:config.siteSectionId,swfurl:config.flash.swfurl,videoAssetCustomId:config.assetId,videoAssetDuration:config.assetDuration,profile:config.flash.profile,keyValues:config.keyValues},Html5:{networkId:""+config.networkId,sdkurl:config.html5.sdkurl,serverUrl:config.html5.serverUrl,siteSectionCustomId:config.siteSectionId,videoAssetCustomId:config.assetId,videoAssetDuration:config.assetDuration,profile:config.html5.profile,keyValues:config.keyValues},adTechOrder:config.adTechOrder,debug:config.debug,prerollTimeout:config.prerollTimeout,timeout:config.timeout}},vast:function(options,slots){var i,keys,len,params,slot,slotParams;for(null!=options&&this.configure(options),params=["resp="+config.responseType,"nw="+config.networkId,"caid="+config.assetId,null!=config.assetDuration?"vdur="+config.assetDuration:void 0,"csid="+config.siteSectionId,"prof="+config.profile,config.live?"mode=live":void 0,"pvrn="+config.pageViewRandomNumber,"vprn="+config.videoPlayRandomNumber,"vast2"===config.responseType?"crtp=vast2s":void 0],keys=[],slotParams=[],i=0,len=slots.length;i<len;i++)slot=slots[i],slotParams.push(["ptgt=a","slau="+slot.adUnit,"slid="+slot.adUnit+(null!=slot.adBreak?slot.adBreak:void 0)].join("&"));return config.host+"?"+params.join("&")+";"+keys.join("&")+";"+slotParams.join(";")}},module.exports=Advertising}).call(void 0)},{"../fan":16,"./config":4}],6:[function(require,module,exports){"use strict";(function(){module.exports={chartbeat:{uid:"22222",domain:"espn.com",sections:null,authors:null},comscore:{clientId:"3000005",labels:{c3:'"*null"',c4:"MediaInfo.site",c6:"MediaInfo.league",c8:"MediaInfo.pageTitle",ns_st_pu:"MediaInfo.publisher",ns_st_pr:'"*null"',ns_st_ep:"MediaInfo.name",ns_st_sn:'"*null"',ns_st_en:'"*null"',ns_st_st:'"*null"',ns_st_ge:'"*null"',ns_st_ti:'"*null"',ns_st_ia:'"*null"',ns_st_ce:'"*null"',ns_st_ddt:'"*null"',ns_st_tdt:'"*null"'}},conviva:{customerKey:"eec329720efa1110d60c5a6d01a65baf032de653",playerName:"Conviva Test Web Player",debug:!1},adobeDCR:{VISITOR_API:{MARKETING_CLOUD_ORG_ID:"EE0201AC512D2BE80A490D4C@AdobeOrg",NAMESPACE:"espn",TRACKING_SERVER:"w88.espn.com"},APP_MEASUREMENT:{RSID:"wdgespredesign",TRACKING_SERVER:"w88.espn.com"},HEARTBEAT:{DISABLE:!1,TRACKING_SERVER:"espn.hb.omtrdc.net",PUBLISHER:"EE0201AC512D2BE80A490D4C@AdobeOrg",OVP:"Brightcove",SDK:"1.6.7",DEBUG_LOGGING:!1},QUALITY:{TIME_TO_START:0},CUSTOM_EVENT:{disable:!0,bc_data_mapping:{name:"eVar106,prop2",segment:"eVar203",contentType:"eVar201",timePlayed:"event203",view:"event201",segmentView:"event202",complete:"event207",milestones:{25:"event204",50:"event205",75:"event206"}},bc_volumechange:{event:"event208",evar:"prop1"},bc_ad_pause:{event:"event209",evar:"eVar205"},bc_fullscreen_enter:{event:"event212"},bc_fullscreen_exit:{event:"event213"},bc_social_opened:{event:"event214"},bc_social_closed:{event:"event215"}},NIELSEN_DATA:{APP_INFO:{clientId:"us-600140-test",vcid:"b01",apid:"T31187EE2-AC6E-46CB-BB54-D07591BED067",appName:"BasicPlayerSample",sfcode:"dcr",nol_sdkDebug:"console",nsdkv:"511"},CONTENT_METADATA:{type:"content",program:"",segB:"",segC:"Sport/Program Code",isfullepisode:"",adloadtype:2,airdate:"",dataSrc:"",tv:!0,assetid:"",category:""},AD_METADATA:[]},ESPN_CUSTOM_METADATA:{},MEDIAINFO:{}},nativeOmniture:{trackingServer:"w88.espn.com",reportSuites:"wdgespcom,wdgespge",secure:!1,site:"espn"}}}).call(void 0)},{}],7:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(){var Analytics,config,_extend,hasProp;hasProp={}.hasOwnProperty,_extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&("object"===_typeof(parent[key])?(child[key]=child[key]||{},child[key]=_extend(child[key],parent[key])):child[key]=parent[key]);return child},config=require("./config"),Analytics={configure:function(obj){return _extend(config,obj),config},chartbeat:function(options){return null!=options&&this.configure({chartbeat:options}),config.chartbeat},comscore:function(options){var label,labelmap,ref,value;null!=options&&(options.c2&&(options.clientId=options.c2),config.comscore.clientId=options.c2||options.clientId||config.comscore.clientId,options.labels&&_extend(config.comscore.labels,options.labels)),labelmap=[],ref=config.comscore.labels;for(label in ref)value=ref[label],labelmap.push(label+"="+value);return{c2:config.comscore.clientId,labelmapping:labelmap.join(",")}},conviva:function(options){return null!=options&&this.configure({conviva:options}),config.conviva},adobeDCR:function(options){return null!=options&&this.configure({adobeDCR:options}),config.live&&this.configure({adobeDCR:{MEDIAINFO:{live:!0},NIELSEN_DATA:{CONTENT_METADATA:{adloadtype:1}}}}),config.adobeDCR},nativeOmniture:function(options){return null!=options&&this.configure({"native":options}),config["native"]}},module.exports=Analytics}).call(void 0)},{"./config":6}],8:[function(require,module,exports){"use strict";(function(){module.exports={VIDEO_BASE_URL:"http://api-app.espn.com/v1/video",WATCH_BASE_URL:"http://api-app.espn.com/v1/watch",VIDEOHUB_BASE_URL:"http://www.espn.com/videohub"}}).call(void 0)},{}],9:[function(require,module,exports){"use strict";(function(){var API,CMS,Shield,config,extend,hasProp,request;request=require("superagent"),Shield=require("../shield"),CMS=require("../cms"),config=require("./config"),extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return child},hasProp={}.hasOwnProperty,API=function(){function API(options){extend(config,options),this.cms=new CMS(options&&options.cms||config.cms),config.getRelated&&"function"==typeof config.getRelated&&(this.getRelated=config.getRelated.bind(this),this.request=request)}return API.prototype.getClip=function(id,callback){var cms,url;return cms=this.cms,url=config.VIDEO_BASE_URL+"/clips/"+id,request.get(url).query(cms.apiParams).end(function(error,res){var HLS,MP4,_video,clip,i,len,sources,video,videos;if(error)return callback(error,null);if(cms.key){for(videos=res.body&&res.body.videos,i=0,len=videos.length;i<len;i++)if(_video=videos[i],_video.source===cms.key){video=_video;break}}else video=res.body&&res.body.videos&&res.body.videos.shift();return video?(HLS=video.links&&video.links.source&&video.links.source.HLS&&video.links.source.HLS.href,MP4=video.links&&video.links.source&&video.links.source.mezzanine&&video.links.source.mezzanine.href,sources=[],HLS&&sources.push({src:HLS,type:"application/x-mpegURL"}),MP4&&sources.push({src:MP4,type:"video/mp4"}),clip={_clips:video,advertisingId:cms.adAssetId(video.id),assetName:video.tracking&&video.tracking.trackingName,caption:video.caption,cerebroId:video.cerebroId,createDate:new Date(video.lastModified).toISOString(),duration:video.duration,headline:video.headline,HLS:HLS,id:video.id,keywords:video.keywords,mediaId:cms.apiMediaId(video.id),MP4:MP4,poster:video.posterImages.full.href,publishDate:new Date(video.originalPublishDate).toISOString(),sources:sources,sport:video.tracking&&video.tracking.sportName,syndicatable:video.syndicatable,web:video.links.web.href},callback(null,clip)):(error="Clip "+cms.apiMediaId(id)+" not found.",callback(error,null))})},API.prototype.getClipThroughShield=function(id,callback){var shield;return shield=new Shield,/\:/.test(id)&&(id=id.split(":")[1]),/^[\d]*$/.test(id)?this.getClip(id,function(clipApiError,clipApiResponse){return clipApiError?callback(clipApiError,null):"undefined"==typeof clipApiResponse.cerebroId&&config.BypassShieldDeviceAndGeoRestrictions===!0?callback(clipApiError,clipApiResponse):shield.getClip(clipApiResponse.cerebroId,callback)}):shield.getClip(id,callback)},API.prototype.getChannel=function(channel,callback){var url;return url=config.WATCH_BASE_URL+"/listings",request.get(url).query({tz:"GMT",networks:channel,types:"live"}).end(function(error,res){var listing;return error?callback(error,null):(listing=res.body&&res.body.listings&&res.body.listings.shift(),listing?callback(null,listing):callback("NOT_FOUND",null))})},API.prototype.getListing=function(id,callback){var url;return url=config.WATCH_BASE_URL+"/listings",request.get(url).query({tz:"GMT",id:id}).end(function(error,res){var listing;return error?callback(error,null):(listing=res.body&&res.body.listings&&res.body.listings.shift(),listing?callback(null,listing):callback("NOT_FOUND",null))})},API.prototype.getRelated=function(id,options,callback){var clips,url,queryParams;return url=config.getRelatedBaseURL||config.VIDEOHUB_BASE_URL+"/player/getRelatedFeed",queryParams={mediaId:this.cms.apiMediaId(id)},options.country&&(queryParams.country=options.country.substr(options.country.indexOf("_")+1)),clips=[],request.get(url).query(queryParams).accept("xml").end(function(error,res){var i,item,asseturl,items,len;if(error)return callback(error,null);for(items=res.xhr.responseXML.getElementsByTagName("item"),i=0,len=items.length;i<len;i++)item=items[i],asseturl=item.querySelector("asseturl").textContent||":",clips.push({caption:item.querySelector("caption").textContent,duration:item.getAttribute("duration"),headline:item.querySelector("headline").textContent,id:asseturl.split(":")[1],poster:item.querySelector("thumbnailurl").textContent,source:asseturl.split(":")[0],web:item.querySelector("hostedAtURL").textContent,mediaId:asseturl});return callback(null,clips)})},API.prototype.getProvidersByClient=function(client,callback){var url;return url=config.WATCH_BASE_URL+"/clients/"+client+"/providers",request.get(url).end(function(error,res){var providers;return error?callback(error,null):(providers=res.body&&res.body.clients&&res.body.clients.length>0&&res.body.clients[0].providers||[],callback(null,providers))})},API}(),API.configure=function(options){return extend(config,options),config},module.exports=API}).call(void 0)},{"../cms":12,"../shield":57,"./config":8,superagent:32}],10:[function(require,module,exports){"use strict";(function(){var Authorizer,config,extend,hasProp,request,session;request=require("superagent"),config={v:"2.0.0",partner:"watchespn",platform:"web"},extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return child},hasProp={}.hasOwnProperty,Authorizer=function(){function Authorizer(options){extend(config,options)}return Authorizer.prototype.startSession=function(listing){var data,queryData,startSessionUrl;return this.stopSession(),data={_listing:listing,description:listing.description,id:listing.id,name:listing.name,poster:listing.thumbnails&&listing.thumbnails.large&&listing.thumbnails.large.href,web:listing.links.web.href},startSessionUrl=listing.links.source.hls["default"].href,queryData={v:config.v,partner:config.partner,platform:config.platform,token:config.token,tokenType:config.tokenType,resource:config.resource},request.get(startSessionUrl).query(queryData).withCredentials().end(function(_this){return function(error,res){return error?_this.onStatusChange(res.body,null):("application/json"===res.type&&res.body&&(session=res.body.session,config.token=session.token,config.tokenType="GATEKEEPER",data._session=session,data.HLS=session.playbackUrls&&session.playbackUrls["default"],data.simulcastAiringId=session.event.simulcastAiringId,data.passThroughBeaconURL=session.passThroughBeaconURL,_this.maintainSession(),_this.checkForProgramChange()),_this.onStatusChange(null,data))}}(this))},Authorizer.prototype.stopSession=function(){clearTimeout(this.maintainTimeout),clearTimeout(this.programTimeout),session=null},Authorizer.prototype.maintainSession=function(){var delay,queryData;delay=session.ttl-6e4,queryData={v:config.v,partner:config.partner,platform:config.platform,token:config.token},clearTimeout(this.maintainTimeout),this.maintainTimeout=setTimeout(function(_this){return function(){return request.get(session.maintainUrl).query(queryData).withCredentials().end(function(error,res){if(!error)return"application/json"===res.type&&res.body&&(session=res.body.session,config.token=session.token),_this.maintainSession()})}}(this),delay)},Authorizer.prototype.checkForProgramChange=function(){clearTimeout(this.programTimeout),!session||["espn3","espnpass","secplus","accextra"].indexOf(session.channel)>-1||(this.programTimeout=setTimeout(function(_this){return function(){var programChangeUrl=session.programChangeUrl,sep=programChangeUrl.indexOf("?")!==-1?"&":"?";return programChangeUrl=programChangeUrl+sep+"tz=GMT",request.get(programChangeUrl).end(function(error,res){var listing;if(listing=null,!error)return res.body.listings.forEach(function(item){"live"===item.type&&(listing=item)}),listing&&listing.id!==session.event.id&&(config.resource=null,_this.startSession(listing)),_this.checkForProgramChange(session)})}}(this),6e4))},Authorizer.prototype.dispose=function(){this.stopSession()},Authorizer.prototype.onStatusChange=function(){},Authorizer}(),Authorizer.configure=function(options){return extend(config,options),config},module.exports=Authorizer}).call(void 0)},{superagent:32}],11:[function(require,module,exports){"use strict";(function(){module.exports={cric:{adAssetIdPrefix:"",adNetworkId:"87146",apiIdPrefix:"cric:",apiParams:{},key:"cric",syndicationKey:"cricinfo"},deportes:{adAssetIdPrefix:"",adNetworkId:"135087",apiIdPrefix:"deportes:",apiParams:{lang:"es"},key:"deportes",syndicationKey:"deportes"},espn:{adAssetIdPrefix:"",adNetworkId:"87146",apiIdPrefix:"espn:",apiParams:{},key:"espn",syndicationKey:"domestic"},intl:{adAssetIdPrefix:"intl:",adNetworkId:"144556",apiIdPrefix:"intl:",apiParams:{sport:"soccer",region:"GB"},key:"intl",syndicationKey:"soccerfc"}}}).call(void 0)},{}],12:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(){var CMS,config,_extend,hasProp;hasProp={}.hasOwnProperty,_extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&("object"===_typeof(parent[key])?(child[key]=child[key]||{},child[key]=_extend(child[key],parent[key])):child[key]=parent[key]);return child},config=require("./config"),CMS=function(){function CMS(cms){return _extend(this,config[cms])}return CMS.prototype.adAssetId=function(id){return(this.adAssetIdPrefix||"")+id},CMS.prototype.apiMediaId=function(id){return this.apiIdPrefix&&"string"==typeof id&&id.match(this.apiIdPrefix)?id:(this.apiIdPrefix||"")+id},CMS}(),module.exports=CMS}).call(void 0)},{"./config":11}],13:[function(require,module,exports){"use strict";(function(){var ConfigLogger,stack;stack={},ConfigLogger=function(sourceId,plugin,configs){var entry;switch(arguments.length){case 0:return stack;case 1:return stack[sourceId];case 2:return stack[sourceId].filter(function(item){return item[plugin]});default:return stack[sourceId]=stack[sourceId]||[],entry={},entry[plugin]=configs,stack[sourceId].push(entry),stack}},module.exports=ConfigLogger}).call(void 0)},{}],14:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};(function(){function convivaBrowserSupportsVideoElement(){try{return!!document.createElement("video").canPlayType}catch(e){return!1}}function convivaBrowserSupportsLocalStorage(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}var loadConviva="undefined"==typeof ConvivaPrivateLoader,convivaSupportedBrowser=convivaBrowserSupportsVideoElement()&&convivaBrowserSupportsLocalStorage();if(loadConviva=loadConviva&&convivaSupportedBrowser){var ConvivaPrivateLoader="undefined"!=typeof ConvivaPrivateLoader?ConvivaPrivateLoader:function(){};!function(){function registerName(cls,clsname){"undefined"!=typeof ConvivaPrivateModule?ConvivaPrivateModule[clsname]=cls:"undefined"!=typeof ConvivaPrivateTestingModule?ConvivaPrivateTestingModule[clsname]=cls:ConvivaPrivateLoader[clsname]=cls}function __id(x){return x}function getConvivaType(className){return"undefined"!=typeof ConvivaPrivateModule&&ConvivaPrivateModule.hasOwnProperty(className)?ConvivaPrivateModule[className]:"undefined"!=typeof ConvivaPrivateTestingModule&&ConvivaPrivateTestingModule.hasOwnProperty(className)?ConvivaPrivateTestingModule[className]:ConvivaPrivateLoader.hasOwnProperty(className)?ConvivaPrivateLoader[className]:null}function importConvivaPrivateProgram(fromWhere,fromWhereName){var p,res="";for(p in fromWhere)fromWhere.hasOwnProperty(p)&&(res+="var "+p+"="+__id(fromWhereName)+"."+p+";");return res}function STAT_INIT(){return"STAT_INIT"}function statInit(cls,clsname){cls.call(STAT_INIT),registerName(cls,clsname)}function defPubMeth(obj,name,m){obj!=STAT_INIT&&(void 0==obj[name]?obj[name]=m:obj["super_"+name]=m)}function defPrivMeth(obj,name,m){obj!=STAT_INIT&&(obj[name]=m)}function defStatMeth(obj,cls,name,m){obj==STAT_INIT&&(cls[name]=m)}function defGet(obj,name,m){obj!=STAT_INIT&&("undefined"!=typeof Object.defineProperty?Object.defineProperty(obj,name,{configurable:!0,enumerable:!0,get:m}):obj.__defineGetter__(name,m))}function defSet(obj,name,m){obj!=STAT_INIT&&("undefined"!=typeof Object.defineProperty?Object.defineProperty(obj,name,{configurable:!0,set:m}):obj.__defineSetter__(name,m))}function defStatGet(obj,cls,name,m){obj==STAT_INIT&&defGet(cls,name,m)}function defStatSet(obj,cls,name,m){obj==STAT_INIT&&defSet(cls,name,m)}function slIsArray(inObj){return inObj.constructor==Array||"undefined"!=typeof inObj.length}function slForEachPropValue(a,f){slIsArray(a);if(slIsArray(a))for(var i=0;i<a.length;i++)f(a[i]);else for(var p in a)a.hasOwnProperty(p)&&f(a[p])}function slForEachProp(a,f){if(slIsArray(a))for(var i=0;i<a.length;i++)f(i);else for(var p in a)a.hasOwnProperty(p)&&f(p)}function declTestClass(obj,name,cls,meta){obj==STAT_INIT&&jstest.DeclareTestClass(name,cls,meta)}function declTestMethod(obj,clsname,mname,mcode,meta){obj==STAT_INIT?jstest.DeclareTestMethod(clsname,mname,meta):jstest.SetTestMethodClosure(clsname,mname,mcode)}function sluint(){sluint.two32=4294967296,sluint.Cast=function(v){var vi=parseInt(v);return vi>sluint.MaxValue?vi%=sluint.two32:vi<0&&(vi=-vi%sluint.two32,vi=sluint.two32-vi),vi},sluint.uintRegex=new RegExp("^[0-9]+$"),sluint.Parse=function(v){return Lang.parseChecker(v,sluint.uintRegex),sluint.Cast(v)},sluint.MaxValue=sluint.two32-1,sluint.MinValue=0}function slint(){slint.Cast=function(v){var vu=sluint.Cast(v);return vu>slint.MaxValue&&(vu-=sluint.two32),vu},slint.intRegex=new RegExp("^[+-]?[0-9]+$"),slint.Parse=function(v){return Lang.parseChecker(v,slint.intRegex),slint.Cast(v)},slint.MaxValue=2147483647,slint.MinValue=-2147483648}function Int64(){function __constr(){_s._l=0,_s._h=0}function __fromUnsignedInt(i){var res=new Int64;return res._h=0,res._l=i,res}function __fromInt(i){var res=new Int64;return i>=0?(res._h=0,res._l=sluint.Cast(i)):(res._h=-1,res._l=sluint.Cast(i)),res}function __fromNumber(n){var l1=n%Int64.TWO_TO_32;l1<0&&(l1=Number(sluint.MaxValue)+1+l1);var res=new Int64;return res._l=sluint.Cast(l1+.5),res._h=slint.Cast((n-l1)/Int64.TWO_TO_32),res}function __asNumber(){return Number(_s._h)*Int64.TWO_TO_32+Number(_s._l)}var _s=this;_s==STAT_INIT&&(Int64.TWO_TO_32=4294967296),defStatMeth(_s,Int64,"fromUnsignedInt",__fromUnsignedInt),defStatMeth(_s,Int64,"fromInt",__fromInt),defStatMeth(_s,Int64,"fromNumber",__fromNumber),defGet(_s,"asNumber",__asNumber),_s!=STAT_INIT&&(this.toString=function(){return _s.asNumber.toString()}),_s!=STAT_INIT&&__constr.apply(this,arguments)}function UInt64(){function __constr(){Int64.call(_s),_s._l=0,_s._h=0}function __fromUnsignedInt(i){var res=new UInt64;return res._h=0,res._l=i,res}function __fromNumber(n){var res=new UInt64;return res._h=Math.floor(n/Int64.TWO_TO_32),res._l=n%Int64.TWO_TO_32,res}var _s=this;defStatMeth(_s,UInt64,"fromUnsignedInt",__fromUnsignedInt),defStatMeth(_s,UInt64,"fromNumber",__fromNumber),_s!=STAT_INIT&&__constr.apply(arguments)}function CandidateStream(){function _constr(id,bitrate,resource){_s.id=id,_s.bitrate=bitrate,_s.resource=resource}function __Cleanup(){_s.id=null,_s.bitrate=0,_s.resource=null}function __get_id(){return _s.__auto_id}function __set_id(value){_s.__auto_id=value}function __get_bitrate(){return _s.__auto_bitrate}function __set_bitrate(value){_s.__auto_bitrate=value}function __get_resource(){return _s.__auto_resource}function __set_resource(value){_s.__auto_resource=value}function __CheckValidity(){return null!=_s.id&&"string"!=typeof _s.id?"CandidateStream.id is not a string":null!=_s.bitrate&&"number"!=typeof _s.bitrate?"CandidateStream.bitrate is not an int":null!=_s.resource&&"string"!=typeof _s.resource?"CandidateStream.resource is not a string":null}function __ConstructClone(fromObj){if(null==fromObj)return null;var res=new CandidateStream("",(-1),null);return res.id=NativeLang.GetStringField("id",fromObj),res.bitrate=slint.Cast(NativeLang.GetField("bitrate",fromObj)),res.resource=NativeLang.GetStringField("resource",fromObj),res}var _s=this;defPubMeth(_s,"Cleanup",__Cleanup),defPubMeth(_s,"Cleanup",__Cleanup),_s!=STAT_INIT&&(_s.__auto_id=void 0),defGet(_s,"id",__get_id),defGet(_s,"id",__get_id),defSet(_s,"id",__set_id),defSet(_s,"id",__set_id),_s!=STAT_INIT&&(_s.__auto_bitrate=void 0),defGet(_s,"bitrate",__get_bitrate),defGet(_s,"bitrate",__get_bitrate),defSet(_s,"bitrate",__set_bitrate),defSet(_s,"bitrate",__set_bitrate),_s!=STAT_INIT&&(_s.__auto_resource=void 0),defGet(_s,"resource",__get_resource),defGet(_s,"resource",__get_resource),defSet(_s,"resource",__set_resource),defSet(_s,"resource",__set_resource),defPubMeth(_s,"CheckValidity",__CheckValidity),defPubMeth(_s,"CheckValidity",__CheckValidity),defStatMeth(_s,CandidateStream,"ConstructClone",__ConstructClone),defStatMeth(_s,CandidateStream,"ConstructClone",__ConstructClone),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function ConvivaContentInfo(){function __get_tags(){return Lang.StringDictionaryToRepr(_s._tags)}function __set_tags(value){_s._tags=Lang.DictionaryFromRepr(value)}function __get_isLive(){return _s._isLive}function __set_isLive(value){if("true"===value&&(value=!0),"false"===value&&(value=!1),value!==!0&&value!==!1){var utils=Utils.getInstance();utils.err("Invalid value for ConvivaContentInfo.isLive, expected boolean. Defaulting to false."),value=!1}_s._isLive=value}function _constr(assetName,tags){_s.assetName=assetName,_s.tags=tags,null==_s._tags&&(_s._tags=new DictionaryCS)}var _s=this;_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_AKAMAI="AKAMAI"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_AMAZON="AMAZON"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_ATT="ATT"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_BITGRAVITY="BITGRAVITY"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_BT="BT"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_CDNETWORKS="CDNETWORKS"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_CHINACACHE="CHINACACHE"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_EDGECAST="EDGECAST"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_HIGHWINDS="HIGHWINDS"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_INTERNAP="INTERNAP"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_LEVEL3="LEVEL3"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_LIMELIGHT="LIMELIGHT"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_OCTOSHAPE="OCTOSHAPE"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_SWARMCAST="SWARMCAST"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_VELOCIX="VELOCIX"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_TELEFONICA="TELEFONICA"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_MICROSOFT="MICROSOFT"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_CDNVIDEO="CDNVIDEO"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_QBRICK="QBRICK"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_NGENIX="NGENIX"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_IPONLY="IPONLY"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_TALKTALK="TALKTALK"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_INHOUSE="INHOUSE"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_COMCAST="COMCAST"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_NICE="NICE"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_TELENOR="TELENOR"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_FASTLY="FASTLY"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_TELIA="TELIA"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_CHINANETCENTER="CHINANETCENTER"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_MIRRORIMAGE="MIRRORIMAGE"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_SONIC="SONIC"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_ATLAS="ATLAS"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_OOYALA="OOYALA"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_TATA="TATA"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_GOOGLE="GOOGLE"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_INSTARTLOGIC="INSTARTLOGIC"),_s==STAT_INIT&&(ConvivaContentInfo.CDN_NAME_OTHER="OTHER"),_s==STAT_INIT&&(ConvivaContentInfo.FRAMEWORK_NAME_BRIGHTCOVE="Brightcove"),_s==STAT_INIT&&(ConvivaContentInfo.FRAMEWORK_NAME_KALTURA="Kaltura"),_s==STAT_INIT&&(ConvivaContentInfo.FRAMEWORK_NAME_OOYALA="Ooyala"),_s==STAT_INIT&&(ConvivaContentInfo.FRAMEWORK_NAME_OSMF="OSMF"),_s==STAT_INIT&&(ConvivaContentInfo.FRAMEWORK_NAME_THE_PLATFORM="thePlatform"),_s==STAT_INIT&&(ConvivaContentInfo.DEVICE_TYPE_CONSOLE="Console"),_s==STAT_INIT&&(ConvivaContentInfo.DEVICE_TYPE_MOBILE="Mobile"),_s==STAT_INIT&&(ConvivaContentInfo.DEVICE_TYPE_PC="PC"),_s==STAT_INIT&&(ConvivaContentInfo.DEVICE_TYPE_SET_TOP_BOX="Settop"),_s==STAT_INIT&&(ConvivaContentInfo.PLUGIN_NAME_KALTURA="ConvivaKalturaPlugin"),_s==STAT_INIT&&(ConvivaContentInfo.NO_RESOURCE="no_resource"),_s!=STAT_INIT&&(_s.assetName=void 0),_s!=STAT_INIT&&(_s._tags=null),defGet(_s,"tags",__get_tags),defGet(_s,"tags",__get_tags),defSet(_s,"tags",__set_tags),defSet(_s,"tags",__set_tags),_s!=STAT_INIT&&(_s.defaultReportingBitrateKbps=-1),_s!=STAT_INIT&&(_s.defaultReportingCdnName=ConvivaContentInfo.CDN_NAME_OTHER),_s!=STAT_INIT&&(_s.defaultReportingResource=null),_s!=STAT_INIT&&(_s.frameworkName=null),_s!=STAT_INIT&&(_s.frameworkVersion=null),_s!=STAT_INIT&&(_s.pluginName=null),_s!=STAT_INIT&&(_s.pluginVersion=null),_s!=STAT_INIT&&(_s.viewerId=null),_s!=STAT_INIT&&(_s.deviceId=null),_s!=STAT_INIT&&(_s.deviceType=null),_s!=STAT_INIT&&(_s.playerName=null),_s!=STAT_INIT&&(_s.streamUrl=null),_s!=STAT_INIT&&(_s._isLive=!1),defGet(_s,"isLive",__get_isLive),defGet(_s,"isLive",__get_isLive),defSet(_s,"isLive",__set_isLive),defSet(_s,"isLive",__set_isLive),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_AKAMAI",ConvivaContentInfo.CDN_NAME_AKAMAI),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_AMAZON",ConvivaContentInfo.CDN_NAME_AMAZON),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_ATLAS",ConvivaContentInfo.CDN_NAME_ATLAS),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_ATT",ConvivaContentInfo.CDN_NAME_ATT),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_BITGRAVITY",ConvivaContentInfo.CDN_NAME_BITGRAVITY),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_BT",ConvivaContentInfo.CDN_NAME_BT),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_CDNETWORKS",ConvivaContentInfo.CDN_NAME_CDNETWORKS),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_CDNVIDEO",ConvivaContentInfo.CDN_NAME_CDNVIDEO),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_CHINACACHE",ConvivaContentInfo.CDN_NAME_CHINACACHE),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_CHINANETCENTER",ConvivaContentInfo.CDN_NAME_CHINANETCENTER),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_COMCAST",ConvivaContentInfo.CDN_NAME_COMCAST),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_EDGECAST",ConvivaContentInfo.CDN_NAME_EDGECAST),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_FASTLY",ConvivaContentInfo.CDN_NAME_FASTLY),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_GOOGLE",ConvivaContentInfo.CDN_NAME_GOOGLE),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_HIGHWINDS",ConvivaContentInfo.CDN_NAME_HIGHWINDS),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_INHOUSE",ConvivaContentInfo.CDN_NAME_INHOUSE),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_INSTARTLOGIC",ConvivaContentInfo.CDN_NAME_INSTARTLOGIC),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_INTERNAP",ConvivaContentInfo.CDN_NAME_INTERNAP),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_IPONLY",ConvivaContentInfo.CDN_NAME_IPONLY),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_LEVEL3",ConvivaContentInfo.CDN_NAME_LEVEL3),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_LIMELIGHT",ConvivaContentInfo.CDN_NAME_LIMELIGHT),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_MICROSOFT",ConvivaContentInfo.CDN_NAME_MICROSOFT),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_MIRRORIMAGE",ConvivaContentInfo.CDN_NAME_MIRRORIMAGE),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_NGENIX",ConvivaContentInfo.CDN_NAME_NGENIX),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_NICE",ConvivaContentInfo.CDN_NAME_NICE),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_OCTOSHAPE",ConvivaContentInfo.CDN_NAME_OCTOSHAPE),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_OOYALA",ConvivaContentInfo.CDN_NAME_OOYALA),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_OTHER",ConvivaContentInfo.CDN_NAME_OTHER),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_QBRICK",ConvivaContentInfo.CDN_NAME_QBRICK),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_SONIC",ConvivaContentInfo.CDN_NAME_SONIC),
defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_SWARMCAST",ConvivaContentInfo.CDN_NAME_SWARMCAST),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_TALKTALK",ConvivaContentInfo.CDN_NAME_TALKTALK),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_TATA",ConvivaContentInfo.CDN_NAME_TATA),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_TELEFONICA",ConvivaContentInfo.CDN_NAME_TELEFONICA),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_TELENOR",ConvivaContentInfo.CDN_NAME_TELENOR),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_TELIA",ConvivaContentInfo.CDN_NAME_TELIA),defStatMeth(_s,ConvivaContentInfo,"CDN_NAME_VELOCIX",ConvivaContentInfo.CDN_NAME_VELOCIX),defStatMeth(_s,ConvivaContentInfo,"DEVICE_TYPE_CONSOLE",ConvivaContentInfo.DEVICE_TYPE_CONSOLE),defStatMeth(_s,ConvivaContentInfo,"DEVICE_TYPE_MOBILE",ConvivaContentInfo.DEVICE_TYPE_MOBILE),defStatMeth(_s,ConvivaContentInfo,"DEVICE_TYPE_PC",ConvivaContentInfo.DEVICE_TYPE_PC),defStatMeth(_s,ConvivaContentInfo,"DEVICE_TYPE_SET_TOP_BOX",ConvivaContentInfo.DEVICE_TYPE_SET_TOP_BOX),defStatMeth(_s,ConvivaContentInfo,"FRAMEWORK_NAME_BRIGHTCOVE",ConvivaContentInfo.FRAMEWORK_NAME_BRIGHTCOVE),defStatMeth(_s,ConvivaContentInfo,"FRAMEWORK_NAME_KALTURA",ConvivaContentInfo.FRAMEWORK_NAME_KALTURA),defStatMeth(_s,ConvivaContentInfo,"FRAMEWORK_NAME_OOYALA",ConvivaContentInfo.FRAMEWORK_NAME_OOYALA),defStatMeth(_s,ConvivaContentInfo,"FRAMEWORK_NAME_OSMF",ConvivaContentInfo.FRAMEWORK_NAME_OSMF),defStatMeth(_s,ConvivaContentInfo,"FRAMEWORK_NAME_THE_PLATFORM",ConvivaContentInfo.FRAMEWORK_NAME_THE_PLATFORM),defStatMeth(_s,ConvivaContentInfo,"NO_RESOURCE",ConvivaContentInfo.NO_RESOURCE),defStatMeth(_s,ConvivaContentInfo,"PLUGIN_NAME_KALTURA",ConvivaContentInfo.PLUGIN_NAME_KALTURA),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function ConvivaStreamerProxy(){function _constr(){}function __Cleanup(){null!=_s._notifiers&&_s._notifiers.Clear()}function __GetCapabilities(){return 0}function __GetPlayheadTimeMs(){return-1}function __GetIsPHTAccurate(){return!0}function __GetBufferLengthMs(){return-1}function __GetVideoBufferLengthMs(){return-1}function __GetAudioBufferLengthMs(){return-1}function __GetStartingBufferLengthMs(){return-1}function __SetStartingBufferLengthMs(ms){}function __GetIsStartingBufferFull(){return!1}function __GetRenderedFrameRate(){return-1}function __GetSourceFrameRate(){return-1}function __GetDroppedFrames(){return-1}function __GetCpuPercent(){return-1}function __GetMemoryAvailable(){return-1}function __GetCapacityKbps(resource){return-1}function __GetServerAddress(){return null}function __GetIsLive(){return ConvivaStreamerProxy.BOOLEAN_UNAVAILABLE}function __GetStreamerVersion(){return-1}function __FetchCandidateStreams(resource){}function __Play(destination){}function __GetApiVersion(){return ConvivaStreamerProxy.API_VERSION}function __SetMonitoringNotifier(notifier){if(null!=notifier){var previousNotifiers=_s._notifiers,newNotifiers=new ListCS;if(newNotifiers.Add(notifier),_s._notifiers=newNotifiers,null!=_s._notifiers){_s.isProxyInitialized&&notifier(ConvivaStreamerProxy.REASON_PROXYINITIALIZED,null),_s.SetDownloadStateChange(StreamInfo.VIDEO,ConvivaStreamerProxy.DOWNLOADSTATE_ACTIVE),_s.SetDownloadStateChange(StreamInfo.AUDIO,ConvivaStreamerProxy.DOWNLOADSTATE_ACTIVE);var newInfo=_s._stream;_s._stream=new StreamInfo((-1),ConvivaContentInfo.CDN_NAME_OTHER,ConvivaContentInfo.NO_RESOURCE,(-1),(-1),(-1)),_s.SetStream(newInfo);var newState=_s._playingState;_s._playingState=ConvivaStreamerProxy.UNKNOWN,_s.SetPlayingState(newState);var newMetadata=_s._lastMetadata;_s._lastMetadata=null,_s.SetMetadata(newMetadata);for(var _for_array_1=_s._pendingErrors.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var strErr=_for_array_1[_for_idx_2];_s.SetError(strErr)}var newStreams=_s._availableStreams;_s._availableStreams=null,_s.SetAvailableStreams(newStreams);var newChunkDownloadStatus=_s._currentLoadingStatus;_s._currentLoadingStatus=null,_s.SetLoadingStatus(newChunkDownloadStatus);var newDiplayWidth=_s._displayWidth,newDisplayHeight=_s._displayWidth;_s._displayWidth=-1,_s._displayHeight=-1,_s.SetDisplaySize(newDiplayWidth,newDisplayHeight)}previousNotifiers.Add(notifier),_s._notifiers=previousNotifiers}}function __GetLoadingStatus(){return _s._currentLoadingStatus}function __GetPlayingState(){return _s._playingState}function __GetBitrateKbps(){return _s._stream.bitrateKbps}function __GetCdnName(){return _s._stream.cdnName}function __GetResource(){return _s._stream.resource}function __GetStream(){return _s._stream}function __GetStreams(){return null}function __GetLastError(){return _s._lastError}function __GetLastMetadata(){return _s._lastMetadata}function __GetDisplayWidth(){return _s._displayWidth}function __GetDisplayHeight(){return _s._displayHeight}function __GetStreamerType(){return null}function __GetLoadedBytes(){return-1}function __SetDownloadStateChange(type,state){var downloadStateChange=new ListCS;downloadStateChange.Add(type),downloadStateChange.Add(state);for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_DOWNLOADSTATECHANGE,downloadStateChange)}}function __SetStream(updatedStream){if(updatedStream.bitrateKbps<=-2&&(updatedStream.bitrateKbps=_s._stream.bitrateKbps),null==updatedStream.cdnName&&(updatedStream.cdnName=_s._stream.cdnName),null==updatedStream.resource&&(updatedStream.resource=_s._stream.resource),!_s._stream.equals(updatedStream))for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_STREAMINFOCHANGE,updatedStream)}_s._stream=updatedStream}function __SetError(error){if(_s._lastError=error,null!=_s._notifiers&&_s._notifiers.Count>0)for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_ERRORCHANGE,error)}else _s._pendingErrors.Add(error)}function __SetMetadata(metadata){if(_s._lastMetadata=metadata,null!=metadata)for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_METADATACHANGE,metadata)}}function __Log(message){for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_LOG,message)}}function __LogError(message){for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_LOG,"ERROR:"+message)}}function __GetTotalLoadedBytes(){return null}function __SetLoadingStatus(loadingStatus){if(_s._currentLoadingStatus=loadingStatus,null!=loadingStatus)for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_LOADINGSTATUSCHANGE,loadingStatus)}}function __SetPlayingState(newState){if(newState!=_s._playingState)for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_PLAYINGSTATECHANGE,newState)}_s._playingState=newState}function __SetBitrateKbps(updatedBitrateKbps){var updatedStream=new StreamInfo(updatedBitrateKbps,null,null,(-1),(-1),(-1));_s.SetStream(updatedStream)}function __SetCdnName(updatedCdnName){var updatedStream=new StreamInfo((-2),updatedCdnName,null,(-1),(-1),(-1));_s.SetStream(updatedStream)}function __SetResource(updatedResource){var updatedStream=new StreamInfo((-2),null,updatedResource,(-1),(-1),(-1));_s.SetStream(updatedStream)}function __SetDisplaySize(displayWidth,displayHeight){if(displayWidth!=-1&&displayHeight!=-1){_s._displayWidth=displayWidth,_s._displayHeight=displayHeight;var displaySize=new ListCS;displaySize.Add(displayWidth),displaySize.Add(displayHeight);for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_DISPLAYSIZECHANGE,displaySize)}}}function __SetAvailableStreams(streams){if(_s._availableStreams=streams,null!=streams)for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_AVAILABLESTREAMINFOCHANGE,streams)}}function __SetProxyInitialized(){if(!_s.isProxyInitialized){_s.isProxyInitialized=!0;for(var _for_array_1=_s._notifiers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var notifier=_for_array_1[_for_idx_2];_s.notifyListeners(notifier,ConvivaStreamerProxy.REASON_PROXYINITIALIZED,null)}}}function __notifyListeners(notifier,reason,arg){try{notifier(reason,arg)}catch(e){notifier(ConvivaStreamerProxy.REASON_LOG,"ConvivaStreamerProxy : uncaught exception "+e)}}var _s=this;_s!=STAT_INIT&&(_s._notifiers=new ListCS),_s!=STAT_INIT&&(_s._stream=new StreamInfo((-1),ConvivaContentInfo.CDN_NAME_OTHER,ConvivaContentInfo.NO_RESOURCE,(-1),(-1),(-1))),_s!=STAT_INIT&&(_s._playingState=ConvivaStreamerProxy.UNKNOWN),_s!=STAT_INIT&&(_s._lastMetadata=null),_s!=STAT_INIT&&(_s._lastError=null),_s!=STAT_INIT&&(_s._pendingErrors=new ListCS),_s!=STAT_INIT&&(_s._displayWidth=-1),_s!=STAT_INIT&&(_s._displayHeight=-1),_s!=STAT_INIT&&(_s._availableStreams=null),_s!=STAT_INIT&&(_s._currentLoadingStatus=null),_s!=STAT_INIT&&(_s.isProxyInitialized=void 0),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_PLAYINGSTATECHANGE="PlayingStateChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_STREAMINFOCHANGE="StreamInfoChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_AVAILABLESTREAMINFOCHANGE="AvailableStreamInfoChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_PROXYINITIALIZED="ProxyInitialized"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_METADATACHANGE="MetadataChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_LOADINGSTATUSCHANGE="LoadingStatusChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_DOWNLOADSTATECHANGE="DownloadStateChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_DISPLAYSIZECHANGE="DisplaySizeChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_ERRORCHANGE="ErrorChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_LOG="Log"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_RESOURCE_ERROR="ResourceError"),_s==STAT_INIT&&(ConvivaStreamerProxy.REASON_PRESENTATION_CHANGE="PresentationChange"),_s==STAT_INIT&&(ConvivaStreamerProxy.STOPPED="STOPPED"),_s==STAT_INIT&&(ConvivaStreamerProxy.PLAYING="PLAYING"),_s==STAT_INIT&&(ConvivaStreamerProxy.BUFFERING="BUFFERING"),_s==STAT_INIT&&(ConvivaStreamerProxy.PAUSED="PAUSED"),_s==STAT_INIT&&(ConvivaStreamerProxy.NOT_MONITORED="NOT_MONITORED"),_s==STAT_INIT&&(ConvivaStreamerProxy.ERROR="ERROR"),_s==STAT_INIT&&(ConvivaStreamerProxy.UNKNOWN="UNKNOWN"),_s==STAT_INIT&&(ConvivaStreamerProxy.DOWNLOADSTATE_ACTIVE=1),_s==STAT_INIT&&(ConvivaStreamerProxy.DOWNLOADSTATE_INACTIVE=0),_s==STAT_INIT&&(ConvivaStreamerProxy.METADATA_DURATION="duration"),_s==STAT_INIT&&(ConvivaStreamerProxy.METADATA_ENCODED_FRAMERATE="framerate"),_s==STAT_INIT&&(ConvivaStreamerProxy.BOOLEAN_TRUE=1),_s==STAT_INIT&&(ConvivaStreamerProxy.BOOLEAN_FALSE=-1),_s==STAT_INIT&&(ConvivaStreamerProxy.BOOLEAN_UNAVAILABLE=0),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_VIDEO=1),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_QUALITY_METRICS=2),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_BITRATE_METRICS=4),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_BITRATE_SWITCHING=8),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_CDN_SWITCHING=16),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_BITRATE_EXTERNAL=16),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_SOURCE_HTTP=32),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_SOURCE_CHUNKED=64),_s==STAT_INIT&&(ConvivaStreamerProxy.CAPABILITY_SOURCE_STREAMING=128),defPubMeth(_s,"Cleanup",__Cleanup),defPubMeth(_s,"Cleanup",__Cleanup),defPubMeth(_s,"GetCapabilities",__GetCapabilities),defPubMeth(_s,"GetCapabilities",__GetCapabilities),defPubMeth(_s,"GetPlayheadTimeMs",__GetPlayheadTimeMs),defPubMeth(_s,"GetPlayheadTimeMs",__GetPlayheadTimeMs),defPubMeth(_s,"GetIsPHTAccurate",__GetIsPHTAccurate),defPubMeth(_s,"GetIsPHTAccurate",__GetIsPHTAccurate),defPubMeth(_s,"GetBufferLengthMs",__GetBufferLengthMs),defPubMeth(_s,"GetBufferLengthMs",__GetBufferLengthMs),defPubMeth(_s,"GetVideoBufferLengthMs",__GetVideoBufferLengthMs),defPubMeth(_s,"GetVideoBufferLengthMs",__GetVideoBufferLengthMs),defPubMeth(_s,"GetAudioBufferLengthMs",__GetAudioBufferLengthMs),defPubMeth(_s,"GetAudioBufferLengthMs",__GetAudioBufferLengthMs),defPubMeth(_s,"GetStartingBufferLengthMs",__GetStartingBufferLengthMs),defPubMeth(_s,"GetStartingBufferLengthMs",__GetStartingBufferLengthMs),defPubMeth(_s,"SetStartingBufferLengthMs",__SetStartingBufferLengthMs),defPubMeth(_s,"SetStartingBufferLengthMs",__SetStartingBufferLengthMs),defPubMeth(_s,"GetIsStartingBufferFull",__GetIsStartingBufferFull),defPubMeth(_s,"GetIsStartingBufferFull",__GetIsStartingBufferFull),defPubMeth(_s,"GetRenderedFrameRate",__GetRenderedFrameRate),defPubMeth(_s,"GetRenderedFrameRate",__GetRenderedFrameRate),defPubMeth(_s,"GetSourceFrameRate",__GetSourceFrameRate),defPubMeth(_s,"GetSourceFrameRate",__GetSourceFrameRate),defPubMeth(_s,"GetDroppedFrames",__GetDroppedFrames),defPubMeth(_s,"GetDroppedFrames",__GetDroppedFrames),defPubMeth(_s,"GetCpuPercent",__GetCpuPercent),defPubMeth(_s,"GetCpuPercent",__GetCpuPercent),defPubMeth(_s,"GetMemoryAvailable",__GetMemoryAvailable),defPubMeth(_s,"GetMemoryAvailable",__GetMemoryAvailable),defPubMeth(_s,"GetCapacityKbps",__GetCapacityKbps),defPubMeth(_s,"GetCapacityKbps",__GetCapacityKbps),defPubMeth(_s,"GetServerAddress",__GetServerAddress),defPubMeth(_s,"GetServerAddress",__GetServerAddress),defPubMeth(_s,"GetIsLive",__GetIsLive),defPubMeth(_s,"GetIsLive",__GetIsLive),defPubMeth(_s,"GetStreamerVersion",__GetStreamerVersion),defPubMeth(_s,"GetStreamerVersion",__GetStreamerVersion),defPubMeth(_s,"FetchCandidateStreams",__FetchCandidateStreams),defPubMeth(_s,"FetchCandidateStreams",__FetchCandidateStreams),defPubMeth(_s,"Play",__Play),defPubMeth(_s,"Play",__Play),defPubMeth(_s,"GetApiVersion",__GetApiVersion),defPubMeth(_s,"GetApiVersion",__GetApiVersion),_s==STAT_INIT&&(ConvivaStreamerProxy.API_VERSION=1),defPubMeth(_s,"SetMonitoringNotifier",__SetMonitoringNotifier),defPubMeth(_s,"SetMonitoringNotifier",__SetMonitoringNotifier),defPubMeth(_s,"GetLoadingStatus",__GetLoadingStatus),defPubMeth(_s,"GetLoadingStatus",__GetLoadingStatus),defPubMeth(_s,"GetPlayingState",__GetPlayingState),defPubMeth(_s,"GetPlayingState",__GetPlayingState),defPubMeth(_s,"GetBitrateKbps",__GetBitrateKbps),defPubMeth(_s,"GetBitrateKbps",__GetBitrateKbps),defPubMeth(_s,"GetCdnName",__GetCdnName),defPubMeth(_s,"GetCdnName",__GetCdnName),defPubMeth(_s,"GetResource",__GetResource),defPubMeth(_s,"GetResource",__GetResource),defPubMeth(_s,"GetStream",__GetStream),defPubMeth(_s,"GetStream",__GetStream),defPubMeth(_s,"GetStreams",__GetStreams),defPubMeth(_s,"GetStreams",__GetStreams),defPubMeth(_s,"GetLastError",__GetLastError),defPubMeth(_s,"GetLastError",__GetLastError),defPubMeth(_s,"GetLastMetadata",__GetLastMetadata),defPubMeth(_s,"GetLastMetadata",__GetLastMetadata),defPubMeth(_s,"GetDisplayWidth",__GetDisplayWidth),defPubMeth(_s,"GetDisplayWidth",__GetDisplayWidth),defPubMeth(_s,"GetDisplayHeight",__GetDisplayHeight),defPubMeth(_s,"GetDisplayHeight",__GetDisplayHeight),defPubMeth(_s,"GetStreamerType",__GetStreamerType),defPubMeth(_s,"GetStreamerType",__GetStreamerType),defPubMeth(_s,"GetLoadedBytes",__GetLoadedBytes),defPubMeth(_s,"GetLoadedBytes",__GetLoadedBytes),defPubMeth(_s,"SetDownloadStateChange",__SetDownloadStateChange),defPubMeth(_s,"SetDownloadStateChange",__SetDownloadStateChange),defPubMeth(_s,"SetStream",__SetStream),defPubMeth(_s,"SetStream",__SetStream),defPubMeth(_s,"SetError",__SetError),defPubMeth(_s,"SetError",__SetError),defPubMeth(_s,"SetMetadata",__SetMetadata),defPubMeth(_s,"SetMetadata",__SetMetadata),defPubMeth(_s,"Log",__Log),defPubMeth(_s,"Log",__Log),defPubMeth(_s,"LogError",__LogError),defPubMeth(_s,"LogError",__LogError),defPubMeth(_s,"GetTotalLoadedBytes",__GetTotalLoadedBytes),defPubMeth(_s,"GetTotalLoadedBytes",__GetTotalLoadedBytes),defPubMeth(_s,"SetLoadingStatus",__SetLoadingStatus),defPubMeth(_s,"SetLoadingStatus",__SetLoadingStatus),defPubMeth(_s,"SetPlayingState",__SetPlayingState),defPubMeth(_s,"SetPlayingState",__SetPlayingState),defPubMeth(_s,"SetBitrateKbps",__SetBitrateKbps),defPubMeth(_s,"SetBitrateKbps",__SetBitrateKbps),defPubMeth(_s,"SetCdnName",__SetCdnName),defPubMeth(_s,"SetCdnName",__SetCdnName),defPubMeth(_s,"SetResource",__SetResource),defPubMeth(_s,"SetResource",__SetResource),defPubMeth(_s,"SetDisplaySize",__SetDisplaySize),defPubMeth(_s,"SetDisplaySize",__SetDisplaySize),defPubMeth(_s,"SetAvailableStreams",__SetAvailableStreams),defPubMeth(_s,"SetAvailableStreams",__SetAvailableStreams),defPubMeth(_s,"SetProxyInitialized",__SetProxyInitialized),defPubMeth(_s,"SetProxyInitialized",__SetProxyInitialized),defPrivMeth(_s,"notifyListeners",__notifyListeners),defStatMeth(_s,ConvivaStreamerProxy,"API_VERSION",ConvivaStreamerProxy.API_VERSION),defStatMeth(_s,ConvivaStreamerProxy,"BOOLEAN_FALSE",ConvivaStreamerProxy.BOOLEAN_FALSE),defStatMeth(_s,ConvivaStreamerProxy,"BOOLEAN_TRUE",ConvivaStreamerProxy.BOOLEAN_TRUE),defStatMeth(_s,ConvivaStreamerProxy,"BOOLEAN_UNAVAILABLE",ConvivaStreamerProxy.BOOLEAN_UNAVAILABLE),defStatMeth(_s,ConvivaStreamerProxy,"BUFFERING",ConvivaStreamerProxy.BUFFERING),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_BITRATE_EXTERNAL",ConvivaStreamerProxy.CAPABILITY_BITRATE_EXTERNAL),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_BITRATE_METRICS",ConvivaStreamerProxy.CAPABILITY_BITRATE_METRICS),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_BITRATE_SWITCHING",ConvivaStreamerProxy.CAPABILITY_BITRATE_SWITCHING),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_CDN_SWITCHING",ConvivaStreamerProxy.CAPABILITY_CDN_SWITCHING),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_QUALITY_METRICS",ConvivaStreamerProxy.CAPABILITY_QUALITY_METRICS),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_SOURCE_CHUNKED",ConvivaStreamerProxy.CAPABILITY_SOURCE_CHUNKED),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_SOURCE_HTTP",ConvivaStreamerProxy.CAPABILITY_SOURCE_HTTP),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_SOURCE_STREAMING",ConvivaStreamerProxy.CAPABILITY_SOURCE_STREAMING),defStatMeth(_s,ConvivaStreamerProxy,"CAPABILITY_VIDEO",ConvivaStreamerProxy.CAPABILITY_VIDEO),defStatMeth(_s,ConvivaStreamerProxy,"DOWNLOADSTATE_ACTIVE",ConvivaStreamerProxy.DOWNLOADSTATE_ACTIVE),defStatMeth(_s,ConvivaStreamerProxy,"DOWNLOADSTATE_INACTIVE",ConvivaStreamerProxy.DOWNLOADSTATE_INACTIVE),defStatMeth(_s,ConvivaStreamerProxy,"ERROR",ConvivaStreamerProxy.ERROR),defStatMeth(_s,ConvivaStreamerProxy,"METADATA_DURATION",ConvivaStreamerProxy.METADATA_DURATION),defStatMeth(_s,ConvivaStreamerProxy,"METADATA_ENCODED_FRAMERATE",ConvivaStreamerProxy.METADATA_ENCODED_FRAMERATE),defStatMeth(_s,ConvivaStreamerProxy,"NOT_MONITORED",ConvivaStreamerProxy.NOT_MONITORED),defStatMeth(_s,ConvivaStreamerProxy,"PAUSED",ConvivaStreamerProxy.PAUSED),defStatMeth(_s,ConvivaStreamerProxy,"PLAYING",ConvivaStreamerProxy.PLAYING),defStatMeth(_s,ConvivaStreamerProxy,"REASON_AVAILABLESTREAMINFOCHANGE",ConvivaStreamerProxy.REASON_AVAILABLESTREAMINFOCHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_DISPLAYSIZECHANGE",ConvivaStreamerProxy.REASON_DISPLAYSIZECHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_DOWNLOADSTATECHANGE",ConvivaStreamerProxy.REASON_DOWNLOADSTATECHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_ERRORCHANGE",ConvivaStreamerProxy.REASON_ERRORCHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_LOADINGSTATUSCHANGE",ConvivaStreamerProxy.REASON_LOADINGSTATUSCHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_LOG",ConvivaStreamerProxy.REASON_LOG),defStatMeth(_s,ConvivaStreamerProxy,"REASON_METADATACHANGE",ConvivaStreamerProxy.REASON_METADATACHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_PLAYINGSTATECHANGE",ConvivaStreamerProxy.REASON_PLAYINGSTATECHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_PRESENTATION_CHANGE",ConvivaStreamerProxy.REASON_PRESENTATION_CHANGE),defStatMeth(_s,ConvivaStreamerProxy,"REASON_PROXYINITIALIZED",ConvivaStreamerProxy.REASON_PROXYINITIALIZED),defStatMeth(_s,ConvivaStreamerProxy,"REASON_RESOURCE_ERROR",ConvivaStreamerProxy.REASON_RESOURCE_ERROR),defStatMeth(_s,ConvivaStreamerProxy,"REASON_STREAMINFOCHANGE",ConvivaStreamerProxy.REASON_STREAMINFOCHANGE),defStatMeth(_s,ConvivaStreamerProxy,"STOPPED",ConvivaStreamerProxy.STOPPED),defStatMeth(_s,ConvivaStreamerProxy,"UNKNOWN",ConvivaStreamerProxy.UNKNOWN),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function LivePass(){function __init(customerKey){return LivePass.readyState?void LivePass._utils.log("LivePass.init(): already initialized."):(null==LivePass._utils&&(LivePass._utils=Utils.CreateUtils(null)),null==customerKey||0==customerKey.length?void LivePass._utils.err("LivePass.init(): invalid customerKey: "+customerKey):void LivePass._utils.runProtectedSync(function(){LivePass._settings=LivePass._utils.getSettings(),LivePass._toggleTracesUsed&&(LivePass._settings.enableLogging=LivePass._toggleTracesValue),LivePass._settings.clientInstanceId=LivePass._utils.randUInt(),LivePass._settings.customerKey=customerKey,LivePass._utils.log("LivePass.init(): url="+LivePass._settings.gatewayUrl+" customerKey="+LivePass._settings.customerKey),LivePass._utils.startFetchClientId(),PlayerStates.init(),LivePass._sessionFactory=new SessionFactory,LivePass.readyState=!0,LivePass._utils.log("LivePass.init(): done.")},"LivePass.init"))}function __initWithSettings(customerKey,settings){return LivePass.readyState?void LivePass._utils.log("LivePass.initWithSettings(): already initialized."):(LivePass._utils=Utils.CreateUtils(settings),void LivePass.init(customerKey))}function __cleanup(){null!=LivePass._utils&&LivePass._utils.runProtected(function(){LivePass._utils.log("LivePass.cleanup()"),null!=LivePass._sessionFactory&&LivePass._sessionFactory.cleanup(),LivePass._sessionFactory=null,LivePass._globalSessionId=-1,null!=LivePass._utils&&LivePass._utils.cleanup(),LivePass._utils=null,LivePass._settings=null},"LivePass.cleanup"),LivePass.readyState=!1}function __createSession(streamer,contentInfo,options){return LivePass.readyState?LivePass.createSessionWithGlobal(streamer,contentInfo,options,!1):(LivePass.ping("LivePass.createSession before LivePass.init"),-1)}function __createSessionWithGlobal(streamer,contentInfo,options,global){var sid=LivePass._sessionFactory.newSessionId();return LivePass._utils.runProtected(function(){LivePass._sessionFactory.makeSession(streamer,contentInfo,options,sid,global)},"LivePass.createSession"),sid}function __reportError(sessionId,errorMsg){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.reportError(StreamerError.makeUnscopedError(errorMsg,StreamerError.SEVERITY_FATAL))},"LivePass.reportError"):void LivePass.ping("LivePass.reportError before LivePass.init")}function __setBitrate(sessionId,bitrateKbps){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.setBitrate(bitrateKbps)},"LivePass.setBitrate"):void LivePass.ping("LivePass.setBitrate before LivePass.init")}function __setCurrentStreamMetadata(sessionId,metadata){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.setCurrentStreamMetadata(metadata)},"LivePass.setCurrentStreamMetadata"):void LivePass.ping("LivePass.setCurrentStreamMetadata before LivePass.init")}function __setCdnNameOrResource(sessionId,resource){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.setCdnNameOrResource(resource)},"LivePass.setCdnNameOrResource"):void LivePass.ping("LivePass.setCdnNameOrResource before LivePass.init")}function __detachStreamer(sessionId){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.detachStreamer()},"LivePass.detachStreamer"):void LivePass.ping("LivePass.detachStreamer before LivePass.init")}function __attachStreamer(sessionId,streamer){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.attachStreamer(streamer)},"LivePass.attachStreamer"):void LivePass.ping("LivePass.attachStreamer before LivePass.init")}function __sendSessionEvent(sessionId,eventName,eventAttributes){if(!LivePass.readyState)return void LivePass.ping("LivePass.sendSessionEvent before LivePass.init");var eventAttrDictCS=null;eventAttrDictCS=Lang.DictionaryFromRepr(eventAttributes),LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.sendCustomEvent(eventName,eventAttrDictCS)},"LivePass.sendSessionEvent")}function __sendEvent(eventName,eventAttributes){return LivePass.readyState?void LivePass._utils.runProtected(function(){if(LivePass._globalSessionId<0){var cci=new ConvivaContentInfo("",new DictionaryCS);LivePass._globalSessionId=LivePass.createSessionWithGlobal(null,cci,null,!0)}LivePass.sendSessionEvent(LivePass._globalSessionId,eventName,eventAttributes)},"LivePass.sendEvent"):void LivePass.ping("LivePass.sendEvent before LivePass.init")}function __cleanupSession(sessionId){return LivePass.readyState?void LivePass._utils.runProtected(function(){LivePass._sessionFactory.cleanupSession(sessionId)},"Livepass.cleanupSession"):void LivePass.ping("LivePass.cleanupSession before LivePass.init")}function __pauseJoinTime(sessionId){return LivePass.readyState?void LivePass.adStart(sessionId):void LivePass.ping("LivePass.pauseJoinTime before LivePass.init")}function __resumeJoinTime(sessionId){return LivePass.readyState?void LivePass.adEnd(sessionId):void LivePass.ping("LivePass.resumeJoinTime before LivePass.init")}function __adStart(sessionId){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.adStart()},"LivePass.adStart"):void LivePass.ping("LivePass.adStart before LivePass.init")}function __adEnd(sessionId){return LivePass.readyState?void LivePass._utils.runProtected(function(){var session=LivePass._sessionFactory.getSession(sessionId);null!=session&&session.adEnd()},"LivePass.adEnd"):void LivePass.ping("LivePass.adEnd before LivePass.init")}function __toggleTraces(b){LivePass._toggleTracesUsed=!0,null!=LivePass._settings?LivePass._settings.enableLogging=b:LivePass._toggleTracesValue=b}function __ping(msg){null!=LivePass._utils&&LivePass._utils.ping(msg)}var _s=this;_s==STAT_INIT&&(LivePass.READY="READY"),_s==STAT_INIT&&(LivePass.STREAM_SELECTION_SUCC=0),_s==STAT_INIT&&(LivePass.STREAM_SELECTION_FAILURE=1),_s==STAT_INIT&&(LivePass.STREAM_SELECTION_TIMEOUT=2),_s==STAT_INIT&&(LivePass.OPTION_EXTERNAL_BITRATE_REPORTING="externalBitrateReporting"),_s==STAT_INIT&&(LivePass.readyState=!1),_s==STAT_INIT&&(LivePass._settings=null),_s==STAT_INIT&&(LivePass._utils=null),_s==STAT_INIT&&(LivePass._sessionFactory=null),_s==STAT_INIT&&(LivePass._toggleTracesUsed=!1),_s==STAT_INIT&&(LivePass._toggleTracesValue=!1),_s==STAT_INIT&&(LivePass._globalSessionId=-1),defStatMeth(_s,LivePass,"init",__init),defStatMeth(_s,LivePass,"initWithSettings",__initWithSettings),defStatMeth(_s,LivePass,"cleanup",__cleanup),defStatMeth(_s,LivePass,"createSession",__createSession),defStatMeth(_s,LivePass,"createSessionWithGlobal",__createSessionWithGlobal),defStatMeth(_s,LivePass,"reportError",__reportError),defStatMeth(_s,LivePass,"setBitrate",__setBitrate),defStatMeth(_s,LivePass,"setCurrentStreamMetadata",__setCurrentStreamMetadata),defStatMeth(_s,LivePass,"setCdnNameOrResource",__setCdnNameOrResource),defStatMeth(_s,LivePass,"detachStreamer",__detachStreamer),defStatMeth(_s,LivePass,"attachStreamer",__attachStreamer),defStatMeth(_s,LivePass,"sendSessionEvent",__sendSessionEvent),defStatMeth(_s,LivePass,"sendEvent",__sendEvent),defStatMeth(_s,LivePass,"cleanupSession",__cleanupSession),defStatMeth(_s,LivePass,"pauseJoinTime",__pauseJoinTime),defStatMeth(_s,LivePass,"resumeJoinTime",__resumeJoinTime),defStatMeth(_s,LivePass,"adStart",__adStart),defStatMeth(_s,LivePass,"adEnd",__adEnd),defStatMeth(_s,LivePass,"toggleTraces",__toggleTraces),defStatMeth(_s,LivePass,"ping",__ping)}function PlayerStates(){function __init(){PlayerStates.stateToInt=new DictionaryCS,PlayerStates.intToState=new DictionaryCS,PlayerStates.stateToInt.SetValue(PlayerStates.UNINITIALIZED,PlayerStates.eUninitialized),PlayerStates.intToState.SetValue(PlayerStates.eUninitialized,PlayerStates.UNINITIALIZED),PlayerStates.stateToInt.SetValue(PlayerStates.PLAYING,PlayerStates.ePlaying),PlayerStates.intToState.SetValue(PlayerStates.ePlaying,PlayerStates.PLAYING),PlayerStates.stateToInt.SetValue(PlayerStates.STOPPED,PlayerStates.eStopped),PlayerStates.intToState.SetValue(PlayerStates.eStopped,PlayerStates.STOPPED),PlayerStates.stateToInt.SetValue(PlayerStates.PAUSED,PlayerStates.ePaused),PlayerStates.intToState.SetValue(PlayerStates.ePaused,PlayerStates.PAUSED),PlayerStates.stateToInt.SetValue(PlayerStates.BUFFERING,PlayerStates.eBuffering),PlayerStates.intToState.SetValue(PlayerStates.eBuffering,PlayerStates.BUFFERING),PlayerStates.stateToInt.SetValue(PlayerStates.NOT_MONITORED,PlayerStates.eNotMonitored),PlayerStates.intToState.SetValue(PlayerStates.eNotMonitored,PlayerStates.NOT_MONITORED),PlayerStates.stateToInt.SetValue(PlayerStates.UNKNOWN,PlayerStates.eUnknown),PlayerStates.intToState.SetValue(PlayerStates.eUnknown,PlayerStates.UNKNOWN)}function __stringToInt(stateStr){return null==PlayerStates.stateToInt&&PlayerStates.init(),PlayerStates.stateToInt.ContainsKey(stateStr)?PlayerStates.stateToInt.GetValue(stateStr):PlayerStates.eUnknown}function __intToString(stateInt){return null==PlayerStates.intToState&&PlayerStates.init(),PlayerStates.intToState.ContainsKey(stateInt)?PlayerStates.intToState.GetValue(stateInt):PlayerStates.UNKNOWN}function __cleanup(){PlayerStates.stateToInt=null}var _s=this;_s==STAT_INIT&&(PlayerStates.stateToInt=null),_s==STAT_INIT&&(PlayerStates.intToState=null),_s==STAT_INIT&&(PlayerStates.UNINITIALIZED="UNINITIALIZED"),_s==STAT_INIT&&(PlayerStates.eUninitialized=0),_s==STAT_INIT&&(PlayerStates.PLAYING="PLAYING"),_s==STAT_INIT&&(PlayerStates.ePlaying=3),_s==STAT_INIT&&(PlayerStates.STOPPED="STOPPED"),_s==STAT_INIT&&(PlayerStates.eStopped=1),_s==STAT_INIT&&(PlayerStates.PAUSED="PAUSED"),_s==STAT_INIT&&(PlayerStates.ePaused=12),_s==STAT_INIT&&(PlayerStates.BUFFERING="BUFFERING"),_s==STAT_INIT&&(PlayerStates.eBuffering=6),_s==STAT_INIT&&(PlayerStates.NOT_MONITORED="NOT_MONITORED"),_s==STAT_INIT&&(PlayerStates.eNotMonitored=98),_s==STAT_INIT&&(PlayerStates.UNKNOWN="UNKNOWN"),_s==STAT_INIT&&(PlayerStates.eUnknown=100),defStatMeth(_s,PlayerStates,"init",__init),defStatMeth(_s,PlayerStates,"stringToInt",__stringToInt),defStatMeth(_s,PlayerStates,"intToString",__intToString),defStatMeth(_s,PlayerStates,"cleanup",__cleanup)}function StreamInfo(){function __get_type(){return _s.__auto_type}function __set_type(value){_s.__auto_type=value}function __get_sourceHeightPixels(){
return _s.__auto_sourceHeightPixels}function __set_sourceHeightPixels(value){_s.__auto_sourceHeightPixels=value}function __get_sourceWidthPixels(){return _s.__auto_sourceWidthPixels}function __set_sourceWidthPixels(value){_s.__auto_sourceWidthPixels=value}function __get_bitrateKbps(){return _s.__auto_bitrateKbps}function __set_bitrateKbps(value){_s.__auto_bitrateKbps=value}function __get_resource(){return _s.__auto_resource}function __set_resource(value){_s.__auto_resource=value}function __get_cdnName(){return _s.__auto_cdnName}function __set_cdnName(value){_s.__auto_cdnName=value}function _constr(_bitrateKbps,_cdnName,_resource,type,widthPixels,heightPixels){_s.bitrateKbps=_bitrateKbps,_s.cdnName=_cdnName,_s.resource=_resource,_s.type=type,_s.sourceHeightPixels=heightPixels,_s.sourceWidthPixels=widthPixels}function __GetBitrateKbps(){return _s.bitrateKbps}function __GetCdnName(){return _s.cdnName}function __GetResource(){return _s.resource}function __equals(other){return null!=other&&(_s.cdnName==other.cdnName&&_s.resource==other.resource&&_s.bitrateKbps==other.bitrateKbps&&_s.type==other.type&&_s.sourceHeightPixels==other.sourceHeightPixels&&_s.sourceWidthPixels==other.sourceWidthPixels)}function __ConstructClone(fromObj){if(null==fromObj)return null;var res=new StreamInfo((-1),ConvivaContentInfo.CDN_NAME_OTHER,null,(-1),(-1),(-1));return res.type=slint.Cast(NativeLang.GetField("type",fromObj)),res.bitrateKbps=slint.Cast(NativeLang.GetField("bitrateKbps",fromObj)),res.resource=NativeLang.GetStringField("resource",fromObj),res.cdnName=NativeLang.GetStringField("cdnName",fromObj),res.sourceHeightPixels=slint.Cast(NativeLang.GetField("sourceHeightPixels",fromObj)),res.sourceWidthPixels=slint.Cast(NativeLang.GetField("sourceWidthPixels",fromObj)),res}function __ToStr(){var typeString=null;switch(_s.type){case StreamInfo.UNKNOWN:typeString="UNKNOWN";break;case StreamInfo.VIDEO:typeString="VIDEO";break;case StreamInfo.AUDIO:typeString="AUDIO";break;case StreamInfo.TEXT:typeString="TEXT";break;case StreamInfo.RESOURCE:typeString="RESOURCE";break;default:throw new Error("Unknown stream type "+_s.type)}return"type="+typeString+", bitrateKbps="+_s.bitrateKbps+", resource="+(null!=_s.resource?_s.resource:"null")+", cdnName="+(null!=_s.cdnName?_s.cdnName:"null")+", sourceHeightPixels="+_s.sourceHeightPixels+", sourceWidthPixels="+_s.sourceWidthPixels}var _s=this;_s==STAT_INIT&&(StreamInfo.UNKNOWN=-1),_s==STAT_INIT&&(StreamInfo.AUDIO=0),_s==STAT_INIT&&(StreamInfo.VIDEO=1),_s==STAT_INIT&&(StreamInfo.TEXT=2),_s==STAT_INIT&&(StreamInfo.RESOURCE=3),_s==STAT_INIT&&(StreamInfo.UNKNOWN_RESOURCE=""),_s==STAT_INIT&&(StreamInfo.MAX_BITRATE=2147483647),_s!=STAT_INIT&&(_s.__auto_type=void 0),defGet(_s,"type",__get_type),defGet(_s,"type",__get_type),defSet(_s,"type",__set_type),defSet(_s,"type",__set_type),_s!=STAT_INIT&&(_s.__auto_sourceHeightPixels=void 0),defGet(_s,"sourceHeightPixels",__get_sourceHeightPixels),defGet(_s,"sourceHeightPixels",__get_sourceHeightPixels),defSet(_s,"sourceHeightPixels",__set_sourceHeightPixels),defSet(_s,"sourceHeightPixels",__set_sourceHeightPixels),_s!=STAT_INIT&&(_s.__auto_sourceWidthPixels=void 0),defGet(_s,"sourceWidthPixels",__get_sourceWidthPixels),defGet(_s,"sourceWidthPixels",__get_sourceWidthPixels),defSet(_s,"sourceWidthPixels",__set_sourceWidthPixels),defSet(_s,"sourceWidthPixels",__set_sourceWidthPixels),_s!=STAT_INIT&&(_s.__auto_bitrateKbps=void 0),defGet(_s,"bitrateKbps",__get_bitrateKbps),defGet(_s,"bitrateKbps",__get_bitrateKbps),defSet(_s,"bitrateKbps",__set_bitrateKbps),defSet(_s,"bitrateKbps",__set_bitrateKbps),_s!=STAT_INIT&&(_s.__auto_resource=void 0),defGet(_s,"resource",__get_resource),defGet(_s,"resource",__get_resource),defSet(_s,"resource",__set_resource),defSet(_s,"resource",__set_resource),_s!=STAT_INIT&&(_s.__auto_cdnName=void 0),defGet(_s,"cdnName",__get_cdnName),defGet(_s,"cdnName",__get_cdnName),defSet(_s,"cdnName",__set_cdnName),defSet(_s,"cdnName",__set_cdnName),defPubMeth(_s,"GetBitrateKbps",__GetBitrateKbps),defPubMeth(_s,"GetBitrateKbps",__GetBitrateKbps),defPubMeth(_s,"GetCdnName",__GetCdnName),defPubMeth(_s,"GetCdnName",__GetCdnName),defPubMeth(_s,"GetResource",__GetResource),defPubMeth(_s,"GetResource",__GetResource),defPubMeth(_s,"equals",__equals),defPubMeth(_s,"equals",__equals),defStatMeth(_s,StreamInfo,"ConstructClone",__ConstructClone),defStatMeth(_s,StreamInfo,"ConstructClone",__ConstructClone),defPubMeth(_s,"ToStr",__ToStr),defPubMeth(_s,"ToStr",__ToStr),defStatMeth(_s,StreamInfo,"AUDIO",StreamInfo.AUDIO),defStatMeth(_s,StreamInfo,"MAX_BITRATE",StreamInfo.MAX_BITRATE),defStatMeth(_s,StreamInfo,"RESOURCE",StreamInfo.RESOURCE),defStatMeth(_s,StreamInfo,"TEXT",StreamInfo.TEXT),defStatMeth(_s,StreamInfo,"UNKNOWN",StreamInfo.UNKNOWN),defStatMeth(_s,StreamInfo,"UNKNOWN_RESOURCE",StreamInfo.UNKNOWN_RESOURCE),defStatMeth(_s,StreamInfo,"VIDEO",StreamInfo.VIDEO),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function StreamSwitch(){function __MakeSwitch(source,target,status){return new StreamSwitch(StreamSwitch.GetNextId(!1),source,target,(-1),null,status)}function __MakeSwitchToStream(target,status){return new StreamSwitch(StreamSwitch.GetNextId(!1),null,target,(-1),null,status)}function __Cleanup(){}function __get_id(){return _s.__auto_id}function __set_id(value){_s.__auto_id=value}function __get_timeoutMs(){return _s.__auto_timeoutMs}function __set_timeoutMs(value){_s.__auto_timeoutMs=value}function __get_sourceStream(){return _s.__auto_sourceStream}function __set_sourceStream(value){_s.__auto_sourceStream=value}function __get_targetStream(){return _s.__auto_targetStream}function __set_targetStream(value){_s.__auto_targetStream=value}function __get_mode(){return _s.__auto_mode}function __set_mode(value){_s.__auto_mode=value}function __get_status(){return _s.__auto_status}function __set_status(value){_s.__auto_status=value}function _constr(id,sourceStream,targetStream,timeoutMs,mode,status){_s.id=id,_s.sourceStream=sourceStream,_s.targetStream=targetStream,_s.timeoutMs=timeoutMs,_s.mode=mode,_s.status=status}function __CheckValidity(){if(null==_s.id)return"StreamSwitch.id is null (and must be non-null)";if(null!=_s.id&&"string"!=typeof _s.id)return"StreamSwitch.id is not a string";if(null!=_s.timeoutMs&&"number"!=typeof _s.timeoutMs)return"StreamSwitch.timeoutMs is not an int";if(null!=_s.mode&&"string"!=typeof _s.mode)return"StreamSwitch.mode is not a string";if(null!=_s.status&&"string"!=typeof _s.status)return"StreamSwitch.status is not a string";if(!(null==_s.sourceStream||_s.sourceStream instanceof CandidateStream))return"StreamSwitch.sourceStream is not a CandidateStream";if(null!=_s.targetStream&&!(_s.targetStream instanceof CandidateStream))return"StreamSwitch.targetStream is not a CandidateStream";var sourceStreamError=null!=_s.sourceStream?_s.sourceStream.CheckValidity():null;if(null!=sourceStreamError)return sourceStreamError;var targetStreamError=null!=_s.targetStream?_s.targetStream.CheckValidity():null;return null!=targetStreamError?targetStreamError:null}function __ConstructClone(fromObj){var res=new StreamSwitch(null,null,null,(-1),"","");return res.id=NativeLang.GetStringField("id",fromObj),res.sourceStream=CandidateStream.ConstructClone(NativeLang.GetField("sourceStream",fromObj)),res.targetStream=CandidateStream.ConstructClone(NativeLang.GetField("targetStream",fromObj)),res.timeoutMs=slint.Cast(NativeLang.GetField("timeoutMs",fromObj)),res.mode=NativeLang.GetStringField("mode",fromObj),res.status=NativeLang.GetStringField("status",fromObj),res}function __StaticInit(){StreamSwitch._nextId=0}function __StaticCleanup(){StreamSwitch._nextId=0}function __GetNextId(useInternalNamespace){var id=StreamSwitch._nextId;return StreamSwitch._nextId+=1,useInternalNamespace?"c3."+Lang.ToString(id):Lang.ToString(id)}var _s=this;_s==STAT_INIT&&(StreamSwitch._nextId=0),_s==STAT_INIT&&(StreamSwitch.PENDING="PENDING"),_s==STAT_INIT&&(StreamSwitch.IN_PROGRESS="IN_PROGRESS"),_s==STAT_INIT&&(StreamSwitch.SUCCEEDED="SUCCEEDED"),_s==STAT_INIT&&(StreamSwitch.FAILED="FAILED"),_s==STAT_INIT&&(StreamSwitch.INTERRUPTED="INTERRUPTED"),defStatMeth(_s,StreamSwitch,"MakeSwitch",__MakeSwitch),defStatMeth(_s,StreamSwitch,"MakeSwitch",__MakeSwitch),defStatMeth(_s,StreamSwitch,"MakeSwitchToStream",__MakeSwitchToStream),defStatMeth(_s,StreamSwitch,"MakeSwitchToStream",__MakeSwitchToStream),defPubMeth(_s,"Cleanup",__Cleanup),defPubMeth(_s,"Cleanup",__Cleanup),_s!=STAT_INIT&&(_s.__auto_id=void 0),defGet(_s,"id",__get_id),defGet(_s,"id",__get_id),defSet(_s,"id",__set_id),defSet(_s,"id",__set_id),_s!=STAT_INIT&&(_s.__auto_timeoutMs=void 0),defGet(_s,"timeoutMs",__get_timeoutMs),defGet(_s,"timeoutMs",__get_timeoutMs),defSet(_s,"timeoutMs",__set_timeoutMs),defSet(_s,"timeoutMs",__set_timeoutMs),_s!=STAT_INIT&&(_s.__auto_sourceStream=void 0),defGet(_s,"sourceStream",__get_sourceStream),defGet(_s,"sourceStream",__get_sourceStream),defSet(_s,"sourceStream",__set_sourceStream),defSet(_s,"sourceStream",__set_sourceStream),_s!=STAT_INIT&&(_s.__auto_targetStream=void 0),defGet(_s,"targetStream",__get_targetStream),defGet(_s,"targetStream",__get_targetStream),defSet(_s,"targetStream",__set_targetStream),defSet(_s,"targetStream",__set_targetStream),_s!=STAT_INIT&&(_s.__auto_mode=void 0),defGet(_s,"mode",__get_mode),defGet(_s,"mode",__get_mode),defSet(_s,"mode",__set_mode),defSet(_s,"mode",__set_mode),_s!=STAT_INIT&&(_s.__auto_status=void 0),defGet(_s,"status",__get_status),defGet(_s,"status",__get_status),defSet(_s,"status",__set_status),defSet(_s,"status",__set_status),defPubMeth(_s,"CheckValidity",__CheckValidity),defPubMeth(_s,"CheckValidity",__CheckValidity),defStatMeth(_s,StreamSwitch,"ConstructClone",__ConstructClone),defStatMeth(_s,StreamSwitch,"ConstructClone",__ConstructClone),defStatMeth(_s,StreamSwitch,"StaticInit",__StaticInit),defStatMeth(_s,StreamSwitch,"StaticInit",__StaticInit),defStatMeth(_s,StreamSwitch,"StaticCleanup",__StaticCleanup),defStatMeth(_s,StreamSwitch,"StaticCleanup",__StaticCleanup),defStatMeth(_s,StreamSwitch,"GetNextId",__GetNextId),defStatMeth(_s,StreamSwitch,"GetNextId",__GetNextId),defStatMeth(_s,StreamSwitch,"FAILED",StreamSwitch.FAILED),defStatMeth(_s,StreamSwitch,"INTERRUPTED",StreamSwitch.INTERRUPTED),defStatMeth(_s,StreamSwitch,"IN_PROGRESS",StreamSwitch.IN_PROGRESS),defStatMeth(_s,StreamSwitch,"PENDING",StreamSwitch.PENDING),defStatMeth(_s,StreamSwitch,"SUCCEEDED",StreamSwitch.SUCCEEDED),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function StreamerError(){function __get_errorCode(){return _s.__auto_errorCode}function __set_errorCode(value){_s.__auto_errorCode=value}function __get_severity(){return _s.__auto_severity}function __set_severity(value){_s.__auto_severity=value}function __get_stream(){return _s.__auto_stream}function __set_stream(value){_s.__auto_stream=value}function __get_index(){return _s.__auto_index}function __set_index(value){_s.__auto_index=value}function __get_scope(){return _s.__auto_scope}function __set_scope(value){_s.__auto_scope=value}function __makeUnscopedError(errorCode,severity){return new StreamerError(errorCode,null,(-1),severity,StreamerError.ERROR_SCOPE_UNKNOWN)}function __makeStreamError(errCode,severity,stream){return new StreamerError(errCode,stream,(-1),severity,StreamerError.ERROR_SCOPE_STREAM)}function __makeResourceError(errCode,severity,stream){return new StreamerError(errCode,stream,(-1),severity,StreamerError.ERROR_SCOPE_RESOURCE)}function __makeStreamSegmentError(errCode,severity,stream,idx){return new StreamerError(errCode,stream,idx,severity,StreamerError.ERROR_SCOPE_STREAM_SEGMENT)}function _constr(_errorCode,_stream,_index,_severity,_scope){_s.errorCode=_errorCode,_s.stream=_stream,_s.index=_index,_s.severity=_severity,_s.scope=_scope}function __ConstructClone(fromObj){if(null==fromObj)return null;var res=new StreamerError("",null,0,0,0);return res.errorCode=NativeLang.GetStringField("errorCode",fromObj),res.severity=slint.Cast(NativeLang.GetField("severity",fromObj)),res.stream=StreamInfo.ConstructClone(NativeLang.GetField("stream",fromObj)),res.scope=slint.Cast(NativeLang.GetField("scope",fromObj)),res.index=slint.Cast(NativeLang.GetField("index",fromObj)),res}function __ToStr(){return"errorCode="+(null!=_s.errorCode?_s.errorCode:"null")+", index="+_s.index+", severity="+_s.severity+", scope="+_s.scope+", stream=("+_s.stream.ToStr()+")"}var _s=this;_s==STAT_INIT&&(StreamerError.ERROR_SCOPE_UNKNOWN=0),_s==STAT_INIT&&(StreamerError.ERROR_SCOPE_STREAM_SEGMENT=1),_s==STAT_INIT&&(StreamerError.ERROR_SCOPE_STREAM=2),_s==STAT_INIT&&(StreamerError.ERROR_SCOPE_RESOURCE=3),_s==STAT_INIT&&(StreamerError.SEVERITY_WARNING=0),_s==STAT_INIT&&(StreamerError.SEVERITY_FATAL=1),_s!=STAT_INIT&&(_s.__auto_errorCode=void 0),defGet(_s,"errorCode",__get_errorCode),defGet(_s,"errorCode",__get_errorCode),defSet(_s,"errorCode",__set_errorCode),defSet(_s,"errorCode",__set_errorCode),_s!=STAT_INIT&&(_s.__auto_severity=void 0),defGet(_s,"severity",__get_severity),defGet(_s,"severity",__get_severity),defSet(_s,"severity",__set_severity),defSet(_s,"severity",__set_severity),_s!=STAT_INIT&&(_s.__auto_stream=void 0),defGet(_s,"stream",__get_stream),defGet(_s,"stream",__get_stream),defSet(_s,"stream",__set_stream),defSet(_s,"stream",__set_stream),_s!=STAT_INIT&&(_s.__auto_index=void 0),defGet(_s,"index",__get_index),defGet(_s,"index",__get_index),defSet(_s,"index",__set_index),defSet(_s,"index",__set_index),_s!=STAT_INIT&&(_s.__auto_scope=void 0),defGet(_s,"scope",__get_scope),defGet(_s,"scope",__get_scope),defSet(_s,"scope",__set_scope),defSet(_s,"scope",__set_scope),defStatMeth(_s,StreamerError,"makeUnscopedError",__makeUnscopedError),defStatMeth(_s,StreamerError,"makeUnscopedError",__makeUnscopedError),defStatMeth(_s,StreamerError,"makeStreamError",__makeStreamError),defStatMeth(_s,StreamerError,"makeStreamError",__makeStreamError),defStatMeth(_s,StreamerError,"makeResourceError",__makeResourceError),defStatMeth(_s,StreamerError,"makeResourceError",__makeResourceError),defStatMeth(_s,StreamerError,"makeStreamSegmentError",__makeStreamSegmentError),defStatMeth(_s,StreamerError,"makeStreamSegmentError",__makeStreamSegmentError),defStatMeth(_s,StreamerError,"ConstructClone",__ConstructClone),defStatMeth(_s,StreamerError,"ConstructClone",__ConstructClone),defPubMeth(_s,"ToStr",__ToStr),defPubMeth(_s,"ToStr",__ToStr),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function Monitor(){function _constr(streamer,eventQueue,contentInfo,options,sessionId){_s._eventQueue=eventQueue,_s._utils=Utils.getInstance(),_s._contentInfo=contentInfo,_s._sessionId=sessionId,_s._nextHeartbeat=new DictionaryCS,_s._streamerObject=streamer,_s._startTimeMs=0,_s._lastStateUpdateTimeMs=0,_s._pauseJoinTimeStartTimeMs=0,_s._pauseJointTimeTotalMs=0,_s._cumulativeTimePerState=new DictionaryCS;for(var _for_array_1=PlayerStates.stateToInt.KeyValuePairs,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var statePair=_for_array_1[_for_idx_2];_s._cumulativeTimePerState.SetValue(statePair.Value,0)}if(_s._joinTimeMs=-1,_s._bufferingEventCount=0,_s._nominalPlayingBitsTotal=0,_s._encodedFps=-1,_s._contentLengthSec=-1,_s._playingFpsObservationCount=0,_s._playingFpsTotal=0,null!=options){var optionsDict=Lang.DictionaryFromRepr(options);optionsDict.ContainsKey(LivePass.OPTION_EXTERNAL_BITRATE_REPORTING)&&(_s._externalBitrateReporting=optionsDict.GetValue(LivePass.OPTION_EXTERNAL_BITRATE_REPORTING))}}function __start(nowMs){_s._startTimeMs=nowMs,_s._lastStateUpdateTimeMs=nowMs,_s.buildInitialStreamInfo(),_s.attachStreamer(_s._streamerObject),_s._streamerObject=null}function __attachStreamer(streamerObject){return _s._utils.logSession("Monitor.attachStreamer()",_s._sessionId),null!=_s._streamer?void _s._utils.logSession("Monitor.attachStreamer(): detach current streamer first",_s._sessionId):null==streamerObject?(_s._utils.logSession("Monitor.attachStreamer(): received a null streamer",_s._sessionId),void _s.SetPlayingState(ConvivaStreamerProxy.NOT_MONITORED)):(_s._streamer=Monitor.wrapInConvivaStreamerProxy(streamerObject,_s._sessionId),_s._sessionFlags=_s._streamer.GetCapabilities(),_s._externalBitrateReporting&&(_s._sessionFlags|=ConvivaStreamerProxy.CAPABILITY_BITRATE_EXTERNAL),_s.SetPlayingState(ConvivaStreamerProxy.UNKNOWN),_s._streamer.SetMonitoringNotifier(_s.notificationFromStreamerProxy),void(_s._lastStateUpdateTimeMs=_s._utils.epochTimeMs()))}function __detachStreamer(){_s._utils.logSession("Monitor.detachStreamer()",_s._sessionId),_s.updateMetrics(),null!=_s._streamer&&(_s._streamer.Cleanup(),_s.SetPlayingState(ConvivaStreamerProxy.NOT_MONITORED),_s._streamer=null)}function __pauseJoinTime(){if(_s._utils.logSession("Monitor.pauseJoinTime()",_s._sessionId),0==_s._pauseJoinTimeStartTimeMs){_s._pauseJoinTimeStartTimeMs=_s._utils.epochTimeMs();var newState=new DictionaryCS,oldState=new DictionaryCS;newState.SetValue("pj",!0),oldState.SetValue("pj",!1),_s.declareStateChange(newState,oldState)}}function __resumeJoinTime(addEvent){if(_s._utils.logSession("Monitor.resumeJoinTime()",_s._sessionId),_s._pauseJoinTimeStartTimeMs>0&&(_s._pauseJointTimeTotalMs+=_s._utils.epochTimeMs()-_s._pauseJoinTimeStartTimeMs,addEvent)){var newState=new DictionaryCS,oldState=new DictionaryCS;newState.SetValue("pj",!1),oldState.SetValue("pj",!0),_s.declareStateChange(newState,oldState)}_s._pauseJoinTimeStartTimeMs=0}function __get_streamer(){return _s._streamer}function __buildInitialStreamInfo(){var initialBitrateKbps=-1,initialResource=null,initialCdnName=ConvivaContentInfo.CDN_NAME_OTHER;null!=_s._contentInfo&&(initialCdnName=_s._contentInfo.defaultReportingCdnName,initialResource=null==_s._contentInfo.defaultReportingResource||_s._contentInfo.defaultReportingResource==ConvivaContentInfo.NO_RESOURCE?initialCdnName:_s._contentInfo.defaultReportingResource,initialBitrateKbps=_s._contentInfo.defaultReportingBitrateKbps),_s._streamInfo=new StreamInfo(initialBitrateKbps,initialCdnName,initialResource,(-1),(-1),(-1))}function __notificationFromStreamerProxy(notificationName,arg){_s._utils.runProtected(function(){switch(notificationName){case"PlayingStateChange":var newState=arg;_s.OnPlayingStateChange(newState);break;case"StreamInfoChange":var newInfo=arg;_s.SetStream(newInfo);break;case"ErrorChange":var newError=arg;_s.OnError(newError);break;case"MetadataChange":_s.OnMetadata(arg);break;case"Log":var logMsg=arg;_s._utils.logSession(logMsg,_s._sessionId)}},"notificationFromStreamerProxy")}function __OnPlayingStateChange(newPlayingState){if(_s.updateStateCumulativeTime(),_s._playingState!=newPlayingState){var hasJoined=_s._joinTimeMs>=0,newState=new DictionaryCS,oldState=new DictionaryCS;newState.SetValue("ps",PlayerStates.stringToInt(newPlayingState)),oldState.SetValue("ps",PlayerStates.stringToInt(_s._playingState)),hasJoined||newPlayingState!=ConvivaStreamerProxy.PLAYING||(_s._cumulativeTimePerState.SetValue(PlayerStates.eBuffering,0),_s._pauseJoinTimeStartTimeMs>0&&(_s.resumeJoinTime(!1),newState.SetValue("pj",!1),oldState.SetValue("pj",!0)),_s._joinTimeMs=slint.Cast(_s._utils.epochTimeMs()-_s._startTimeMs-_s._pauseJointTimeTotalMs),_s._joinTimeMs<0&&(_s._joinTimeMs=0)),hasJoined&&newPlayingState==ConvivaStreamerProxy.BUFFERING&&_s._bufferingEventCount++,_s._utils.logSession("Monitor: change playing state to "+newPlayingState,_s._sessionId),_s._playingState=newPlayingState,_s.declareStateChange(newState,oldState)}}function __SetPlayingState(newState){_s._playingState!=newState&&_s.OnPlayingStateChange(newState)}function __SetStream(targetStream){null!=targetStream&&(null!=_s._streamer&&(targetStream.bitrateKbps==_s._streamer.GetBitrateKbps()&&(targetStream.bitrateKbps=-2),targetStream.cdnName==_s._streamer.GetCdnName()&&(targetStream.cdnName=null),targetStream.resource==_s._streamer.GetResource()&&(targetStream.resource=null)),null==targetStream.resource&&null!=targetStream.cdnName&&_s._streamInfo.cdnName==_s._streamInfo.resource&&(targetStream.resource=targetStream.cdnName),!_s._externalBitrateReporting&&targetStream.bitrateKbps<=-2&&(targetStream.bitrateKbps=_s._streamInfo.bitrateKbps),null==targetStream.cdnName&&(targetStream.cdnName=_s._streamInfo.cdnName),null!=targetStream.resource&&targetStream.resource!=ConvivaContentInfo.NO_RESOURCE||(targetStream.resource=_s._streamInfo.resource),_s._streamInfo.equals(targetStream)||(_s.updateStateCumulativeTime(),_s.enqueueStreamChangeEvent(_s._streamInfo,targetStream),_s._streamInfo=targetStream))}function __setBitrate(newBitrateKbps){if(_s._externalBitrateReporting){var newStream=StreamInfo.ConstructClone(_s._streamInfo);newStream.bitrateKbps=newBitrateKbps,_s.SetStream(newStream)}else _s._utils.logSession("setBitrate() call ignored, enable external bitrate reporting first.",_s._sessionId)}function __OnError(e){_s.declareError(e.errorCode,e.severity==StreamerError.SEVERITY_FATAL)}function __OnMetadata(metadata){var metadataDict=Lang.DictionaryFromRepr(metadata);metadataDict.ContainsKey(ConvivaStreamerProxy.METADATA_ENCODED_FRAMERATE)&&(_s._encodedFps=slint.Cast(_s._utils.parseNumber(metadataDict.GetValue(ConvivaStreamerProxy.METADATA_ENCODED_FRAMERATE),-1)),_s._utils.logSession("Monitor: received "+ConvivaStreamerProxy.METADATA_ENCODED_FRAMERATE+" metadata: "+_s._encodedFps,_s._sessionId)),metadataDict.ContainsKey(ConvivaStreamerProxy.METADATA_DURATION)&&(_s._contentLengthSec=slint.Cast(_s._utils.parseNumber(metadataDict.GetValue(ConvivaStreamerProxy.METADATA_DURATION),-1)),_s._utils.logSession("Monitor: received "+ConvivaStreamerProxy.METADATA_DURATION+" metadata: "+_s._contentLengthSec,_s._sessionId))}function __updateHeartbeat(heartbeat){_s.updateMetrics();var playingTime=_s._cumulativeTimePerState.GetValue(PlayerStates.ePlaying),hasJoined=_s._joinTimeMs>=0,bufferingTime=0;hasJoined&&(bufferingTime=_s._cumulativeTimePerState.GetValue(PlayerStates.eBuffering));var averageBitrateKbps=-1;hasJoined&&(averageBitrateKbps=slint.Cast((_s._nominalPlayingBitsTotal+0)/playingTime));var averageFps=-1;_s._playingFpsObservationCount>0&&(averageFps=slint.Cast((_s._playingFpsTotal+0)/_s._playingFpsObservationCount)),NativeLang.setDictValue(heartbeat,"ps",PlayerStates.stringToInt(_s._playingState)),NativeLang.setDictValue(heartbeat,"pj",_s._pauseJoinTimeStartTimeMs>0),NativeLang.setDictValue(heartbeat,"sf",_s._sessionFlags),NativeLang.setDictValue(heartbeat,"tpt",playingTime),NativeLang.setDictValue(heartbeat,"tbt",bufferingTime),NativeLang.setDictValue(heartbeat,"tpst",_s._cumulativeTimePerState.GetValue(PlayerStates.ePaused)),NativeLang.setDictValue(heartbeat,"tst",_s._cumulativeTimePerState.GetValue(PlayerStates.eStopped)),NativeLang.setDictValue(heartbeat,"jt",_s._joinTimeMs),NativeLang.setDictValue(heartbeat,"tbe",_s._bufferingEventCount),_s._contentLengthSec>0&&NativeLang.setDictValue(heartbeat,"cl",_s._contentLengthSec),_s._streamInfo.GetBitrateKbps()>0&&(NativeLang.setDictValue(heartbeat,"cbr",_s._streamInfo.GetBitrateKbps()),NativeLang.setDictValue(heartbeat,"br",_s._streamInfo.GetBitrateKbps())),averageBitrateKbps>0&&NativeLang.setDictValue(heartbeat,"abr",averageBitrateKbps),NativeLang.setDictValue(heartbeat,"rs",_s._streamInfo.GetResource()),NativeLang.setDictValue(heartbeat,"cdn",_s._streamInfo.GetCdnName()),_s._encodedFps>=0&&NativeLang.setDictValue(heartbeat,"efps",_s._encodedFps),averageFps>=0&&NativeLang.setDictValue(heartbeat,"afps",averageFps)}function __cleanup(){null!=_s._streamer&&_s._streamer.Cleanup(),_s._streamer=null,_s._streamerObject=null,_s._eventQueue=null,_s._contentInfo=null,_s._nextHeartbeat=null,_s._streamInfo=null,_s._cumulativeTimePerState=null,_s._utils=null}function __updateMetrics(){if(null!=_s._streamer){if(_s._playingState==ConvivaStreamerProxy.PLAYING){var fps=_s._streamer.GetRenderedFrameRate();fps>=0&&(_s._playingFpsTotal+=fps,_s._playingFpsObservationCount++)}_s.updateStateCumulativeTime()}}function __enqueueEvent(type,eventData){_s._eventQueue.enqueueEvent(type,eventData,slint.Cast(_s._utils.epochTimeMs()-_s._startTimeMs))}function __enqueueStreamChangeEvent(oldStream,newStream){var newState=new DictionaryCS,oldState=new DictionaryCS;oldStream.GetBitrateKbps()!=newStream.GetBitrateKbps()&&newStream.GetBitrateKbps()>0&&(oldState.SetValue("br",oldStream.GetBitrateKbps()),newState.SetValue("br",newStream.GetBitrateKbps()),_s._utils.logSession("Monitor: change bitrate from "+oldState.GetValue("br")+" to "+newState.GetValue("br"),_s._sessionId)),oldStream.GetCdnName()!=newStream.GetCdnName()&&(oldState.SetValue("cdn",oldStream.GetCdnName()),newState.SetValue("cdn",newStream.GetCdnName()),_s._utils.logSession("Monitor: change cdnName from "+oldState.GetValue("cdn")+" to "+newState.GetValue("cdn"),_s._sessionId)),oldStream.GetResource()!=newStream.GetResource()&&(oldState.SetValue("rs",oldStream.GetResource()),newState.SetValue("rs",newStream.GetResource()),_s._utils.logSession("Monitor: change resource from "+oldState.GetValue("rs")+" to "+newState.GetValue("rs"),_s._sessionId)),_s.declareStateChange(newState,oldState)}function __updateStateCumulativeTime(){var now=_s._utils.epochTimeMs(),playingStateInt=PlayerStates.stringToInt(_s._playingState);if(_s._playingState!=ConvivaStreamerProxy.UNKNOWN){var delta=slint.Cast(now-_s._lastStateUpdateTimeMs);_s._cumulativeTimePerState.SetValue(playingStateInt,_s._cumulativeTimePerState.GetValue(playingStateInt)+delta);var bitrateKbps=_s._streamInfo.GetBitrateKbps();_s._playingState==ConvivaStreamerProxy.PLAYING&&bitrateKbps!=-1&&(_s._nominalPlayingBitsTotal+=delta*bitrateKbps)}_s._lastStateUpdateTimeMs=now}function __declareError(errorMsg,isFatal){_s._joinTimeMs<0&&isFatal&&(_s._joinTimeMs=-2);var data=new DictionaryCS;data.SetValue("ft",isFatal),data.SetValue("err",errorMsg),_s.enqueueEvent("CwsErrorEvent",data)}function __declareStateChange(newState,oldState){var newStateNative=Lang.StringDictionaryToRepr(newState),oldStateNative=Lang.StringDictionaryToRepr(oldState),data=new DictionaryCS;data.SetValue("new",newStateNative),null!=oldState&&data.SetValue("old",oldStateNative),_s.enqueueEvent("CwsStateChangeEvent",data)}function __wrapInConvivaStreamerProxy(streamer,sessionId){var realSamsungStreamerProxy=null;try{streamer.getAttribute&&streamer.getAttribute("classid").indexOf("clsid:SAMSUNG-INFOLINK")>=0&&(realSamsungStreamerProxy=new SamsungStreamerProxy(streamer),realSamsungStreamerProxy.startMonitoring())}catch(e){}return realSamsungStreamerProxy?realSamsungStreamerProxy:streamer.hasOwnProperty("getStreamerType")&&"Samsung"==streamer.getStreamerType()?SamsungStreamerProxy.createSamsungStreamerProxy(streamer):void 0!==streamer.setQosData&&void 0!==streamer.licenseResponse?new PlayStationTouchFactorStreamerProxy:void 0!==streamer.codecs&&void 0!==streamer.maxBufferLength?new PlayStationLibjscriptStreamerProxy:void 0!==streamer.textTrackDisplay&&void 0!==streamer.mediaLoader?new ConvivaVideojsStreamerProxy(streamer):void 0!==streamer.networkState&&void 0!==streamer.readyState?new Html5ConvivaStreamerProxy(streamer):void 0!==streamer.currentPTS&&void 0!==streamer.availableAudioStreams?new PlayStationTrilithiumStreamerProxy(streamer):void 0!==streamer.mediaElementAdapter?new Xbox1ConvivaStreamerProxy(streamer):void 0!==streamer.MbId&&void 0!==streamer.blockedParams?new ConvivaOoyalaStreamerProxy(streamer):void 0!==streamer.mb&&void 0!==streamer.mb.MbId&&void 0!==streamer.mb.blockedParams?new ConvivaOoyalaStreamerProxy(streamer.mb):streamer}var _s=this;_s!=STAT_INIT&&(_s._sessionId=0),_s!=STAT_INIT&&(_s._externalBitrateReporting=!1),_s!=STAT_INIT&&(_s._streamer=null),_s!=STAT_INIT&&(_s._streamerObject=null),_s!=STAT_INIT&&(_s._eventQueue=null),_s!=STAT_INIT&&(_s._contentInfo=null),_s!=STAT_INIT&&(_s._nextHeartbeat=null),_s!=STAT_INIT&&(_s._utils=null),_s!=STAT_INIT&&(_s._playingState=ConvivaStreamerProxy.UNKNOWN),_s!=STAT_INIT&&(_s._streamInfo=null),_s!=STAT_INIT&&(_s._sessionFlags=1),_s!=STAT_INIT&&(_s._startTimeMs=0),_s!=STAT_INIT&&(_s._lastStateUpdateTimeMs=0),_s!=STAT_INIT&&(_s._pauseJoinTimeStartTimeMs=0),_s!=STAT_INIT&&(_s._pauseJointTimeTotalMs=0),_s!=STAT_INIT&&(_s._cumulativeTimePerState=null),_s!=STAT_INIT&&(_s._joinTimeMs=-1),_s!=STAT_INIT&&(_s._bufferingEventCount=0),_s!=STAT_INIT&&(_s._nominalPlayingBitsTotal=0),_s!=STAT_INIT&&(_s._encodedFps=-1),_s!=STAT_INIT&&(_s._contentLengthSec=-1),_s!=STAT_INIT&&(_s._playingFpsObservationCount=0),_s!=STAT_INIT&&(_s._playingFpsTotal=0),defPubMeth(_s,"start",__start),defPubMeth(_s,"attachStreamer",__attachStreamer),defPubMeth(_s,"detachStreamer",__detachStreamer),defPubMeth(_s,"pauseJoinTime",__pauseJoinTime),defPubMeth(_s,"resumeJoinTime",__resumeJoinTime),defGet(_s,"streamer",__get_streamer),defPrivMeth(_s,"buildInitialStreamInfo",__buildInitialStreamInfo),defPrivMeth(_s,"notificationFromStreamerProxy",__notificationFromStreamerProxy),defPrivMeth(_s,"OnPlayingStateChange",__OnPlayingStateChange),defPrivMeth(_s,"SetPlayingState",__SetPlayingState),defPubMeth(_s,"SetStream",__SetStream),defPubMeth(_s,"setBitrate",__setBitrate),defPubMeth(_s,"OnError",__OnError),defPrivMeth(_s,"OnMetadata",__OnMetadata),defPubMeth(_s,"updateHeartbeat",__updateHeartbeat),defPubMeth(_s,"cleanup",__cleanup),defPrivMeth(_s,"updateMetrics",__updateMetrics),defPrivMeth(_s,"enqueueEvent",__enqueueEvent),defPrivMeth(_s,"enqueueStreamChangeEvent",__enqueueStreamChangeEvent),defPrivMeth(_s,"updateStateCumulativeTime",__updateStateCumulativeTime),defPrivMeth(_s,"declareError",__declareError),defPrivMeth(_s,"declareStateChange",__declareStateChange),defStatMeth(_s,Monitor,"wrapInConvivaStreamerProxy",__wrapInConvivaStreamerProxy),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function EventQueue(){function _constr(){_s._events=NativeLang.makeList()}function __enqueueEvent(type,data,timeSinceSessionStart){data.SetValue("t",type),data.SetValue("st",timeSinceSessionStart),data.SetValue("seq",_s._nextSeqNumber),_s._nextSeqNumber++,NativeLang.addListValue(_s._events,Lang.StringDictionaryToRepr(data))}function __flushEvents(){var currentEvents=_s._events;return _s._events=NativeLang.makeList(),currentEvents}var _s=this;_s!=STAT_INIT&&(_s._events=null),_s!=STAT_INIT&&(_s._nextSeqNumber=0),defPubMeth(_s,"enqueueEvent",__enqueueEvent),defPubMeth(_s,"flushEvents",__flushEvents),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function Session(){function _constr(streamer,contentInfo,options,global){_s._contentInfo=contentInfo,_s._utils=Utils.getInstance(),_s._settings=_s._utils.getSettings(),_s._sessionId=_s._utils.randInt();for(var langTags=Lang.DictionaryFromRepr(_s._contentInfo.tags),keysToCorrect=new ListCS,_for_array_1=langTags.Keys,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var tkey=_for_array_1[_for_idx_2];null==langTags.GetValue(tkey)&&keysToCorrect.Add(tkey)}for(var _for_array_3=keysToCorrect.Values,_for_idx_4=0;_for_idx_4<_for_array_3.length;_for_idx_4++){var tkey1=_for_array_3[_for_idx_4];_s.log("WARNING: correcting null value for tag "+tkey1),NativeLang.setDictValue(_s._contentInfo.tags,tkey1,"null")}_s._nativeReprTags=Lang.StringDictionaryToRepr(_s._contentInfo.tags),_s._eventQueue=new EventQueue,global||(_s._monitor=new Monitor(streamer,_s._eventQueue,_s._contentInfo,options,_s._sessionId))}function __start(){null!=_s._monitor&&_s.log("Session.start(): assetName="+_s._contentInfo.assetName),_s._startTimeMs=_s._utils.epochTimeMs(),null!=_s._monitor&&_s._monitor.start(_s._startTimeMs),_s._heartbeatSequenceNumber=0,null==_s._utils.clientIdLoadingDone?_s.sendHeartbeat():(_s._clientIdWaiter=_s.onClientIdLoaded,_s._utils.clientIdLoadingDone.AddHandler(_s._clientIdWaiter)),_s._heartbeatTimer=null,_s.resetHeartbeatTimer()}function __cleanup(){_s.log("Session.cleanup()"+_s.sessionTypeTag()),null!=_s._heartbeatTimer&&_s._heartbeatTimer.cleanup(),_s._heartbeatTimer=null,_s._utils.logSession("Schedule the last hb before session cleanup"+_s.sessionTypeTag(),_s._sessionId),null!=_s._monitor&&_s.enqueueSessionEndEvent();var urgentHb=_s.makeHeartbeat();null!=urgentHb?_s.encodeAndPostHeartbeat(urgentHb,function(){_s.cleanupAll()}):_s.cleanupAll()}function __enqueueSessionEndEvent(){
var eventData=new DictionaryCS;_s._eventQueue.enqueueEvent("CwsSessionEndEvent",eventData,slint.Cast(_s._utils.epochTimeMs()-_s._startTimeMs))}function __pauseJoinTime(){null!=_s._monitor&&_s._monitor.pauseJoinTime()}function __resumeJoinTime(){null!=_s._monitor&&_s._monitor.resumeJoinTime(!0)}function __adStart(){_s.pauseJoinTime()}function __adEnd(){_s.resumeJoinTime()}function __detachStreamer(){_s._monitor.detachStreamer()}function __attachStreamer(streamer){_s._monitor.attachStreamer(streamer)}function __resetHeartbeatTimer(){null!=_s._heartbeatTimer&&_s._heartbeatTimer.cleanup(),_s._heartbeatTimer=_s._utils.createTimer(_s.sendHeartbeat,_s._settings.heartbeatIntervalMs,"sendHeartbeat")}function __cleanupAll(){null!=_s._clientIdWaiter&&(_s._utils.clientIdLoadingDone.DeleteHandler(_s._clientIdWaiter),_s._clientIdWaiter=null),null!=_s._monitor&&(_s._monitor.cleanup(),_s._monitor=null),null!=_s._encodeHeartbeatTimer&&(_s._encodeHeartbeatTimer.cleanup(),_s._encodeHeartbeatTimer=null),null!=_s._eventQueue&&(_s._eventQueue.flushEvents(),_s._eventQueue=null),_s._contentInfo=null,_s._nativeReprTags=null,_s._settings=null,_s._utils=null}function __log(message){_s._utils.logSession(message,_s._sessionId)}function __reportError(err){_s.log("Session.reportError()"),null!=_s._monitor&&_s._monitor.OnError(err)}function __setBitrate(bitrateKbps){_s.log("Session.setBitrate(): bitrateKbps="+bitrateKbps),null!=_s._monitor&&_s._monitor.setBitrate(bitrateKbps)}function __setCurrentStreamMetadata(metadata){_s.log("Session.setCurrentStreamMetadata()"),null!=_s._monitor&&null!=_s._monitor.streamer&&_s._monitor.streamer.SetMetadata(metadata)}function __setCdnNameOrResource(resource){if(_s.log("Session.setCdnNameOrResource()"),null!=_s._monitor){var newStream=new StreamInfo((-2),resource,resource,(-1),(-1),(-1));_s._monitor.SetStream(newStream)}}function __sendCustomEvent(name,eventAttrs){_s.log("Session.sendEvent(): eventName="+name+_s.sessionTypeTag());var eventData=new DictionaryCS;eventData.SetValue("name",name);var eventAttrsNative=Lang.StringDictionaryToRepr(eventAttrs);eventData.SetValue("attr",eventAttrsNative),_s._eventQueue.enqueueEvent("CwsCustomEvent",eventData,slint.Cast(_s._utils.epochTimeMs()-_s._startTimeMs))}function __sendHeartbeat(){var heartbeat=null;null!=_s._encodeHeartbeatTimer&&_s._encodeHeartbeatTimer.cleanup(),_s._encodeHeartbeatTimer=_s._utils.scheduleAction(function(){heartbeat=_s.makeHeartbeat(),null!=heartbeat&&(_s._encodeHeartbeatTimer=_s._utils.scheduleAction(function(){_s.encodeAndPostHeartbeat(heartbeat,null),_s._encodeHeartbeatTimer=null},1,"encodeAndSendHeartbeat"))},1,"makeHeartbeat")}function __makeHeartbeat(){var heartbeat={};NativeLang.setDictValue(heartbeat,"t","CwsSessionHb"),NativeLang.setDictValue(heartbeat,"cid",_s._settings.customerKey),NativeLang.setDictValue(heartbeat,"clid",_s._utils.clientId),NativeLang.setDictValue(heartbeat,"sid",_s._sessionId),NativeLang.setDictValue(heartbeat,"seq",_s._heartbeatSequenceNumber),NativeLang.setDictValue(heartbeat,"pver",_s._settings.protocolVersion),NativeLang.setDictValue(heartbeat,"clv",_s._settings.clientVersion),NativeLang.setDictValue(heartbeat,"iid",_s._settings.clientInstanceId);var platformMetadata=Lang.StringDictionaryToRepr(_s._settings.platformApi.getPlatformMetadata());null!=platformMetadata&&NativeLang.setDictValue(heartbeat,"pm",platformMetadata),null!=_s._utils.device&&NativeLang.setDictValue(heartbeat,"dv",_s._utils.device),null!=_s._utils.deviceVersion&&NativeLang.setDictValue(heartbeat,"dvv",_s._utils.deviceVersion),null!=_s._utils.deviceType?NativeLang.setDictValue(heartbeat,"dvt",_s._utils.deviceType):null!=_s._contentInfo.deviceType&&NativeLang.setDictValue(heartbeat,"dvt",_s._contentInfo.deviceType),null!=_s._utils.os&&NativeLang.setDictValue(heartbeat,"os",_s._utils.os),null!=_s._utils.osVersion&&NativeLang.setDictValue(heartbeat,"osv",_s._utils.osVersion),null!=_s._utils.platform&&NativeLang.setDictValue(heartbeat,"pt",_s._utils.platform),null!=_s._contentInfo.viewerId&&NativeLang.setDictValue(heartbeat,"vid",_s._contentInfo.viewerId),null!=_s._contentInfo.streamUrl&&NativeLang.setDictValue(heartbeat,"url",_s._contentInfo.streamUrl),null!=_s._contentInfo.playerName&&NativeLang.setDictValue(heartbeat,"pn",_s._contentInfo.playerName),NativeLang.setDictValue(heartbeat,"tags",_s._nativeReprTags),null!=_s._monitor?(NativeLang.setDictValue(heartbeat,"an",_s._contentInfo.assetName),NativeLang.setDictValue(heartbeat,"lv",_s._contentInfo.isLive),_s._monitor.updateHeartbeat(heartbeat)):NativeLang.setDictValue(heartbeat,"sf",0);var currentEvents=_s._eventQueue.flushEvents();if(NativeLang.setDictValue(heartbeat,"evs",currentEvents),null==_s._monitor&&0==NativeLang.listCount(currentEvents))return null;Session._sendLogs&&NativeLang.setDictValue(heartbeat,"lg",Lang.ListToRepr(_s._utils.getLogs(_s._sessionId)));var currentTime=_s._utils.epochTimeMs();return NativeLang.setDictValue(heartbeat,"st",slint.Cast(currentTime-_s._startTimeMs)),NativeLang.setDictValue(heartbeat,"cts",currentTime/1e3),_s._heartbeatSequenceNumber++,heartbeat}function __sessionTypeTag(){return null==_s._monitor?" (global session)":""}function __encodeAndPostHeartbeat(heartbeat,afterPostCbk){var jsonHeartbeat=_s._utils.jsonEncode(heartbeat),url=_s._settings.gatewayUrl+_s._settings.gatewayPath,contentType="application/json";_s.log("Send HB["+(_s._heartbeatSequenceNumber-1)+"]"+_s.sessionTypeTag()),_s._utils.httpRequest(!0,url,jsonHeartbeat,contentType,_s.onHeartbeatResponse),null!=afterPostCbk&&afterPostCbk()}function __onHeartbeatResponse(isSuccess,jsonResponse){null!=_s._utils&&_s._utils.runProtected(function(){if(isSuccess){var decodedResponse=_s._utils.jsonDecode(jsonResponse);if(null!=decodedResponse){decodedResponse.ContainsKey("clid")&&_s._utils.setClientIdFromServer(Lang.ToString(decodedResponse.GetValue("clid")),!1);var newSendLogs=decodedResponse.ContainsKey("slg")&&Boolean(decodedResponse.GetValue("slg"));if(newSendLogs!=Session._sendLogs&&(_s.log("Turning "+(newSendLogs?"on":"off")+" sending of logs"),Session._sendLogs=newSendLogs),decodedResponse.ContainsKey("hbi")){var heartbeatIntervalSec=slint.Cast(decodedResponse.GetValue("hbi"));1e3*heartbeatIntervalSec!=_s._settings.heartbeatIntervalMs&&(_s.log("Received hbInterval from server "+heartbeatIntervalSec),_s._settings.heartbeatIntervalMs=1e3*heartbeatIntervalSec,null!=_s._heartbeatTimer&&_s.resetHeartbeatTimer())}if(decodedResponse.ContainsKey("gw")){var gatewayUrl=decodedResponse.GetValue("gw");gatewayUrl!=_s._settings.gatewayUrl&&(_s.log("Received gatewayUrl from server "+gatewayUrl),_s._settings.gatewayUrl=gatewayUrl)}}else _s.log("Decoded heartbeat response is null.")}else _s.log("Received no response (or a bad response) to heartbeat POST request.")},"onHeartbeatResponse")}function __onClientIdLoaded(){_s._utils.clientIdLoadingDone.DeleteHandler(_s._clientIdWaiter),_s._clientIdWaiter=null,_s.sendHeartbeat()}function __initialResourceBitrateSelection(){_s._monitor.streamer;throw new Error("Not implemented")}function __midStreamResourceBitrateSelection(switchTriggers){throw new Error("Not implemented")}var _s=this;_s!=STAT_INIT&&(_s._contentInfo=null),_s!=STAT_INIT&&(_s._nativeReprTags=null),_s!=STAT_INIT&&(_s._utils=null),_s!=STAT_INIT&&(_s._settings=null),_s!=STAT_INIT&&(_s._monitor=null),_s!=STAT_INIT&&(_s._eventQueue=null),_s!=STAT_INIT&&(_s._clientIdWaiter=null),_s!=STAT_INIT&&(_s._heartbeatTimer=null),_s!=STAT_INIT&&(_s._encodeHeartbeatTimer=null),_s==STAT_INIT&&(Session._sendLogs=!1),_s!=STAT_INIT&&(_s._sessionId=0),_s!=STAT_INIT&&(_s._startTimeMs=0),_s!=STAT_INIT&&(_s._heartbeatSequenceNumber=0),defPubMeth(_s,"start",__start),defPubMeth(_s,"cleanup",__cleanup),defPrivMeth(_s,"enqueueSessionEndEvent",__enqueueSessionEndEvent),defPubMeth(_s,"pauseJoinTime",__pauseJoinTime),defPubMeth(_s,"resumeJoinTime",__resumeJoinTime),defPubMeth(_s,"adStart",__adStart),defPubMeth(_s,"adEnd",__adEnd),defPubMeth(_s,"detachStreamer",__detachStreamer),defPubMeth(_s,"attachStreamer",__attachStreamer),defPrivMeth(_s,"resetHeartbeatTimer",__resetHeartbeatTimer),defPrivMeth(_s,"cleanupAll",__cleanupAll),defPrivMeth(_s,"log",__log),defPubMeth(_s,"reportError",__reportError),defPubMeth(_s,"setBitrate",__setBitrate),defPubMeth(_s,"setCurrentStreamMetadata",__setCurrentStreamMetadata),defPubMeth(_s,"setCdnNameOrResource",__setCdnNameOrResource),defPubMeth(_s,"sendCustomEvent",__sendCustomEvent),defPrivMeth(_s,"sendHeartbeat",__sendHeartbeat),defPrivMeth(_s,"makeHeartbeat",__makeHeartbeat),defPrivMeth(_s,"sessionTypeTag",__sessionTypeTag),defPrivMeth(_s,"encodeAndPostHeartbeat",__encodeAndPostHeartbeat),defPrivMeth(_s,"onHeartbeatResponse",__onHeartbeatResponse),defPrivMeth(_s,"onClientIdLoaded",__onClientIdLoaded),defPubMeth(_s,"initialResourceBitrateSelection",__initialResourceBitrateSelection),defPubMeth(_s,"midStreamResourceBitrateSelection",__midStreamResourceBitrateSelection),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function SessionFactory(){function _constr(){_s._utils=Utils.getInstance(),_s._settings=_s._utils.getSettings(),_s._nextSessionId=0,_s._sessionsById=new DictionaryCS,_s.lastSessionId=0}function __cleanup(){if(_s._utils=null,_s._settings=null,null!=_s._sessionsById)for(var _for_array_1=_s._sessionsById.KeyValuePairs,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var sessionPair=_for_array_1[_for_idx_2],sess=sessionPair.Value;sess.cleanup()}_s._sessionsById=null,_s._nextSessionId=0}function __newSessionId(){var sessionId=_s._nextSessionId;return _s._nextSessionId++,sessionId}function __makeSession(streamer,contentInfo,options,sessionId,global){var session=new Session(streamer,contentInfo,options,global);return _s.addSession(sessionId,session),_s.lastSessionId=sessionId,session.start(),session}function __getSession(sessionId){return _s._sessionsById.ContainsKey(sessionId)?_s._sessionsById.GetValue(sessionId):(sessionId==-1?_s._utils.err("LivePass: invalid sessionId. LivePass not properly initialized yet?"):_s._utils.err("LivePass: invalid sessionId. Did you cleanup that session previously?"),null)}function __addSession(sessionId,session){_s._sessionsById.SetValue(sessionId,session)}function __removeSession(sessionId){_s._sessionsById.Remove(sessionId)}function __cleanupSession(sessionId){var session=_s.getSession(sessionId);null!=session&&(_s.removeSession(sessionId),session.cleanup())}var _s=this;_s!=STAT_INIT&&(_s.lastSessionId=0),_s!=STAT_INIT&&(_s._utils=null),_s!=STAT_INIT&&(_s._settings=null),_s!=STAT_INIT&&(_s._nextSessionId=0),_s!=STAT_INIT&&(_s._sessionsById=null),defPubMeth(_s,"cleanup",__cleanup),defPubMeth(_s,"newSessionId",__newSessionId),defPubMeth(_s,"makeSession",__makeSession),defPubMeth(_s,"getSession",__getSession),defPubMeth(_s,"addSession",__addSession),defPubMeth(_s,"removeSession",__removeSession),defPubMeth(_s,"cleanupSession",__cleanupSession),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function ArrayCS(){function _constr(size){void 0==size&&(size=0),_s.arr=new Array(size)}function __Create(){for(var res=new ArrayCS,l=[],i=0;i<arguments.length;i++)l.push(arguments[i]);return res.arr=l,res}function __FromRepr(a){if(null==a)return null;var res=new ArrayCS;return res.arr=a,res}function __ToRepr(){return _s.arr}function __Length(){return _s.arr.length}function __GetValue(idx){if(idx>=_s.arr.length)throw new Error("Index out of bounds: "+idx+" (length "+_s.arr.length+")");if(idx<0)throw new Error("Index out of bounds: "+idx);return _s.arr[idx]}function __SetValue(idx,v){if(idx>=_s.arr.length)throw new Error("Index out of bounds: "+idx+" (length "+_s.arr.length+")");if(idx<0)throw new Error("Index out of bounds: "+idx);_s.arr[idx]=v}function __Values(){return _s.arr}var _s=this;_s!=STAT_INIT&&(_s.arr=void 0),defStatMeth(_s,ArrayCS,"Create",__Create),defStatMeth(_s,ArrayCS,"FromRepr",__FromRepr),defPubMeth(_s,"ToRepr",__ToRepr),defGet(_s,"Length",__Length),defPubMeth(_s,"GetValue",__GetValue),defPubMeth(_s,"SetValue",__SetValue),defGet(_s,"Values",__Values),_s!=STAT_INIT&&_constr.apply(this,arguments)}function Cleanable(){function _constr(cleanupCollection){_s._cleanupCollection=cleanupCollection,_s._id=Cleanable._nextCleanupId,Cleanable._nextCleanupId++,_s._cleanupCollection.SetValue(_s._id,_s)}function __setCleanupAction(cleanupAction){_s._cleanupAction=cleanupAction}function __cleanup(){null!=_s._cleanupAction&&_s._cleanupAction(),_s._cleanupCollection.Remove(_s._id)}function __cleanupCollection(collection){Utils.getInstance().log("cleanupCollection");for(var toClean=new ListCS,_for_array_1=collection.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var o=_for_array_1[_for_idx_2];toClean.Add(o)}for(var _for_array_3=toClean.Values,_for_idx_4=0;_for_idx_4<_for_array_3.length;_for_idx_4++){var o=_for_array_3[_for_idx_4];o.cleanup()}collection.Clear()}var _s=this;_s!=STAT_INIT&&(_s._cleanupAction=null),_s==STAT_INIT&&(Cleanable._nextCleanupId=0),_s!=STAT_INIT&&(_s._id=0),_s!=STAT_INIT&&(_s._cleanupCollection=null),defPubMeth(_s,"setCleanupAction",__setCleanupAction),defPubMeth(_s,"cleanup",__cleanup),defStatMeth(_s,Cleanable,"cleanupCollection",__cleanupCollection),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function DictionaryCS(){function _constr(size){_s.obj={}}function __FromRepr(o){if(null==o)return null;if(o instanceof DictionaryCS)return o;o.hasOwnProperty("ToObject")&&(o=o.ToObject());var res=new DictionaryCS;return slForEachProp(o,function(k){res.obj[k]=o[k]}),res}function __ToObject(){return _s.obj}function __Create(){for(var res=new DictionaryCS,i=0;i+1<arguments.length;i+=2)res.obj[arguments[i]]=arguments[i+1];return res}function __CopyToObject(obj){slForEachProp(_s.obj,function(k){obj[k]=_s.obj[k]})}function __GetValue(key){return _s.obj[key]}function __SetValue(key,v){_s.obj[key]=v}function __Clear(){slForEachProp(_s.obj,function(p){delete _s.obj[p]})}function __ContainsKey(key){return void 0!==_s.obj[key]}function __Contains(key){return ContainsKey(key)}function __Keys(){var res=new Array;return slForEachProp(_s.obj,function(p){res.push(p)}),res}function __Values(){var res=new Array;return slForEachProp(_s.obj,function(p){res.push(_s.obj[p])}),res}function __KeyValuePairs(){var res=new Array;return slForEachProp(_s.obj,function(p){res.push(new KeyValuePairCS(p,_s.obj[p]))}),res}function __Count(){var res=0;return slForEachProp(_s.obj,function(p){res++}),res}function __Remove(key){return!!_s.ContainsKey(key)&&(delete _s.obj[key],!0)}var _s=this;_s!=STAT_INIT&&(_s.obj=void 0),defStatMeth(_s,DictionaryCS,"FromRepr",__FromRepr),defPubMeth(_s,"ToObject",__ToObject),defStatMeth(_s,DictionaryCS,"Create",__Create),defPubMeth(_s,"CopyToObject",__CopyToObject),defPubMeth(_s,"GetValue",__GetValue),defPubMeth(_s,"SetValue",__SetValue),defPubMeth(_s,"Clear",__Clear),defPubMeth(_s,"ContainsKey",__ContainsKey),defPubMeth(_s,"Contains",__Contains),defGet(_s,"Keys",__Keys),defGet(_s,"Values",__Values),defGet(_s,"KeyValuePairs",__KeyValuePairs),defGet(_s,"Count",__Count),defPubMeth(_s,"Add",__SetValue),defPubMeth(_s,"Remove",__Remove),_s!=STAT_INIT&&_constr.apply(this,arguments)}function Eventer(){function _constr(){_s._handlers=new ListCS}function __Cleanup(){_s._handlers=new ListCS}function __AddHandler(handler){_s._handlers.Add(handler)}function __DeleteHandler(handler){_s._handlers.Remove(handler)}function __DispatchEvent(){for(var _for_array_1=_s._handlers.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var h=_for_array_1[_for_idx_2];h()}}var _s=this;_s!=STAT_INIT&&(_s._handlers=void 0),defPubMeth(_s,"Cleanup",__Cleanup),defPubMeth(_s,"AddHandler",__AddHandler),defPubMeth(_s,"DeleteHandler",__DeleteHandler),defPubMeth(_s,"DispatchEvent",__DispatchEvent),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function KeyValuePairCS(){function _constr(key,val){_s.key=key,_s.val=val}function __Key(){return _s.key}function __Value(){return _s.val}var _s=this;_s!=STAT_INIT&&(_s.key=void 0),_s!=STAT_INIT&&(_s.val=void 0),defGet(_s,"Key",__Key),defGet(_s,"Value",__Value),_s!=STAT_INIT&&_constr.apply(this,arguments)}function Lang(){Lang.StringIndexOf=function(s1,s2){return s1.indexOf(s2)},Lang.StringStartsWith=function(s1,s2){return 0==s1.indexOf(s2)},Lang.StringContains=function(s1,s2){return 0<=s1.indexOf(s2)},Lang.StringGetChar=function(s,where){if(where<0||where>=s.length)throw new Error("ArgumentOutOfRange");return s[where]},Lang.StringSubstring=function(str,startIndex,count){if(startIndex<0||startIndex>=str.length||void 0!=count&&(count<0||startIndex+count>str.length))throw new Error("ArgumentOutOfRange");return void 0==count?str.substr(startIndex):str.substr(startIndex,count)},Lang.StringSplit=function(s1,sep){var res=s1.split(sep);return ArrayCS.FromRepr(res)},Lang.StringEnumerator=function(s){return s.split("")},Lang.StringCompareTo=function(str1,str2){return null==str1?null==str2?0:-1:null==str2?1:str1<str2?-1:str1==str2?0:1},Lang.StringTrim=function(s){return s.replace(/^\s*/,"").replace(/\s*$/,"")},Lang.StringReplace=function(str1,strsearch,strreplace){if(null==strsearch||""==strsearch||null==strreplace)throw new Error("InvalidArgument");var searchIdx=str1.indexOf(strsearch);if(searchIdx>=0){var searchLen=strsearch.length;return str1.substr(0,searchIdx)+strreplace+Lang.StringReplace(str1.substr(searchIdx+searchLen),strsearch,strreplace)}return str1},Lang.StringLastIndexOf=function(str1,strsearch){if(null==strsearch||""==strsearch)throw new Error("InvalidArgument");return str1.lastIndexOf(strsearch)},Lang.ListFromRepr=function(a){return ListCS.FromRepr(a)},Lang.ArrayFromRepr=function(repr){return ArrayCS.FromRepr(repr)},Lang.ArrayToRepr=function(a){return null==a?null:a.ToRepr()},Lang.ListFromRepr=function(repr){return ListCS.FromRepr(repr)},Lang.ListToRepr=function(l){return null==l?null:l.ToRepr()},Lang.DictionaryFromRepr=function(repr){var tmp=DictionaryCS.FromRepr(repr);return tmp},Lang.StringDictionaryToRepr=function(dict){return null==dict?null:dict.hasOwnProperty("ToObject")?dict.ToObject():dict},Lang.DictionaryCopyToObject=function(dict,obj){null!=dict&&dict.CopyToObject(obj)},Lang.StringFromRepr=function(s){return s},Lang.StringToXml=function(str){try{if(window.DOMParser){var xmlobject=(new DOMParser).parseFromString(str,"text/xml");return xmlobject.documentElement}var xmlobject=new ActiveXObject("Microsoft.XMLDOM");return xmlobject.async="false",xmlobject.loadXML(str),xmlobject.documentElement}catch(e){return null}},Lang.XmlToString=function(oXML){try{return window.XMLSerializer?(new XMLSerializer).serializeToString(oXML):oXML.xml}catch(e){return null}},Lang.ToString=function(o){return null==o?null:"function"==typeof o.ToString?o.ToString():o.toString()},Lang.StringToLower=function(s){return s.toLowerCase()},Lang.StringToInt=function(s){return parseInt(s)},Lang.AsDouble=function(v){return v instanceof Int64?v.asNumber:v instanceof UInt64?v.asNumber:Number(v)},Lang.doubleRegex=new RegExp("^([+-]?[0-9]*\\.?[0-9]+)((e|E)[+-]?[0-9]+)?$"),Lang.parseDouble=function(v){return Lang.parseChecker(v,Lang.doubleRegex,"double"),parseFloat(v)},Lang.parseChecker=function(s,pattern,what){if(!pattern.test(s))throw new Error("Invalid string for "+what+": "+s)}}function ListCS(){function _constr(){arguments.length>1?Ping.Send("Error: Instantiate ListCS with too many arguments"):0==arguments.length?ArrayCS.call(_s,0):arguments[0]instanceof Number?ArrayCS.call(_s,arguments[0]):arguments[0]instanceof Array?(ArrayCS.call(_s,arguments[0].length),_s.arr=arguments[0]):arguments[0]instanceof ArrayCS?(ArrayCS.call(_s,arguments[0].length),_s.arr=arguments[0].arr):Ping.Send("Error: Instantiate ListCS with inappropriate arguments")}function __Create(a){for(var res=new ListCS,i=0;i<arguments.length;i++)res.arr.push(arguments[i]);return res}function __FromRepr(a){if(null==a)return a;if(a instanceof ListCS)return a;var res=new ListCS;return res.arr=a,res}function __ToRepr(){return _s.arr}function __Count(){return _s.arr.length}function __Values(){return _s.arr}function __Add(e){_s.arr.push(e)}function __Clear(e){_s.arr.length=0}function __IndexOf(e){var startIndex=arguments[1];if(null==startIndex)startIndex=0;else if(startIndex<0||startIndex>=_s.arr.length)throw new Error("Starting index out of bound");for(var i=startIndex;i<_s.arr.length;i++)if(_s.arr[i]==e)return i;return-1}function __Contains(e){return _s.IndexOf(e)>=0}function __Insert(idx,e){_s.arr.splice(idx,0,e)}function __Remove(e){var idx=_s.IndexOf(e);return!(idx<0)&&(_s.RemoveAt(idx),!0)}function __RemoveRange(where,count){_s.arr.splice(where,count)}function __RemoveAt(where){_s.arr.splice(where,1)}function __GetRange(startidx,len){var res=new ListCS;return res.arr=_s.arr.slice(startidx,startidx+len),res}function __Sort(){_s.arr.sort.apply(_s.arr,arguments)}function __ToArray(){return ArrayCS.FromRepr(_s.arr.slice())}var _s=this;_s!=STAT_INIT&&(_s.arr=void 0),defStatMeth(_s,ListCS,"Create",__Create),defStatMeth(_s,ListCS,"FromRepr",__FromRepr),defPubMeth(_s,"ToRepr",__ToRepr),defGet(_s,"Count",__Count),defGet(_s,"Values",__Values),defPubMeth(_s,"Add",__Add),defPubMeth(_s,"Clear",__Clear),defPubMeth(_s,"IndexOf",__IndexOf),defPubMeth(_s,"Contains",__Contains),defPubMeth(_s,"Insert",__Insert),defPubMeth(_s,"Remove",__Remove),defPubMeth(_s,"RemoveRange",__RemoveRange),defPubMeth(_s,"RemoveAt",__RemoveAt),defPubMeth(_s,"GetRange",__GetRange),defPubMeth(_s,"Sort",__Sort),defPubMeth(_s,"ToArray",__ToArray),_s!=STAT_INIT&&_constr.apply(this,arguments)}function NativeLang(){function __setDictValue(dict,key,value){dict[key]=value}function __makeList(){return[]}function __listCount(lst){return lst.length}function __addListValue(list,value){list.push(value)}function __removeListValueAt(list,idx){list.splice(idx,1)}function __GetField(propName,obj){return obj[propName]}function __GetStringField(propName,obj){var o=NativeLang.GetField(propName,obj);return o?o.toString():null}var _s=this;defStatMeth(_s,NativeLang,"setDictValue",__setDictValue),defStatMeth(_s,NativeLang,"makeList",__makeList),defStatMeth(_s,NativeLang,"listCount",__listCount),defStatMeth(_s,NativeLang,"addListValue",__addListValue),defStatMeth(_s,NativeLang,"removeListValueAt",__removeListValueAt),defStatMeth(_s,NativeLang,"GetField",__GetField),defStatMeth(_s,NativeLang,"GetStringField",__GetStringField)}function Settings(){function __changeSettings(settings){if(null!=settings)for(var sobj=Lang.DictionaryFromRepr(settings),_for_array_1=sobj.Keys,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var key=_for_array_1[_for_idx_2],v=sobj.GetValue(key);switch(key){case"platformApi":_s.platformApi=v;break;case"gatewayUrl":_s.gatewayUrl=sobj.GetValue(key);break;case"heartbeatIntervalMs":_s.heartbeatIntervalMs=slint.Cast(sobj.GetValue(key));break;case"enableLogging":_s.enableLogging=Boolean(sobj.GetValue(key));break;case"allowUncaughtExceptions":_s.allowUncaughtExceptions=Boolean(sobj.GetValue(key));break;default:throw new Error("Unsupported settings: "+key)}}}var _s=this;_s!=STAT_INIT&&(_s.heartbeatIntervalMs=2e4),_s!=STAT_INIT&&(_s.customerKey=null),_s!=STAT_INIT&&(_s.gatewayUrl="https://cws.conviva.com"),_s!=STAT_INIT&&(_s.gatewayPath="/0/wsg"),_s!=STAT_INIT&&(_s.protocolVersion="1.7"),_s!=STAT_INIT&&(_s.clientVersion="2.111.0.30375"),_s!=STAT_INIT&&(_s.clientInstanceId=0),_s!=STAT_INIT&&(_s.loadDataTimeoutMs=1e4),_s!=STAT_INIT&&(_s.enableLogging=!1),_s!=STAT_INIT&&(_s.platformApi=null),_s!=STAT_INIT&&(_s.allowUncaughtExceptions=!1),_s!=STAT_INIT&&(_s.pingComponentName="jscws"),_s!=STAT_INIT&&(_s.pingUrl="https://pings.conviva.com/ping.ping"),defPubMeth(_s,"changeSettings",__changeSettings)}function Utils(){function _constr(settings){if(_s._settings=settings,_s._referenceCount=1,_s._pingUrl=null,_s._isSendingPing=!1,_s.protocolVersion=_s._settings.protocolVersion,_s._cleanables=new DictionaryCS,null==_s._settings.platformApi&&("undefined"!=typeof PlayStationWebmafApi?_s._settings.platformApi=new PlayStationWebmafApi:"undefined"!=typeof PlayStationTouchFactorApi?_s._settings.platformApi=new PlayStationTouchFactorApi:"undefined"!=typeof PlayStationLibjscriptApi?_s._settings.platformApi=new PlayStationLibjscriptApi:"undefined"!=typeof ConvivaVideojsPlatformApi?_s._settings.platformApi=new ConvivaVideojsPlatformApi:"undefined"!=typeof Html5PlatformApi?_s._settings.platformApi=new Html5PlatformApi:"undefined"!=typeof PlayStationTrilithiumApi?_s._settings.platformApi=new PlayStationTrilithiumApi:"undefined"!=typeof Xbox1PlatformApi&&(_s._settings.platformApi=new Xbox1PlatformApi)),null==_s._settings.platformApi)throw new Error("PlatformApi is null");_s.device=_s._settings.platformApi.getDevice(),_s.deviceVersion=_s._settings.platformApi.getDeviceVersion(),_s.deviceType=_s._settings.platformApi.getDeviceType(),_s.os=_s._settings.platformApi.getOS(),_s.osVersion=_s._settings.platformApi.getOSVersion(),_s.platform="Js"}function __CreateUtils(settings){if(null==Utils._instance){var s=new Settings;s.changeSettings(settings),Utils._instance=new Utils(s),Utils._instance._start()}else Utils._instance.getSettings().changeSettings(settings),Utils._instance._referenceCount++;return Utils._instance}function __getInstance(){if(null==Utils._instance)throw new Error("CreateUtils module has not been called");return Utils._instance}function __getPlatformApi(){return _s._settings.platformApi}function __getSettings(){return _s._settings}function ___start(){}function __cleanup(){_s._referenceCount--,_s._referenceCount>0||(null!=_s.clientIdLoadingDone&&(_s.clientIdLoadingDone.Cleanup(),_s.clientIdLoadingDone=null),null!=_s._cleanables&&(Cleanable.cleanupCollection(_s._cleanables),_s._cleanables=null),null!=_s._settings&&null!=_s._settings.platformApi&&_s._settings.platformApi.cleanup(),_s._settings=null,Utils._instance=null)}function __logNoBuffer(msg){var timeMsec=_s.epochTimeMs(),theTime=void 0;theTime=(timeMsec/1e3).toFixed(3).toString(),msg="["+theTime+"] "+msg;var isError=Lang.StringContains(msg,"ERROR:");return _s._settings.enableLogging&&(isError?_s._settings.platformApi.consoleErr(msg):_s._settings.platformApi.consoleLog(msg)),msg}function __log(msg){msg=_s.logNoBuffer(msg),Utils.logBuffer.Count>=Utils.MAX_SIZE_LOGBUFFER&&Utils.logBuffer.RemoveAt(0),Utils.logBuffer.Add(msg)}function __logSession(msg,sessionId){_s.log("sid="+sessionId+" "+msg)}function __err(message){_s.log("ERROR: "+message)}function __getLogs(sessionId){var res=Utils.logBuffer;return Utils.logBuffer=new ListCS,res}function __assert(condition,msg){if(!condition)throw new Error("Assertion failure: "+msg)}function __runProtected(func,message){_s.runProtectedSync(func,message)}function __runProtectedSync(func,message){var allowUncaughtExceptions=_s._settings.allowUncaughtExceptions;if(allowUncaughtExceptions)func();else try{func()}catch(e){_s.onUncaughtException(message,e)}}function __onUncaughtException(msg,e){try{_s.ping("Uncaught exception: "+msg+": "+Lang.ToString(e))}catch(eping){_s.err("Caught exception while sending ping: "+Lang.ToString(eping))}}function __ping(msg){if(!_s._isSendingPing){_s._isSendingPing=!0,_s.initPing();var pingUrl=_s._pingUrl+"&d="+_s.urlEncodeString(Lang.ToString(msg));_s.err("Ping: "+pingUrl),_s.httpRequest(!1,pingUrl,null,null,null),_s._isSendingPing=!1}}function __initPing(){if(!_s._cachedPingUrl){var componentName="jscws",metadataSchema=null;try{var platformMetadata=Lang.DictionaryFromRepr(_s._settings.platformApi.getPlatformMetadata());null!=platformMetadata&&platformMetadata.ContainsKey("sch")&&(metadataSchema=platformMetadata.GetValue("sch"))}catch(e){}_s._pingUrl=_s._settings.pingUrl+"?comp="+componentName+"&clv="+_s._settings.clientVersion+"&cid="+_s._settings.customerKey+"&uuid="+_s.clientId,null!=metadataSchema&&(_s._pingUrl+="&sch="+metadataSchema),_s.clientId!=Utils.DEFAULT_CLIENT_ID&&null!=metadataSchema&&(_s._cachedPingUrl=!0)}}function __urlEncodeString(rawString){return escape(rawString)}function __epochTimeMs(){return _s._settings.platformApi.epochTimeMs()}function __createTimer(timerAction,intervalMs,actionName){var cleanable=new Cleanable(_s._cleanables),wrappedAction=null;return wrappedAction=function(){_s.runProtected(timerAction,actionName)},cleanable.setCleanupAction(_s._settings.platformApi.createTimer(wrappedAction,intervalMs,actionName)),cleanable}function __scheduleAction(action,delayMs,actionName){var cleanable=new Cleanable(_s._cleanables),actionHappened=!1,wrappedAction=null;return wrappedAction=function(){null!=cleanable&&cleanable.cleanup(),action(),actionHappened=!0},cleanable.setCleanupAction(_s._settings.platformApi.createTimer(wrappedAction,delayMs,actionName)),actionHappened&&cleanable.cleanup(),cleanable}function __parseInt(decimalInt,defaultResult){var result=defaultResult;try{result=slint.Parse(decimalInt)}catch(e){}return result}function __parseNumber(numberStr,defaultResult){var result=defaultResult;try{result=Lang.parseDouble(numberStr)}catch(e){}return result}function __startFetchClientId(){_s.clientId=Utils.DEFAULT_CLIENT_ID,_s.clientIdLoadingDone=new Eventer,_s._loadClientIdTimeout=_s.scheduleAction(function(){_s.log("Timeout in reading clientId. Using "+Utils.DEFAULT_CLIENT_ID+"."),_s.ping("Timeout in reading clientId. IGNORE waited "+_s._settings.loadDataTimeoutMs+"ms."),null!=_s.clientIdLoadingDone&&_s.clientIdLoadingDone.DispatchEvent(),_s._loadClientIdTimeout=null},_s._settings.loadDataTimeoutMs,"utils.readClientId timeout callback");var onLoad=void 0;onLoad=function(fSuccess,loadedData){_s.runProtected(function(){null!=_s._loadClientIdTimeout&&(_s._loadClientIdTimeout.cleanup(),_s._loadClientIdTimeout=null);var result=null;if(fSuccess)try{result=_s.jsonDecode(loadedData)}catch(e){result=null}var loadedClientId=null;fSuccess&&null!=result&&result.ContainsKey("clId")&&(loadedClientId=result.GetValue("clId")),null!=loadedClientId&&loadedClientId!=Utils.DEFAULT_CLIENT_ID&&"null"!=loadedClientId?(_s.clientId=loadedClientId,_s.log("Setting the client id to "+loadedClientId+" (from local storage)")):_s.log("Failed to load the client id from local storage"),null!=_s.clientIdLoadingDone&&(_s.clientIdLoadingDone.DispatchEvent(),_s.clientIdLoadingDone=null)},"utils.fetchClientId onLoad")},_s._settings.platformApi.loadLocalData(onLoad)}function __setClientIdFromServer(newClientId,fromStorage){null!=_s._loadClientIdTimeout&&(_s._loadClientIdTimeout.cleanup(),_s._loadClientIdTimeout=null),_s.clientIdLoadingDone=null,_s.clientId!=newClientId&&(_s.clientId=newClientId,_s.log("Setting the client id to "+newClientId+" (from server)"),_s.writeClientId())}function __writeClientId(){var dataToSave=new DictionaryCS;dataToSave.SetValue("clId",_s.clientId);var onSaved=void 0;onSaved=function(fSuccess){_s.runProtected(function(){fSuccess||_s.err("An error occurred while saving the clientId.")},"utils.writeClientId onSaved")};var dataObject=Lang.StringDictionaryToRepr(dataToSave),dataStr=_s.jsonEncode(dataObject);_s._settings.platformApi.saveLocalData(dataStr,onSaved)}function __randInt(){return Math.floor(4294967295*Math.random())-2147483648}function __randUInt(){var uInt=_s.randInt();return uInt=Math.abs(uInt),uInt<0&&(uInt=0),uInt}function __httpRequest(isPOST,url,data,contentType,callback){var cleanable=new Cleanable(_s._cleanables);return cleanable.setCleanupAction(_s._settings.platformApi.httpRequest(isPOST,url,data,contentType,function(isSuccess,response){cleanable.cleanup(),null!=callback&&callback(isSuccess,response)})),cleanable}function __jsonEncode(obj){var res=null;return _s.runProtectedSync(function(){res=_s._settings.platformApi.jsonEncode(obj)},"utils.jsonEncode"),res}function __jsonDecode(json){var res=null;return _s.runProtectedSync(function(){var decodedJson=_s._settings.platformApi.jsonDecode(json);res=Lang.DictionaryFromRepr(decodedJson)},"utils.jsonDecode"),res}var _s=this;_s==STAT_INIT&&(Utils._instance=null),_s!=STAT_INIT&&(_s._referenceCount=0),_s!=STAT_INIT&&(_s._settings=null),_s==STAT_INIT&&(Utils.DEFAULT_CLIENT_ID="0"),_s!=STAT_INIT&&(_s._loadClientIdTimeout=null),_s!=STAT_INIT&&(_s.clientId=Utils.DEFAULT_CLIENT_ID),
_s!=STAT_INIT&&(_s.clientIdLoadingDone=null),_s!=STAT_INIT&&(_s._pingUrl=null),_s!=STAT_INIT&&(_s._cachedPingUrl=!1),_s!=STAT_INIT&&(_s._isSendingPing=!1),_s!=STAT_INIT&&(_s.protocolVersion=null),_s!=STAT_INIT&&(_s.device=null),_s!=STAT_INIT&&(_s.os=null),_s!=STAT_INIT&&(_s.osVersion=null),_s!=STAT_INIT&&(_s.deviceVersion=null),_s!=STAT_INIT&&(_s.deviceType=null),_s!=STAT_INIT&&(_s.platform=null),_s!=STAT_INIT&&(_s._cleanables=null),_s==STAT_INIT&&(Utils.MAX_SIZE_LOGBUFFER=32),_s==STAT_INIT&&(Utils.logBuffer=new ListCS),defStatMeth(_s,Utils,"CreateUtils",__CreateUtils),defStatMeth(_s,Utils,"getInstance",__getInstance),defPubMeth(_s,"getPlatformApi",__getPlatformApi),defPubMeth(_s,"getSettings",__getSettings),defPrivMeth(_s,"_start",___start),defPubMeth(_s,"cleanup",__cleanup),defPubMeth(_s,"logNoBuffer",__logNoBuffer),defPubMeth(_s,"log",__log),defPubMeth(_s,"logSession",__logSession),defPubMeth(_s,"err",__err),defPubMeth(_s,"getLogs",__getLogs),defPubMeth(_s,"assert",__assert),defPubMeth(_s,"runProtected",__runProtected),defPubMeth(_s,"runProtectedSync",__runProtectedSync),defPrivMeth(_s,"onUncaughtException",__onUncaughtException),defPubMeth(_s,"ping",__ping),defPrivMeth(_s,"initPing",__initPing),defPrivMeth(_s,"urlEncodeString",__urlEncodeString),defPubMeth(_s,"epochTimeMs",__epochTimeMs),defPubMeth(_s,"createTimer",__createTimer),defPubMeth(_s,"scheduleAction",__scheduleAction),defPubMeth(_s,"parseInt",__parseInt),defPubMeth(_s,"parseNumber",__parseNumber),defPubMeth(_s,"startFetchClientId",__startFetchClientId),defPubMeth(_s,"setClientIdFromServer",__setClientIdFromServer),defPrivMeth(_s,"writeClientId",__writeClientId),defPubMeth(_s,"randInt",__randInt),defPubMeth(_s,"randUInt",__randUInt),defPubMeth(_s,"httpRequest",__httpRequest),defPubMeth(_s,"jsonEncode",__jsonEncode),defPubMeth(_s,"jsonDecode",__jsonDecode),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function DataLoader(){function _constr(){DataLoader.referenceCount++}function handleResp(e){try{var d=e.data;if("object"!==("undefined"==typeof d?"undefined":_typeof(d)))return;if("undefined"==typeof d.convivaRequestId){if("undefined"==typeof d.requestId)return;d.convivaRequestId=d.requestId}var domain_callback=DataLoader.callbacks[d.convivaRequestId];if(!domain_callback)return void Utils.getInstance().log("Received response for unknown request");if(!DataLoader.TESTAPI_forTouchstone&&e.origin!=domain_callback[0])return void Utils.getInstance().log("ERROR: Bad origin:"+e.origin);delete DataLoader.callbacks[d.convivaRequestId];var bytes=d.bytes;d.post_err&&"ok"==d.post_err?domain_callback[1](!0,bytes):(Utils.getInstance().log("ERROR: Error posting to "+e.origin+" ("+bytes+")"),domain_callback[1](!1,d.post_err))}catch(e){}}var _s=this;_s==STAT_INIT&&(DataLoader.frameId="conviva_iframe",DataLoader.frameUrl="/cws_iframe.html",DataLoader.TESTAPI_forTouchstone=!0,DataLoader.referenceCount=0,DataLoader.nextConvivaRequestId=0,DataLoader.callbacks={},DataLoader.communicationFramesIds={},"undefined"!=typeof window&&(window.addEventListener?window.addEventListener("message",handleResp,!1):window.attachEvent&&window.attachEvent("onmessage",handleResp))),this.cleanup=function(){DataLoader.referenceCount--,0==DataLoader.referenceCount&&(DataLoader.nextConvivaRequestId=0,DataLoader.callbacks={},slForEachPropValue(DataLoader.communicationFramesIds,function(communicationFrameId){_s.removeIFrame(communicationFrameId)}),DataLoader.communicationFramesIds={})},this.findFrameById=function(remoteFrameId){return remoteFrameId?document.getElementById(remoteFrameId):null},this.findFrameForDomain=function(forDomain){var remoteFrameId=DataLoader.communicationFramesIds[forDomain];return _s.findFrameById(remoteFrameId)},this.makeRequest=function(isPOST,url,data,contentType,callback){var m=url.match(/^(https?:\/\/[^\/]*)(\/.*)$/);if(!m)return Utils.getInstance().log("ERROR: UrlLoader: cannot parse url: "+url),null;var forDomain=m[1],remoteFrame=_s.findFrameForDomain(forDomain);if(remoteFrame&&remoteFrame.loaded){var convivaRequestId=DataLoader.nextConvivaRequestId++,method=isPOST?"POST":"GET",evt={url:url,method:method,data:data,contentType:contentType,requestId:convivaRequestId,convivaRequestId:convivaRequestId};DataLoader.callbacks[convivaRequestId]=[forDomain,callback],remoteFrame.contentWindow.postMessage(evt,DataLoader.TESTAPI_forTouchstone?"*":forDomain)}else remoteFrame&&!remoteFrame.loaded?setTimeout(function(){_s.makeRequest(isPOST,url,data,contentType,callback)},500):_s.insertIFrame(forDomain,function(){var remoteFrame=_s.findFrameForDomain(forDomain);remoteFrame&&(remoteFrame.loaded=!0,_s.makeRequest(isPOST,url,data,contentType,callback))});return null},this.insertIFrame=function(forDomain,callback){var remoteFrame=document.createElement("iframe");remoteFrame.id="_conviva_iframe_"+forDomain+"_"+DataLoader.frameId,remoteFrame.style.height="0px",remoteFrame.style.width="0px",remoteFrame.style.top="-50px",remoteFrame.style.left="-50px",remoteFrame.style.borderWidth="0px",remoteFrame.height=0,remoteFrame.width=0,remoteFrame.src=forDomain+DataLoader.frameUrl,remoteFrame.onload=callback,DataLoader.communicationFramesIds[forDomain]=remoteFrame.id;var body=document.body||document.getElementsByTagName("body")[0];body&&body.appendChild(remoteFrame)},this.removeIFrame=function(communicationFrameId){var remoteFrame=_s.findFrameById(communicationFrameId);if(null!=remoteFrame){var body=document.body||document.getElementsByTagName("body")[0];body.removeChild(remoteFrame)}},_s!=STAT_INIT&&_constr.apply(_s,arguments)}function Infer(){function _constr(){_s.Reset()}function __Update(phtNow){var now=Utils.getInstance().epochTimeMs();return _s._lastPollTime>0&&now>_s._lastPollTime&&_s._lastPlayHeadTimeSpeeds.Insert(0,Lang.AsDouble(phtNow-_s._lastPlayHeadTime)/(now-_s._lastPollTime)),_s._lastPollTime=now,_s._lastPlayHeadTime=Lang.AsDouble(phtNow),_s._lastPlayHeadTimeSpeeds.Count>Math.max(_s.movingMinimumSamples,_s.notMovingMinimumSamples)&&_s._lastPlayHeadTimeSpeeds.RemoveAt(_s._lastPlayHeadTimeSpeeds.Count-1),_s.InferState()}function __InferState(){var inferredState=null,numPhSpeedSamples=_s._lastPlayHeadTimeSpeeds.Count;if(numPhSpeedSamples>=Math.min(_s.movingMinimumSamples,_s.notMovingMinimumSamples)){for(var avgSpeed=0,_for_array_1=_s._lastPlayHeadTimeSpeeds.Values,_for_idx_2=0;_for_idx_2<_for_array_1.length;_for_idx_2++){var phSpeed=_for_array_1[_for_idx_2];avgSpeed+=phSpeed}avgSpeed/=numPhSpeedSamples,numPhSpeedSamples>=_s.movingMinimumSamples&&Math.abs(avgSpeed-_s.movingExpectedSpeed)<_s.movingSpeedTolerance&&(inferredState=Infer.MOVING_STATE),numPhSpeedSamples>=_s.notMovingMinimumSamples&&avgSpeed==_s.notMovingExpectedSpeed&&(inferredState=Infer.NOT_MOVING_STATE)}return _s.resetAfter&&null!=inferredState&&_s.Reset(),inferredState}function __Reset(){_s._lastPlayHeadTimeSpeeds=new ListCS,_s._lastPlayHeadTime=-1,_s._lastPollTime=0}var _s=this;_s==STAT_INIT&&(Infer.MOVING_STATE="MOVING"),_s==STAT_INIT&&(Infer.NOT_MOVING_STATE="NOT_MOVING"),_s!=STAT_INIT&&(_s.movingMinimumSamples=3),_s!=STAT_INIT&&(_s.notMovingMinimumSamples=3),_s!=STAT_INIT&&(_s.movingExpectedSpeed=1),_s!=STAT_INIT&&(_s.notMovingExpectedSpeed=0),_s!=STAT_INIT&&(_s.movingSpeedTolerance=.25),_s!=STAT_INIT&&(_s.resetAfter=!1),_s!=STAT_INIT&&(_s._lastPlayHeadTimeSpeeds=void 0),_s!=STAT_INIT&&(_s._lastPlayHeadTime=0),_s!=STAT_INIT&&(_s._lastPollTime=0),defPubMeth(_s,"Update",__Update),defPrivMeth(_s,"InferState",__InferState),defPubMeth(_s,"Reset",__Reset),_s!=STAT_INIT&&_constr.apply(_s,arguments)}function ConvivaVideojsStreamerProxy(){function _constr(vjsPlayer){ConvivaStreamerProxy.call(_s),_s.Log("ConvivaVideojsStreamerProxy._constr()"),_s._vjsPlayer=vjsPlayer,_s._infer=new Conviva.Infer,_s._setAllEventListeners(),_s._startPolling(),_s.firstPlay=!0,_s.tech=null;var requestTech=new Object;if(requestTech.IWillNotUseThisInPlugins=!0,_s.requestTech=requestTech,null!==(_s.tech=_s._vjsPlayer.tech(_s.requestTech)),_s.tech.hls){var bandW=Math.round(_s.tech.hls.bandwidth/1024),updatedStream=new StreamInfo(bandW,null,null,(-1),(-1),(-1));_s.SetStream(updatedStream)}}function __Cleanup(){_s.Log("ConvivaVideojsStreamerProxy.Cleanup()"),_s.Log("ConvivaVideojsStreamer: leave the inference in..."),_s.Log("ConvivaVideojsStreamer: leave the event listeners and player in..."),_s._duration=-1,_s.super_Cleanup()}function __GetCapabilities(){return _s._capabilities}var _s=this;_s!=STAT_INIT&&(_s._capabilities=ConvivaStreamerProxy.CAPABILITY_VIDEO+ConvivaStreamerProxy.CAPABILITY_QUALITY_METRICS+ConvivaStreamerProxy.CAPABILITY_BITRATE_METRICS,_s._duration=-1),defPubMeth(_s,"Cleanup",__Cleanup),defPubMeth(_s,"GetCapabilities",__GetCapabilities),this.GetDuration=function(){return _s._duration},this.GetBufferLengthMs=function(){return _s._bufferLengthMs},this.GetEncodedFrameRate=function(){return _s._encodedFrameRate},this.GetPlayheadTimeMs=function(){return _s._playheadTimeMs},this.SetDuration=function(duration){if(isFinite(duration)&&duration>0){var durationSec=duration;if(_s.GetDuration()!=durationSec){_s._duration=durationSec;var meta={};meta[ConvivaStreamerProxy.METADATA_DURATION]=_s._duration,_s.SetMetadata(meta)}}},this.SetPlayheadTimeMs=function(pht){if(isFinite(pht)&&pht>0){var phtMs=1e3*pht;_s.GetPlayheadTimeMs()!=phtMs&&(_s._playheadTimeMs=phtMs),_s.InferState()}},this.SetPlayerState=function(convivaState){_s.GetPlayingState()!==convivaState&&(_s.SetPlayingState(convivaState),_s._infer.Reset())},this.InferState=function(){if(_s._infer){var newState=_s._infer.Update(_s.GetPlayheadTimeMs());newState&&(newState===Conviva.Infer.MOVING_STATE&&_s.GetPlayingState()!==Conviva.ConvivaStreamerProxy.PLAYING&&(_s.Log("ConvivaVideojsStreamerProxy.InferState(): PLAYING"),_s.SetPlayerState(Conviva.ConvivaStreamerProxy.PLAYING)),newState===Conviva.Infer.NOT_MOVING_STATE&&_s.GetPlayingState()===Conviva.ConvivaStreamerProxy.PLAYING&&(_s.Log("ConvivaVideojsStreamerProxy.InferState(): BUFFERING"),_s.SetPlayerState(Conviva.ConvivaStreamerProxy.BUFFERING)))}},this._startPolling=function(){_s._polling=!0,_s._cancelTimer=Utils.getInstance()._settings.platformApi.createTimer(_s._poll,100,"ConvivaVideojsStreamerProxy._poll")},this._poll=function(){Utils.getInstance().runProtected(function(){return _s._polling&&_s._vjsPlayer?void _s.SetPlayheadTimeMs(_s._vjsPlayer.currentTime()):void _s.SetPlayheadTimeMs(0)},"ConvivaVideojsStreamerProxy._poll")},this._stopPolling=function(){_s._polling||"function"!=typeof _s._cancelTimer||_s._cancelTimer(),_s._polling=!1},this._declareError=function(errMsg){_s.Log("ConvivaVideojsStreamerProxy._declareError: "+errMsg),_s.SetError(StreamerError.makeUnscopedError(errMsg,StreamerError.SEVERITY_FATAL))},this._setAllEventListeners=function(){_s.Log("ConvivaVideojsStreamerProxy._setAllEventListeners()"),_s._vjsPlayer&&(_s._vjsPlayer.on("ended",_s.onEnded),_s._vjsPlayer.on("loadedmetadata",_s.onLoadedMetadata),_s._vjsPlayer.on("loadstart",_s.onLoadstart),_s._vjsPlayer.on("pause",_s.onPause),_s._vjsPlayer.on("durationchange",_s.onDurationchange),_s._vjsPlayer.on("emptied",_s.onEmptied),_s._vjsPlayer.on("stalled",_s.onStalled),_s._vjsPlayer.on("waiting",_s.onWaiting),_s._vjsPlayer.on("play",_s.onPlay),_s._vjsPlayer.on("error",_s.onError),_s._vjsPlayer.on("mediachange",_s.onMediaChange),_s._vjsPlayer.on("progress",_s.onProgress))},this._removeAllEventListeners=function(){_s.Log("ConvivaVideojsStreamerProxy._removeAllEventListeners()"),_s._vjsPlayer&&(_s._vjsPlayer.off("ended",_s.onEnded),_s._vjsPlayer.off("loadedmetadata",_s.onLoadedMetadata),_s._vjsPlayer.off("loadstart",_s.onLoadstart),_s._vjsPlayer.off("pause",_s.onPause),_s._vjsPlayer.off("durationchange",_s.onDurationchange),_s._vjsPlayer.off("emptied",_s.onEmptied),_s._vjsPlayer.off("stalled",_s.onStalled),_s._vjsPlayer.off("waiting",_s.onWaiting),_s._vjsPlayer.off("play",_s.onPlay),_s._vjsPlayer.off("error",_s.onError),_s._vjsPlayer.off("mediachange",_s.onMediaChange))},this.onPause=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onPause"),_s.SetPlayerState(Conviva.ConvivaStreamerProxy.PAUSED)},"ConvivaVideojsStreamerProxy.onPause")},this.onLoadedMetadata=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onLoadedMetadata"),_s._vjsPlayer.duration()&&_s._vjsPlayer&&_s.SetDuration(_s._vjsPlayer.duration())},"ConvivaVideojsStreamerProxy.onLoadedMetadata")},this.onEnded=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onEnded"),_s._vjsPlayer&&_s.SetPlayerState(Conviva.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onEnded")},this.onDurationchange=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onDurationchange"),_s._vjsPlayer&&_s.SetDuration(_s._vjsPlayer.duration())},"ConvivaVideojsStreamerProxy.onDurationchange")},this.onLoadstart=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onLoadstart"),_s.SetPlayerState(Conviva.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onLoadstart")},this.onPlay=function(event,p1,p2){Utils.getInstance().runProtected(function(){return _s.Log("ConvivaVideojsStreamerProxy.onPlay"),_s.firstPlay?(_s.Log("ConvivaVideojsStreamerProxy.onPlay :First Play IGNORED!!"),void(_s.firstPlay=!1)):void _s.SetPlayerState(Conviva.ConvivaStreamerProxy.PLAYING)},"ConvivaVideojsStreamerProxy.onPlay")},this.onStalled=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onStalled NO STATE CHANGE")},"ConvivaVideojsStreamerProxy.onStalled")},this.onEmptied=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onEmptied"),_s.Log("ConvivaVideojsStreamerProxy.onEmptied"),_s.SetPlayerState(Conviva.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onEmptied")},this.onWaiting=function(event,p1,p2){Utils.getInstance().runProtected(function(){_s.Log("ConvivaVideojsStreamerProxy.onWaiting"),_s.Log("ConvivaVideojsStreamerProxy.onWaiting"),_s.SetPlayerState(Conviva.ConvivaStreamerProxy.BUFFERING)},"ConvivaVideojsStreamerProxy.onWaiting")},this.onError=function(){Utils.getInstance().runProtected(function(){if(_s.Log("ConvivaVideojsStreamerProxy.onError"),_s._vjsPlayer){var errorEvent=_s._vjsPlayer.error(),reportedError=_s._convertError(errorEvent?errorEvent.code:99);_s.Log("MediaError: "+errorEvent.message),_s._declareError(reportedError)}},"ConvivaVideojsStreamerProxy.onError")},this.onProgress=function(){Utils.getInstance().runProtected(function(){if(_s.Log("ConvivaVideojsStreamerProxy.onProgress"),_s._vjsPlayer&&"undefined"!=typeof _s._vjsPlayer.tech(_s.requestTech).hls){var updatedStream=new StreamInfo(Math.round(_s._vjsPlayer.tech(_s.requestTech).hls.playlists.media().attributes.BANDWIDTH/1024),null,null,(-1),(-1),(-1));_s.SetStream(updatedStream)}},"ConvivaVideojsStreamerProxy.onProgress")},this.onMediaChange=function(){Utils.getInstance().runProtected(function(){if(_s.Log("ConvivaVideojsStreamerProxy.onMediaChange"),_s._vjsPlayer&&"undefined"!=typeof _s._vjsPlayer.tech(_s.requestTech).hls){var updatedStream=new StreamInfo(Math.round(_s._vjsPlayer.tech(_s.requestTech).hls.playlists.media().attributes.BANDWIDTH/1024),null,null,(-1),(-1),(-1));_s.SetStream(updatedStream)}},"ConvivaVideojsStreamerProxy.onMediaChange")},this._convertError=function(code){var errStr;switch(code){case 0:errStr="MEDIA_ERR_CUSTOM";break;case 1:errStr="MEDIA_ERR_ABORTED";break;case 2:errStr="MEDIA_ERR_NETWORK";break;case 3:errStr="MEDIA_ERR_DECODE";break;case 4:errStr="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:errStr="MEDIA_ERR_UNKNOWN"}return _s.Log("MediaError: code "+code+" "+errStr),errStr},_s!=STAT_INIT&&_constr.apply(_s,arguments)}function Html5PlatformApi(){function _constr(){_s._dataLoader=new DataLoader,_s.platform=navigator&&navigator.platform&&(navigator.platform.toString?navigator.platform.toString():null)}function __getPlatformMetadata(){var res={sch:"html5.1"};return res.np=navigator&&navigator.platform&&(navigator.platform.toString?navigator.platform.toString():null),res.nua=navigator&&navigator.userAgent&&(navigator.userAgent.toString?navigator.userAgent.toString():null),res}var _s=this,_convivaKey="convivaPersistent";this.cleanup=function(){null!=_s._dataLoader&&(_s._dataLoader.cleanup(),_s._dataLoader=null)},this.saveLocalData=function(data,callback){try{localStorage.setItem(_convivaKey,data)}catch(e){return void callback(!1)}callback(!0)},this.loadLocalData=function(callback){try{var data=localStorage.getItem(_convivaKey);callback(!0,data)}catch(e){callback(!1,"")}},this.deleteLocalData=function(){try{localStorage.clear()}catch(e){}},this.httpRequest=function(isPOST,url,data,contentType,callback){return"string"!=typeof data&&(data=_s.jsonEncode(data,null)),_s._dataLoader.makeRequest(isPOST,url,data,contentType,callback)},this.epochTimeMs=function(){var d=new Date;return d.getTime()},this.createTimer=function(timerAction,intervalMs,actionName){var timerId=setInterval(timerAction,intervalMs);return function(){timerId!=-1&&(clearInterval(timerId),timerId=-1)}},this.jsonEncode=function(obj){var jsonString=null;return jsonString=JSON.stringify(obj)},this.jsonDecode=function(json){var parsedJson=null;return parsedJson=JSON.parse(json)},this.consoleLog=function(message){"undefined"!=typeof console&&console.log},this.consoleErr=function(errMsg){"undefined"!=typeof console&&console.error},this.getDevice=function(){return"browser"},this.getDeviceVersion=function(){return null},this.getDeviceType=function(){return"PC"},this.getOS=function(){return _s._getPlatformName()},this.getOSVersion=function(){return null},defPubMeth(_s,"getPlatformMetadata",__getPlatformMetadata),this._getPlatformName=function(){if(null==_s.platform)return null;var stringContains=function(haystack,needle){return haystack.indexOf(needle)>=0};return stringContains(_s.platform,"iPad")||stringContains(_s.platform,"iPhone")||stringContains(_s.platform,"iPod")?"IOS":stringContains(_s.platform,"Mac")?"MAC":stringContains(_s.platform,"Win")?"WIN":stringContains(_s.platform,"Linux")||stringContains(_s.platform,"SunOS")||stringContains(_s.platform,"HP-UX")||stringContains(_s.platform,"BSD")?"UNIX":stringContains(_s.platform,"PLAYSTATION 3")?"PS3":stringContains(_s.platform,"XBOX")?"XBOX":null},_s!=STAT_INIT&&_constr.apply(_s,arguments)}function ConvivaVideojsPlatformApi(){function _constr(){Html5PlatformApi.call(_s)}var _s=this;this.getPlatformMetadata=function(){var res=_s.super_getPlatformMetadata();return res.sch="bc.perform.dt.1",res.fwv=bc.VERSION||"1.0",res},_constr.apply(_s,arguments)}registerName(registerName,"registerName"),registerName(__id,"__id"),registerName(getConvivaType,"getConvivaType"),registerName(importConvivaPrivateProgram,"importConvivaPrivateProgram"),registerName(STAT_INIT,"STAT_INIT"),registerName(statInit,"statInit"),registerName(defPubMeth,"defPubMeth"),registerName(defPrivMeth,"defPrivMeth"),registerName(defStatMeth,"defStatMeth"),registerName(defGet,"defGet"),registerName(defSet,"defSet"),registerName(defStatGet,"defStatGet"),registerName(defStatSet,"defStatSet"),registerName(slIsArray,"slIsArray"),registerName(slForEachPropValue,"slForEachPropValue"),registerName(slForEachProp,"slForEachProp"),registerName(declTestClass,"declTestClass"),registerName(declTestMethod,"declTestMethod"),statInit(sluint,"sluint"),statInit(slint,"slint"),statInit(Int64,"Int64"),statInit(UInt64,"UInt64"),statInit(CandidateStream,"CandidateStream"),statInit(ConvivaContentInfo,"ConvivaContentInfo"),statInit(ConvivaStreamerProxy,"ConvivaStreamerProxy"),statInit(LivePass,"LivePass"),statInit(PlayerStates,"PlayerStates"),statInit(StreamInfo,"StreamInfo"),statInit(StreamSwitch,"StreamSwitch"),statInit(StreamerError,"StreamerError"),statInit(Monitor,"Monitor"),statInit(EventQueue,"EventQueue"),statInit(Session,"Session"),statInit(SessionFactory,"SessionFactory"),statInit(ArrayCS,"ArrayCS"),statInit(Cleanable,"Cleanable"),statInit(DictionaryCS,"DictionaryCS"),statInit(Eventer,"Eventer"),statInit(KeyValuePairCS,"KeyValuePairCS"),statInit(Lang,"Lang"),statInit(ListCS,"ListCS"),statInit(NativeLang,"NativeLang"),statInit(Settings,"Settings"),statInit(Utils,"Utils"),statInit(DataLoader,"DataLoader"),statInit(Infer,"Infer"),statInit(ConvivaVideojsStreamerProxy,"ConvivaVideojsStreamerProxy"),statInit(Html5PlatformApi,"Html5PlatformApi"),statInit(ConvivaVideojsPlatformApi,"ConvivaVideojsPlatformApi")}();var Conviva="undefined"!=typeof Conviva?Conviva:function(){};Conviva.LivePass=ConvivaPrivateLoader.LivePass,Conviva.ConvivaContentInfo=ConvivaPrivateLoader.ConvivaContentInfo,Conviva.StreamerError=ConvivaPrivateLoader.StreamerError,Conviva.ConvivaStreamerProxy=ConvivaPrivateLoader.ConvivaStreamerProxy,Conviva.Settings=ConvivaPrivateLoader.Settings,Conviva.StreamInfo=ConvivaPrivateLoader.StreamInfo,Conviva.Utils=ConvivaPrivateLoader.Utils,Conviva.ConvivaVideojsStreamerProxy=ConvivaPrivateLoader.ConvivaVideojsStreamerProxy,Conviva.ConvivaVideojsPlatformApi=ConvivaPrivateLoader.ConvivaVideojsPlatformApi,Conviva.Infer=ConvivaPrivateLoader.Infer}module.exports=Conviva}).call(void 0)},{}],15:[function(require,module,exports){"use strict";function init(){videojs.plugin("conviva",plugin)}var Conviva,Fan,_extend,first,hasProp,plugin,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Conviva=require("./ConvivaLivePass_BcPerform"),Fan=require("../fan"),hasProp={}.hasOwnProperty,_extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&("object"===_typeof(parent[key])?(child[key]=child[key]||{},child[key]=_extend(child[key],parent[key])):child[key]=parent[key]);return child},first=!0,module.exports={init:init},plugin=function(options){options.debug;var cci,cleanup,mediainfo,onAdsAdEnded,onAdsAdStarted,_onDispose,onEnded,onError,onLoadStart,onContentPlayback,onRestart,player,sessionId,setMetadata,streamProxy,tags;player=this,options.debug?(Conviva.LivePass.initWithSettings(options.customerKey,{gatewayUrl:"https://espn-com-test.testonly.conviva.com"}),Conviva.LivePass.toggleTraces(!0)):Conviva.LivePass.init(options.customerKey),streamProxy=new Conviva.ConvivaVideojsStreamerProxy(player),setMetadata=function(){mediainfo=player.mediainfo||{},tags={site:location.hostname,userId:Fan.SWID,bundleVersion:"1.5.1"},mediainfo.listing&&(mediainfo.listing.broadcasts&&mediainfo.listing.broadcasts[0]&&mediainfo.listing.broadcasts[0].abbreviation&&(tags.network=mediainfo.listing.broadcasts[0].abbreviation),mediainfo.listing.type&&(tags.assetType=mediainfo.listing.type),mediainfo.listing.airingId&&(tags.airingId=mediainfo.listing.airingId),mediainfo.listing.eventId&&(tags.eventId=mediainfo.listing.eventId)),options.tags&&_extend(tags,options.tags),cci=new Conviva.ConvivaContentInfo(mediainfo.name,tags),cci.defaultReportingCdnName=Conviva.ConvivaContentInfo.CDN_NAME_OTHER,cci.isLive=!(mediainfo.duration&&mediainfo.duration>0),cci.streamUrl=player.currentSrc(),cci.playerName=options.playerName,cci.viewerId=Fan.SWID},onLoadStart=function(){options.debug,(!player.ads||"ad-playback"!==player.ads.state&&"content-resuming"!==player.ads.state)&&null!=sessionId&&cleanup(),null==sessionId&&(setMetadata(),player.ads&&player.ads.state?(options.debug,sessionId=Conviva.LivePass.createSession(null,cci)):(options.debug,sessionId=Conviva.LivePass.createSession(streamProxy,cci)))},onAdsAdStarted=function(){options.debug,Conviva.LivePass.detachStreamer(sessionId,streamProxy),Conviva.LivePass.adStart(sessionId)},onAdsAdEnded=function(){options.debug,Conviva.LivePass.adEnd(sessionId),options.debug,Conviva.LivePass.attachStreamer(sessionId,streamProxy)},onContentPlayback=function(){null!=sessionId&&(options.debug,Conviva.LivePass.attachStreamer(sessionId,streamProxy))},onRestart=function(){0===player.currentTime()&&(options.debug,null==sessionId?(setMetadata(),options.debug,sessionId=Conviva.LivePass.createSession(streamProxy,cci)):(options.debug,Conviva.LivePass.attachStreamer(sessionId,streamProxy)))},onEnded=function(){options.debug,player.ads&&"ad-playback"===player.ads.state||(cleanup(),player.one("seeking",onRestart))},cleanup=function(){null!=sessionId&&(player.ads&&"ad-playback"===player.ads.state&&Conviva.LivePass.adEnd(sessionId),options.debug,Conviva.LivePass.detachStreamer(sessionId,streamProxy),options.debug,Conviva.LivePass.cleanupSession(sessionId),sessionId=null)},onError=function(){var error=player.error();null==sessionId&&(setMetadata(),options.debug,sessionId=Conviva.LivePass.createSession(streamProxy,cci)),options.debug,Conviva.LivePass.reportError(sessionId,"code:"+error.code+" "+(error.message||error.headline));var eventName="error:"+error.code,eventAttributes={};eventAttributes.currentTime=player.currentTime()+"";var i,bufferedRanges=[];for(i=0;i<player.buffered().length;i++)bufferedRanges.push(player.buffered().start(i)+"-"+player.buffered().end(i));eventAttributes.buffered=bufferedRanges.join(", ");var seekableRanges=[];for(i=0;i<player.seekable().length;i++)seekableRanges.push(player.seekable().start(i)+"-"+player.seekable().end(i));eventAttributes.seekable=seekableRanges.join(", "),Conviva.LivePass.sendEvent(eventName,eventAttributes),cleanup()},_onDispose=function(){null!=sessionId&&Conviva.LivePass.cleanupSession(sessionId),player.off("ads-ad-started",onAdsAdStarted),player.off("ads-ad-ended",onAdsAdEnded),player.off("contentplayback",onContentPlayback),player.off("dispose",_onDispose),player.off("ended",onEnded),player.off("error",onError),player.off("loadstart",onLoadStart),player.off("seeking",onRestart),first=!0},first&&(first=!1,options.debug,player.on("ads-ad-started",onAdsAdStarted),player.on("ads-ad-ended",onAdsAdEnded),player.on("contentplayback",onContentPlayback),player.on("dispose",_onDispose),player.on("ended",onEnded),player.on("error",onError),player.on("loadstart",onLoadStart))}},{"../fan":16,"./ConvivaLivePass_BcPerform":14}],16:[function(require,module,exports){"use strict";(function(){function getAutoStart(callback){SWID=Cookie.get("SWID");var autoPlay,vas;autoPlay=!0,vas=Cookie.get("VAS"),vas&&(autoPlay=1===parseInt(vas,10)),"string"==typeof SWID&&0===SWID.indexOf("{")?FanApi.getAutoStartForFanId(SWID,function(autoStart){autoPlay=autoStart===!0||autoStart===!1?autoStart:autoPlay,callback&&callback(autoPlay)}):callback&&callback(autoPlay)}function setAutoStart(value){SWID=Cookie.get("SWID"),value!==!0&&value!==!1||(Cookie.set("VAS",value?1:2),SWID&&FanApi.updateAutoStartForFanId(SWID,value))}var Cookie,FanApi,SWID;Cookie=require("cookie-cutter"),FanApi=new(require("watch-fanapi")),exports.getAutoStart=getAutoStart,exports.setAutoStart=setAutoStart,Object.defineProperty(exports,"SWID",{get:function(){return Cookie.get("SWID")}})}).call(void 0)},{"cookie-cutter":23,"watch-fanapi":37}],17:[function(require,module,exports){module.exports={EMBARGOED:"Video is not yet available.",EXPIRED:"Video has expired.",EXPIRED_CONTENT:"Video has expired.",Fullscreen:"Full Screen",GEOLOCATION_NOT_ALLOWED:"Video is not available in your country.",MEDIA_ERR_ABORTED_HEADLINE:"The video download was cancelled",MEDIA_ERR_ABORTED_MESSAGE:"You aborted the media playback",MEDIA_ERR_DECODE_HEADLINE:"The video is bad or in a format that can't be played on your browser",MEDIA_ERR_DECODE_MESSAGE:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",MEDIA_ERR_ENCRYPTED_HEADLINE:"The video you're trying to watch is encrypted and we don't know how to decrypt it",MEDIA_ERR_ENCRYPTED_MESSAGE:"The media is encrypted and we do not have the keys to decrypt it.",MEDIA_ERR_NETWORK_HEADLINE:"The video connection was lost, please confirm you're connected to the internet",MEDIA_ERR_NETWORK_MESSAGE:"A network error caused the media download to fail part-way.",MEDIA_ERR_SRC_NOT_SUPPORTED_HEADLINE:"This video is either unavailable or not supported in this browser",MEDIA_ERR_SRC_NOT_SUPPORTED_MESSAGE:"The media could not be loaded, either because the server or network failed or because the format is not supported.",NOT_FOUND:"This video is unavailable.","Non-Fullscreen":"Exit Full Screen",STREAM_LIMITED:"The maximum number of concurrent streams has been reached on your account. If you have any questions or need assistance please visit es.pn/watchfaq or call 888-549-ESPN.",STREAM_LIMIT_ERROR:"The maximum number of concurrent streams has been reached on your account. If you have any questions or need assistance please visit es.pn/watchfaq or call 888-549-ESPN."}},{}],18:[function(require,module,exports){module.exports={"A network error caused the video download to fail part-way.":"Un error de red ha interrumpido la descarga del vdeo.",Autoplay:"Reproduccin automtica","Caption Settings":"Opciones de subttulos",Captions:"Subttulos especiales",Chapters:"Captulos","Check out this video on ESPN":"Echa un vistazo a este video en ESPN Play","Closed Caption":"Subttulos","Closed Captions":"Subttulos",Copied:"Copiado",Copy:"Copiar","Copy Embed Link":"Obtener cdigo","Copy Link":"Obtener URL","Current Time":"Tiempo reproducido","Duration Time":"Duracin total","Email Video":"Enviar por Email",Email:"Enviar por correo","Embed Code":"Insertar cdigo",EMBARGOED:"El vdeo no est disponible todava.","Error Code":"Cdigo De Error",EXPIRED:"El video ha expirado.",EXPIRED_CONTENT:"El video ha expirado.",From:"De",Fullscreen:"Maximizar video",GEOLOCATION_NOT_ALLOWED:"El vdeo no est disponible en tu pas.",LIVE:"DIRECTO",Loaded:"Cargado",MEDIA_ERR_ABORTED_HEADLINE:"The video download was cancelled",MEDIA_ERR_ABORTED_MESSAGE:"Ha interrumpido la reproduccin del vdeo.",MEDIA_ERR_DECODE_HEADLINE:"The video is bad or in a format that can't be played on your browser",MEDIA_ERR_DECODE_MESSAGE:"La reproduccin de vdeo se ha interrumpido por un problema de corrupcin de datos o porque el vdeo precisa funciones que su navegador no ofrece.",MEDIA_ERR_ENCRYPTED_HEADLINE:"The video you're trying to watch is encrypted and we don't know how to decrypt it",MEDIA_ERR_ENCRYPTED_MESSAGE:"The media is encrypted and we do not have the keys to decrypt it.",MEDIA_ERR_NETWORK_HEADLINE:"The video connection was lost, please confirm you're connected to the internet",MEDIA_ERR_NETWORK_MESSAGE:"Un error de red ha interrumpido la descarga del vdeo.",MEDIA_ERR_SRC_NOT_SUPPORTED_HEADLINE:"This video is either unavailable or not supported in this browser",MEDIA_ERR_SRC_NOT_SUPPORTED_MESSAGE:"No se ha podido cargar el vdeo debido a un fallo de red o del servidor o porque el formato es incompatible.",Message:"Mensaje",Menu:"Men",Mute:"Silenciador","No compatible source was found for this video.":"No se ha encontrado ninguna fuente compatible con este vdeo.","Non-Fullscreen":"Tamao original",NOT_FOUND:"Este vdeo no est disponible.",OK:"aprobar",Pause:"Pausa",Play:"Reproducir","Playback Rate":"Velocidad de reproduccin",Progress:"Progreso","Remaining Time":"Tiempo restante",Replay:"Reproducir de nuevo",Send:"Enviar",Settings:"Configuracin",Share:"Compartir","Start at":"Iniciar en",Stop:"Detener","Stream Type":"Tipo de secuencia",Subtitles:"Subttulos","The video could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el vdeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The video playback was aborted due to a corruption problem or because the video used features your browser did not support.":"La reproduccin de vdeo se ha interrumpido por un problema de corrupcin de datos o porque el vdeo precisa funciones que su navegador no ofrece.","This video is unavailable":"Este vdeo no est disponible.",To:"A",Unmute:"Eliminar silenciador",Unmuted:"Eliminar silenciador",
"Up Next":"A continuacin","You aborted the video playback":"Ha interrumpido la reproduccin del vdeo.","captions off":"Subttulos especiales desactivados","subtitles off":"Subttulos desactivados"}},{}],19:[function(require,module,exports){"use strict";(function(){var I18n,LANG,TRANSLATIONS;TRANSLATIONS={},LANG="en",I18n=function(key){return TRANSLATIONS[LANG][key]||TRANSLATIONS.en[key]||key},I18n.add=function(lang,data){var k,v;TRANSLATIONS[lang]||(TRANSLATIONS[lang]={});for(k in data)v=data[k],TRANSLATIONS[lang][k]=v},I18n.reset=function(){TRANSLATIONS={},LANG="en"},I18n.setLang=function(lang){TRANSLATIONS[lang]&&(LANG=lang)},I18n.translations=function(){return TRANSLATIONS},I18n.add("en",require("./en.json")),I18n.add("es",require("./es.json")),I18n.add("pt",require("./pt.json")),module.exports=I18n}).call(void 0)},{"./en.json":17,"./es.json":18,"./pt.json":20}],20:[function(require,module,exports){module.exports={"Check out this video on ESPN":"Confira esse vdeo no WatchESPN"}},{}],21:[function(require,module,exports){(function(process,global){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof _dereq_&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof _dereq_&&_dereq_,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function any(promises){var ret=new SomePromiseArray(promises),promise=ret.promise();return ret.setHowMany(1),ret.setUnwrap(),ret.init(),promise}var SomePromiseArray=Promise._SomePromiseArray;Promise.any=function(promises){return any(promises)},Promise.prototype.any=function(){return any(this)}}},{}],2:[function(_dereq_,module,exports){"use strict";function Async(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new Queue(16),this._normalQueue=new Queue(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var self=this;this.drainQueues=function(){self._drainQueues()},this._schedule=schedule}function AsyncInvokeLater(fn,receiver,arg){this._lateQueue.push(fn,receiver,arg),this._queueTick()}function AsyncInvoke(fn,receiver,arg){this._normalQueue.push(fn,receiver,arg),this._queueTick()}function AsyncSettlePromises(promise){this._normalQueue._pushOne(promise),this._queueTick()}var firstLineError;try{throw new Error}catch(e){firstLineError=e}var schedule=_dereq_("./schedule"),Queue=_dereq_("./queue"),util=_dereq_("./util");Async.prototype.setScheduler=function(fn){var prev=this._schedule;return this._schedule=fn,this._customScheduler=!0,prev},Async.prototype.hasCustomScheduler=function(){return this._customScheduler},Async.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},Async.prototype.disableTrampolineIfNecessary=function(){util.hasDevTools&&(this._trampolineEnabled=!1)},Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},Async.prototype.fatalError=function(e,isNode){isNode?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},Async.prototype.throwLater=function(fn,arg){if(1===arguments.length&&(arg=fn,fn=function(){throw arg}),"undefined"!=typeof setTimeout)setTimeout(function(){fn(arg)},0);else try{this._schedule(function(){fn(arg)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},util.hasDevTools?(Async.prototype.invokeLater=function(fn,receiver,arg){this._trampolineEnabled?AsyncInvokeLater.call(this,fn,receiver,arg):this._schedule(function(){setTimeout(function(){fn.call(receiver,arg)},100)})},Async.prototype.invoke=function(fn,receiver,arg){this._trampolineEnabled?AsyncInvoke.call(this,fn,receiver,arg):this._schedule(function(){fn.call(receiver,arg)})},Async.prototype.settlePromises=function(promise){this._trampolineEnabled?AsyncSettlePromises.call(this,promise):this._schedule(function(){promise._settlePromises()})}):(Async.prototype.invokeLater=AsyncInvokeLater,Async.prototype.invoke=AsyncInvoke,Async.prototype.settlePromises=AsyncSettlePromises),Async.prototype.invokeFirst=function(fn,receiver,arg){this._normalQueue.unshift(fn,receiver,arg),this._queueTick()},Async.prototype._drainQueue=function(queue){for(;queue.length()>0;){var fn=queue.shift();if("function"==typeof fn){var receiver=queue.shift(),arg=queue.shift();fn.call(receiver,arg)}else fn._settlePromises()}},Async.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},Async.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},Async.prototype._reset=function(){this._isTickUsed=!1},module.exports=Async,module.exports.firstLineError=firstLineError},{"./queue":26,"./schedule":29,"./util":36}],3:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,debug){var calledBind=!1,rejectThis=function(_,e){this._reject(e)},targetRejected=function(e,context){context.promiseRejectionQueued=!0,context.bindingPromise._then(rejectThis,rejectThis,null,this,e)},bindingResolved=function(thisArg,context){0===(50397184&this._bitField)&&this._resolveCallback(context.target)},bindingRejected=function(e,context){context.promiseRejectionQueued||this._reject(e)};Promise.prototype.bind=function(thisArg){calledBind||(calledBind=!0,Promise.prototype._propagateFrom=debug.propagateFromFunction(),Promise.prototype._boundValue=debug.boundValueFunction());var maybePromise=tryConvertToPromise(thisArg),ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();if(ret._setBoundTo(maybePromise),maybePromise instanceof Promise){var context={promiseRejectionQueued:!1,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,void 0,ret,context),maybePromise._then(bindingResolved,bindingRejected,void 0,ret,context),ret._setOnCancel(maybePromise)}else ret._resolveCallback(target);return ret},Promise.prototype._setBoundTo=function(obj){void 0!==obj?(this._bitField=2097152|this._bitField,this._boundTo=obj):this._bitField=this._bitField&-2097153},Promise.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},Promise.bind=function(thisArg,value){return Promise.resolve(value).bind(thisArg)}}},{}],4:[function(_dereq_,module,exports){"use strict";function noConflict(){try{Promise===bluebird&&(Promise=old)}catch(e){}return bluebird}var old;"undefined"!=typeof Promise&&(old=Promise);var bluebird=_dereq_("./promise")();bluebird.noConflict=noConflict,module.exports=bluebird},{"./promise":22}],5:[function(_dereq_,module,exports){"use strict";var cr=Object.create;if(cr){var callerCache=cr(null),getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}module.exports=function(Promise){function ensureMethod(obj,methodName){var fn;if(null!=obj&&(fn=obj[methodName]),"function"!=typeof fn){var message="Object "+util.classString(obj)+" has no method '"+util.toString(methodName)+"'";throw new Promise.TypeError(message)}return fn}function caller(obj){var methodName=this.pop(),fn=ensureMethod(obj,methodName);return fn.apply(obj,this)}function namedGetter(obj){return obj[this]}function indexedGetter(obj){var index=+this;return index<0&&(index=Math.max(0,index+obj.length)),obj[index]}var getGetter,util=_dereq_("./util"),canEvaluate=util.canEvaluate;util.isIdentifier;Promise.prototype.call=function(methodName){var args=[].slice.call(arguments,1);return args.push(methodName),this._then(caller,void 0,void 0,args,void 0)},Promise.prototype.get=function(propertyName){var getter,isIndex="number"==typeof propertyName;if(isIndex)getter=indexedGetter;else if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=null!==maybeGetter?maybeGetter:namedGetter}else getter=namedGetter;return this._then(getter,void 0,void 0,propertyName,void 0)}}},{"./util":36}],6:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,debug){var util=_dereq_("./util"),tryCatch=util.tryCatch,errorObj=util.errorObj,async=Promise._async;Promise.prototype["break"]=Promise.prototype.cancel=function(){if(!debug.cancellation())return this._warn("cancellation is disabled");for(var promise=this,child=promise;promise._isCancellable();){if(!promise._cancelBy(child)){child._isFollowing()?child._followee().cancel():child._cancelBranched();break}var parent=promise._cancellationParent;if(null==parent||!parent._isCancellable()){promise._isFollowing()?promise._followee().cancel():promise._cancelBranched();break}promise._isFollowing()&&promise._followee().cancel(),promise._setWillBeCancelled(),child=promise,promise=parent}},Promise.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},Promise.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},Promise.prototype._cancelBy=function(canceller){return canceller===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},Promise.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},Promise.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),async.invoke(this._cancelPromises,this,void 0))},Promise.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},Promise.prototype._unsetOnCancel=function(){this._onCancelField=void 0},Promise.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},Promise.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},Promise.prototype._doInvokeOnCancel=function(onCancelCallback,internalOnly){if(util.isArray(onCancelCallback))for(var i=0;i<onCancelCallback.length;++i)this._doInvokeOnCancel(onCancelCallback[i],internalOnly);else if(void 0!==onCancelCallback)if("function"==typeof onCancelCallback){if(!internalOnly){var e=tryCatch(onCancelCallback).call(this._boundValue());e===errorObj&&(this._attachExtraTrace(e.e),async.throwLater(e.e))}}else onCancelCallback._resultCancelled(this)},Promise.prototype._invokeOnCancel=function(){var onCancelCallback=this._onCancel();this._unsetOnCancel(),async.invoke(this._doInvokeOnCancel,this,onCancelCallback)},Promise.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},Promise.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(_dereq_,module,exports){"use strict";module.exports=function(NEXT_FILTER){function catchFilter(instances,cb,promise){return function(e){var boundTo=promise._boundValue();predicateLoop:for(var i=0;i<instances.length;++i){var item=instances[i];if(item===Error||null!=item&&item.prototype instanceof Error){if(e instanceof item)return tryCatch(cb).call(boundTo,e)}else if("function"==typeof item){var matchesPredicate=tryCatch(item).call(boundTo,e);if(matchesPredicate===errorObj)return matchesPredicate;if(matchesPredicate)return tryCatch(cb).call(boundTo,e)}else if(util.isObject(e)){for(var keys=getKeys(item),j=0;j<keys.length;++j){var key=keys[j];if(item[key]!=e[key])continue predicateLoop}return tryCatch(cb).call(boundTo,e)}}return NEXT_FILTER}}var util=_dereq_("./util"),getKeys=_dereq_("./es5").keys,tryCatch=util.tryCatch,errorObj=util.errorObj;return catchFilter}},{"./es5":13,"./util":36}],8:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function Context(){this._trace=new Context.CapturedTrace(peekContext())}function createContext(){if(longStackTraces)return new Context}function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0)return contextStack[lastIndex]}var longStackTraces=!1,contextStack=[];return Promise.prototype._promiseCreated=function(){},Promise.prototype._pushContext=function(){},Promise.prototype._popContext=function(){return null},Promise._peekContext=Promise.prototype._peekContext=function(){},Context.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,contextStack.push(this._trace))},Context.prototype._popContext=function(){if(void 0!==this._trace){var trace=contextStack.pop(),ret=trace._promiseCreated;return trace._promiseCreated=null,ret}return null},Context.CapturedTrace=null,Context.create=createContext,Context.deactivateLongStackTraces=function(){},Context.activateLongStackTraces=function(){var Promise_pushContext=Promise.prototype._pushContext,Promise_popContext=Promise.prototype._popContext,Promise_PeekContext=Promise._peekContext,Promise_peekContext=Promise.prototype._peekContext,Promise_promiseCreated=Promise.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){Promise.prototype._pushContext=Promise_pushContext,Promise.prototype._popContext=Promise_popContext,Promise._peekContext=Promise_PeekContext,Promise.prototype._peekContext=Promise_peekContext,Promise.prototype._promiseCreated=Promise_promiseCreated,longStackTraces=!1},longStackTraces=!0,Promise.prototype._pushContext=Context.prototype._pushContext,Promise.prototype._popContext=Context.prototype._popContext,Promise._peekContext=Promise.prototype._peekContext=peekContext,Promise.prototype._promiseCreated=function(){var ctx=this._peekContext();ctx&&null==ctx._promiseCreated&&(ctx._promiseCreated=this)}},Context}},{}],9:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,Context){function generatePromiseLifecycleEventObject(name,promise){return{promise:promise}}function defaultFireEvent(){return!1}function cancellationExecute(executor,resolve,reject){var promise=this;try{executor(resolve,reject,function(onCancel){if("function"!=typeof onCancel)throw new TypeError("onCancel must be a function, got: "+util.toString(onCancel));promise._attachCancellationCallback(onCancel)})}catch(e){return e}}function cancellationAttachCancellationCallback(onCancel){if(!this._isCancellable())return this;var previousOnCancel=this._onCancel();void 0!==previousOnCancel?util.isArray(previousOnCancel)?previousOnCancel.push(onCancel):this._setOnCancel([previousOnCancel,onCancel]):this._setOnCancel(onCancel)}function cancellationOnCancel(){return this._onCancelField}function cancellationSetOnCancel(onCancel){this._onCancelField=onCancel}function cancellationClearCancellationData(){this._cancellationParent=void 0,this._onCancelField=void 0}function cancellationPropagateFrom(parent,flags){if(0!==(1&flags)){this._cancellationParent=parent;var branchesRemainingToCancel=parent._branchesRemainingToCancel;void 0===branchesRemainingToCancel&&(branchesRemainingToCancel=0),parent._branchesRemainingToCancel=branchesRemainingToCancel+1}0!==(2&flags)&&parent._isBound()&&this._setBoundTo(parent._boundTo)}function bindingPropagateFrom(parent,flags){0!==(2&flags)&&parent._isBound()&&this._setBoundTo(parent._boundTo)}function boundValueFunction(){var ret=this._boundTo;return void 0!==ret&&ret instanceof Promise?ret.isFulfilled()?ret.value():void 0:ret}function longStackTracesCaptureStackTrace(){this._trace=new CapturedTrace(this._peekContext())}function longStackTracesAttachExtraTrace(error,ignoreSelf){if(canAttachTrace(error)){var trace=this._trace;if(void 0!==trace&&ignoreSelf&&(trace=trace._parent),void 0!==trace)trace.attachExtraTrace(error);else if(!error.__stackCleaned__){var parsed=parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n")),util.notEnumerableProp(error,"__stackCleaned__",!0)}}}function checkForgottenReturns(returnValue,promiseCreated,name,promise,parent){if(void 0===returnValue&&null!==promiseCreated&&wForgottenReturn){if(void 0!==parent&&parent._returnedNonUndefined())return;if(0===(65535&promise._bitField))return;name&&(name+=" ");var handlerLine="",creatorLine="";if(promiseCreated._trace){for(var traceLines=promiseCreated._trace.stack.split("\n"),stack=cleanStack(traceLines),i=stack.length-1;i>=0;--i){var line=stack[i];if(!nodeFramePattern.test(line)){var lineMatches=line.match(parseLinePattern);lineMatches&&(handlerLine="at "+lineMatches[1]+":"+lineMatches[2]+":"+lineMatches[3]+" ");break}}if(stack.length>0)for(var firstUserLine=stack[0],i=0;i<traceLines.length;++i)if(traceLines[i]===firstUserLine){i>0&&(creatorLine="\n"+traceLines[i-1]);break}}var msg="a promise was created in a "+name+"handler "+handlerLine+"but was not returned from it, see http://goo.gl/rRqMUw"+creatorLine;promise._warn(msg,!0,promiseCreated)}}function deprecated(name,replacement){var message=name+" is deprecated and will be removed in a future version.";return replacement&&(message+=" Use "+replacement+" instead."),warn(message)}function warn(message,shouldUseOwnTrace,promise){if(config.warnings){var ctx,warning=new Warning(message);if(shouldUseOwnTrace)promise._attachExtraTrace(warning);else if(config.longStackTraces&&(ctx=Promise._peekContext()))ctx.attachExtraTrace(warning);else{var parsed=parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n")}activeFireEvent("warning",warning)||formatAndLogError(warning,"",!0)}}function reconstructStack(message,stacks){for(var i=0;i<stacks.length-1;++i)stacks[i].push("From previous event:"),stacks[i]=stacks[i].join("\n");return i<stacks.length&&(stacks[i]=stacks[i].join("\n")),message+"\n"+stacks.join("\n")}function removeDuplicateOrEmptyJumps(stacks){for(var i=0;i<stacks.length;++i)(0===stacks[i].length||i+1<stacks.length&&stacks[i][0]===stacks[i+1][0])&&(stacks.splice(i,1),i--)}function removeCommonRoots(stacks){for(var current=stacks[0],i=1;i<stacks.length;++i){for(var prev=stacks[i],currentLastIndex=current.length-1,currentLastLine=current[currentLastIndex],commonRootMeetPoint=-1,j=prev.length-1;j>=0;--j)if(prev[j]===currentLastLine){commonRootMeetPoint=j;break}for(var j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]!==line)break;current.pop(),currentLastIndex--}current=prev}}function cleanStack(stack){for(var ret=[],i=0;i<stack.length;++i){var line=stack[i],isTraceLine="    (No stack trace)"===line||stackFramePattern.test(line),isInternalFrame=isTraceLine&&shouldIgnore(line);isTraceLine&&!isInternalFrame&&(indentStackFrames&&" "!==line.charAt(0)&&(line="    "+line),ret.push(line))}return ret}function stackFramesAsArray(error){for(var stack=error.stack.replace(/\s+$/g,"").split("\n"),i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line))break}return i>0&&(stack=stack.slice(i)),stack}function parseStackAndMessage(error){var stack=error.stack,message=error.toString();return stack="string"==typeof stack&&stack.length>0?stackFramesAsArray(error):["    (No stack trace)"],{message:message,stack:cleanStack(stack)}}function formatAndLogError(error,title,isSoft){if("undefined"!=typeof console){var message;if(util.isObject(error)){var stack=error.stack;message=title+formatStack(stack,error)}else message=title+String(error);"function"==typeof printWarning?printWarning(message,isSoft):"function"==typeof console.log||"object"==typeof console.log}}function fireRejectionEvent(name,localHandler,reason,promise){var localEventFired=!1;try{"function"==typeof localHandler&&(localEventFired=!0,"rejectionHandled"===name?localHandler(promise):localHandler(reason,promise))}catch(e){async.throwLater(e)}"unhandledRejection"===name?activeFireEvent(name,reason,promise)||localEventFired||formatAndLogError(reason,"Unhandled rejection "):activeFireEvent(name,promise)}function formatNonError(obj){var str;if("function"==typeof obj)str="[function "+(obj.name||"anonymous")+"]";else{str=obj&&"function"==typeof obj.toString?obj.toString():util.toString(obj);var ruselessToString=/\[object [a-zA-Z0-9$_]+\]/;if(ruselessToString.test(str))try{var newStr=JSON.stringify(obj);str=newStr}catch(e){}0===str.length&&(str="(empty array)")}return"(<"+snip(str)+">, no stack trace)"}function snip(str){var maxChars=41;return str.length<maxChars?str:str.substr(0,maxChars-3)+"..."}function longStackTracesIsSupported(){return"function"==typeof captureStackTrace}function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches)return{fileName:matches[1],line:parseInt(matches[2],10)}}function setBounds(firstLineError,lastLineError){if(longStackTracesIsSupported()){for(var firstFileName,lastFileName,firstStackLines=firstLineError.stack.split("\n"),lastStackLines=lastLineError.stack.split("\n"),firstIndex=-1,lastIndex=-1,i=0;i<firstStackLines.length;++i){var result=parseLineInfo(firstStackLines[i]);if(result){firstFileName=result.fileName,firstIndex=result.line;break}}for(var i=0;i<lastStackLines.length;++i){var result=parseLineInfo(lastStackLines[i]);if(result){lastFileName=result.fileName,lastIndex=result.line;break}}firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex||(shouldIgnore=function(line){if(bluebirdFramePattern.test(line))return!0;var info=parseLineInfo(line);return!!(info&&info.fileName===firstFileName&&firstIndex<=info.line&&info.line<=lastIndex)})}}function CapturedTrace(parent){this._parent=parent,this._promisesCreated=0;var length=this._length=1+(void 0===parent?0:parent._length);captureStackTrace(this,CapturedTrace),length>32&&this.uncycle()}var unhandledRejectionHandled,possiblyUnhandledRejection,printWarning,getDomain=Promise._getDomain,async=Promise._async,Warning=_dereq_("./errors").Warning,util=_dereq_("./util"),canAttachTrace=util.canAttachTrace,bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,nodeFramePattern=/\((?:timers\.js):\d+:\d+\)/,parseLinePattern=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,stackFramePattern=null,formatStack=null,indentStackFrames=!1,debugging=!(0==util.env("BLUEBIRD_DEBUG")),warnings=!(0==util.env("BLUEBIRD_WARNINGS")||!debugging&&!util.env("BLUEBIRD_WARNINGS")),longStackTraces=!(0==util.env("BLUEBIRD_LONG_STACK_TRACES")||!debugging&&!util.env("BLUEBIRD_LONG_STACK_TRACES")),wForgottenReturn=0!=util.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(warnings||!!util.env("BLUEBIRD_W_FORGOTTEN_RETURN"));Promise.prototype.suppressUnhandledRejections=function(){var target=this._target();target._bitField=target._bitField&-1048577|524288},Promise.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),async.invokeLater(this._notifyUnhandledRejection,this,void 0))},Promise.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,void 0,this)},Promise.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},Promise.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._settledValue();this._setUnhandledRejectionIsNotified(),fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this)}},Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},Promise.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},Promise.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},Promise.prototype._warn=function(message,shouldUseOwnTrace,promise){return warn(message,shouldUseOwnTrace,promise||this)},Promise.onPossiblyUnhandledRejection=function(fn){var domain=getDomain();possiblyUnhandledRejection="function"==typeof fn?null===domain?fn:util.domainBind(domain,fn):void 0},Promise.onUnhandledRejectionHandled=function(fn){var domain=getDomain();unhandledRejectionHandled="function"==typeof fn?null===domain?fn:util.domainBind(domain,fn):void 0};var disableLongStackTraces=function(){};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!config.longStackTraces&&longStackTracesIsSupported()){var Promise_captureStackTrace=Promise.prototype._captureStackTrace,Promise_attachExtraTrace=Promise.prototype._attachExtraTrace;config.longStackTraces=!0,disableLongStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");Promise.prototype._captureStackTrace=Promise_captureStackTrace,Promise.prototype._attachExtraTrace=Promise_attachExtraTrace,Context.deactivateLongStackTraces(),async.enableTrampoline(),config.longStackTraces=!1},Promise.prototype._captureStackTrace=longStackTracesCaptureStackTrace,Promise.prototype._attachExtraTrace=longStackTracesAttachExtraTrace,Context.activateLongStackTraces(),async.disableTrampolineIfNecessary()}},Promise.hasLongStackTraces=function(){return config.longStackTraces&&longStackTracesIsSupported()};var fireDomEvent=function(){try{if("function"==typeof CustomEvent){var event=new CustomEvent("CustomEvent");return util.global.dispatchEvent(event),function(name,event){var domEvent=new CustomEvent(name.toLowerCase(),{detail:event,cancelable:!0});return!util.global.dispatchEvent(domEvent)}}if("function"==typeof Event){var event=new Event("CustomEvent");return util.global.dispatchEvent(event),function(name,event){var domEvent=new Event(name.toLowerCase(),{cancelable:!0});return domEvent.detail=event,!util.global.dispatchEvent(domEvent)}}var event=document.createEvent("CustomEvent");return event.initCustomEvent("testingtheevent",!1,!0,{}),util.global.dispatchEvent(event),function(name,event){var domEvent=document.createEvent("CustomEvent");return domEvent.initCustomEvent(name.toLowerCase(),!1,!0,event),!util.global.dispatchEvent(domEvent)}}catch(e){}return function(){return!1}}(),fireGlobalEvent=function(){return util.isNode?function(){return process.emit.apply(process,arguments)}:util.global?function(name){var methodName="on"+name.toLowerCase(),method=util.global[methodName];return!!method&&(method.apply(util.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),eventToObjectGenerator={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(name,promise,child){return{promise:promise,child:child}},warning:function(name,warning){return{warning:warning}},unhandledRejection:function(name,reason,promise){return{reason:reason,promise:promise}},rejectionHandled:generatePromiseLifecycleEventObject},activeFireEvent=function(name){var globalEventFired=!1;try{globalEventFired=fireGlobalEvent.apply(null,arguments)}catch(e){async.throwLater(e),globalEventFired=!0}var domEventFired=!1;try{domEventFired=fireDomEvent(name,eventToObjectGenerator[name].apply(null,arguments))}catch(e){async.throwLater(e),domEventFired=!0}return domEventFired||globalEventFired};Promise.config=function(opts){if(opts=Object(opts),"longStackTraces"in opts&&(opts.longStackTraces?Promise.longStackTraces():!opts.longStackTraces&&Promise.hasLongStackTraces()&&disableLongStackTraces()),"warnings"in opts){var warningsOption=opts.warnings;config.warnings=!!warningsOption,wForgottenReturn=config.warnings,util.isObject(warningsOption)&&"wForgottenReturn"in warningsOption&&(wForgottenReturn=!!warningsOption.wForgottenReturn)}if("cancellation"in opts&&opts.cancellation&&!config.cancellation){if(async.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");Promise.prototype._clearCancellationData=cancellationClearCancellationData,Promise.prototype._propagateFrom=cancellationPropagateFrom,Promise.prototype._onCancel=cancellationOnCancel,Promise.prototype._setOnCancel=cancellationSetOnCancel,Promise.prototype._attachCancellationCallback=cancellationAttachCancellationCallback,Promise.prototype._execute=cancellationExecute,propagateFromFunction=cancellationPropagateFrom,config.cancellation=!0}"monitoring"in opts&&(opts.monitoring&&!config.monitoring?(config.monitoring=!0,Promise.prototype._fireEvent=activeFireEvent):!opts.monitoring&&config.monitoring&&(config.monitoring=!1,Promise.prototype._fireEvent=defaultFireEvent))},Promise.prototype._fireEvent=defaultFireEvent,Promise.prototype._execute=function(executor,resolve,reject){try{executor(resolve,reject)}catch(e){return e}},Promise.prototype._onCancel=function(){},Promise.prototype._setOnCancel=function(handler){},Promise.prototype._attachCancellationCallback=function(onCancel){},Promise.prototype._captureStackTrace=function(){},Promise.prototype._attachExtraTrace=function(){},Promise.prototype._clearCancellationData=function(){},Promise.prototype._propagateFrom=function(parent,flags){};var propagateFromFunction=bindingPropagateFrom,shouldIgnore=function(){return!1},parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;util.inherits(CapturedTrace,Error),Context.CapturedTrace=CapturedTrace,CapturedTrace.prototype.uncycle=function(){var length=this._length;if(!(length<2)){for(var nodes=[],stackToIndex={},i=0,node=this;void 0!==node;++i)nodes.push(node),node=node._parent;length=this._length=i;for(var i=length-1;i>=0;--i){var stack=nodes[i].stack;void 0===stackToIndex[stack]&&(stackToIndex[stack]=i)}for(var i=0;i<length;++i){var currentStack=nodes[i].stack,index=stackToIndex[currentStack];if(void 0!==index&&index!==i){index>0&&(nodes[index-1]._parent=void 0,nodes[index-1]._length=1),nodes[i]._parent=void 0,nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;index<length-1?(cycleEdgeNode._parent=nodes[index+1],cycleEdgeNode._parent.uncycle(),cycleEdgeNode._length=cycleEdgeNode._parent._length+1):(cycleEdgeNode._parent=void 0,cycleEdgeNode._length=1);for(var currentChildLength=cycleEdgeNode._length+1,j=i-2;j>=0;--j)nodes[j]._length=currentChildLength,currentChildLength++;return}}}},CapturedTrace.prototype.attachExtraTrace=function(error){if(!error.__stackCleaned__){this.uncycle();for(var parsed=parseStackAndMessage(error),message=parsed.message,stacks=[parsed.stack],trace=this;void 0!==trace;)stacks.push(cleanStack(trace.stack.split("\n"))),trace=trace._parent;removeCommonRoots(stacks),removeDuplicateOrEmptyJumps(stacks),util.notEnumerableProp(error,"stack",reconstructStack(message,stacks)),util.notEnumerableProp(error,"__stackCleaned__",!0)}};var captureStackTrace=function(){var v8stackFramePattern=/^\s*at\s*/,v8stackFormatter=function(stack,error){return"string"==typeof stack?stack:void 0!==error.name&&void 0!==error.message?error.toString():formatNonError(error)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,stackFramePattern=v8stackFramePattern,formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;return shouldIgnore=function(line){return bluebirdFramePattern.test(line)},function(receiver,ignoreUntil){Error.stackTraceLimit+=6,captureStackTrace(receiver,ignoreUntil),
Error.stackTraceLimit-=6}}var err=new Error;if("string"==typeof err.stack&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0)return stackFramePattern=/@/,formatStack=v8stackFormatter,indentStackFrames=!0,function(o){o.stack=(new Error).stack};var hasStackAfterThrow;try{throw new Error}catch(e){hasStackAfterThrow="stack"in e}return"stack"in err||!hasStackAfterThrow||"number"!=typeof Error.stackTraceLimit?(formatStack=function(stack,error){return"string"==typeof stack?stack:"object"!=typeof error&&"function"!=typeof error||void 0===error.name||void 0===error.message?formatNonError(error):error.toString()},null):(stackFramePattern=v8stackFramePattern,formatStack=v8stackFormatter,function(o){Error.stackTraceLimit+=6;try{throw new Error}catch(e){o.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(printWarning=function(message){},util.isNode&&process.stderr.isTTY?printWarning=function(message,isSoft){}:util.isNode||"string"!=typeof(new Error).stack||(printWarning=function(message,isSoft){}));var config={warnings:warnings,longStackTraces:!1,cancellation:!1,monitoring:!1};return longStackTraces&&Promise.longStackTraces(),{longStackTraces:function(){return config.longStackTraces},warnings:function(){return config.warnings},cancellation:function(){return config.cancellation},monitoring:function(){return config.monitoring},propagateFromFunction:function(){return propagateFromFunction},boundValueFunction:function(){return boundValueFunction},checkForgottenReturns:checkForgottenReturns,setBounds:setBounds,warn:warn,deprecated:deprecated,CapturedTrace:CapturedTrace,fireDomEvent:fireDomEvent,fireGlobalEvent:fireGlobalEvent}}},{"./errors":12,"./util":36}],10:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function returner(){return this.value}function thrower(){throw this.reason}Promise.prototype["return"]=Promise.prototype.thenReturn=function(value){return value instanceof Promise&&value.suppressUnhandledRejections(),this._then(returner,void 0,void 0,{value:value},void 0)},Promise.prototype["throw"]=Promise.prototype.thenThrow=function(reason){return this._then(thrower,void 0,void 0,{reason:reason},void 0)},Promise.prototype.catchThrow=function(reason){if(arguments.length<=1)return this._then(void 0,thrower,void 0,{reason:reason},void 0);var _reason=arguments[1],handler=function(){throw _reason};return this.caught(reason,handler)},Promise.prototype.catchReturn=function(value){if(arguments.length<=1)return value instanceof Promise&&value.suppressUnhandledRejections(),this._then(void 0,returner,void 0,{value:value},void 0);var _value=arguments[1];_value instanceof Promise&&_value.suppressUnhandledRejections();var handler=function(){return _value};return this.caught(value,handler)}}},{}],11:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){function promiseAllThis(){return PromiseAll(this)}function PromiseMapSeries(promises,fn){return PromiseReduce(promises,fn,INTERNAL,INTERNAL)}var PromiseReduce=Promise.reduce,PromiseAll=Promise.all;Promise.prototype.each=function(fn){return PromiseReduce(this,fn,INTERNAL,0)._then(promiseAllThis,void 0,void 0,this,void 0)},Promise.prototype.mapSeries=function(fn){return PromiseReduce(this,fn,INTERNAL,INTERNAL)},Promise.each=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,0)._then(promiseAllThis,void 0,void 0,promises,void 0)},Promise.mapSeries=PromiseMapSeries}},{}],12:[function(_dereq_,module,exports){"use strict";function subError(nameProperty,defaultMessage){function SubError(message){return this instanceof SubError?(notEnumerableProp(this,"message","string"==typeof message?message:defaultMessage),notEnumerableProp(this,"name",nameProperty),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new SubError(message)}return inherits(SubError,Error),SubError}function OperationalError(message){return this instanceof OperationalError?(notEnumerableProp(this,"name","OperationalError"),notEnumerableProp(this,"message",message),this.cause=message,this.isOperational=!0,void(message instanceof Error?(notEnumerableProp(this,"message",message.message),notEnumerableProp(this,"stack",message.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new OperationalError(message)}var _TypeError,_RangeError,es5=_dereq_("./es5"),Objectfreeze=es5.freeze,util=_dereq_("./util"),inherits=util.inherits,notEnumerableProp=util.notEnumerableProp,Warning=subError("Warning","warning"),CancellationError=subError("CancellationError","cancellation error"),TimeoutError=subError("TimeoutError","timeout error"),AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError,_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error"),_RangeError=subError("RangeError","range error")}for(var methods="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),i=0;i<methods.length;++i)"function"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),AggregateError.prototype.isOperational=!0;var level=0;AggregateError.prototype.toString=function(){var indent=Array(4*level+1).join(" "),ret="\n"+indent+"AggregateError of:\n";level++,indent=Array(4*level+1).join(" ");for(var i=0;i<this.length;++i){for(var str=this[i]===this?"[Circular AggregateError]":this[i]+"",lines=str.split("\n"),j=0;j<lines.length;++j)lines[j]=indent+lines[j];str=lines.join("\n"),ret+=str+"\n"}return level--,ret},inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:!1,enumerable:!1,configurable:!1})),module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning}},{"./es5":13,"./util":36}],13:[function(_dereq_,module,exports){var isES5=function(){"use strict";return void 0===this}();if(isES5)module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return!(descriptor&&!descriptor.writable&&!descriptor.set)}};else{var has={}.hasOwnProperty,str={}.toString,proto={}.constructor.prototype,ObjectKeys=function(o){var ret=[];for(var key in o)has.call(o,key)&&ret.push(key);return ret},ObjectGetDescriptor=function(o,key){return{value:o[key]}},ObjectDefineProperty=function(o,key,desc){return o[key]=desc.value,o},ObjectFreeze=function(obj){return obj},ObjectGetPrototypeOf=function(obj){try{return Object(obj).constructor.prototype}catch(e){return proto}},ArrayIsArray=function(obj){try{return"[object Array]"===str.call(obj)}catch(e){return!1}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return!0}}}},{}],14:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL)},Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL)}}},{}],15:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,tryConvertToPromise){function PassThroughHandlerContext(promise,type,handler){this.promise=promise,this.type=type,this.handler=handler,this.called=!1,this.cancelPromise=null}function FinallyHandlerCancelReaction(finallyHandler){this.finallyHandler=finallyHandler}function checkCancel(ctx,reason){return null!=ctx.cancelPromise&&(arguments.length>1?ctx.cancelPromise._reject(reason):ctx.cancelPromise._cancel(),ctx.cancelPromise=null,!0)}function succeed(){return finallyHandler.call(this,this.promise._target()._settledValue())}function fail(reason){if(!checkCancel(this,reason))return errorObj.e=reason,errorObj}function finallyHandler(reasonOrValue){var promise=this.promise,handler=this.handler;if(!this.called){this.called=!0;var ret=this.isFinallyHandler()?handler.call(promise._boundValue()):handler.call(promise._boundValue(),reasonOrValue);if(void 0!==ret){promise._setReturnedNonUndefined();var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){if(null!=this.cancelPromise){if(maybePromise._isCancelled()){var reason=new CancellationError("late cancellation observer");return promise._attachExtraTrace(reason),errorObj.e=reason,errorObj}maybePromise.isPending()&&maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this))}return maybePromise._then(succeed,fail,void 0,this,void 0)}}}return promise.isRejected()?(checkCancel(this),errorObj.e=reasonOrValue,errorObj):(checkCancel(this),reasonOrValue)}var util=_dereq_("./util"),CancellationError=Promise.CancellationError,errorObj=util.errorObj;return PassThroughHandlerContext.prototype.isFinallyHandler=function(){return 0===this.type},FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel(this.finallyHandler)},Promise.prototype._passThrough=function(handler,type,success,fail){return"function"!=typeof handler?this.then():this._then(success,fail,void 0,new PassThroughHandlerContext(this,type,handler),void 0)},Promise.prototype.lastly=Promise.prototype["finally"]=function(handler){return this._passThrough(handler,0,finallyHandler,finallyHandler)},Promise.prototype.tap=function(handler){return this._passThrough(handler,1,finallyHandler)},PassThroughHandlerContext}},{"./util":36}],16:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug){function promiseFromYieldHandler(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);if(traceParent._popContext(),result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);return traceParent._popContext(),ret}var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise)return maybePromise}return null}function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){if(debug.cancellation()){var internal=new Promise(INTERNAL),_finallyPromise=this._finallyPromise=new Promise(INTERNAL);this._promise=internal.lastly(function(){return _finallyPromise}),internal._captureStackTrace(),internal._setOnCancel(this)}else{var promise=this._promise=new Promise(INTERNAL);promise._captureStackTrace()}this._stack=stack,this._generatorFunction=generatorFunction,this._receiver=receiver,this._generator=void 0,this._yieldHandlers="function"==typeof yieldHandler?[yieldHandler].concat(yieldHandlers):yieldHandlers,this._yieldedPromise=null,this._cancellationPhase=!1}var errors=_dereq_("./errors"),TypeError=errors.TypeError,util=_dereq_("./util"),errorObj=util.errorObj,tryCatch=util.tryCatch,yieldHandlers=[];util.inherits(PromiseSpawn,Proxyable),PromiseSpawn.prototype._isResolved=function(){return null===this._promise},PromiseSpawn.prototype._cleanup=function(){this._promise=this._generator=null,debug.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},PromiseSpawn.prototype._promiseCancelled=function(){if(!this._isResolved()){var result,implementsReturn="undefined"!=typeof this._generator["return"];if(implementsReturn)this._promise._pushContext(),result=tryCatch(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var reason=new Promise.CancellationError("generator .return() sentinel");Promise.coroutine.returnSentinel=reason,this._promise._attachExtraTrace(reason),this._promise._pushContext(),result=tryCatch(this._generator["throw"]).call(this._generator,reason),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(result)}},PromiseSpawn.prototype._promiseFulfilled=function(value){this._yieldedPromise=null,this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext(),this._continue(result)},PromiseSpawn.prototype._promiseRejected=function(reason){this._yieldedPromise=null,this._promise._attachExtraTrace(reason),this._promise._pushContext();var result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext(),this._continue(result)},PromiseSpawn.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof Promise){var promise=this._yieldedPromise;this._yieldedPromise=null,promise.cancel()}},PromiseSpawn.prototype.promise=function(){return this._promise},PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},PromiseSpawn.prototype._continue=function(result){var promise=this._promise;if(result===errorObj)return this._cleanup(),this._cancellationPhase?promise.cancel():promise._rejectCallback(result.e,!1);var value=result.value;if(result.done===!0)return this._cleanup(),this._cancellationPhase?promise.cancel():promise._resolveCallback(value);var maybePromise=tryConvertToPromise(value,this._promise);if(!(maybePromise instanceof Promise)&&(maybePromise=promiseFromYieldHandler(maybePromise,this._yieldHandlers,this._promise),null===maybePromise))return void this._promiseRejected(new TypeError("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",value)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));maybePromise=maybePromise._target();var bitField=maybePromise._bitField;0===(50397184&bitField)?(this._yieldedPromise=maybePromise,maybePromise._proxy(this,null)):0!==(33554432&bitField)?Promise._async.invoke(this._promiseFulfilled,this,maybePromise._value()):0!==(16777216&bitField)?Promise._async.invoke(this._promiseRejected,this,maybePromise._reason()):this._promiseCancelled()},Promise.coroutine=function(generatorFunction,options){if("function"!=typeof generatorFunction)throw new TypeError("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var yieldHandler=Object(options).yieldHandler,PromiseSpawn$=PromiseSpawn,stack=(new Error).stack;return function(){var generator=generatorFunction.apply(this,arguments),spawn=new PromiseSpawn$((void 0),(void 0),yieldHandler,stack),ret=spawn.promise();return spawn._generator=generator,spawn._promiseFulfilled(void 0),ret}},Promise.coroutine.addYieldHandler=function(fn){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));yieldHandlers.push(fn)},Promise.spawn=function(generatorFunction){if(debug.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof generatorFunction)return apiRejection("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var spawn=new PromiseSpawn(generatorFunction,this),ret=spawn.promise();return spawn._run(Promise.spawn),ret}}},{"./errors":12,"./util":36}],17:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain){var util=_dereq_("./util");util.canEvaluate,util.tryCatch,util.errorObj;Promise.join=function(){var fn,last=arguments.length-1;if(last>0&&"function"==typeof arguments[last]){fn=arguments[last];var ret}var args=[].slice.call(arguments);fn&&args.pop();var ret=new PromiseArray(args).promise();return void 0!==fn?ret.spread(fn):ret}}},{"./util":36}],18:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises),this._promise._captureStackTrace();var domain=getDomain();this._callback=null===domain?fn:util.domainBind(domain,fn),this._preservedValues=_filter===INTERNAL?new Array(this.length()):null,this._limit=limit,this._inFlight=0,this._queue=[],async.invoke(this._asyncInit,this,void 0)}function map(promises,fn,options,_filter){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var limit=0;if(void 0!==options){if("object"!=typeof options||null===options)return Promise.reject(new TypeError("options argument must be an object but it is "+util.classString(options)));if("number"!=typeof options.concurrency)return Promise.reject(new TypeError("'concurrency' must be a number but it is "+util.classString(options.concurrency)));limit=options.concurrency}return limit="number"==typeof limit&&isFinite(limit)&&limit>=1?limit:0,new MappingPromiseArray(promises,fn,limit,_filter).promise()}var getDomain=Promise._getDomain,util=_dereq_("./util"),tryCatch=util.tryCatch,errorObj=util.errorObj,async=Promise._async;util.inherits(MappingPromiseArray,PromiseArray),MappingPromiseArray.prototype._asyncInit=function(){this._init$(void 0,-2)},MappingPromiseArray.prototype._init=function(){},MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values,length=this.length(),preservedValues=this._preservedValues,limit=this._limit;if(index<0){if(index=index*-1-1,values[index]=value,limit>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(limit>=1&&this._inFlight>=limit)return values[index]=value,this._queue.push(index),!1;null!==preservedValues&&(preservedValues[index]=value);var promise=this._promise,callback=this._callback,receiver=promise._boundValue();promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length),promiseCreated=promise._popContext();if(debug.checkForgottenReturns(ret,promiseCreated,null!==preservedValues?"Promise.filter":"Promise.map",promise),ret===errorObj)return this._reject(ret.e),!0;var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if(0===(50397184&bitField))return limit>=1&&this._inFlight++,values[index]=maybePromise,maybePromise._proxy(this,(index+1)*-1),!1;if(0===(33554432&bitField))return 0!==(16777216&bitField)?(this._reject(maybePromise._reason()),!0):(this._cancel(),!0);ret=maybePromise._value()}values[index]=ret}var totalResolved=++this._totalResolved;return totalResolved>=length&&(null!==preservedValues?this._filter(values,preservedValues):this._resolve(values),!0)},MappingPromiseArray.prototype._drainQueue=function(){for(var queue=this._queue,limit=this._limit,values=this._values;queue.length>0&&this._inFlight<limit;){if(this._isResolved())return;var index=queue.pop();this._promiseFulfilled(values[index],index)}},MappingPromiseArray.prototype._filter=function(booleans,values){for(var len=values.length,ret=new Array(len),j=0,i=0;i<len;++i)booleans[i]&&(ret[j++]=values[i]);ret.length=j,this._resolve(ret)},MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues},Promise.prototype.map=function(fn,options){return map(this,fn,options,null)},Promise.map=function(promises,fn,options,_filter){return map(promises,fn,options,_filter)}}},{"./util":36}],19:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug){var util=_dereq_("./util"),tryCatch=util.tryCatch;Promise.method=function(fn){if("function"!=typeof fn)throw new Promise.TypeError("expecting a function but got "+util.classString(fn));return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace(),ret._pushContext();var value=tryCatch(fn).apply(this,arguments),promiseCreated=ret._popContext();return debug.checkForgottenReturns(value,promiseCreated,"Promise.method",ret),ret._resolveFromSyncValue(value),ret}},Promise.attempt=Promise["try"]=function(fn){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var ret=new Promise(INTERNAL);ret._captureStackTrace(),ret._pushContext();var value;if(arguments.length>1){debug.deprecated("calling Promise.try with more than 1 argument");var arg=arguments[1],ctx=arguments[2];value=util.isArray(arg)?tryCatch(fn).apply(ctx,arg):tryCatch(fn).call(ctx,arg)}else value=tryCatch(fn)();var promiseCreated=ret._popContext();return debug.checkForgottenReturns(value,promiseCreated,"Promise.try",ret),ret._resolveFromSyncValue(value),ret},Promise.prototype._resolveFromSyncValue=function(value){value===util.errorObj?this._rejectCallback(value.e,!1):this._resolveCallback(value,!0)}}},{"./util":36}],20:[function(_dereq_,module,exports){"use strict";function isUntypedError(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype}function wrapAsOperationalError(obj){var ret;if(isUntypedError(obj)){ret=new OperationalError(obj),ret.name=obj.name,ret.message=obj.message,ret.stack=obj.stack;for(var keys=es5.keys(obj),i=0;i<keys.length;++i){var key=keys[i];rErrorKey.test(key)||(ret[key]=obj[key])}return ret}return util.markAsOriginatingFromRejection(obj),obj}function nodebackForPromise(promise,multiArgs){return function(err,value){if(null!==promise){if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped),promise._reject(wrapped)}else if(multiArgs){var args=[].slice.call(arguments,1);promise._fulfill(args)}else promise._fulfill(value);promise=null}}}var util=_dereq_("./util"),maybeWrapAsError=util.maybeWrapAsError,errors=_dereq_("./errors"),OperationalError=errors.OperationalError,es5=_dereq_("./es5"),rErrorKey=/^(?:name|message|stack|cause)$/;module.exports=nodebackForPromise},{"./errors":12,"./es5":13,"./util":36}],21:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function spreadAdapter(val,nodeback){var promise=this;if(!util.isArray(val))return successAdapter.call(promise,val,nodeback);var ret=tryCatch(nodeback).apply(promise._boundValue(),[null].concat(val));ret===errorObj&&async.throwLater(ret.e)}function successAdapter(val,nodeback){var promise=this,receiver=promise._boundValue(),ret=void 0===val?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);ret===errorObj&&async.throwLater(ret.e)}function errorAdapter(reason,nodeback){var promise=this;if(!reason){var newReason=new Error(reason+"");newReason.cause=reason,reason=newReason}var ret=tryCatch(nodeback).call(promise._boundValue(),reason);ret===errorObj&&async.throwLater(ret.e)}var util=_dereq_("./util"),async=Promise._async,tryCatch=util.tryCatch,errorObj=util.errorObj;Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if("function"==typeof nodeback){var adapter=successAdapter;void 0!==options&&Object(options).spread&&(adapter=spreadAdapter),this._then(adapter,errorAdapter,void 0,this,nodeback)}return this}}},{"./util":36}],22:[function(_dereq_,module,exports){"use strict";module.exports=function(){function Proxyable(){}function check(self,executor){if("function"!=typeof executor)throw new TypeError("expecting a function but got "+util.classString(executor));if(self.constructor!==Promise)throw new TypeError("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function Promise(executor){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,executor!==INTERNAL&&(check(this,executor),this._resolveFromExecutor(executor)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function deferResolve(v){this.promise._resolveCallback(v)}function deferReject(v){this.promise._rejectCallback(v,!1)}function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value,p._rejectionHandler0=value,p._promise0=value,p._receiver0=value}var getDomain,makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},reflectHandler=function(){return new Promise.PromiseInspection(this._target())},apiRejection=function(msg){return Promise.reject(new TypeError(msg))},UNDEFINED_BINDING={},util=_dereq_("./util");getDomain=util.isNode?function(){var ret=process.domain;return void 0===ret&&(ret=null),ret}:function(){return null},util.notEnumerableProp(Promise,"_getDomain",getDomain);var es5=_dereq_("./es5"),Async=_dereq_("./async"),async=new Async;es5.defineProperty(Promise,"_async",{value:async});var errors=_dereq_("./errors"),TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;var CancellationError=Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError,Promise.OperationalError=errors.OperationalError,Promise.RejectionError=errors.OperationalError,Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){},APPLY={},NEXT_FILTER={},tryConvertToPromise=_dereq_("./thenables")(Promise,INTERNAL),PromiseArray=_dereq_("./promise_array")(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable),Context=_dereq_("./context")(Promise),createContext=Context.create,debug=_dereq_("./debuggability")(Promise,Context),PassThroughHandlerContext=(debug.CapturedTrace,_dereq_("./finally")(Promise,tryConvertToPromise)),catchFilter=_dereq_("./catch_filter")(NEXT_FILTER),nodebackForPromise=_dereq_("./nodeback"),errorObj=util.errorObj,tryCatch=util.tryCatch;return Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.caught=Promise.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var i,catchInstances=new Array(len-1),j=0;for(i=0;i<len-1;++i){var item=arguments[i];if(!util.isObject(item))return apiRejection("expecting an object but got A catch statement predicate "+util.classString(item));catchInstances[j++]=item}return catchInstances.length=j,fn=arguments[i],this.then(void 0,catchFilter(catchInstances,fn,this))}return this.then(void 0,fn)},Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,void 0,this,void 0)},Promise.prototype.then=function(didFulfill,didReject){if(debug.warnings()&&arguments.length>0&&"function"!=typeof didFulfill&&"function"!=typeof didReject){var msg=".then() only accepts functions but was passed: "+util.classString(didFulfill);arguments.length>1&&(msg+=", "+util.classString(didReject)),this._warn(msg)}return this._then(didFulfill,didReject,void 0,void 0,void 0)},Promise.prototype.done=function(didFulfill,didReject){var promise=this._then(didFulfill,didReject,void 0,void 0,void 0);promise._setIsFinal()},Promise.prototype.spread=function(fn){return"function"!=typeof fn?apiRejection("expecting a function but got "+util.classString(fn)):this.all()._then(fn,void 0,void 0,APPLY,void 0)},Promise.prototype.toJSON=function(){var ret={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(ret.fulfillmentValue=this.value(),ret.isFulfilled=!0):this.isRejected()&&(ret.rejectionReason=this.reason(),ret.isRejected=!0),ret},Promise.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new PromiseArray(this).promise()},Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn)},Promise.getNewLibraryCopy=module.exports,Promise.is=function(val){return val instanceof Promise},Promise.fromNode=Promise.fromCallback=function(fn){var ret=new Promise(INTERNAL);ret._captureStackTrace();var multiArgs=arguments.length>1&&!!Object(arguments[1]).multiArgs,result=tryCatch(fn)(nodebackForPromise(ret,multiArgs));return result===errorObj&&ret._rejectCallback(result.e,!0),ret._isFateSealed()||ret._setAsyncGuaranteed(),ret},Promise.all=function(promises){return new PromiseArray(promises).promise()},Promise.cast=function(obj){var ret=tryConvertToPromise(obj);return ret instanceof Promise||(ret=new Promise(INTERNAL),ret._captureStackTrace(),ret._setFulfilled(),ret._rejectionHandler0=obj),ret},Promise.resolve=Promise.fulfilled=Promise.cast,Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);return ret._captureStackTrace(),ret._rejectCallback(reason,!0),ret},Promise.setScheduler=function(fn){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));return async.setScheduler(fn)},Promise.prototype._then=function(didFulfill,didReject,_,receiver,internalData){var haveInternalData=void 0!==internalData,promise=haveInternalData?internalData:new Promise(INTERNAL),target=this._target(),bitField=target._bitField;haveInternalData||(promise._propagateFrom(this,3),promise._captureStackTrace(),void 0===receiver&&0!==(2097152&this._bitField)&&(receiver=0!==(50397184&bitField)?this._boundValue():target===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,promise));var domain=getDomain();if(0!==(50397184&bitField)){var handler,value,settler=target._settlePromiseCtx;0!==(33554432&bitField)?(value=target._rejectionHandler0,handler=didFulfill):0!==(16777216&bitField)?(value=target._fulfillmentHandler0,handler=didReject,target._unsetRejectionIsUnhandled()):(settler=target._settlePromiseLateCancellationObserver,value=new CancellationError("late cancellation observer"),target._attachExtraTrace(value),handler=didReject),async.invoke(settler,target,{handler:null===domain?handler:"function"==typeof handler&&util.domainBind(domain,handler),promise:promise,receiver:receiver,value:value})}else target._addCallbacks(didFulfill,didReject,promise,receiver,domain);return promise},Promise.prototype._length=function(){return 65535&this._bitField},Promise.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},Promise.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},Promise.prototype._setLength=function(len){this._bitField=this._bitField&-65536|65535&len},Promise.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},Promise.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},Promise.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},Promise.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},Promise.prototype._isFinal=function(){return(4194304&this._bitField)>0},Promise.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},Promise.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},Promise.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},Promise.prototype._setAsyncGuaranteed=function(){async.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},Promise.prototype._receiverAt=function(index){var ret=0===index?this._receiver0:this[4*index-4+3];if(ret!==UNDEFINED_BINDING)return void 0===ret&&this._isBound()?this._boundValue():ret},Promise.prototype._promiseAt=function(index){return this[4*index-4+2]},Promise.prototype._fulfillmentHandlerAt=function(index){return this[4*index-4+0]},Promise.prototype._rejectionHandlerAt=function(index){return this[4*index-4+1]},Promise.prototype._boundValue=function(){},Promise.prototype._migrateCallback0=function(follower){var fulfill=(follower._bitField,
follower._fulfillmentHandler0),reject=follower._rejectionHandler0,promise=follower._promise0,receiver=follower._receiverAt(0);void 0===receiver&&(receiver=UNDEFINED_BINDING),this._addCallbacks(fulfill,reject,promise,receiver,null)},Promise.prototype._migrateCallbackAt=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index),reject=follower._rejectionHandlerAt(index),promise=follower._promiseAt(index),receiver=follower._receiverAt(index);void 0===receiver&&(receiver=UNDEFINED_BINDING),this._addCallbacks(fulfill,reject,promise,receiver,null)},Promise.prototype._addCallbacks=function(fulfill,reject,promise,receiver,domain){var index=this._length();if(index>=65531&&(index=0,this._setLength(0)),0===index)this._promise0=promise,this._receiver0=receiver,"function"==typeof fulfill&&(this._fulfillmentHandler0=null===domain?fulfill:util.domainBind(domain,fulfill)),"function"==typeof reject&&(this._rejectionHandler0=null===domain?reject:util.domainBind(domain,reject));else{var base=4*index-4;this[base+2]=promise,this[base+3]=receiver,"function"==typeof fulfill&&(this[base+0]=null===domain?fulfill:util.domainBind(domain,fulfill)),"function"==typeof reject&&(this[base+1]=null===domain?reject:util.domainBind(domain,reject))}return this._setLength(index+1),index},Promise.prototype._proxy=function(proxyable,arg){this._addCallbacks(void 0,void 0,arg,proxyable,null)},Promise.prototype._resolveCallback=function(value,shouldBind){if(0===(117506048&this._bitField)){if(value===this)return this._rejectCallback(makeSelfResolutionError(),!1);var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise))return this._fulfill(value);shouldBind&&this._propagateFrom(maybePromise,2);var promise=maybePromise._target();if(promise===this)return void this._reject(makeSelfResolutionError());var bitField=promise._bitField;if(0===(50397184&bitField)){var len=this._length();len>0&&promise._migrateCallback0(this);for(var i=1;i<len;++i)promise._migrateCallbackAt(this,i);this._setFollowing(),this._setLength(0),this._setFollowee(promise)}else if(0!==(33554432&bitField))this._fulfill(promise._value());else if(0!==(16777216&bitField))this._reject(promise._reason());else{var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason),this._reject(reason)}}},Promise.prototype._rejectCallback=function(reason,synchronous,ignoreNonErrorWarnings){var trace=util.ensureErrorObject(reason),hasStack=trace===reason;if(!hasStack&&!ignoreNonErrorWarnings&&debug.warnings()){var message="a promise was rejected with a non-error: "+util.classString(reason);this._warn(message,!0)}this._attachExtraTrace(trace,!!synchronous&&hasStack),this._reject(reason)},Promise.prototype._resolveFromExecutor=function(executor){var promise=this;this._captureStackTrace(),this._pushContext();var synchronous=!0,r=this._execute(executor,function(value){promise._resolveCallback(value)},function(reason){promise._rejectCallback(reason,synchronous)});synchronous=!1,this._popContext(),void 0!==r&&promise._rejectCallback(r,!0)},Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){var bitField=promise._bitField;if(0===(65536&bitField)){promise._pushContext();var x;receiver===APPLY?value&&"number"==typeof value.length?x=tryCatch(handler).apply(this._boundValue(),value):(x=errorObj,x.e=new TypeError("cannot .spread() a non-array: "+util.classString(value))):x=tryCatch(handler).call(receiver,value);var promiseCreated=promise._popContext();bitField=promise._bitField,0===(65536&bitField)&&(x===NEXT_FILTER?promise._reject(value):x===errorObj?promise._rejectCallback(x.e,!1):(debug.checkForgottenReturns(x,promiseCreated,"",promise,this),promise._resolveCallback(x)))}},Promise.prototype._target=function(){for(var ret=this;ret._isFollowing();)ret=ret._followee();return ret},Promise.prototype._followee=function(){return this._rejectionHandler0},Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise},Promise.prototype._settlePromise=function(promise,handler,receiver,value){var isPromise=promise instanceof Promise,bitField=this._bitField,asyncGuaranteed=0!==(134217728&bitField);0!==(65536&bitField)?(isPromise&&promise._invokeInternalOnCancel(),receiver instanceof PassThroughHandlerContext&&receiver.isFinallyHandler()?(receiver.cancelPromise=promise,tryCatch(handler).call(receiver,value)===errorObj&&promise._reject(errorObj.e)):handler===reflectHandler?promise._fulfill(reflectHandler.call(receiver)):receiver instanceof Proxyable?receiver._promiseCancelled(promise):isPromise||promise instanceof PromiseArray?promise._cancel():receiver.cancel()):"function"==typeof handler?isPromise?(asyncGuaranteed&&promise._setAsyncGuaranteed(),this._settlePromiseFromHandler(handler,receiver,value,promise)):handler.call(receiver,value,promise):receiver instanceof Proxyable?receiver._isResolved()||(0!==(33554432&bitField)?receiver._promiseFulfilled(value,promise):receiver._promiseRejected(value,promise)):isPromise&&(asyncGuaranteed&&promise._setAsyncGuaranteed(),0!==(33554432&bitField)?promise._fulfill(value):promise._reject(value))},Promise.prototype._settlePromiseLateCancellationObserver=function(ctx){var handler=ctx.handler,promise=ctx.promise,receiver=ctx.receiver,value=ctx.value;"function"==typeof handler?promise instanceof Promise?this._settlePromiseFromHandler(handler,receiver,value,promise):handler.call(receiver,value,promise):promise instanceof Promise&&promise._reject(value)},Promise.prototype._settlePromiseCtx=function(ctx){this._settlePromise(ctx.promise,ctx.handler,ctx.receiver,ctx.value)},Promise.prototype._settlePromise0=function(handler,value,bitField){var promise=this._promise0,receiver=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(promise,handler,receiver,value)},Promise.prototype._clearCallbackDataAtIndex=function(index){var base=4*index-4;this[base+2]=this[base+3]=this[base+0]=this[base+1]=void 0},Promise.prototype._fulfill=function(value){var bitField=this._bitField;if(!((117506048&bitField)>>>16)){if(value===this){var err=makeSelfResolutionError();return this._attachExtraTrace(err),this._reject(err)}this._setFulfilled(),this._rejectionHandler0=value,(65535&bitField)>0&&(0!==(134217728&bitField)?this._settlePromises():async.settlePromises(this))}},Promise.prototype._reject=function(reason){var bitField=this._bitField;if(!((117506048&bitField)>>>16))return this._setRejected(),this._fulfillmentHandler0=reason,this._isFinal()?async.fatalError(reason,util.isNode):void((65535&bitField)>0?async.settlePromises(this):this._ensurePossibleRejectionHandled())},Promise.prototype._fulfillPromises=function(len,value){for(var i=1;i<len;i++){var handler=this._fulfillmentHandlerAt(i),promise=this._promiseAt(i),receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(promise,handler,receiver,value)}},Promise.prototype._rejectPromises=function(len,reason){for(var i=1;i<len;i++){var handler=this._rejectionHandlerAt(i),promise=this._promiseAt(i),receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(promise,handler,receiver,reason)}},Promise.prototype._settlePromises=function(){var bitField=this._bitField,len=65535&bitField;if(len>0){if(0!==(16842752&bitField)){var reason=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,reason,bitField),this._rejectPromises(len,reason)}else{var value=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,value,bitField),this._fulfillPromises(len,value)}this._setLength(0)}this._clearCancellationData()},Promise.prototype._settledValue=function(){var bitField=this._bitField;return 0!==(33554432&bitField)?this._rejectionHandler0:0!==(16777216&bitField)?this._fulfillmentHandler0:void 0},Promise.defer=Promise.pending=function(){debug.deprecated("Promise.defer","new Promise");var promise=new Promise(INTERNAL);return{promise:promise,resolve:deferResolve,reject:deferReject}},util.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError),_dereq_("./method")(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug),_dereq_("./bind")(Promise,INTERNAL,tryConvertToPromise,debug),_dereq_("./cancel")(Promise,PromiseArray,apiRejection,debug),_dereq_("./direct_resolve")(Promise),_dereq_("./synchronous_inspection")(Promise),_dereq_("./join")(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain),Promise.Promise=Promise,Promise.version="3.4.6",_dereq_("./map.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug),_dereq_("./call_get.js")(Promise),_dereq_("./using.js")(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug),_dereq_("./timers.js")(Promise,INTERNAL,debug),_dereq_("./generators.js")(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug),_dereq_("./nodeify.js")(Promise),_dereq_("./promisify.js")(Promise,INTERNAL),_dereq_("./props.js")(Promise,PromiseArray,tryConvertToPromise,apiRejection),_dereq_("./race.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection),_dereq_("./reduce.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug),_dereq_("./settle.js")(Promise,PromiseArray,debug),_dereq_("./some.js")(Promise,PromiseArray,apiRejection),_dereq_("./filter.js")(Promise,INTERNAL),_dereq_("./each.js")(Promise,INTERNAL),_dereq_("./any.js")(Promise),util.toFastProperties(Promise),util.toFastProperties(Promise.prototype),fillTypes({a:1}),fillTypes({b:2}),fillTypes({c:3}),fillTypes(1),fillTypes(function(){}),fillTypes(void 0),fillTypes(!1),fillTypes(new Promise(INTERNAL)),debug.setBounds(Async.firstLineError,util.lastLineError),Promise}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable){function toResolutionValue(val){switch(val){case-2:return[];case-3:return{}}}function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);values instanceof Promise&&promise._propagateFrom(values,3),promise._setOnCancel(this),this._values=values,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var util=_dereq_("./util");util.isArray;return util.inherits(PromiseArray,Proxyable),PromiseArray.prototype.length=function(){return this._length},PromiseArray.prototype.promise=function(){return this._promise},PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){values=values._target();var bitField=values._bitField;if(this._values=values,0===(50397184&bitField))return this._promise._setAsyncGuaranteed(),values._then(init,this._reject,void 0,this,resolveValueIfEmpty);if(0===(33554432&bitField))return 0!==(16777216&bitField)?this._reject(values._reason()):this._cancel();values=values._value()}if(values=util.asArray(values),null===values){var err=apiRejection("expecting an array or an iterable object but got "+util.classString(values)).reason();return void this._promise._rejectCallback(err,!1)}return 0===values.length?void(resolveValueIfEmpty===-5?this._resolveEmptyArray():this._resolve(toResolutionValue(resolveValueIfEmpty))):void this._iterate(values)},PromiseArray.prototype._iterate=function(values){var len=this.getActualLength(values.length);this._length=len,this._values=this.shouldCopyValues()?new Array(len):this._values;for(var result=this._promise,isResolved=!1,bitField=null,i=0;i<len;++i){var maybePromise=tryConvertToPromise(values[i],result);maybePromise instanceof Promise?(maybePromise=maybePromise._target(),bitField=maybePromise._bitField):bitField=null,isResolved?null!==bitField&&maybePromise.suppressUnhandledRejections():null!==bitField?0===(50397184&bitField)?(maybePromise._proxy(this,i),this._values[i]=maybePromise):isResolved=0!==(33554432&bitField)?this._promiseFulfilled(maybePromise._value(),i):0!==(16777216&bitField)?this._promiseRejected(maybePromise._reason(),i):this._promiseCancelled(i):isResolved=this._promiseFulfilled(maybePromise,i)}isResolved||result._setAsyncGuaranteed()},PromiseArray.prototype._isResolved=function(){return null===this._values},PromiseArray.prototype._resolve=function(value){this._values=null,this._promise._fulfill(value)},PromiseArray.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},PromiseArray.prototype._reject=function(reason){this._values=null,this._promise._rejectCallback(reason,!1)},PromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;return totalResolved>=this._length&&(this._resolve(this._values),!0)},PromiseArray.prototype._promiseCancelled=function(){return this._cancel(),!0},PromiseArray.prototype._promiseRejected=function(reason){return this._totalResolved++,this._reject(reason),!0},PromiseArray.prototype._resultCancelled=function(){if(!this._isResolved()){var values=this._values;if(this._cancel(),values instanceof Promise)values.cancel();else for(var i=0;i<values.length;++i)values[i]instanceof Promise&&values[i].cancel()}},PromiseArray.prototype.shouldCopyValues=function(){return!0},PromiseArray.prototype.getActualLength=function(len){return len},PromiseArray}},{"./util":36}],24:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){function propsFilter(key){return!noCopyPropsPattern.test(key)}function isPromisified(fn){try{return fn.__isPromisified__===!0}catch(e){return!1}}function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return!!val&&isPromisified(val)}function checkValid(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key))for(var keyWithoutAsyncSuffix=key.replace(suffixRegexp,""),j=0;j<ret.length;j+=2)if(ret[j]===keyWithoutAsyncSuffix)throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",suffix))}}function promisifiableMethods(obj,suffix,suffixRegexp,filter){for(var keys=util.inheritedDataKeys(obj),ret=[],i=0;i<keys.length;++i){var key=keys[i],value=obj[key],passesDefaultFilter=filter===defaultFilter||defaultFilter(key,value,obj);"function"!=typeof value||isPromisified(value)||hasPromisified(obj,key,suffix)||!filter(key,value,obj,passesDefaultFilter)||ret.push(key,value)}return checkValid(ret,suffix,suffixRegexp),ret}function makeNodePromisifiedClosure(callback,receiver,_,fn,__,multiArgs){function promisified(){var _receiver=receiver;receiver===THIS&&(_receiver=this);var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb="string"==typeof method&&this!==defaultThis?this[method]:callback,fn=nodebackForPromise(promise,multiArgs);try{cb.apply(_receiver,withAppended(arguments,fn))}catch(e){promise._rejectCallback(maybeWrapAsError(e),!0,!0)}return promise._isFateSealed()||promise._setAsyncGuaranteed(),promise}var defaultThis=function(){return this}(),method=callback;return"string"==typeof method&&(callback=fn),util.notEnumerableProp(promisified,"__isPromisified__",!0),promisified}function promisifyAll(obj,suffix,filter,promisifier,multiArgs){for(var suffixRegexp=new RegExp(escapeIdentRegex(suffix)+"$"),methods=promisifiableMethods(obj,suffix,suffixRegexp,filter),i=0,len=methods.length;i<len;i+=2){var key=methods[i],fn=methods[i+1],promisifiedKey=key+suffix;if(promisifier===makeNodePromisified)obj[promisifiedKey]=makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);else{var promisified=promisifier(fn,function(){return makeNodePromisified(key,THIS,key,fn,suffix,multiArgs)});util.notEnumerableProp(promisified,"__isPromisified__",!0),obj[promisifiedKey]=promisified}}return util.toFastProperties(obj),obj}function promisify(callback,receiver,multiArgs){return makeNodePromisified(callback,receiver,void 0,callback,null,multiArgs)}var makeNodePromisifiedEval,THIS={},util=_dereq_("./util"),nodebackForPromise=_dereq_("./nodeback"),withAppended=util.withAppended,maybeWrapAsError=util.maybeWrapAsError,canEvaluate=util.canEvaluate,TypeError=_dereq_("./errors").TypeError,defaultSuffix="Async",defaultPromisified={__isPromisified__:!0},noCopyProps=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],noCopyPropsPattern=new RegExp("^(?:"+noCopyProps.join("|")+")$"),defaultFilter=function(name){return util.isIdentifier(name)&&"_"!==name.charAt(0)&&"constructor"!==name},escapeIdentRegex=function(str){return str.replace(/([$])/,"\\$")},makeNodePromisified=canEvaluate?makeNodePromisifiedEval:makeNodePromisifiedClosure;Promise.promisify=function(fn,options){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));if(isPromisified(fn))return fn;options=Object(options);var receiver=void 0===options.context?THIS:options.context,multiArgs=!!options.multiArgs,ret=promisify(fn,receiver,multiArgs);return util.copyDescriptors(fn,ret,propsFilter),ret},Promise.promisifyAll=function(target,options){if("function"!=typeof target&&"object"!=typeof target)throw new TypeError("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");options=Object(options);var multiArgs=!!options.multiArgs,suffix=options.suffix;"string"!=typeof suffix&&(suffix=defaultSuffix);var filter=options.filter;"function"!=typeof filter&&(filter=defaultFilter);var promisifier=options.promisifier;if("function"!=typeof promisifier&&(promisifier=makeNodePromisified),!util.isIdentifier(suffix))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var keys=util.inheritedDataKeys(target),i=0;i<keys.length;++i){var value=target[keys[i]];"constructor"!==keys[i]&&util.isClass(value)&&(promisifyAll(value.prototype,suffix,filter,promisifier,multiArgs),promisifyAll(value,suffix,filter,promisifier,multiArgs))}return promisifyAll(target,suffix,filter,promisifier,multiArgs)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){function PropertiesPromiseArray(obj){var entries,isMap=!1;if(void 0!==Es6Map&&obj instanceof Es6Map)entries=mapToEntries(obj),isMap=!0;else{var keys=es5.keys(obj),len=keys.length;entries=new Array(2*len);for(var i=0;i<len;++i){var key=keys[i];entries[i]=obj[key],entries[i+len]=key}}this.constructor$(entries),this._isMap=isMap,this._init$(void 0,-3)}function props(promises){var ret,castValue=tryConvertToPromise(promises);return isObject(castValue)?(ret=castValue instanceof Promise?castValue._then(Promise.props,void 0,void 0,void 0,void 0):new PropertiesPromiseArray(castValue).promise(),castValue instanceof Promise&&ret._propagateFrom(castValue,2),ret):apiRejection("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var Es6Map,util=_dereq_("./util"),isObject=util.isObject,es5=_dereq_("./es5");"function"==typeof Map&&(Es6Map=Map);var mapToEntries=function(){function extractEntry(value,key){this[index]=value,this[index+size]=key,index++}var index=0,size=0;return function(map){size=map.size,index=0;var ret=new Array(2*map.size);return map.forEach(extractEntry,ret),ret}}(),entriesToMap=function(entries){for(var ret=new Es6Map,length=entries.length/2|0,i=0;i<length;++i){var key=entries[length+i],value=entries[i];ret.set(key,value)}return ret};util.inherits(PropertiesPromiseArray,PromiseArray),PropertiesPromiseArray.prototype._init=function(){},PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){var val;if(this._isMap)val=entriesToMap(this._values);else{val={};for(var keyOffset=this.length(),i=0,len=this.length();i<len;++i)val[this._values[i+keyOffset]]=this._values[i]}return this._resolve(val),!0}return!1},PropertiesPromiseArray.prototype.shouldCopyValues=function(){return!1},PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1},Promise.prototype.props=function(){return props(this)},Promise.props=function(promises){return props(promises)}}},{"./es5":13,"./util":36}],26:[function(_dereq_,module,exports){"use strict";function arrayMove(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j)dst[j+dstIndex]=src[j+srcIndex],src[j+srcIndex]=void 0}function Queue(capacity){this._capacity=capacity,this._length=0,this._front=0}Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size},Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1);var i=this._front+length&this._capacity-1;this[i]=arg,this._length=length+1},Queue.prototype._unshiftOne=function(value){var capacity=this._capacity;this._checkCapacity(this.length()+1);var front=this._front,i=(front-1&capacity-1^capacity)-capacity;this[i]=value,this._front=i,this._length=this.length()+1},Queue.prototype.unshift=function(fn,receiver,arg){this._unshiftOne(arg),this._unshiftOne(receiver),this._unshiftOne(fn)},Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length))return this._pushOne(fn),this._pushOne(receiver),void this._pushOne(arg);var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[j+0&wrapMask]=fn,this[j+1&wrapMask]=receiver,this[j+2&wrapMask]=arg,this._length=length},Queue.prototype.shift=function(){var front=this._front,ret=this[front];return this[front]=void 0,this._front=front+1&this._capacity-1,this._length--,ret},Queue.prototype.length=function(){return this._length},Queue.prototype._checkCapacity=function(size){this._capacity<size&&this._resizeTo(this._capacity<<1)},Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity;var front=this._front,length=this._length,moveItemsCount=front+length&oldCapacity-1;arrayMove(this,0,this,oldCapacity,moveItemsCount)},module.exports=Queue},{}],27:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){function race(promises,parent){var maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise)return raceLater(maybePromise);if(promises=util.asArray(promises),null===promises)return apiRejection("expecting an array or an iterable object but got "+util.classString(promises));var ret=new Promise(INTERNAL);void 0!==parent&&ret._propagateFrom(parent,3);for(var fulfill=ret._fulfill,reject=ret._reject,i=0,len=promises.length;i<len;++i){var val=promises[i];(void 0!==val||i in promises)&&Promise.cast(val)._then(fulfill,reject,void 0,ret,null)}return ret}var util=_dereq_("./util"),raceLater=function(promise){return promise.then(function(array){return race(array,promise)})};Promise.race=function(promises){return race(promises,void 0)},Promise.prototype.race=function(){return race(this,void 0)}}},{"./util":36}],28:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){function ReductionPromiseArray(promises,fn,initialValue,_each){this.constructor$(promises);var domain=getDomain();this._fn=null===domain?fn:util.domainBind(domain,fn),void 0!==initialValue&&(initialValue=Promise.resolve(initialValue),initialValue._attachCancellationCallback(this)),this._initialValue=initialValue,this._currentCancellable=null,_each===INTERNAL?this._eachValues=Array(this._length):0===_each?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function completed(valueOrReason,array){this.isFulfilled()?array._resolve(valueOrReason):array._reject(valueOrReason)}function reduce(promises,fn,initialValue,_each){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var array=new ReductionPromiseArray(promises,fn,initialValue,_each);return array.promise()}function gotAccum(accum){this.accum=accum,this.array._gotAccum(accum);var value=tryConvertToPromise(this.value,this.array._promise);return value instanceof Promise?(this.array._currentCancellable=value,value._then(gotValue,void 0,void 0,this,void 0)):gotValue.call(this,value)}function gotValue(value){var array=this.array,promise=array._promise,fn=tryCatch(array._fn);promise._pushContext();var ret;ret=void 0!==array._eachValues?fn.call(promise._boundValue(),value,this.index,this.length):fn.call(promise._boundValue(),this.accum,value,this.index,this.length),ret instanceof Promise&&(array._currentCancellable=ret);var promiseCreated=promise._popContext();return debug.checkForgottenReturns(ret,promiseCreated,void 0!==array._eachValues?"Promise.each":"Promise.reduce",promise),ret}var getDomain=Promise._getDomain,util=_dereq_("./util"),tryCatch=util.tryCatch;util.inherits(ReductionPromiseArray,PromiseArray),ReductionPromiseArray.prototype._gotAccum=function(accum){void 0!==this._eachValues&&null!==this._eachValues&&accum!==INTERNAL&&this._eachValues.push(accum)},ReductionPromiseArray.prototype._eachComplete=function(value){return null!==this._eachValues&&this._eachValues.push(value),this._eachValues},ReductionPromiseArray.prototype._init=function(){},ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},ReductionPromiseArray.prototype.shouldCopyValues=function(){return!1},ReductionPromiseArray.prototype._resolve=function(value){this._promise._resolveCallback(value),this._values=null},ReductionPromiseArray.prototype._resultCancelled=function(sender){return sender===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof Promise&&this._currentCancellable.cancel(),this._initialValue instanceof Promise&&this._initialValue.cancel()))},ReductionPromiseArray.prototype._iterate=function(values){this._values=values;var value,i,length=values.length;if(void 0!==this._initialValue?(value=this._initialValue,i=0):(value=Promise.resolve(values[0]),i=1),this._currentCancellable=value,!value.isRejected())for(;i<length;++i){var ctx={accum:null,value:values[i],index:i,length:length,array:this};value=value._then(gotAccum,void 0,void 0,ctx,void 0)}void 0!==this._eachValues&&(value=value._then(this._eachComplete,void 0,void 0,this,void 0)),value._then(completed,completed,void 0,value,this)},Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null)},Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each)}}},{"./util":36}],29:[function(_dereq_,module,exports){"use strict";var schedule,util=_dereq_("./util"),noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},NativePromise=util.getNativePromise();if(util.isNode&&"undefined"==typeof MutationObserver){var GlobalSetImmediate=global.setImmediate,ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(fn){GlobalSetImmediate.call(global,fn)}:function(fn){ProcessNextTick.call(process,fn)}}else if("function"==typeof NativePromise&&"function"==typeof NativePromise.resolve){var nativePromise=NativePromise.resolve();schedule=function(fn){nativePromise.then(fn)}}else schedule="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(fn){setImmediate(fn)}:"undefined"!=typeof setTimeout?function(fn){setTimeout(fn,0)}:noAsyncScheduler:function(){var div=document.createElement("div"),opts={attributes:!0},toggleScheduled=!1,div2=document.createElement("div"),o2=new MutationObserver(function(){div.classList.toggle("foo"),toggleScheduled=!1});o2.observe(div2,opts);var scheduleToggle=function(){toggleScheduled||(toggleScheduled=!0,div2.classList.toggle("foo"))};return function(fn){var o=new MutationObserver(function(){o.disconnect(),fn()});o.observe(div,opts),scheduleToggle()}}();module.exports=schedule},{"./util":36}],30:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,debug){function SettledPromiseArray(values){this.constructor$(values)}var PromiseInspection=Promise.PromiseInspection,util=_dereq_("./util");util.inherits(SettledPromiseArray,PromiseArray),SettledPromiseArray.prototype._promiseResolved=function(index,inspection){this._values[index]=inspection;var totalResolved=++this._totalResolved;return totalResolved>=this._length&&(this._resolve(this._values),!0)},SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection;return ret._bitField=33554432,ret._settledValueField=value,this._promiseResolved(index,ret)},SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection;return ret._bitField=16777216,ret._settledValueField=reason,this._promiseResolved(index,ret)},Promise.settle=function(promises){return debug.deprecated(".settle()",".reflect()"),new SettledPromiseArray(promises).promise()},Promise.prototype.settle=function(){return Promise.settle(this)}}},{"./util":36}],31:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection){function SomePromiseArray(values){this.constructor$(values),this._howMany=0,this._unwrap=!1,this._initialized=!1}function some(promises,howMany){if((0|howMany)!==howMany||howMany<0)return apiRejection("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var ret=new SomePromiseArray(promises),promise=ret.promise();return ret.setHowMany(howMany),ret.init(),promise}var util=_dereq_("./util"),RangeError=_dereq_("./errors").RangeError,AggregateError=_dereq_("./errors").AggregateError,isArray=util.isArray,CANCELLATION={};util.inherits(SomePromiseArray,PromiseArray),SomePromiseArray.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var isArrayResolved=isArray(this._values);!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},SomePromiseArray.prototype.init=function(){this._initialized=!0,this._init()},SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=!0},SomePromiseArray.prototype.howMany=function(){return this._howMany},SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count},SomePromiseArray.prototype._promiseFulfilled=function(value){return this._addFulfilled(value),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},SomePromiseArray.prototype._promiseRejected=function(reason){return this._addRejected(reason),this._checkOutcome()},SomePromiseArray.prototype._promiseCancelled=function(){return this._values instanceof Promise||null==this._values?this._cancel():(this._addRejected(CANCELLATION),this._checkOutcome())},SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new AggregateError,i=this.length();i<this._values.length;++i)this._values[i]!==CANCELLATION&&e.push(this._values[i]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved},SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length()},SomePromiseArray.prototype._addRejected=function(reason){
this._values.push(reason)},SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value},SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+this._howMany+" items but contains only "+count+" items";return new RangeError(message)},SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},Promise.some=function(promises,howMany){return some(promises,howMany)},Promise.prototype.some=function(howMany){return some(this,howMany)},Promise._SomePromiseArray=SomePromiseArray}},{"./errors":12,"./util":36}],32:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function PromiseInspection(promise){void 0!==promise?(promise=promise._target(),this._bitField=promise._bitField,this._settledValueField=promise._isFateSealed()?promise._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}PromiseInspection.prototype._settledValue=function(){return this._settledValueField};var value=PromiseInspection.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},reason=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},isFulfilled=PromiseInspection.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},isRejected=PromiseInspection.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},isPending=PromiseInspection.prototype.isPending=function(){return 0===(50397184&this._bitField)},isResolved=PromiseInspection.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};PromiseInspection.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},Promise.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},Promise.prototype._isCancelled=function(){return this._target().__isCancelled()},Promise.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},Promise.prototype.isPending=function(){return isPending.call(this._target())},Promise.prototype.isRejected=function(){return isRejected.call(this._target())},Promise.prototype.isFulfilled=function(){return isFulfilled.call(this._target())},Promise.prototype.isResolved=function(){return isResolved.call(this._target())},Promise.prototype.value=function(){return value.call(this._target())},Promise.prototype.reason=function(){var target=this._target();return target._unsetRejectionIsUnhandled(),reason.call(target)},Promise.prototype._value=function(){return this._settledValue()},Promise.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},Promise.PromiseInspection=PromiseInspection}},{}],33:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){function tryConvertToPromise(obj,context){if(isObject(obj)){if(obj instanceof Promise)return obj;var then=getThen(obj);if(then===errorObj){context&&context._pushContext();var ret=Promise.reject(then.e);return context&&context._popContext(),ret}if("function"==typeof then){if(isAnyBluebirdPromise(obj)){var ret=new Promise(INTERNAL);return obj._then(ret._fulfill,ret._reject,void 0,ret,null),ret}return doThenable(obj,then,context)}}return obj}function doGetThen(obj){return obj.then}function getThen(obj){try{return doGetThen(obj)}catch(e){return errorObj.e=e,errorObj}}function isAnyBluebirdPromise(obj){try{return hasProp.call(obj,"_promise0")}catch(e){return!1}}function doThenable(x,then,context){function resolve(value){promise&&(promise._resolveCallback(value),promise=null)}function reject(reason){promise&&(promise._rejectCallback(reason,synchronous,!0),promise=null)}var promise=new Promise(INTERNAL),ret=promise;context&&context._pushContext(),promise._captureStackTrace(),context&&context._popContext();var synchronous=!0,result=util.tryCatch(then).call(x,resolve,reject);return synchronous=!1,promise&&result===errorObj&&(promise._rejectCallback(result.e,!0,!0),promise=null),ret}var util=_dereq_("./util"),errorObj=util.errorObj,isObject=util.isObject,hasProp={}.hasOwnProperty;return tryConvertToPromise}},{"./util":36}],34:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,debug){function HandleWrapper(handle){this.handle=handle}function successClear(value){return clearTimeout(this.handle),value}function failureClear(reason){throw clearTimeout(this.handle),reason}var util=_dereq_("./util"),TimeoutError=Promise.TimeoutError;HandleWrapper.prototype._resultCancelled=function(){clearTimeout(this.handle)};var afterValue=function(value){return delay(+this).thenReturn(value)},delay=Promise.delay=function(ms,value){var ret,handle;return void 0!==value?(ret=Promise.resolve(value)._then(afterValue,null,null,ms,void 0),debug.cancellation()&&value instanceof Promise&&ret._setOnCancel(value)):(ret=new Promise(INTERNAL),handle=setTimeout(function(){ret._fulfill()},+ms),debug.cancellation()&&ret._setOnCancel(new HandleWrapper(handle)),ret._captureStackTrace()),ret._setAsyncGuaranteed(),ret};Promise.prototype.delay=function(ms){return delay(ms,this)};var afterTimeout=function(promise,message,parent){var err;err="string"!=typeof message?message instanceof Error?message:new TimeoutError("operation timed out"):new TimeoutError(message),util.markAsOriginatingFromRejection(err),promise._attachExtraTrace(err),promise._reject(err),null!=parent&&parent.cancel()};Promise.prototype.timeout=function(ms,message){ms=+ms;var ret,parent,handleWrapper=new HandleWrapper(setTimeout(function(){ret.isPending()&&afterTimeout(ret,message,parent)},ms));return debug.cancellation()?(parent=this.then(),ret=parent._then(successClear,failureClear,void 0,handleWrapper,void 0),ret._setOnCancel(handleWrapper)):ret=this._then(successClear,failureClear,void 0,handleWrapper,void 0),ret}}},{"./util":36}],35:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug){function thrower(e){setTimeout(function(){throw e},0)}function castPreservingDisposable(thenable){var maybePromise=tryConvertToPromise(thenable);return maybePromise!==thenable&&"function"==typeof thenable._isDisposable&&"function"==typeof thenable._getDisposer&&thenable._isDisposable()&&maybePromise._setDisposable(thenable._getDisposer()),maybePromise}function dispose(resources,inspection){function iterator(){if(i>=len)return ret._fulfill();var maybePromise=castPreservingDisposable(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise)}catch(e){return thrower(e)}if(maybePromise instanceof Promise)return maybePromise._then(iterator,thrower,null,null,null)}iterator()}var i=0,len=resources.length,ret=new Promise(INTERNAL);return iterator(),ret}function Disposer(data,promise,context){this._data=data,this._promise=promise,this._context=context}function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context)}function maybeUnwrapDisposer(value){return Disposer.isDisposer(value)?(this.resources[this.index]._setDisposable(value),value.promise()):value}function ResourceList(length){this.length=length,this.promise=null,this[length-1]=null}var util=_dereq_("./util"),TypeError=_dereq_("./errors").TypeError,inherits=_dereq_("./util").inherits,errorObj=util.errorObj,tryCatch=util.tryCatch,NULL={};Disposer.prototype.data=function(){return this._data},Disposer.prototype.promise=function(){return this._promise},Disposer.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():NULL},Disposer.prototype.tryDispose=function(inspection){var resource=this.resource(),context=this._context;void 0!==context&&context._pushContext();var ret=resource!==NULL?this.doDispose(resource,inspection):null;return void 0!==context&&context._popContext(),this._promise._unsetDisposable(),this._data=null,ret},Disposer.isDisposer=function(d){return null!=d&&"function"==typeof d.resource&&"function"==typeof d.tryDispose},inherits(FunctionDisposer,Disposer),FunctionDisposer.prototype.doDispose=function(resource,inspection){var fn=this.data();return fn.call(resource,resource,inspection)},ResourceList.prototype._resultCancelled=function(){for(var len=this.length,i=0;i<len;++i){var item=this[i];item instanceof Promise&&item.cancel()}},Promise.using=function(){var len=arguments.length;if(len<2)return apiRejection("you must pass at least 2 arguments to Promise.using");var fn=arguments[len-1];if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var input,spreadArgs=!0;2===len&&Array.isArray(arguments[0])?(input=arguments[0],len=input.length,spreadArgs=!1):(input=arguments,len--);for(var resources=new ResourceList(len),i=0;i<len;++i){var resource=input[i];if(Disposer.isDisposer(resource)){var disposer=resource;resource=resource.promise(),resource._setDisposable(disposer)}else{var maybePromise=tryConvertToPromise(resource);maybePromise instanceof Promise&&(resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},void 0))}resources[i]=resource}for(var reflectedResources=new Array(resources.length),i=0;i<reflectedResources.length;++i)reflectedResources[i]=Promise.resolve(resources[i]).reflect();var resultPromise=Promise.all(reflectedResources).then(function(inspections){for(var i=0;i<inspections.length;++i){var inspection=inspections[i];if(inspection.isRejected())return errorObj.e=inspection.error(),errorObj;if(!inspection.isFulfilled())return void resultPromise.cancel();inspections[i]=inspection.value()}promise._pushContext(),fn=tryCatch(fn);var ret=spreadArgs?fn.apply(void 0,inspections):fn(inspections),promiseCreated=promise._popContext();return debug.checkForgottenReturns(ret,promiseCreated,"Promise.using",promise),ret}),promise=resultPromise.lastly(function(){var inspection=new Promise.PromiseInspection(resultPromise);return dispose(resources,inspection)});return resources.promise=promise,promise._setOnCancel(resources),promise},Promise.prototype._setDisposable=function(disposer){this._bitField=131072|this._bitField,this._disposer=disposer},Promise.prototype._isDisposable=function(){return(131072&this._bitField)>0},Promise.prototype._getDisposer=function(){return this._disposer},Promise.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},Promise.prototype.disposer=function(fn){if("function"==typeof fn)return new FunctionDisposer(fn,this,createContext());throw new TypeError}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";function tryCatcher(){try{var target=tryCatchTarget;return tryCatchTarget=null,target.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}function isPrimitive(val){return null==val||val===!0||val===!1||"string"==typeof val||"number"==typeof val}function isObject(value){return"function"==typeof value||"object"==typeof value&&null!==value}function maybeWrapAsError(maybeError){return isPrimitive(maybeError)?new Error(safeToString(maybeError)):maybeError}function withAppended(target,appendee){var i,len=target.length,ret=new Array(len+1);for(i=0;i<len;++i)ret[i]=target[i];return ret[i]=appendee,ret}function getDataPropertyOrDefault(obj,key,defaultValue){if(!es5.isES5)return{}.hasOwnProperty.call(obj,key)?obj[key]:void 0;var desc=Object.getOwnPropertyDescriptor(obj,key);return null!=desc?null==desc.get&&null==desc.set?desc.value:defaultValue:void 0}function notEnumerableProp(obj,name,value){if(isPrimitive(obj))return obj;var descriptor={value:value,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(obj,name,descriptor),obj}function thrower(r){throw r}function isClass(fn){try{if("function"==typeof fn){var keys=es5.names(fn.prototype),hasMethods=es5.isES5&&keys.length>1,hasMethodsOtherThanConstructor=keys.length>0&&!(1===keys.length&&"constructor"===keys[0]),hasThisAssignmentAndStaticMethods=thisAssignmentPattern.test(fn+"")&&es5.names(fn).length>0;if(hasMethods||hasMethodsOtherThanConstructor||hasThisAssignmentAndStaticMethods)return!0}return!1}catch(e){return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;for(var l=8;l--;)new FakeConstructor;return obj}function isIdentifier(str){return rident.test(str)}function filledRange(count,prefix,suffix){for(var ret=new Array(count),i=0;i<count;++i)ret[i]=prefix+i+suffix;return ret}function safeToString(obj){try{return obj+""}catch(e){return"[no string representation]"}}function isError(obj){return null!==obj&&"object"==typeof obj&&"string"==typeof obj.message&&"string"==typeof obj.name}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",!0)}catch(ignore){}}function originatesFromRejection(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function canAttachTrace(obj){return isError(obj)&&es5.propertyIsWritable(obj,"stack")}function classString(obj){return{}.toString.call(obj)}function copyDescriptors(from,to,filter){for(var keys=es5.names(from),i=0;i<keys.length;++i){var key=keys[i];if(filter(key))try{es5.defineProperty(to,key,es5.getDescriptor(from,key))}catch(ignore){}}}function env(key,def){return isNode?process.env[key]:def}function getNativePromise(){if("function"==typeof Promise)try{var promise=new Promise(function(){});if("[object Promise]"==={}.toString.call(promise))return Promise}catch(e){}}function domainBind(self,cb){return self.bind(cb)}var es5=_dereq_("./es5"),canEvaluate="undefined"==typeof navigator,errorObj={e:{}},tryCatchTarget,globalObject="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,inherits=function(Child,Parent){function T(){this.constructor=Child,this.constructor$=Parent;for(var propertyName in Parent.prototype)hasProp.call(Parent.prototype,propertyName)&&"$"!==propertyName.charAt(propertyName.length-1)&&(this[propertyName+"$"]=Parent.prototype[propertyName])}var hasProp={}.hasOwnProperty;return T.prototype=Parent.prototype,Child.prototype=new T,Child.prototype},inheritedDataKeys=function(){var excludedPrototypes=[Array.prototype,Object.prototype,Function.prototype],isExcludedProto=function(val){for(var i=0;i<excludedPrototypes.length;++i)if(excludedPrototypes[i]===val)return!0;return!1};if(es5.isES5){var getKeys=Object.getOwnPropertyNames;return function(obj){for(var ret=[],visitedKeys=Object.create(null);null!=obj&&!isExcludedProto(obj);){var keys;try{keys=getKeys(obj)}catch(e){return ret}for(var i=0;i<keys.length;++i){var key=keys[i];if(!visitedKeys[key]){visitedKeys[key]=!0;var desc=Object.getOwnPropertyDescriptor(obj,key);null!=desc&&null==desc.get&&null==desc.set&&ret.push(key)}}obj=es5.getPrototypeOf(obj)}return ret}}var hasProp={}.hasOwnProperty;return function(obj){if(isExcludedProto(obj))return[];var ret=[];enumeration:for(var key in obj)if(hasProp.call(obj,key))ret.push(key);else{for(var i=0;i<excludedPrototypes.length;++i)if(hasProp.call(excludedPrototypes[i],key))continue enumeration;ret.push(key)}return ret}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/,rident=/^[a-z$_][a-z$_0-9]*$/i,ensureErrorObject=function(){return"stack"in new Error?function(value){return canAttachTrace(value)?value:new Error(safeToString(value))}:function(value){if(canAttachTrace(value))return value;try{throw new Error(safeToString(value))}catch(err){return err}}}(),asArray=function(v){return es5.isArray(v)?v:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ArrayFrom="function"==typeof Array.from?function(v){return Array.from(v)}:function(v){for(var itResult,ret=[],it=v[Symbol.iterator]();!(itResult=it.next()).done;)ret.push(itResult.value);return ret};asArray=function(v){return es5.isArray(v)?v:null!=v&&"function"==typeof v[Symbol.iterator]?ArrayFrom(v):null}}var isNode="undefined"!=typeof process&&"[object process]"===classString(process).toLowerCase(),ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:isNode,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&function(){var version=process.versions.node.split(".").map(Number);return 0===version[0]&&version[1]>10||version[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:29}],22:[function(require,module,exports){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}"undefined"!=typeof module&&(module.exports=Emitter),Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],23:[function(require,module,exports){var exports=module.exports=function(doc){doc||(doc={}),"string"==typeof doc&&(doc={cookie:doc}),void 0===doc.cookie&&(doc.cookie="");var self={};return self.get=function(key){for(var splat=doc.cookie.split(/;\s*/),i=0;i<splat.length;i++){var ps=splat[i].split("="),k=unescape(ps[0]);if(k===key)return unescape(ps[1])}},self.set=function(key,value,opts){opts||(opts={});var s=escape(key)+"="+escape(value);return opts.expires&&(s+="; expires="+opts.expires),opts.path&&(s+="; path="+escape(opts.path)),doc.cookie=s,s},self};if("undefined"!=typeof document){var cookie=exports(document);exports.get=cookie.get,exports.set=cookie.set}},{}],24:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,"function"==typeof console.trace)),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}],25:[function(require,module,exports){function setAttributes(script,attrs){for(var attr in attrs)script.setAttribute(attr,attrs[attr])}function stdOnEnd(script,cb){script.onload=function(){this.onerror=this.onload=null,cb(null,script)},script.onerror=function(){this.onerror=this.onload=null,cb(new Error("Failed to load "+this.src),script)}}function ieOnEnd(script,cb){script.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,cb(null,script))}}module.exports=function(src,opts,cb){var head=document.head||document.getElementsByTagName("head")[0],script=document.createElement("script");"function"==typeof opts&&(cb=opts,opts={}),opts=opts||{},cb=cb||function(){},script.type=opts.type||"text/javascript",script.charset=opts.charset||"utf8",script.async=!("async"in opts)||!!opts.async,script.src=src,opts.attrs&&setAttributes(script,opts.attrs),opts.text&&(script.text=""+opts.text);var onend="onload"in script?stdOnEnd:ieOnEnd;onend(script,cb),script.onload||stdOnEnd(script,cb),head.appendChild(script)}},{}],26:[function(require,module,exports){(function(global){!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.localforage=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";function INTERNAL(){}function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,"function"==typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),"function"==typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)})}function getThen(obj){var then=obj&&obj.then;if(obj&&"object"==typeof obj&&"function"==typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}function tryToUnwrap(){thenable(onSuccess,onError)}var called=!1,result=tryCatch(tryToUnwrap);"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}function resolve(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)}function reject(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)}function all(iterable){function allResolver(value,i){function resolveFromAll(outValue){values[i]=outValue,++resolved!==len||called||(called=!0,handlers.resolve(promise,values))}self.resolve(value).then(resolveFromAll,function(error){called||(called=!0,handlers.reject(promise,error))})}var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)allResolver(iterable[i],i);return promise}function race(iterable){function resolver(value){self.resolve(value).then(function(response){called||(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)resolver(iterable[i]);return promise}var immediate=_dereq_(2),handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];module.exports=exports=Promise,Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){if("function"!=typeof onFulfilled&&this.state===FULFILLED||"function"!=typeof onRejected&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);if(this.state!==PENDING){var resolver=this.state===FULFILLED?onFulfilled:onRejected;unwrap(promise,resolver,this.outcome)}else this.queue.push(new QueueItem(promise,onFulfilled,onRejected));return promise},QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)},handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self,thenable);else{self.state=FULFILLED,self.outcome=value;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callFulfilled(value)}return self},handlers.reject=function(self,error){self.state=REJECTED,self.outcome=error;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self},exports.resolve=resolve,exports.reject=reject,exports.all=all,exports.race=race},{2:2}],2:[function(_dereq_,module,exports){(function(global){"use strict";function nextTick(){draining=!0;for(var i,oldQueue,len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}function immediate(task){1!==queue.push(task)||draining||scheduleDrain()}var scheduleDrain,Mutation=global.MutationObserver||global.WebKitMutationObserver;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||"undefined"==typeof global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0);
}}var draining,queue=[];module.exports=immediate}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(_dereq_,module,exports){(function(global){"use strict";"function"!=typeof global.Promise&&(global.Promise=_dereq_(1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(_dereq_,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getIDB(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function isIndexedDBValid(){try{return!!idb&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(idb&&"function"==typeof idb.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function isWebSQLValid(){return"function"==typeof openDatabase}function isLocalStorageValid(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function createBlob(parts,properties){parts=parts||[],properties=properties||{};try{return new Blob(parts,properties)}catch(e){if("TypeError"!==e.name)throw e;for(var Builder="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,builder=new Builder,i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}function executeCallback(promise,callback){callback&&promise.then(function(result){callback(null,result)},function(error){callback(error)})}function executeTwoCallbacks(promise,callback,errorCallback){"function"==typeof callback&&promise.then(callback),"function"==typeof errorCallback&&promise["catch"](errorCallback)}function _binStringToArrayBuffer(bin){for(var length=bin.length,buf=new ArrayBuffer(length),arr=new Uint8Array(buf),i=0;i<length;i++)arr[i]=bin.charCodeAt(i);return buf}function _checkBlobSupportWithoutCaching(txn){return new Promise$1(function(resolve){var blob=createBlob([""]);txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob,"key"),txn.onabort=function(e){e.preventDefault(),e.stopPropagation(),resolve(!1)},txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/),matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||!matchedChrome||parseInt(matchedChrome[1],10)>=43)}})["catch"](function(){return!1})}function _checkBlobSupport(idb){return"boolean"==typeof supportsBlobs?Promise$1.resolve(supportsBlobs):_checkBlobSupportWithoutCaching(idb).then(function(value){return supportsBlobs=value})}function _deferReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation={};deferredOperation.promise=new Promise$1(function(resolve){deferredOperation.resolve=resolve}),dbContext.deferredOperations.push(deferredOperation),dbContext.dbReady?dbContext.dbReady=dbContext.dbReady.then(function(){return deferredOperation.promise}):dbContext.dbReady=deferredOperation.promise}function _advanceReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation=dbContext.deferredOperations.pop();deferredOperation&&deferredOperation.resolve()}function _getConnection(dbInfo,upgradeNeeded){return new Promise$1(function(resolve,reject){if(dbInfo.db){if(!upgradeNeeded)return resolve(dbInfo.db);_deferReadiness(dbInfo),dbInfo.db.close()}var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),e.oldVersion<=1&&db.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}catch(ex){if("ConstraintError"!==ex.name)throw ex}}),openreq.onerror=function(){reject(openreq.error)},openreq.onsuccess=function(){resolve(openreq.result),_advanceReadiness(dbInfo)}})}function _getOriginalConnection(dbInfo){return _getConnection(dbInfo,!1)}function _getUpgradedConnection(dbInfo){return _getConnection(dbInfo,!0)}function _isUpgradeNeeded(dbInfo,defaultVersion){if(!dbInfo.db)return!0;var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),isDowngrade=dbInfo.version<dbInfo.db.version,isUpgrade=dbInfo.version>dbInfo.db.version;if(isDowngrade&&(dbInfo.version!==defaultVersion,dbInfo.version=dbInfo.db.version),isUpgrade||isNewStore){if(isNewStore){var incVersion=dbInfo.db.version+1;incVersion>dbInfo.version&&(dbInfo.version=incVersion)}return!0}return!1}function _encodeBlob(blob){return new Promise$1(function(resolve,reject){var reader=new FileReader;reader.onerror=reject,reader.onloadend=function(e){var base64=btoa(e.target.result||"");resolve({__local_forage_encoded_blob:!0,data:base64,type:blob.type})},reader.readAsBinaryString(blob)})}function _decodeBlob(encodedBlob){var arrayBuff=_binStringToArrayBuffer(atob(encodedBlob.data));return createBlob([arrayBuff],{type:encodedBlob.type})}function _isEncodedBlob(value){return value&&value.__local_forage_encoded_blob}function _fullyReady(callback){var self=this,promise=self._initReady().then(function(){var dbContext=dbContexts[self._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady});return executeTwoCallbacks(promise,callback,callback),promise}function _initStorage(options){function ignoreErrors(){return Promise$1.resolve()}var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];dbContexts||(dbContexts={});var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext={forages:[],db:null,dbReady:null,deferredOperations:[]},dbContexts[dbInfo.name]=dbContext),dbContext.forages.push(self),self._initReady||(self._initReady=self.ready,self.ready=_fullyReady);for(var initPromises=[],j=0;j<dbContext.forages.length;j++){var forage=dbContext.forages[j];forage!==self&&initPromises.push(forage._initReady()["catch"](ignoreErrors))}var forages=dbContext.forages.slice(0);return Promise$1.all(initPromises).then(function(){return dbInfo.db=dbContext.db,_getOriginalConnection(dbInfo)}).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo,self._defaultConfig.version)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db,self._dbInfo=dbInfo;for(var k=0;k<forages.length;k++){var forage=forages[k];forage!==self&&(forage._dbInfo.db=dbInfo.db,forage._dbInfo.version=dbInfo.version)}})}function getItem(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.get(key);req.onsuccess=function(){var value=req.result;void 0===value&&(value=null),_isEncodedBlob(value)&&(value=_decodeBlob(value)),resolve(value)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function iterate(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.openCursor(),iterationNumber=1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;_isEncodedBlob(value)&&(value=_decodeBlob(value));var result=iterator(value,cursor.key,iterationNumber++);void 0!==result?resolve(result):cursor["continue"]()}else resolve()},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function setItem(key,value,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){var dbInfo;self.ready().then(function(){return dbInfo=self._dbInfo,"[object Blob]"===toString.call(value)?_checkBlobSupport(dbInfo.db).then(function(blobSupport){return blobSupport?value:_encodeBlob(value)}):value}).then(function(value){var transaction=dbInfo.db.transaction(dbInfo.storeName,"readwrite"),store=transaction.objectStore(dbInfo.storeName);null===value&&(value=void 0),transaction.oncomplete=function(){void 0===value&&(value=null),resolve(value)},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)};var req=store.put(value,key)})["catch"](reject)});return executeCallback(promise,callback),promise}function removeItem(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,transaction=dbInfo.db.transaction(dbInfo.storeName,"readwrite"),store=transaction.objectStore(dbInfo.storeName),req=store["delete"](key);transaction.oncomplete=function(){resolve()},transaction.onerror=function(){reject(req.error)},transaction.onabort=function(){var err=req.error?req.error:req.transaction.error;reject(err)}})["catch"](reject)});return executeCallback(promise,callback),promise}function clear(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,transaction=dbInfo.db.transaction(dbInfo.storeName,"readwrite"),store=transaction.objectStore(dbInfo.storeName),req=store.clear();transaction.oncomplete=function(){resolve()},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)}})["catch"](reject)});return executeCallback(promise,callback),promise}function length(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.count();req.onsuccess=function(){resolve(req.result)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function key(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){return n<0?void resolve(null):void self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),advanced=!1,req=store.openCursor();req.onsuccess=function(){var cursor=req.result;return cursor?void(0===n?resolve(cursor.key):advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n))):void resolve(null)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function keys(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.openCursor(),keys=[];req.onsuccess=function(){var cursor=req.result;return cursor?(keys.push(cursor.key),void cursor["continue"]()):void resolve(keys)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function stringToBuffer(serializedString){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*serializedString.length,len=serializedString.length,p=0;"="===serializedString[serializedString.length-1]&&(bufferLength--,"="===serializedString[serializedString.length-2]&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(i=0;i<len;i+=4)encoded1=BASE_CHARS.indexOf(serializedString[i]),encoded2=BASE_CHARS.indexOf(serializedString[i+1]),encoded3=BASE_CHARS.indexOf(serializedString[i+2]),encoded4=BASE_CHARS.indexOf(serializedString[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return buffer}function bufferToString(buffer){var i,bytes=new Uint8Array(buffer),base64String="";for(i=0;i<bytes.length;i+=3)base64String+=BASE_CHARS[bytes[i]>>2],base64String+=BASE_CHARS[(3&bytes[i])<<4|bytes[i+1]>>4],base64String+=BASE_CHARS[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64String+=BASE_CHARS[63&bytes[i+2]];return bytes.length%3===2?base64String=base64String.substring(0,base64String.length-1)+"=":bytes.length%3===1&&(base64String=base64String.substring(0,base64String.length-2)+"=="),base64String}function serialize(value,callback){var valueType="";if(value&&(valueType=toString$1.call(value)),value&&("[object ArrayBuffer]"===valueType||value.buffer&&"[object ArrayBuffer]"===toString$1.call(value.buffer))){var buffer,marker=SERIALIZED_MARKER;value instanceof ArrayBuffer?(buffer=value,marker+=TYPE_ARRAYBUFFER):(buffer=value.buffer,"[object Int8Array]"===valueType?marker+=TYPE_INT8ARRAY:"[object Uint8Array]"===valueType?marker+=TYPE_UINT8ARRAY:"[object Uint8ClampedArray]"===valueType?marker+=TYPE_UINT8CLAMPEDARRAY:"[object Int16Array]"===valueType?marker+=TYPE_INT16ARRAY:"[object Uint16Array]"===valueType?marker+=TYPE_UINT16ARRAY:"[object Int32Array]"===valueType?marker+=TYPE_INT32ARRAY:"[object Uint32Array]"===valueType?marker+=TYPE_UINT32ARRAY:"[object Float32Array]"===valueType?marker+=TYPE_FLOAT32ARRAY:"[object Float64Array]"===valueType?marker+=TYPE_FLOAT64ARRAY:callback(new Error("Failed to get type for BinaryArray"))),callback(marker+bufferToString(buffer))}else if("[object Blob]"===valueType){var fileReader=new FileReader;fileReader.onload=function(){var str=BLOB_TYPE_PREFIX+value.type+"~"+bufferToString(this.result);callback(SERIALIZED_MARKER+TYPE_BLOB+str)},fileReader.readAsArrayBuffer(value)}else try{callback(JSON.stringify(value))}catch(e){callback(null,e)}}function deserialize(value){if(value.substring(0,SERIALIZED_MARKER_LENGTH)!==SERIALIZED_MARKER)return JSON.parse(value);var blobType,serializedString=value.substring(TYPE_SERIALIZED_MARKER_LENGTH),type=value.substring(SERIALIZED_MARKER_LENGTH,TYPE_SERIALIZED_MARKER_LENGTH);if(type===TYPE_BLOB&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);blobType=matcher[1],serializedString=serializedString.substring(matcher[0].length)}var buffer=stringToBuffer(serializedString);switch(type){case TYPE_ARRAYBUFFER:return buffer;case TYPE_BLOB:return createBlob([buffer],{type:blobType});case TYPE_INT8ARRAY:return new Int8Array(buffer);case TYPE_UINT8ARRAY:return new Uint8Array(buffer);case TYPE_UINT8CLAMPEDARRAY:return new Uint8ClampedArray(buffer);case TYPE_INT16ARRAY:return new Int16Array(buffer);case TYPE_UINT16ARRAY:return new Uint16Array(buffer);case TYPE_INT32ARRAY:return new Int32Array(buffer);case TYPE_UINT32ARRAY:return new Uint32Array(buffer);case TYPE_FLOAT32ARRAY:return new Float32Array(buffer);case TYPE_FLOAT64ARRAY:return new Float64Array(buffer);default:throw new Error("Unkown type: "+type)}}function _initStorage$1(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]="string"!=typeof options[i]?options[i].toString():options[i];var dbInfoPromise=new Promise$1(function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+dbInfo.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){self._dbInfo=dbInfo,resolve()},function(t,error){reject(error)})})});return dbInfo.serializer=localforageSerializer,dbInfoPromise}function getItem$1(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT * FROM "+dbInfo.storeName+" WHERE key = ? LIMIT 1",[key],function(t,results){var result=results.rows.length?results.rows.item(0).value:null;result&&(result=dbInfo.serializer.deserialize(result)),resolve(result)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function iterate$1(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT * FROM "+dbInfo.storeName,[],function(t,results){for(var rows=results.rows,length=rows.length,i=0;i<length;i++){var item=rows.item(i),result=item.value;if(result&&(result=dbInfo.serializer.deserialize(result)),result=iterator(result,item.key,i+1),void 0!==result)return void resolve(result)}resolve()},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function setItem$1(key,value,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){void 0===value&&(value=null);var originalValue=value,dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,function(value,error){error?reject(error):dbInfo.db.transaction(function(t){t.executeSql("INSERT OR REPLACE INTO "+dbInfo.storeName+" (key, value) VALUES (?, ?)",[key,value],function(){resolve(originalValue)},function(t,error){reject(error)})},function(sqlError){sqlError.code===sqlError.QUOTA_ERR&&reject(sqlError)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function removeItem$1(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("DELETE FROM "+dbInfo.storeName+" WHERE key = ?",[key],function(){resolve()},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function clear$1(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("DELETE FROM "+dbInfo.storeName,[],function(){resolve()},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function length$1(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+dbInfo.storeName,[],function(t,results){var result=results.rows.item(0).c;resolve(result)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function key$1(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT key FROM "+dbInfo.storeName+" WHERE id = ? LIMIT 1",[n+1],function(t,results){var result=results.rows.length?results.rows.item(0).key:null;resolve(result)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function keys$1(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT key FROM "+dbInfo.storeName,[],function(t,results){for(var keys=[],i=0;i<results.rows.length;i++)keys.push(results.rows.item(i).key);resolve(keys)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function _initStorage$2(options){var self=this,dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];return dbInfo.keyPrefix=dbInfo.name+"/",dbInfo.storeName!==self._defaultConfig.storeName&&(dbInfo.keyPrefix+=dbInfo.storeName+"/"),self._dbInfo=dbInfo,dbInfo.serializer=localforageSerializer,Promise$1.resolve()}function clear$2(callback){var self=this,promise=self.ready().then(function(){for(var keyPrefix=self._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}});return executeCallback(promise,callback),promise}function getItem$2(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=self.ready().then(function(){var dbInfo=self._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key);return result&&(result=dbInfo.serializer.deserialize(result)),result});return executeCallback(promise,callback),promise}function iterate$2(iterator,callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length=localStorage.length,iterationNumber=1,i=0;i<length;i++){var key=localStorage.key(i);if(0===key.indexOf(keyPrefix)){var value=localStorage.getItem(key);if(value&&(value=dbInfo.serializer.deserialize(value)),value=iterator(value,key.substring(keyPrefixLength),iterationNumber++),void 0!==value)return value}}});return executeCallback(promise,callback),promise}function key$2(n,callback){var self=this,promise=self.ready().then(function(){var result,dbInfo=self._dbInfo;try{result=localStorage.key(n)}catch(error){result=null}return result&&(result=result.substring(dbInfo.keyPrefix.length)),result});return executeCallback(promise,callback),promise}function keys$2(callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,length=localStorage.length,keys=[],i=0;i<length;i++)0===localStorage.key(i).indexOf(dbInfo.keyPrefix)&&keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));return keys});return executeCallback(promise,callback),promise}function length$2(callback){var self=this,promise=self.keys().then(function(keys){return keys.length});return executeCallback(promise,callback),promise}function removeItem$2(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=self.ready().then(function(){var dbInfo=self._dbInfo;localStorage.removeItem(dbInfo.keyPrefix+key)});return executeCallback(promise,callback),promise}function setItem$2(key,value,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=self.ready().then(function(){void 0===value&&(value=null);var originalValue=value;return new Promise$1(function(resolve,reject){var dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,function(value,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key,value),resolve(originalValue)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||reject(e),reject(e)}})})});return executeCallback(promise,callback),promise}function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then(function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)})}}function extend(){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(arg)for(var key in arg)arg.hasOwnProperty(key)&&(isArray(arg[key])?arguments[0][key]=arg[key].slice():arguments[0][key]=arg[key])}return arguments[0]}function isLibraryDriver(driverName){for(var driver in DriverType)if(DriverType.hasOwnProperty(driver)&&DriverType[driver]===driverName)return!0;return!1}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},idb=getIDB();"undefined"==typeof Promise&&"undefined"!=typeof _dereq_&&_dereq_(3);var supportsBlobs,dbContexts,Promise$1=Promise,DETECT_BLOB_SUPPORT_STORE="local-forage-detect-blob-support",toString=Object.prototype.toString,asyncStorage={_driver:"asyncStorage",_initStorage:_initStorage,iterate:iterate,getItem:getItem,setItem:setItem,removeItem:removeItem,clear:clear,length:length,key:key,keys:keys},BASE_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BLOB_TYPE_PREFIX="~~local_forage_type~",BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,SERIALIZED_MARKER="__lfsc__:",SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER.length,TYPE_ARRAYBUFFER="arbf",TYPE_BLOB="blob",TYPE_INT8ARRAY="si08",TYPE_UINT8ARRAY="ui08",TYPE_UINT8CLAMPEDARRAY="uic8",TYPE_INT16ARRAY="si16",TYPE_INT32ARRAY="si32",TYPE_UINT16ARRAY="ur16",TYPE_UINT32ARRAY="ui32",TYPE_FLOAT32ARRAY="fl32",TYPE_FLOAT64ARRAY="fl64",TYPE_SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER_LENGTH+TYPE_ARRAYBUFFER.length,toString$1=Object.prototype.toString,localforageSerializer={serialize:serialize,deserialize:deserialize,stringToBuffer:stringToBuffer,bufferToString:bufferToString},webSQLStorage={_driver:"webSQLStorage",_initStorage:_initStorage$1,iterate:iterate$1,getItem:getItem$1,setItem:setItem$1,removeItem:removeItem$1,clear:clear$1,length:length$1,key:key$1,keys:keys$1},localStorageWrapper={_driver:"localStorageWrapper",_initStorage:_initStorage$2,iterate:iterate$2,getItem:getItem$2,setItem:setItem$2,removeItem:removeItem$2,clear:clear$2,length:length$2,key:key$2,keys:keys$2},CustomDrivers={},DriverType={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},DefaultDriverOrder=[DriverType.INDEXEDDB,DriverType.WEBSQL,DriverType.LOCALSTORAGE],LibraryMethods=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],DefaultConfig={description:"",driver:DefaultDriverOrder.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},driverSupport={};driverSupport[DriverType.INDEXEDDB]=isIndexedDBValid(),driverSupport[DriverType.WEBSQL]=isWebSQLValid(),driverSupport[DriverType.LOCALSTORAGE]=isLocalStorageValid();var isArray=Array.isArray||function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},LocalForage=function(){function LocalForage(options){_classCallCheck(this,LocalForage),this.INDEXEDDB=DriverType.INDEXEDDB,this.LOCALSTORAGE=DriverType.LOCALSTORAGE,this.WEBSQL=DriverType.WEBSQL,this._defaultConfig=extend({},DefaultConfig),this._config=extend({},this._defaultConfig,options),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return LocalForage.prototype.config=function(options){if("object"===("undefined"==typeof options?"undefined":_typeof(options))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in options)"storeName"===i&&(options[i]=options[i].replace(/\W/g,"_")),this._config[i]=options[i];return"driver"in options&&options.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof options?this._config[options]:this._config},LocalForage.prototype.defineDriver=function(driverObject,callback,errorCallback){var promise=new Promise$1(function(resolve,reject){try{var driverName=driverObject._driver,complianceError=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),namingError=new Error("Custom driver name already in use: "+driverObject._driver);if(!driverObject._driver)return void reject(complianceError);if(isLibraryDriver(driverObject._driver))return void reject(namingError);for(var customDriverMethods=LibraryMethods.concat("_initStorage"),i=0;i<customDriverMethods.length;i++){var customDriverMethod=customDriverMethods[i];if(!customDriverMethod||!driverObject[customDriverMethod]||"function"!=typeof driverObject[customDriverMethod])return void reject(complianceError)}var supportPromise=Promise$1.resolve(!0);"_support"in driverObject&&(supportPromise=driverObject._support&&"function"==typeof driverObject._support?driverObject._support():Promise$1.resolve(!!driverObject._support)),supportPromise.then(function(supportResult){driverSupport[driverName]=supportResult,CustomDrivers[driverName]=driverObject,resolve()},reject)}catch(e){reject(e)}});return executeTwoCallbacks(promise,callback,errorCallback),promise},LocalForage.prototype.driver=function(){return this._driver||null},LocalForage.prototype.getDriver=function(driverName,callback,errorCallback){var self=this,getDriverPromise=Promise$1.resolve().then(function(){if(!isLibraryDriver(driverName)){if(CustomDrivers[driverName])return CustomDrivers[driverName];throw new Error("Driver not found.")}switch(driverName){case self.INDEXEDDB:return asyncStorage;case self.LOCALSTORAGE:return localStorageWrapper;case self.WEBSQL:return webSQLStorage}});return executeTwoCallbacks(getDriverPromise,callback,errorCallback),getDriverPromise},LocalForage.prototype.getSerializer=function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);return executeTwoCallbacks(serializerPromise,callback),serializerPromise},LocalForage.prototype.ready=function(callback){var self=this,promise=self._driverSet.then(function(){return null===self._ready&&(self._ready=self._initDriver()),self._ready});return executeTwoCallbacks(promise,callback,callback),promise},LocalForage.prototype.setDriver=function(drivers,callback,errorCallback){function setDriverToConfig(){self._config.driver=self.driver()}function initDriver(supportedDrivers){return function(){function driverPromiseLoop(){for(;currentDriverIndex<supportedDrivers.length;){var driverName=supportedDrivers[currentDriverIndex];return currentDriverIndex++,self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(function(driver){return self._extend(driver),setDriverToConfig(),self._ready=self._initStorage(self._config),self._ready})["catch"](driverPromiseLoop)}setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}var currentDriverIndex=0;return driverPromiseLoop()}}var self=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers),oldDriverSetDone=null!==this._driverSet?this._driverSet["catch"](function(){return Promise$1.resolve()}):Promise$1.resolve();return this._driverSet=oldDriverSetDone.then(function(){var driverName=supportedDrivers[0];return self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(function(driver){self._driver=driver._driver,setDriverToConfig(),self._wrapLibraryMethodsWithReady(),self._initDriver=initDriver(supportedDrivers)})})["catch"](function(){setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}),executeTwoCallbacks(this._driverSet,callback,errorCallback),this._driverSet},LocalForage.prototype.supports=function(driverName){return!!driverSupport[driverName]},LocalForage.prototype._extend=function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)},LocalForage.prototype._getSupportedDrivers=function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers},LocalForage.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0;i<LibraryMethods.length;i++)callWhenReady(this,LibraryMethods[i])},LocalForage.prototype.createInstance=function(options){return new LocalForage(options)},LocalForage}(),localforage_js=new LocalForage;module.exports=localforage_js},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(require,module,exports){(function(global){function debounce(func,wait,options){function invokeFunc(time){var args=lastArgs,thisArg=lastThis;return lastArgs=lastThis=void 0,lastInvokeTime=time,result=func.apply(thisArg,args)}function leadingEdge(time){return lastInvokeTime=time,timerId=setTimeout(timerExpired,wait),leading?invokeFunc(time):result}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,result=wait-timeSinceLastCall;return maxing?nativeMin(result,maxWait-timeSinceLastInvoke):result}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;
return void 0===lastCallTime||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait}function timerExpired(){var time=now();return shouldInvoke(time)?trailingEdge(time):void(timerId=setTimeout(timerExpired,remainingWait(time)))}function trailingEdge(time){return timerId=void 0,trailing&&lastArgs?invokeFunc(time):(lastArgs=lastThis=void 0,result)}function cancel(){void 0!==timerId&&clearTimeout(timerId),lastInvokeTime=0,lastArgs=lastCallTime=lastThis=timerId=void 0}function flush(){return void 0===timerId?result:trailingEdge(now())}function debounced(){var time=now(),isInvoking=shouldInvoke(time);if(lastArgs=arguments,lastThis=this,lastCallTime=time,isInvoking){if(void 0===timerId)return leadingEdge(lastCallTime);if(maxing)return timerId=setTimeout(timerExpired,wait),invokeFunc(lastCallTime)}return void 0===timerId&&(timerId=setTimeout(timerExpired,wait)),result}var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=!1,maxing=!1,trailing=!0;if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return wait=toNumber(wait)||0,isObject(options)&&(leading=!!options.leading,maxing="maxWait"in options,maxWait=maxing?nativeMax(toNumber(options.maxWait)||0,wait):maxWait,trailing="trailing"in options?!!options.trailing:trailing),debounced.cancel=cancel,debounced.flush=flush,debounced}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other="function"==typeof value.valueOf?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};module.exports=debounce}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(require,module,exports){!function(define,undefined){define(function(){"use strict";function equalIC(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function containsIC(array,value){var valueLC,i,len=array.length;if(!len||!value)return!1;for(valueLC=value.toLowerCase(),i=0;i<len;++i)if(valueLC===array[i].toLowerCase())return!0;return!1}function convertPropsToRegExp(object){for(var key in object)hasOwnProp.call(object,key)&&(object[key]=new RegExp(object[key],"i"))}function MobileDetect(userAgent,maxPhoneWidth){this.ua=userAgent||"",this._cache={},this.maxPhoneWidth=maxPhoneWidth||600}var impl={};impl.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"\\bSamsung\\b|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y|SM-T280",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris [E|M]10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],
BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},impl.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var isArray,hasOwnProp=Object.prototype.hasOwnProperty;return impl.FALLBACK_PHONE="UnknownPhone",impl.FALLBACK_TABLET="UnknownTablet",impl.FALLBACK_MOBILE="UnknownMobile",isArray="isArray"in Array?Array.isArray:function(value){return"[object Array]"===Object.prototype.toString.call(value)},function(){var key,values,value,i,len,verPos,mobileDetectRules=impl.mobileDetectRules;for(key in mobileDetectRules.props)if(hasOwnProp.call(mobileDetectRules.props,key)){for(values=mobileDetectRules.props[key],isArray(values)||(values=[values]),len=values.length,i=0;i<len;++i)value=values[i],verPos=value.indexOf("[VER]"),verPos>=0&&(value=value.substring(0,verPos)+"([\\w._\\+]+)"+value.substring(verPos+5)),values[i]=new RegExp(value,"i");mobileDetectRules.props[key]=values}convertPropsToRegExp(mobileDetectRules.oss),convertPropsToRegExp(mobileDetectRules.phones),convertPropsToRegExp(mobileDetectRules.tablets),convertPropsToRegExp(mobileDetectRules.uas),convertPropsToRegExp(mobileDetectRules.utils),mobileDetectRules.oss0={WindowsPhoneOS:mobileDetectRules.oss.WindowsPhoneOS,WindowsMobileOS:mobileDetectRules.oss.WindowsMobileOS}}(),impl.findMatch=function(rules,userAgent){for(var key in rules)if(hasOwnProp.call(rules,key)&&rules[key].test(userAgent))return key;return null},impl.findMatches=function(rules,userAgent){var result=[];for(var key in rules)hasOwnProp.call(rules,key)&&rules[key].test(userAgent)&&result.push(key);return result},impl.getVersionStr=function(propertyName,userAgent){var patterns,i,len,match,props=impl.mobileDetectRules.props;if(hasOwnProp.call(props,propertyName))for(patterns=props[propertyName],len=patterns.length,i=0;i<len;++i)if(match=patterns[i].exec(userAgent),null!==match)return match[1];return null},impl.getVersion=function(propertyName,userAgent){var version=impl.getVersionStr(propertyName,userAgent);return version?impl.prepareVersionNo(version):NaN},impl.prepareVersionNo=function(version){var numbers;return numbers=version.split(/[a-z._ \/\-]/i),1===numbers.length&&(version=numbers[0]),numbers.length>1&&(version=numbers[0]+".",numbers.shift(),version+=numbers.join("")),Number(version)},impl.isMobileFallback=function(userAgent){return impl.detectMobileBrowsers.fullPattern.test(userAgent)||impl.detectMobileBrowsers.shortPattern.test(userAgent.substr(0,4))},impl.isTabletFallback=function(userAgent){return impl.detectMobileBrowsers.tabletPattern.test(userAgent)},impl.prepareDetectionCache=function(cache,userAgent,maxPhoneWidth){if(cache.mobile===undefined){var phone,tablet,phoneSized;return(tablet=impl.findMatch(impl.mobileDetectRules.tablets,userAgent))?(cache.mobile=cache.tablet=tablet,void(cache.phone=null)):(phone=impl.findMatch(impl.mobileDetectRules.phones,userAgent))?(cache.mobile=cache.phone=phone,void(cache.tablet=null)):void(impl.isMobileFallback(userAgent)?(phoneSized=MobileDetect.isPhoneSized(maxPhoneWidth),phoneSized===undefined?(cache.mobile=impl.FALLBACK_MOBILE,cache.tablet=cache.phone=null):phoneSized?(cache.mobile=cache.phone=impl.FALLBACK_PHONE,cache.tablet=null):(cache.mobile=cache.tablet=impl.FALLBACK_TABLET,cache.phone=null)):impl.isTabletFallback(userAgent)?(cache.mobile=cache.tablet=impl.FALLBACK_TABLET,cache.phone=null):cache.mobile=cache.tablet=cache.phone=null)}},impl.mobileGrade=function(t){var $isMobile=null!==t.mobile();return t.os("iOS")&&t.version("iPad")>=4.3||t.os("iOS")&&t.version("iPhone")>=3.1||t.os("iOS")&&t.version("iPod")>=3.1||t.version("Android")>2.1&&t.is("Webkit")||t.version("Windows Phone OS")>=7||t.is("BlackBerry")&&t.version("BlackBerry")>=6||t.match("Playbook.*Tablet")||t.version("webOS")>=1.4&&t.match("Palm|Pre|Pixi")||t.match("hp.*TouchPad")||t.is("Firefox")&&t.version("Firefox")>=12||t.is("Chrome")&&t.is("AndroidOS")&&t.version("Android")>=4||t.is("Skyfire")&&t.version("Skyfire")>=4.1&&t.is("AndroidOS")&&t.version("Android")>=2.3||t.is("Opera")&&t.version("Opera Mobi")>11&&t.is("AndroidOS")||t.is("MeeGoOS")||t.is("Tizen")||t.is("Dolfin")&&t.version("Bada")>=2||(t.is("UC Browser")||t.is("Dolfin"))&&t.version("Android")>=2.3||t.match("Kindle Fire")||t.is("Kindle")&&t.version("Kindle")>=3||t.is("AndroidOS")&&t.is("NookTablet")||t.version("Chrome")>=11&&!$isMobile||t.version("Safari")>=5&&!$isMobile||t.version("Firefox")>=4&&!$isMobile||t.version("MSIE")>=7&&!$isMobile||t.version("Opera")>=10&&!$isMobile?"A":t.os("iOS")&&t.version("iPad")<4.3||t.os("iOS")&&t.version("iPhone")<3.1||t.os("iOS")&&t.version("iPod")<3.1||t.is("Blackberry")&&t.version("BlackBerry")>=5&&t.version("BlackBerry")<6||t.version("Opera Mini")>=5&&t.version("Opera Mini")<=6.5&&(t.version("Android")>=2.3||t.is("iOS"))||t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||t.version("Opera Mobi")>=11&&t.is("SymbianOS")?"B":(t.version("BlackBerry")<5||t.match("MSIEMobile|Windows CE.*Mobile")||t.version("Windows Mobile")<=5.2,"C")},impl.detectOS=function(ua){return impl.findMatch(impl.mobileDetectRules.oss0,ua)||impl.findMatch(impl.mobileDetectRules.oss,ua)},impl.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},MobileDetect.prototype={constructor:MobileDetect,mobile:function(){return impl.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return impl.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return impl.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===undefined&&(this._cache.userAgent=impl.findMatch(impl.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===undefined&&(this._cache.userAgents=impl.findMatches(impl.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===undefined&&(this._cache.os=impl.detectOS(this.ua)),this._cache.os},version:function(key){return impl.getVersion(key,this.ua)},versionStr:function(key){return impl.getVersionStr(key,this.ua)},is:function(key){return containsIC(this.userAgents(),key)||equalIC(key,this.os())||equalIC(key,this.phone())||equalIC(key,this.tablet())||containsIC(impl.findMatches(impl.mobileDetectRules.utils,this.ua),key)},match:function(pattern){return pattern instanceof RegExp||(pattern=new RegExp(pattern,"i")),pattern.test(this.ua)},isPhoneSized:function(maxPhoneWidth){return MobileDetect.isPhoneSized(maxPhoneWidth||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===undefined&&(this._cache.grade=impl.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?MobileDetect.isPhoneSized=function(maxPhoneWidth){return maxPhoneWidth<0?undefined:impl.getDeviceSmallerSide()<=maxPhoneWidth}:MobileDetect.isPhoneSized=function(){},MobileDetect._impl=impl,MobileDetect.version="1.3.5 2016-11-14",MobileDetect})}(function(undefined){if("undefined"!=typeof module&&module.exports)return function(factory){module.exports=factory()};if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof window)return function(factory){window.MobileDetect=factory()};throw new Error("unknown environment")}())},{}],29:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],30:[function(require,module,exports){module.exports=function(arr,fn,initial){for(var idx=0,len=arr.length,curr=3==arguments.length?initial:arr[idx++];idx<len;)curr=fn.call(null,curr,arr[idx],++idx,arr);return curr}},{}],31:[function(require,module,exports){var Promise=require("bluebird"),superagent=module.exports=require("superagent"),Request=superagent.Request;Promise.config({cancellation:!0});var SuperagentPromiseError=function(message,originalError){var stack;this.message=message,this.name="SuperagentPromiseError",this.originalError=originalError,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),stack=this.stack):stack=new Error(message).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?stack+"\nCaused by:  "+this.originalError.stack:stack}})};SuperagentPromiseError.prototype=new Error,SuperagentPromiseError.prototype.constructor=SuperagentPromiseError,superagent.SuperagentPromiseError=SuperagentPromiseError,Request.prototype.promise=function(){var error,req=this;return new Promise(function(resolve,reject,onCancel){req.end(function(err,res){if("undefined"!=typeof res&&res.status>=400){var msg="cannot "+req.method+" "+req.url+" ("+res.status+")";error=new SuperagentPromiseError(msg),error.status=res.status,error.body=res.body,error.res=res,reject(error)}else err?reject(new SuperagentPromiseError("Bad request",err)):resolve(res)}),onCancel(function(){req.abort()})})},Request.prototype.then=function(){var promise=this.promise();return promise.then.apply(promise,arguments)}},{bluebird:21,superagent:32}],32:[function(require,module,exports){function noop(){}function isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)null!=obj[key]&&pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){return Array.isArray(val)?val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)}):void pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}function parseString(str){for(var parts,pair,obj={},pairs=str.split("&"),i=0,len=pairs.length;i<len;++i)pair=pairs[i],parts=pair.split("="),obj[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1]);return obj}function parseHeader(str){var index,line,field,val,lines=str.split(/\r?\n/),fields={};lines.pop();for(var i=0,len=lines.length;i<len;++i)line=lines[i],index=line.indexOf(":"),field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val;return fields}function isJSON(mime){return/[\/+]json\b/.test(mime)}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})}function Response(req,options){options=options||{},this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){return err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e,err.rawResponse=self.xhr&&self.xhr.responseText?self.xhr.responseText:null,err.statusCode=self.xhr&&self.xhr.status?self.xhr.status:null,self.callback(err)}if(self.emit("response",res),err)return self.callback(err,res);if(res.status>=200&&res.status<300)return self.callback(err,res);var new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err,new_err.response=res,new_err.status=res.status,self.callback(new_err,res)})}function del(url,fn){var req=request("DELETE",url);return fn&&req.end(fn),req}var root,Emitter=require("emitter"),reduce=require("reduce"),requestBase=require("./request-base"),isObject=require("./is-object");root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var request=module.exports=require("./request").bind(null,Request);request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(field){return this.header[field.toLowerCase()]},Response.prototype.setHeaderProperties=function(header){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj)this[key]=obj[key]},Response.prototype.parseBody=function(str){var parse=request.parse[this.type];return!parse&&isJSON(this.type)&&(parse=request.parse["application/json"]),parse&&str&&(str.length||str instanceof Object)?parse(str):null},Response.prototype.setStatusProperties=function(status){1223===status&&(status=204);var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.clientError=4==type,this.serverError=5==type,this.error=(4==type||5==type)&&this.toError(),this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.notFound=404==status,this.forbidden=403==status},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype);for(var key in requestBase)Request.prototype[key]=requestBase[key];Request.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.responseType=function(val){return this._responseType=val,this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){switch(options||(options={type:"basic"}),options.type){case"basic":var str=btoa(user+":"+pass);this.set("Authorization","Basic "+str);break;case"auto":this.username=user,this.password=pass}return this},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,filename){return this._getFormData().append(field,file,filename||file.name),this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.send=function(data){var obj=isObject(data),type=this._header["content-type"];if(obj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this._header["content-type"],"application/x-www-form-urlencoded"==type?this._data=this._data?this._data+"&"+data:data:this._data=(this._data||"")+data):this._data=data;return!obj||isHost(data)?this:(type||this.type("json"),this)},Response.prototype.parse=function(fn){return root.console,this.serialize(fn),this},Response.prototype.serialize=function(fn){return this._parser=fn,this},Request.prototype.callback=function(err,res){var fn=this._callback;this.clearTimeout(),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.timeoutError=function(){var timeout=this._timeout,err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout,this.callback(err)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(fn){var self=this,xhr=this.xhr=request.getXHR(),query=this._query.join("&"),timeout=this._timeout,data=this._formData||this._data;this._callback=fn||noop,xhr.onreadystatechange=function(){if(4==xhr.readyState){var status;try{status=xhr.status}catch(e){status=0}if(0==status){if(self.timedout)return self.timeoutError();if(self.aborted)return;return self.crossDomainError()}self.emit("end")}};var handleProgress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",self.emit("progress",e)};this.hasListeners("progress")&&(xhr.onprogress=handleProgress);try{xhr.upload&&this.hasListeners("progress")&&(xhr.upload.onprogress=handleProgress)}catch(e){}if(timeout&&!this._timer&&(this._timer=setTimeout(function(){self.timedout=!0,self.abort()},timeout)),query&&(query=request.serializeObject(query),this.url+=~this.url.indexOf("?")?"&"+query:"?"+query),this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0),this._withCredentials&&(xhr.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!isHost(data)){var contentType=this._header["content-type"],serialize=this._parser||request.serialize[contentType?contentType.split(";")[0]:""];!serialize&&isJSON(contentType)&&(serialize=request.serialize["application/json"]),serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&xhr.setRequestHeader(field,this.header[field]);return this._responseType&&(xhr.responseType=this._responseType),this.emit("request",this),xhr.send("undefined"!=typeof data?data:null),this},request.Request=Request,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=del,request["delete"]=del,request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},{"./is-object":33,"./request":35,"./request-base":34,emitter:22,reduce:30}],33:[function(require,module,exports){function isObject(obj){return null!=obj&&"object"==typeof obj}module.exports=isObject},{}],34:[function(require,module,exports){var isObject=require("./is-object");exports.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},exports.parse=function(fn){return this._parser=fn,this},exports.timeout=function(ms){return this._timeout=ms,this},exports.then=function(fulfill,reject){return this.end(function(err,res){err?reject(err):fulfill(res)})},exports.use=function(fn){return fn(this),this},exports.get=function(field){return this._header[field.toLowerCase()]},exports.getHeader=exports.get,exports.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},exports.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},exports.field=function(name,val){return this._getFormData().append(name,val),this}},{"./is-object":33}],35:[function(require,module,exports){function request(RequestConstructor,method,url){return"function"==typeof url?new RequestConstructor("GET",method).end(url):2==arguments.length?new RequestConstructor("GET",method):new RequestConstructor(method,url)}module.exports=request},{}],36:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getFan(id,resolve,reject){var url=FAN_PRODUCT_PROD_HOST+"/apis/v2/fans/"+id;_superagentBluebirdPromise2["default"].get(url).withCredentials().set("X-Personalization-Source",_sourceHeader).end(function(err,res){if(err||!res.ok)reject(err);else{var fan=res&&res.body;_localforage2["default"].setItem("fanapicache",{fan:fan,id:fan.id,timestamp:Date.now()}),resolve(fan)}})}function getFanForId(id){return SWID_RE.test(id)?new _bluebird2["default"](function(resolve,reject){_localforage2["default"].getItem("fanapicache").then(function(cache){var fan=cache&&cache.fan,cacheExpired=Date.now()-cache.timestamp>60*_cacheDuration*1e3;null===fan||cache.id!==id||cacheExpired?getFan(id,resolve,reject):resolve(fan)})["catch"](function(){getFan(id,resolve,reject)})}):_bluebird2["default"].reject(new Error("Invalid SWID"))}function updateSettingsForFanId(id,settings){if(!SWID_RE.test(id))return _bluebird2["default"].reject(new Error("Invalid SWID"));var url=FAN_CORE_PROD_HOST+"/apis/v2/fans/"+id+"/profile/settings/";return _superagentBluebirdPromise2["default"].post(url).withCredentials().send(settings).promise()}function FanAPI(){var _ref=arguments.length<=0||void 0===arguments[0]?DEFAULT_CONFIGURATION:arguments[0],_ref$sourceHeader=_ref.sourceHeader,sourceHeader=void 0===_ref$sourceHeader?DEFAULT_CONFIGURATION.sourceHeader:_ref$sourceHeader,_ref$cacheDuration=_ref.cacheDuration,cacheDuration=void 0===_ref$cacheDuration?DEFAULT_CONFIGURATION.cacheDuration:_ref$cacheDuration;return this instanceof FanAPI?(_sourceHeader=sourceHeader,_cacheDuration=cacheDuration,this):new FanAPI({sourceHeader:sourceHeader,cacheDuration:cacheDuration})}var _superagentBluebirdPromise=require("superagent-bluebird-promise"),_superagentBluebirdPromise2=_interopRequireDefault(_superagentBluebirdPromise),_localforage=require("localforage"),_localforage2=_interopRequireDefault(_localforage),_bluebird=require("bluebird"),_bluebird2=_interopRequireDefault(_bluebird),FAN_PRODUCT_PROD_HOST="//fan.api.espn.go.com",FAN_CORE_PROD_HOST="//fan.core.api.espn.go.com",DEFAULT_SOURCE_HEADER="espn-video-player",FAN_API_CACHE_MINUTES=10,SWID_RE=/^\{[\w\-]+\}/,DEFAULT_CONFIGURATION={sourceHeader:DEFAULT_SOURCE_HEADER,cacheDuration:FAN_API_CACHE_MINUTES},_sourceHeader=void 0,_cacheDuration=void 0;FanAPI.prototype.getFanForId=function(id,callback){return getFanForId(id).tap(function(fan){"function"==typeof callback&&callback(fan)})},FanAPI.prototype.getAutoStartForFanId=function(id,callback){return getFanForId(id).then(function(fan){var profile=fan&&fan.profile,settings=profile&&profile.settings,videoAutoStartValue=settings&&settings.videoAutoStart&&settings.videoAutoStart.value;return"2"!==videoAutoStartValue})["catch"](function(){return!0}).tap(function(videoAutoStart){"function"==typeof callback&&callback(videoAutoStart)})},FanAPI.prototype.updateAutoStartForFanId=function(id,autoStart,callback){var videoAutoStartValue=(autoStart?"1":"2").toString(),settings={videoAutoStart:{value:videoAutoStartValue,lastUpdateDate:Date.now()}};return updateSettingsForFanId(id,settings).tap(function(err,res){"function"==typeof callback&&callback(err,res)}).then(function(res){var fan=res&&res.body;_localforage2["default"].setItem("fanapicache",{fan:fan,id:fan.id,timestamp:Date.now()})})["catch"](function(){FanAPI.prototype.updateAutoStartCache(settings)})},FanAPI.prototype.updateAutoStartCache=function(settings){var videoAutoStart=settings.videoAutoStart;_localforage2["default"].getItem("fanapicache").then(function(cache){var fan=cache&&cache.fan,key=void 0;for(key in videoAutoStart)videoAutoStart.hasOwnProperty(key)&&(fan.profile.settings.videoAutoStart[key]=videoAutoStart[key]);_localforage2["default"].setItem("fanapicache",{fan:fan,id:fan.id,timestamp:Date.now()})})["catch"](function(){})},FanAPI.prototype.getUidsForFanId=function(id,callback){function hasUid(preference){return preference.metaData.team||preference.metaData.sport}function collectUids(preference){return preference.metaData.team?preference.metaData.team.uid:preference.metaData.sport?preference.metaData.sport.uid:null}return getFanForId(id).then(function(fan){var preferences=fan&&fan.preferences;return preferences.filter(hasUid).map(collectUids)})["catch"](function(){return[]}).tap(function(uids){"function"==typeof callback&&callback(uids)})},module.exports=FanAPI},{bluebird:21,localforage:26,"superagent-bluebird-promise":31}],37:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _FanAPI=require("./FanAPI"),_FanAPI2=_interopRequireDefault(_FanAPI);module.exports=_FanAPI2["default"]},{"./FanAPI":36}],38:[function(require,module,exports){"use strict";(function(){function fireTrackingBeacon(beaconURL,airingID,adID){var img,imgID;imgID="passThroughTracking",img=document.getElementById(imgID),img||(img=new Image,img.id=imgID,document.body.appendChild(img)),img.src=beaconURL+"&caid="+airingID+"&pvrn="+Date.now()+"&resp=ad;adid="+encodeURIComponent(adID)+"&airing="+airingID+";ptgt=a&slau=midroll"}function init(){var plugin;plugin=function(){var player,lastID;player=this,"function"==typeof player.id3&&player.id3(),player.on("espn.id3cuechange",function(event,cue){var adID,payload;"com.espn.authnet.transition"===cue.value.owner&&(payload=JSON.parse(cue.text),"COMMERCIAL"===payload.to.type?(adID=payload.to.id,adID&&adID!==lastID&&(lastID=adID,fireTrackingBeacon(player.mediainfo.passThroughBeaconURL,player.mediainfo.simulcastAiringId,adID))):lastID=null)})},videojs.plugin("adPassThrough",plugin)}module.exports={init:init}}).call(void 0)},{}],39:[function(require,module,exports){"use strict";(function(){var formatTime,init;formatTime=function(seconds,guide){var gh,gm,h,m,s;return null==guide&&(guide=seconds),seconds=seconds<0?0:seconds,s=Math.floor(seconds%60),m=Math.floor(seconds/60%60),h=Math.floor(seconds/3600),gm=Math.floor(guide/60%60),gh=Math.floor(guide/3600),(isNaN(seconds)||seconds===1/0)&&(h=m=s="-"),h=h>0||gh>0?h+":":"",m=((h||gm>=10)&&m<10?"0"+m:m)+":",
s=s<10?"0"+s:s,h+m+s},init=function(){var Component,ControlBar,ESPNAdRemainingTimeDisplay,RemainingTimeDisplay,currentTimeDisplayIndex;Component=videojs.getComponent("Component"),ControlBar=videojs.getComponent("ControlBar"),RemainingTimeDisplay=videojs.getComponent("RemainingTimeDisplay"),ESPNAdRemainingTimeDisplay=videojs.extend(RemainingTimeDisplay,{constructor:function(player,options){return RemainingTimeDisplay.call(this,player,options)},createEl:function(){var el;return el=Component.prototype.createEl.call(this,"div",{className:"vjs-ad-remaining-time vjs-time-control vjs-control"}),this.contentEl_=document.createElement("div"),this.contentEl_.classList.add("vjs-ad-remaining-time-display"),this.contentEl_.innerHTML='<span class="vjs-control">'+this.localize("Ad")+"</span> (0:00)",this.contentEl_.setAttribute("aria-live","off"),el.appendChild(this.contentEl_),el},updateContent:function(){var formattedTime,localizedText;this.player_.duration()&&(localizedText=this.localize("Ad"),formattedTime=formatTime(this.player_.remainingTime()),formattedTime!==this.formattedTime_&&(this.formattedTime_=formattedTime,this.contentEl_.innerHTML='<span class="vjs-control">'+localizedText+"</span> ("+formattedTime+")"))}}),Component.registerComponent("AdRemainingTimeDisplay",ESPNAdRemainingTimeDisplay),ControlBar.prototype.options_.children.indexOf("adRemainingTimeDisplay")===-1&&(currentTimeDisplayIndex=ControlBar.prototype.options_.children.indexOf("currentTimeDisplay"),ControlBar.prototype.options_.children.splice(currentTimeDisplayIndex,0,"adRemainingTimeDisplay"))},module.exports={init:init}}).call(void 0)},{}],40:[function(require,module,exports){"use strict";(function(){var init;init=function(){var CaptionsToggleButton,Component,ESPNCaptionSettingsMenuItem,TextTrackMenuItem;return Component=videojs.getComponent("Component"),TextTrackMenuItem=videojs.getComponent("TextTrackMenuItem"),CaptionsToggleButton=videojs.getComponent("CaptionsToggleButton"),ESPNCaptionSettingsMenuItem=videojs.extend(TextTrackMenuItem,{constructor:function(player,options){var changeHandler;options.track={kind:options.kind,player:player,label:"<span>"+player.localize(options.label||"Caption Settings")+"</span>",selectable:!1,"default":!1,mode:"disabled"},options.selectable=!1,TextTrackMenuItem.call(this,player,options),this.addClass("vjs-texttrack-settings"),this.hide(),changeHandler=this.handleTracksChange.bind(this),player.on("texttrackchange",changeHandler),player.on("espn.captionchange",changeHandler),this.on("dispose",function(){player.off("texttrackchange",changeHandler),player.off("espn.captionchange",changeHandler)})},handleClick:function(){var textTrackSettings,videoWasPlaying;return textTrackSettings=this.player_.$(".bcc-caption-settings"),textTrackSettings.classList.remove("vjs-hidden"),videoWasPlaying=!this.player_.paused(),this.player_.addClass("vjs-caption-settings-active"),this.player_.pause(),this.player_.$(".vjs-done-button",textTrackSettings).addEventListener("click",function(){this.player_.removeClass("vjs-caption-settings-active"),videoWasPlaying&&this.player_.play()}.bind(this)),textTrackSettings.focus()},handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide()},hasValidTracks:CaptionsToggleButton.prototype.hasValidTracks}),Component.registerComponent("CaptionSettingsMenuItem",ESPNCaptionSettingsMenuItem)},module.exports={init:init}}).call(void 0)},{}],41:[function(require,module,exports){"use strict";(function(){var init,initialized,plugin,videoJsPlugin,LS_SAVED_LANGUAGE;initialized=!1,LS_SAVED_LANGUAGE="bgs-saved-language",init=function(){var Button,Component,ESPNCaptionsToggleButton;Component=videojs.getComponent("Component"),Button=videojs.getComponent("Button"),ESPNCaptionsToggleButton=videojs.extend(Button,{constructor:function(player,options){var changeHandler;Button.call(this,player,options),this.controlText(options&&options.controlText||this.localize("Closed Captions")),this.hide(),changeHandler=this.handleTracksChange.bind(this),player.on("texttrackchange",changeHandler),player.on("espn.captionchange",changeHandler),this.on("dispose",function(){player.off("texttrackchange",changeHandler),player.off("espn.captionchange",changeHandler)})},buildCSSClass:function(){return"evp-toggle-cc-button vjs-captions-button cc-disabled "+Button.prototype.buildCSSClass.call(this)},handleClick:function(event){return this.toggleTracks(),Button.prototype.handleClick.call(this,event)},createEl:function(tag,props,attributes){return Button.prototype.createEl.call(this,tag,props,attributes)},handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide(),this.tracksEnabled()?this.el_.classList.remove("cc-disabled"):this.el_.classList.add("cc-disabled")},toggleTracks:function(){var i,len,tracks;for(tracks=this.player_.textTracks(),i=0,len=tracks.length;i<len;i++)"captions"===tracks[i].kind&&("disabled"!==tracks[i].mode?"showing"===tracks[i].mode?(tracks[i].mode="hidden",window.localStorage.setItem(LS_SAVED_LANGUAGE,"off")):(tracks[i].mode="showing",window.localStorage.setItem(LS_SAVED_LANGUAGE,tracks[i].language+"-"+tracks[i].label)):tracks[i].mode="showing");this.player_.trigger("espn.captionchange")},tracksEnabled:function(){var i,isEnabled,len,storedLanguage,tracks;for(tracks=this.player().textTracks(),isEnabled=!1,storedLanguage=window.localStorage.getItem(LS_SAVED_LANGUAGE),i=0,len=tracks.length;i<len;i++)"captions"===tracks[i].kind&&(storedLanguage!==tracks[i].language+"-"+tracks[i].label?"disabled"!==tracks[i].mode?"showing"!==tracks[i].mode||(isEnabled=!0):(tracks[i].mode="showing",tracks[i].mode="hidden"):isEnabled=!0);return isEnabled},kind_:"captions",hasValidTracks:function(){var _changeHandler,handleTracksChange,hasCues,i,len,tracks;for(tracks=this.player().textTracks()||[],handleTracksChange=this.handleTracksChange.bind(this),_changeHandler=function(){this.removeEventListener("cuechange",_changeHandler),handleTracksChange()},i=0,len=tracks.length;i<len;i++)if("captions"===tracks[i].kind){if(hasCues=tracks[i].cues&&tracks[i].cues.length>0,!hasCues)return tracks[i].addEventListener("cuechange",_changeHandler),!1;if(hasCues||tracks[i].label||tracks[i].language)return!0}return!1}}),Component.registerComponent("CaptionsToggleButton",ESPNCaptionsToggleButton),videojs.plugin("captionsToggleButton",videoJsPlugin),initialized=!0},videoJsPlugin=function(){var player;return player=this,player.ready(function(){var settingsMenuButtonIndex;settingsMenuButtonIndex=player.controlBar.children().map(function(c){return c.name()}).indexOf("settingsMenuButton"),player.controlBar.captionsToggleButton&&(player.controlBar.removeChild(player.controlBar.captionsToggleButton),delete player.controlBar.captionsToggleButton),player.controlBar.captionsButton&&player.controlBar.removeChild(player.controlBar.captionsButton),player.controlBar.captionsToggleButton=player.controlBar.addChild("captionsToggleButton",{},settingsMenuButtonIndex-1)})},plugin=function(player){initialized||init(),player.captionsToggleButton()},module.exports={init:init,plugin:plugin}}).call(void 0)},{}],42:[function(require,module,exports){"use strict";(function(){function textFromFrame(frame){if("string"==typeof frame.data)return frame.data;try{return String.fromCharCode.apply(null,frame.data)}catch(error){return frame.data}}function init(){var plugin;plugin=function(){var _findMetadata,player;player=this,_findMetadata=function(){var allTextTracks,track,trackIndex;return player.off("texttrackchange",_findMetadata),allTextTracks=player.textTracks(),trackIndex=allTextTracks.length-1,trackIndex<0?void player.on("texttrackchange",_findMetadata):(track=allTextTracks[trackIndex],"metadata"!==track.kind?void player.on("texttrackchange",_findMetadata):void track.addEventListener("cuechange",function(){if(track.activeCues.length>0)for(var i=0;i<track.activeCues.length;i++)track.activeCues[i].text=textFromFrame(track.activeCues[i].value),player.trigger("espn.id3cuechange",track.activeCues[i])}))},this.on("texttrackchange",_findMetadata)},videojs.plugin("id3",plugin)}module.exports={init:init}}).call(void 0)},{}],43:[function(require,module,exports){"use strict";function init(){var Component=videojs.getComponent("Component"),LoadingSpinner=videojs.getComponent("LoadingSpinner"),ESPNLoadingSpinner=videojs.extend(LoadingSpinner,{constructor:function(player,options){LoadingSpinner.call(this,player,options)},createEl:function(){return Component.prototype.createEl.call(this,"div",{className:"vjs-loader active",dir:"ltr",innerHTML:'<div class="spinner-layer"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>'})}});Component.registerComponent("LoadingSpinner",ESPNLoadingSpinner)}module.exports={init:init}},{}],44:[function(require,module,exports){"use strict";(function(){var init;init=function(){var Component,ESPNPlayToggle,PlayToggle;return Component=videojs.getComponent("Component"),PlayToggle=videojs.getComponent("PlayToggle"),ESPNPlayToggle=videojs.extend(PlayToggle,{constructor:function(player,options){PlayToggle.call(this,player,options),this.on(player,"durationchange",this.handleDurationChange),this.on(player,"ended",this.handleEnded)},pauseText:"Pause",playText:"Play",handleDurationChange:function(){this.player_.duration()===1/0&&(this.pauseText="Stop",this.player_.paused()||this.controlText(this.pauseText))},handleEnded:function(){this.controlText("Replay")},handlePlay:function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText(this.pauseText)},handlePause:function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText(this.playText)}}),Component.registerComponent("PlayToggle",ESPNPlayToggle)},module.exports={init:init}}).call(void 0)},{}],45:[function(require,module,exports){"use strict";function init(){var Component=videojs.getComponent("Component"),SeekBar=videojs.getComponent("SeekBar"),ESPNSeekBar=videojs.extend(SeekBar,{constructor:function(player,options){SeekBar.call(this,player,options)},createEl:function(){var el=SeekBar.prototype.createEl.call(this);if(!el.querySelector(".evp-progress-holder-wrapper")){var wrapper=document.createElement("div");wrapper.className="evp-progress-holder-wrapper",el.appendChild(wrapper)}return el},handleMouseDown:function(event){SeekBar.prototype.handleMouseDown.call(this,event),this.scrubbingTime=this.calculateDistance(event),this.update()},handleMouseMove:function(event){this.scrubbingTime=this.calculateDistance(event),this.update()},handleMouseUp:function(event){var newTime=this.calculateDistance(event)*this.player_.duration();return newTime===this.player_.duration()&&(newTime-=.1),this.player_.currentTime(newTime),SeekBar.prototype.handleMouseUp.call(this,event)},getPercent:function(){var percent=SeekBar.prototype.getPercent.call(this);return this.player_.scrubbing()&&(percent=this.scrubbingTime||percent),percent>=1?1:percent}});Component.registerComponent("SeekBar",ESPNSeekBar)}module.exports={init:init}},{}],46:[function(require,module,exports){"use strict";function videoJsPlugin(opts){var mouseOver,mouseOut,player;player=this,mouseOver=function(){player.removeClass("evp-volume-menu-inactive"),player.addClass("evp-volume-menu-active")},mouseOut=function(){player.removeClass("evp-volume-menu-active"),player.addClass("evp-volume-menu-inactive")};var options=opts||{},storageNamespace=options.namespace||"espn",volumeStorageKey=storageNamespace+"-volume",muteStorageKey=storageNamespace+"-mute";if(null!==options.value&&void 0!==options.value)volume=options.value,localStorage.setItem(volumeStorageKey,volume);else{var persistedVolume=localStorage.getItem(volumeStorageKey);null!==persistedVolume&&(volume=persistedVolume)}if(null!==options.muted&&void 0!==options.muted)muted=options.muted===!0||"true"===options.muted,localStorage.setItem(muteStorageKey,muted);else{var persistedMute=localStorage.getItem(muteStorageKey);null!==persistedMute&&(muted="true"===persistedMute)}player.on("ads-request",function(){var adControlBar,fwPlugin;adControlBar=player.childNameIndex_.adControlBar,fwPlugin=player.FreeWheelPlugin,player.on("ads-ad-started",function(){player.volume(volume),player.muted(muted),"Flash"===fwPlugin.tech&&fwPlugin.adPlayer.volume(muted?0:volume)}),"Flash"===fwPlugin.tech?fwPlugin.adPlayer.on("volumechange",function(){"ad-playback"===player.ads.state&&(muted&&!fwPlugin.adPlayer.muted()||fwPlugin.adPlayer.muted()||(volume=fwPlugin.adPlayer.volume(),localStorage.setItem(volumeStorageKey,volume)),muted=fwPlugin.adPlayer.muted(),localStorage.setItem(muteStorageKey,muted))}):"Html5"===fwPlugin.tech&&player.on("adstart",function(){fwPlugin.Html5._video.addEventListener("volumechange",function(){volume=player.volume(),muted=player.muted(),localStorage.setItem(volumeStorageKey,volume),localStorage.setItem(muteStorageKey,muted)})}),player.on("contentplayback",function(){player.volume(volume),player.muted(muted)}),adControlBar&&adControlBar.volumeMenuButton&&(adControlBar.volumeMenuButton.on("mouseover",mouseOver),adControlBar.volumeMenuButton.on("mouseout",mouseOut))}),player.on("volumechange",function(){volume=player.volume(),muted=player.muted(),localStorage.setItem(volumeStorageKey,volume),localStorage.setItem(muteStorageKey,muted)}),player.ready(function(){var volumeMenuButton=player.controlBar.volumeMenuButton;volumeMenuButton.on("mouseover",mouseOver),volumeMenuButton.on("mouseout",mouseOut),player.volume(volume),player.muted(muted)})}function init(){videojs.plugin("espnVolumeMenuButton",videoJsPlugin),_initialized=!0}function plugin(player,opts){_initialized||init(),player.espnVolumeMenuButton(opts)}var _initialized,volume,muted;_initialized=!1,volume=1,muted=!1,module.exports={init:init,plugin:plugin}},{}],47:[function(require,module,exports){"use strict";function isHtmlElement(val){return"[object HTMLDivElement]"===Object.prototype.toString.call(val)}function createDefaultEndCardElement(player,relatedContent,stopTimeoutHandler,timeoutHandler){var content=relatedContent,element=document.createElement("div");if(element.className="evp-endcard",content){element.innerHTML='<div class="evp-endcard-wrap"><h2>'+player.localize("Up Next")+'</h2><span class="evp-endcard-next-title">'+content.headline+"</span></div>";var thumbnailElement=document.createElement("div");thumbnailElement.className="evp-endcard-next-thumbnail";var circleElementId="evp-endcard-timer-circle_"+player.id(),timeoutButtonElement=document.createElement("span");timeoutButtonElement.className="evp-endcard-timeout-button",timeoutButtonElement.innerHTML='<svg width="54" height="54" class="evp-endcard-timer"><circle id="'+circleElementId+'" class="start-timer" r="23.57" cy="27" cx="27" stroke-width="4" stroke="#ffffff" fill="none"/></svg>',timeoutButtonElement.addEventListener("click",function(){_intervalId?stopTimeoutHandler():timeoutHandler(!0)});var i=1,intervalCount=_timeoutDelay;_intervalId=setInterval(function(){var el=document.getElementById(circleElementId);el&&(el.style.strokeDashoffset=INITIAL_OFFSET-i*(INITIAL_OFFSET/_timeoutDelay)),intervalCount-=1,intervalCount<=0&&(stopInterval(),timeoutHandler(!1)),i++},1e3);var imgElement=document.createElement("img");imgElement.src=content.poster,thumbnailElement.appendChild(timeoutButtonElement),thumbnailElement.appendChild(imgElement),element.appendChild(thumbnailElement)}return element}function stopInterval(){_intervalId&&(clearInterval(_intervalId),_intervalId=null)}function videoJsPlugin(options){function getRelatedContent(content,country,callback){var clipId=content.id,api=new API;api.getRelated(clipId,{country:country},function(err,clips){if(err||!clips||0===clips.length)return void callback(content);playlist=(clips||[]).filter(function(clip){return _playHistory.indexOf(clip.id)===-1&&_playHistory.indexOf(clip.mediaId)===-1}),playlist=playlist.length>0?playlist:clips&&clips.shift();var relatedContent=playlist.shift();callback(relatedContent||[])})}var endcardElement,player=this,playlist=options&&options.playlist||[],timeoutHandler=options&&options.timeoutHandler||function(){};_content=options&&options.content,_country=options&&options.country,_timeoutDelay=options&&options.timeout||TIMEOUT_DELAY_SECONDS_DEFAULT,isHtmlElement(_content)&&(endcardElement=_content);var play=function(){player.play()},stopTimeout=function(){stopInterval(),player.removeClass("evp-endcard-timeout-active"),player.addClass("evp-endcard-timeout-stopped")},hide=function(){stopInterval(),endcardElement&&player.el().removeChild(endcardElement),player.removeClass("evp-endcard-open"),player.removeClass("evp-endcard-timeout-active"),player.removeClass("evp-endcard-timeout-stopped"),endcardElement=null},onVideoPlay=function(){hide()},onContentReceived=function(content){player.paused()?(endcardElement=createDefaultEndCardElement(player,content,stopTimeout,function(wasManual){timeoutHandler(content,wasManual)}),player.el().appendChild(endcardElement),player.addClass("evp-endcard-open"),player.addClass("evp-endcard-timeout-active")):hide()},onVideoEnded=function(){if(!player.ads.state||"content-playback"===player.ads.state){if(endcardElement)player.el().appendChild(endcardElement),player.addClass("evp-endcard-open");else if(_content)if(_playHistory.push(_content.id),playlist&&playlist.length>0){var nextClip=playlist.shift();nextClip&&nextClip.id&&nextClip.headline&&nextClip.poster?onContentReceived(nextClip):getRelatedContent(_content,_country,onContentReceived)}else getRelatedContent(_content,_country,onContentReceived);player.one("contentupdate",play),player.one("play",onVideoPlay),player.one("socialopened",stopTimeout)}},dispose=function dispose(){stopInterval(),player.off("dispose",dispose),player.off("switch",dispose),player.off("ended",onVideoEnded),player.off("play",onVideoPlay),player.off("contentupdate",play),player.off("socialopened",stopTimeout),_playHistory=[],_content=null,_initialized=!1,_first=!0};player.one("dispose",dispose),player.one("switch",dispose),_first&&(_first=!1,player.on("ended",onVideoEnded))}function init(){videojs.plugin("endcard",videoJsPlugin),_initialized=!0}var _content,_country,_intervalId,API=require("../../api/index"),TIMEOUT_DELAY_SECONDS_DEFAULT=5,INITIAL_OFFSET="180",_initialized=!1,_first=!0,_playHistory=[],_timeoutDelay=TIMEOUT_DELAY_SECONDS_DEFAULT;module.exports={init:init}},{"../../api/index":9}],48:[function(require,module,exports){module.exports={errors:{1:{headline:"MEDIA_ERR_ABORTED_HEADLINE",message:"MEDIA_ERR_ABORTED_MESSAGE"},2:{headline:"MEDIA_ERR_NETWORK_HEADLINE",message:"MEDIA_ERR_NETWORK_MESSAGE"},3:{headline:"MEDIA_ERR_DECODE_DEADLINE",message:"MEDIA_ERR_DECODE_MESSAGE"},4:{headline:"MEDIA_ERR_SRC_NOT_SUPPORTED_HEADLINE",message:"MEDIA_ERR_SRC_NOT_SUPPORTED_MESSAGE"},5:{headline:"MEDIA_ERR_ENCRYPTED_HEADLINE",message:"MEDIA_ERR_ENCRYPTED_MESSAGE"}}}},{}],49:[function(require,module,exports){"use strict";function videoJsPlugin(){var player=this,stateFeedbackButton=player.addChild("stateFeedbackButton");player.stateFeedbackButton=stateFeedbackButton,player.on("pause",function(){}),player.on("play",function(){})}function init(){var Component=videojs.getComponent("Component"),Button=videojs.getComponent("Button"),StateFeedbackButton=videojs.extend(Button,{constructor:function(player,options){Button.call(this,player,options)},createEl:function(){return Component.prototype.createEl.call(this,"div",{className:"espn-player-state-feedback-button",innerHTML:""})}});Component.registerComponent("StateFeedbackButton",StateFeedbackButton),videojs.plugin("stateFeedbackButton",videoJsPlugin),_initialized=!0}function plugin(player){_initialized||init(),player.stateFeedbackButton()}var _initialized=!1;module.exports={init:init,plugin:plugin}},{}],50:[function(require,module,exports){"use strict";function videoJsPlugin(){for(var thumbnailHolderElement,player=this,progressControl=player.controlBar.progressControl,childNodes=progressControl.el().childNodes,i=0;i<childNodes.length;++i)if("vjs-thumbnail-holder"===childNodes[i].className){thumbnailHolderElement=childNodes[i];break}if(thumbnailHolderElement){var mouseTimeDisplay=player.controlBar.progressControl.seekBar.mouseTimeDisplay,timeElement=document.createElement("span");timeElement.className="vjs-thumbnail-time-tooltip",thumbnailHolderElement.appendChild(timeElement);var moveListener=function(){var currentTime=mouseTimeDisplay.el().getAttribute("data-current-time");timeElement.innerHTML=currentTime};progressControl.on("mousemove",moveListener),progressControl.on("touchmove",moveListener),mouseTimeDisplay.addClass("vjs-time-tooltip-hidden")}}function plugin(player){videojs&&videojs.plugin("thumbnailTime",videoJsPlugin),player.thumbnailTime()}module.exports={plugin:plugin}},{}],51:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},debounce=require("lodash.debounce");(function(){var Advertising,Analytics,BrightcovePlayer,CMS,ConvivaPlugin,ErrorMessages,ESPNAdPassThrough,ESPNAdRemainingTimeDisplay,ESPNCaptionSettingsMenuItem,ESPNCaptionsToggleButton,ESPNID3,ESPNLoadingSpinner,ESPNPlayer,ESPNPlayToggle,ESPNSeekBar,ESPNVolumeMenuButton,Endcard,FanPreferences,Localizations,SettingsMenu,SocialESPN,StateFeedbackButton,ThumbnailTime,Watermark,extend,hasProp,lang,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};hasProp={}.hasOwnProperty,extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},ESPNPlayer=require("../espn-player"),Advertising=require("../../advertising"),Analytics=require("../../analytics"),Watermark=require("../../watermark"),SocialESPN=require("../../social-espn-brightcove"),SettingsMenu=require("../../settingsmenu"),ThumbnailTime=require("./ThumbnailTime"),ESPNSeekBar=require("./ESPNSeekBar"),ESPNLoadingSpinner=require("./ESPNLoadingSpinner"),ESPNAdRemainingTimeDisplay=require("./ESPNAdRemainingTimeDisplay"),ESPNCaptionsToggleButton=require("./ESPNCaptionsToggleButton"),ESPNCaptionSettingsMenuItem=require("./ESPNCaptionSettingsMenuItem"),StateFeedbackButton=require("./StateFeedbackButton"),Endcard=require("./Endcard"),FanPreferences=require("../../fan"),ESPNVolumeMenuButton=require("./ESPNVolumeMenuButton"),ConvivaPlugin=require("../../conviva"),ESPNID3=require("./ESPNID3"),ESPNAdPassThrough=require("./ESPNAdPassThrough"),CMS=require("../../cms"),Localizations=require("../../i18n").translations(),ErrorMessages=require("./ErrorMessages.json"),ESPNPlayToggle=require("./ESPNPlayToggle"),BrightcovePlayer=function(superClass){function BrightcovePlayer(originalElement,configs){this.social=bind(this.social,this),this.selectPlaylist=bind(this.selectPlaylist,this);var player;BrightcovePlayer.__super__.constructor.call(this,originalElement),this.debouncedSetSizeClass=debounce(this.setSizeClass.bind(this),250),configs=configs||{},ESPNSeekBar.init(),ESPNLoadingSpinner.init(),ESPNAdRemainingTimeDisplay.init(),ESPNCaptionsToggleButton.init(),ESPNCaptionSettingsMenuItem.init(),SettingsMenu.init(),Endcard.init(),ConvivaPlugin.init(),ESPNID3.init(),ESPNAdPassThrough.init(),ESPNPlayToggle.init();for(lang in Localizations)videojs.addLanguage(lang,Localizations[lang]);configs.language&&["en","es"].indexOf(configs.language)!==-1&&this.element.setAttribute("data-setup",'{ "language": "'+configs.language+'" }'),player=this.player(window.bc(this.element)),this.element=player.el(),SettingsMenu.plugin(player),StateFeedbackButton.plugin(player),ESPNVolumeMenuButton.plugin(player,configs.volume),ESPNCaptionsToggleButton.plugin(player),player.ESPNCaptionSettings(),player.errors(ErrorMessages),player.load(),player.on("touchstart",function(){player.paused()&&player.usingNativeControls()&&player.play()}),player.on("adend",function(){player.removeClass("vjs-ad-loading")}),player.on("contentplayback",function(){player.one("mouseover",function(){player.el().classList.contains("not-hover")&&player.el().classList.remove("not-hover")})}),"userPreference"===configs.autoplay?FanPreferences.getAutoStart(function(autoStart){configs.autoplay=autoStart,this.registerConfiguration(configs)}.bind(this)):(configs.autoplay="on"===configs.autoplay||configs.autoplay===!0,this.registerConfiguration(configs)),this.startType=configs.wasUserInitiated===!1?"autostart":"manual",Analytics.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:this.startType}}}),player.on("ended",function(){player.ads.state&&"content-playback"!==player.ads.state||player.trigger("espn.contentended")}),player.on("loadstart",function(){var hlsTech;hlsTech=player.tech({IWillNotUseThisInPlugins:!0}).hls,hlsTech&&(hlsTech.xhr.beforeRequest=function(options){var rex=new RegExp("prod-freewheel.*.m3u8|generateKey");rex.test(options.uri)&&(options.withCredentials=!0)})}),player.on("ready",function(){this.setTechClass()}.bind(this)),player.ready(function(){"video"!==this.originalElement.tagName.toLowerCase()&&this.originalElement.parentNode.replaceChild(this.element,this.originalElement),this.setSizeClass(),window.addEventListener("resize",this.debouncedSetSizeClass),player.hotkeys({enableVolumeScroll:!1})}.bind(this))}return extend(BrightcovePlayer,superClass),BrightcovePlayer.prototype.mimeType=function(){return this.player().currentType()},BrightcovePlayer.prototype._useAdManager=!1,BrightcovePlayer.prototype.loadMidroll=function(breakParams){var options,slots;slots=[{adUnit:"midroll",adBreak:breakParams&&breakParams.break_number?breakParams.break_number:void 0,timePosition:this.player().currentTime()}],Advertising.configure({assetId:this.advertisingId||this.id,live:!0,mimeType:this.mimeType()}),this._useAdManager?(options=Advertising.adManager({},slots),"function"==typeof this.player().FreeWheelPlugin?this.player().FreeWheelPlugin(options):this.player().FreeWheelPlugin.settings=options):(options={serverUrl:Advertising.vast({},slots),requestMode:"ondemand"},this.preroll()&&"function"!=typeof this.player().ads&&"function"==typeof this.player().ima3&&(this.player().ads=Object.getPrototypeOf(this.player()).ads),"function"==typeof this.player().ima3&&this.player().ima3(options),this.player().ima3.adrequest(options.serverUrl))},BrightcovePlayer.prototype._midroll=!1,BrightcovePlayer.prototype.midroll=function(value){return null!=value&&(this._midroll=value),this._midroll},BrightcovePlayer.prototype.loadClips=function(clips,autoplay,source){var clip;return source=source||this.clipSource,clip="object"===("undefined"==typeof clips?"undefined":_typeof(clips))?clips.shift?clips.shift():[clips]:[{id:clips}],clips&&clips.length>0&&this.showEndCard===!1&&this.loopClip===!1&&this.player().one("ended",function(){this.loadClips(clips,!0,source)}.bind(this)),this.loadShield(clip.id,autoplay,source)},BrightcovePlayer.prototype.loop=function(){this.player().on("ended",function(){this.player().play()}.bind(this))},BrightcovePlayer.prototype.error=function(value,content){var err,modal,modalContent,player;player=this.player(),"object"===("undefined"==typeof value?"undefined":_typeof(value))?(err={headline:value.message},(value.code||value.type||value.abbreviation)&&(err.type=value.type||value.abbreviation,err.code=value.code||value.type)):err={headline:value,message:value},window.newrelic&&"function"==typeof window.newrelic.noticeError&&window.newrelic.noticeError(new Error(err.headline)),player.ready(function(){player.error(err),content&&(modal=player.getChild("errorDisplay"),content.nodeName?modalContent=content:(modalContent=document.createElement("div"),modalContent.innerHTML=content),modalContent.className="vjs-errors-dialog",modalContent.id="vjs-errors-dialog",modal.fillWith(modalContent),(player.width()<=600||player.height()<=250)&&modal.addClass("vjs-xs"))})},BrightcovePlayer.prototype.thumbnails=function(previews){var thumbnailHolder,thumbnails,thumbnailImage,missingThumbnailImageUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAA+CAIAAABFt7lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuFJREFUeNrsmtGxIUEUhne3PJOATYAIdgPAOzYAJIAAxgaABBAAAkAARgCUAFYCRLBfzV/V1YXaO7eurboP//8wdabn9Dmnvz4940EhSZLj8fjF+rAKcEzT1CA+rm9GYJRGaZSWURqlURqlZZRGaZSWURqlURqlZZRGaZSWURqlURqlZZRGaZSWUX4ClNVq9Uem/1fK90whXbFYfO+sN0VMIv978KnPK1H+zjQcDs/nc85MvzLlLwXn1WolguR6mmW9Xt+NjEaj+Xyep/5qJozHLokHn/q8+IAnSdJqtWazWaPRYNl0KGQZl8EgFDSCgcOfTGocxnu9npyRHIQv7qnb7aYIMV9GdBqwy+Vy7KAO4kqQu+xcyajCGDydTgQPE1UzCr0v5/gohAg5z8c7UFI0JdbrdcrCYOs2mw2D0+l0v9+3223Ww1NGqJ7rz0xM3O12TCmVSlSGD3MZZ5YWINzSZDIhQniN8JRbguNMQOHgNviTaLvdsru48eguOw6aG7Yh3iEeMaIdxf9yuXAb9yMTqZmkivBilICgNyGoJiWN9pyt0xqWy6VwY4T9D1BwYK4aE4c7juh6vfb7/bAe/MGUpikHH1so478wqvtIrZaPsxNZrfe0pwCnZgeWepbCmBUfETLiQGSt8U0V8qMk0+M/MSmiUql0u13WQ/VUxrJZcKCMAaBOp6OTziOWgfN4PF4sFuzHXcA0k9Awl+biliXBlJG4s3SotWd6D9KhITsvUGyMw+Hw2BPgrtVqod0ISyiKp9R4aWqXnB/bvCjv3jXhVmecr4EaCpqsh6c8UsfhxpcBampkbQl1A0i9EGLir5hQZm3YGHQowXGWJ1O45ZUtIupZbAxuiRyyY7Af2HIIBWPoJU4c2ep0YeUNIx+uLGcwGMD3aQ896muz2fS/fv0T3SiN0jJKozRKo7SM0iiN0jJKozRKo7SM0iiN0jJKozRKo7SM0iiN0jJKo/z0+ivAAEPb6BambmykAAAAAElFTkSuQmCC";if("function"==typeof this.player().thumbnails)return thumbnailHolder=this.player().controlBar.progressControl.el().querySelector(".vjs-thumbnail-holder"),thumbnailHolder&&this.player().controlBar.progressControl.el().removeChild(thumbnailHolder),thumbnails=this.player().thumbnails(previews),thumbnailHolder=this.player().controlBar.progressControl.el().querySelector(".vjs-thumbnail-holder"),thumbnailImage=thumbnailHolder.querySelector("img"),thumbnailImage.addEventListener("error",function(){this.src=missingThumbnailImageUrl}),ThumbnailTime.plugin(this.player()),thumbnails},BrightcovePlayer.prototype.social=function(options){if(videojs.plugin("social",SocialESPN),"function"==typeof this.player().social)return this.logConfigs("SocialESPN",options),this.player().social(options)},BrightcovePlayer.prototype.watermark=function(){return new Watermark(function(_this){return function(overlays){return overlays.length||(overlays=[overlays]),_this.player().overlay({overlays:overlays})}}(this))},BrightcovePlayer.prototype.endcard=function(clip,options){var country=clip._shield&&clip._shield.country?clip._shield.country:null,content={id:clip.mediaId||clip.id,headline:clip.headline,poster:clip.poster};this.player().endcard({playlist:this.playlist,content:content,country:country,timeoutHandler:function(clip,wasManual){this.startType=wasManual?"manual:endcard_continuous":"endcard_continuous",Analytics.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:this.startType}}}),this.loadClip(clip.id,!0,clip.source)}.bind(this),timeout:options&&options.timeout||null})},BrightcovePlayer.prototype.initAnalytics=function(){var player;player=this.player(),Analytics.configure({live:player.mediainfo.live}),player.comscore&&(this.logConfigs("comscore",Analytics.comscore()),player.comscore(Analytics.comscore())),player.chartbeat&&(this.logConfigs("chartbeat",Analytics.chartbeat()),player.chartbeat(Analytics.chartbeat())),player.BCGSAdobeDCRPlugin&&(this.logConfigs("BCGSAdobeDCRPlugin",{options:Analytics.adobeDCR()}),"function"==typeof player.BCGSAdobeDCRPlugin?player.BCGSAdobeDCRPlugin({options:Analytics.adobeDCR()}):player.BCGSAdobeDCRPlugin.loadNewOptions&&"function"==typeof player.BCGSAdobeDCRPlugin.loadNewOptions&&player.BCGSAdobeDCRPlugin.loadNewOptions(Analytics.adobeDCR()))},BrightcovePlayer.prototype.watchLoadedCallback=function(error){var player;player=this.player(),BrightcovePlayer.__super__.watchLoadedCallback.apply(this,arguments),!error&&player.mediainfo.listing&&"live"===player.mediainfo.listing.type&&player.on("play",function(){player.seekable().length>0&&player.currentTime(player.seekable().end(0))})},BrightcovePlayer.prototype.setTechClass=function(){
var player,techPrefix,techClass,cl;player=this.player(),techPrefix="evp-tech-",techClass=techPrefix+player.techName_.toLowerCase(),cl=player.el().classList;for(var i=0;i<cl.length;i++)cl[i].indexOf(techPrefix)!==-1&&player.removeClass(cl[i]);player.addClass(techClass)},BrightcovePlayer.prototype.setSizeClass=function(){var player,playerWidth;player=this.player(),playerWidth=player&&player.dimension("width")||-1,playerWidth>=660?player.addClass("espn-endCard-large"):player.removeClass("espn-endCard-large"),playerWidth>=375&&playerWidth<=659?player.addClass("espn-endCard-medium"):player.removeClass("espn-endCard-medium"),playerWidth>=275&&playerWidth<=374?player.addClass("espn-endCard-small"):player.removeClass("espn-endCard-small"),playerWidth>=250&&playerWidth<=274?player.addClass("espn-endCard-xSmall"):player.removeClass("espn-endCard-xSmall"),playerWidth<=640?player.addClass("espn-player-medium"):player.removeClass("espn-player-medium"),playerWidth<=300?player.addClass("espn-player-small"):player.removeClass("espn-player-small"),playerWidth>=250&&playerWidth<=480?player.addClass("remove-time"):player.removeClass("remove-time"),playerWidth>=250&&playerWidth<=400?player.addClass("remove-duration"):player.removeClass("remove-duration")},BrightcovePlayer.prototype.dispose=function(){window.removeEventListener("resize",this.debouncedSetSizeClass),this.debouncedSetSizeClass.cancel&&this.debouncedSetSizeClass.cancel();var player=this.player();if(player)try{player.dispose()}catch(err){}BrightcovePlayer.__super__.dispose.apply(this,arguments)},BrightcovePlayer}(ESPNPlayer),module.exports=BrightcovePlayer}).call(void 0)},{"../../advertising":5,"../../analytics":7,"../../cms":12,"../../conviva":15,"../../fan":16,"../../i18n":19,"../../settingsmenu":55,"../../social-espn-brightcove":58,"../../watermark":66,"../espn-player":52,"./ESPNAdPassThrough":38,"./ESPNAdRemainingTimeDisplay":39,"./ESPNCaptionSettingsMenuItem":40,"./ESPNCaptionsToggleButton":41,"./ESPNID3":42,"./ESPNLoadingSpinner":43,"./ESPNPlayToggle":44,"./ESPNSeekBar":45,"./ESPNVolumeMenuButton":46,"./Endcard":47,"./ErrorMessages.json":48,"./StateFeedbackButton":49,"./ThumbnailTime":50,"lodash.debounce":27}],52:[function(require,module,exports){"use strict";(function(){var API,AdProvider,Advertising,Analytics,Authorizer,CMS,ConfigLogger,ESPNPlayer,Shield,Social,StreamLimiter,TimelinePreviews,_authorizer,_reload;API=require("../../api"),Shield=require("../../shield"),TimelinePreviews=require("../../timeline-previews"),Social=require("../../social"),Advertising=require("../../advertising"),Analytics=require("../../analytics"),Authorizer=require("../../authorizer"),StreamLimiter=require("../../stream-limiter"),ConfigLogger=require("../../config-logger"),AdProvider=require("../../ad-provider"),CMS=require("../../cms"),ESPNPlayer=function(){function ESPNPlayer(originalElement){if("string"==typeof originalElement&&(0===originalElement.indexOf("#")&&(originalElement=originalElement.slice(1)),originalElement=document.getElementById(originalElement)),!originalElement||!originalElement.nodeName)throw new TypeError("The element or ID supplied is not valid.");this.originalElement=originalElement,this.element="video"===originalElement.tagName.toLowerCase()?originalElement:document.createElement("video"),this.element.controls=!0,this.element.preload="metadata",this.element.className="evp-player video-js"}ESPNPlayer.prototype.registerConfiguration=function(options){if(null!=options){if(this.options=options,this.clipSource=options.clipSource,options.advertising&&(Advertising.configure(options.advertising),options.advertising.assetId&&(this.advertisingId=options.advertising.assetId)),options.analytics&&Analytics.configure(options.analytics),options.api&&API.configure(options.api),null!=options.auth&&Authorizer.configure(options.auth),null!=options.autoplay&&this.autoplay(options.autoplay),null!=options.endcard&&(this.showEndCard=!!options.endcard),null!=options.preroll&&this.preroll(options.preroll),null!=options.postroll&&this.postroll(options.postroll),options.shield&&Shield.configure(options.shield),options.streamlimiter&&StreamLimiter.configure(options.streamlimiter),null!=options.loop&&(this.loopClip=options.loop),options.error){var player;return player=this.player(),player.conviva&&(this.logConfigs("conviva",Analytics.conviva()),player.conviva(Analytics.conviva())),this.error(options.error)}switch(!1){case!options.adOnly:return this.advertisingId=options.advertising&&options.advertising.assetId,this.adOnly();case null==options.cerebroId:return this.id=options.cerebroId,this.loadShield(this.id,options.autoplay);case null==options.clipId:return this.id=options.clipId,this.loadClip(this.id,options.autoplay,this.clipSource);case null==options.playlist:return this.playlist=options.playlist,this.loadClips(this.playlist,options.autoplay,this.clipSource);case null==options.watchId:if(this.id=options.watchId,!options.auth||!options.streamlimiter)return;return this.loadListing(this.id,options.autoplay);case null==options.channelId:if(this.id=options.channelId,!options.auth||!options.streamlimiter)return;return this.loadChannel(this.id,options.autoplay)}}},ESPNPlayer.prototype._player=void 0,ESPNPlayer.prototype.player=function(value){return null!=value&&(this._player=value),this._player},ESPNPlayer.prototype.autoplay=function(value){return this.player().autoplay(value)},ESPNPlayer.prototype.play=function(){return this.player().play()},ESPNPlayer.prototype.pause=function(){return this.player().pause()},ESPNPlayer.prototype.poster=function(value){return this.player().poster(value)},ESPNPlayer.prototype._preroll=!1,ESPNPlayer.prototype.preroll=function(value){return null!=value&&(this._preroll=value),this._preroll},ESPNPlayer.prototype._postroll=!1,ESPNPlayer.prototype.postroll=function(value){return null!=value&&(this._postroll=value),this._postroll},ESPNPlayer.prototype.id=void 0,ESPNPlayer.prototype.advertisingId=void 0,ESPNPlayer.prototype.metadata=void 0,ESPNPlayer.prototype._duration=void 0,ESPNPlayer.prototype.duration=function(value){return null!=value&&(this._duration=value),this._duration},ESPNPlayer.prototype.mimeType=function(){},ESPNPlayer.prototype.initAds=function(){},ESPNPlayer.prototype.load=function(){},ESPNPlayer.prototype.loopClip=!1,ESPNPlayer.prototype.loadClip=function(id,autoplay,source){var endpoint;return this.clipId=id,null!=autoplay&&this.autoplay(autoplay),source=source||this.clipSource,endpoint=new API({cms:source}),endpoint.getClipThroughShield(id,this.clipLoadedCallback.bind(this))},ESPNPlayer.prototype.loadClips=function(ids,autoplay,source){},ESPNPlayer.prototype.loadShield=function(cerebroId,autoplay){var endpoint;return null!=autoplay&&this.autoplay(autoplay),endpoint=new Shield,endpoint.getClip(cerebroId,this.clipLoadedCallback.bind(this))};var loadWatch=function loadWatch(type,id,autoplay){var _this,args,endpoint,player;return null!=autoplay&&this.autoplay(autoplay),_this=this,args=arguments,endpoint=new API,player=this.player(),type="channel"===type?"Channel":"Listing","function"!=typeof player.reloadSourceOnError||player.error()||player.reloadSourceOnError({getSource:function(reload){(player.error().code>0||player.error().code===-2)&&(_reload=reload,loadWatch.apply(_this,args))},errorInterval:5}),endpoint["get"+type](id,function(err,listing){_authorizer&&_authorizer.dispose(),this.logConfigs.call(this,"authorizer",Authorizer.configure(),listing.id),_authorizer=new Authorizer,_authorizer.onStatusChange=this.watchLoadedCallback.bind(this),_authorizer.startSession(listing)}.bind(this))};return ESPNPlayer.prototype.loadChannel=function(channel,autoplay){var args=Array.prototype.slice.call(arguments);args.unshift("channel"),loadWatch.apply(this,args)},ESPNPlayer.prototype.loadListing=function(id,autoplay){var args=Array.prototype.slice.call(arguments);args.unshift("listing"),loadWatch.apply(this,args)},ESPNPlayer.prototype.showEndCard=!0,ESPNPlayer.prototype.adOnly=function(){this.duration(1),this.preroll(!0),this.autoplay(!0),new AdProvider(this.player(),{},this.options.adProviderOrder,function(adProvider){this.player().src({src:"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAA79tZGF0AAAC9AYF///w3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTEga2V5aW50PTI0MCBrZXlpbnRfbWluPTI0IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9MTAgcmM9Y3JmIG1idHJlZT0xIGNyZj01MS4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT0yMDAwMCB2YnZfYnVmc2l6ZT0yNTAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAADFliIQAbwTYb+YMExstjI/2DFAAAAMAAA94QCcYYsAAASkAtD1oHHXQk/QgAAADAHxBAAAACUGaJBiL/wAA/wAAAAhBnkJCfwAB6QAAAAgBnmFF/wAB8wAAAAgBnmNF/wAB8wAAAApBmmg0TET/AAEPAAAACkGehkURLP8AAekAAAAIAZ6lRf8AAfMAAAAIAZ6nRf8AAfMAAAAJQZqrNExfAAFTAAAACEGeykJfAAHpAAAACAGe6UX/AAHzAAADym1vb3YAAABsbXZoZAAAAADTQ/Pq00Pz6gAAA+gAAAHLAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAL1dHJhawAAAFx0a2hkAAAAD9ND8+rTQ/PqAAAAAQAAAAAAAAHLAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAGsAAAA8AAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAABywAAHVQAAQAAAAACbW1kaWEAAAAgbWRoZAAAAADTQ/Pq00Pz6gABX5AAAKFMVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAhhtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAHYc3RibAAAAJhzdHNkAAAAAAAAAAEAAACIYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAGsAPAASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADJhdmNDAU1AKP/hABpnTUAo7KDY/3zUBAQFAAADAAEAAr8gDxgxlgEABWjvgZcgAAAAQHN0dHMAAAAAAAAABgAAAAUAAA6qAAAAAQAADqkAAAADAAAOqgAAAAEAAA6pAAAAAQAADqoAAAABAAAAAAAAABRzdHNzAAAAAAAAAAEAAAABAAAAcGN0dHMAAAAAAAAADAAAAAEAAB1UAAAAAQAASVEAAAABAAAdVAAAAAEAAAAAAAAAAQAADqoAAAABAABJUAAAAAEAAB1UAAAAAQAAAAAAAAABAAAOqgAAAAEAADqnAAAAAQAAHVQAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAADAAAAAEAAABEc3RzegAAAAAAAAAAAAAADAAAAy0AAAANAAAADAAAAAwAAAAMAAAADgAAAA4AAAAMAAAADAAAAA0AAAAMAAAADAAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYXVkdGEAAABZbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAsaWxzdAAAACSpdG9vAAAAHGRhdGEAAAABAAAAAExhdmY1NC42LjEwMA==",type:"video/mp4"}),adProvider.initAds({id:this.advertisingId||this.id,slots:{preroll:!0},duration:this.duration(),logger:this.logConfigs.bind(this)})}.bind(this))},ESPNPlayer.prototype.clipLoadedCallback=function(error,clip){var cms,player;return player=this.player(),player.conviva&&(this.logConfigs("conviva",Analytics.conviva()),player.conviva(Analytics.conviva())),error?void this.error(error):(player.trigger("espn.clipfetched",{player:this,clip:clip}),this.id=clip.id,this.advertisingId=clip.advertisingId,this.duration(clip.duration),this.clipId=clip.clipId,this.clipSource=clip.clipSource,cms=new CMS(this.clipSource),void new AdProvider(player,clip,this.options.adProviderOrder,function(adProvider){clip.sources=adProvider.sources,"function"==typeof this.mediainfo&&this.mediainfo(clip),clip.webVTT&&"function"==typeof player.addRemoteTextTrack&&player.addRemoteTextTrack({kind:"captions",language:"en",label:"Closed Captions",src:clip.webVTT}),clip.poster&&!this.autoplay()?this.poster(clip.poster):this.poster("data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="),"function"==typeof this.loop&&this.loopClip?this.loop():"function"==typeof this.endcard&&this.showEndCard&&this.endcard(clip,this.options.endcard),"function"==typeof this.social&&new Social(clip,this.social,this.options.social),"function"==typeof this.thumbnails&&clip.poster&&new TimelinePreviews(this.id,clip.HLS,this),player.trigger("espn.contentloaded",{id:this.id,clipId:this.clipId,mediainfo:player.mediainfo}),player.src(clip.sources),adProvider.initAds({networkId:cms.adNetworkId?cms.adNetworkId:null,id:this.advertisingId||this.id,slots:{preroll:this.preroll(),postroll:this.postroll()},duration:this.duration(),logger:this.logConfigs.bind(this)}),"function"==typeof this.initAnalytics&&this.initAnalytics()}.bind(this)))},ESPNPlayer.prototype.watchLoadedCallback=function(error,listing){var limiter,playheadOffset,player;return player=this.player(),player.conviva&&(this.logConfigs("conviva",Analytics.conviva()),player.conviva(Analytics.conviva())),error?void this.error(error):(["broadcastStartTime","startTime","endTime"].forEach(function(prop){var time;listing._listing[prop]&&(time=new Date(listing._listing[prop].replace("GMT","Z")),listing[prop]=listing._listing[prop]=time.toISOString(),listing[prop+"AsDate"]=time)}),listing.endTimeAsDate&&listing.startTimeAsDate&&(listing.duration=86400),void new AdProvider(player,listing,this.options.adProviderOrder,function(adProvider){return player.mediainfo&&player.mediainfo.id&&!_reload?(this.id=listing.id,this.advertisingId=listing.advertisingId||listing.id,"function"==typeof this.mediainfo&&this.mediainfo(listing),void player.trigger("espn.programchange",{id:listing.id,callback:function(){player.BCGSAdobeDCRPlugin&&player.BCGSAdobeDCRPlugin.completeLiveProgram&&"function"==typeof player.BCGSAdobeDCRPlugin.completeLiveProgram&&player.BCGSAdobeDCRPlugin.completeLiveProgram()}})):(this.id=listing.id,this.advertisingId=listing.advertisingId||listing.id,"function"==typeof this.mediainfo&&this.mediainfo(listing),this.poster(listing.poster),"function"==typeof this.social&&new Social(listing,this.social,this.options.social),player.trigger("espn.contentloaded",{id:this.id,mediainfo:player.mediainfo}),"function"==typeof _reload?(_reload({src:listing.HLS,type:"application/x-mpegURL"}),_reload=null):player.src({src:listing.HLS,type:"application/x-mpegURL"}),adProvider.initAds({id:this.advertisingId||this.id,slots:{preroll:this.preroll(),postroll:this.postroll()},logger:this.logConfigs.bind(this)}),"function"==typeof this.initAnalytics&&(this.initAnalytics(),player.BCGSAdobeDCRPlugin&&("function"==typeof player.BCGSAdobeDCRPlugin.setPlayheadOffset&&listing._listing&&"live"===listing._listing.type&&listing._listing.startTime&&(playheadOffset=Math.round((Date.now()-Date.parse(listing._listing.startTime))/1e3),player.on("omnitureReady",function(){player.BCGSAdobeDCRPlugin.setPlayheadOffset(playheadOffset)})),player.on("espn.id3cuechange",function(event,cue){var payload;"function"==typeof player.BCGSAdobeDCRPlugin.sendID3&&cue.value.owner&&null!==cue.value.owner.match(/^www\.nielsen\.com/i)&&player.BCGSAdobeDCRPlugin.sendID3(cue.value.owner),"function"==typeof player.BCGSAdobeDCRPlugin.trackAdStart&&"function"==typeof player.BCGSAdobeDCRPlugin.trackAdComplete&&"com.espn.authnet.transition"===cue.value.owner&&(payload=JSON.parse(cue.text),"PROGRAM"===payload.from.type&&"COMMERCIAL"===payload.to.type?player.BCGSAdobeDCRPlugin.trackAdStart():"COMMERCIAL"===payload.from.type&&"PROGRAM"===payload.to.type&&player.BCGSAdobeDCRPlugin.trackAdComplete())}))),"function"==typeof player.adPassThrough&&player.adPassThrough(),this.logConfigs("streamlimiter",StreamLimiter.configure()),void(limiter=new StreamLimiter(this)))}.bind(this)))},ESPNPlayer.prototype.logConfigs=function(plugin,configs,id){return ConfigLogger(id||this.id,plugin,configs)},ESPNPlayer.prototype.dispose=function(){_authorizer&&_authorizer.dispose()},ESPNPlayer.prototype.mediainfo=function(opts){var data;return opts&&(data={created_at:opts.createDate||"",custom_fields:{},description:opts.caption||"",duration:opts.duration||"",id:""+(opts.clipId||opts.id)||"",live:!1,name:opts.assetName||opts.name||"",pageTitle:opts.pageTitle||opts.headline+" - ESPN Video",poster:opts.poster||"",publisher:opts.publisher||"ESPN",published_at:opts.publishDate||opts.startTime||"",reference_id:opts.cerebroId||"",site:opts.site||"espncom",sources:opts.sources||"",sport:opts.sport||"",tags:opts.keywords||"",updated_at:opts.publishDate||""},opts._clips&&(data.clip=opts._clips),opts._listing&&(data.listing=opts._listing,"live"===opts._listing.type&&(data.live=!0)),opts.simulcastAiringId&&(data.simulcastAiringId=opts.simulcastAiringId),opts.passThroughBeaconURL&&(data.passThroughBeaconURL=opts.passThroughBeaconURL),opts._shield&&opts._shield.gameId!==-1&&(data.custom_fields.gameId=opts._shield.gameId),opts._shield&&opts._shield.mediaType&&(data.custom_fields.mediaType=opts._shield.mediaType),this.logConfigs("mediainfo",data),this.player().mediainfo=data,this.player().trigger("espn.mediainfoloaded",data)),this.player().mediainfo},ESPNPlayer}(),module.exports=ESPNPlayer}).call(void 0)},{"../../ad-provider":3,"../../advertising":5,"../../analytics":7,"../../api":9,"../../authorizer":10,"../../cms":12,"../../config-logger":13,"../../shield":57,"../../social":62,"../../stream-limiter":63,"../../timeline-previews":64}],53:[function(require,module,exports){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ESPNPlayer=require("../espn-player"),EventEmitter=require("events").EventEmitter,Analytics=require("../../analytics"),NativeOmniture=require("./native-omniture"),FanPreferences=require("../../fan"),VideoElementPlayer=function(){function VideoElementPlayer(element){_classCallCheck(this,VideoElementPlayer),this.element=element,this.events=new EventEmitter}return _createClass(VideoElementPlayer,[{key:"autoplay",value:function(value){return null!=value&&(value===!0?this.element.setAttribute("autoplay","autoplay"):this.element.removeAttribute("autoplay")),!!this.element.autoplay}},{key:"poster",value:function(value){return this.element.setAttribute("poster",value),this}},{key:"src",value:function(sources){var _this=this;if(null!=sources){if(this.element.currentSrc)for(var sourceElements=this.element.getElementsByTagName("source"),i=0;i<sourceElements.length;i++)this.element.removeChild(sourceElements[i]);sources.map(function(source){var element=document.createElement("source");return element.setAttribute("src",source.src),element.setAttribute("type",source.type),element}).forEach(function(element){_this.element.appendChild(element)}),this.element.load()}return this.element.currentSrc}},{key:"reset",value:function(){return this}},{key:"ready",value:function(){var callback=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return callback.call(this),this}},{key:"on",value:function(){var _element,_events;return(_element=this.element).addEventListener.apply(_element,arguments),(_events=this.events).on.apply(_events,arguments),this}},{key:"off",value:function(){var _element2,_events2;return(_element2=this.element).removeEventListener.apply(_element2,arguments),(_events2=this.events).removeListener.apply(_events2,arguments),this}},{key:"trigger",value:function(){var _events3;return(_events3=this.events).emit.apply(_events3,arguments),this}},{key:"play",value:function(){return this.element.play(),this}},{key:"pause",value:function(){return this.element.pause(),this}},{key:"load",value:function(){return this.element.load(),this}},{key:"duration",value:function(){return this.element.duration}}]),VideoElementPlayer}(),Html5Player=function(_ESPNPlayer){function Html5Player(element,configs){_classCallCheck(this,Html5Player);var player;configs.adProviderOrder={desktop:["brightcove_once"],tablet:["brightcove_once"],mobile:["brightcove_once"]};var _this2=_possibleConstructorReturn(this,(Html5Player.__proto__||Object.getPrototypeOf(Html5Player)).call(this,element,configs));return player=_this2.player(new VideoElementPlayer(_this2.element)),"userPreference"===configs.autoplay?FanPreferences.getAutoStart(function(autoStart){configs.autoplay=autoStart,this.registerConfiguration(configs)}.bind(_this2)):(configs.autoplay="on"===configs.autoplay||configs.autoplay===!0,_this2.registerConfiguration(configs)),player.load(),"video"!==element.tagName.toLowerCase()&&element.parentNode.replaceChild(_this2.element,element),_this2}return _inherits(Html5Player,_ESPNPlayer),_createClass(Html5Player,[{key:"loadClips",value:function(clips,autoplay,source){var clip;return source=source||this.clipSource,clip="object"===("undefined"==typeof clips?"undefined":_typeof(clips))?clips.shift?clips.shift():[clips]:[{id:clips}],clips&&clips.length>0&&this.loopClip===!1&&this.player().on("ended",function(){this.loadClips(clips,!0,source)}.bind(this),{once:!0}),this.loadShield(clip.id,autoplay,source)}},{key:"initAnalytics",value:function(){var player;player=this.player(),new NativeOmniture(player,Analytics.nativeOmniture({playerLocation:"foo",showCode:"bar",site:"espn"}))}},{key:"loop",value:function(){this.player().on("ended",function(){this.player().play()}.bind(this))}},{key:"error",value:function(){for(var _console,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];(_console=console).error.apply(_console,["Html5Player ERROR: "].concat(args))}}]),Html5Player}(ESPNPlayer);module.exports=Html5Player},{"../../analytics":7,"../../fan":16,"../espn-player":52,"./native-omniture":54,events:24}],54:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),NativeOmniture=function(){function NativeOmniture(player,options){_classCallCheck(this,NativeOmniture),this.player=player,this.options=options,this.options.s_omni&&this.options.s_omni.visitor&&(this.options.s_omni.visitor.getAnalyticsVisitorID&&"function"==typeof this.options.s_omni.visitor.getAnalyticsVisitorID&&(this.aid=this.options.s_omni.visitor.getAnalyticsVisitorID()),this.options.s_omni.visitor.getMarketingCloudVisitorID()&&(this.mid=this.options.s_omni.visitor.getMarketingCloudVisitorID())),player.on("play",this.onPlay.bind(this)),player.on("ended",this.onEnded.bind(this))}return _createClass(NativeOmniture,[{key:"fireTrackingBeacon",value:function(eventString){var cmsId,param,params,queryString;this.img||(this.img=new Image,this.img.id="html5playerAnalytics",document.body.appendChild(this.img)),cmsId=this.options.cmsId||this.player.mediainfo.name,params={pe:"media",c3:cmsId,v2:cmsId,events:eventString,v20:this.options.playerLocation+":"+this.options.showCode,c1:this.options.site},this.aid&&(params.aid=this.aid),this.mid&&(params.mid=this.mid),queryString=[];for(param in params)queryString.push(param+"="+encodeURIComponent(params[param]));this.img.src=(this.options.secure?"https":"http")+"://"+this.options.trackingServer+"/b/ss/"+this.options.reportSuites+"/5.4/REDIR/"+Date.now()+"?"+queryString.join("&")}},{key:"onPlay",value:function(){var duration;duration=this.player.duration(),this.fireTrackingBeacon("event1,event14="+(duration&&duration.toFixed(2)))}},{key:"onEnded",value:function(){this.fireTrackingBeacon("event11")}}]),NativeOmniture}();module.exports=NativeOmniture},{}],55:[function(require,module,exports){"use strict";function init(){var Component=videojs.getComponent("Component"),MenuItem=videojs.getComponent("MenuItem"),MenuButton=videojs.getComponent("MenuButton"),CaptionSettingsMenuItem=videojs.getComponent("CaptionSettingsMenuItem"),CaptionsToggleButton=videojs.getComponent("CaptionsToggleButton"),AutoplayMenuItem=videojs.extend(MenuItem,{contentElType:"checkbox",constructor:function(player,options){this.isSelected=!1,options.label="<span>"+player.localize("Autoplay")+"</span>",options.selectable=!0,MenuItem.call(this,player,options),FanPreferences.getAutoStart(function(autoStart){!this.el_||autoStart!==!0&&autoStart!==!1||(this.isSelected=autoStart,this.selected(autoStart),this.el_.querySelector("input").checked=this.isSelected)}.bind(this))}});AutoplayMenuItem.prototype.handleClick=function(){this.isSelected=!this.isSelected,this.selected(this.isSelected),this.el_.querySelector("input").checked=this.isSelected,FanPreferences.setAutoStart(this.isSelected),this.player().player_.trigger("espn.autoplaytoggled",{autoplay:this.isSelected})},AutoplayMenuItem.prototype.createEl=function(type){return MenuItem.prototype.createEl.call(this,type,{innerHTML:this.localize(this.options_.label)+'<div class="toggle-btn sm"><input id="autoplay_toggle" class="toggle-input round" type="checkbox"><label for="autoplay_toggle"></label></div>'})};var CaptionsMenuItem=videojs.extend(MenuItem,{contentElType:"checkbox",constructor:function(player,options){var changeHandler;this.isSelected=!0,options.label="<span>"+player.localize("Closed Caption")+"</span>",options.selectable=!0,MenuItem.call(this,player,options),this.hide(),changeHandler=this.handleTracksChange.bind(this),player.on("texttrackchange",changeHandler),player.on("espn.captionchange",changeHandler),this.on("dispose",function(){player.off("texttrackchange",changeHandler),player.off("espn.captionchange",changeHandler)})},toggleTracks:CaptionsToggleButton.prototype.toggleTracks,handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide();var tracksEnabled=CaptionsToggleButton.prototype.tracksEnabled.call(this);this.isSelected=tracksEnabled,this.selected(this.isSelected),this.el_.querySelector("input").checked=this.isSelected},hasValidTracks:CaptionsToggleButton.prototype.hasValidTracks});CaptionsMenuItem.prototype.handleClick=function(){this.toggleTracks(),this.handleTracksChange()},CaptionsMenuItem.prototype.createEl=function(type){return MenuItem.prototype.createEl.call(this,type,{innerHTML:this.localize(this.options_.label)+'<div class="toggle-btn sm"><input id="captions_toggle" class="toggle-input round" type="checkbox"'+(this.isSelected?"checked ":"")+'><label for="captions_toggle"></label></div>'})};var SettingsMenuButton=videojs.extend(MenuButton,{constructor:function(player,options){MenuButton.call(this,player,options),player.on("mouseup",function(e){this.buttonPressed_&&!this.el().contains(e.target)&&this.unpressButton(!0)}.bind(this))},handleClick:function(){MenuButton.prototype.handleClick.call(this),this.player().toggleClass("vjs-settings-active")}});SettingsMenuButton.prototype.createEl=function(){return Component.prototype.createEl.call(this,"div",{className:"vjs-settings-control-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button",innerHTML:'<div class="vjs-control-text">'+this.localize("Settings")+"</div>",tabIndex:0},{role:"menuitem"})},SettingsMenuButton.prototype.pressButton=function(){return this.addClass("vjs-menu-open"),MenuButton.prototype.pressButton.call(this)},SettingsMenuButton.prototype.unpressButton=function(shouldNotFocus){this.removeClass("vjs-menu-open"),this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),shouldNotFocus||this.el_.focus())},SettingsMenuButton.prototype.createItems=function(){var autoplayMenuItem,items;return items=[],autoplayMenuItem=new AutoplayMenuItem(this,{}),autoplayMenuItem.on("click",function(){}),items.push(autoplayMenuItem),items.push(new CaptionsMenuItem(this.player_,{})),IS_SAFARI||items.push(new CaptionSettingsMenuItem(this.player_,{kind:"captions"})),items},videojs.registerComponent("SettingsMenuButton",SettingsMenuButton),videojs.plugin("settingsMenu",videoJsPlugin)}function videoJsPlugin(){var player=this;player.ready(function(){var fullscreenToggleIndex=player.controlBar.children().map(function(c){return c.name()}).indexOf("fullscreenToggle");player.controlBar.settingsMenuButton&&(player.controlBar.removeChild(player.controlBar.settingsMenuButton),delete player.controlBar.settingsMenuButton),player.controlBar.settingsMenuButton=player.controlBar.addChild("settingsMenuButton",{},fullscreenToggleIndex-1)})}function plugin(player){player.settingsMenu()}var FanPreferences=require("../fan"),IS_SAFARI=/^((?!Chrome|Android).)*Safari/i.test(window.navigator&&window.navigator.userAgent);module.exports={init:init,plugin:plugin}},{"../fan":16}],56:[function(require,module,exports){"use strict";(function(){module.exports={BASE_URL:"https://watch.auth.api.espn.com/video/auth",API_KEY:"5p8m6dw513q716wt2os04mec3"}}).call(void 0)},{}],57:[function(require,module,exports){"use strict";(function(){var CMS,SYNDICATIONS,SYNDICATION_KEY_TO_CLIP_SOURCE,Shield,config,extend,hasProp,request;request=require("superagent"),CMS=require("../cms"),config=require("./config"),extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return child},hasProp={}.hasOwnProperty,SYNDICATIONS=["cricinfo","deportes","domestic","soccerfc"],SYNDICATION_KEY_TO_CLIP_SOURCE={cricinfo:"cric",deportes:"deportes",domestic:"espn",soccerfc:"intl"},Shield=function(){function Shield(options){this.baseURL=options&&options.BASE_URL||config.BASE_URL,this.apiKey=options&&options.API_KEY||config.API_KEY}return Shield.prototype.getClip=function(cerebroId,callback){var url;return url=this.baseURL+"/getclip/"+cerebroId,request.get(url).query({apikey:this.apiKey}).end(function(error,res){var HLS,MP4,authError,clip,clipId,cms,errorResponse,sources,syndicationDetails,syndicationKey,video;if(error&&403===error.status&&res.body&&res.body.message){var messageArr=res.body.message.split(":");if(messageArr.length>0)return errorResponse=messageArr[messageArr.length-1].trim(),callback(errorResponse,null)}return error?(errorResponse=error.response&&error.response.body&&error.response.body.error||error,callback(errorResponse,null)):res.body&&res.body.clip?(video=res.body&&res.body.clip,HLS=video.transcodes&&video.transcodes.hls,MP4=video.transcodes&&video.transcodes.primary_mezzanine,syndicationKey=Object.keys(video.syndicationDetails).filter(function(key){return SYNDICATIONS.indexOf(key)!==-1}).shift(),syndicationDetails=syndicationKey&&video.syndicationDetails[syndicationKey],
clipId=syndicationDetails&&syndicationDetails.cms&&syndicationDetails.cms.syndicationId,cms=new CMS(SYNDICATION_KEY_TO_CLIP_SOURCE[syndicationKey]||syndicationKey),sources=[],HLS&&sources.push({src:HLS,type:"application/x-mpegURL"}),MP4&&sources.push({src:MP4,type:"video/mp4"}),clip={_shield:video,advertisingId:cms.adAssetId(clipId),assetName:video.assetName,caption:video.caption,cerebroId:video.id,clipId:clipId,clipSource:cms.key,createDate:new Date(video.createDate).toISOString(),duration:video.durationSeconds,headline:video.headline,HLS:HLS,id:video.id,keywords:video.keywords&&video.keywords.split&&video.keywords.split(",\n"),mediaId:cms.apiMediaId(clipId),MP4:MP4,ONCE:syndicationDetails&&syndicationDetails.brightcove&&syndicationDetails.brightcove.url,poster:video.transcodes&&video.transcodes.thumbnail,publishDate:new Date(video.publishDate).toISOString(),sources:sources,sport:video.adTarget&&video.adTarget.sport,syndicatable:video.videoRights&&video.videoRights.socialSharing,web:syndicationDetails&&syndicationDetails.cms&&syndicationDetails.cms.url,webVTT:syndicationDetails&&syndicationDetails.threeplay&&syndicationDetails.threeplay.url},clip._shield.device=res.body&&res.body.requestedBy&&res.body.requestedBy.device,clip._shield.country=res.body&&res.body.requestedBy&&res.body.requestedBy.country,callback(null,clip)):(authError=res.body&&res.body.authenticationStatus&&res.body.authenticationStatus.messages.shift(),callback(authError,null))})},Shield}(),Shield.configure=function(options){return extend(config,options),config},module.exports=Shield}).call(void 0)},{"../cms":12,"./config":56,superagent:32}],58:[function(require,module,exports){"use strict";function SocialESPN(options){var SocialButtonESPN=require("./socialbutton"),SocialOverlayESPN=require("./socialoverlay"),player=this,defaults={title:"",description:"",url:"",offset:"00:00:00",services:{facebook:!0,twitter:!0,google:!1,tumblr:!1,pinterest:!1,linkedin:!1,email:!0},accountId:3948005062001},init=function(options){var settings=videojs.mergeOptions(defaults,options);if(!(settings&&settings.services&&(settings.services.facebook||settings.services.twitter||settings.services.google||settings.services.tumblr||settings.services.pinterest||settings.services.linkedin||settings.services.email)))throw new Error("videojs-social requires at least one service to be enabled");player.controlBar.socialButtonESPN&&(player.controlBar.removeChild(player.controlBar.socialButtonESPN),delete player.controlBar.socialButtonESPN,player.socialOverlayESPN&&(player.removeChild(player.socialOverlayESPN),delete player.socialOverlayESPN));var socialIndex=player.controlBar.children().map(function(c){return c.name()}).indexOf("customControlSpacer")+1;player.controlBar.socialButtonESPN=player.controlBar.addChild("socialButtonESPN",settings,socialIndex),player.socialOverlayESPN=player.addChild("socialOverlayESPN",settings),player.controlBar.socialButtonESPN.el().setAttribute("tabindex",0)};videojs.registerComponent("SocialButtonESPN",SocialButtonESPN),videojs.registerComponent("SocialOverlayESPN",SocialOverlayESPN),init(options)}module.exports=SocialESPN},{"./socialbutton":59,"./socialoverlay":60}],59:[function(require,module,exports){"use strict";var SocialButtonESPN=videojs.extend(videojs.Button,{constructor:function(player,options){player.socialButtonESPN&&player.controlBar.removeChild(player.socialButtonESPN),videojs.Button.call(this,player,options),this.on("touchstart",function(e){e.preventDefault(),player.socialOverlayESPN.show(),player.addClass("vjs-share-open").removeClass("vjs-controls-disabled")}),this.on("click",function(){player.socialOverlayESPN.show(),player.addClass("vjs-share-open").removeClass("vjs-controls-disabled")})},createEl:function(){return videojs.Button.prototype.createEl.call(this,"button",{className:"vjs-share-control vjs-control vjs-icon-share vjs-button",innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+this.player().localize("Share")+"</span></div>"},{"aria-live":"polite"})}});module.exports=SocialButtonESPN},{}],60:[function(require,module,exports){"use strict";var SocialOverlayESPN=videojs.extend(videojs.Component,{constructor:function(player,options){player.socialOverlayESPN&&player.removeChild(player.socialOverlayESPN),"undefined"==typeof options.pauseOnOpen&&(options.pauseOnOpen=!0),"undefined"==typeof options.showOffset&&(options.showOffset=!0),videojs.Component.call(this,player,options),this._bindServiceButtons(options.services),this.directLinkTextBox=this.el().querySelector("#direct-link-textbox"),this.directLinkCopy=this.el().querySelector("#direct-link-copy"),this.directLinkCopyIcon=this.el().querySelector("#directLink"),this.offsetContainer=this.el().querySelector("#start-offset-container"),this.offsetTextBox=this.el().querySelector("#start-offset-textbox"),this.offsetCheckBox=this.el().querySelector("#start-offset-checkbox"),this.embedCodeTextBox=this.el().querySelector("#embed-code-textbox"),this.embedCodeCopy=this.el().querySelector("#embed-code-copy"),this.embedCodeCopyIcon=this.el().querySelector("#embedLink"),this.socialLinksInputContainer=this.el().querySelector(".vjs-social-links-input-container"),this.socialLinksInputLabel=this.el().querySelector("#social-links-input-label"),this.socialLinksTextBox=this.el().querySelector("#social-links-textbox"),document.queryCommandSupported("copy")===!1&&Array.prototype.forEach.call(this.el().querySelectorAll(".social-copy-link"),function(el){el.parentNode.removeChild(el)});var _this=this;Array.prototype.forEach.call(this.el().querySelectorAll("svg"),function(el){el.addEventListener("click",function(e){var targetEl=e.target;"copy-svg"===targetEl.getAttribute("data-behavior")&&_this._handleCopy(targetEl)})}),this.on("keydown",function(event){"none"!==player.socialOverlayESPN.el().display&&27===event.keyCode&&(player.socialOverlayESPN.hide(),player.removeClass("vjs-share-open"))}),this.on("change",function(event){var targetEl=event.target;targetEl===this.offsetTextBox&&(this.offsetTextBox.value=this._cleanupTimeString(this.offsetTextBox.value),this.directLinkTextBox.value=this._getDirectLinkWithTime("1"===this.offsetCheckBox.value),this._resetDirectLinkState())}),this.on("click",function(event){var targetEl=event.target,behavior=event.target.getAttribute("data-behavior"),targetClassName=targetEl.className&&"string"==typeof targetEl.className?targetEl.className:"";targetClassName.indexOf("vjs-social-cancel")!==-1?(player.socialOverlayESPN.hide(),player.removeClass("vjs-share-open")):"copy"===behavior?(event.preventDefault(),this._handleCopy(targetEl)):targetEl===this.offsetCheckBox?(targetEl.value="0"===targetEl.value?"1":"0",this.updateState(),this._resetDirectLinkState()):"default"===behavior&&(this._resetEmbedCodeState(),this._resetDirectLinkState(),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-shown",""))})},createEl:function(){var player=this.player(),options=this.options_;return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-social-overlay vjs-modal-dialog vjs-hidden",tabindex:-1,innerHTML:'<div class="vjs-social-container" tabindex="0"><button class="vjs-close-button vjs-control vjs-icon-cancel vjs-button vjs-social-cancel"><span class="vjs-control-text" aria-label="'+player.localize("Close button")+'">'+player.localize("Close")+'</span></button><div class="vjs-modal-dialog-content" role="document"><form class="social-form"><div class="vjs-social-share-links">'+this._addSocialButtons(options.services)+'<div class="vjs-social-links-input-container"><label id="social-links-input-label" class="vjs-social-label-text" for="social-links-textbox">'+player.localize("URL")+'</label><input id="social-links-textbox" class="social-links-textbox" type="text" tabindex="10" readonly="true" value=""></div></div><div class="vjs-social-direct-link-container vjs-social-direct-link" aria-label="Read Only: Direct Link To Content"><div class="direct-link-header-container"><label class="vjs-social-label-text" for="direct-link-textbox">'+player.localize("URL")+'</label><span id="start-offset-container"><input type="checkbox" id="start-offset-checkbox" value="0"><label for="start-offset-checkbox">'+player.localize("Start at")+'</label><input id="start-offset-textbox" class="start-offset-textbox" type="text" title="The offset must be specified using the following pattern: hh:mm:ss" placeholder="hh:mm:ss" maxlength="10" value="00:00:00"></span><a data-behavior="copy" href="#" id="direct-link-copy" class="social-copy-link">'+player.localize("Copy")+'</a></div><input id="direct-link-textbox" class="direct-link-textbox has-link-icon" type="text" tabindex="8" readonly="true" value=""></div><div class="vjs-social-embed-container vjs-social-embed-code" aria-label="Read Only: Embed Code" style="'+(options.syndicatable?"":"display: none;")+'"><div class="direct-link-header-container"><label for="embed-code-textbox" class="vjs-social-label vjs-social-label-text">'+player.localize("Embed Code")+'</label><a data-behavior="copy" href="#" id="embed-code-copy" class="social-copy-link">'+player.localize("Copy")+'</a></div><input id="embed-code-textbox" class="embed-code-textbox has-link-icon" type="text" tabindex="10" readonly="true" value=""></div></form></div></div>'},{"aria-role":"dialog","aria-label":player.localize("Sharing Dialog")})},clearState:function(){this.offsetCheckBox.value="0",this.offsetCheckBox.checked=!1,this._resetEmbedCodeState(),this._resetDirectLinkState(),this.directLinkTextBox.value=this._getDirectLinkWithTime(!1)},updateState:function(){var player=this.player(),options=this.options_;options.showOffset||(this.offsetContainer.style.display="none");var includeTime="1"===this.offsetCheckBox.value;includeTime?this.offsetTextBox.className+=" offset-active":this.offsetTextBox.className=this.offsetTextBox.className.replace(/ offset-active/,"");var currentPlayerTime=player.ads&&"ad-playback"!==player.ads.state?this._formatSeconds(player.currentTime()):"00:00";this.offsetTextBox.value=currentPlayerTime,options.syndicatable&&(this.embedCodeTextBox.value=this._getEmbedCode()),this.directLinkTextBox.value=this._getDirectLinkWithTime(includeTime),this._bindServiceButtons(options.services)},hide:function(){videojs.Component.prototype.hide.call(this);var player=this.player();player.trigger("socialclosed"),player.controls(!0),this.clearState(),this.previouslyPlaying&&setTimeout(function(){player.play()}.bind(this),0),player.controlBar.socialButtonESPN.el().focus()},show:function(){videojs.Component.prototype.show.call(this);var player=this.player();player.trigger("socialopened"),this.updateState(),player.controls(!1),this.options_.pauseOnOpen&&(player.paused()?this.previouslyPlaying=!1:(this.previouslyPlaying=!0,player.pause())),this.el().querySelector(".vjs-social-share-links a:first-child").focus()}});SocialOverlayESPN.prototype._getMailToLink=function(){var options=this.options_,mailToLink=options.mailToLink,directLink=this._getDirectLinkWithTime(!1),bodyPrefix=this.player().localize("Check out this video on ESPN");return mailToLink=mailToLink.replace("{{subject}}",encodeURIComponent(options.title)).replace("{{body}}",bodyPrefix+": "+encodeURIComponent(directLink))},SocialOverlayESPN.prototype._resetEmbedCodeState=function(){var player=this.player();this.embedCodeCopy.className=this.embedCodeCopy.className.replace(/ copied/,""),this.embedCodeCopyIcon&&(this.embedCodeCopyIcon.parentNode.className=this.embedCodeCopyIcon.parentNode.className.replace(/ copied/,"")),this.embedCodeCopy.textContent=player.localize("Copy")},SocialOverlayESPN.prototype._resetDirectLinkState=function(){var player=this.player();this.directLinkCopy.className=this.directLinkCopy.className.replace(/ copied/,""),this.directLinkCopyIcon&&(this.directLinkCopyIcon.parentNode.className=this.directLinkCopyIcon.parentNode.className.replace(/ copied/,"")),this.directLinkCopy.textContent=player.localize("Copy")},SocialOverlayESPN.prototype._setSocialLinksInput=function(value){this.socialLinksTextBox.value=value,this.socialLinksInputContainer.className+=" social-input-container-shown",this.socialLinksTextBox.select()},SocialOverlayESPN.prototype._handleCopy=function(targetEl){var isEmbedIcon=targetEl===this.embedCodeCopyIcon,isEmbedLink=targetEl===this.embedCodeCopy,isDirectLinkIcon=targetEl===this.directLinkCopyIcon,isDirectLink=targetEl===this.directLinkCopy,player=this.player();this._resetEmbedCodeState(),this._resetDirectLinkState(),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-hidden",""),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-shown",""),isDirectLink?this.directLinkTextBox.select():isEmbedLink&&this.embedCodeTextBox.select(),isDirectLinkIcon||isDirectLink?this._setSocialLinksInput(this.directLinkTextBox.value):(isEmbedIcon||isEmbedLink)&&this._setSocialLinksInput(this.embedCodeTextBox.value),this.socialLinksInputLabel.textContent=isEmbedIcon||isEmbedLink?this.player().localize("Embed Code"):this.player().localize("URL");try{document.execCommand("copy")&&(isEmbedLink||isEmbedIcon?(this.embedCodeCopy.className+=" copied",this.embedCodeCopy.textContent=this.embedCodeCopy.className.indexOf("copied")!==-1?player.localize("Copied"):player.localize("Copy"),this.embedCodeCopyIcon&&(this.embedCodeCopyIcon.parentNode.className+=" copied")):(isDirectLink||isDirectLinkIcon)&&(this.directLinkCopy.className+=" copied",this.directLinkCopy.textContent=this.directLinkCopy.className.indexOf("copied")!==-1?player.localize("Copied"):player.localize("Copy"),this.directLinkCopyIcon&&(this.directLinkCopyIcon.parentNode.className+=" copied")))}catch(err){}},SocialOverlayESPN.prototype._bindServiceButtons=function(serviceButtons){var service,encodedUrl,encodedTitle,encodedDescription,encodedPoster,options=this.options_,posterUrl=this.player().poster();encodedUrl=encodeURIComponent(this._getUrl()),encodedTitle=encodeURIComponent(this._getTitle()),encodedDescription=encodeURIComponent(options.description),posterUrl&&(encodedPoster=encodeURIComponent(posterUrl));for(service in serviceButtons)serviceButtons[service]===!0&&this._bindServiceButton(service,encodedUrl,encodedTitle,encodedDescription,encodedPoster)},SocialOverlayESPN.prototype._bindServiceButton=function(service,encodedUrl,encodedTitle,encodedDescription,encodedPoster){switch(service){case"facebook":this._attachServiceButtonHandler(".vjs-icon-facebook","https://www.facebook.com/sharer/sharer.php?u={URL}&title={TITLE}".replace("{URL}",encodedUrl).replace("{TITLE}",encodedTitle));break;case"google":this._attachServiceButtonHandler(".vjs-icon-gplus","https://plus.google.com/share?url={URL}".replace("{URL}",encodedUrl));break;case"twitter":this._attachServiceButtonHandler(".vjs-icon-twitter","https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fabout.twitter.com%2Fresources%2Fbuttons&text={TITLE}&tw_p=tweetbutton&url={URL}".replace("{URL}",encodedUrl).replace("{TITLE}",encodedTitle));break;case"tumblr":this._attachServiceButtonHandler(".vjs-icon-tumblr","http://www.tumblr.com/share?v=3&u={URL}&t={TITLE}".replace("{URL}",encodedUrl).replace("{TITLE}",encodedTitle));break;case"pinterest":this._attachServiceButtonHandler(".vjs-icon-pinterest","https://pinterest.com/pin/create/button/?url={URL}{POSTER}&description={TITLE}&is_video=true".replace("{URL}",encodedUrl).replace("{TITLE}",encodedTitle).replace("{POSTER}",encodedPoster?"&media="+encodedPoster:""));break;case"linkedin":this._attachServiceButtonHandler(".vjs-icon-linkedin","https://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TITLE}&summary={DESCRIPTION}&source=Classic".replace("{URL}",encodedUrl).replace("{TITLE}",encodedTitle).replace("{DESCRIPTION}",encodedDescription));break;case"email":this._attachServiceButtonHandler(".vjs-icon-email",this._getMailToLink());break;case"directlink":this._attachServiceButtonHandler(".vjs-icon-directlink");break;case"embed":this._attachServiceButtonHandler(".vjs-icon-embed");break;default:throw new Error("An unsupported social service was specified.")}},SocialOverlayESPN.prototype._handleServiceButtonClick=function(e){var behavior=e.target.getAttribute("data-behavior");"show-email"!==behavior&&e.preventDefault(),("default"===behavior||"twitter"===behavior&&"undefined"==typeof window.twttr)&&window.open(e.target.href,"_blank","width=600, height=400, top=100, left=100, titlebar=yes, modal=yes, resizable=yes, toolbar=no, status=1, location=no, menubar=no, centerscreen=yes")},SocialOverlayESPN.prototype._getEmbedCode=function(){var embedCode=this.options_.embedCode;return embedCode},SocialOverlayESPN.prototype._getUrl=function(){var url,options=this.options_;return url=options.url?options.url:window.parent!=window?document.referrer:window.location.href},SocialOverlayESPN.prototype._getDirectLinkWithTime=function(includeTime){var offset,url=this._getUrl();if(includeTime&&(offset=this.offsetTextBox.value),offset){for(var offsetArr=offset.split(":"),param="",unit="",i=0,len=offsetArr.length;i<len;i++){switch(i){case 0:unit="s";break;case 1:unit="m";break;case 2:unit="h"}param=offsetArr.pop()+unit+param}var sep=url.indexOf("?")!==-1?"&":"?";url=url+sep+"t="+param}return url},SocialOverlayESPN.prototype._getTitle=function(){var playerOptions,options=this.options_,title=options.title;return title||(playerOptions=this.player().options_,playerOptions["data-media"]&&playerOptions["data-media"].title&&(title=playerOptions["data-media"].title)),title||""},SocialOverlayESPN.prototype._attachServiceButtonHandler=function(elementSelector,url){var el=this.el().querySelector(elementSelector);el&&(el.player=this,el.href=url||"#",el.removeEventListener("touchend",this._handleServiceButtonClick,!1),el.addEventListener("touchend",this._handleServiceButtonClick,!1),el.removeEventListener("click",this._handleServiceButtonClick,!1),el.addEventListener("click",this._handleServiceButtonClick,!1))},SocialOverlayESPN.prototype._addSocialButtons=function(services){var servicesHtml,service;servicesHtml="";for(service in services)services[service]===!0&&(servicesHtml+=this._addServiceButton(service));return servicesHtml},SocialOverlayESPN.prototype._addServiceButton=function(service){var player=this.player(),link="";switch(service){case"facebook":link='<a data-behavior="default" class="vjs-social-share-link vjs-icon-facebook" aria-role="link" aria-label="Share on Facebook" tabindex="1" title="Facebook" target="_blank"><span class="vjs-control-text">Facebook</span></a>';break;case"google":link='<a data-behavior="default" class="vjs-social-share-link vjs-icon-gplus" aria-role="link" aria-label="Share on Google Plus" tabindex="2" title="Google+" target="_blank"><span class="vjs-control-text">Google+</span></a>';break;case"twitter":link='<a data-behavior="twitter" class="vjs-social-share-link vjs-icon-twitter" aria-role="link" aria-label="Share on Twitter" tabindex="3" title="Twitter" target="_blank"><span class="vjs-control-text">Twitter</span></a>';break;case"tumblr":link='<a data-behavior="default" class="vjs-social-share-link vjs-icon-tumblr" aria-role="link" aria-label="Share on Tumblr" tabindex="4" title="Tumblr" target="_blank"><span class="vjs-control-text">tumblr</span></a>';break;case"pinterest":link='<a data-behavior="default" class="vjs-social-share-link vjs-icon-pinterest" aria-role="link" aria-label="Share on Pinterest" tabindex="5" title="Pinterest" target="_blank"><span class="vjs-control-text">Pinterest</span></a>';break;case"linkedin":link='<a data-behavior="default" class="vjs-social-share-link vjs-icon-linkedin" aria-role="link" aria-label="Share on LinkedIn" tabindex="6" title="LinkedIn" target="_blank"><span class="vjs-control-text">LinkedIn</span></a>';break;case"email":link='<a data-behavior="show-email" class="vjs-social-share-link vjs-icon-email" aria-role="link" aria-label="Share via Email" tabindex="7" title="Email"><span class="vjs-control-text">'+player.localize("Email")+"</span></a>";break;case"directlink":link='<a class="vjs-social-share-link vjs-icon-directlink" aria-role="link" aria-label="Direct link" tabindex="8" title="Direct Link"><svg data-behavior="copy-svg" id="directLink" x="0px" y="0px" viewBox="119.1 223.8 356.4 359.4" enable-background="new 119.1 223.8 356.4 359.4" xml:space="preserve"><path fill="#FFFFFF" d="M290.9,310.1c-10.4,10.4-14.9,22.3-14.9,35.7c0,13.4,4.5,26.8,13.4,37.2l17.9-17.9 c-4.5-6-7.4-11.9-7.4-19.3c0-7.4,3-13.4,7.4-19.3l69.9-69.9c6-6,11.9-7.4,19.3-7.4s14.9,3,19.3,7.4l26.8,26.8 c6,6,7.4,11.9,7.4,19.3c0,7.4-3,14.9-7.4,19.3l-69.9,69.9c-6,6-11.9,7.4-19.3,7.4c-7.4,0-13.4-3-19.3-7.4l-16.4,19.3 c10.4,8.9,22.3,13.4,37.2,13.4c13.4,0,26.8-6,35.7-14.9l69.9-69.9c10.4-10.4,14.9-22.3,14.9-37.2c0-14.9-6-26.8-14.9-37.2 l-26.8-26.8c-10.4-10.4-22.3-14.9-37.2-14.9c-14.9,0-26.8,4.5-37.2,14.9L290.9,310.1z"/><path fill="#FFFFFF" d="M243.3,440.3c-4.5,4.5-6,11.9,0,17.9c4.5,4.5,13.4,4.5,17.9,0l91.5-91.5c4.5-4.5,4.5-13.4,0-17.9 c-6-6-13.4-4.5-17.9,0L243.3,440.3z"/><path fill="#FFFFFF" d="M133.9,467.1c-10.4,10.4-14.9,22.3-14.9,37.2s4.5,26.8,14.9,37.2l26.8,26.8 c10.4,10.4,22.3,14.9,37.2,14.9s26.8-6,37.2-14.9l69.9-69.9c10.4-10.4,14.9-22.3,14.9-35.7s-4.5-26.8-13.4-37.2l-19.3,16.4 c6,6,7.4,11.9,7.4,19.3c0,7.4-3,13.4-7.4,19.3l-69.9,69.9c-6,6-11.9,7.4-19.3,7.4c-7.4,0-14.9-3-19.3-7.4l-26.8-26.8 c-6-4.5-7.4-11.9-7.4-19.3c0-7.4,3-14.9,7.4-19.3l69.9-69.9c6-6,11.9-7.4,19.3-7.4c7.4,0,13.4,3,19.3,7.4l17.9-17.9 c-10.4-10.4-22.3-14.9-37.2-13.4c-13.4,0-26.8,6-35.7,14.9L133.9,467.1z"/></svg><span class="vjs-control-text">Copy Link</span></a>';break;case"embed":link='<a class="vjs-social-share-link vjs-icon-embed" aria-role="link" aria-label="Embed link" tabindex="9" title="Embed"><svg data-behavior="copy-svg" id="embedLink" x="0px" y="0px" viewBox="119.1 293 357.2 256" enable-background="new 119.1 293 357.2 256" xml:space="preserve"><path fill="#FFFFFF" d="M476.2,423.2l-81.1,81.1l-9.7-9.7l70.7-71.4l-70.7-70.7l9.7-9.7L476.2,423.2z"/><polygon fill="#FFFFFF" points="261.9,548.9 249.3,546 326.7,293 339.3,295.2  "/><path fill="#FFFFFF" d="M119.1,423.2l81.1-80.4l9.7,9.7l-70.7,70.7l70.7,71.4l-9.7,9.7L119.1,423.2z"/></svg></span><span class="vjs-control-text">Copy Embed Link</span></a>';break;default:throw new Error("An unsupported social service was specified.")}return link},SocialOverlayESPN.prototype._zeroPadNumber=function(number){return 1===String(number).length?"0"+number:number},SocialOverlayESPN.prototype._cleanupTimeString=function(value){var parts=value.split(":");if(1===parts.length)return this._formatSeconds(parts[0]);for(var i=0,len=parts.length;i<len;i++)parts[i]=isNaN(parseInt(parts[i]))?"00":this._zeroPadNumber(parseInt(parts[i]));return parts.join(":")},SocialOverlayESPN.prototype._formatSeconds=function(seconds){var secs=Number(seconds);if(isNaN(secs))return"00:00";var h=Math.floor(secs/3600),m=Math.floor(secs%3600/60),s=Math.floor(secs%3600%60);return h=h>0?(h<10?"0"+h:h)+":":"",m=(m>0?m<10?"0"+m:m:"00")+":",s=s<10?"0"+s:s,h+m+s},module.exports=SocialOverlayESPN},{}],61:[function(require,module,exports){"use strict";(function(){module.exports={mailToLink:"mailto:?subject={{subject}}&body={{body}}",sendMailUrl:"http://proxy.espn.com/videohub/player/sendMail?id={{id}}&clipName={{clipName}}&youremail={{youremail}}&friendemail={{friendemail}}&message={{message}}&videoImage={{videoImage}}",embedCode:'<iframe src="http://www.espn.com/core/video/iframe?id={{ID}}&endcard=false" allowfullscreen frameborder="0"></iframe>',embedUrlTemplate:"//players.brightcove.net/{{account_id}}/{{player_id}}_{{embed_id}}/index.html{{video_id}}{{offset}}",deeplinking:!0,services:{facebook:!0,google:!1,twitter:!0,tumblr:!1,pinterest:!1,linkedin:!1,email:!0,directlink:!0,embed:!0}}}).call(void 0)},{}],62:[function(require,module,exports){"use strict";(function(){var Social,config,extend,hasProp;extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return child},hasProp={}.hasOwnProperty,config=require("./config"),Social=function(){function Social(data,callback,options){var opts=extend({},config);options&&extend(opts,options),data._shield?(opts.id=opts.id||(data._shield.site?data._shield.site+":"+data.advertisingId:data.id),opts.title=data.headline,opts.description=data.caption,opts.url=opts.url&&opts.url.replace(/{{ID}}/g,data.clipId)||data.web,opts.poster=data.poster,opts.embedCode=opts.embedCode&&opts.embedCode.replace(/{{ID}}/g,data.clipId),opts.syndicatable=data.syndicatable,opts.pauseOnOpen=!0,opts.showOffset=!0,opts.services&&opts.services.embed&&(opts.services.embed=opts.syndicatable)):data._listing&&(opts.id=opts.id||data.id,opts.title=data.name,opts.description=data.caption,opts.url=opts.url||data.web,opts.poster=data.poster,opts.pauseOnOpen=!1,opts.showOffset=!1,opts.services&&opts.services.embed&&(opts.services.embed=!1)),callback(opts)}return Social}(),module.exports=Social}).call(void 0)},{"./config":61}],63:[function(require,module,exports){"use strict";(function(){var API,StreamLimiter,config,extend,hasProp,request;request=require("superagent"),API=require("../api"),config={baseURL:"https://streams.adobeprimetime.com/v1/"},extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return child},hasProp={}.hasOwnProperty,StreamLimiter=function(){function StreamLimiter(player,options){var endpoint;extend(config,options),this.accountId=config.accountId,this.baseURL=config.baseURL,this.player=player,endpoint=new API,endpoint.getProvidersByClient("watchespn-flash",function(_this){return function(error,providers){if(_this.mvpd=providers.filter(function(provider){return provider.abbreviation===config.mvpd})[0],_this.accountId&&_this.mvpd&&_this.mvpd.streamLimiting&&_this.mvpd.abbreviation)return _this.heartbeat=_this.mvpd.streamLimiting.heartbeat,_this.statusCheck=_this.mvpd.streamLimiting.statusCheck,_this.streamLimit=_this.mvpd.streamLimiting.streamLimit||3,_this.statusCheck.url=""+_this.baseURL+_this.mvpd.streamLimiting.context+"/"+_this.mvpd.abbreviation+"/accounts/"+_this.accountId+"/streams",request.post(_this.statusCheck.url).query({initiator:"ESPN",programmer:"ESPN"}).set("Accept","application/json").end(function(error,res){if(_this.streamId=res.body.streamId,_this.streamStart=res.body.streamStart,_this.heartbeat.url=res.body._links&&res.body._links.heartbeat&&res.body._links.heartbeat.href,_this.heartbeat.url)return _this.heartbeat.timeout=setTimeout(_this.sendHeartbeat.bind(_this),1e3*_this.heartbeat.initialDelay),void(_this.statusCheck.timeout=setTimeout(_this.sendStatusCheck.bind(_this),1e3*_this.statusCheck.initialDelay))})}}(this)),this.player.player().on("error",function(){var error=this.player.player().error();this.heartbeat.url&&["STREAM_LIMITED","STREAM_LIMIT_ERROR"].indexOf(error.message)===-1&&this.terminate()}.bind(this)),this.player.player().one("dispose",function(){this.heartbeat.url&&this.terminate()}.bind(this))}return StreamLimiter.prototype.accountId=void 0,StreamLimiter.prototype.mvpd={},StreamLimiter.prototype.heartbeat={},StreamLimiter.prototype.statusCheck={},StreamLimiter.prototype.streamLimit=3,StreamLimiter.prototype.streamId=null,StreamLimiter.prototype.streamStart=null,StreamLimiter.prototype.sendHeartbeat=function(){clearTimeout(this.heartbeat.timeout),this.heartbeat.timeout=setTimeout(function(_this){return function(){return request.post(_this.heartbeat.url.replace("{event}","alive")).end(function(error){return error&&_this.handleError(),_this.sendHeartbeat()})}}(this),1e3*this.heartbeat.interval)},StreamLimiter.prototype.sendStatusCheck=function(){clearTimeout(this.statusCheck.timeout),this.statusCheck.timeout=setTimeout(function(_this){return function(){return request.get(_this.statusCheck.url).query({programmer:"ESPN",status:"active"}).set("Accept","application/json").end(function(error,res){var rank;return error&&_this.handleError(),rank=_this.rankStreams(res.body._embedded&&res.body._embedded.streams),rank>_this.streamLimit?(_this.onLimitReached(_this.accountId),_this.terminate()):_this.sendStatusCheck()})}}(this),1e3*this.statusCheck.interval)},StreamLimiter.prototype.rankStreams=function(streams){return streams.reduce(function(_this){return function(previous,current){return current.streamStart>_this.streamStart?previous+1:previous}}(this),1)},StreamLimiter.prototype.errorCount=0,StreamLimiter.prototype.handleError=function(){if(this.errorCount++,this.errorCount>=3)return this.onError(this.accountId),this.terminate()},StreamLimiter.prototype.onLimitReached=function(accountId){this.player.error("STREAM_LIMITED"),this.player.player().trigger("espn.streamlimiter.limitreached",{accountId:accountId})},StreamLimiter.prototype.onError=function(accountId){this.player.error("STREAM_LIMIT_ERROR"),this.player.player().trigger("espn.streamlimiter.error",{accountId:accountId})},StreamLimiter.prototype.terminate=function(){clearTimeout(this.heartbeat.timeout),clearTimeout(this.statusCheck.timeout),request.post(this.heartbeat.url.replace("{event}","stop")).end(),this.errorCount=0,this.heartbeat={},this.statusCheck={},this.streamId=null,this.streamStart=null},StreamLimiter}(),StreamLimiter.configure=function(options){return extend(config,options),config},module.exports=StreamLimiter}).call(void 0)},{"../api":9,superagent:32}],64:[function(require,module,exports){"use strict";(function(){var TimelinePreviews;TimelinePreviews=function(){function TimelinePreviews(id,hls,player){var extension,i,image,numPreviews,path,previews,ref;if(hls){for(previews={},numPreviews=Math.floor(player.duration()/10),i=0,image=hls.split("/").pop(),path=hls.replace(image,"chaptertn"),ref=image.split("."),image=ref[0],extension="jpg";i<=numPreviews;)previews[""+10*i]={src:path+"/"+image+"_"+ ++i+"."+extension,width:"150px"};player.thumbnails(previews)}}return TimelinePreviews}(),module.exports=TimelinePreviews}).call(void 0)},{}],65:[function(require,module,exports){"use strict";(function(){module.exports={asset:"http://a.espncdn.com/broadband/video/images/espn-watermark.png",url:"http://www.espn.com",position:"bottom-left",start:"play",end:"end"}}).call(void 0)},{}],66:[function(require,module,exports){"use strict";(function(){var Watermark,config,extend,hasProp;extend=function(child,parent){var key;for(key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return child},hasProp={}.hasOwnProperty,config=require("./config"),Watermark=function(){function Watermark(callback,options){var content;options&&extend(config,options),content='<a href="'+config.url+'" target="_blank" class="espn-watermark"> <img src="'+config.asset+'" /> </a>',callback({content:content,align:config.position,start:config.start,end:config.end})}return Watermark}(),module.exports=Watermark}).call(void 0)},{"./config":65}]},{},[1])(1)}),function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(root,$,factory){"function"==typeof define&&define.amd?define(["video",factory]):"object"==typeof module&&module.exports?module.exports=factory($,window.espn||{}):(root.PLAYER=null,root.espn=root.espn||{},root.espn.video=factory($,root.espn))}(this,jQuery,function($,espn){function remove(playerId){espn.video.player&&espn.video.player.playerElement&&espn.video.player.playerElement.parentElement&&(espn.video.player.playerElement.parentElement.removeChild(espn.video.player.playerElement),PLAYER=null)}function doEmbed(options){return options=JSON.parse(JSON.stringify(options)),Util.isKindle&&(options.platform="player-image"),
"html5-video"===options.platform?(options.geoLocation=GEO_LOCATION,PLAYER=new HTML5VideoPlayer(options)):"player-image"===options.platform?(options.geoLocation=GEO_LOCATION,PLAYER=new PlayerImage(options)):(options.fallingBack=!0,options.geoLocation=GEO_LOCATION,PLAYER=new HTML5VideoPlayer(options)),espn.video.player=PLAYER,options.callback&&options.callback(PLAYER),PLAYER}function playOnce(){var callbackHandler,playWrapper=function(){espn.video.play(),$.unsubscribe(callbackHandler)};callbackHandler=$.subscribe("espn.video.ready",playWrapper)}function play(id,options,userInitiated){if(options=options||{},options.id=id||null,options.userInitiated=userInitiated||null,options.userInitiated&&playOnce(),!PLAYER)return espn.video.embed(options);if(options.id){if(options.id!==PLAYER.clip.id||!PLAYER.getAutoPlay())return espn.video.embed(options);PLAYER.playVideo()}else PLAYER.playVideo()}function embed(options,done){options=options||{},options.platform=options.platform||Util.getDefaultPlatform();var p=null;return isGeoReady?(p=doEmbed(options),"function"==typeof done&&done(p)):$.subscribe("espn.video.locationReady",function(){isGeoReady=!0,p=doEmbed(options),"function"==typeof done&&done(p)}),p}function pause(){PLAYER.pauseVideo()}function skipAd(){PLAYER.skipAd()}function subscribe(topic,handler){return $.subscribe(topic,handler)}function embeddedPlay(){function startPlaylistVideo($video,userInitiated){var videoId=$.parseUri($video.attr("href")).queryKey.id||null,options=$video.metadata(),info=$video.siblings("span").html();null!==info&&$("#videoInfo").html(info),options.endCard=options.endCard||"false",($video.parent().hasClass("last")||$playlist.children("li").length<=1)&&(options.endCard="true"),"undefined"==typeof options.playRelatedExternally&&(options.playRelatedExternally="false"),"true"==options.playRelatedExternally&&(advance=!1,options.endCard="true"),$("div.videoplayer").addClass("videoplayer-show"),espn.video.play(videoId,options,userInitiated)}function advancePlaylist($item,userInitiated){$item.addClass("active").siblings().removeClass("active"),$item.next().addClass("next").siblings().removeClass("next"),0===$item.next().length&&$(".video-player").hasClass("next")&&($(".mod-video-playlist").hide(),$(".video-player").removeClass("with-playlist")),startPlaylistVideo($item.find("a"),userInitiated)}var playlistEndHandle,$currentItem,advance=!0,$first=$("#videotoplay"),$playlist=$(".mod-video-playlist ul");startPlaylistVideo($first,!1),$playlist.children("li").bind("click",function(e){e.preventDefault(),advance=!0,$currentItem=$(this),advancePlaylist($currentItem,!0)}),playlistEndHandle=$.subscribe("espn.video.complete",function(){advance&&($currentItem=$playlist.find("li.active"),$currentItem.next().length>0&&advancePlaylist($currentItem.next(),!1))})}function insertAd(adParams,cms){var adSet=adParams.adSet||"espn";adParams.SWID=$.cookie("SWID")||"",adParams.FRMSegment=common.AD_SEGMENTS(),"string"==typeof adParams.siteSection&&(adParams.fw_site_section_id=adParams.siteSection,delete adParams.siteSection),"string"==typeof adParams.videoID&&(adParams.videoId=adParams.videoID,delete adParams.videoID);var pointer=(adParams.trackingName||adParams.playerType||adParams.player||null,$.subscribe("espn.video.ready",function(){espn.video.player.playerElement.setModuleParams({"freewheel-ads-manager":adParams});try{pcode=OoyalaData.OOYALA_SETTINGS.espn.pcode,espn.video.player.playerElement.setQueryStringParameters({playerBrandingId:OoyalaData.OOYALA_SETTINGS[adSet].adPlayerBrandingId,adSetCode:OoyalaData.ADInfo.adSets[pcode][adSet],"thruParam_espn-ui[autoPlay]":"true","thruParam_espn-ui[endCard]":"false"})}catch(e){}$.unsubscribe(pointer)}));espn.video.player=PLAYER=new OoyalaPlayer(adParams,GEO_LOCATION,(!1))}var OoyalaData=function(){return{OOYALA_SETTINGS:{},applicationGUIDs:{soccerfc:{domestic:"20879ce0-ad85-4acf-b0b4-f4a91a6c1517",international:"e723ef32-c3ff-4bdb-b5b3-9fe2ca1b96ba"},espn:{domestic:"85957be9-026a-415e-a8ce-7bfdc19d5e23",international:"85957be9-026a-415e-a8ce-7bfdc19d5e23"},deportes:{domestic:"94cf98b3-19cf-4c12-9305-15e5b07488bd",international:"94cf98b3-19cf-4c12-9305-15e5b07488bd"},cricinfo:{domestic:"681b074f-2ced-4a68-a0dc-9b1465c855bd",international:"6ffb1a11-c953-4127-bd27-f2296fec5aa7"}},ADInfo:{}}}(),common={OOYALA_SETTINGS:"undefined"!=typeof OoyalaData?OoyalaData.OOYALA_SETTINGS:{},ADInfo:"undefined"!=typeof OoyalaData?OoyalaData.ADInfo:{},countryMap:{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"},IMG_REF:"https:"===window.location.protocol?"https://secure.espncdn.com":"http://a.espncdn.com",COOKIE_HOST:"www.espn.com",AD_SEGMENTS:window.espn&&window.espn.core&&window.espn.core.ad_segments,CMS_INFO:{espn:{videohub:"//www.espn.com/video",useExternalIdFilter:!1},deportes:{videohub:"//espndeportes.espn.com/videohub/video/indexDeportes",useExternalIdFilter:!1},intl:{videohub:"//espnfc.com/video/espnfc/index",useExternalIdFilter:!0},cric:{videohub:"//espncric.com/",useExternalIdFilter:!1}}},Util=function(common){function getP13AutoStart(callback){espn.fanapi?jQuery.when(espn.fanapi.getAsP13n()).done(function(p13n){if(p13n&&p13n.mySettings){if(P13N_VIDEO_AUTOSTART=p13n.mySettings.videoAutoStart,!callback)return p13n.mySettings.videoAutoStart;callback(p13n.mySettings.videoAutoStart)}}).fail(function(){callback&&callback()}):espn.p13n&&espn.p13n.get({success:function(p13n){try{if(p13n&&p13n.mySettings){if(P13N_VIDEO_AUTOSTART=p13n.mySettings.videoAutoStart,!callback)return p13n.mySettings.videoAutoStart;callback(p13n.mySettings.videoAutoStart)}}catch(e){}},error:function(){}})}function getVideoPlaylistInfo(videoPlaylist,mobilePath,async,callback){for(var cmsAndIds="",i=0;i<videoPlaylist.videos.length;i++)for(var key in videoPlaylist.videos[i]){var replace={id:key,cms:videoPlaylist.videos[i][key].cms,url:videoPlaylist.videos[i][key].url};cmsAndIds+="id="+replace.cms+":"+key+"&",videoPlaylist.videos[i]=replace;break}if(mobilePath){var analyticsParams="",deviceParam="desktop",rsid="wdgespvideo,wdgespge",site="espn",baseUrl="http://www.espn.com/videohub/video/util/getMinifiedClipJsonById?";isMobile?deviceParam="mobile":(isIpad||isAndroid)&&(deviceParam="tablet"),"undefined"!=typeof window.s_account&&(rsid=window.s_account+","+rsid),analyticsParams+="&omniReportSuite="+rsid,"undefined"!=typeof window.omniSite&&(site=Analytics.getSiteSection(window.omniSite)),analyticsParams+="&siteSection="+site,analyticsParams+="&trackingName="+encodeURIComponent(Analytics.getTrackingName()),$.ajax({url:baseUrl+cmsAndIds+"device="+deviceParam+analyticsParams,async:async,success:function(response){callback&&callback(response)}})}return videoPlaylist}function hasFlashAndUsable(){var hasFlash=!1;try{var fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");fo&&(hasFlash=!0)}catch(e){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(hasFlash=!0)}return hasFlash}function fullScreenRequest(elem){elem.requestFullscreen?elem.requestFullscreen():elem.msRequestFullscreen?elem.msRequestFullscreen():elem.mozRequestFullScreen?elem.mozRequestFullScreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.webkitEnterFullScreen&&elem.webkitEnterFullScreen()}function autoPlayHelper(options){options=options||{};var autoplay=!0,vasCookie=(document.cookie.match(/VAS=([^;]+)/)||[])[1];vasCookie&&(autoplay=convertToBoolean(vasCookie)),espn.video.autoplay=autoplay,getP13AutoStart(function(autoStart){autoStart&&(autoplay="2"!==autoStart),espn.video.autoplay=autoplay,options.callback&&options.callback(autoplay)})}function isForceHTML5(){var forceHTML5=/(^|; )espn.html5=1/.test(document.cookie);return forceHTML5}function getGeoLocation(cbk){cbk=cbk||$.noop;var validateGeoLocationAndReturn=function(loc){if(!loc)return cbk(new Error("failed to lookup valid geolocation"));var geoLocation=Util.getGeoLocationFromGeoService(loc);return geoLocation?void cbk(null,geoLocation):cbk(new Error("failed to determine geolocation"))},ifFail=function(){var country=(document.cookie.match(/country=([^;]+)/)||[])[1]||"us";validateGeoLocationAndReturn(Util.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:(country+"").toUpperCase()}}))};window.espn&&window.espn.geo&&window.espn.geo.getLocation?espn.geo.getLocation().done(validateGeoLocationAndReturn).fail(function(){espn.geo.promise=null,espn.geo.getLocation().done(validateGeoLocationAndReturn).fail(ifFail)}):ifFail()}function getGeoLocationFromGeoService(loc){var isoCodeAlpha3=null;loc.country&&loc.country.isoCode&&(isoCodeAlpha3=loc.country.isoCode.toUpperCase());var isoCodeAlpha2=loc.country.isoCodeAlpha2;return isoCodeAlpha3&&!isoCodeAlpha2&&countryMap&&(isoCodeAlpha2="string"==typeof countryMap[isoCodeAlpha3]?countryMap[isoCodeAlpha3].toLowerCase():isoCodeAlpha3.substring(0,2).toLowerCase()),loc.country.isoCodeAlpha2=isoCodeAlpha2,loc}function getDefaultPlatform(){var defaultPlatform="ooyala";return(this.isMobile||this.isIpad||this.isAndroid)&&(defaultPlatform=this.canPlayVideo?"html5-video":"player-image"),isForceHTML5()&&(defaultPlatform="html5-video"),defaultPlatform}function convertToBoolean(val){var type=typeof val;return"boolean"!==type&&("string"===type&&isNaN(val)?val="true"===val:(val=parseInt(val),val=1===val)),val}function checkMemHasVideo(){return checkMemHasVideo._cache||(checkMemHasVideo._cache=!1,"object"==typeof espn.mem&&"boolean"==typeof espn.mem.hasVideo&&(checkMemHasVideo._cache=espn.mem.hasVideo)),checkMemHasVideo._cache}function getBusinessUnit(cms){return"deportes_dev"==cms||"deportes_qa"==cms?"deportes":"cric"==cms||"cric_qa"==cms||"cric_dev"==cms||"cricinfo"==cms||"cricinfo_qa"==cms||"cricinfo_dev"==cms?"cricinfo":"intl"==cms||"intl_dev"==cms||"intl_qa"==cms?"soccerfc":cms}function cleanDimension(dim){return"default"==dim?null:dim?(dim+="",/\d{2,3}%/.test(dim)?dim:dim.replace(/\D/g,"")+"px"):null}function getCMSFromTrackingName(trackingName){var cms="espn";return trackingName.search(/deportes/i)>-1?cms="deportes":trackingName.search(/intl/i)>-1&&(cms="intl"),cms}var canPlayVideo=function _v(){return _v._cache||(_v._cache=document.createElement("video")),!!_v._cache.canPlayType}(),isIpad=function _i(){return _i._cache||(_i._cache=/iPad/i.test(window.navigator.userAgent)||/Mini/i.test(window.navigator.userAgent)),_i._cache}(),isAndroid=function _a(){return _a._cache||(_a.cache=navigator.userAgent.match(/Android/g)),_a.cache}(),isKindle=function _k(){return _k._cache||(_k.cache=navigator.userAgent.match(/Silk/g)),_k.cache}(),needsClickToPlay=function _nCTP(){return _nCTP._cache||(_nCTP.cache=navigator.userAgent.match(/Nexus 4/g)&&navigator.userAgent.match(/Android 4.2/g)),_nCTP.cache}(),P13N_VIDEO_AUTOSTART=null,isMobile=!1,isTablet=!1;navigator.userAgent.match(/Mobi/)?navigator.userAgent.match(/iPad/)?isTablet=!0:isMobile=!0:navigator.userAgent.match(/Tab/)?isTablet=!0:navigator.userAgent.match(/Android/)?isTablet=!0:navigator.userAgent.match(/Touch/)&&navigator.userAgent.match(/IE/)&&(isTablet=!0),/[?&]html5=false/.test(window.location.search)?document.cookie="espn.html5=0; path=/; domain=espn.com":/[?&]html5=./.test(window.location.search)&&(document.cookie="espn.html5=1; path=/; domain=espn.com");var countryMap=common.countryMap||{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"};return{canPlayVideo:canPlayVideo,isIpad:isIpad,isMobile:isMobile,isAndroid:isAndroid,isKindle:isKindle,needsClickToPlay:needsClickToPlay,autoPlayHelper:autoPlayHelper,getP13AutoStart:getP13AutoStart,getGeoLocation:getGeoLocation,getGeoLocationFromGeoService:getGeoLocationFromGeoService,getDefaultPlatform:getDefaultPlatform,fullScreenRequest:fullScreenRequest,convertToBoolean:convertToBoolean,checkMemHasVideo:checkMemHasVideo,getBusinessUnit:getBusinessUnit,cleanDimension:cleanDimension,hasFlashAndUsable:hasFlashAndUsable,getVideoPlaylistInfo:getVideoPlaylistInfo,getCMSFromTrackingName:getCMSFromTrackingName,requiresFlashUpgrade:navigator.userAgent.indexOf("Safari/537.76.4")!==-1&&navigator.userAgent.indexOf("Version/7")!==-1&&"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("14.0.0")||"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("10.0.0"),requiresFlashDownload:"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("0.0.1")}}("undefined"!=typeof common?common:{});"object"==typeof module&&module.exports&&(module.exports=Util);var Analytics=function(Util){function getSiteSection(str){var s=str.split(":").slice(0,3).join(":"),i=s.indexOf(":videoid");return i===-1?s:s.substr(0,i)}function getOmnitureAccount(str){var result=[];if("string"==typeof str){var accounts=str.split(","),exclude=["wdgespge","wdgespvideo","wdgespinternational","wdgesptest"];$.each(accounts,function(i,value){$.inArray(value,exclude)===-1&&result.push(value)})}return result.join(",")||null}function getTrackingName(){return window.omniTrackingName||null}function getOmniSite(){return window.omniSite||null}return{getSiteSection:getSiteSection,getOmnitureAccount:getOmnitureAccount,getTrackingName:getTrackingName,getOmniSite:getOmniSite}}(Util),Clip=function(common,Util,Analytics){function Clip(options){function loadAPIClip(options,handleErrors,cbk){var analyticsParams="",deviceParam="desktop",rsid="wdgespvideo,wdgespge",site="espn";Util.isMobile||options.fallingBack?deviceParam="mobile":(Util.isIpad||Util.isAndroid)&&(deviceParam="tablet"),"undefined"!=typeof window.s_account&&(rsid=window.s_account+","+rsid),analyticsParams+="&omniReportSuite="+rsid,"undefined"!=typeof window.omniSite&&(site=Analytics.getSiteSection(window.omniSite)),analyticsParams+="&siteSection="+site,analyticsParams+="&trackingName="+encodeURIComponent(Analytics.getTrackingName());var protocol="file:"===window.location.protocol?"http:":window.location.protocol,endpoint=protocol+"//www.espn.com/videohub/video/util/getMinifiedClipJsonById?id="+options.id+"&cms="+cms+"&device="+deviceParam+analyticsParams;return"https:"===protocol&&(endpoint+="&secure=true"),options={method:"GET",url:endpoint,success:function(data){convertAPIClip(data),(cbk||$.noop)()},error:handleErrors},"undefined"!=typeof espn_ui&&espn_ui.ie8&&(options.dataType="jsonp",options.jsonpCallback="videoapi"),$.ajax(options)}function loadCerebroClip(options,handleErrors,cbk){var endpoint="https://watch.auth.api.espn.com/video/auth/getclip/"+options.cerebroId;return $.ajax({method:"GET",data:{apikey:"5p8m6dw513q716wt2os04mec3"},url:endpoint,success:function(data){convertCerebroClip(data),(cbk||$.noop)()},error:handleErrors})}function convertAPIClip(obj){if(obj.videos&&obj.videos.length>0){var apiClip=obj.videos[0];if(id=apiClip.id,timeRestrictions.embargoDate=apiClip.timeRestrictions.embargoDate,timeRestrictions.expirationDate=apiClip.timeRestrictions.expirationDate,posterImages&&posterImages.full&&posterImages.full.href&&""!==posterImages.full.href.trim||(posterImages.full.href=apiClip.posterImages.full.href),"object"==typeof apiClip.geoRestrictions&&(geoRestrictions.type=apiClip.geoRestrictions.type,geoRestrictions.countries=apiClip.geoRestrictions.countries),apiClip&&apiClip.links&&"object"==typeof apiClip.links.mobile&&(apiClip.links.mobile.href?links.mobile.href=apiClip.links.mobile.href:apiClip.links.source.full.href&&(links.mobile.href=apiClip.links.source.full.href),apiClip.links.mobile.omniHref&&(links.mobile.omniHref=apiClip.links.mobile.omniHref.replace(/.m.espn/,"")),Util.isIpad&&apiClip.links.source&&apiClip.links.source.HLS&&(links.mobile.href=apiClip.links.source.HLS.href),links.mobile.href&&options.siteSection&&links.mobile.href.match(/unicorn/))){var sep=links.mobile.href.indexOf("?")!==-1?"&":"?";links.mobile.href+=sep+"UMADPARAMcsid="+options.siteSection}}else $.publish("espn.video.unavailable",[this,"Clip not found"])}function convertCerebroClip(response){var cerebroClip=response.clip;if(cerebroClip){guid=cerebroClip._id,timeRestrictions.embargoDate=cerebroClip.videoRights.embargoDate,timeRestrictions.expirationDate=cerebroClip.videoRights.expirationDate,posterImages&&posterImages.full&&posterImages.full.href&&""!==posterImages.full.href.trim||(posterImages.full.href=common.IMG_REF+cerebroClip.mezzaninePathImage);var type=cerebroClip.videoRights.geoTargetType;"inclusion"===type&&(type="whitelist"),"exclusion"===type&&(type="blacklist"),geoRestrictions.type=type;var countries=cerebroClip.videoRights.geoTargets;"[object Array]"===Object.prototype.toString.call(countries)&&(geoRestrictions.countries=countries);var businessUnit=Util.getBusinessUnit(cms);"object"==typeof cerebroClip.syndicationDetails[businessUnit]&&("object"==typeof cerebroClip.syndicationDetails[businessUnit].cms&&(id=cerebroClip.syndicationDetails[businessUnit].cms.syndicationId),"object"==typeof cerebroClip.syndicationDetails[businessUnit].brightcove?links.mobile.href=cerebroClip.syndicationDetails[businessUnit].brightcove.url:"object"==typeof cerebroClip.syndicationDetails[businessUnit].ooyala&&(links.mobile.href=cerebroClip.syndicationDetails[businessUnit].ooyala.url),"object"==typeof cerebroClip.syndicationDetails[businessUnit].ooyala&&(ooyalaId=cerebroClip.syndicationDetails[businessUnit].ooyala.syndicationId))}}function isExpired(){return Date.parse(timeRestrictions.expirationDate)<Date.parse((new Date).toGMTString())}function isEmbargoed(){return Date.parse(timeRestrictions.embargoDate)>Date.parse((new Date).toGMTString())}function isGeoRestricted(geoLocation){var geoRestricted=!1,type=geoRestrictions.type,countries=geoRestrictions.countries;if(countries.length>0){var country,currentCountry=geoLocation.country.isoCodeAlpha2;if(currentCountry){currentCountry=currentCountry.toLowerCase(),"whitelist"===type?geoRestricted=!0:"blacklist"===type&&(geoRestricted=!1);for(var i=0,len=countries.length;i<len;i++)if(country=countries[i].toLowerCase(),country===currentCountry){"whitelist"===type?geoRestricted=!1:"blacklist"===type&&(geoRestricted=!0);break}}else geoRestricted=!0}return geoRestricted}function getRestrictions(){var response={};if(response.status="success",response.data="",isExpired())response.status="fail",response.message="This video is no longer available";else if(isEmbargoed())response.status="fail",response.message="This video is not yet available";else if(isGeoRestricted(geoLocation)){response.status="fail";var isoCodeAlpha2=geoLocation.country.isoCodeAlpha2;response.message="This video is not authorized for your location","string"==typeof isoCodeAlpha2&&(response.message+=" ("+isoCodeAlpha2.toUpperCase()+")")}return response}options=options||{};var id=options.id||null,guid=options.guid||null,ooyalaId=null,cms=options.cms||null,geoLocation=(options.cms||null,options.geoLocation||{}),timeRestrictions={embargoDate:null,expirationDate:null},geoRestrictions={type:null,countries:[]},posterImages={full:{href:options.thumbnailURL}},links={mobile:{href:null,omniHref:null}};this.loadAPIClip=loadAPIClip,this.loadCerebroClip=loadCerebroClip,this.id=id,this.guid=guid,this.ooyalaId=ooyalaId,this.links=links,this.posterImages=posterImages,this.isExpired=isExpired,this.isEmbargoed=isEmbargoed,this.isGeoRestricted=isGeoRestricted,this.getRestrictions=getRestrictions}return Clip}(common,Util,Analytics),Player=function(common,Util,Clip,OoyalaData){function Player(){this.isPlaying=!1,this.playerReady=!1,this.playType=null,this.playVerified=!1,this.autoPlay=!1,this.autoClose=!0,this.width=null,this.height=null,this.cms=null,this.clip=null,this.targetReplaceId=null,this.targetElement=null,this.$targetElement=null,this.$container=null,this.playerElement=null,this.$playerElement=null,this.onErrorBehavior=null,this.hasPlaylist=null,this.videoPlaylist=null,this.currentIndex=null,this.originalIndex=null,this.playlistPasses=0,this.useExternalIdFilter=null,this.iterationCount=1,this.currentPlayingId=null,this.showPoster=!1,this.setDefaults=function(options){options=options||{},this.playType=null,this.autoPlay=this.getAutoPlay(options),options.height=options.height||"default",options.width=options.width||"default",this.height=Util.cleanDimension(options.height),this.width=Util.cleanDimension(options.width),this.cms=options.cms||"espn",options.cms=this.cms,options.playerBrandingId&&(this.playerBrandingId=options.playerBrandingId),this.clip=new Clip(options),this.hasPlaylist=!!options.videoPlaylist,this.videoPlaylist=this.hasPlaylist?Util.getVideoPlaylistInfo(options.videoPlaylist):null,this.currentIndex=this.hasPlaylist&&options.videoPlaylist.startIndex?options.videoPlaylist.startIndex:0,this.currentPlayingId=this.hasPlaylist?this.videoPlaylist.videos[this.currentIndex].id:null,this.originalIndex=this.currentIndex,this.hasPlaylist&&options.videoPlaylist.iterationCount&&(this.iterationCount=options.videoPlaylist.iterationCount),this.targetReplaceId=options.targetReplaceId||"videoPlayer";var $container,$targetElement=$("#"+this.targetReplaceId);0===$targetElement.length?($container=$(".videoplayer")||$("body"),$container.html('<div id="'+this.targetReplaceId+'"></div>'),$targetElement=$("#"+this.targetReplaceId)):$container=$targetElement.parent(),this.$targetElement=$targetElement,this.$container=$container,Util.checkMemHasVideo()&&$container.addClass("videoplayer-show"),this.targetElement=document.getElementById(this.targetReplaceId),$.publish("espn.video.container.ready",[this.$container]),$.publish("espn.video.targetReady",[this.targetReplaceId]),this.playerElement=null,$playerElement=null,onErrorBehavior=options.onErrorBehavior||"default","undefined"!=typeof options.useExternalIdFilter?this.useExternalIdFilter=options.useExternalIdFilter:this.useExternalIdFilter=common.CMS_INFO[this.cms].useExternalIdFilter,"boolean"==typeof options.showPoster&&(this.showPoster=options.showPoster)},this.handleErrors=function(message){if($.publish("espn.video.unavailable",[this,message]),"message"===onErrorBehavior)this.displayError(message);else if("image"===this.onErrorBehavior){var w="default"==this.width?"":this.width,h="default"==this.height?"":this.height;$("#"+this.targetReplaceId).replaceWith('<img id="'+this.targetReplaceId+'" src="'+this.clip.posterImages.full.href+'" width="'+w+'" height="'+h+'" />')}else"hide"===this.onErrorBehavior&&$("#"+this.targetReplaceId).hide()},this.displayError=function(message){message="string"==typeof message?message+"<br />":"";var w="default"==this.width?"":this.width,h="default"==this.height?"":this.height,$container=$('<div id="'+this.targetReplaceId+'" class="imageHolder"></div>').css("position","relative"),$imgObj=$('<img src="'+this.clip.posterImages.full.href+'" width="'+w+'" height="'+h+'">');$container.append($imgObj);var $messObj=$('<div class="message">CONTENT UNAVAILABLE: '+message+"</div>").css({"font-family":"klavika, arial, sans-serif","font-size":"24px","text-decoration":"none","text-align":"center",position:"absolute",width:"100%",top:"50%",color:"#FFF","text-shadow":"black 0.1em 0.1em 0.2em"});$container.append($messObj);var videoHub=common.CMS_INFO[this.cms].videohub;$container.css("cursor","pointer").click(function(){window.location.href=videoHub}),$("#"+this.targetReplaceId).replaceWith($container)},this.setAutoPlay=function(aPlay){this.autoPlay=aPlay;var num=this.autoPlay?"1":"2";if(window.location.hostname.match(/\.espn\.com$/)){var _i=new Image;_i.src="http://"+common.COOKIE_HOST+"/personalization/setAutoStart?vasPref="+num+"&rand="+new Date}else espn.cookie.set("VAS",num,366);espn.fanapi?espn.fanapi.updateProfile({settings:{videoAutoStart:{value:num.toString()}}},{success:function(){},error:function(){}}):espn.p13n&&espn.p13n.update({mySettings:{videoAutoStart:num}},{success:function(){},error:function(){}})},this.getAutoPlay=function(options,p13nVideoAutoStart,callback){options=options||{},options.autoPlay=options.autoPlay||options.autoplay||options.autostart||options.autoStart||null,options.callback=callback,Util.autoPlayHelper(options)},this.getClipUrl=function(clipUrl,cms,geoLocation){var businessUnit=Util.getBusinessUnit(this.cms);return clipUrl&&(clipUrl=geoLocation.country&&geoLocation.country.isoCodeAlpha2&&"US"!=geoLocation.country.isoCodeAlpha2.toUpperCase()?clipUrl.replace(OoyalaData.applicationGUIDs[businessUnit].domestic,OoyalaData.applicationGUIDs[businessUnit].international):clipUrl.replace(OoyalaData.applicationGUIDs[businessUnit].international,OoyalaData.applicationGUIDs[businessUnit].domestic)),clipUrl},this.getPlayType=function(options,callback){if(options.playType&&callback)callback(options.playType);else{var setPlayType=function(value){var type=value?"autoplay":"manual";callback&&callback(type)};options.autoPlay?setPlayType(options.autoPlay):this.getAutoPlay(options,null,setPlayType)}},this.getOmniClipUrl=function(clipUrl,cms,geoLocation){var businessUnit=Util.getBusinessUnit(this.cms);return clipUrl&&(clipUrl=geoLocation.country&&geoLocation.country.isoCodeAlpha2&&"US"!=geoLocation.country.isoCodeAlpha2.toUpperCase()?clipUrl.replace(OoyalaData.applicationGUIDs[businessUnit].domestic,OoyalaData.applicationGUIDs[businessUnit].international):clipUrl.replace(OoyalaData.applicationGUIDs[businessUnit].international,OoyalaData.applicationGUIDs[businessUnit].domestic)),clipUrl},this.skipAd=function(){},this.pauseVideo=function(){}}return Player}(common,Util,Clip,OoyalaData),isClipId=function(id){return/^[0-9]*$/.test(id)||"string"==typeof id&&id.indexOf(":")!==-1},HTML5VideoPlayer=function(Player,Util,common){function HTML5VideoPlayer(options){function init(url,imageUrl){if(!url&&context.clip&&context.clip.links&&context.clip.links.mobile&&context.clip.links.mobile.href){$.publish("espn.video.embed.begin");var restrictions=context.clip.getRestrictions();if("fail"===restrictions.status)return void context.handleErrors(restrictions.message);setupHTML(context.getClipUrl(context.clip.links.mobile.href,context.cms,geoLocation),context.clip.posterImages.full.href)}else url?setupHTML(url,imageUrl):context.handleErrors("")}function setupHTML(url,imageUrl){if(context.$playerElement=context.$playerElement||$("<video>"),!Util.needsClickToPlay&&context.$playerElement.get(0)&&context.$playerElement.get(0).pause(),context.$playerElement.attr("id",context.targetReplaceId),context.$playerElement.attr("src",url),context.$playerElement.attr("autobuffer","autobuffer"),context.$playerElement.attr("controls","controls"),Util.isMobile&&!context.showPoster||context.$playerElement.attr("poster",imageUrl),context.$playerElement.css({width:context.width,height:context.height}),context.$playerElement.promise().done(registerEvents()),context.$targetElement.replaceWith(context.$playerElement),context.$targetElement=context.$playerElement,Util.needsClickToPlay||$("#"+context.targetReplaceId)[0].play(),context.$playerElement.bind("webkitendfullscreen",exit),context.$playerElement.bind("contextmenu",function(){return!1}),Util.isAndroid||Util.needsClickToPlay){var raw=context.$playerElement[0];context.$playerElement.click(function(){played&&!paused||Util.fullScreenRequest(raw)}),$(document).on("webkitfullscreenchange",function(){document.webkitIsFullScreen||raw.pause()}),$(document).on("mozfullscreenchange",function(){document.mozFullScreen||raw.pause()}),$(document).on("fullscreenchange",function(){document.fullscreen||raw.pause()})}}function makeBackgroundOmniRequest(options){setTimeout(function(){context.clip.loadAPIClip(options,context.handleErrors.bind(context),function(){if(context.clip&&context.clip.links&&context.clip.links.mobile&&context.clip.links.mobile.omniHref){var omniHref=context.clip.links.mobile.omniHref,appVisitorId=$.cookie("viAppId");if(null!==appVisitorId&&(omniHref+="&vid="+appVisitorId),"undefined"!=typeof s_omni&&"undefined"!=typeof s_omni.visitor&&s_omni.visitor.getAnalyticsVisitorID()){
var aid=s_omni.visitor.getAnalyticsVisitorID();omniHref+="&aid="+aid}var _i=new Image;_i.src=omniHref+"&rand="+ +new Date,context.hasTracked=!0}})})}function playVideo(){try{context.$playerElement[0].play()}catch(e){}}function pauseVideo(){try{context.$playerElement[0].pause()}catch(e){}}function switchVideo(options){options=options||{},context.hasPlaylist?(context.currentIndex=context.currentIndex+1>=context.videoPlaylist.videos.length&&context.videoPlaylist.continuous?0:context.currentIndex+1,context.currentIndex===context.originalIndex&&context.playlistPasses++,context.currentIndex<context.videoPlaylist.videos.length&&context.playlistPasses<context.iterationCount&&(options.id=context.videoPlaylist.videos[context.currentIndex].id,context.clip=new Clip(options),context.clip.loadAPIClip(options,context.handleErrors.bind(context),init))):(pauseVideo(),options.id?context.clip.loadAPIClip(options,context.handleErrors.bind(context),function(){changeSource(this)}):options.cerebroId?context.handleErrors("switching by cerebro id not yet enabled"):context.handleErrors("no clip id specified"),Util.checkMemHasVideo()&&context.$container.addClass("videoplayer-show"))}function changeSource(){context.$playerElement.attr("src",context.clip.links.mobile.href),context.$playerElement.attr("poster",context.clip.posterImages.full.href);var changeType="switch";$.publish("espn.video.embedCodeChanged",[changeType]),$.publish("espn.video.switch",[context.autoPlay,context.clip.id,context.clip.posterImages.full.href])}function handleEvents(data){var eventName=data.type;switch(eventName){case"canplay":context.playerReady=!0,context.state="ready",$.publish("espn.video.ready",[data,context.targetReplaceId,eventName,"espn.video.ready",context.currentPlayingId]),$.publish("espn.video.init",[data,context.targetReplaceId,eventName,"espn.video.init",context.currentPlayingId]);var changeType="init";$.publish("espn.video.embedCodeChanged",[changeType]);break;case"ended":$.publish("espn.video.complete",[data,context.targetReplaceId,eventName]),context.$playerElement&&context.autoClose&&"function"==typeof context.$playerElement[0].webkitExitFullScreen&&context.$playerElement[0].webkitExitFullScreen(),context.hasPlaylist&&switchVideo();break;case"error":context.handleErrors(),context.state="error",$.publish("espn.video.error",[data,playerId]);break;case"loadstart":context.playerElement=document.getElementById(context.targetReplaceId),context.playerElement&&(context.playerElement.onmouseover=function(){$.publish("espn.video.hoverIn")},context.playerElement.onmouseout=function(){$.publish("espn.video.hoverOut")});break;case"pause":context.state="paused",context.isPlaying=!1,$.publish("espn.video.pause",[data,context.targetReplaceId,eventName]);break;case"play":if(context.state="playing",context.isPlaying=!0,Util.isMobile&&context.$playerElement&&context.$playerElement[0]){var playerObj=context.$playerElement[0],requestFullScreen=playerObj.requestFullscreen||playerObj.webkitRequestFullscreen||playerObj.webkitEnterFullscreen;if("function"==typeof requestFullScreen)try{requestFullScreen.call(playerObj)}catch(e){}}if(!context.hasTracked)if(context.clip&&context.clip.links&&context.clip.links.mobile&&context.clip.links.mobile.omniHref){var omniHref=context.clip.links.mobile.omniHref,appVisitorId=$.cookie("viAppId");if(null!==appVisitorId&&(omniHref+="&vid="+appVisitorId),"undefined"!=typeof s_omni&&"undefined"!=typeof s_omni.visitor&&s_omni.visitor.getAnalyticsVisitorID()){var aid=s_omni.visitor.getAnalyticsVisitorID();omniHref+="&aid="+aid}var _i=new Image;_i.src=omniHref+"&rand="+ +new Date,context.hasTracked=!0}else context.inlineData&&makeBackgroundOmniRequest(context.inlineData);$.publish("espn.video.play",[data,context.targetReplaceId,eventName]);break;case"seeked":$.publish("espn.video.seeked",[data,context.targetReplaceId]);break;case"timeupdate":$.publish("espn.video.playheadTimeChanged",[data,context.targetReplaceId,eventName]);break;case"volumechange":$.publish("espn.video.volumeChanged",[data,context.targetReplaceId,eventName])}}function registerEvents(){for(var events=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","play","pause","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],i=0,len=events.length;i<len;i++)context.$playerElement.bind(events[i],events[i],handleEvents)}function exit(){try{var state=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,event=state?"FullscreenOn":"FullscreenOff";"FullscreenOff"==event&&(options&&options.removeOnClose?context.$playerElement.remove():$.publish("espn.video.videoClosed",[]))}catch(e){}}var context=this,paused=null,playerId=null;context.hasTracked=!1,options=options||{},context.setDefaults(options);var geoLocation=options.geoLocation;isClipId(options.id)||options.cerebroId||(options.cerebroId=options.id,delete options.id,options.cms||(options.cms="cric",context.cms="cric")),options.url?(setupHTML(options.url,options.imageUrl),context.inlineData=options):options.id?context.clip.loadAPIClip(options,context.handleErrors.bind(context),init):options.cerebroId?context.clip.loadCerebroClip(options,context.handleErrors.bind(context),init):options.videoPlaylist?context.videoPlaylist.videos[context.currentIndex].url?(options.id=context.videoPlaylist.videos[context.currentIndex].id,context.clip.loadAPIClip(options,context.handleErrors.bind(context),init)):(options.id=context.videoPlaylist.videos[context.currentIndex].id,context.clip.loadAPIClip(options,context.handleErrors.bind(context),init)):init(),context.$playerElement=context.$playerElement||$("<video>"),Util.needsClickToPlay||context.$playerElement[0].play(),this.switchVideo=switchVideo,this.playVideo=playVideo,this.pauseVideo=pauseVideo,this.exit=exit,this.state=null,this.ready=!1}return HTML5VideoPlayer.prototype=new Player,HTML5VideoPlayer}(Player,Util,common),PlayerImage=function(Player,common,Util){function PlayerImage(options){function init(){$.publish("espn.video.embed.begin");var restrictions=context.clip.getRestrictions();if("fail"===restrictions.status)return void context.handleErrors(restrictions.message);var w="default"==context.width?"":context.width,h="default"==context.height?"":context.height,$container=$('<div id="'+context.targetReplaceId+'"></div>'),$imageHolderParent=$('<div class="imageHolderParent"></div>'),$imageHolderChild=$('<div class="imageHolderChild"></div>'),$fauxPlayer=$('<div class="faux-player"></div>'),$fauxPlayerImage=$('<img src="'+context.clip.posterImages.full.href+'" class="faux-player-image" height="'+h+'" width="'+w+'"/>'),clipUrl=context.getClipUrl(context.clip.links.mobile.href,context.cms,geoLocation),link=clipUrl?clipUrl:common.CMS_INFO[context.cms].videohub,$fauxPlayerButton=$('<a class="faux-player-button" href="'+link+'" target="_blank"></a>');$container.css({display:"inline-block",width:w,height:h,overflow:"hidden"}),$imageHolderParent.css({display:"table"}),$imageHolderChild.css({display:"table-cell","vertical-align":"middle"}),$fauxPlayer.css({position:"relative"}),$fauxPlayerImage.css({display:"block","max-width":"100%","margin-left":"auto","margin-right":"auto",position:"relative","z-index":"10"}),$fauxPlayerButton.hover(function(){$(this).css({"background-position":"0px 0px"})},function(){$(this).css({"background-position":"0px -59px"})}),$fauxPlayerButton.css({"z-index":"20",top:"50%",left:"50%",color:"#FFF",cursor:"pointer",position:"absolute","font-family":"klavika, arial, sans-serif","font-size":"20px","text-decoration":"none","background-image":"url('"+common.IMG_REF+"/prod/assets/video/play-btn.png')","background-position":"0px -59px",width:"57px",height:"57px","margin-left":"-27.5px","margin-top":"-27.5px"}),$fauxPlayer.append($fauxPlayerImage),$fauxPlayer.append($fauxPlayerButton),$imageHolderChild.append($fauxPlayer),$imageHolderParent.append($imageHolderChild),$container.append($imageHolderParent),$("#"+context.targetReplaceId).replaceWith($container),Util.isKindle&&window.open(clipUrl)}var context=this;options=options||{};var geoLocation=options.geoLocation;context.setDefaults(options),options.id?context.clip.loadAPIClip(options,$.noop,init):options.cerebroId?context.clip.loadCerebroClip(options,$.noop,init):init()}return PlayerImage.prototype=new Player,PlayerImage}(Player,common,Util),isGeoReady=!1,GEO_LOCATION={country:{isoCode:null,isoCodeAlpha2:null}};return espn&&espn.geo&&espn.geo.getLocation&&espn.geo.getLocation().done(function(loc){GEO_LOCATION=Util.getGeoLocationFromGeoService(loc),isGeoReady=!0,$.publish("espn.video.locationReady")}).fail(function(){espn.geo.promise=null,espn.geo.getLocation().done(function(loc){GEO_LOCATION=Util.getGeoLocationFromGeoService(loc),isGeoReady=!0,$.publish("espn.video.locationReady")}).fail(function(){var countryCookie=$.cookie("country");"string"==typeof countryCookie&&(countryCookie=countryCookie.toUpperCase()),GEO_LOCATION=Util.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:countryCookie}}),isGeoReady=!0,$.publish("espn.video.locationReady")})}),Util.getP13AutoStart(),{player:PLAYER,embedded:{play:embeddedPlay},remove:remove,getAutoPlay:Util.autoPlayHelper,embed:embed,play:play,pause:pause,skipAd:skipAd,subscribe:subscribe,insertAd:insertAd}})},{}],2:[function(require,module,exports){(function(process,global){!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof _dereq_&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof _dereq_&&_dereq_,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function any(promises){var ret=new SomePromiseArray(promises),promise=ret.promise();return ret.setHowMany(1),ret.setUnwrap(),ret.init(),promise}var SomePromiseArray=Promise._SomePromiseArray;Promise.any=function(promises){return any(promises)},Promise.prototype.any=function(){return any(this)}}},{}],2:[function(_dereq_,module,exports){"use strict";function Async(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new Queue(16),this._normalQueue=new Queue(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var self=this;this.drainQueues=function(){self._drainQueues()},this._schedule=schedule}function AsyncInvokeLater(fn,receiver,arg){this._lateQueue.push(fn,receiver,arg),this._queueTick()}function AsyncInvoke(fn,receiver,arg){this._normalQueue.push(fn,receiver,arg),this._queueTick()}function AsyncSettlePromises(promise){this._normalQueue._pushOne(promise),this._queueTick()}var firstLineError;try{throw new Error}catch(e){firstLineError=e}var schedule=_dereq_("./schedule"),Queue=_dereq_("./queue"),util=_dereq_("./util");Async.prototype.setScheduler=function(fn){var prev=this._schedule;return this._schedule=fn,this._customScheduler=!0,prev},Async.prototype.hasCustomScheduler=function(){return this._customScheduler},Async.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},Async.prototype.disableTrampolineIfNecessary=function(){util.hasDevTools&&(this._trampolineEnabled=!1)},Async.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},Async.prototype.fatalError=function(e,isNode){isNode?(process.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),process.exit(2)):this.throwLater(e)},Async.prototype.throwLater=function(fn,arg){if(1===arguments.length&&(arg=fn,fn=function(){throw arg}),"undefined"!=typeof setTimeout)setTimeout(function(){fn(arg)},0);else try{this._schedule(function(){fn(arg)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},util.hasDevTools?(Async.prototype.invokeLater=function(fn,receiver,arg){this._trampolineEnabled?AsyncInvokeLater.call(this,fn,receiver,arg):this._schedule(function(){setTimeout(function(){fn.call(receiver,arg)},100)})},Async.prototype.invoke=function(fn,receiver,arg){this._trampolineEnabled?AsyncInvoke.call(this,fn,receiver,arg):this._schedule(function(){fn.call(receiver,arg)})},Async.prototype.settlePromises=function(promise){this._trampolineEnabled?AsyncSettlePromises.call(this,promise):this._schedule(function(){promise._settlePromises()})}):(Async.prototype.invokeLater=AsyncInvokeLater,Async.prototype.invoke=AsyncInvoke,Async.prototype.settlePromises=AsyncSettlePromises),Async.prototype.invokeFirst=function(fn,receiver,arg){this._normalQueue.unshift(fn,receiver,arg),this._queueTick()},Async.prototype._drainQueue=function(queue){for(;queue.length()>0;){var fn=queue.shift();if("function"==typeof fn){var receiver=queue.shift(),arg=queue.shift();fn.call(receiver,arg)}else fn._settlePromises()}},Async.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},Async.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},Async.prototype._reset=function(){this._isTickUsed=!1},module.exports=Async,module.exports.firstLineError=firstLineError},{"./queue":26,"./schedule":29,"./util":36}],3:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,debug){var calledBind=!1,rejectThis=function(_,e){this._reject(e)},targetRejected=function(e,context){context.promiseRejectionQueued=!0,context.bindingPromise._then(rejectThis,rejectThis,null,this,e)},bindingResolved=function(thisArg,context){0===(50397184&this._bitField)&&this._resolveCallback(context.target)},bindingRejected=function(e,context){context.promiseRejectionQueued||this._reject(e)};Promise.prototype.bind=function(thisArg){calledBind||(calledBind=!0,Promise.prototype._propagateFrom=debug.propagateFromFunction(),Promise.prototype._boundValue=debug.boundValueFunction());var maybePromise=tryConvertToPromise(thisArg),ret=new Promise(INTERNAL);ret._propagateFrom(this,1);var target=this._target();if(ret._setBoundTo(maybePromise),maybePromise instanceof Promise){var context={promiseRejectionQueued:!1,promise:ret,target:target,bindingPromise:maybePromise};target._then(INTERNAL,targetRejected,void 0,ret,context),maybePromise._then(bindingResolved,bindingRejected,void 0,ret,context),ret._setOnCancel(maybePromise)}else ret._resolveCallback(target);return ret},Promise.prototype._setBoundTo=function(obj){void 0!==obj?(this._bitField=2097152|this._bitField,this._boundTo=obj):this._bitField=this._bitField&-2097153},Promise.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},Promise.bind=function(thisArg,value){return Promise.resolve(value).bind(thisArg)}}},{}],4:[function(_dereq_,module,exports){"use strict";function noConflict(){try{Promise===bluebird&&(Promise=old)}catch(e){}return bluebird}var old;"undefined"!=typeof Promise&&(old=Promise);var bluebird=_dereq_("./promise")();bluebird.noConflict=noConflict,module.exports=bluebird},{"./promise":22}],5:[function(_dereq_,module,exports){"use strict";var cr=Object.create;if(cr){var callerCache=cr(null),getterCache=cr(null);callerCache[" size"]=getterCache[" size"]=0}module.exports=function(Promise){function ensureMethod(obj,methodName){var fn;if(null!=obj&&(fn=obj[methodName]),"function"!=typeof fn){var message="Object "+util.classString(obj)+" has no method '"+util.toString(methodName)+"'";throw new Promise.TypeError(message)}return fn}function caller(obj){var methodName=this.pop(),fn=ensureMethod(obj,methodName);return fn.apply(obj,this)}function namedGetter(obj){return obj[this]}function indexedGetter(obj){var index=+this;return index<0&&(index=Math.max(0,index+obj.length)),obj[index]}var getGetter,util=_dereq_("./util"),canEvaluate=util.canEvaluate;util.isIdentifier;Promise.prototype.call=function(methodName){var args=[].slice.call(arguments,1);return args.push(methodName),this._then(caller,void 0,void 0,args,void 0)},Promise.prototype.get=function(propertyName){var getter,isIndex="number"==typeof propertyName;if(isIndex)getter=indexedGetter;else if(canEvaluate){var maybeGetter=getGetter(propertyName);getter=null!==maybeGetter?maybeGetter:namedGetter}else getter=namedGetter;return this._then(getter,void 0,void 0,propertyName,void 0)}}},{"./util":36}],6:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,debug){var util=_dereq_("./util"),tryCatch=util.tryCatch,errorObj=util.errorObj,async=Promise._async;Promise.prototype["break"]=Promise.prototype.cancel=function(){if(!debug.cancellation())return this._warn("cancellation is disabled");for(var promise=this,child=promise;promise._isCancellable();){if(!promise._cancelBy(child)){child._isFollowing()?child._followee().cancel():child._cancelBranched();break}var parent=promise._cancellationParent;if(null==parent||!parent._isCancellable()){promise._isFollowing()?promise._followee().cancel():promise._cancelBranched();break}promise._isFollowing()&&promise._followee().cancel(),promise._setWillBeCancelled(),child=promise,promise=parent}},Promise.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},Promise.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},Promise.prototype._cancelBy=function(canceller){return canceller===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},Promise.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},Promise.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),async.invoke(this._cancelPromises,this,void 0))},Promise.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},Promise.prototype._unsetOnCancel=function(){this._onCancelField=void 0},Promise.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},Promise.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},Promise.prototype._doInvokeOnCancel=function(onCancelCallback,internalOnly){if(util.isArray(onCancelCallback))for(var i=0;i<onCancelCallback.length;++i)this._doInvokeOnCancel(onCancelCallback[i],internalOnly);else if(void 0!==onCancelCallback)if("function"==typeof onCancelCallback){if(!internalOnly){var e=tryCatch(onCancelCallback).call(this._boundValue());e===errorObj&&(this._attachExtraTrace(e.e),async.throwLater(e.e))}}else onCancelCallback._resultCancelled(this)},Promise.prototype._invokeOnCancel=function(){var onCancelCallback=this._onCancel();this._unsetOnCancel(),async.invoke(this._doInvokeOnCancel,this,onCancelCallback)},Promise.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},Promise.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(_dereq_,module,exports){"use strict";module.exports=function(NEXT_FILTER){function catchFilter(instances,cb,promise){return function(e){var boundTo=promise._boundValue();predicateLoop:for(var i=0;i<instances.length;++i){var item=instances[i];if(item===Error||null!=item&&item.prototype instanceof Error){if(e instanceof item)return tryCatch(cb).call(boundTo,e)}else if("function"==typeof item){var matchesPredicate=tryCatch(item).call(boundTo,e);if(matchesPredicate===errorObj)return matchesPredicate;if(matchesPredicate)return tryCatch(cb).call(boundTo,e)}else if(util.isObject(e)){for(var keys=getKeys(item),j=0;j<keys.length;++j){var key=keys[j];if(item[key]!=e[key])continue predicateLoop}return tryCatch(cb).call(boundTo,e)}}return NEXT_FILTER}}var util=_dereq_("./util"),getKeys=_dereq_("./es5").keys,tryCatch=util.tryCatch,errorObj=util.errorObj;return catchFilter}},{"./es5":13,"./util":36}],8:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function Context(){this._trace=new Context.CapturedTrace(peekContext())}function createContext(){if(longStackTraces)return new Context}function peekContext(){var lastIndex=contextStack.length-1;if(lastIndex>=0)return contextStack[lastIndex]}var longStackTraces=!1,contextStack=[];return Promise.prototype._promiseCreated=function(){},Promise.prototype._pushContext=function(){},Promise.prototype._popContext=function(){return null},Promise._peekContext=Promise.prototype._peekContext=function(){},Context.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,contextStack.push(this._trace))},Context.prototype._popContext=function(){if(void 0!==this._trace){var trace=contextStack.pop(),ret=trace._promiseCreated;return trace._promiseCreated=null,ret}return null},Context.CapturedTrace=null,Context.create=createContext,Context.deactivateLongStackTraces=function(){},Context.activateLongStackTraces=function(){var Promise_pushContext=Promise.prototype._pushContext,Promise_popContext=Promise.prototype._popContext,Promise_PeekContext=Promise._peekContext,Promise_peekContext=Promise.prototype._peekContext,Promise_promiseCreated=Promise.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){Promise.prototype._pushContext=Promise_pushContext,Promise.prototype._popContext=Promise_popContext,Promise._peekContext=Promise_PeekContext,Promise.prototype._peekContext=Promise_peekContext,Promise.prototype._promiseCreated=Promise_promiseCreated,longStackTraces=!1},longStackTraces=!0,Promise.prototype._pushContext=Context.prototype._pushContext,Promise.prototype._popContext=Context.prototype._popContext,Promise._peekContext=Promise.prototype._peekContext=peekContext,Promise.prototype._promiseCreated=function(){var ctx=this._peekContext();ctx&&null==ctx._promiseCreated&&(ctx._promiseCreated=this)}},Context}},{}],9:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,Context){function generatePromiseLifecycleEventObject(name,promise){return{promise:promise}}function defaultFireEvent(){return!1}function cancellationExecute(executor,resolve,reject){var promise=this;try{executor(resolve,reject,function(onCancel){if("function"!=typeof onCancel)throw new TypeError("onCancel must be a function, got: "+util.toString(onCancel));promise._attachCancellationCallback(onCancel)})}catch(e){return e}}function cancellationAttachCancellationCallback(onCancel){if(!this._isCancellable())return this;var previousOnCancel=this._onCancel();void 0!==previousOnCancel?util.isArray(previousOnCancel)?previousOnCancel.push(onCancel):this._setOnCancel([previousOnCancel,onCancel]):this._setOnCancel(onCancel)}function cancellationOnCancel(){return this._onCancelField}function cancellationSetOnCancel(onCancel){this._onCancelField=onCancel}function cancellationClearCancellationData(){this._cancellationParent=void 0,this._onCancelField=void 0}function cancellationPropagateFrom(parent,flags){if(0!==(1&flags)){this._cancellationParent=parent;var branchesRemainingToCancel=parent._branchesRemainingToCancel;void 0===branchesRemainingToCancel&&(branchesRemainingToCancel=0),parent._branchesRemainingToCancel=branchesRemainingToCancel+1}0!==(2&flags)&&parent._isBound()&&this._setBoundTo(parent._boundTo)}function bindingPropagateFrom(parent,flags){0!==(2&flags)&&parent._isBound()&&this._setBoundTo(parent._boundTo)}function boundValueFunction(){var ret=this._boundTo;return void 0!==ret&&ret instanceof Promise?ret.isFulfilled()?ret.value():void 0:ret}function longStackTracesCaptureStackTrace(){this._trace=new CapturedTrace(this._peekContext())}function longStackTracesAttachExtraTrace(error,ignoreSelf){if(canAttachTrace(error)){var trace=this._trace;if(void 0!==trace&&ignoreSelf&&(trace=trace._parent),void 0!==trace)trace.attachExtraTrace(error);else if(!error.__stackCleaned__){var parsed=parseStackAndMessage(error);util.notEnumerableProp(error,"stack",parsed.message+"\n"+parsed.stack.join("\n")),util.notEnumerableProp(error,"__stackCleaned__",!0)}}}function checkForgottenReturns(returnValue,promiseCreated,name,promise,parent){if(void 0===returnValue&&null!==promiseCreated&&wForgottenReturn){if(void 0!==parent&&parent._returnedNonUndefined())return;if(0===(65535&promise._bitField))return;name&&(name+=" ");var handlerLine="",creatorLine="";if(promiseCreated._trace){for(var traceLines=promiseCreated._trace.stack.split("\n"),stack=cleanStack(traceLines),i=stack.length-1;i>=0;--i){var line=stack[i];if(!nodeFramePattern.test(line)){var lineMatches=line.match(parseLinePattern);lineMatches&&(handlerLine="at "+lineMatches[1]+":"+lineMatches[2]+":"+lineMatches[3]+" ");break}}if(stack.length>0)for(var firstUserLine=stack[0],i=0;i<traceLines.length;++i)if(traceLines[i]===firstUserLine){i>0&&(creatorLine="\n"+traceLines[i-1]);break}}var msg="a promise was created in a "+name+"handler "+handlerLine+"but was not returned from it, see http://goo.gl/rRqMUw"+creatorLine;promise._warn(msg,!0,promiseCreated)}}function deprecated(name,replacement){var message=name+" is deprecated and will be removed in a future version.";return replacement&&(message+=" Use "+replacement+" instead."),warn(message)}function warn(message,shouldUseOwnTrace,promise){if(config.warnings){var ctx,warning=new Warning(message);if(shouldUseOwnTrace)promise._attachExtraTrace(warning);else if(config.longStackTraces&&(ctx=Promise._peekContext()))ctx.attachExtraTrace(warning);else{var parsed=parseStackAndMessage(warning);warning.stack=parsed.message+"\n"+parsed.stack.join("\n")}activeFireEvent("warning",warning)||formatAndLogError(warning,"",!0)}}function reconstructStack(message,stacks){for(var i=0;i<stacks.length-1;++i)stacks[i].push("From previous event:"),stacks[i]=stacks[i].join("\n");return i<stacks.length&&(stacks[i]=stacks[i].join("\n")),message+"\n"+stacks.join("\n")}function removeDuplicateOrEmptyJumps(stacks){for(var i=0;i<stacks.length;++i)(0===stacks[i].length||i+1<stacks.length&&stacks[i][0]===stacks[i+1][0])&&(stacks.splice(i,1),i--)}function removeCommonRoots(stacks){for(var current=stacks[0],i=1;i<stacks.length;++i){for(var prev=stacks[i],currentLastIndex=current.length-1,currentLastLine=current[currentLastIndex],commonRootMeetPoint=-1,j=prev.length-1;j>=0;--j)if(prev[j]===currentLastLine){commonRootMeetPoint=j;break}for(var j=commonRootMeetPoint;j>=0;--j){var line=prev[j];if(current[currentLastIndex]!==line)break;current.pop(),currentLastIndex--}current=prev}}function cleanStack(stack){for(var ret=[],i=0;i<stack.length;++i){var line=stack[i],isTraceLine="    (No stack trace)"===line||stackFramePattern.test(line),isInternalFrame=isTraceLine&&shouldIgnore(line);isTraceLine&&!isInternalFrame&&(indentStackFrames&&" "!==line.charAt(0)&&(line="    "+line),ret.push(line))}return ret}function stackFramesAsArray(error){for(var stack=error.stack.replace(/\s+$/g,"").split("\n"),i=0;i<stack.length;++i){var line=stack[i];if("    (No stack trace)"===line||stackFramePattern.test(line))break}return i>0&&(stack=stack.slice(i)),stack}function parseStackAndMessage(error){var stack=error.stack,message=error.toString();return stack="string"==typeof stack&&stack.length>0?stackFramesAsArray(error):["    (No stack trace)"],{message:message,stack:cleanStack(stack)}}function formatAndLogError(error,title,isSoft){if("undefined"!=typeof console){var message;if(util.isObject(error)){var stack=error.stack;message=title+formatStack(stack,error)}else message=title+String(error);"function"==typeof printWarning?printWarning(message,isSoft):"function"==typeof console.log||"object"==typeof console.log}}function fireRejectionEvent(name,localHandler,reason,promise){var localEventFired=!1;try{"function"==typeof localHandler&&(localEventFired=!0,"rejectionHandled"===name?localHandler(promise):localHandler(reason,promise))}catch(e){async.throwLater(e)}"unhandledRejection"===name?activeFireEvent(name,reason,promise)||localEventFired||formatAndLogError(reason,"Unhandled rejection "):activeFireEvent(name,promise)}function formatNonError(obj){var str;if("function"==typeof obj)str="[function "+(obj.name||"anonymous")+"]";else{str=obj&&"function"==typeof obj.toString?obj.toString():util.toString(obj);var ruselessToString=/\[object [a-zA-Z0-9$_]+\]/;if(ruselessToString.test(str))try{var newStr=JSON.stringify(obj);str=newStr}catch(e){}0===str.length&&(str="(empty array)")}return"(<"+snip(str)+">, no stack trace)"}function snip(str){var maxChars=41;return str.length<maxChars?str:str.substr(0,maxChars-3)+"..."}function longStackTracesIsSupported(){return"function"==typeof captureStackTrace}function parseLineInfo(line){var matches=line.match(parseLineInfoRegex);if(matches)return{fileName:matches[1],line:parseInt(matches[2],10)}}function setBounds(firstLineError,lastLineError){if(longStackTracesIsSupported()){for(var firstFileName,lastFileName,firstStackLines=firstLineError.stack.split("\n"),lastStackLines=lastLineError.stack.split("\n"),firstIndex=-1,lastIndex=-1,i=0;i<firstStackLines.length;++i){var result=parseLineInfo(firstStackLines[i]);if(result){firstFileName=result.fileName,firstIndex=result.line;break}}for(var i=0;i<lastStackLines.length;++i){var result=parseLineInfo(lastStackLines[i]);if(result){lastFileName=result.fileName,lastIndex=result.line;break}}firstIndex<0||lastIndex<0||!firstFileName||!lastFileName||firstFileName!==lastFileName||firstIndex>=lastIndex||(shouldIgnore=function(line){if(bluebirdFramePattern.test(line))return!0;var info=parseLineInfo(line);return!!(info&&info.fileName===firstFileName&&firstIndex<=info.line&&info.line<=lastIndex)})}}function CapturedTrace(parent){this._parent=parent,this._promisesCreated=0;var length=this._length=1+(void 0===parent?0:parent._length);captureStackTrace(this,CapturedTrace),length>32&&this.uncycle()}var unhandledRejectionHandled,possiblyUnhandledRejection,printWarning,getDomain=Promise._getDomain,async=Promise._async,Warning=_dereq_("./errors").Warning,util=_dereq_("./util"),canAttachTrace=util.canAttachTrace,bluebirdFramePattern=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,nodeFramePattern=/\((?:timers\.js):\d+:\d+\)/,parseLinePattern=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,stackFramePattern=null,formatStack=null,indentStackFrames=!1,debugging=!(0==util.env("BLUEBIRD_DEBUG")),warnings=!(0==util.env("BLUEBIRD_WARNINGS")||!debugging&&!util.env("BLUEBIRD_WARNINGS")),longStackTraces=!(0==util.env("BLUEBIRD_LONG_STACK_TRACES")||!debugging&&!util.env("BLUEBIRD_LONG_STACK_TRACES")),wForgottenReturn=0!=util.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(warnings||!!util.env("BLUEBIRD_W_FORGOTTEN_RETURN"));Promise.prototype.suppressUnhandledRejections=function(){var target=this._target();target._bitField=target._bitField&-1048577|524288},Promise.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),async.invokeLater(this._notifyUnhandledRejection,this,void 0))},Promise.prototype._notifyUnhandledRejectionIsHandled=function(){fireRejectionEvent("rejectionHandled",unhandledRejectionHandled,void 0,this)},Promise.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},Promise.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},Promise.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var reason=this._settledValue();this._setUnhandledRejectionIsNotified(),fireRejectionEvent("unhandledRejection",possiblyUnhandledRejection,reason,this)}},Promise.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField;
},Promise.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},Promise.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},Promise.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},Promise.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},Promise.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},Promise.prototype._warn=function(message,shouldUseOwnTrace,promise){return warn(message,shouldUseOwnTrace,promise||this)},Promise.onPossiblyUnhandledRejection=function(fn){var domain=getDomain();possiblyUnhandledRejection="function"==typeof fn?null===domain?fn:util.domainBind(domain,fn):void 0},Promise.onUnhandledRejectionHandled=function(fn){var domain=getDomain();unhandledRejectionHandled="function"==typeof fn?null===domain?fn:util.domainBind(domain,fn):void 0};var disableLongStackTraces=function(){};Promise.longStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!config.longStackTraces&&longStackTracesIsSupported()){var Promise_captureStackTrace=Promise.prototype._captureStackTrace,Promise_attachExtraTrace=Promise.prototype._attachExtraTrace;config.longStackTraces=!0,disableLongStackTraces=function(){if(async.haveItemsQueued()&&!config.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");Promise.prototype._captureStackTrace=Promise_captureStackTrace,Promise.prototype._attachExtraTrace=Promise_attachExtraTrace,Context.deactivateLongStackTraces(),async.enableTrampoline(),config.longStackTraces=!1},Promise.prototype._captureStackTrace=longStackTracesCaptureStackTrace,Promise.prototype._attachExtraTrace=longStackTracesAttachExtraTrace,Context.activateLongStackTraces(),async.disableTrampolineIfNecessary()}},Promise.hasLongStackTraces=function(){return config.longStackTraces&&longStackTracesIsSupported()};var fireDomEvent=function(){try{if("function"==typeof CustomEvent){var event=new CustomEvent("CustomEvent");return util.global.dispatchEvent(event),function(name,event){var domEvent=new CustomEvent(name.toLowerCase(),{detail:event,cancelable:!0});return!util.global.dispatchEvent(domEvent)}}if("function"==typeof Event){var event=new Event("CustomEvent");return util.global.dispatchEvent(event),function(name,event){var domEvent=new Event(name.toLowerCase(),{cancelable:!0});return domEvent.detail=event,!util.global.dispatchEvent(domEvent)}}var event=document.createEvent("CustomEvent");return event.initCustomEvent("testingtheevent",!1,!0,{}),util.global.dispatchEvent(event),function(name,event){var domEvent=document.createEvent("CustomEvent");return domEvent.initCustomEvent(name.toLowerCase(),!1,!0,event),!util.global.dispatchEvent(domEvent)}}catch(e){}return function(){return!1}}(),fireGlobalEvent=function(){return util.isNode?function(){return process.emit.apply(process,arguments)}:util.global?function(name){var methodName="on"+name.toLowerCase(),method=util.global[methodName];return!!method&&(method.apply(util.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),eventToObjectGenerator={promiseCreated:generatePromiseLifecycleEventObject,promiseFulfilled:generatePromiseLifecycleEventObject,promiseRejected:generatePromiseLifecycleEventObject,promiseResolved:generatePromiseLifecycleEventObject,promiseCancelled:generatePromiseLifecycleEventObject,promiseChained:function(name,promise,child){return{promise:promise,child:child}},warning:function(name,warning){return{warning:warning}},unhandledRejection:function(name,reason,promise){return{reason:reason,promise:promise}},rejectionHandled:generatePromiseLifecycleEventObject},activeFireEvent=function(name){var globalEventFired=!1;try{globalEventFired=fireGlobalEvent.apply(null,arguments)}catch(e){async.throwLater(e),globalEventFired=!0}var domEventFired=!1;try{domEventFired=fireDomEvent(name,eventToObjectGenerator[name].apply(null,arguments))}catch(e){async.throwLater(e),domEventFired=!0}return domEventFired||globalEventFired};Promise.config=function(opts){if(opts=Object(opts),"longStackTraces"in opts&&(opts.longStackTraces?Promise.longStackTraces():!opts.longStackTraces&&Promise.hasLongStackTraces()&&disableLongStackTraces()),"warnings"in opts){var warningsOption=opts.warnings;config.warnings=!!warningsOption,wForgottenReturn=config.warnings,util.isObject(warningsOption)&&"wForgottenReturn"in warningsOption&&(wForgottenReturn=!!warningsOption.wForgottenReturn)}if("cancellation"in opts&&opts.cancellation&&!config.cancellation){if(async.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");Promise.prototype._clearCancellationData=cancellationClearCancellationData,Promise.prototype._propagateFrom=cancellationPropagateFrom,Promise.prototype._onCancel=cancellationOnCancel,Promise.prototype._setOnCancel=cancellationSetOnCancel,Promise.prototype._attachCancellationCallback=cancellationAttachCancellationCallback,Promise.prototype._execute=cancellationExecute,propagateFromFunction=cancellationPropagateFrom,config.cancellation=!0}"monitoring"in opts&&(opts.monitoring&&!config.monitoring?(config.monitoring=!0,Promise.prototype._fireEvent=activeFireEvent):!opts.monitoring&&config.monitoring&&(config.monitoring=!1,Promise.prototype._fireEvent=defaultFireEvent))},Promise.prototype._fireEvent=defaultFireEvent,Promise.prototype._execute=function(executor,resolve,reject){try{executor(resolve,reject)}catch(e){return e}},Promise.prototype._onCancel=function(){},Promise.prototype._setOnCancel=function(handler){},Promise.prototype._attachCancellationCallback=function(onCancel){},Promise.prototype._captureStackTrace=function(){},Promise.prototype._attachExtraTrace=function(){},Promise.prototype._clearCancellationData=function(){},Promise.prototype._propagateFrom=function(parent,flags){};var propagateFromFunction=bindingPropagateFrom,shouldIgnore=function(){return!1},parseLineInfoRegex=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;util.inherits(CapturedTrace,Error),Context.CapturedTrace=CapturedTrace,CapturedTrace.prototype.uncycle=function(){var length=this._length;if(!(length<2)){for(var nodes=[],stackToIndex={},i=0,node=this;void 0!==node;++i)nodes.push(node),node=node._parent;length=this._length=i;for(var i=length-1;i>=0;--i){var stack=nodes[i].stack;void 0===stackToIndex[stack]&&(stackToIndex[stack]=i)}for(var i=0;i<length;++i){var currentStack=nodes[i].stack,index=stackToIndex[currentStack];if(void 0!==index&&index!==i){index>0&&(nodes[index-1]._parent=void 0,nodes[index-1]._length=1),nodes[i]._parent=void 0,nodes[i]._length=1;var cycleEdgeNode=i>0?nodes[i-1]:this;index<length-1?(cycleEdgeNode._parent=nodes[index+1],cycleEdgeNode._parent.uncycle(),cycleEdgeNode._length=cycleEdgeNode._parent._length+1):(cycleEdgeNode._parent=void 0,cycleEdgeNode._length=1);for(var currentChildLength=cycleEdgeNode._length+1,j=i-2;j>=0;--j)nodes[j]._length=currentChildLength,currentChildLength++;return}}}},CapturedTrace.prototype.attachExtraTrace=function(error){if(!error.__stackCleaned__){this.uncycle();for(var parsed=parseStackAndMessage(error),message=parsed.message,stacks=[parsed.stack],trace=this;void 0!==trace;)stacks.push(cleanStack(trace.stack.split("\n"))),trace=trace._parent;removeCommonRoots(stacks),removeDuplicateOrEmptyJumps(stacks),util.notEnumerableProp(error,"stack",reconstructStack(message,stacks)),util.notEnumerableProp(error,"__stackCleaned__",!0)}};var captureStackTrace=function(){var v8stackFramePattern=/^\s*at\s*/,v8stackFormatter=function(stack,error){return"string"==typeof stack?stack:void 0!==error.name&&void 0!==error.message?error.toString():formatNonError(error)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,stackFramePattern=v8stackFramePattern,formatStack=v8stackFormatter;var captureStackTrace=Error.captureStackTrace;return shouldIgnore=function(line){return bluebirdFramePattern.test(line)},function(receiver,ignoreUntil){Error.stackTraceLimit+=6,captureStackTrace(receiver,ignoreUntil),Error.stackTraceLimit-=6}}var err=new Error;if("string"==typeof err.stack&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0)return stackFramePattern=/@/,formatStack=v8stackFormatter,indentStackFrames=!0,function(o){o.stack=(new Error).stack};var hasStackAfterThrow;try{throw new Error}catch(e){hasStackAfterThrow="stack"in e}return"stack"in err||!hasStackAfterThrow||"number"!=typeof Error.stackTraceLimit?(formatStack=function(stack,error){return"string"==typeof stack?stack:"object"!=typeof error&&"function"!=typeof error||void 0===error.name||void 0===error.message?formatNonError(error):error.toString()},null):(stackFramePattern=v8stackFramePattern,formatStack=v8stackFormatter,function(o){Error.stackTraceLimit+=6;try{throw new Error}catch(e){o.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(printWarning=function(message){},util.isNode&&process.stderr.isTTY?printWarning=function(message,isSoft){}:util.isNode||"string"!=typeof(new Error).stack||(printWarning=function(message,isSoft){}));var config={warnings:warnings,longStackTraces:!1,cancellation:!1,monitoring:!1};return longStackTraces&&Promise.longStackTraces(),{longStackTraces:function(){return config.longStackTraces},warnings:function(){return config.warnings},cancellation:function(){return config.cancellation},monitoring:function(){return config.monitoring},propagateFromFunction:function(){return propagateFromFunction},boundValueFunction:function(){return boundValueFunction},checkForgottenReturns:checkForgottenReturns,setBounds:setBounds,warn:warn,deprecated:deprecated,CapturedTrace:CapturedTrace,fireDomEvent:fireDomEvent,fireGlobalEvent:fireGlobalEvent}}},{"./errors":12,"./util":36}],10:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function returner(){return this.value}function thrower(){throw this.reason}Promise.prototype["return"]=Promise.prototype.thenReturn=function(value){return value instanceof Promise&&value.suppressUnhandledRejections(),this._then(returner,void 0,void 0,{value:value},void 0)},Promise.prototype["throw"]=Promise.prototype.thenThrow=function(reason){return this._then(thrower,void 0,void 0,{reason:reason},void 0)},Promise.prototype.catchThrow=function(reason){if(arguments.length<=1)return this._then(void 0,thrower,void 0,{reason:reason},void 0);var _reason=arguments[1],handler=function(){throw _reason};return this.caught(reason,handler)},Promise.prototype.catchReturn=function(value){if(arguments.length<=1)return value instanceof Promise&&value.suppressUnhandledRejections(),this._then(void 0,returner,void 0,{value:value},void 0);var _value=arguments[1];_value instanceof Promise&&_value.suppressUnhandledRejections();var handler=function(){return _value};return this.caught(value,handler)}}},{}],11:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){function promiseAllThis(){return PromiseAll(this)}function PromiseMapSeries(promises,fn){return PromiseReduce(promises,fn,INTERNAL,INTERNAL)}var PromiseReduce=Promise.reduce,PromiseAll=Promise.all;Promise.prototype.each=function(fn){return PromiseReduce(this,fn,INTERNAL,0)._then(promiseAllThis,void 0,void 0,this,void 0)},Promise.prototype.mapSeries=function(fn){return PromiseReduce(this,fn,INTERNAL,INTERNAL)},Promise.each=function(promises,fn){return PromiseReduce(promises,fn,INTERNAL,0)._then(promiseAllThis,void 0,void 0,promises,void 0)},Promise.mapSeries=PromiseMapSeries}},{}],12:[function(_dereq_,module,exports){"use strict";function subError(nameProperty,defaultMessage){function SubError(message){return this instanceof SubError?(notEnumerableProp(this,"message","string"==typeof message?message:defaultMessage),notEnumerableProp(this,"name",nameProperty),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new SubError(message)}return inherits(SubError,Error),SubError}function OperationalError(message){return this instanceof OperationalError?(notEnumerableProp(this,"name","OperationalError"),notEnumerableProp(this,"message",message),this.cause=message,this.isOperational=!0,void(message instanceof Error?(notEnumerableProp(this,"message",message.message),notEnumerableProp(this,"stack",message.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new OperationalError(message)}var _TypeError,_RangeError,es5=_dereq_("./es5"),Objectfreeze=es5.freeze,util=_dereq_("./util"),inherits=util.inherits,notEnumerableProp=util.notEnumerableProp,Warning=subError("Warning","warning"),CancellationError=subError("CancellationError","cancellation error"),TimeoutError=subError("TimeoutError","timeout error"),AggregateError=subError("AggregateError","aggregate error");try{_TypeError=TypeError,_RangeError=RangeError}catch(e){_TypeError=subError("TypeError","type error"),_RangeError=subError("RangeError","range error")}for(var methods="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),i=0;i<methods.length;++i)"function"==typeof Array.prototype[methods[i]]&&(AggregateError.prototype[methods[i]]=Array.prototype[methods[i]]);es5.defineProperty(AggregateError.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),AggregateError.prototype.isOperational=!0;var level=0;AggregateError.prototype.toString=function(){var indent=Array(4*level+1).join(" "),ret="\n"+indent+"AggregateError of:\n";level++,indent=Array(4*level+1).join(" ");for(var i=0;i<this.length;++i){for(var str=this[i]===this?"[Circular AggregateError]":this[i]+"",lines=str.split("\n"),j=0;j<lines.length;++j)lines[j]=indent+lines[j];str=lines.join("\n"),ret+=str+"\n"}return level--,ret},inherits(OperationalError,Error);var errorTypes=Error.__BluebirdErrorTypes__;errorTypes||(errorTypes=Objectfreeze({CancellationError:CancellationError,TimeoutError:TimeoutError,OperationalError:OperationalError,RejectionError:OperationalError,AggregateError:AggregateError}),es5.defineProperty(Error,"__BluebirdErrorTypes__",{value:errorTypes,writable:!1,enumerable:!1,configurable:!1})),module.exports={Error:Error,TypeError:_TypeError,RangeError:_RangeError,CancellationError:errorTypes.CancellationError,OperationalError:errorTypes.OperationalError,TimeoutError:errorTypes.TimeoutError,AggregateError:errorTypes.AggregateError,Warning:Warning}},{"./es5":13,"./util":36}],13:[function(_dereq_,module,exports){var isES5=function(){"use strict";return void 0===this}();if(isES5)module.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:isES5,propertyIsWritable:function(obj,prop){var descriptor=Object.getOwnPropertyDescriptor(obj,prop);return!(descriptor&&!descriptor.writable&&!descriptor.set)}};else{var has={}.hasOwnProperty,str={}.toString,proto={}.constructor.prototype,ObjectKeys=function(o){var ret=[];for(var key in o)has.call(o,key)&&ret.push(key);return ret},ObjectGetDescriptor=function(o,key){return{value:o[key]}},ObjectDefineProperty=function(o,key,desc){return o[key]=desc.value,o},ObjectFreeze=function(obj){return obj},ObjectGetPrototypeOf=function(obj){try{return Object(obj).constructor.prototype}catch(e){return proto}},ArrayIsArray=function(obj){try{return"[object Array]"===str.call(obj)}catch(e){return!1}};module.exports={isArray:ArrayIsArray,keys:ObjectKeys,names:ObjectKeys,defineProperty:ObjectDefineProperty,getDescriptor:ObjectGetDescriptor,freeze:ObjectFreeze,getPrototypeOf:ObjectGetPrototypeOf,isES5:isES5,propertyIsWritable:function(){return!0}}}},{}],14:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){var PromiseMap=Promise.map;Promise.prototype.filter=function(fn,options){return PromiseMap(this,fn,options,INTERNAL)},Promise.filter=function(promises,fn,options){return PromiseMap(promises,fn,options,INTERNAL)}}},{}],15:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,tryConvertToPromise){function PassThroughHandlerContext(promise,type,handler){this.promise=promise,this.type=type,this.handler=handler,this.called=!1,this.cancelPromise=null}function FinallyHandlerCancelReaction(finallyHandler){this.finallyHandler=finallyHandler}function checkCancel(ctx,reason){return null!=ctx.cancelPromise&&(arguments.length>1?ctx.cancelPromise._reject(reason):ctx.cancelPromise._cancel(),ctx.cancelPromise=null,!0)}function succeed(){return finallyHandler.call(this,this.promise._target()._settledValue())}function fail(reason){if(!checkCancel(this,reason))return errorObj.e=reason,errorObj}function finallyHandler(reasonOrValue){var promise=this.promise,handler=this.handler;if(!this.called){this.called=!0;var ret=this.isFinallyHandler()?handler.call(promise._boundValue()):handler.call(promise._boundValue(),reasonOrValue);if(void 0!==ret){promise._setReturnedNonUndefined();var maybePromise=tryConvertToPromise(ret,promise);if(maybePromise instanceof Promise){if(null!=this.cancelPromise){if(maybePromise._isCancelled()){var reason=new CancellationError("late cancellation observer");return promise._attachExtraTrace(reason),errorObj.e=reason,errorObj}maybePromise.isPending()&&maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this))}return maybePromise._then(succeed,fail,void 0,this,void 0)}}}return promise.isRejected()?(checkCancel(this),errorObj.e=reasonOrValue,errorObj):(checkCancel(this),reasonOrValue)}var util=_dereq_("./util"),CancellationError=Promise.CancellationError,errorObj=util.errorObj;return PassThroughHandlerContext.prototype.isFinallyHandler=function(){return 0===this.type},FinallyHandlerCancelReaction.prototype._resultCancelled=function(){checkCancel(this.finallyHandler)},Promise.prototype._passThrough=function(handler,type,success,fail){return"function"!=typeof handler?this.then():this._then(success,fail,void 0,new PassThroughHandlerContext(this,type,handler),void 0)},Promise.prototype.lastly=Promise.prototype["finally"]=function(handler){return this._passThrough(handler,0,finallyHandler,finallyHandler)},Promise.prototype.tap=function(handler){return this._passThrough(handler,1,finallyHandler)},PassThroughHandlerContext}},{"./util":36}],16:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug){function promiseFromYieldHandler(value,yieldHandlers,traceParent){for(var i=0;i<yieldHandlers.length;++i){traceParent._pushContext();var result=tryCatch(yieldHandlers[i])(value);if(traceParent._popContext(),result===errorObj){traceParent._pushContext();var ret=Promise.reject(errorObj.e);return traceParent._popContext(),ret}var maybePromise=tryConvertToPromise(result,traceParent);if(maybePromise instanceof Promise)return maybePromise}return null}function PromiseSpawn(generatorFunction,receiver,yieldHandler,stack){if(debug.cancellation()){var internal=new Promise(INTERNAL),_finallyPromise=this._finallyPromise=new Promise(INTERNAL);this._promise=internal.lastly(function(){return _finallyPromise}),internal._captureStackTrace(),internal._setOnCancel(this)}else{var promise=this._promise=new Promise(INTERNAL);promise._captureStackTrace()}this._stack=stack,this._generatorFunction=generatorFunction,this._receiver=receiver,this._generator=void 0,this._yieldHandlers="function"==typeof yieldHandler?[yieldHandler].concat(yieldHandlers):yieldHandlers,this._yieldedPromise=null,this._cancellationPhase=!1}var errors=_dereq_("./errors"),TypeError=errors.TypeError,util=_dereq_("./util"),errorObj=util.errorObj,tryCatch=util.tryCatch,yieldHandlers=[];util.inherits(PromiseSpawn,Proxyable),PromiseSpawn.prototype._isResolved=function(){return null===this._promise},PromiseSpawn.prototype._cleanup=function(){this._promise=this._generator=null,debug.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},PromiseSpawn.prototype._promiseCancelled=function(){if(!this._isResolved()){var result,implementsReturn="undefined"!=typeof this._generator["return"];if(implementsReturn)this._promise._pushContext(),result=tryCatch(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var reason=new Promise.CancellationError("generator .return() sentinel");Promise.coroutine.returnSentinel=reason,this._promise._attachExtraTrace(reason),this._promise._pushContext(),result=tryCatch(this._generator["throw"]).call(this._generator,reason),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(result)}},PromiseSpawn.prototype._promiseFulfilled=function(value){this._yieldedPromise=null,this._promise._pushContext();var result=tryCatch(this._generator.next).call(this._generator,value);this._promise._popContext(),this._continue(result)},PromiseSpawn.prototype._promiseRejected=function(reason){this._yieldedPromise=null,this._promise._attachExtraTrace(reason),this._promise._pushContext();var result=tryCatch(this._generator["throw"]).call(this._generator,reason);this._promise._popContext(),this._continue(result)},PromiseSpawn.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof Promise){var promise=this._yieldedPromise;this._yieldedPromise=null,promise.cancel()}},PromiseSpawn.prototype.promise=function(){return this._promise},PromiseSpawn.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},PromiseSpawn.prototype._continue=function(result){var promise=this._promise;if(result===errorObj)return this._cleanup(),this._cancellationPhase?promise.cancel():promise._rejectCallback(result.e,!1);var value=result.value;if(result.done===!0)return this._cleanup(),this._cancellationPhase?promise.cancel():promise._resolveCallback(value);var maybePromise=tryConvertToPromise(value,this._promise);if(!(maybePromise instanceof Promise)&&(maybePromise=promiseFromYieldHandler(maybePromise,this._yieldHandlers,this._promise),null===maybePromise))return void this._promiseRejected(new TypeError("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",value)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));maybePromise=maybePromise._target();var bitField=maybePromise._bitField;0===(50397184&bitField)?(this._yieldedPromise=maybePromise,maybePromise._proxy(this,null)):0!==(33554432&bitField)?Promise._async.invoke(this._promiseFulfilled,this,maybePromise._value()):0!==(16777216&bitField)?Promise._async.invoke(this._promiseRejected,this,maybePromise._reason()):this._promiseCancelled()},Promise.coroutine=function(generatorFunction,options){if("function"!=typeof generatorFunction)throw new TypeError("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var yieldHandler=Object(options).yieldHandler,PromiseSpawn$=PromiseSpawn,stack=(new Error).stack;return function(){var generator=generatorFunction.apply(this,arguments),spawn=new PromiseSpawn$((void 0),(void 0),yieldHandler,stack),ret=spawn.promise();return spawn._generator=generator,spawn._promiseFulfilled(void 0),ret}},Promise.coroutine.addYieldHandler=function(fn){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));yieldHandlers.push(fn)},Promise.spawn=function(generatorFunction){if(debug.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof generatorFunction)return apiRejection("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var spawn=new PromiseSpawn(generatorFunction,this),ret=spawn.promise();return spawn._run(Promise.spawn),ret}}},{"./errors":12,"./util":36}],17:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain){var util=_dereq_("./util");util.canEvaluate,util.tryCatch,util.errorObj;Promise.join=function(){var fn,last=arguments.length-1;if(last>0&&"function"==typeof arguments[last]){fn=arguments[last];var ret}var args=[].slice.call(arguments);fn&&args.pop();var ret=new PromiseArray(args).promise();return void 0!==fn?ret.spread(fn):ret}}},{"./util":36}],18:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){function MappingPromiseArray(promises,fn,limit,_filter){this.constructor$(promises),this._promise._captureStackTrace();var domain=getDomain();this._callback=null===domain?fn:util.domainBind(domain,fn),this._preservedValues=_filter===INTERNAL?new Array(this.length()):null,this._limit=limit,this._inFlight=0,this._queue=[],async.invoke(this._asyncInit,this,void 0)}function map(promises,fn,options,_filter){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var limit=0;if(void 0!==options){if("object"!=typeof options||null===options)return Promise.reject(new TypeError("options argument must be an object but it is "+util.classString(options)));if("number"!=typeof options.concurrency)return Promise.reject(new TypeError("'concurrency' must be a number but it is "+util.classString(options.concurrency)));limit=options.concurrency}return limit="number"==typeof limit&&isFinite(limit)&&limit>=1?limit:0,new MappingPromiseArray(promises,fn,limit,_filter).promise()}var getDomain=Promise._getDomain,util=_dereq_("./util"),tryCatch=util.tryCatch,errorObj=util.errorObj,async=Promise._async;util.inherits(MappingPromiseArray,PromiseArray),MappingPromiseArray.prototype._asyncInit=function(){this._init$(void 0,-2)},MappingPromiseArray.prototype._init=function(){},MappingPromiseArray.prototype._promiseFulfilled=function(value,index){var values=this._values,length=this.length(),preservedValues=this._preservedValues,limit=this._limit;if(index<0){if(index=index*-1-1,values[index]=value,limit>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(limit>=1&&this._inFlight>=limit)return values[index]=value,this._queue.push(index),!1;null!==preservedValues&&(preservedValues[index]=value);var promise=this._promise,callback=this._callback,receiver=promise._boundValue();promise._pushContext();var ret=tryCatch(callback).call(receiver,value,index,length),promiseCreated=promise._popContext();if(debug.checkForgottenReturns(ret,promiseCreated,null!==preservedValues?"Promise.filter":"Promise.map",promise),ret===errorObj)return this._reject(ret.e),!0;var maybePromise=tryConvertToPromise(ret,this._promise);if(maybePromise instanceof Promise){maybePromise=maybePromise._target();var bitField=maybePromise._bitField;if(0===(50397184&bitField))return limit>=1&&this._inFlight++,values[index]=maybePromise,maybePromise._proxy(this,(index+1)*-1),!1;if(0===(33554432&bitField))return 0!==(16777216&bitField)?(this._reject(maybePromise._reason()),!0):(this._cancel(),!0);ret=maybePromise._value()}values[index]=ret}var totalResolved=++this._totalResolved;return totalResolved>=length&&(null!==preservedValues?this._filter(values,preservedValues):this._resolve(values),!0)},MappingPromiseArray.prototype._drainQueue=function(){for(var queue=this._queue,limit=this._limit,values=this._values;queue.length>0&&this._inFlight<limit;){if(this._isResolved())return;var index=queue.pop();this._promiseFulfilled(values[index],index)}},MappingPromiseArray.prototype._filter=function(booleans,values){for(var len=values.length,ret=new Array(len),j=0,i=0;i<len;++i)booleans[i]&&(ret[j++]=values[i]);ret.length=j,this._resolve(ret)},MappingPromiseArray.prototype.preservedValues=function(){return this._preservedValues},Promise.prototype.map=function(fn,options){return map(this,fn,options,null)},Promise.map=function(promises,fn,options,_filter){return map(promises,fn,options,_filter)}}},{"./util":36}],19:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug){var util=_dereq_("./util"),tryCatch=util.tryCatch;Promise.method=function(fn){if("function"!=typeof fn)throw new Promise.TypeError("expecting a function but got "+util.classString(fn));return function(){var ret=new Promise(INTERNAL);ret._captureStackTrace(),ret._pushContext();var value=tryCatch(fn).apply(this,arguments),promiseCreated=ret._popContext();return debug.checkForgottenReturns(value,promiseCreated,"Promise.method",ret),ret._resolveFromSyncValue(value),ret}},Promise.attempt=Promise["try"]=function(fn){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var ret=new Promise(INTERNAL);ret._captureStackTrace(),ret._pushContext();var value;if(arguments.length>1){debug.deprecated("calling Promise.try with more than 1 argument");var arg=arguments[1],ctx=arguments[2];value=util.isArray(arg)?tryCatch(fn).apply(ctx,arg):tryCatch(fn).call(ctx,arg)}else value=tryCatch(fn)();var promiseCreated=ret._popContext();return debug.checkForgottenReturns(value,promiseCreated,"Promise.try",ret),ret._resolveFromSyncValue(value),ret},Promise.prototype._resolveFromSyncValue=function(value){value===util.errorObj?this._rejectCallback(value.e,!1):this._resolveCallback(value,!0)}}},{"./util":36}],20:[function(_dereq_,module,exports){"use strict";function isUntypedError(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype}function wrapAsOperationalError(obj){var ret;if(isUntypedError(obj)){ret=new OperationalError(obj),ret.name=obj.name,ret.message=obj.message,ret.stack=obj.stack;for(var keys=es5.keys(obj),i=0;i<keys.length;++i){var key=keys[i];rErrorKey.test(key)||(ret[key]=obj[key])}return ret}return util.markAsOriginatingFromRejection(obj),obj}function nodebackForPromise(promise,multiArgs){return function(err,value){if(null!==promise){if(err){var wrapped=wrapAsOperationalError(maybeWrapAsError(err));promise._attachExtraTrace(wrapped),promise._reject(wrapped)}else if(multiArgs){var args=[].slice.call(arguments,1);promise._fulfill(args)}else promise._fulfill(value);promise=null}}}var util=_dereq_("./util"),maybeWrapAsError=util.maybeWrapAsError,errors=_dereq_("./errors"),OperationalError=errors.OperationalError,es5=_dereq_("./es5"),rErrorKey=/^(?:name|message|stack|cause)$/;module.exports=nodebackForPromise},{"./errors":12,"./es5":13,"./util":36}],21:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function spreadAdapter(val,nodeback){var promise=this;if(!util.isArray(val))return successAdapter.call(promise,val,nodeback);var ret=tryCatch(nodeback).apply(promise._boundValue(),[null].concat(val));ret===errorObj&&async.throwLater(ret.e)}function successAdapter(val,nodeback){var promise=this,receiver=promise._boundValue(),ret=void 0===val?tryCatch(nodeback).call(receiver,null):tryCatch(nodeback).call(receiver,null,val);ret===errorObj&&async.throwLater(ret.e)}function errorAdapter(reason,nodeback){var promise=this;if(!reason){var newReason=new Error(reason+"");newReason.cause=reason,reason=newReason}var ret=tryCatch(nodeback).call(promise._boundValue(),reason);ret===errorObj&&async.throwLater(ret.e)}var util=_dereq_("./util"),async=Promise._async,tryCatch=util.tryCatch,errorObj=util.errorObj;Promise.prototype.asCallback=Promise.prototype.nodeify=function(nodeback,options){if("function"==typeof nodeback){var adapter=successAdapter;void 0!==options&&Object(options).spread&&(adapter=spreadAdapter),this._then(adapter,errorAdapter,void 0,this,nodeback)}return this}}},{"./util":36}],22:[function(_dereq_,module,exports){"use strict";module.exports=function(){
function Proxyable(){}function check(self,executor){if("function"!=typeof executor)throw new TypeError("expecting a function but got "+util.classString(executor));if(self.constructor!==Promise)throw new TypeError("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function Promise(executor){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,executor!==INTERNAL&&(check(this,executor),this._resolveFromExecutor(executor)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function deferResolve(v){this.promise._resolveCallback(v)}function deferReject(v){this.promise._rejectCallback(v,!1)}function fillTypes(value){var p=new Promise(INTERNAL);p._fulfillmentHandler0=value,p._rejectionHandler0=value,p._promise0=value,p._receiver0=value}var getDomain,makeSelfResolutionError=function(){return new TypeError("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},reflectHandler=function(){return new Promise.PromiseInspection(this._target())},apiRejection=function(msg){return Promise.reject(new TypeError(msg))},UNDEFINED_BINDING={},util=_dereq_("./util");getDomain=util.isNode?function(){var ret=process.domain;return void 0===ret&&(ret=null),ret}:function(){return null},util.notEnumerableProp(Promise,"_getDomain",getDomain);var es5=_dereq_("./es5"),Async=_dereq_("./async"),async=new Async;es5.defineProperty(Promise,"_async",{value:async});var errors=_dereq_("./errors"),TypeError=Promise.TypeError=errors.TypeError;Promise.RangeError=errors.RangeError;var CancellationError=Promise.CancellationError=errors.CancellationError;Promise.TimeoutError=errors.TimeoutError,Promise.OperationalError=errors.OperationalError,Promise.RejectionError=errors.OperationalError,Promise.AggregateError=errors.AggregateError;var INTERNAL=function(){},APPLY={},NEXT_FILTER={},tryConvertToPromise=_dereq_("./thenables")(Promise,INTERNAL),PromiseArray=_dereq_("./promise_array")(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable),Context=_dereq_("./context")(Promise),createContext=Context.create,debug=_dereq_("./debuggability")(Promise,Context),PassThroughHandlerContext=(debug.CapturedTrace,_dereq_("./finally")(Promise,tryConvertToPromise)),catchFilter=_dereq_("./catch_filter")(NEXT_FILTER),nodebackForPromise=_dereq_("./nodeback"),errorObj=util.errorObj,tryCatch=util.tryCatch;return Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.caught=Promise.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var i,catchInstances=new Array(len-1),j=0;for(i=0;i<len-1;++i){var item=arguments[i];if(!util.isObject(item))return apiRejection("expecting an object but got A catch statement predicate "+util.classString(item));catchInstances[j++]=item}return catchInstances.length=j,fn=arguments[i],this.then(void 0,catchFilter(catchInstances,fn,this))}return this.then(void 0,fn)},Promise.prototype.reflect=function(){return this._then(reflectHandler,reflectHandler,void 0,this,void 0)},Promise.prototype.then=function(didFulfill,didReject){if(debug.warnings()&&arguments.length>0&&"function"!=typeof didFulfill&&"function"!=typeof didReject){var msg=".then() only accepts functions but was passed: "+util.classString(didFulfill);arguments.length>1&&(msg+=", "+util.classString(didReject)),this._warn(msg)}return this._then(didFulfill,didReject,void 0,void 0,void 0)},Promise.prototype.done=function(didFulfill,didReject){var promise=this._then(didFulfill,didReject,void 0,void 0,void 0);promise._setIsFinal()},Promise.prototype.spread=function(fn){return"function"!=typeof fn?apiRejection("expecting a function but got "+util.classString(fn)):this.all()._then(fn,void 0,void 0,APPLY,void 0)},Promise.prototype.toJSON=function(){var ret={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(ret.fulfillmentValue=this.value(),ret.isFulfilled=!0):this.isRejected()&&(ret.rejectionReason=this.reason(),ret.isRejected=!0),ret},Promise.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new PromiseArray(this).promise()},Promise.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn)},Promise.getNewLibraryCopy=module.exports,Promise.is=function(val){return val instanceof Promise},Promise.fromNode=Promise.fromCallback=function(fn){var ret=new Promise(INTERNAL);ret._captureStackTrace();var multiArgs=arguments.length>1&&!!Object(arguments[1]).multiArgs,result=tryCatch(fn)(nodebackForPromise(ret,multiArgs));return result===errorObj&&ret._rejectCallback(result.e,!0),ret._isFateSealed()||ret._setAsyncGuaranteed(),ret},Promise.all=function(promises){return new PromiseArray(promises).promise()},Promise.cast=function(obj){var ret=tryConvertToPromise(obj);return ret instanceof Promise||(ret=new Promise(INTERNAL),ret._captureStackTrace(),ret._setFulfilled(),ret._rejectionHandler0=obj),ret},Promise.resolve=Promise.fulfilled=Promise.cast,Promise.reject=Promise.rejected=function(reason){var ret=new Promise(INTERNAL);return ret._captureStackTrace(),ret._rejectCallback(reason,!0),ret},Promise.setScheduler=function(fn){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));return async.setScheduler(fn)},Promise.prototype._then=function(didFulfill,didReject,_,receiver,internalData){var haveInternalData=void 0!==internalData,promise=haveInternalData?internalData:new Promise(INTERNAL),target=this._target(),bitField=target._bitField;haveInternalData||(promise._propagateFrom(this,3),promise._captureStackTrace(),void 0===receiver&&0!==(2097152&this._bitField)&&(receiver=0!==(50397184&bitField)?this._boundValue():target===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,promise));var domain=getDomain();if(0!==(50397184&bitField)){var handler,value,settler=target._settlePromiseCtx;0!==(33554432&bitField)?(value=target._rejectionHandler0,handler=didFulfill):0!==(16777216&bitField)?(value=target._fulfillmentHandler0,handler=didReject,target._unsetRejectionIsUnhandled()):(settler=target._settlePromiseLateCancellationObserver,value=new CancellationError("late cancellation observer"),target._attachExtraTrace(value),handler=didReject),async.invoke(settler,target,{handler:null===domain?handler:"function"==typeof handler&&util.domainBind(domain,handler),promise:promise,receiver:receiver,value:value})}else target._addCallbacks(didFulfill,didReject,promise,receiver,domain);return promise},Promise.prototype._length=function(){return 65535&this._bitField},Promise.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},Promise.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},Promise.prototype._setLength=function(len){this._bitField=this._bitField&-65536|65535&len},Promise.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},Promise.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},Promise.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},Promise.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},Promise.prototype._isFinal=function(){return(4194304&this._bitField)>0},Promise.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},Promise.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},Promise.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},Promise.prototype._setAsyncGuaranteed=function(){async.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},Promise.prototype._receiverAt=function(index){var ret=0===index?this._receiver0:this[4*index-4+3];if(ret!==UNDEFINED_BINDING)return void 0===ret&&this._isBound()?this._boundValue():ret},Promise.prototype._promiseAt=function(index){return this[4*index-4+2]},Promise.prototype._fulfillmentHandlerAt=function(index){return this[4*index-4+0]},Promise.prototype._rejectionHandlerAt=function(index){return this[4*index-4+1]},Promise.prototype._boundValue=function(){},Promise.prototype._migrateCallback0=function(follower){var fulfill=(follower._bitField,follower._fulfillmentHandler0),reject=follower._rejectionHandler0,promise=follower._promise0,receiver=follower._receiverAt(0);void 0===receiver&&(receiver=UNDEFINED_BINDING),this._addCallbacks(fulfill,reject,promise,receiver,null)},Promise.prototype._migrateCallbackAt=function(follower,index){var fulfill=follower._fulfillmentHandlerAt(index),reject=follower._rejectionHandlerAt(index),promise=follower._promiseAt(index),receiver=follower._receiverAt(index);void 0===receiver&&(receiver=UNDEFINED_BINDING),this._addCallbacks(fulfill,reject,promise,receiver,null)},Promise.prototype._addCallbacks=function(fulfill,reject,promise,receiver,domain){var index=this._length();if(index>=65531&&(index=0,this._setLength(0)),0===index)this._promise0=promise,this._receiver0=receiver,"function"==typeof fulfill&&(this._fulfillmentHandler0=null===domain?fulfill:util.domainBind(domain,fulfill)),"function"==typeof reject&&(this._rejectionHandler0=null===domain?reject:util.domainBind(domain,reject));else{var base=4*index-4;this[base+2]=promise,this[base+3]=receiver,"function"==typeof fulfill&&(this[base+0]=null===domain?fulfill:util.domainBind(domain,fulfill)),"function"==typeof reject&&(this[base+1]=null===domain?reject:util.domainBind(domain,reject))}return this._setLength(index+1),index},Promise.prototype._proxy=function(proxyable,arg){this._addCallbacks(void 0,void 0,arg,proxyable,null)},Promise.prototype._resolveCallback=function(value,shouldBind){if(0===(117506048&this._bitField)){if(value===this)return this._rejectCallback(makeSelfResolutionError(),!1);var maybePromise=tryConvertToPromise(value,this);if(!(maybePromise instanceof Promise))return this._fulfill(value);shouldBind&&this._propagateFrom(maybePromise,2);var promise=maybePromise._target();if(promise===this)return void this._reject(makeSelfResolutionError());var bitField=promise._bitField;if(0===(50397184&bitField)){var len=this._length();len>0&&promise._migrateCallback0(this);for(var i=1;i<len;++i)promise._migrateCallbackAt(this,i);this._setFollowing(),this._setLength(0),this._setFollowee(promise)}else if(0!==(33554432&bitField))this._fulfill(promise._value());else if(0!==(16777216&bitField))this._reject(promise._reason());else{var reason=new CancellationError("late cancellation observer");promise._attachExtraTrace(reason),this._reject(reason)}}},Promise.prototype._rejectCallback=function(reason,synchronous,ignoreNonErrorWarnings){var trace=util.ensureErrorObject(reason),hasStack=trace===reason;if(!hasStack&&!ignoreNonErrorWarnings&&debug.warnings()){var message="a promise was rejected with a non-error: "+util.classString(reason);this._warn(message,!0)}this._attachExtraTrace(trace,!!synchronous&&hasStack),this._reject(reason)},Promise.prototype._resolveFromExecutor=function(executor){var promise=this;this._captureStackTrace(),this._pushContext();var synchronous=!0,r=this._execute(executor,function(value){promise._resolveCallback(value)},function(reason){promise._rejectCallback(reason,synchronous)});synchronous=!1,this._popContext(),void 0!==r&&promise._rejectCallback(r,!0)},Promise.prototype._settlePromiseFromHandler=function(handler,receiver,value,promise){var bitField=promise._bitField;if(0===(65536&bitField)){promise._pushContext();var x;receiver===APPLY?value&&"number"==typeof value.length?x=tryCatch(handler).apply(this._boundValue(),value):(x=errorObj,x.e=new TypeError("cannot .spread() a non-array: "+util.classString(value))):x=tryCatch(handler).call(receiver,value);var promiseCreated=promise._popContext();bitField=promise._bitField,0===(65536&bitField)&&(x===NEXT_FILTER?promise._reject(value):x===errorObj?promise._rejectCallback(x.e,!1):(debug.checkForgottenReturns(x,promiseCreated,"",promise,this),promise._resolveCallback(x)))}},Promise.prototype._target=function(){for(var ret=this;ret._isFollowing();)ret=ret._followee();return ret},Promise.prototype._followee=function(){return this._rejectionHandler0},Promise.prototype._setFollowee=function(promise){this._rejectionHandler0=promise},Promise.prototype._settlePromise=function(promise,handler,receiver,value){var isPromise=promise instanceof Promise,bitField=this._bitField,asyncGuaranteed=0!==(134217728&bitField);0!==(65536&bitField)?(isPromise&&promise._invokeInternalOnCancel(),receiver instanceof PassThroughHandlerContext&&receiver.isFinallyHandler()?(receiver.cancelPromise=promise,tryCatch(handler).call(receiver,value)===errorObj&&promise._reject(errorObj.e)):handler===reflectHandler?promise._fulfill(reflectHandler.call(receiver)):receiver instanceof Proxyable?receiver._promiseCancelled(promise):isPromise||promise instanceof PromiseArray?promise._cancel():receiver.cancel()):"function"==typeof handler?isPromise?(asyncGuaranteed&&promise._setAsyncGuaranteed(),this._settlePromiseFromHandler(handler,receiver,value,promise)):handler.call(receiver,value,promise):receiver instanceof Proxyable?receiver._isResolved()||(0!==(33554432&bitField)?receiver._promiseFulfilled(value,promise):receiver._promiseRejected(value,promise)):isPromise&&(asyncGuaranteed&&promise._setAsyncGuaranteed(),0!==(33554432&bitField)?promise._fulfill(value):promise._reject(value))},Promise.prototype._settlePromiseLateCancellationObserver=function(ctx){var handler=ctx.handler,promise=ctx.promise,receiver=ctx.receiver,value=ctx.value;"function"==typeof handler?promise instanceof Promise?this._settlePromiseFromHandler(handler,receiver,value,promise):handler.call(receiver,value,promise):promise instanceof Promise&&promise._reject(value)},Promise.prototype._settlePromiseCtx=function(ctx){this._settlePromise(ctx.promise,ctx.handler,ctx.receiver,ctx.value)},Promise.prototype._settlePromise0=function(handler,value,bitField){var promise=this._promise0,receiver=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(promise,handler,receiver,value)},Promise.prototype._clearCallbackDataAtIndex=function(index){var base=4*index-4;this[base+2]=this[base+3]=this[base+0]=this[base+1]=void 0},Promise.prototype._fulfill=function(value){var bitField=this._bitField;if(!((117506048&bitField)>>>16)){if(value===this){var err=makeSelfResolutionError();return this._attachExtraTrace(err),this._reject(err)}this._setFulfilled(),this._rejectionHandler0=value,(65535&bitField)>0&&(0!==(134217728&bitField)?this._settlePromises():async.settlePromises(this))}},Promise.prototype._reject=function(reason){var bitField=this._bitField;if(!((117506048&bitField)>>>16))return this._setRejected(),this._fulfillmentHandler0=reason,this._isFinal()?async.fatalError(reason,util.isNode):void((65535&bitField)>0?async.settlePromises(this):this._ensurePossibleRejectionHandled())},Promise.prototype._fulfillPromises=function(len,value){for(var i=1;i<len;i++){var handler=this._fulfillmentHandlerAt(i),promise=this._promiseAt(i),receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(promise,handler,receiver,value)}},Promise.prototype._rejectPromises=function(len,reason){for(var i=1;i<len;i++){var handler=this._rejectionHandlerAt(i),promise=this._promiseAt(i),receiver=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(promise,handler,receiver,reason)}},Promise.prototype._settlePromises=function(){var bitField=this._bitField,len=65535&bitField;if(len>0){if(0!==(16842752&bitField)){var reason=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,reason,bitField),this._rejectPromises(len,reason)}else{var value=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,value,bitField),this._fulfillPromises(len,value)}this._setLength(0)}this._clearCancellationData()},Promise.prototype._settledValue=function(){var bitField=this._bitField;return 0!==(33554432&bitField)?this._rejectionHandler0:0!==(16777216&bitField)?this._fulfillmentHandler0:void 0},Promise.defer=Promise.pending=function(){debug.deprecated("Promise.defer","new Promise");var promise=new Promise(INTERNAL);return{promise:promise,resolve:deferResolve,reject:deferReject}},util.notEnumerableProp(Promise,"_makeSelfResolutionError",makeSelfResolutionError),_dereq_("./method")(Promise,INTERNAL,tryConvertToPromise,apiRejection,debug),_dereq_("./bind")(Promise,INTERNAL,tryConvertToPromise,debug),_dereq_("./cancel")(Promise,PromiseArray,apiRejection,debug),_dereq_("./direct_resolve")(Promise),_dereq_("./synchronous_inspection")(Promise),_dereq_("./join")(Promise,PromiseArray,tryConvertToPromise,INTERNAL,async,getDomain),Promise.Promise=Promise,Promise.version="3.4.6",_dereq_("./map.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug),_dereq_("./call_get.js")(Promise),_dereq_("./using.js")(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug),_dereq_("./timers.js")(Promise,INTERNAL,debug),_dereq_("./generators.js")(Promise,apiRejection,INTERNAL,tryConvertToPromise,Proxyable,debug),_dereq_("./nodeify.js")(Promise),_dereq_("./promisify.js")(Promise,INTERNAL),_dereq_("./props.js")(Promise,PromiseArray,tryConvertToPromise,apiRejection),_dereq_("./race.js")(Promise,INTERNAL,tryConvertToPromise,apiRejection),_dereq_("./reduce.js")(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug),_dereq_("./settle.js")(Promise,PromiseArray,debug),_dereq_("./some.js")(Promise,PromiseArray,apiRejection),_dereq_("./filter.js")(Promise,INTERNAL),_dereq_("./each.js")(Promise,INTERNAL),_dereq_("./any.js")(Promise),util.toFastProperties(Promise),util.toFastProperties(Promise.prototype),fillTypes({a:1}),fillTypes({b:2}),fillTypes({c:3}),fillTypes(1),fillTypes(function(){}),fillTypes(void 0),fillTypes(!1),fillTypes(new Promise(INTERNAL)),debug.setBounds(Async.firstLineError,util.lastLineError),Promise}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection,Proxyable){function toResolutionValue(val){switch(val){case-2:return[];case-3:return{}}}function PromiseArray(values){var promise=this._promise=new Promise(INTERNAL);values instanceof Promise&&promise._propagateFrom(values,3),promise._setOnCancel(this),this._values=values,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var util=_dereq_("./util");util.isArray;return util.inherits(PromiseArray,Proxyable),PromiseArray.prototype.length=function(){return this._length},PromiseArray.prototype.promise=function(){return this._promise},PromiseArray.prototype._init=function init(_,resolveValueIfEmpty){var values=tryConvertToPromise(this._values,this._promise);if(values instanceof Promise){values=values._target();var bitField=values._bitField;if(this._values=values,0===(50397184&bitField))return this._promise._setAsyncGuaranteed(),values._then(init,this._reject,void 0,this,resolveValueIfEmpty);if(0===(33554432&bitField))return 0!==(16777216&bitField)?this._reject(values._reason()):this._cancel();values=values._value()}if(values=util.asArray(values),null===values){var err=apiRejection("expecting an array or an iterable object but got "+util.classString(values)).reason();return void this._promise._rejectCallback(err,!1)}return 0===values.length?void(resolveValueIfEmpty===-5?this._resolveEmptyArray():this._resolve(toResolutionValue(resolveValueIfEmpty))):void this._iterate(values)},PromiseArray.prototype._iterate=function(values){var len=this.getActualLength(values.length);this._length=len,this._values=this.shouldCopyValues()?new Array(len):this._values;for(var result=this._promise,isResolved=!1,bitField=null,i=0;i<len;++i){var maybePromise=tryConvertToPromise(values[i],result);maybePromise instanceof Promise?(maybePromise=maybePromise._target(),bitField=maybePromise._bitField):bitField=null,isResolved?null!==bitField&&maybePromise.suppressUnhandledRejections():null!==bitField?0===(50397184&bitField)?(maybePromise._proxy(this,i),this._values[i]=maybePromise):isResolved=0!==(33554432&bitField)?this._promiseFulfilled(maybePromise._value(),i):0!==(16777216&bitField)?this._promiseRejected(maybePromise._reason(),i):this._promiseCancelled(i):isResolved=this._promiseFulfilled(maybePromise,i)}isResolved||result._setAsyncGuaranteed()},PromiseArray.prototype._isResolved=function(){return null===this._values},PromiseArray.prototype._resolve=function(value){this._values=null,this._promise._fulfill(value)},PromiseArray.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},PromiseArray.prototype._reject=function(reason){this._values=null,this._promise._rejectCallback(reason,!1)},PromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;return totalResolved>=this._length&&(this._resolve(this._values),!0)},PromiseArray.prototype._promiseCancelled=function(){return this._cancel(),!0},PromiseArray.prototype._promiseRejected=function(reason){return this._totalResolved++,this._reject(reason),!0},PromiseArray.prototype._resultCancelled=function(){if(!this._isResolved()){var values=this._values;if(this._cancel(),values instanceof Promise)values.cancel();else for(var i=0;i<values.length;++i)values[i]instanceof Promise&&values[i].cancel()}},PromiseArray.prototype.shouldCopyValues=function(){return!0},PromiseArray.prototype.getActualLength=function(len){return len},PromiseArray}},{"./util":36}],24:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){function propsFilter(key){return!noCopyPropsPattern.test(key)}function isPromisified(fn){try{return fn.__isPromisified__===!0}catch(e){return!1}}function hasPromisified(obj,key,suffix){var val=util.getDataPropertyOrDefault(obj,key+suffix,defaultPromisified);return!!val&&isPromisified(val)}function checkValid(ret,suffix,suffixRegexp){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(suffixRegexp.test(key))for(var keyWithoutAsyncSuffix=key.replace(suffixRegexp,""),j=0;j<ret.length;j+=2)if(ret[j]===keyWithoutAsyncSuffix)throw new TypeError("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",suffix))}}function promisifiableMethods(obj,suffix,suffixRegexp,filter){for(var keys=util.inheritedDataKeys(obj),ret=[],i=0;i<keys.length;++i){var key=keys[i],value=obj[key],passesDefaultFilter=filter===defaultFilter||defaultFilter(key,value,obj);"function"!=typeof value||isPromisified(value)||hasPromisified(obj,key,suffix)||!filter(key,value,obj,passesDefaultFilter)||ret.push(key,value)}return checkValid(ret,suffix,suffixRegexp),ret}function makeNodePromisifiedClosure(callback,receiver,_,fn,__,multiArgs){function promisified(){var _receiver=receiver;receiver===THIS&&(_receiver=this);var promise=new Promise(INTERNAL);promise._captureStackTrace();var cb="string"==typeof method&&this!==defaultThis?this[method]:callback,fn=nodebackForPromise(promise,multiArgs);try{cb.apply(_receiver,withAppended(arguments,fn))}catch(e){promise._rejectCallback(maybeWrapAsError(e),!0,!0)}return promise._isFateSealed()||promise._setAsyncGuaranteed(),promise}var defaultThis=function(){return this}(),method=callback;return"string"==typeof method&&(callback=fn),util.notEnumerableProp(promisified,"__isPromisified__",!0),promisified}function promisifyAll(obj,suffix,filter,promisifier,multiArgs){for(var suffixRegexp=new RegExp(escapeIdentRegex(suffix)+"$"),methods=promisifiableMethods(obj,suffix,suffixRegexp,filter),i=0,len=methods.length;i<len;i+=2){var key=methods[i],fn=methods[i+1],promisifiedKey=key+suffix;if(promisifier===makeNodePromisified)obj[promisifiedKey]=makeNodePromisified(key,THIS,key,fn,suffix,multiArgs);else{var promisified=promisifier(fn,function(){return makeNodePromisified(key,THIS,key,fn,suffix,multiArgs)});util.notEnumerableProp(promisified,"__isPromisified__",!0),obj[promisifiedKey]=promisified}}return util.toFastProperties(obj),obj}function promisify(callback,receiver,multiArgs){return makeNodePromisified(callback,receiver,void 0,callback,null,multiArgs)}var makeNodePromisifiedEval,THIS={},util=_dereq_("./util"),nodebackForPromise=_dereq_("./nodeback"),withAppended=util.withAppended,maybeWrapAsError=util.maybeWrapAsError,canEvaluate=util.canEvaluate,TypeError=_dereq_("./errors").TypeError,defaultSuffix="Async",defaultPromisified={__isPromisified__:!0},noCopyProps=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],noCopyPropsPattern=new RegExp("^(?:"+noCopyProps.join("|")+")$"),defaultFilter=function(name){return util.isIdentifier(name)&&"_"!==name.charAt(0)&&"constructor"!==name},escapeIdentRegex=function(str){return str.replace(/([$])/,"\\$")},makeNodePromisified=canEvaluate?makeNodePromisifiedEval:makeNodePromisifiedClosure;Promise.promisify=function(fn,options){if("function"!=typeof fn)throw new TypeError("expecting a function but got "+util.classString(fn));if(isPromisified(fn))return fn;options=Object(options);var receiver=void 0===options.context?THIS:options.context,multiArgs=!!options.multiArgs,ret=promisify(fn,receiver,multiArgs);return util.copyDescriptors(fn,ret,propsFilter),ret},Promise.promisifyAll=function(target,options){if("function"!=typeof target&&"object"!=typeof target)throw new TypeError("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");options=Object(options);var multiArgs=!!options.multiArgs,suffix=options.suffix;"string"!=typeof suffix&&(suffix=defaultSuffix);var filter=options.filter;"function"!=typeof filter&&(filter=defaultFilter);var promisifier=options.promisifier;if("function"!=typeof promisifier&&(promisifier=makeNodePromisified),!util.isIdentifier(suffix))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var keys=util.inheritedDataKeys(target),i=0;i<keys.length;++i){var value=target[keys[i]];"constructor"!==keys[i]&&util.isClass(value)&&(promisifyAll(value.prototype,suffix,filter,promisifier,multiArgs),promisifyAll(value,suffix,filter,promisifier,multiArgs))}return promisifyAll(target,suffix,filter,promisifier,multiArgs)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,tryConvertToPromise,apiRejection){function PropertiesPromiseArray(obj){var entries,isMap=!1;if(void 0!==Es6Map&&obj instanceof Es6Map)entries=mapToEntries(obj),isMap=!0;else{var keys=es5.keys(obj),len=keys.length;entries=new Array(2*len);for(var i=0;i<len;++i){var key=keys[i];entries[i]=obj[key],entries[i+len]=key}}this.constructor$(entries),this._isMap=isMap,this._init$(void 0,-3)}function props(promises){var ret,castValue=tryConvertToPromise(promises);return isObject(castValue)?(ret=castValue instanceof Promise?castValue._then(Promise.props,void 0,void 0,void 0,void 0):new PropertiesPromiseArray(castValue).promise(),castValue instanceof Promise&&ret._propagateFrom(castValue,2),ret):apiRejection("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var Es6Map,util=_dereq_("./util"),isObject=util.isObject,es5=_dereq_("./es5");"function"==typeof Map&&(Es6Map=Map);var mapToEntries=function(){function extractEntry(value,key){this[index]=value,this[index+size]=key,index++}var index=0,size=0;return function(map){size=map.size,index=0;var ret=new Array(2*map.size);return map.forEach(extractEntry,ret),ret}}(),entriesToMap=function(entries){for(var ret=new Es6Map,length=entries.length/2|0,i=0;i<length;++i){var key=entries[length+i],value=entries[i];ret.set(key,value)}return ret};util.inherits(PropertiesPromiseArray,PromiseArray),PropertiesPromiseArray.prototype._init=function(){},PropertiesPromiseArray.prototype._promiseFulfilled=function(value,index){this._values[index]=value;var totalResolved=++this._totalResolved;if(totalResolved>=this._length){var val;if(this._isMap)val=entriesToMap(this._values);else{val={};for(var keyOffset=this.length(),i=0,len=this.length();i<len;++i)val[this._values[i+keyOffset]]=this._values[i]}return this._resolve(val),!0}return!1},PropertiesPromiseArray.prototype.shouldCopyValues=function(){return!1},PropertiesPromiseArray.prototype.getActualLength=function(len){return len>>1},Promise.prototype.props=function(){return props(this)},Promise.props=function(promises){return props(promises)}}},{"./es5":13,"./util":36}],26:[function(_dereq_,module,exports){"use strict";function arrayMove(src,srcIndex,dst,dstIndex,len){for(var j=0;j<len;++j)dst[j+dstIndex]=src[j+srcIndex],src[j+srcIndex]=void 0}function Queue(capacity){this._capacity=capacity,this._length=0,this._front=0}Queue.prototype._willBeOverCapacity=function(size){return this._capacity<size},Queue.prototype._pushOne=function(arg){var length=this.length();this._checkCapacity(length+1);var i=this._front+length&this._capacity-1;this[i]=arg,this._length=length+1},Queue.prototype._unshiftOne=function(value){var capacity=this._capacity;this._checkCapacity(this.length()+1);var front=this._front,i=(front-1&capacity-1^capacity)-capacity;this[i]=value,this._front=i,this._length=this.length()+1},Queue.prototype.unshift=function(fn,receiver,arg){this._unshiftOne(arg),this._unshiftOne(receiver),this._unshiftOne(fn)},Queue.prototype.push=function(fn,receiver,arg){var length=this.length()+3;if(this._willBeOverCapacity(length))return this._pushOne(fn),this._pushOne(receiver),void this._pushOne(arg);var j=this._front+length-3;this._checkCapacity(length);var wrapMask=this._capacity-1;this[j+0&wrapMask]=fn,this[j+1&wrapMask]=receiver,this[j+2&wrapMask]=arg,this._length=length},Queue.prototype.shift=function(){var front=this._front,ret=this[front];return this[front]=void 0,this._front=front+1&this._capacity-1,this._length--,ret},Queue.prototype.length=function(){return this._length},Queue.prototype._checkCapacity=function(size){this._capacity<size&&this._resizeTo(this._capacity<<1)},Queue.prototype._resizeTo=function(capacity){var oldCapacity=this._capacity;this._capacity=capacity;var front=this._front,length=this._length,moveItemsCount=front+length&oldCapacity-1;arrayMove(this,0,this,oldCapacity,moveItemsCount)},module.exports=Queue},{}],27:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,tryConvertToPromise,apiRejection){function race(promises,parent){var maybePromise=tryConvertToPromise(promises);if(maybePromise instanceof Promise)return raceLater(maybePromise);if(promises=util.asArray(promises),null===promises)return apiRejection("expecting an array or an iterable object but got "+util.classString(promises));var ret=new Promise(INTERNAL);void 0!==parent&&ret._propagateFrom(parent,3);for(var fulfill=ret._fulfill,reject=ret._reject,i=0,len=promises.length;i<len;++i){var val=promises[i];(void 0!==val||i in promises)&&Promise.cast(val)._then(fulfill,reject,void 0,ret,null)}return ret}var util=_dereq_("./util"),raceLater=function(promise){return promise.then(function(array){return race(array,promise)})};Promise.race=function(promises){return race(promises,void 0)},Promise.prototype.race=function(){return race(this,void 0)}}},{"./util":36}],28:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection,tryConvertToPromise,INTERNAL,debug){function ReductionPromiseArray(promises,fn,initialValue,_each){
this.constructor$(promises);var domain=getDomain();this._fn=null===domain?fn:util.domainBind(domain,fn),void 0!==initialValue&&(initialValue=Promise.resolve(initialValue),initialValue._attachCancellationCallback(this)),this._initialValue=initialValue,this._currentCancellable=null,_each===INTERNAL?this._eachValues=Array(this._length):0===_each?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function completed(valueOrReason,array){this.isFulfilled()?array._resolve(valueOrReason):array._reject(valueOrReason)}function reduce(promises,fn,initialValue,_each){if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var array=new ReductionPromiseArray(promises,fn,initialValue,_each);return array.promise()}function gotAccum(accum){this.accum=accum,this.array._gotAccum(accum);var value=tryConvertToPromise(this.value,this.array._promise);return value instanceof Promise?(this.array._currentCancellable=value,value._then(gotValue,void 0,void 0,this,void 0)):gotValue.call(this,value)}function gotValue(value){var array=this.array,promise=array._promise,fn=tryCatch(array._fn);promise._pushContext();var ret;ret=void 0!==array._eachValues?fn.call(promise._boundValue(),value,this.index,this.length):fn.call(promise._boundValue(),this.accum,value,this.index,this.length),ret instanceof Promise&&(array._currentCancellable=ret);var promiseCreated=promise._popContext();return debug.checkForgottenReturns(ret,promiseCreated,void 0!==array._eachValues?"Promise.each":"Promise.reduce",promise),ret}var getDomain=Promise._getDomain,util=_dereq_("./util"),tryCatch=util.tryCatch;util.inherits(ReductionPromiseArray,PromiseArray),ReductionPromiseArray.prototype._gotAccum=function(accum){void 0!==this._eachValues&&null!==this._eachValues&&accum!==INTERNAL&&this._eachValues.push(accum)},ReductionPromiseArray.prototype._eachComplete=function(value){return null!==this._eachValues&&this._eachValues.push(value),this._eachValues},ReductionPromiseArray.prototype._init=function(){},ReductionPromiseArray.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},ReductionPromiseArray.prototype.shouldCopyValues=function(){return!1},ReductionPromiseArray.prototype._resolve=function(value){this._promise._resolveCallback(value),this._values=null},ReductionPromiseArray.prototype._resultCancelled=function(sender){return sender===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof Promise&&this._currentCancellable.cancel(),this._initialValue instanceof Promise&&this._initialValue.cancel()))},ReductionPromiseArray.prototype._iterate=function(values){this._values=values;var value,i,length=values.length;if(void 0!==this._initialValue?(value=this._initialValue,i=0):(value=Promise.resolve(values[0]),i=1),this._currentCancellable=value,!value.isRejected())for(;i<length;++i){var ctx={accum:null,value:values[i],index:i,length:length,array:this};value=value._then(gotAccum,void 0,void 0,ctx,void 0)}void 0!==this._eachValues&&(value=value._then(this._eachComplete,void 0,void 0,this,void 0)),value._then(completed,completed,void 0,value,this)},Promise.prototype.reduce=function(fn,initialValue){return reduce(this,fn,initialValue,null)},Promise.reduce=function(promises,fn,initialValue,_each){return reduce(promises,fn,initialValue,_each)}}},{"./util":36}],29:[function(_dereq_,module,exports){"use strict";var schedule,util=_dereq_("./util"),noAsyncScheduler=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},NativePromise=util.getNativePromise();if(util.isNode&&"undefined"==typeof MutationObserver){var GlobalSetImmediate=global.setImmediate,ProcessNextTick=process.nextTick;schedule=util.isRecentNode?function(fn){GlobalSetImmediate.call(global,fn)}:function(fn){ProcessNextTick.call(process,fn)}}else if("function"==typeof NativePromise&&"function"==typeof NativePromise.resolve){var nativePromise=NativePromise.resolve();schedule=function(fn){nativePromise.then(fn)}}else schedule="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(fn){setImmediate(fn)}:"undefined"!=typeof setTimeout?function(fn){setTimeout(fn,0)}:noAsyncScheduler:function(){var div=document.createElement("div"),opts={attributes:!0},toggleScheduled=!1,div2=document.createElement("div"),o2=new MutationObserver(function(){div.classList.toggle("foo"),toggleScheduled=!1});o2.observe(div2,opts);var scheduleToggle=function(){toggleScheduled||(toggleScheduled=!0,div2.classList.toggle("foo"))};return function(fn){var o=new MutationObserver(function(){o.disconnect(),fn()});o.observe(div,opts),scheduleToggle()}}();module.exports=schedule},{"./util":36}],30:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,debug){function SettledPromiseArray(values){this.constructor$(values)}var PromiseInspection=Promise.PromiseInspection,util=_dereq_("./util");util.inherits(SettledPromiseArray,PromiseArray),SettledPromiseArray.prototype._promiseResolved=function(index,inspection){this._values[index]=inspection;var totalResolved=++this._totalResolved;return totalResolved>=this._length&&(this._resolve(this._values),!0)},SettledPromiseArray.prototype._promiseFulfilled=function(value,index){var ret=new PromiseInspection;return ret._bitField=33554432,ret._settledValueField=value,this._promiseResolved(index,ret)},SettledPromiseArray.prototype._promiseRejected=function(reason,index){var ret=new PromiseInspection;return ret._bitField=16777216,ret._settledValueField=reason,this._promiseResolved(index,ret)},Promise.settle=function(promises){return debug.deprecated(".settle()",".reflect()"),new SettledPromiseArray(promises).promise()},Promise.prototype.settle=function(){return Promise.settle(this)}}},{"./util":36}],31:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,PromiseArray,apiRejection){function SomePromiseArray(values){this.constructor$(values),this._howMany=0,this._unwrap=!1,this._initialized=!1}function some(promises,howMany){if((0|howMany)!==howMany||howMany<0)return apiRejection("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var ret=new SomePromiseArray(promises),promise=ret.promise();return ret.setHowMany(howMany),ret.init(),promise}var util=_dereq_("./util"),RangeError=_dereq_("./errors").RangeError,AggregateError=_dereq_("./errors").AggregateError,isArray=util.isArray,CANCELLATION={};util.inherits(SomePromiseArray,PromiseArray),SomePromiseArray.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var isArrayResolved=isArray(this._values);!this._isResolved()&&isArrayResolved&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},SomePromiseArray.prototype.init=function(){this._initialized=!0,this._init()},SomePromiseArray.prototype.setUnwrap=function(){this._unwrap=!0},SomePromiseArray.prototype.howMany=function(){return this._howMany},SomePromiseArray.prototype.setHowMany=function(count){this._howMany=count},SomePromiseArray.prototype._promiseFulfilled=function(value){return this._addFulfilled(value),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},SomePromiseArray.prototype._promiseRejected=function(reason){return this._addRejected(reason),this._checkOutcome()},SomePromiseArray.prototype._promiseCancelled=function(){return this._values instanceof Promise||null==this._values?this._cancel():(this._addRejected(CANCELLATION),this._checkOutcome())},SomePromiseArray.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new AggregateError,i=this.length();i<this._values.length;++i)this._values[i]!==CANCELLATION&&e.push(this._values[i]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},SomePromiseArray.prototype._fulfilled=function(){return this._totalResolved},SomePromiseArray.prototype._rejected=function(){return this._values.length-this.length()},SomePromiseArray.prototype._addRejected=function(reason){this._values.push(reason)},SomePromiseArray.prototype._addFulfilled=function(value){this._values[this._totalResolved++]=value},SomePromiseArray.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},SomePromiseArray.prototype._getRangeError=function(count){var message="Input array must contain at least "+this._howMany+" items but contains only "+count+" items";return new RangeError(message)},SomePromiseArray.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},Promise.some=function(promises,howMany){return some(promises,howMany)},Promise.prototype.some=function(howMany){return some(this,howMany)},Promise._SomePromiseArray=SomePromiseArray}},{"./errors":12,"./util":36}],32:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise){function PromiseInspection(promise){void 0!==promise?(promise=promise._target(),this._bitField=promise._bitField,this._settledValueField=promise._isFateSealed()?promise._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}PromiseInspection.prototype._settledValue=function(){return this._settledValueField};var value=PromiseInspection.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},reason=PromiseInspection.prototype.error=PromiseInspection.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},isFulfilled=PromiseInspection.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},isRejected=PromiseInspection.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},isPending=PromiseInspection.prototype.isPending=function(){return 0===(50397184&this._bitField)},isResolved=PromiseInspection.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};PromiseInspection.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},Promise.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},Promise.prototype._isCancelled=function(){return this._target().__isCancelled()},Promise.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},Promise.prototype.isPending=function(){return isPending.call(this._target())},Promise.prototype.isRejected=function(){return isRejected.call(this._target())},Promise.prototype.isFulfilled=function(){return isFulfilled.call(this._target())},Promise.prototype.isResolved=function(){return isResolved.call(this._target())},Promise.prototype.value=function(){return value.call(this._target())},Promise.prototype.reason=function(){var target=this._target();return target._unsetRejectionIsUnhandled(),reason.call(target)},Promise.prototype._value=function(){return this._settledValue()},Promise.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},Promise.PromiseInspection=PromiseInspection}},{}],33:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL){function tryConvertToPromise(obj,context){if(isObject(obj)){if(obj instanceof Promise)return obj;var then=getThen(obj);if(then===errorObj){context&&context._pushContext();var ret=Promise.reject(then.e);return context&&context._popContext(),ret}if("function"==typeof then){if(isAnyBluebirdPromise(obj)){var ret=new Promise(INTERNAL);return obj._then(ret._fulfill,ret._reject,void 0,ret,null),ret}return doThenable(obj,then,context)}}return obj}function doGetThen(obj){return obj.then}function getThen(obj){try{return doGetThen(obj)}catch(e){return errorObj.e=e,errorObj}}function isAnyBluebirdPromise(obj){try{return hasProp.call(obj,"_promise0")}catch(e){return!1}}function doThenable(x,then,context){function resolve(value){promise&&(promise._resolveCallback(value),promise=null)}function reject(reason){promise&&(promise._rejectCallback(reason,synchronous,!0),promise=null)}var promise=new Promise(INTERNAL),ret=promise;context&&context._pushContext(),promise._captureStackTrace(),context&&context._popContext();var synchronous=!0,result=util.tryCatch(then).call(x,resolve,reject);return synchronous=!1,promise&&result===errorObj&&(promise._rejectCallback(result.e,!0,!0),promise=null),ret}var util=_dereq_("./util"),errorObj=util.errorObj,isObject=util.isObject,hasProp={}.hasOwnProperty;return tryConvertToPromise}},{"./util":36}],34:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,INTERNAL,debug){function HandleWrapper(handle){this.handle=handle}function successClear(value){return clearTimeout(this.handle),value}function failureClear(reason){throw clearTimeout(this.handle),reason}var util=_dereq_("./util"),TimeoutError=Promise.TimeoutError;HandleWrapper.prototype._resultCancelled=function(){clearTimeout(this.handle)};var afterValue=function(value){return delay(+this).thenReturn(value)},delay=Promise.delay=function(ms,value){var ret,handle;return void 0!==value?(ret=Promise.resolve(value)._then(afterValue,null,null,ms,void 0),debug.cancellation()&&value instanceof Promise&&ret._setOnCancel(value)):(ret=new Promise(INTERNAL),handle=setTimeout(function(){ret._fulfill()},+ms),debug.cancellation()&&ret._setOnCancel(new HandleWrapper(handle)),ret._captureStackTrace()),ret._setAsyncGuaranteed(),ret};Promise.prototype.delay=function(ms){return delay(ms,this)};var afterTimeout=function(promise,message,parent){var err;err="string"!=typeof message?message instanceof Error?message:new TimeoutError("operation timed out"):new TimeoutError(message),util.markAsOriginatingFromRejection(err),promise._attachExtraTrace(err),promise._reject(err),null!=parent&&parent.cancel()};Promise.prototype.timeout=function(ms,message){ms=+ms;var ret,parent,handleWrapper=new HandleWrapper(setTimeout(function(){ret.isPending()&&afterTimeout(ret,message,parent)},ms));return debug.cancellation()?(parent=this.then(),ret=parent._then(successClear,failureClear,void 0,handleWrapper,void 0),ret._setOnCancel(handleWrapper)):ret=this._then(successClear,failureClear,void 0,handleWrapper,void 0),ret}}},{"./util":36}],35:[function(_dereq_,module,exports){"use strict";module.exports=function(Promise,apiRejection,tryConvertToPromise,createContext,INTERNAL,debug){function thrower(e){setTimeout(function(){throw e},0)}function castPreservingDisposable(thenable){var maybePromise=tryConvertToPromise(thenable);return maybePromise!==thenable&&"function"==typeof thenable._isDisposable&&"function"==typeof thenable._getDisposer&&thenable._isDisposable()&&maybePromise._setDisposable(thenable._getDisposer()),maybePromise}function dispose(resources,inspection){function iterator(){if(i>=len)return ret._fulfill();var maybePromise=castPreservingDisposable(resources[i++]);if(maybePromise instanceof Promise&&maybePromise._isDisposable()){try{maybePromise=tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection),resources.promise)}catch(e){return thrower(e)}if(maybePromise instanceof Promise)return maybePromise._then(iterator,thrower,null,null,null)}iterator()}var i=0,len=resources.length,ret=new Promise(INTERNAL);return iterator(),ret}function Disposer(data,promise,context){this._data=data,this._promise=promise,this._context=context}function FunctionDisposer(fn,promise,context){this.constructor$(fn,promise,context)}function maybeUnwrapDisposer(value){return Disposer.isDisposer(value)?(this.resources[this.index]._setDisposable(value),value.promise()):value}function ResourceList(length){this.length=length,this.promise=null,this[length-1]=null}var util=_dereq_("./util"),TypeError=_dereq_("./errors").TypeError,inherits=_dereq_("./util").inherits,errorObj=util.errorObj,tryCatch=util.tryCatch,NULL={};Disposer.prototype.data=function(){return this._data},Disposer.prototype.promise=function(){return this._promise},Disposer.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():NULL},Disposer.prototype.tryDispose=function(inspection){var resource=this.resource(),context=this._context;void 0!==context&&context._pushContext();var ret=resource!==NULL?this.doDispose(resource,inspection):null;return void 0!==context&&context._popContext(),this._promise._unsetDisposable(),this._data=null,ret},Disposer.isDisposer=function(d){return null!=d&&"function"==typeof d.resource&&"function"==typeof d.tryDispose},inherits(FunctionDisposer,Disposer),FunctionDisposer.prototype.doDispose=function(resource,inspection){var fn=this.data();return fn.call(resource,resource,inspection)},ResourceList.prototype._resultCancelled=function(){for(var len=this.length,i=0;i<len;++i){var item=this[i];item instanceof Promise&&item.cancel()}},Promise.using=function(){var len=arguments.length;if(len<2)return apiRejection("you must pass at least 2 arguments to Promise.using");var fn=arguments[len-1];if("function"!=typeof fn)return apiRejection("expecting a function but got "+util.classString(fn));var input,spreadArgs=!0;2===len&&Array.isArray(arguments[0])?(input=arguments[0],len=input.length,spreadArgs=!1):(input=arguments,len--);for(var resources=new ResourceList(len),i=0;i<len;++i){var resource=input[i];if(Disposer.isDisposer(resource)){var disposer=resource;resource=resource.promise(),resource._setDisposable(disposer)}else{var maybePromise=tryConvertToPromise(resource);maybePromise instanceof Promise&&(resource=maybePromise._then(maybeUnwrapDisposer,null,null,{resources:resources,index:i},void 0))}resources[i]=resource}for(var reflectedResources=new Array(resources.length),i=0;i<reflectedResources.length;++i)reflectedResources[i]=Promise.resolve(resources[i]).reflect();var resultPromise=Promise.all(reflectedResources).then(function(inspections){for(var i=0;i<inspections.length;++i){var inspection=inspections[i];if(inspection.isRejected())return errorObj.e=inspection.error(),errorObj;if(!inspection.isFulfilled())return void resultPromise.cancel();inspections[i]=inspection.value()}promise._pushContext(),fn=tryCatch(fn);var ret=spreadArgs?fn.apply(void 0,inspections):fn(inspections),promiseCreated=promise._popContext();return debug.checkForgottenReturns(ret,promiseCreated,"Promise.using",promise),ret}),promise=resultPromise.lastly(function(){var inspection=new Promise.PromiseInspection(resultPromise);return dispose(resources,inspection)});return resources.promise=promise,promise._setOnCancel(resources),promise},Promise.prototype._setDisposable=function(disposer){this._bitField=131072|this._bitField,this._disposer=disposer},Promise.prototype._isDisposable=function(){return(131072&this._bitField)>0},Promise.prototype._getDisposer=function(){return this._disposer},Promise.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},Promise.prototype.disposer=function(fn){if("function"==typeof fn)return new FunctionDisposer(fn,this,createContext());throw new TypeError}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";function tryCatcher(){try{var target=tryCatchTarget;return tryCatchTarget=null,target.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}function tryCatch(fn){return tryCatchTarget=fn,tryCatcher}function isPrimitive(val){return null==val||val===!0||val===!1||"string"==typeof val||"number"==typeof val}function isObject(value){return"function"==typeof value||"object"==typeof value&&null!==value}function maybeWrapAsError(maybeError){return isPrimitive(maybeError)?new Error(safeToString(maybeError)):maybeError}function withAppended(target,appendee){var i,len=target.length,ret=new Array(len+1);for(i=0;i<len;++i)ret[i]=target[i];return ret[i]=appendee,ret}function getDataPropertyOrDefault(obj,key,defaultValue){if(!es5.isES5)return{}.hasOwnProperty.call(obj,key)?obj[key]:void 0;var desc=Object.getOwnPropertyDescriptor(obj,key);return null!=desc?null==desc.get&&null==desc.set?desc.value:defaultValue:void 0}function notEnumerableProp(obj,name,value){if(isPrimitive(obj))return obj;var descriptor={value:value,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(obj,name,descriptor),obj}function thrower(r){throw r}function isClass(fn){try{if("function"==typeof fn){var keys=es5.names(fn.prototype),hasMethods=es5.isES5&&keys.length>1,hasMethodsOtherThanConstructor=keys.length>0&&!(1===keys.length&&"constructor"===keys[0]),hasThisAssignmentAndStaticMethods=thisAssignmentPattern.test(fn+"")&&es5.names(fn).length>0;if(hasMethods||hasMethodsOtherThanConstructor||hasThisAssignmentAndStaticMethods)return!0}return!1}catch(e){return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;for(var l=8;l--;)new FakeConstructor;return obj}function isIdentifier(str){return rident.test(str)}function filledRange(count,prefix,suffix){for(var ret=new Array(count),i=0;i<count;++i)ret[i]=prefix+i+suffix;return ret}function safeToString(obj){try{return obj+""}catch(e){return"[no string representation]"}}function isError(obj){return null!==obj&&"object"==typeof obj&&"string"==typeof obj.message&&"string"==typeof obj.name}function markAsOriginatingFromRejection(e){try{notEnumerableProp(e,"isOperational",!0)}catch(ignore){}}function originatesFromRejection(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||e.isOperational===!0)}function canAttachTrace(obj){return isError(obj)&&es5.propertyIsWritable(obj,"stack")}function classString(obj){return{}.toString.call(obj)}function copyDescriptors(from,to,filter){for(var keys=es5.names(from),i=0;i<keys.length;++i){var key=keys[i];if(filter(key))try{es5.defineProperty(to,key,es5.getDescriptor(from,key))}catch(ignore){}}}function env(key,def){return isNode?process.env[key]:def}function getNativePromise(){if("function"==typeof Promise)try{var promise=new Promise(function(){});if("[object Promise]"==={}.toString.call(promise))return Promise}catch(e){}}function domainBind(self,cb){return self.bind(cb)}var es5=_dereq_("./es5"),canEvaluate="undefined"==typeof navigator,errorObj={e:{}},tryCatchTarget,globalObject="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,inherits=function(Child,Parent){function T(){this.constructor=Child,this.constructor$=Parent;for(var propertyName in Parent.prototype)hasProp.call(Parent.prototype,propertyName)&&"$"!==propertyName.charAt(propertyName.length-1)&&(this[propertyName+"$"]=Parent.prototype[propertyName])}var hasProp={}.hasOwnProperty;return T.prototype=Parent.prototype,Child.prototype=new T,Child.prototype},inheritedDataKeys=function(){var excludedPrototypes=[Array.prototype,Object.prototype,Function.prototype],isExcludedProto=function(val){for(var i=0;i<excludedPrototypes.length;++i)if(excludedPrototypes[i]===val)return!0;return!1};if(es5.isES5){var getKeys=Object.getOwnPropertyNames;return function(obj){for(var ret=[],visitedKeys=Object.create(null);null!=obj&&!isExcludedProto(obj);){var keys;try{keys=getKeys(obj)}catch(e){return ret}for(var i=0;i<keys.length;++i){var key=keys[i];if(!visitedKeys[key]){visitedKeys[key]=!0;var desc=Object.getOwnPropertyDescriptor(obj,key);null!=desc&&null==desc.get&&null==desc.set&&ret.push(key)}}obj=es5.getPrototypeOf(obj)}return ret}}var hasProp={}.hasOwnProperty;return function(obj){if(isExcludedProto(obj))return[];var ret=[];enumeration:for(var key in obj)if(hasProp.call(obj,key))ret.push(key);else{for(var i=0;i<excludedPrototypes.length;++i)if(hasProp.call(excludedPrototypes[i],key))continue enumeration;ret.push(key)}return ret}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/,rident=/^[a-z$_][a-z$_0-9]*$/i,ensureErrorObject=function(){return"stack"in new Error?function(value){return canAttachTrace(value)?value:new Error(safeToString(value))}:function(value){if(canAttachTrace(value))return value;try{throw new Error(safeToString(value))}catch(err){return err}}}(),asArray=function(v){return es5.isArray(v)?v:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ArrayFrom="function"==typeof Array.from?function(v){return Array.from(v)}:function(v){for(var itResult,ret=[],it=v[Symbol.iterator]();!(itResult=it.next()).done;)ret.push(itResult.value);return ret};asArray=function(v){return es5.isArray(v)?v:null!=v&&"function"==typeof v[Symbol.iterator]?ArrayFrom(v):null}}var isNode="undefined"!=typeof process&&"[object process]"===classString(process).toLowerCase(),ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:isNode,env:env,global:globalObject,getNativePromise:getNativePromise,domainBind:domainBind};ret.isRecentNode=ret.isNode&&function(){var version=process.versions.node.split(".").map(Number);return 0===version[0]&&version[1]>10||version[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(e){ret.lastLineError=e}module.exports=ret},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:28}],3:[function(require,module,exports){function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}"undefined"!=typeof module&&(module.exports=Emitter),Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){function on(){this.off(event,on),fn.apply(this,arguments)}return on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks["$"+event],this;for(var cb,i=0;i<callbacks.length;i++)if(cb=callbacks[i],cb===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks["$"+event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],4:[function(require,module,exports){var exports=module.exports=function(doc){doc||(doc={}),"string"==typeof doc&&(doc={cookie:doc}),void 0===doc.cookie&&(doc.cookie="");var self={};return self.get=function(key){for(var splat=doc.cookie.split(/;\s*/),i=0;i<splat.length;i++){var ps=splat[i].split("="),k=unescape(ps[0]);if(k===key)return unescape(ps[1])}},self.set=function(key,value,opts){opts||(opts={});var s=escape(key)+"="+escape(value);return opts.expires&&(s+="; expires="+opts.expires),opts.path&&(s+="; path="+escape(opts.path)),opts.domain&&(s+="; domain="+escape(opts.domain)),opts.secure&&(s+="; secure"),doc.cookie=s,s},self};if("undefined"!=typeof document){var cookie=exports(document);exports.get=cookie.get,exports.set=cookie.set}},{}],5:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],6:[function(require,module,exports){(function(global){!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.localforage=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";function INTERNAL(){}function Promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,"function"==typeof onFulfilled&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),"function"==typeof onRejected&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,new TypeError("Cannot resolve promise with itself")):handlers.resolve(promise,returnValue)})}function getThen(obj){var then=obj&&obj.then;if(obj&&"object"==typeof obj&&"function"==typeof then)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self,thenable){function onError(value){called||(called=!0,handlers.reject(self,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self,value))}function tryToUnwrap(){thenable(onSuccess,onError)}var called=!1,result=tryCatch(tryToUnwrap);"error"===result.status&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status="success"}catch(e){out.status="error",out.value=e}return out}function resolve(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)}function reject(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)}function all(iterable){function allResolver(value,i){function resolveFromAll(outValue){values[i]=outValue,++resolved!==len||called||(called=!0,handlers.resolve(promise,values))}self.resolve(value).then(resolveFromAll,function(error){called||(called=!0,handlers.reject(promise,error))})}var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=new Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)allResolver(iterable[i],i);
return promise}function race(iterable){function resolver(value){self.resolve(value).then(function(response){called||(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}var self=this;if("[object Array]"!==Object.prototype.toString.call(iterable))return this.reject(new TypeError("must be an array"));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)resolver(iterable[i]);return promise}var immediate=_dereq_(2),handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];module.exports=exports=Promise,Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){if("function"!=typeof onFulfilled&&this.state===FULFILLED||"function"!=typeof onRejected&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);if(this.state!==PENDING){var resolver=this.state===FULFILLED?onFulfilled:onRejected;unwrap(promise,resolver,this.outcome)}else this.queue.push(new QueueItem(promise,onFulfilled,onRejected));return promise},QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)},handlers.resolve=function(self,value){var result=tryCatch(getThen,value);if("error"===result.status)return handlers.reject(self,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self,thenable);else{self.state=FULFILLED,self.outcome=value;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callFulfilled(value)}return self},handlers.reject=function(self,error){self.state=REJECTED,self.outcome=error;for(var i=-1,len=self.queue.length;++i<len;)self.queue[i].callRejected(error);return self},exports.resolve=resolve,exports.reject=reject,exports.all=all,exports.race=race},{2:2}],2:[function(_dereq_,module,exports){(function(global){"use strict";function nextTick(){draining=!0;for(var i,oldQueue,len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}function immediate(task){1!==queue.push(task)||draining||scheduleDrain()}var scheduleDrain,Mutation=global.MutationObserver||global.WebKitMutationObserver;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||"undefined"==typeof global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var scriptEl=global.document.createElement("script");scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}var draining,queue=[];module.exports=immediate}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(_dereq_,module,exports){(function(global){"use strict";"function"!=typeof global.Promise&&(global.Promise=_dereq_(1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(_dereq_,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function getIDB(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){}}function isIndexedDBValid(){try{return!!idb&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(idb&&"function"==typeof idb.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function isWebSQLValid(){return"function"==typeof openDatabase}function isLocalStorageValid(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function createBlob(parts,properties){parts=parts||[],properties=properties||{};try{return new Blob(parts,properties)}catch(e){if("TypeError"!==e.name)throw e;for(var Builder="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,builder=new Builder,i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}function executeCallback(promise,callback){callback&&promise.then(function(result){callback(null,result)},function(error){callback(error)})}function executeTwoCallbacks(promise,callback,errorCallback){"function"==typeof callback&&promise.then(callback),"function"==typeof errorCallback&&promise["catch"](errorCallback)}function _binStringToArrayBuffer(bin){for(var length=bin.length,buf=new ArrayBuffer(length),arr=new Uint8Array(buf),i=0;i<length;i++)arr[i]=bin.charCodeAt(i);return buf}function _checkBlobSupportWithoutCaching(txn){return new Promise$1(function(resolve){var blob=createBlob([""]);txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob,"key"),txn.onabort=function(e){e.preventDefault(),e.stopPropagation(),resolve(!1)},txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/),matchedEdge=navigator.userAgent.match(/Edge\//);resolve(matchedEdge||!matchedChrome||parseInt(matchedChrome[1],10)>=43)}})["catch"](function(){return!1})}function _checkBlobSupport(idb){return"boolean"==typeof supportsBlobs?Promise$1.resolve(supportsBlobs):_checkBlobSupportWithoutCaching(idb).then(function(value){return supportsBlobs=value})}function _deferReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation={};deferredOperation.promise=new Promise$1(function(resolve){deferredOperation.resolve=resolve}),dbContext.deferredOperations.push(deferredOperation),dbContext.dbReady?dbContext.dbReady=dbContext.dbReady.then(function(){return deferredOperation.promise}):dbContext.dbReady=deferredOperation.promise}function _advanceReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation=dbContext.deferredOperations.pop();deferredOperation&&deferredOperation.resolve()}function _getConnection(dbInfo,upgradeNeeded){return new Promise$1(function(resolve,reject){if(dbInfo.db){if(!upgradeNeeded)return resolve(dbInfo.db);_deferReadiness(dbInfo),dbInfo.db.close()}var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),e.oldVersion<=1&&db.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}catch(ex){if("ConstraintError"!==ex.name)throw ex}}),openreq.onerror=function(){reject(openreq.error)},openreq.onsuccess=function(){resolve(openreq.result),_advanceReadiness(dbInfo)}})}function _getOriginalConnection(dbInfo){return _getConnection(dbInfo,!1)}function _getUpgradedConnection(dbInfo){return _getConnection(dbInfo,!0)}function _isUpgradeNeeded(dbInfo,defaultVersion){if(!dbInfo.db)return!0;var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),isDowngrade=dbInfo.version<dbInfo.db.version,isUpgrade=dbInfo.version>dbInfo.db.version;if(isDowngrade&&(dbInfo.version!==defaultVersion,dbInfo.version=dbInfo.db.version),isUpgrade||isNewStore){if(isNewStore){var incVersion=dbInfo.db.version+1;incVersion>dbInfo.version&&(dbInfo.version=incVersion)}return!0}return!1}function _encodeBlob(blob){return new Promise$1(function(resolve,reject){var reader=new FileReader;reader.onerror=reject,reader.onloadend=function(e){var base64=btoa(e.target.result||"");resolve({__local_forage_encoded_blob:!0,data:base64,type:blob.type})},reader.readAsBinaryString(blob)})}function _decodeBlob(encodedBlob){var arrayBuff=_binStringToArrayBuffer(atob(encodedBlob.data));return createBlob([arrayBuff],{type:encodedBlob.type})}function _isEncodedBlob(value){return value&&value.__local_forage_encoded_blob}function _fullyReady(callback){var self=this,promise=self._initReady().then(function(){var dbContext=dbContexts[self._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady});return executeTwoCallbacks(promise,callback,callback),promise}function _initStorage(options){function ignoreErrors(){return Promise$1.resolve()}var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];dbContexts||(dbContexts={});var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext={forages:[],db:null,dbReady:null,deferredOperations:[]},dbContexts[dbInfo.name]=dbContext),dbContext.forages.push(self),self._initReady||(self._initReady=self.ready,self.ready=_fullyReady);for(var initPromises=[],j=0;j<dbContext.forages.length;j++){var forage=dbContext.forages[j];forage!==self&&initPromises.push(forage._initReady()["catch"](ignoreErrors))}var forages=dbContext.forages.slice(0);return Promise$1.all(initPromises).then(function(){return dbInfo.db=dbContext.db,_getOriginalConnection(dbInfo)}).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo,self._defaultConfig.version)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db,self._dbInfo=dbInfo;for(var k=0;k<forages.length;k++){var forage=forages[k];forage!==self&&(forage._dbInfo.db=dbInfo.db,forage._dbInfo.version=dbInfo.version)}})}function getItem(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.get(key);req.onsuccess=function(){var value=req.result;void 0===value&&(value=null),_isEncodedBlob(value)&&(value=_decodeBlob(value)),resolve(value)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function iterate(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.openCursor(),iterationNumber=1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;_isEncodedBlob(value)&&(value=_decodeBlob(value));var result=iterator(value,cursor.key,iterationNumber++);void 0!==result?resolve(result):cursor["continue"]()}else resolve()},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function setItem(key,value,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){var dbInfo;self.ready().then(function(){return dbInfo=self._dbInfo,"[object Blob]"===toString.call(value)?_checkBlobSupport(dbInfo.db).then(function(blobSupport){return blobSupport?value:_encodeBlob(value)}):value}).then(function(value){var transaction=dbInfo.db.transaction(dbInfo.storeName,"readwrite"),store=transaction.objectStore(dbInfo.storeName);null===value&&(value=void 0),transaction.oncomplete=function(){void 0===value&&(value=null),resolve(value)},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)};var req=store.put(value,key)})["catch"](reject)});return executeCallback(promise,callback),promise}function removeItem(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,transaction=dbInfo.db.transaction(dbInfo.storeName,"readwrite"),store=transaction.objectStore(dbInfo.storeName),req=store["delete"](key);transaction.oncomplete=function(){resolve()},transaction.onerror=function(){reject(req.error)},transaction.onabort=function(){var err=req.error?req.error:req.transaction.error;reject(err)}})["catch"](reject)});return executeCallback(promise,callback),promise}function clear(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,transaction=dbInfo.db.transaction(dbInfo.storeName,"readwrite"),store=transaction.objectStore(dbInfo.storeName),req=store.clear();transaction.oncomplete=function(){resolve()},transaction.onabort=transaction.onerror=function(){var err=req.error?req.error:req.transaction.error;reject(err)}})["catch"](reject)});return executeCallback(promise,callback),promise}function length(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.count();req.onsuccess=function(){resolve(req.result)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function key(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){return n<0?void resolve(null):void self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),advanced=!1,req=store.openCursor();req.onsuccess=function(){var cursor=req.result;return cursor?void(0===n?resolve(cursor.key):advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n))):void resolve(null)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function keys(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo,store=dbInfo.db.transaction(dbInfo.storeName,"readonly").objectStore(dbInfo.storeName),req=store.openCursor(),keys=[];req.onsuccess=function(){var cursor=req.result;return cursor?(keys.push(cursor.key),void cursor["continue"]()):void resolve(keys)},req.onerror=function(){reject(req.error)}})["catch"](reject)});return executeCallback(promise,callback),promise}function stringToBuffer(serializedString){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*serializedString.length,len=serializedString.length,p=0;"="===serializedString[serializedString.length-1]&&(bufferLength--,"="===serializedString[serializedString.length-2]&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(i=0;i<len;i+=4)encoded1=BASE_CHARS.indexOf(serializedString[i]),encoded2=BASE_CHARS.indexOf(serializedString[i+1]),encoded3=BASE_CHARS.indexOf(serializedString[i+2]),encoded4=BASE_CHARS.indexOf(serializedString[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return buffer}function bufferToString(buffer){var i,bytes=new Uint8Array(buffer),base64String="";for(i=0;i<bytes.length;i+=3)base64String+=BASE_CHARS[bytes[i]>>2],base64String+=BASE_CHARS[(3&bytes[i])<<4|bytes[i+1]>>4],base64String+=BASE_CHARS[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64String+=BASE_CHARS[63&bytes[i+2]];return bytes.length%3===2?base64String=base64String.substring(0,base64String.length-1)+"=":bytes.length%3===1&&(base64String=base64String.substring(0,base64String.length-2)+"=="),base64String}function serialize(value,callback){var valueType="";if(value&&(valueType=toString$1.call(value)),value&&("[object ArrayBuffer]"===valueType||value.buffer&&"[object ArrayBuffer]"===toString$1.call(value.buffer))){var buffer,marker=SERIALIZED_MARKER;value instanceof ArrayBuffer?(buffer=value,marker+=TYPE_ARRAYBUFFER):(buffer=value.buffer,"[object Int8Array]"===valueType?marker+=TYPE_INT8ARRAY:"[object Uint8Array]"===valueType?marker+=TYPE_UINT8ARRAY:"[object Uint8ClampedArray]"===valueType?marker+=TYPE_UINT8CLAMPEDARRAY:"[object Int16Array]"===valueType?marker+=TYPE_INT16ARRAY:"[object Uint16Array]"===valueType?marker+=TYPE_UINT16ARRAY:"[object Int32Array]"===valueType?marker+=TYPE_INT32ARRAY:"[object Uint32Array]"===valueType?marker+=TYPE_UINT32ARRAY:"[object Float32Array]"===valueType?marker+=TYPE_FLOAT32ARRAY:"[object Float64Array]"===valueType?marker+=TYPE_FLOAT64ARRAY:callback(new Error("Failed to get type for BinaryArray"))),callback(marker+bufferToString(buffer))}else if("[object Blob]"===valueType){var fileReader=new FileReader;fileReader.onload=function(){var str=BLOB_TYPE_PREFIX+value.type+"~"+bufferToString(this.result);callback(SERIALIZED_MARKER+TYPE_BLOB+str)},fileReader.readAsArrayBuffer(value)}else try{callback(JSON.stringify(value))}catch(e){callback(null,e)}}function deserialize(value){if(value.substring(0,SERIALIZED_MARKER_LENGTH)!==SERIALIZED_MARKER)return JSON.parse(value);var blobType,serializedString=value.substring(TYPE_SERIALIZED_MARKER_LENGTH),type=value.substring(SERIALIZED_MARKER_LENGTH,TYPE_SERIALIZED_MARKER_LENGTH);if(type===TYPE_BLOB&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);blobType=matcher[1],serializedString=serializedString.substring(matcher[0].length)}var buffer=stringToBuffer(serializedString);switch(type){case TYPE_ARRAYBUFFER:return buffer;case TYPE_BLOB:return createBlob([buffer],{type:blobType});case TYPE_INT8ARRAY:return new Int8Array(buffer);case TYPE_UINT8ARRAY:return new Uint8Array(buffer);case TYPE_UINT8CLAMPEDARRAY:return new Uint8ClampedArray(buffer);case TYPE_INT16ARRAY:return new Int16Array(buffer);case TYPE_UINT16ARRAY:return new Uint16Array(buffer);case TYPE_INT32ARRAY:return new Int32Array(buffer);case TYPE_UINT32ARRAY:return new Uint32Array(buffer);case TYPE_FLOAT32ARRAY:return new Float32Array(buffer);case TYPE_FLOAT64ARRAY:return new Float64Array(buffer);default:throw new Error("Unkown type: "+type)}}function _initStorage$1(options){var self=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]="string"!=typeof options[i]?options[i].toString():options[i];var dbInfoPromise=new Promise$1(function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction(function(t){t.executeSql("CREATE TABLE IF NOT EXISTS "+dbInfo.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){self._dbInfo=dbInfo,resolve()},function(t,error){reject(error)})})});return dbInfo.serializer=localforageSerializer,dbInfoPromise}function getItem$1(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT * FROM "+dbInfo.storeName+" WHERE key = ? LIMIT 1",[key],function(t,results){var result=results.rows.length?results.rows.item(0).value:null;result&&(result=dbInfo.serializer.deserialize(result)),resolve(result)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function iterate$1(iterator,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT * FROM "+dbInfo.storeName,[],function(t,results){for(var rows=results.rows,length=rows.length,i=0;i<length;i++){var item=rows.item(i),result=item.value;if(result&&(result=dbInfo.serializer.deserialize(result)),result=iterator(result,item.key,i+1),void 0!==result)return void resolve(result)}resolve()},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function setItem$1(key,value,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){void 0===value&&(value=null);var originalValue=value,dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,function(value,error){error?reject(error):dbInfo.db.transaction(function(t){t.executeSql("INSERT OR REPLACE INTO "+dbInfo.storeName+" (key, value) VALUES (?, ?)",[key,value],function(){resolve(originalValue)},function(t,error){reject(error)})},function(sqlError){sqlError.code===sqlError.QUOTA_ERR&&reject(sqlError)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function removeItem$1(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("DELETE FROM "+dbInfo.storeName+" WHERE key = ?",[key],function(){resolve()},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function clear$1(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("DELETE FROM "+dbInfo.storeName,[],function(){resolve()},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function length$1(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+dbInfo.storeName,[],function(t,results){var result=results.rows.item(0).c;resolve(result)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function key$1(n,callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT key FROM "+dbInfo.storeName+" WHERE id = ? LIMIT 1",[n+1],function(t,results){var result=results.rows.length?results.rows.item(0).key:null;resolve(result)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function keys$1(callback){var self=this,promise=new Promise$1(function(resolve,reject){self.ready().then(function(){var dbInfo=self._dbInfo;dbInfo.db.transaction(function(t){t.executeSql("SELECT key FROM "+dbInfo.storeName,[],function(t,results){for(var keys=[],i=0;i<results.rows.length;i++)keys.push(results.rows.item(i).key);resolve(keys)},function(t,error){reject(error)})})})["catch"](reject)});return executeCallback(promise,callback),promise}function _initStorage$2(options){var self=this,dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];return dbInfo.keyPrefix=dbInfo.name+"/",dbInfo.storeName!==self._defaultConfig.storeName&&(dbInfo.keyPrefix+=dbInfo.storeName+"/"),self._dbInfo=dbInfo,dbInfo.serializer=localforageSerializer,Promise$1.resolve()}function clear$2(callback){var self=this,promise=self.ready().then(function(){for(var keyPrefix=self._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var key=localStorage.key(i);0===key.indexOf(keyPrefix)&&localStorage.removeItem(key)}});return executeCallback(promise,callback),promise}function getItem$2(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=self.ready().then(function(){var dbInfo=self._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key);return result&&(result=dbInfo.serializer.deserialize(result)),result});return executeCallback(promise,callback),promise}function iterate$2(iterator,callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length=localStorage.length,iterationNumber=1,i=0;i<length;i++){var key=localStorage.key(i);if(0===key.indexOf(keyPrefix)){var value=localStorage.getItem(key);if(value&&(value=dbInfo.serializer.deserialize(value)),value=iterator(value,key.substring(keyPrefixLength),iterationNumber++),void 0!==value)return value}}});return executeCallback(promise,callback),promise}function key$2(n,callback){var self=this,promise=self.ready().then(function(){var result,dbInfo=self._dbInfo;try{result=localStorage.key(n)}catch(error){result=null}return result&&(result=result.substring(dbInfo.keyPrefix.length)),result});return executeCallback(promise,callback),promise}function keys$2(callback){var self=this,promise=self.ready().then(function(){for(var dbInfo=self._dbInfo,length=localStorage.length,keys=[],i=0;i<length;i++)0===localStorage.key(i).indexOf(dbInfo.keyPrefix)&&keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));return keys});return executeCallback(promise,callback),promise}function length$2(callback){var self=this,promise=self.keys().then(function(keys){return keys.length});return executeCallback(promise,callback),promise}function removeItem$2(key,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=self.ready().then(function(){var dbInfo=self._dbInfo;localStorage.removeItem(dbInfo.keyPrefix+key)});return executeCallback(promise,callback),promise}function setItem$2(key,value,callback){var self=this;"string"!=typeof key&&(key=String(key));var promise=self.ready().then(function(){void 0===value&&(value=null);var originalValue=value;return new Promise$1(function(resolve,reject){var dbInfo=self._dbInfo;dbInfo.serializer.serialize(value,function(value,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key,value),resolve(originalValue)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||reject(e),reject(e)}})})});return executeCallback(promise,callback),promise}function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then(function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)})}}function extend(){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(arg)for(var key in arg)arg.hasOwnProperty(key)&&(isArray(arg[key])?arguments[0][key]=arg[key].slice():arguments[0][key]=arg[key])}return arguments[0]}function isLibraryDriver(driverName){for(var driver in DriverType)if(DriverType.hasOwnProperty(driver)&&DriverType[driver]===driverName)return!0;return!1}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},idb=getIDB();"undefined"==typeof Promise&&"undefined"!=typeof _dereq_&&_dereq_(3);var supportsBlobs,dbContexts,Promise$1=Promise,DETECT_BLOB_SUPPORT_STORE="local-forage-detect-blob-support",toString=Object.prototype.toString,asyncStorage={_driver:"asyncStorage",_initStorage:_initStorage,iterate:iterate,getItem:getItem,setItem:setItem,removeItem:removeItem,clear:clear,length:length,key:key,keys:keys},BASE_CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BLOB_TYPE_PREFIX="~~local_forage_type~",BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,SERIALIZED_MARKER="__lfsc__:",SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER.length,TYPE_ARRAYBUFFER="arbf",TYPE_BLOB="blob",TYPE_INT8ARRAY="si08",TYPE_UINT8ARRAY="ui08",TYPE_UINT8CLAMPEDARRAY="uic8",TYPE_INT16ARRAY="si16",TYPE_INT32ARRAY="si32",TYPE_UINT16ARRAY="ur16",TYPE_UINT32ARRAY="ui32",TYPE_FLOAT32ARRAY="fl32",TYPE_FLOAT64ARRAY="fl64",TYPE_SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER_LENGTH+TYPE_ARRAYBUFFER.length,toString$1=Object.prototype.toString,localforageSerializer={serialize:serialize,deserialize:deserialize,stringToBuffer:stringToBuffer,bufferToString:bufferToString},webSQLStorage={_driver:"webSQLStorage",_initStorage:_initStorage$1,iterate:iterate$1,getItem:getItem$1,setItem:setItem$1,removeItem:removeItem$1,clear:clear$1,length:length$1,key:key$1,keys:keys$1},localStorageWrapper={_driver:"localStorageWrapper",_initStorage:_initStorage$2,iterate:iterate$2,getItem:getItem$2,setItem:setItem$2,removeItem:removeItem$2,clear:clear$2,length:length$2,key:key$2,keys:keys$2},CustomDrivers={},DriverType={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},DefaultDriverOrder=[DriverType.INDEXEDDB,DriverType.WEBSQL,DriverType.LOCALSTORAGE],LibraryMethods=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],DefaultConfig={description:"",driver:DefaultDriverOrder.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},driverSupport={};driverSupport[DriverType.INDEXEDDB]=isIndexedDBValid(),driverSupport[DriverType.WEBSQL]=isWebSQLValid(),driverSupport[DriverType.LOCALSTORAGE]=isLocalStorageValid();var isArray=Array.isArray||function(arg){return"[object Array]"===Object.prototype.toString.call(arg)},LocalForage=function(){function LocalForage(options){_classCallCheck(this,LocalForage),this.INDEXEDDB=DriverType.INDEXEDDB,this.LOCALSTORAGE=DriverType.LOCALSTORAGE,this.WEBSQL=DriverType.WEBSQL,this._defaultConfig=extend({},DefaultConfig),this._config=extend({},this._defaultConfig,options),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return LocalForage.prototype.config=function(options){if("object"===("undefined"==typeof options?"undefined":_typeof(options))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var i in options)"storeName"===i&&(options[i]=options[i].replace(/\W/g,"_")),this._config[i]=options[i];return"driver"in options&&options.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof options?this._config[options]:this._config},LocalForage.prototype.defineDriver=function(driverObject,callback,errorCallback){var promise=new Promise$1(function(resolve,reject){try{var driverName=driverObject._driver,complianceError=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),namingError=new Error("Custom driver name already in use: "+driverObject._driver);if(!driverObject._driver)return void reject(complianceError);if(isLibraryDriver(driverObject._driver))return void reject(namingError);for(var customDriverMethods=LibraryMethods.concat("_initStorage"),i=0;i<customDriverMethods.length;i++){var customDriverMethod=customDriverMethods[i];if(!customDriverMethod||!driverObject[customDriverMethod]||"function"!=typeof driverObject[customDriverMethod])return void reject(complianceError)}var supportPromise=Promise$1.resolve(!0);"_support"in driverObject&&(supportPromise=driverObject._support&&"function"==typeof driverObject._support?driverObject._support():Promise$1.resolve(!!driverObject._support)),supportPromise.then(function(supportResult){driverSupport[driverName]=supportResult,CustomDrivers[driverName]=driverObject,resolve()},reject)}catch(e){reject(e)}});return executeTwoCallbacks(promise,callback,errorCallback),promise},LocalForage.prototype.driver=function(){return this._driver||null},LocalForage.prototype.getDriver=function(driverName,callback,errorCallback){var self=this,getDriverPromise=Promise$1.resolve().then(function(){if(!isLibraryDriver(driverName)){if(CustomDrivers[driverName])return CustomDrivers[driverName];throw new Error("Driver not found.")}switch(driverName){case self.INDEXEDDB:return asyncStorage;case self.LOCALSTORAGE:return localStorageWrapper;case self.WEBSQL:return webSQLStorage}});return executeTwoCallbacks(getDriverPromise,callback,errorCallback),getDriverPromise},LocalForage.prototype.getSerializer=function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);return executeTwoCallbacks(serializerPromise,callback),serializerPromise;
},LocalForage.prototype.ready=function(callback){var self=this,promise=self._driverSet.then(function(){return null===self._ready&&(self._ready=self._initDriver()),self._ready});return executeTwoCallbacks(promise,callback,callback),promise},LocalForage.prototype.setDriver=function(drivers,callback,errorCallback){function setDriverToConfig(){self._config.driver=self.driver()}function initDriver(supportedDrivers){return function(){function driverPromiseLoop(){for(;currentDriverIndex<supportedDrivers.length;){var driverName=supportedDrivers[currentDriverIndex];return currentDriverIndex++,self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(function(driver){return self._extend(driver),setDriverToConfig(),self._ready=self._initStorage(self._config),self._ready})["catch"](driverPromiseLoop)}setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}var currentDriverIndex=0;return driverPromiseLoop()}}var self=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers),oldDriverSetDone=null!==this._driverSet?this._driverSet["catch"](function(){return Promise$1.resolve()}):Promise$1.resolve();return this._driverSet=oldDriverSetDone.then(function(){var driverName=supportedDrivers[0];return self._dbInfo=null,self._ready=null,self.getDriver(driverName).then(function(driver){self._driver=driver._driver,setDriverToConfig(),self._wrapLibraryMethodsWithReady(),self._initDriver=initDriver(supportedDrivers)})})["catch"](function(){setDriverToConfig();var error=new Error("No available storage method found.");return self._driverSet=Promise$1.reject(error),self._driverSet}),executeTwoCallbacks(this._driverSet,callback,errorCallback),this._driverSet},LocalForage.prototype.supports=function(driverName){return!!driverSupport[driverName]},LocalForage.prototype._extend=function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)},LocalForage.prototype._getSupportedDrivers=function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers},LocalForage.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0;i<LibraryMethods.length;i++)callWhenReady(this,LibraryMethods[i])},LocalForage.prototype.createInstance=function(options){return new LocalForage(options)},LocalForage}(),localforage_js=new LocalForage;module.exports=localforage_js},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(require,module,exports){(function(global){function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function checkGlobal(value){return value&&value.Object===Object?value:null}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this}function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;return cache instanceof ListCache&&cache.__data__.length==LARGE_ARRAY_SIZE&&(cache=this.__data__=new MapCache(cache.__data__)),cache.set(key,value),this}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAssign(object,source){return object&&copyObject(source,keys(source),object)}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=initCloneArray(value),!isDeep)return copyArray(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return cloneBuffer(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=initCloneObject(isFunc?{}:value),!isDeep)return copySymbols(value,baseAssign(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=initCloneByTag(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?getAllKeys(value):keys(value);return arrayEach(props||value,function(subValue,key){props&&(key=subValue,subValue=value[key]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))}),result}function baseCreate(proto){return isObject(proto)?objectCreate(proto):{}}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function baseHas(object,key){return hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototype(object)}function baseKeys(object){return nativeKeys(Object(object))}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function cloneBuffer(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function cloneDataView(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}function cloneMap(map,isDeep,cloneFunc){var array=isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map);return arrayReduce(array,addMapEntry,new map.constructor)}function cloneRegExp(regexp){var result=new regexp.constructor(regexp.source,reFlags.exec(regexp));return result.lastIndex=regexp.lastIndex,result}function cloneSet(set,isDeep,cloneFunc){var array=isDeep?cloneFunc(setToArray(set),!0):setToArray(set);return arrayReduce(array,addSetEntry,new set.constructor)}function cloneSymbol(symbol){return symbolValueOf?Object(symbolValueOf.call(symbol)):{}}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key];assignValue(object,key,newValue)}return object}function copySymbols(source,object){return copyObject(source,getSymbols(source),object)}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=object[key];return isNative(value)?value:void 0}function getPrototype(value){return nativeGetPrototype(Object(value))}function getSymbols(object){return getOwnPropertySymbols(Object(object))}function getTag(value){return objectToString.call(value)}function initCloneArray(array){var length=array.length,result=array.constructor(length);return length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input),result}function initCloneObject(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}function initCloneByTag(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor((+object));case dataViewTag:return cloneDataView(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return cloneTypedArray(object,isDeep);case mapTag:return cloneMap(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return cloneRegExp(object);case setTag:return cloneSet(object,isDeep,cloneFunc);case symbolTag:return cloneSymbol(object)}}function indexKeys(object){var length=object?object.length:void 0;return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isNative(value){if(!isObject(value))return!1;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function keys(object){var isProto=isPrototype(object);if(!isProto&&!isArrayLike(object))return baseKeys(object);var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;for(var key in object)!baseHas(object,key)||skipIndexes&&("length"==key||isIndex(key,length))||isProto&&"constructor"==key||result.push(key);return result}function constant(value){return function(){return value}}var LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,moduleExports=freeModule&&freeModule.exports===freeExports?freeExports:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),arrayProto=Array.prototype,objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getOwnPropertySymbols=Object.getOwnPropertySymbols,objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetPrototype=Object.getPrototypeOf,nativeKeys=Object.keys,DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var getLength=baseProperty("length");getOwnPropertySymbols||(getSymbols=function(){return[]}),(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isArray=Array.isArray,isBuffer=Buffer?function(value){return value instanceof Buffer}:constant(!1);module.exports=baseClone}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(require,module,exports){function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function baseFlatten(array,depth,predicate,isStrict,result){var index=-1,length=array.length;for(predicate||(predicate=isFlattenable),result||(result=[]);++index<length;){var value=array[index];depth>0&&predicate(value)?depth>1?baseFlatten(value,depth-1,predicate,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function isFlattenable(value){return isArray(value)||isArguments(value)}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,getLength=baseProperty("length"),isArray=Array.isArray;module.exports=baseFlatten},{}],9:[function(require,module,exports){(function(global){function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0;return!1}function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function checkGlobal(value){return value&&value.Object===Object?value:null}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}function setToPairs(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=[value,value]}),result}function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this}function SetCache(values){var index=-1,length=values?values.length:0;for(this.__data__=new MapCache;++index<length;)this.add(values[index])}function setCacheAdd(value){return this.__data__.set(value,HASH_UNDEFINED),this}function setCacheHas(value){return this.__data__.has(value)}function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;return cache instanceof ListCache&&cache.__data__.length==LARGE_ARRAY_SIZE&&(cache=this.__data__=new MapCache(cache.__data__)),cache.set(key,value),this}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function baseHas(object,key){return hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototype(object)}function baseHasIn(object,key){return key in Object(object)}function baseIsEqual(value,other,customizer,bitmask,stack){return value===other||(null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack))}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;objIsArr||(objTag=getTag(object),objTag=objTag==argsTag?objectTag:objTag),othIsArr||(othTag=getTag(other),othTag=othTag==argsTag?objectTag:othTag);var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag;if(isSameTag&&!objIsObj)return stack||(stack=new Stack),objIsArr||isTypedArray(object)?equalArrays(object,other,equalFunc,customizer,bitmask,stack):equalByTag(object,other,objTag,equalFunc,customizer,bitmask,stack);if(!(bitmask&PARTIAL_COMPARE_FLAG)){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;return stack||(stack=new Stack),equalFunc(objUnwrapped,othUnwrapped,customizer,bitmask,stack)}}return!!isSameTag&&(stack||(stack=new Stack),equalObjects(object,other,equalFunc,customizer,bitmask,stack))}function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(null==object)return!length;for(object=Object(object);index--;){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack;if(customizer)var result=customizer(objValue,srcValue,key,object,source,stack);if(!(void 0===result?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result))return!1}}return!0}function baseIteratee(value){return"function"==typeof value?value:null==value?identity:"object"==typeof value?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseKeys(object){return nativeKeys(Object(object))}function baseMatches(source){var matchData=getMatchData(source);return 1==matchData.length&&matchData[0][2]?matchesStrictComparable(matchData[0][0],matchData[0][1]):function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return isKey(path)&&isStrictComparable(srcValue)?matchesStrictComparable(toKey(path),srcValue):function(object){var objValue=get(object,path);return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function castPath(value){return isArray(value)?value:stringToPath(value)}function createToPairs(keysFunc){return function(object){var tag=getTag(object);return tag==mapTag?mapToArray(object):tag==setTag?setToPairs(object):baseToPairs(object,keysFunc(object))}}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1;var stacked=stack.get(array);if(stacked)return stacked==other;var index=-1,result=!0,seen=bitmask&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(stack.set(array,other);++index<arrLength;){var arrValue=array[index],othValue=other[index];if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack);if(void 0!==compared){if(compared)continue;result=!1;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!seen.has(othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)))return seen.add(othIndex)})){result=!1;break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,bitmask,stack)){result=!1;break}}return stack["delete"](array),result}function equalByTag(object,other,tag,equalFunc,customizer,bitmask,stack){switch(tag){case dataViewTag:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset)return!1;object=object.buffer,other=other.buffer;case arrayBufferTag:return!(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other)));case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+"";case mapTag:var convert=mapToArray;case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG;if(convert||(convert=setToArray),object.size!=other.size&&!isPartial)return!1;var stacked=stack.get(object);return stacked?stacked==other:(bitmask|=UNORDERED_COMPARE_FLAG,stack.set(object,other),equalArrays(convert(object),convert(other),equalFunc,customizer,bitmask,stack));case symbolTag:if(symbolValueOf)return symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial)return!1;for(var index=objLength;index--;){var key=objProps[index];if(!(isPartial?key in other:baseHas(other,key)))return!1}var stacked=stack.get(object);if(stacked)return stacked==other;var result=!0;stack.set(object,other);for(var skipCtor=isPartial;++index<objLength;){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack);if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=!1;break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1);
}return stack["delete"](object),result}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getMatchData(object){for(var result=toPairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1]);return result}function getNative(object,key){var value=object[key];return isNative(value)?value:void 0}function getPrototype(value){return nativeGetPrototype(Object(value))}function getTag(value){return objectToString.call(value)}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);for(var result,index=-1,length=path.length;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}if(result)return result;var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isString(object)||isArguments(object))}function indexKeys(object){var length=object?object.length:void 0;return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function isStrictComparable(value){return value===value&&!isObject(value)}function matchesStrictComparable(key,srcValue){return function(object){return null!=object&&(object[key]===srcValue&&(void 0!==srcValue||key in Object(object)))}}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isNative(value){if(!isObject(value))return!1;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}function hasIn(object,path){return null!=object&&hasPath(object,path,baseHasIn)}function keys(object){var isProto=isPrototype(object);if(!isProto&&!isArrayLike(object))return baseKeys(object);var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;for(var key in object)!baseHas(object,key)||skipIndexes&&("length"==key||isIndex(key,length))||isProto&&"constructor"==key||result.push(key);return result}function identity(value){return value}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}var stringToPath=require("lodash._stringtopath"),LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),arrayProto=Array.prototype,objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetPrototype=Object.getPrototypeOf,nativeKeys=Object.keys,DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var getLength=baseProperty("length");(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return result});var isArray=Array.isArray,toPairs=createToPairs(keys);module.exports=baseIteratee}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._stringtopath":13}],10:[function(require,module,exports){function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function baseSet(object,path,value,customizer){path=isKey(path,object)?[path]:castPath(path);for(var index=-1,length=path.length,lastIndex=length-1,nested=object;null!=nested&&++index<length;){var key=toKey(path[index]);if(isObject(nested)){var newValue=value;if(index!=lastIndex){var objValue=nested[key];newValue=customizer?customizer(objValue,key,nested):void 0,void 0===newValue&&(newValue=null==objValue?isIndex(path[index+1])?[]:{}:objValue)}assignValue(nested,key,newValue)}nested=nested[key]}return object}function castPath(value){return isArray(value)?value:stringToPath(value)}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function eq(value,other){return value===other||value!==value&&other!==other}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}var stringToPath=require("lodash._stringtopath"),INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,isArray=Array.isArray;module.exports=baseSet},{"lodash._stringtopath":13}],11:[function(require,module,exports){(function(global){function checkGlobal(value){return value&&value.Object===Object?value:null}function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}var INFINITY=1/0,symbolTag="[object Symbol]",objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=baseToString}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(require,module,exports){(function(global){function checkGlobal(value){return value&&value.Object===Object?value:null}var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")();module.exports=root}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(require,module,exports){(function(global){function checkGlobal(value){return value&&value.Object===Object?value:null}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=object[key];return isNative(value)?value:void 0}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function memoize(func,resolver){if("function"!=typeof func||resolver&&"function"!=typeof resolver)throw new TypeError(FUNC_ERROR_TEXT);var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key))return cache.get(key);var result=func.apply(this,args);return memoized.cache=cache.set(key,result),result};return memoized.cache=new(memoize.Cache||MapCache),memoized}function eq(value,other){return value===other||value!==value&&other!==other}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isNative(value){if(!isObject(value))return!1;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function toString(value){return null==value?"":baseToString(value)}var baseToString=require("lodash._basetostring"),FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",funcTag="[object Function]",genTag="[object GeneratorFunction]",rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),arrayProto=Array.prototype,objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),splice=arrayProto.splice,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var stringToPath=memoize(function(string){var result=[];return toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result});memoize.Cache=MapCache,module.exports=stringToPath}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._basetostring":11}],14:[function(require,module,exports){function baseClamp(number,lower,upper){return number===number&&(void 0!==upper&&(number=number<=upper?number:upper),void 0!==lower&&(number=number>=lower?number:lower)),number}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toFinite(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function endsWith(string,target,position){string=toString(string),target=baseToString(target);var length=string.length;return position=void 0===position?length:baseClamp(toInteger(position),0,length),position-=target.length,position>=0&&string.indexOf(target,position)==position}var baseToString=require("lodash._basetostring"),toString=require("lodash.tostring"),INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,objectProto=Object.prototype,objectToString=objectProto.toString;module.exports=endsWith},{"lodash._basetostring":11,"lodash.tostring":26}],15:[function(require,module,exports){function baseGet(object,path){path=isKey(path,object)?[path]:castPath(path);for(var index=0,length=path.length;null!=object&&index<length;)object=object[toKey(path[index++])];return index&&index==length?object:void 0}function castPath(value){return isArray(value)?value:stringToPath(value)}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path);return void 0===result?defaultValue:result}var stringToPath=require("lodash._stringtopath"),INFINITY=1/0,symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,objectProto=Object.prototype,objectToString=objectProto.toString,isArray=Array.isArray;module.exports=get},{"lodash._stringtopath":13}],16:[function(require,module,exports){function baseHas(object,key){return hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototype(object)}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function castPath(value){return isArray(value)?value:stringToPath(value)}function getPrototype(value){return nativeGetPrototype(Object(value))}function hasPath(object,path,hasFunc){path=isKey(path,object)?[path]:castPath(path);for(var result,index=-1,length=path.length;++index<length;){var key=toKey(path[index]);if(!(result=null!=object&&hasFunc(object,key)))break;object=object[key]}if(result)return result;var length=object?object.length:0;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isString(object)||isArguments(object))}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isKey(value,object){if(isArray(value))return!1;var type=typeof value;return!("number"!=type&&"symbol"!=type&&"boolean"!=type&&null!=value&&!isSymbol(value))||(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function has(object,path){return null!=object&&hasPath(object,path,baseHas)}var stringToPath=require("lodash._stringtopath"),INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeGetPrototype=Object.getPrototypeOf,getLength=baseProperty("length"),isArray=Array.isArray;module.exports=has},{"lodash._stringtopath":13}],17:[function(require,module,exports){function isNil(value){return null==value}module.exports=isNil},{}],18:[function(require,module,exports){function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function getPrototype(value){return nativeGetPrototype(Object(value))}function isObjectLike(value){return!!value&&"object"==typeof value}function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var objectTag="[object Object]",objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString,nativeGetPrototype=Object.getPrototypeOf;module.exports=isPlainObject},{}],19:[function(require,module,exports){function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function baseHas(object,key){return hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototype(object)}function baseKeys(object){return nativeKeys(Object(object))}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function getPrototype(value){return nativeGetPrototype(Object(value))}function indexKeys(object){var length=object?object.length:void 0;return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function keys(object){var isProto=isPrototype(object);if(!isProto&&!isArrayLike(object))return baseKeys(object);var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;for(var key in object)!baseHas(object,key)||skipIndexes&&("length"==key||isIndex(key,length))||isProto&&"constructor"==key||result.push(key);return result}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeGetPrototype=Object.getPrototypeOf,nativeKeys=Object.keys,getLength=baseProperty("length"),isArray=Array.isArray;module.exports=keys},{}],20:[function(require,module,exports){(function(global){function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}function checkGlobal(value){return value&&value.Object===Object?value:null}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value);return result}function baseKeysIn(object){object=null==object?object:Object(object);var result=[];for(var key in object)result.push(key);return result}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function indexKeys(object){var length=object?object.length:void 0;return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto;return value===proto}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function keysIn(object){for(var index=-1,isProto=isPrototype(object),props=baseKeysIn(object),propsLength=props.length,indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;++index<propsLength;){var key=props[index];skipIndexes&&("length"==key||isIndex(key,length))||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key)}return result}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",reIsUint=/^(?:0|[1-9]\d*)$/,objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Reflect=root.Reflect,enumerate=Reflect?Reflect.enumerate:void 0,propertyIsEnumerable=objectProto.propertyIsEnumerable;enumerate&&!propertyIsEnumerable.call({valueOf:1},"valueOf")&&(baseKeysIn=function(object){return iteratorToArray(enumerate(object))});var getLength=baseProperty("length"),isArray=Array.isArray;module.exports=keysIn}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(require,module,exports){function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(key){return this.has(key)&&delete this.__data__[key]}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0}function hashHas(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;return data[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value,this}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0)return!1;var lastIndex=data.length-1;return index==lastIndex?data.pop():splice.call(data,index,1),!0}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(key){return getMapData(this,key)["delete"](key)}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){return getMapData(this,key).set(key,value),this}function Stack(entries){this.__data__=new ListCache(entries)}function stackClear(){this.__data__=new ListCache}function stackDelete(key){return this.__data__["delete"](key)}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var cache=this.__data__;return cache instanceof ListCache&&cache.__data__.length==LARGE_ARRAY_SIZE&&(cache=this.__data__=new MapCache(cache.__data__)),cache.set(key,value),this}function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&("number"!=typeof key||void 0!==value||key in object)||(object[key]=value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseMerge(object,source,srcIndex,customizer,stack){if(object!==source){if(!isArray(source)&&!isTypedArray(source))var props=keysIn(source);arrayEach(props||source,function(srcValue,key){if(props&&(key=srcValue,srcValue=source[key]),isObject(srcValue))stack||(stack=new Stack),baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(object[key],srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}})}}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=object[key],srcValue=source[key],stacked=stack.get(srcValue);if(stacked)return void assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;isCommon&&(newValue=srcValue,isArray(srcValue)||isTypedArray(srcValue)?isArray(objValue)?newValue=objValue:isArrayLikeObject(objValue)?newValue=copyArray(objValue):(isCommon=!1,newValue=baseClone(srcValue,!0)):isPlainObject(srcValue)||isArguments(srcValue)?isArguments(objValue)?newValue=toPlainObject(objValue):!isObject(objValue)||srcIndex&&isFunction(objValue)?(isCommon=!1,newValue=baseClone(srcValue,!0)):newValue=objValue:isCommon=!1),stack.set(srcValue,newValue),isCommon&&mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack["delete"](srcValue),assignMergeValue(object,key,newValue)}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function copyArray(source,array){var index=-1,length=source.length;for(array||(array=Array(length));++index<length;)array[index]=source[index];return array}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key];assignValue(object,key,newValue)}return object}function createAssigner(assigner){return rest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0;for(customizer=assigner.length>3&&"function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object})}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=object[key];return isNative(value)?value:void 0}function isIndex(value,length){return length=null==length?MAX_SAFE_INTEGER:length,!!length&&("number"==typeof value||reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}function isKeyable(value){var type=typeof value;return"string"==type||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&isLength(getLength(value))&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isNative(value){if(!isObject(value))return!1;var pattern=isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}function toPlainObject(value){return copyObject(value,keysIn(value))}var baseClone=require("lodash._baseclone"),isPlainObject=require("lodash.isplainobject"),keysIn=require("lodash.keysin"),rest=require("lodash.rest"),root=require("lodash._root"),LARGE_ARRAY_SIZE=200,HASH_UNDEFINED="__lodash_hash_undefined__",MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var arrayProto=Array.prototype,objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");Hash.prototype.clear=hashClear,Hash.prototype["delete"]=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype["delete"]=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype["delete"]=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var getLength=baseProperty("length"),isArray=Array.isArray,merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});module.exports=merge},{"lodash._baseclone":7,"lodash._root":12,"lodash.isplainobject":18,"lodash.keysin":20,"lodash.rest":24}],22:[function(require,module,exports){function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function basePickBy(object,predicate){for(var index=-1,props=getAllKeysIn(object),length=props.length,result={};++index<length;){var key=props[index],value=object[key];predicate(value,key)&&(result[key]=value)}return result}function getAllKeysIn(object){return baseGetAllKeys(object,keysIn,getSymbolsIn)}function getPrototype(value){return nativeGetPrototype(Object(value))}function getSymbols(object){return getOwnPropertySymbols(Object(object))}function omitBy(object,predicate){return predicate=baseIteratee(predicate),basePickBy(object,function(value,key){return!predicate(value,key)})}var baseIteratee=require("lodash._baseiteratee"),keysIn=require("lodash.keysin"),getOwnPropertySymbols=Object.getOwnPropertySymbols,nativeGetPrototype=Object.getPrototypeOf;getOwnPropertySymbols||(getSymbols=function(){return[]});var getSymbolsIn=getOwnPropertySymbols?function(object){for(var result=[];object;)arrayPush(result,getSymbols(object)),object=getPrototype(object);return result}:getSymbols,isArray=Array.isArray;module.exports=omitBy},{"lodash._baseiteratee":9,"lodash.keysin":20}],23:[function(require,module,exports){function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array.length;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function basePick(object,props){return object=Object(object),arrayReduce(props,function(result,key){return key in object&&(result[key]=object[key]),result},{})}function toKey(value){if("string"==typeof value||isSymbol(value))return value;var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}var baseFlatten=require("lodash._baseflatten"),rest=require("lodash.rest"),INFINITY=1/0,symbolTag="[object Symbol]",objectProto=Object.prototype,objectToString=objectProto.toString,pick=rest(function(object,props){return null==object?{}:basePick(object,arrayMap(baseFlatten(props,1),toKey))});module.exports=pick},{"lodash._baseflatten":8,"lodash.rest":24}],24:[function(require,module,exports){function apply(func,thisArg,args){var length=args.length;switch(length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT);return start=nativeMax(void 0===start?func.length-1:toInteger(start),0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];switch(start){case 0:return func.call(this,array);case 1:return func.call(this,args[0],array);case 2:return func.call(this,args[0],args[1],array)}var otherArgs=Array(start+1);for(index=-1;++index<start;)otherArgs[index]=args[index];return otherArgs[start]=array,apply(func,this,otherArgs)}}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toFinite(value){if(!value)return 0===value?value:0;if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=value<0?-1:1;return sign*MAX_INTEGER}return value===value?value:0}function toInteger(value){var result=toFinite(value),remainder=result%1;return result===result?remainder?result-remainder:result:0}function toNumber(value){if("number"==typeof value)return value;if(isSymbol(value))return NAN;if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value;value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value;value=value.replace(reTrim,"");var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var FUNC_ERROR_TEXT="Expected a function",INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max;module.exports=rest},{}],25:[function(require,module,exports){function set(object,path,value){return null==object?object:baseSet(object,path,value)}var baseSet=require("lodash._baseset");module.exports=set},{"lodash._baseset":10}],26:[function(require,module,exports){(function(global){function checkGlobal(value){return value&&value.Object===Object?value:null}function baseToString(value){if("string"==typeof value)return value;if(isSymbol(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){return null==value?"":baseToString(value)}var INFINITY=1/0,symbolTag="[object Symbol]",objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:void 0,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:void 0,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;module.exports=toString}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(require,module,exports){function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array);return result}function baseValues(object,props){return arrayMap(props,function(key){return object[key]})}function values(object){return object?baseValues(object,keys(object)):[]}var keys=require("lodash.keys");module.exports=values},{"lodash.keys":19}],28:[function(require,module,exports){function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=cachedSetTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,cachedClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout=setTimeout}catch(e){cachedSetTimeout=function(){throw new Error("setTimeout is not defined")}}try{cachedClearTimeout=clearTimeout}catch(e){cachedClearTimeout=function(){throw new Error("clearTimeout is not defined")}}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||cachedSetTimeout(drainQueue,0)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],29:[function(require,module,exports){module.exports=function(arr,fn,initial){for(var idx=0,len=arr.length,curr=3==arguments.length?initial:arr[idx++];idx<len;)curr=fn.call(null,curr,arr[idx],++idx,arr);return curr}},{}],30:[function(require,module,exports){var Promise=require("bluebird"),superagent=module.exports=require("superagent"),Request=superagent.Request;Promise.config({cancellation:!0});var SuperagentPromiseError=function(message,originalError){var stack;this.message=message,this.name="SuperagentPromiseError",this.originalError=originalError,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),stack=this.stack):stack=new Error(message).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?stack+"\nCaused by:  "+this.originalError.stack:stack}})};SuperagentPromiseError.prototype=new Error,SuperagentPromiseError.prototype.constructor=SuperagentPromiseError,superagent.SuperagentPromiseError=SuperagentPromiseError,Request.prototype.promise=function(){var error,req=this;return new Promise(function(resolve,reject,onCancel){req.end(function(err,res){if("undefined"!=typeof res&&res.status>=400){var msg="cannot "+req.method+" "+req.url+" ("+res.status+")";error=new SuperagentPromiseError(msg),error.status=res.status,error.body=res.body,error.res=res,reject(error)}else err?reject(new SuperagentPromiseError("Bad request",err)):resolve(res)}),onCancel(function(){req.abort()})})},Request.prototype.then=function(){var promise=this.promise();return promise.then.apply(promise,arguments)}},{bluebird:2,superagent:31}],31:[function(require,module,exports){function noop(){}function isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj)null!=obj[key]&&pushEncodedKeyValuePair(pairs,key,obj[key]);return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){return Array.isArray(val)?val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)}):void pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}function parseString(str){for(var parts,pair,obj={},pairs=str.split("&"),i=0,len=pairs.length;i<len;++i)pair=pairs[i],parts=pair.split("="),obj[decodeURIComponent(parts[0])]=decodeURIComponent(parts[1]);return obj}function parseHeader(str){var index,line,field,val,lines=str.split(/\r?\n/),fields={};lines.pop();for(var i=0,len=lines.length;i<len;++i)line=lines[i],index=line.indexOf(":"),field=line.slice(0,index).toLowerCase(),val=trim(line.slice(index+1)),fields[field]=val;return fields}function isJSON(mime){return/[\/+]json\b/.test(mime)}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();return key&&val&&(obj[key]=val),obj},{})}function Response(req,options){options=options||{},this.req=req,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function Request(method,url){var self=this;this._query=this._query||[],this.method=method,this.url=url,this.header={},this._header={},this.on("end",function(){var err=null,res=null;try{res=new Response(self)}catch(e){return err=new Error("Parser is unable to parse the response"),err.parse=!0,err.original=e,err.rawResponse=self.xhr&&self.xhr.responseText?self.xhr.responseText:null,err.statusCode=self.xhr&&self.xhr.status?self.xhr.status:null,self.callback(err)}if(self.emit("response",res),err)return self.callback(err,res);if(res.status>=200&&res.status<300)return self.callback(err,res);var new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err,new_err.response=res,new_err.status=res.status,self.callback(new_err,res)})}function del(url,fn){var req=request("DELETE",url);return fn&&req.end(fn),req}var root,Emitter=require("emitter"),reduce=require("reduce"),requestBase=require("./request-base"),isObject=require("./is-object");root="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var request=module.exports=require("./request").bind(null,Request);request.getXHR=function(){if(!(!root.XMLHttpRequest||root.location&&"file:"==root.location.protocol&&root.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};request.serializeObject=serialize,request.parseString=parseString,request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify},request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse},Response.prototype.get=function(field){return this.header[field.toLowerCase()]},Response.prototype.setHeaderProperties=function(header){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj)this[key]=obj[key]},Response.prototype.parseBody=function(str){var parse=request.parse[this.type];return!parse&&isJSON(this.type)&&(parse=request.parse["application/json"]),parse&&str&&(str.length||str instanceof Object)?parse(str):null},Response.prototype.setStatusProperties=function(status){1223===status&&(status=204);var type=status/100|0;this.status=this.statusCode=status,this.statusType=type,this.info=1==type,this.ok=2==type,this.clientError=4==type,this.serverError=5==type,this.error=(4==type||5==type)&&this.toError(),this.accepted=202==status,this.noContent=204==status,this.badRequest=400==status,this.unauthorized=401==status,this.notAcceptable=406==status,this.notFound=404==status,this.forbidden=403==status},Response.prototype.toError=function(){var req=this.req,method=req.method,url=req.url,msg="cannot "+method+" "+url+" ("+this.status+")",err=new Error(msg);return err.status=this.status,err.method=method,err.url=url,err},request.Response=Response,Emitter(Request.prototype);for(var key in requestBase)Request.prototype[key]=requestBase[key];Request.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},Request.prototype.type=function(type){return this.set("Content-Type",request.types[type]||type),this},Request.prototype.responseType=function(val){return this._responseType=val,this},Request.prototype.accept=function(type){return this.set("Accept",request.types[type]||type),this},Request.prototype.auth=function(user,pass,options){switch(options||(options={type:"basic"}),options.type){case"basic":var str=btoa(user+":"+pass);this.set("Authorization","Basic "+str);break;case"auto":this.username=user,this.password=pass}return this},Request.prototype.query=function(val){return"string"!=typeof val&&(val=serialize(val)),val&&this._query.push(val),this},Request.prototype.attach=function(field,file,filename){return this._getFormData().append(field,file,filename||file.name),this},Request.prototype._getFormData=function(){return this._formData||(this._formData=new root.FormData),this._formData},Request.prototype.send=function(data){var obj=isObject(data),type=this._header["content-type"];if(obj&&isObject(this._data))for(var key in data)this._data[key]=data[key];else"string"==typeof data?(type||this.type("form"),type=this._header["content-type"],"application/x-www-form-urlencoded"==type?this._data=this._data?this._data+"&"+data:data:this._data=(this._data||"")+data):this._data=data;return!obj||isHost(data)?this:(type||this.type("json"),this)},Response.prototype.parse=function(fn){return root.console,this.serialize(fn),this},Response.prototype.serialize=function(fn){return this._parser=fn,this},Request.prototype.callback=function(err,res){var fn=this._callback;this.clearTimeout(),fn(err,res)},Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=!0,err.status=this.status,err.method=this.method,err.url=this.url,this.callback(err)},Request.prototype.timeoutError=function(){var timeout=this._timeout,err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout,this.callback(err)},Request.prototype.withCredentials=function(){return this._withCredentials=!0,this},Request.prototype.end=function(fn){var self=this,xhr=this.xhr=request.getXHR(),query=this._query.join("&"),timeout=this._timeout,data=this._formData||this._data;this._callback=fn||noop,xhr.onreadystatechange=function(){if(4==xhr.readyState){var status;try{status=xhr.status}catch(e){status=0}if(0==status){if(self.timedout)return self.timeoutError();if(self.aborted)return;return self.crossDomainError();
}self.emit("end")}};var handleProgress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",self.emit("progress",e)};this.hasListeners("progress")&&(xhr.onprogress=handleProgress);try{xhr.upload&&this.hasListeners("progress")&&(xhr.upload.onprogress=handleProgress)}catch(e){}if(timeout&&!this._timer&&(this._timer=setTimeout(function(){self.timedout=!0,self.abort()},timeout)),query&&(query=request.serializeObject(query),this.url+=~this.url.indexOf("?")?"&"+query:"?"+query),this.username&&this.password?xhr.open(this.method,this.url,!0,this.username,this.password):xhr.open(this.method,this.url,!0),this._withCredentials&&(xhr.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!isHost(data)){var contentType=this._header["content-type"],serialize=this._parser||request.serialize[contentType?contentType.split(";")[0]:""];!serialize&&isJSON(contentType)&&(serialize=request.serialize["application/json"]),serialize&&(data=serialize(data))}for(var field in this.header)null!=this.header[field]&&xhr.setRequestHeader(field,this.header[field]);return this._responseType&&(xhr.responseType=this._responseType),this.emit("request",this),xhr.send("undefined"!=typeof data?data:null),this},request.Request=Request,request.get=function(url,data,fn){var req=request("GET",url);return"function"==typeof data&&(fn=data,data=null),data&&req.query(data),fn&&req.end(fn),req},request.head=function(url,data,fn){var req=request("HEAD",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.del=del,request["delete"]=del,request.patch=function(url,data,fn){var req=request("PATCH",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.post=function(url,data,fn){var req=request("POST",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req},request.put=function(url,data,fn){var req=request("PUT",url);return"function"==typeof data&&(fn=data,data=null),data&&req.send(data),fn&&req.end(fn),req}},{"./is-object":32,"./request":34,"./request-base":33,emitter:3,reduce:29}],32:[function(require,module,exports){function isObject(obj){return null!=obj&&"object"==typeof obj}module.exports=isObject},{}],33:[function(require,module,exports){var isObject=require("./is-object");exports.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},exports.parse=function(fn){return this._parser=fn,this},exports.timeout=function(ms){return this._timeout=ms,this},exports.then=function(fulfill,reject){return this.end(function(err,res){err?reject(err):fulfill(res)})},exports.use=function(fn){return fn(this),this},exports.get=function(field){return this._header[field.toLowerCase()]},exports.getHeader=exports.get,exports.set=function(field,val){if(isObject(field)){for(var key in field)this.set(key,field[key]);return this}return this._header[field.toLowerCase()]=val,this.header[field]=val,this},exports.unset=function(field){return delete this._header[field.toLowerCase()],delete this.header[field],this},exports.field=function(name,val){return this._getFormData().append(name,val),this}},{"./is-object":32}],34:[function(require,module,exports){function request(RequestConstructor,method,url){return"function"==typeof url?new RequestConstructor("GET",method).end(url):2==arguments.length?new RequestConstructor("GET",method):new RequestConstructor(method,url)}module.exports=request},{}],35:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getFan(id,resolve,reject){var url=FAN_PRODUCT_PROD_HOST+"/apis/v2/fans/"+id;_superagentBluebirdPromise2["default"].get(url).withCredentials().set("X-Personalization-Source",_sourceHeader).end(function(err,res){if(err||!res.ok)reject(err);else{var fan=res&&res.body;_localforage2["default"].setItem("fanapicache",{fan:fan,id:fan.id,timestamp:Date.now()}),resolve(fan)}})}function getFanForId(id){return SWID_RE.test(id)?new _bluebird2["default"](function(resolve,reject){_localforage2["default"].getItem("fanapicache").then(function(cache){var fan=cache&&cache.fan,cacheExpired=Date.now()-cache.timestamp>60*_cacheDuration*1e3;null===fan||cache.id!==id||cacheExpired?getFan(id,resolve,reject):resolve(fan)})["catch"](function(){getFan(id,resolve,reject)})}):_bluebird2["default"].reject(new Error("Invalid SWID"))}function updateSettingsForFanId(id,settings){if(!SWID_RE.test(id))return _bluebird2["default"].reject(new Error("Invalid SWID"));var url=FAN_CORE_PROD_HOST+"/apis/v2/fans/"+id+"/profile/settings/";return _superagentBluebirdPromise2["default"].post(url).withCredentials().send(settings).promise()}function FanAPI(){var _ref=arguments.length<=0||void 0===arguments[0]?DEFAULT_CONFIGURATION:arguments[0],_ref$sourceHeader=_ref.sourceHeader,sourceHeader=void 0===_ref$sourceHeader?DEFAULT_CONFIGURATION.sourceHeader:_ref$sourceHeader,_ref$cacheDuration=_ref.cacheDuration,cacheDuration=void 0===_ref$cacheDuration?DEFAULT_CONFIGURATION.cacheDuration:_ref$cacheDuration;return this instanceof FanAPI?(_sourceHeader=sourceHeader,_cacheDuration=cacheDuration,this):new FanAPI({sourceHeader:sourceHeader,cacheDuration:cacheDuration})}var _superagentBluebirdPromise=require("superagent-bluebird-promise"),_superagentBluebirdPromise2=_interopRequireDefault(_superagentBluebirdPromise),_localforage=require("localforage"),_localforage2=_interopRequireDefault(_localforage),_bluebird=require("bluebird"),_bluebird2=_interopRequireDefault(_bluebird),FAN_PRODUCT_PROD_HOST="//fan.api.espn.com",FAN_CORE_PROD_HOST="//fan.core.api.espn.com",DEFAULT_SOURCE_HEADER="espn-video-player",FAN_API_CACHE_MINUTES=10,SWID_RE=/^\{[\w\-]+\}/,DEFAULT_CONFIGURATION={sourceHeader:DEFAULT_SOURCE_HEADER,cacheDuration:FAN_API_CACHE_MINUTES},_sourceHeader=void 0,_cacheDuration=void 0;FanAPI.prototype.getFanForId=function(id,callback){return getFanForId(id).tap(function(fan){"function"==typeof callback&&callback(fan)})},FanAPI.prototype.getAutoStartForFanId=function(id,callback){return getFanForId(id).then(function(fan){var profile=fan&&fan.profile,settings=profile&&profile.settings,videoAutoStartValue=settings&&settings.videoAutoStart&&settings.videoAutoStart.value;return"2"!==videoAutoStartValue})["catch"](function(){return!0}).tap(function(videoAutoStart){"function"==typeof callback&&callback(videoAutoStart)})},FanAPI.prototype.updateAutoStartForFanId=function(id,autoStart,callback){var videoAutoStartValue=(autoStart?"1":"2").toString(),settings={videoAutoStart:{value:videoAutoStartValue,lastUpdateDate:Date.now()}};return updateSettingsForFanId(id,settings).tap(function(err,res){"function"==typeof callback&&callback(err,res)}).then(function(res){var fan=res&&res.body;_localforage2["default"].setItem("fanapicache",{fan:fan,id:fan.id,timestamp:Date.now()})})["catch"](function(){FanAPI.prototype.updateAutoStartCache(settings)})},FanAPI.prototype.updateAutoStartCache=function(settings){var videoAutoStart=settings.videoAutoStart;_localforage2["default"].getItem("fanapicache").then(function(cache){var fan=cache&&cache.fan,key=void 0;for(key in videoAutoStart)videoAutoStart.hasOwnProperty(key)&&(fan.profile.settings.videoAutoStart[key]=videoAutoStart[key]);_localforage2["default"].setItem("fanapicache",{fan:fan,id:fan.id,timestamp:Date.now()})})["catch"](function(){})},FanAPI.prototype.getUidsForFanId=function(id,callback){function hasUid(preference){return preference.metaData.team||preference.metaData.sport}function collectUids(preference){return preference.metaData.team?preference.metaData.team.uid:preference.metaData.sport?preference.metaData.sport.uid:null}return getFanForId(id).then(function(fan){var preferences=fan&&fan.preferences;return preferences.filter(hasUid).map(collectUids)})["catch"](function(){return[]}).tap(function(uids){"function"==typeof callback&&callback(uids)})},module.exports=FanAPI},{bluebird:2,localforage:6,"superagent-bluebird-promise":30}],36:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var _FanAPI=require("./FanAPI"),_FanAPI2=_interopRequireDefault(_FanAPI);module.exports=_FanAPI2["default"]},{"./FanAPI":35}],37:[function(require,module,exports){module.exports={name:"espn-video-player",publishConfig:{registry:"http://maven2.corp.espn3.com/content/repositories/espn-npm/"},repository:{type:"git",url:"git@code.espn.com:webdev/video.git"},scripts:{test:"NODE_ENV=test ./node_modules/.bin/mocha --reporter spec --timeout 10000 test/test.js","test-pages":"node test/pages/generate.js","network-tests":"grunt && node test/pages/webdriver-tests.js",postversion:"git push && git push --tags",copy2cdn:"cp distribution/* /Volumes/www_espn/prod/scripts/video-player-replacement"},version:"2.6.1",dependencies:{"espn-web-player-bundle":"1.5.1"},devDependencies:{async:"^2.0.1","body-parser":"^1.15.2",cheerio:"^0.20.0",colors:"^1.1.2","cookie-cutter":"^0.2.0",express:"^4.14.0","express-xml-bodyparser":"^0.3.0",grunt:"0.4.5","grunt-browserify":"^5.0.0","grunt-contrib-concat":"0.4.0","grunt-contrib-connect":"0.8.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-jshint":"latest","grunt-contrib-qunit":"0.5.2","grunt-contrib-requirejs":"0.4.4","grunt-contrib-uglify":"^2.0.0","grunt-contrib-watch":"^1.0.0","grunt-jsbeautifier":"^0.2.10","grunt-shell":"^1.3.1",inherits:"^2.0.1",jsdom:"^9.5.0",lodash:"^4.0.0","lodash.endswith":"^4.0.0","lodash.get":"^4.0.0","lodash.has":"^4.0.0","lodash.isnil":"^4.0.0","lodash.merge":"^4.0.0","lodash.omitby":"^4.0.0","lodash.pick":"^4.0.0","lodash.set":"^4.0.0","lodash.values":"^4.0.0",mocha:"latest","phantomjs-prebuilt":"^2.1.7",request:"^2.75.0","selenium-webdriver":"^3.0.0-beta-2",should:"latest","watch-fanapi":"^1.6.3",watchify:"^3.7.0"}}},{}],38:[function(require,module,exports){!function($){function getCustomMetaData(customMetaDataMap,_player,clipMediaInfo){var embededPlayerId=_player.embeddedPlayerId||"vjs_video_1",customMetaData={},$targerReplaceEl=$("#"+embededPlayerId),$videoContainer=$targerReplaceEl.closest("[data-video]"),$videoArticle=$targerReplaceEl.closest("article"),$body=$("body");return customMetaDataMap=_.merge({},customMetaDataMaps["default"],customMetaDataMap),Object.keys(customMetaDataMap).forEach(function(customMetaDataKey){customMetaData[customMetaDataKey]=customMetaDataMap[customMetaDataKey](_player,clipMediaInfo,{$targerReplaceEl:$targerReplaceEl,$videoContainer:$videoContainer,$videoArticle:$videoArticle,$body:$body})}),_.omitBy(customMetaData,_.isNil)}var _=require("./lodash"),cookiecutter=require("cookie-cutter"),containedInSection=function(){var defaultSections={"#favfeed":"favorites","#news-feed":"news","#article-feed":"articles","#now-feed":"now",".lightbox-container":"popup","#gamepackage-gamebreak":"gamebreak",".col-two":"middlecolumn",".col-one":"leftcolumn"};return function($el,sections){sections=sections||defaultSections;for(var sectionId in sections)if($el.closest(sectionId).length)return sections[sectionId]}}(),NotApplicableForVODTracking=function(){return"Not Applicable"},customMetaDataMaps={"default":{ContentType:function(){return"Video"},SWID:function(){return _.get(window,"espn.core.SWID")||cookiecutter.get("SWID")},Orientation:function(){if(window.espn_ui&&"desktop"===window.espn_ui.deviceType)return window.espn_ui.deviceType;var width,height;return _.has(window,"$.fn.width")?(width=$(window).width(),height=$(window).height()):(width=window.innerWidth,height=window.innerHeight),width>height?"Landscape":"Portrait"},UserAgent:function(){return _.get(window,"navigator.userAgent")},Network:NotApplicableForVODTracking,Segment:NotApplicableForVODTracking,AirDate:NotApplicableForVODTracking,AirTime:NotApplicableForVODTracking,AiringID:NotApplicableForVODTracking,ProgramCode:NotApplicableForVODTracking,SportCode:NotApplicableForVODTracking,ClosedCaptioning:NotApplicableForVODTracking,AccessMethod:NotApplicableForVODTracking,AffiliateID:NotApplicableForVODTracking,AffiliateName:NotApplicableForVODTracking,PartnerPlayer:NotApplicableForVODTracking},FC:{Site:function(){return _.get(window,"espn.track.data.omniture.site")},TrackingServer:function(){return _.get(window,"s_omni.trackingServer")},Edition:function(){return _.get(window,"espnfc.config.edition")},Language:function(){return _.get(window,"espnfc.config.language")},Sport:function(_player,clipMediaInfo,els){return _.get(window,"espn.track.data.omniture.sport")||els.$body.data("sport")},League:function(_player,clipMediaInfo,els){var league=$("video").closest("article").find(".tags li:first-child a").text();return league||_.get(window,"espn.track.data.omniture.league")||_.get(window,"espn.track.data.omniture.section")},PlayLocation:function(){return _.get(window,"espn.track.data.omniture.pageName")},InsiderStatus:function(){return _.get(window,"espnfc.insider.access")?"yes":"no"},LoginStatus:function(){return _.get(window,"espn.core.loggedIn")?"[Registered:Logged in Active]":""},Personalization:function(){return _.get(window,"espn.track.favStatus")},StoryID:function(_player,clipMediaInfo,els){return $("video").closest("article").data("content-id")}},sCore:{UNID:function(){return window.unid?window.unid.get()||"":""},Site:function(){return _.get(window,"espn.track.data.omniture.site")},TrackingServer:function(){return _.get(window,"s_omni.trackingServer")},VideoType:function(){return"VOD"},Edition:function(){var language=_.get(window,"espn.i18n.lang")||"",region=_.get(window,"espn.i18n.country")||"";return language+"-"+region},Language:function(){return _.get(window,"espn.i18n.lang")},Sport:function(_player,clipMediaInfo,els){return els.$body.data("sport")||_.get(window,"espn.track.data.omniture.sport")},Placement:function(_player,clipMediaInfo,els){var pageName=_.get(window,"espn.track.data.omniture.pageName")||"index",pageColumn=containedInSection(els.$videoArticle)||"standalone";return pageName+":"+pageColumn},PlayLocation:function(){return _.get(window,"espn.track.data.omniture.pageName")},League:function(){return _.get(window,"espn.track.data.omniture.league")},InsiderStatus:function(){return/(has insider\:yes)|(insider-yes)/.test(_.get(window,"espn.memberservices.insider")||"")?"yes":"no"},LoginStatus:function(){return _.get(window,"espn.core.loggedIn")?"[Registered:Logged in Active]":""},Personalization:function(){return _.get(window,"espn.track.favStatus")},Embedded:function(_player){return _.get(_player,"_embedOptions.wasUserInitiated")?"no":"yes"},GameID:function(){return _.get(window,"espn.gamepackage.gameId")},StoryID:function(_player,clipMediaInfo,els){return els.$videoArticle.data("id")}}};Object.keys(customMetaDataMaps).forEach(function(siteKey){exports[siteKey]=function(_player,clipMediaInfo){var generated=getCustomMetaData(customMetaDataMaps[siteKey],_player,clipMediaInfo);return generated}})}(jQuery)},{"./lodash":41,"cookie-cutter":4}],39:[function(require,module,exports){"use strict";var _=require("./lodash");exports.getDeprecated=function(name){return function(){}};var localeByHostEnds={"espndeportes.com":"es-us","espndeportes.espn.com":"es-us","espndeportes.espnqa.com":"es-us",".us":"en-us",".espnfc.com":"en-www",".com":"en-us",".co.uk":"en-gb",".com.au":"en-au",".in":"en-in",".com.mx":"es-mx",".com.co":"es-co",".com.ve":"es-ve",".cl":"es-cl"};exports.isClipId=function(id){return/^[0-9]*$/.test(id)||"string"==typeof id&&id.indexOf(":")!==-1},exports.detectLocale=function(){var locale=_.get(window,"espn.i18n.lang"),country=_.get(window,"espn.i18n.country");if(locale&&country)return locale+"-"+country;var hostname=window.location.hostname||"";for(var hostEnds in localeByHostEnds)if(_.endsWith(hostname,hostEnds))return localeByHostEnds[hostEnds];return"en-us"},exports.embeddedPlay=function(){function startPlaylistVideo($video,userInitiated){var videoId=$.parseUri($video.attr("href")).queryKey.id||null,options=$video&&$video.length?$video.metadata():{},info=$video.siblings("span").html();null!==info&&$("#videoInfo").html(info),options.endCard=options.endCard||"false",($video.parent().hasClass("last")||$playlist.children("li").length<=1)&&(options.endCard="true"),"undefined"==typeof options.playRelatedExternally&&(options.playRelatedExternally="false"),"true"==options.playRelatedExternally&&(advance=!1,options.endCard="true");var globalVideosOptions=_.get(window,"ESPN_GLOBALS.videoPlayers");if(globalVideosOptions){var globalVideoOptions,$videoTarget,targetReplaceId;for(var videoClass in globalVideosOptions)if(globalVideoOptions=globalVideosOptions[videoClass],$videoTarget=$("."+videoClass).first(),$videoTarget.length||1===Object.keys(globalVideosOptions).length){_.merge(options,globalVideoOptions),$videoTarget.length&&(targetReplaceId=$videoTarget.attr("id"),targetReplaceId||($videoTarget.attr("id",videoClass),targetReplaceId=videoClass),options.targetReplaceId=targetReplaceId);break}}options.endCard&&(options.endCard="true"===options.endCard||options.endCard===!0),options.cms||(options.cms="espn");var $videoPlayer=$("div.videoplayer");$videoPlayer.addClass("videoplayer-show"),options.width&&$videoPlayer.width(options.width),options.height&&$videoPlayer.height(options.height),$videoPlayer.css("position","relative"),espn.video.play(parseInt(videoId,10),options,userInitiated)}function advancePlaylist($item,userInitiated){$item.addClass("active").siblings().removeClass("active"),$item.next().addClass("next").siblings().removeClass("next"),0===$item.next().length&&$(".video-player").hasClass("next")&&($(".mod-video-playlist").hide(),$(".video-player").removeClass("with-playlist")),startPlaylistVideo($item.find("a"),userInitiated)}var playlistEndHandle,$currentItem,$=window.jQuery,espn=window.espn||{},advance=!0,$first=$("#videotoplay"),$playlist=$(".mod-video-playlist ul");startPlaylistVideo($first,!1),$playlist.children("li").bind("click",function(e){e.preventDefault(),advance=!0,$currentItem=$(this),advancePlaylist($currentItem,!0)}),playlistEndHandle=$.subscribe("espn.video.complete",function(){advance&&($currentItem=$playlist.find("li.active"),$currentItem.next().length>0&&advancePlaylist($currentItem.next(),!1))})}},{"./lodash":41}],40:[function(require,module,exports){!function($){"use strict";function ESPNLegacyVideoPlayer(){this.$targetElement=null,this.autoClose=!1,this.clip=null,this.cms=null,this.currentIndex=null,this.currentPlayingId=null,this.hasPlaylist=null,this.height=null,this.isPlaying=!1,this.originalIndex=null,this.playVerified=null,this.playVideo=null,this.playerElement=null,this.playerReady=null,this.state=null,this.targetReplaceId=null,this.targetElement=null,this.useExternalIdFilter=null,this.videoPlaylist=null,this.width=null,this._duration=NaN,this._startedCurrentMedia=!1,this._currentMediaId="",this._adPlaying=!1,this._embedGuid=null,this._embedEl=null,this._embedOptions=null,this._embedCallback=null,this._propogatedEvents=null,ESPNVideoPlayer.prototype.constructor.apply(this,arguments)}var _=require("./lodash"),ESPNLegacyHelperScripts=require("./espn-legacy-helper-scripts.js"),inherits=require("inherits"),jsLoaded=!1;inherits(ESPNLegacyVideoPlayer,ESPNVideoPlayer),Object.defineProperty(ESPNLegacyVideoPlayer.prototype,"duration",{set:function(duration){duration!==this._duration&&(this._duration=duration,isNaN(duration)||ESPNLegacyVideoPlayer.publish("espn.video.totalTimeChanged",[{totalTime:duration},this.embeddedPlayerId,"totalTimeChanged"]))},get:function(){return this._duration}}),Object.defineProperty(ESPNLegacyVideoPlayer.prototype,"playType",{get:function(){return this.bundle&&this.bundle.startType}}),Object.defineProperty(ESPNLegacyVideoPlayer.prototype,"$container",{get:function(){return this.player&&this.player.el?$(this.player.el()).parent():$()}}),Object.defineProperty(ESPNLegacyVideoPlayer.prototype,"autoPlay",{get:function(){return!!this.player&&this.player.autoplay()}}),Object.defineProperty(ESPNLegacyVideoPlayer.prototype,"currentMediaId",{set:function(currentMediaId){currentMediaId!==this._currentMediaId&&(this._currentMediaId=currentMediaId,this._startedCurrentMedia=!1)},get:function(){return this._currentMediaId}}),ESPNLegacyVideoPlayer.prototype.init=function(){this._propogatedEvents=[],this.bindEvents()},ESPNLegacyVideoPlayer.prototype.bindEvents=function(){this._propogateToLegacyEvent("useractive","espn.video.hoverIn",$.noop),this._propogateToLegacyEvent("userinactive","espn.video.hoverOut",$.noop),this._propogateToLegacyEvent("ads-ad-started","espn.video.ad.start",function(){var adTimeout=_.get(this,"player.ads.adTimeoutTimeout")||15,duration=_.get(this,"player.ads.ad.duration")||15;return this._adPlaying=!0,[duration,adTimeout,this.player.id(),"ad.start"]}.bind(this)),this._propogateToLegacyEvent("adend","espn.video.ad.end",function(){return this._adPlaying=!1,[{},this.player.id(),"ad.end"]}.bind(this)),this._propogateToLegacyEvent("loadedplayersource","espn.video.playerjsReady"),this.onDurationChange=this.onDurationChange.bind(this),this.player.on("durationchange",this.onDurationChange),this.onLoadStart=this.onLoadStart.bind(this),this.player.on("loadstart",this.onLoadStart),this.onContentStartedPlaying=this.onContentStartedPlaying.bind(this),this.player.on("playing",this.onContentStartedPlaying),this.onEnded=this.onEnded.bind(this),this.player.on("ended",this.onEnded),this.onContentLoaded=this.onContentLoaded.bind(this),this.player.on("espn.contentloaded",this.onContentLoaded),this._propogateToLegacyEvent("fullscreenchange","espn.video.fullscreenChanged"),this._propogateToLegacyEvent("loadedplayersource","espn.video.playerjsReady"),this._propogateToLegacyEvent("loadeddata","espn.video.loadComplete"),this._propogateToLegacyEvent("timeupdate","espn.video.playheadTimeChanged",function(){return[{bandwidth:NaN,playheadTime:this.player.currentTime()},this.embeddedPlayerId,"playheadTimeChanged"]}),this._propogateToLegacyEvent("pause","espn.video.pause",function(){return[{state:"paused"},this.embeddedPlayerId,"stateChanged "]}),this._propogateToLegacyEvent("posterchange","espn.video.thumbnailReady"),this._propogateToLegacyEvent("switch","espn.video.switch",function(){return[this.autoPlay,this.currentMediaId,""]}),this._propogateToLegacyEvent("seeked","espn.video.seeked"),this._propogateToLegacyEvent("volumechange","espn.video.volumeChanged",function(){return[{volume:this.player.volume()},this.embeddedPlayerId,"volumeChanged"]}),this._propogateToLegacyEvent("loadedmetadata","espn.video.metadataReady")},ESPNLegacyVideoPlayer.prototype.onContentLoaded=function(evt,data){var clipId=data&&data.clipId&&parseInt(data.clipId,10)||data&&data.id;clipId&&(this.currentMediaId=clipId),this.clip={id:this.currentMediaId,guid:data&&data.id,posterImages:{full:{href:data&&data.mediainfo&&data.mediainfo.poster}}}},ESPNLegacyVideoPlayer.prototype.onLoadStart=function(){var currentMedia=this.player.mediainfo;jsLoaded||(jsLoaded=!0,ESPNLegacyVideoPlayer.publish("espn.video.ready",[{},this.embeddedPlayerId,"apiReady","espn.video.ready"]),ESPNLegacyVideoPlayer.publish("espn.video.init",[{},this.embeddedPlayerId,"apiReady","espn.video.ready"])),currentMedia&&ESPNLegacyVideoPlayer.publish("espn.video.embedCodeChanged",[this._getShimmedEmbedCode(),this.embeddedPlayerId,"embedCodeChanged"])},ESPNLegacyVideoPlayer.prototype.onEnded=function(){(this.player||{}).ads&&"content-playback"!==this.player.ads.state||ESPNLegacyVideoPlayer.publish("espn.video.complete",[{},this.embeddedPlayerId,"playComplete"])},ESPNLegacyVideoPlayer.prototype.onDurationChange=function(){var currentMedia=(this.player||{}).mediainfo;this.duration=currentMedia?currentMedia.duration:NaN},ESPNLegacyVideoPlayer.prototype.onContentStartedPlaying=function(){this._startedCurrentMedia||(this._startedCurrentMedia=!0,ESPNLegacyVideoPlayer.publish("espn.video.embedCodeChanged",["init"]),ESPNLegacyVideoPlayer.publish("espn.video.volumeChanged",[{volume:this.player.volume()}],this.embeddedPlayerId,"volumeChanged"),ESPNLegacyVideoPlayer.publish("espn.video.contentStarted",[this.currentMediaId,this.playType]),ESPNLegacyVideoPlayer.publish("espn.video.bitrateChanged",[{videoBitrate:NaN},this.embeddedPlayerId,"bitrateChanged"]),ESPNLegacyVideoPlayer.publish("espn.video.startContentDownload",[{streamURL:_.get(this,"player.mediainfo.sources.0.src".split("."))},this.embeddedPlayerId,"bitrateChanged"]),ESPNLegacyVideoPlayer.publish("espn.video.play",[{state:"playing"},this.embeddedPlayerId,"stateChanged"]),ESPNLegacyVideoPlayer.publish("espn.video.contentStarted",["",this.embeddedPlayerId,"contentStarted"]))},ESPNLegacyVideoPlayer.prototype.onLoadedMetaData=function(){},ESPNLegacyVideoPlayer.prototype.embed=function(guid,el,options,callback){this._embedGuid=guid,this._embedEl=el,this._embedOptions=options,this._embedCallback=callback,this._setTarget(el),this.currentMediaId=guid||options.clipId,ESPNLegacyVideoPlayer.publish("espn.video.embed.begin"),ESPNLegacyVideoPlayer.publish("espn.video.playerLoading",[{},this.targetReplaceId,"playerLoading"]);var embeddedPlayer=ESPNVideoPlayer.prototype.embed.call(this,guid,el,options,function(){this.init();var embeddedPlayerEl=this.player.el();embeddedPlayerEl&&embeddedPlayerEl.getAttribute&&(this.embeddedPlayerId=embeddedPlayerEl.getAttribute("id")),ESPNLegacyVideoPlayer.publish("espn.video.playerEmbedded",[{},this.embeddedPlayerId,"playerEmbedded"]),ESPNLegacyVideoPlayer.publish("espn.video.authTokenChanged",[{auth_token:""},this.embeddedPlayerId,"authTokenChanged"]),this.currentMediaId||this.onLoadStart(),(callback||$.noop).apply(this,arguments)}.bind(this));return embeddedPlayer},ESPNLegacyVideoPlayer.prototype.buildModuleParams=ESPNLegacyHelperScripts.getDeprecated("buildModuleParams"),ESPNLegacyVideoPlayer.prototype.handleEvents=ESPNLegacyHelperScripts.getDeprecated("handleEvents"),ESPNLegacyVideoPlayer.prototype.pauseVideo=function(){this.player.pause()},ESPNLegacyVideoPlayer.prototype.skipAd=function(){if(this._adPlaying){var skipAdEmbedOptions=_.merge({},this._embedOptions),mediainfo=this.player&&this.player.mediainfo,guid=this._embedGuid;mediainfo&&(guid=mediainfo.reference_id,_.merge(skipAdEmbedOptions,{clipId:parseInt(mediainfo.id,10),cerebroId:mediainfo.reference_id})),this._currentMediaId="",this._adPlaying=!1,this.unembed(!1),mediainfo&&this.embed(guid,this._embedEl,_.merge({},skipAdEmbedOptions,{preroll:!1,postroll:!1}))}},ESPNLegacyVideoPlayer.prototype.switchVideo=function(options){if("object"==typeof options&&0!==Object.keys(options||{}).length){var guid;options.id?(options.clipId=options.id,delete options.id):options.cerebroId&&(guid=options.cerebroId,delete options.cerebroId),options.cms&&(options.clipSource=options.cms,delete options.cms),(guid||options.clipId)&&ESPNVideoPlayer.prototype.switchVideo.call(this,guid,options)}},ESPNLegacyVideoPlayer.prototype.unbindEvents=function(){this.player&&((this._propogatedEvents||[]).forEach(function(propogatedEvent){this.player.off(propogatedEvent[0],propogatedEvent[1])}.bind(this)),this._propogatedEvents=[],this.player.off("espn.contentloaded",this.onContentLoaded),this.player.off("durationchange",this.onDurationChange),this.player.off("loadstart",this.onLoadStart),this.player.off("playing",this.onContentStartedPlaying))},ESPNLegacyVideoPlayer.prototype.container=function(videoId){return null===this.$targetElement&&null===this._embedEl&&($("#player--player").length?this._embedEl="player--player":this._embedEl=videoId),$("#"+this._embedEl).parent()},ESPNLegacyVideoPlayer.prototype.destroy=function(){this.player&&this.unbindEvents();try{this.unembed(!1),$("#"+this._embedEl).remove()}catch(e){}this.$targetElement=null,this.playerElement=null,this.targetElement=null,this._embedGuid=null,this._embedEl=null,this._embedOptions=null,this._embedCallback=null,ESPNLegacyVideoPlayer.publish("espn.video.complete")},ESPNLegacyVideoPlayer.prototype._getShimmedEmbedCode=function(){var currentMedia=this.player.mediainfo;return{description:currentMedia.description,embedCode:currentMedia.id,hostedAtURL:window?window.location.href:"",isLiveStream:!1,lineup:null,promo:null,providerCode:"?",streamUrl:_.get(currentMedia,"sources.0.src".split(".")),time:this.duration,title:currentMedia.name}},ESPNLegacyVideoPlayer.prototype._setTarget=function(target){"string"==typeof target?(0===target.indexOf("#")&&(target=target.substring(1)),0===target.indexOf(".")?this.targetElement=$(target).get(0):this.targetElement=document.getElementById(target)):target&&target.setAttribute&&(this.targetElement=target),this.$targetElement=$(this.targetElement),this.targetReplaceId=this.$targetElement.attr("id")},ESPNLegacyVideoPlayer.prototype._propogateToLegacyEvent=function(videoPlayerEvent,legacyEventName,getLegacyParams){legacyEventName=legacyEventName||"";var _eventPropogationMapper=function(){ESPNLegacyVideoPlayer.publish(legacyEventName,getLegacyParams?getLegacyParams.apply(this,arguments):[{},this.targetReplaceId,legacyEventName.split(".").pop()])}.bind(this);this._propogatedEvents.push([videoPlayerEvent,_eventPropogationMapper]),this.player.on(videoPlayerEvent,_eventPropogationMapper)},ESPNLegacyVideoPlayer.publish=function(){$.publish(arguments[0],arguments[1])},module.exports=ESPNLegacyVideoPlayer}(jQuery)},{"./espn-legacy-helper-scripts.js":39,"./lodash":41,inherits:5}],41:[function(require,module,exports){module.exports={has:require("lodash.has"),get:require("lodash.get"),merge:require("lodash.merge"),omitBy:require("lodash.omitby"),pick:require("lodash.pick"),values:require("lodash.values"),set:require("lodash.set"),endsWith:require("lodash.endswith"),isNil:require("lodash.isnil")}},{"lodash.endswith":14,"lodash.get":15,"lodash.has":16,"lodash.isnil":17,"lodash.merge":21,"lodash.omitby":22,"lodash.pick":23,"lodash.set":25,"lodash.values":27}],42:[function(require,module,exports){"use strict";var _=require("./lodash"),Cookie=require("cookie-cutter"),ESPNLegacyVideoPlayer=require("./espn-legacy-video-player.js"),ESPNLegacyHelperScripts=require("./espn-legacy-helper-scripts.js"),ESPNCustomMetaDataGenerators=require("./espn-custom-meta-data-generators.js"),FanApi=require("watch-fanapi"),Util=require("../mobile/Util"),packageInfo=require("../../package.json"),_defaultPlayerSelectors=["#player","#videoPlayer","#video",".videoplayer"];module.exports=function($,espn){function play(clipId,options,wasUserInitiated,callback){if(callback=callback||$.noop,options=options||{},_player&&_player.player){if(!arguments.length)return _player.player.play();if(1===arguments.length)return _player.switchVideo({clipId:clipId})}_lookupRegion(function(region){var cerebroId=options.cerebroId,embedOptions=_parseOptions(_.merge({region:region,id:clipId},options),wasUserInitiated);ESPNLegacyHelperScripts.isClipId(options.id)||cerebroId||(cerebroId=options.id,delete options.id,options.cerebroId=cerebroId,_clipId=cerebroId);var targetReplaceId=_getTargetReplaceId(options.targetReplaceId),$targetReplaceContainer=_initTargetEl(targetReplaceId,options),isFirefox="undefined"!=typeof InstallTrigger;if(!isFirefox&&$targetReplaceContainer){var targetContainerWidth=$targetReplaceContainer.width(),targetContainerHeight=Math.max($targetReplaceContainer.height(),9*targetContainerWidth/16);(targetContainerWidth<400||targetContainerHeight<300)&&_.set(embedOptions,"advertising.adTechOrder",["html5","flash"])}_siteSpecificCustomMetaData=options.customMetaData||_.get(embedOptions.analytics,"adobeDCR.ESPN_CUSTOM_METADATA")||ESPNCustomMetaDataGenerators.sCore,"string"==typeof _siteSpecificCustomMetaData&&_siteSpecificCustomMetaData in ESPNCustomMetaDataGenerators&&(_siteSpecificCustomMetaData=ESPNCustomMetaDataGenerators[_siteSpecificCustomMetaData]),_clipId=clipId,_wasUserInitiated=embedOptions.wasUserInitiated,espn.video.player=_player=new ESPNLegacyVideoPlayer,_player.ready(function(){_player.embed(cerebroId,targetReplaceId,embedOptions,function(){"function"!=typeof _.get(_player,"player.ads")||embedOptions.preroll||embedOptions.postroll||_player.player.ads(),_player.player.off("espn.contentloaded",_setCustomMetaData),
_player.player.on("espn.contentloaded",_setCustomMetaData),"function"==typeof callback&&callback(_player)})})})}function embed(options,callback){play(null,options,null,callback)}function pause(){_player&&_player.pause()}function insertAd(options,cms){_player&&_player.unembed(),_lookupRegion(function(region){var targetReplaceId=_getTargetReplaceId(options.targetReplaceId),clipSource=options.adSet||cms||options.cms,advertisingConfig=_getAdvertisingConfig(clipSource,region,options.siteSection);espn.video.player=_player=new ESPNLegacyVideoPlayer,_player.ready(function(){var adEndEventHandle,adEnded=!1,embedded=!1,afterEmbedAndAdEnd=function(){adEnded&&embedded&&(_player.destroy(),$.unsubscribe(adEndEventHandle))};adEndEventHandle=$.subscribe("espn.video.ad.end",function(){adEnded=!0,afterEmbedAndAdEnd()}),_player.embed(void 0,targetReplaceId,{advertising:{siteSectionId:options.siteSection,assetId:options.videoID,beforeAdManager:function(adOptions){return _updateAdOptions(adOptions,advertisingConfig)}},adOnly:!0,clipSource:clipSource},function(){embedded=!0,afterEmbedAndAdEnd()})})})}function remove(){_player&&(_player.destroy(),espn.video.player=_player=null)}function skipAd(){_player&&_player.skipAd()}function getAutoPlay(options,p13nVideoAutoStart,callback){if(options=options||{},callback=callback||options.callback||$.noop,_player&&"function"==typeof _player.autoplay)return callback(_player.autoplay());var fanApi=new FanApi,swid=_.get(window,"espn.core.SWID")||Cookie.get("SWID"),autoPlay=!0,vas=Cookie.get("VAS");vas&&(autoPlay=2===parseInt(vas,10)),"string"==typeof swid&&0===swid.indexOf("{")?fanApi.getAutoStartForFanId(swid,function(autoStart){autoPlay=_autoplay="boolean"==typeof autoStart?autoStart:autoPlay,callback&&callback(autoPlay)}):callback&&callback(autoPlay)}function _setCustomMetaData(evt,contentLoadedData){if(_player){var metadata=_.merge({},_getDefaultClipMetadata(contentLoadedData),"function"==typeof _siteSpecificCustomMetaData?_siteSpecificCustomMetaData(_player,contentLoadedData.mediainfo):_siteSpecificCustomMetaData);_player.analytics.configure(_.set({},"adobeDCR.ESPN_CUSTOM_METADATA",metadata))}}function _guessSiteFromSiteSectionId(siteSectionId){siteSectionId=siteSectionId||"";for(var prefix in sitesBySiteSectionIdPrefix)if(0===siteSectionId.indexOf(prefix))return sitesBySiteSectionIdPrefix[prefix];return"espn"}function _getAdvertisingConfig(clipSource,region,siteSectionId){var networkId,advertisingIdPrefix,site=_guessSiteFromSiteSectionId(siteSectionId);return"espn"===site?"deportes"===clipSource?networkId=135087:("intl"===clipSource&&(advertisingIdPrefix="intl:"),networkId=87146):"us"===region?("intl"===clipSource&&(advertisingIdPrefix="intl:"),networkId=87146):("intl"===clipSource?advertisingIdPrefix="intl:":"espn"===clipSource&&(advertisingIdPrefix="espn:"),networkId=144556),{networkId:networkId,advertisingIdPrefix:advertisingIdPrefix}}function _updateAdOptions(adOptions,advertisingConfig){if(adOptions&&advertisingConfig){var networkId=advertisingConfig.networkId;if(networkId){adOptions.networkId=networkId;var flashProfileSlug=(_.get(adOptions,"flash.profile")||"").split(":")[1]||"espn_desktop_as3",html5ProfileSlug=(_.get(adOptions,"html5.profile")||"").split(":")[1]||"espn_desktop_js";_.set(adOptions,"flash.profile",networkId+":"+flashProfileSlug),_.set(adOptions,"html5.profile",networkId+":"+html5ProfileSlug)}var advertisingIdPrefix=advertisingConfig.advertisingIdPrefix;return advertisingIdPrefix&&adOptions.assetId&&(adOptions.assetId+"").indexOf(":")===-1&&(adOptions.assetId=advertisingConfig.advertisingIdPrefix+adOptions.assetId),adOptions}}function _updateAdvertisingConfig(adOptions){var clipSource=_.get(_player,"bundle.clipSource"),siteSectionId=(adOptions||{}).siteSectionId,advertisingConfig=_getAdvertisingConfig(clipSource,_region,siteSectionId);return _updateAdOptions(adOptions,advertisingConfig)}function _initTargetEl(targetReplaceId,options){var $targetReplaceContainer=$("#"+targetReplaceId).parent();if("player--player"===targetReplaceId&&(0===$targetReplaceContainer.width()||0===$targetReplaceContainer.height())){var containerWidth=options.width||"100%";options.width&&$targetReplaceContainer.width(containerWidth),options.height?$targetReplaceContainer.height(options.height):0===$targetReplaceContainer.height()&&$targetReplaceContainer.css("padding-top","56.25%")}return $targetReplaceContainer}function _getOmniAccount(options){return options=options||{},options.omnitureSuiteId||_.get(window,"s_omni.account")||_.get(window,"espn.track.data.omniture.account")||window.s_account||"wdgespcom"}function _parseOptions(options,wasUserInitiated){options=_.merge({},_.pick(_previousOptions,["cms","endCard","siteSection"]),options||{}),_previousOptions=options;var autoplay="userPreference",autoplaySetting=_.values(_.pick(options,["autoplay","autostart","autoPlay"]))[0];"boolean"==typeof autoplaySetting&&(autoplay=autoplaySetting);var userInitiated=options.userInitiated||wasUserInitiated||!1;"autoplay"===options.playType&&(userInitiated=!1,autoplay=!0);var language=options.language||(ESPNLegacyHelperScripts.detectLocale()||"").split("-")[0];return _.merge(!0,{},options,{advertising:_.merge(!0,{beforeAdManager:_updateAdvertisingConfig,siteSectionId:options.siteSection},options.advertising),analytics:_.merge(!0,{adobeDCR:{VISITOR_API:{TRACKING_SERVER:"w88.espn.com"},APP_MEASUREMENT:{RSID:_getOmniAccount(options),TRACKING_SERVER:"w88.espn.com"},NIELSEN_DATA:{APP_INFO:{clientId:"us-600140",apid:(_useNielsenTestApid?"T":"P")+"31187EE2-AC6E-46CB-BB54-D07591BED067"}}},conviva:{customerKey:"fc8dbfdc5da519f576628f619306a357f31bd006"}},options.analytics),autoplay:autoplay,clipId:options.id,clipSource:options.cms||("es"==language?"deportes":void 0),endcard:options.endCard,language:language,region:options.region||(ESPNLegacyHelperScripts.detectLocale()||"").split("-")[1],poster:options.thumbnailURL,postroll:"boolean"!=typeof options.postroll||options.postroll,preroll:"boolean"!=typeof options.preroll||options.preroll,wasUserInitiated:userInitiated})}function _getDefaultClipMetadata(data){return{ReportSuite:_getOmniAccount(_previousOptions),CMSID:(data.clipId||data.id||data.mediainfo.id)+"-"+data.mediainfo.name,ContentDuration:data.mediainfo.duration,DateLastModified:data.mediainfo.updated_at,GameID:_.get(data,"mediainfo.custom_fields.gameId"),League:data.mediainfo.sport,PlayerName:function(){var duration=_.get(data,"mediainfo.duration"),isLive=!(duration&&duration>0);return isLive?"Brightcove-live":"Brightcove-vod"}(),PublishDate:(data.mediainfo.created_at||"").split("T")[0],PublishTime:(data.mediainfo.created_at||"").split("T")[1],Site:data.mediainfo.site,Sport:data.mediainfo.sport,VideoID:data.clipId||data.id||data.mediainfo.id,VideoName:(data.mediainfo.pageTitle||"").replace(" - ESPN Video",""),VideoPlaylist:(_player&&_player.player&&_player.player.playlist()||[]).join(","),VideoTypeDetail:_.get(data,"mediainfo.custom_fields.mediaType")}}function _getTargetReplaceId(targetReplaceId){if(!targetReplaceId)for(var defaultVideoPlayerSelector,$selEls,i=0;i<_defaultPlayerSelectors.length;i++)if(defaultVideoPlayerSelector=_defaultPlayerSelectors[i],$selEls=$(defaultVideoPlayerSelector).first(),$selEls.length){targetReplaceId=$selEls.attr("id"),targetReplaceId||($selEls.attr("id","player"),targetReplaceId="player");break}if(targetReplaceId=targetReplaceId||"player","player"!==targetReplaceId)return targetReplaceId;var actualReplacementId=targetReplaceId+"--player",$targetEl=$("#"+targetReplaceId),$actualReplacement=$($("#"+targetReplaceId).children()[0]);return $actualReplacement.length?$actualReplacement.attr("id",actualReplacementId):($actualReplacement=$('<div id="'+actualReplacementId+'" />'),$targetEl.append($actualReplacement),$targetEl.css("position","relative")),actualReplacementId}function _setRegion(geoLocation){return _region||(_region=(_.get(geoLocation,"country.isoCodeAlpha2")||"us").toLowerCase(),$.publish("espn.video.locationReady",[_region])),_region}function _lookupRegion(then){_region?then(_region):Util.getGeoLocation(function(err,geoLocation){_setRegion(geoLocation),(then||$.noop)(_region)})}var _clipId,_player,_previousOptions,_autoplay,_siteSpecificCustomMetaData,_wasUserInitiated,_region,_useNielsenTestApid=function(){var parsedQuery=$.parseUri&&$.parseUri(location.search),nielsenTest=_.get(parsedQuery,"queryKey.nielsentest");return nielsenTest&&Cookie.set("nielsentest",JSON.parse(nielsenTest||!0)),JSON.parse(Cookie.get("nielsentest")||null)===!0}(),embeddedPlay={play:ESPNLegacyHelperScripts.embeddedPlay},sitesBySiteSectionIdPrefix={"espn:cricinfo":"cricinfo","espn:espnfc":"espnfc","espnfc.com":"espnfc"},shim={getAutoPlay:getAutoPlay,subscribe:$.subscribe,skipAd:skipAd,embedded:embeddedPlay,embeded:embeddedPlay,player:null,embed:embed,play:play,pause:pause,insertAd:insertAd,remove:remove};return Object.defineProperty(shim,"version",{get:function(){if(packageInfo&&packageInfo.version)return packageInfo.version}}),Object.defineProperty(shim,"versions",{get:function(){return{shim:packageInfo&&packageInfo.version,bundle:_.get(packageInfo,"dependencies.espn-web-player-bundle")}}}),Object.defineProperty(shim,"autoplay",{get:function(){if(_player&&_player.autoplay)return _player.autoplay}}),Object.defineProperty(shim,"playerElement",{get:function(){if(_player&&_player.player)return _player.player.el_}}),shim}},{"../../package.json":37,"../mobile/Util":43,"./espn-custom-meta-data-generators.js":38,"./espn-legacy-helper-scripts.js":39,"./espn-legacy-video-player.js":40,"./lodash":41,"cookie-cutter":4,"watch-fanapi":36}],43:[function(require,module,exports){var Util=function(common){function getP13AutoStart(callback){espn.fanapi?jQuery.when(espn.fanapi.getAsP13n()).done(function(p13n){if(p13n&&p13n.mySettings){if(P13N_VIDEO_AUTOSTART=p13n.mySettings.videoAutoStart,!callback)return p13n.mySettings.videoAutoStart;callback(p13n.mySettings.videoAutoStart)}}).fail(function(){callback&&callback()}):espn.p13n&&espn.p13n.get({success:function(p13n){try{if(p13n&&p13n.mySettings){if(P13N_VIDEO_AUTOSTART=p13n.mySettings.videoAutoStart,!callback)return p13n.mySettings.videoAutoStart;callback(p13n.mySettings.videoAutoStart)}}catch(e){}},error:function(){}})}function getVideoPlaylistInfo(videoPlaylist,mobilePath,async,callback){for(var cmsAndIds="",i=0;i<videoPlaylist.videos.length;i++)for(var key in videoPlaylist.videos[i]){var replace={id:key,cms:videoPlaylist.videos[i][key].cms,url:videoPlaylist.videos[i][key].url};cmsAndIds+="id="+replace.cms+":"+key+"&",videoPlaylist.videos[i]=replace;break}if(mobilePath){var analyticsParams="",deviceParam="desktop",rsid="wdgespvideo,wdgespge",site="espn",baseUrl="http://www.espn.com/videohub/video/util/getMinifiedClipJsonById?";isMobile?deviceParam="mobile":(isIpad||isAndroid)&&(deviceParam="tablet"),"undefined"!=typeof window.s_account&&(rsid=window.s_account+","+rsid),analyticsParams+="&omniReportSuite="+rsid,"undefined"!=typeof window.omniSite&&(site=Analytics.getSiteSection(window.omniSite)),analyticsParams+="&siteSection="+site,analyticsParams+="&trackingName="+encodeURIComponent(Analytics.getTrackingName()),$.ajax({url:baseUrl+cmsAndIds+"device="+deviceParam+analyticsParams,async:async,success:function(response){callback&&callback(response)}})}return videoPlaylist}function hasFlashAndUsable(){var hasFlash=!1;try{var fo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");fo&&(hasFlash=!0)}catch(e){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(hasFlash=!0)}return hasFlash}function fullScreenRequest(elem){elem.requestFullscreen?elem.requestFullscreen():elem.msRequestFullscreen?elem.msRequestFullscreen():elem.mozRequestFullScreen?elem.mozRequestFullScreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.webkitEnterFullScreen&&elem.webkitEnterFullScreen()}function autoPlayHelper(options){options=options||{};var autoplay=!0,vasCookie=(document.cookie.match(/VAS=([^;]+)/)||[])[1];vasCookie&&(autoplay=convertToBoolean(vasCookie)),espn.video.autoplay=autoplay,getP13AutoStart(function(autoStart){autoStart&&(autoplay="2"!==autoStart),espn.video.autoplay=autoplay,options.callback&&options.callback(autoplay)})}function isForceHTML5(){var forceHTML5=/(^|; )espn.html5=1/.test(document.cookie);return forceHTML5}function getGeoLocation(cbk){cbk=cbk||$.noop;var validateGeoLocationAndReturn=function(loc){if(!loc)return cbk(new Error("failed to lookup valid geolocation"));var geoLocation=Util.getGeoLocationFromGeoService(loc);return geoLocation?void cbk(null,geoLocation):cbk(new Error("failed to determine geolocation"))},ifFail=function(){var country=(document.cookie.match(/country=([^;]+)/)||[])[1]||"us";validateGeoLocationAndReturn(Util.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:(country+"").toUpperCase()}}))};window.espn&&window.espn.geo&&window.espn.geo.getLocation?espn.geo.getLocation().done(validateGeoLocationAndReturn).fail(function(){espn.geo.promise=null,espn.geo.getLocation().done(validateGeoLocationAndReturn).fail(ifFail)}):ifFail()}function getGeoLocationFromGeoService(loc){var isoCodeAlpha3=null;loc.country&&loc.country.isoCode&&(isoCodeAlpha3=loc.country.isoCode.toUpperCase());var isoCodeAlpha2=loc.country.isoCodeAlpha2;return isoCodeAlpha3&&!isoCodeAlpha2&&countryMap&&(isoCodeAlpha2="string"==typeof countryMap[isoCodeAlpha3]?countryMap[isoCodeAlpha3].toLowerCase():isoCodeAlpha3.substring(0,2).toLowerCase()),loc.country.isoCodeAlpha2=isoCodeAlpha2,loc}function getDefaultPlatform(){var defaultPlatform="ooyala";return(this.isMobile||this.isIpad||this.isAndroid)&&(defaultPlatform=this.canPlayVideo?"html5-video":"player-image"),isForceHTML5()&&(defaultPlatform="html5-video"),defaultPlatform}function convertToBoolean(val){var type=typeof val;return"boolean"!==type&&("string"===type&&isNaN(val)?val="true"===val:(val=parseInt(val),val=1===val)),val}function checkMemHasVideo(){return checkMemHasVideo._cache||(checkMemHasVideo._cache=!1,"object"==typeof espn.mem&&"boolean"==typeof espn.mem.hasVideo&&(checkMemHasVideo._cache=espn.mem.hasVideo)),checkMemHasVideo._cache}function getBusinessUnit(cms){return"deportes_dev"==cms||"deportes_qa"==cms?"deportes":"cric"==cms||"cric_qa"==cms||"cric_dev"==cms||"cricinfo"==cms||"cricinfo_qa"==cms||"cricinfo_dev"==cms?"cricinfo":"intl"==cms||"intl_dev"==cms||"intl_qa"==cms?"soccerfc":cms}function cleanDimension(dim){return"default"==dim?null:dim?(dim+="",/\d{2,3}%/.test(dim)?dim:dim.replace(/\D/g,"")+"px"):null}function getCMSFromTrackingName(trackingName){var cms="espn";return trackingName.search(/deportes/i)>-1?cms="deportes":trackingName.search(/intl/i)>-1&&(cms="intl"),cms}var canPlayVideo=function _v(){return _v._cache||(_v._cache=document.createElement("video")),!!_v._cache.canPlayType}(),isIpad=function _i(){return _i._cache||(_i._cache=/iPad/i.test(window.navigator.userAgent)||/Mini/i.test(window.navigator.userAgent)),_i._cache}(),isAndroid=function _a(){return _a._cache||(_a.cache=navigator.userAgent.match(/Android/g)),_a.cache}(),isKindle=function _k(){return _k._cache||(_k.cache=navigator.userAgent.match(/Silk/g)),_k.cache}(),needsClickToPlay=function _nCTP(){return _nCTP._cache||(_nCTP.cache=navigator.userAgent.match(/Nexus 4/g)&&navigator.userAgent.match(/Android 4.2/g)),_nCTP.cache}(),P13N_VIDEO_AUTOSTART=null,isMobile=!1,isTablet=!1;navigator.userAgent.match(/Mobi/)?navigator.userAgent.match(/iPad/)?isTablet=!0:isMobile=!0:navigator.userAgent.match(/Tab/)?isTablet=!0:navigator.userAgent.match(/Android/)?isTablet=!0:navigator.userAgent.match(/Touch/)&&navigator.userAgent.match(/IE/)&&(isTablet=!0),/[?&]html5=false/.test(window.location.search)?document.cookie="espn.html5=0; path=/; domain=espn.com":/[?&]html5=./.test(window.location.search)&&(document.cookie="espn.html5=1; path=/; domain=espn.com");var countryMap=common.countryMap||{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"};return{canPlayVideo:canPlayVideo,isIpad:isIpad,isMobile:isMobile,isAndroid:isAndroid,isKindle:isKindle,needsClickToPlay:needsClickToPlay,autoPlayHelper:autoPlayHelper,getP13AutoStart:getP13AutoStart,getGeoLocation:getGeoLocation,getGeoLocationFromGeoService:getGeoLocationFromGeoService,getDefaultPlatform:getDefaultPlatform,fullScreenRequest:fullScreenRequest,convertToBoolean:convertToBoolean,checkMemHasVideo:checkMemHasVideo,getBusinessUnit:getBusinessUnit,cleanDimension:cleanDimension,hasFlashAndUsable:hasFlashAndUsable,getVideoPlaylistInfo:getVideoPlaylistInfo,getCMSFromTrackingName:getCMSFromTrackingName,requiresFlashUpgrade:navigator.userAgent.indexOf("Safari/537.76.4")!==-1&&navigator.userAgent.indexOf("Version/7")!==-1&&"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("14.0.0")||"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("10.0.0"),requiresFlashDownload:"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("0.0.1")}}("undefined"!=typeof common?common:{});"object"==typeof module&&module.exports&&(module.exports=Util)},{}],44:[function(require,module,exports){!function(){"use strict";var Util=require("./mobile/Util");window.PLAYER=null,window.espn=window.espn||{},["html5-video","player-image"].indexOf(Util.getDefaultPlatform())!==-1?window.espn.video=require("../distribution/espn.video.mobile.js"):window.espn.video=require("./desktop/shim.js")(jQuery,window.espn),window.espn.video.getDefaultPlatform=function(){return Util.getDefaultPlatform()},window.espn.video.embeded=window.espn.video.embedded}()},{"../distribution/espn.video.mobile.js":1,"./desktop/shim.js":42,"./mobile/Util":43}]},{},[44]),StrategyInterface.ContentType={AD:"ad",CONTENT:"ct"},StrategyInterface.AdPosition={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"},StrategyInterface.VideoState={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"},StrategyInterface.AutoplayType={UNKNOWN:"unkn",MANUAL:"man",AUTOPLAY:"auto",CONTINUOUS:"cont"},StrategyInterface.prototype.isReady=function(){},StrategyInterface.prototype.getTitle=function(){},StrategyInterface.prototype.getVideoPath=function(){},StrategyInterface.prototype.getContentType=function(){},StrategyInterface.prototype.getAdPosition=function(){},StrategyInterface.prototype.getTotalDuration=function(){},StrategyInterface.prototype.getState=function(){},StrategyInterface.prototype.getCurrentPlayTime=function(){},StrategyInterface.prototype.getBitrate=function(){},StrategyInterface.prototype.getThumbnailPath=function(){},StrategyInterface.prototype.getPlayerType=function(){},StrategyInterface.prototype.getAutoplayType=function(){},StrategyInterface.prototype.getViewStartTime=function(){},StrategyInterface.prototype.getViewPlayTime=function(){},StrategyInterface.prototype.getViewAdPlayTime=function(){},StrategyInterface.prototype.getSections=function(){},StrategyInterface.prototype.getAuthors=function(){},StrategyInterface.verify=function(){},OoyalaStrategy.prototype.initialize_=function(){this.viewStartTime_=this.getTime(),this.subscribeEvents_()},OoyalaStrategy.prototype.subscribeEvents_=function(){var unSubscribes=[];espn.video.playerElement?this.onPlaybackReady_():unSubscribes.push(jQuery.subscribe("espn.video.ready",this.bind_(this.onPlaybackReady_,this))),unSubscribes.push(jQuery.subscribe("espn.video.ad.start",this.bind_(this.onAdsReady_,this))),unSubscribes.push(jQuery.subscribe("espn.video.play",this.bind_(this.onVideoPlay_,this))),unSubscribes.push(jQuery.subscribe("espn.video.contentStarted",this.bind_(this.onContentStarted_,this))),unSubscribes.push(jQuery.subscribe("espn.video.ad.end",this.bind_(this.onAdsComplete_,this))),unSubscribes.push(jQuery.subscribe("espn.video.ready",this.bind_(this.onMetaDataFetched_,this))),unSubscribes.push(jQuery.subscribe("espn.video.embedCodeChanged",this.bind_(this.onEmbedCodeChanged_,this))),unSubscribes.push(jQuery.subscribe("espn.video.playerjsReady",function(){for(var i=0;i<unSubscribes.length;i++)$.unsubscribe(unSubscribes[i])}))},OoyalaStrategy.prototype.bind_=function(fn,context){return function(){return fn.apply(context,arguments)}},OoyalaStrategy.prototype.onPlaybackReady_=function(){this.ready_=!0},OoyalaStrategy.prototype.onAdsReady_=function(){var t=this.player_.getPlayheadTime(),d=this.player_.getDuration();isNaN(t)&&(t=0),0===t?this.currentAdPosition_=StrategyInterface.AdPosition.PREROLL:this.areNumbersClose_(t,d)?this.currentAdPosition_=StrategyInterface.AdPosition.POSTROLL:this.currentAdPosition_=StrategyInterface.AdPosition.MIDROLL},OoyalaStrategy.prototype.onVideoPlay_=function(){this.getContentType()===StrategyInterface.ContentType.AD?(this.adStartTime_=this.getTime(),this.adPlayed_=!0):this.getContentType()===StrategyInterface.ContentType.CONTENT&&(this.videoStartTime_=this.getTime(),this.videoPlayed_=!0)},OoyalaStrategy.prototype.onContentStarted_=function(contentId,playType){this.videoPlayed_=!0,this.autoplayType_=StrategyInterface.AutoplayType.UNKNOWN,"manual"===playType?this.autoplayType_=StrategyInterface.AutoplayType.MANUAL:"autoplay"===playType?this.autoplayType_=StrategyInterface.AutoplayType.AUTOPLAY:"continuous"===playType&&(this.autoplayType_=StrategyInterface.AutoplayType.CONTINUOUS)},OoyalaStrategy.prototype.onAdsComplete_=function(){this.currentAdPosition_=void 0},OoyalaStrategy.prototype.onMetaDataFetched_=function(){},OoyalaStrategy.prototype.isReady=function(){return espn.video.player.ready&&this.getVideoPath()},OoyalaStrategy.prototype.getTitle=function(){var item=this.player_.getItem();return item?item.title:""},OoyalaStrategy.prototype.getVideoPath=function(){var item=this.player_.getItem()||{};if(void 0!==item.externalId){var parts=item.externalId.split(":");if(2==parts.length)return parts[1]}return item.embedCode||""},OoyalaStrategy.prototype.getContentType=function(){return void 0===this.currentAdPosition_?StrategyInterface.ContentType.CONTENT:StrategyInterface.ContentType.AD},OoyalaStrategy.prototype.getAdPosition=function(){return this.currentAdPosition_?this.currentAdPosition_:""},OoyalaStrategy.prototype.getTotalDuration=function(){var d=this.player_.getDuration();return d===-1||isNaN(d)?-1:1e3*d},OoyalaStrategy.prototype.getState=function(){if(!this.videoPlayed_)return StrategyInterface.VideoState.UNPLAYED;var state=this.player_.getState();if("paused"===state)return StrategyInterface.VideoState.STOPPED;var playTime=this.player_.getPlayheadTime(),duration=this.player_.getDuration();return this.areNumbersClose_(playTime,duration)?StrategyInterface.VideoState.COMPLETED:StrategyInterface.VideoState.PLAYED},OoyalaStrategy.prototype.areNumbersClose_=function(num1,num2){return num1===num2||Math.floor(num1)===Math.floor(num2)||Math.ceil(num1)===Math.ceil(num2)||Math.ceil(num1)===Math.floor(num2)||Math.floor(num1)===Math.ceil(num2)},OoyalaStrategy.prototype.timeElapsed_=function(timestamp){return void 0===timestamp?0:this.getTime()-timestamp},OoyalaStrategy.prototype.onEmbedCodeChanged_=function(){this.currentAdPosition_=void 0,this.adStartTime_=void 0},OoyalaStrategy.prototype.getCurrentPlayTime=function(){var pt=this.player_.getPlayheadTime();return pt===-1||isNaN(pt)?-1:1e3*pt},OoyalaStrategy.prototype.getBitrate=function(){return this.player_.getTargetBitrate()},OoyalaStrategy.prototype.getThumbnailPath=function(){var item=this.player_.getItem();return item?item.promo:""},OoyalaStrategy.prototype.getPlayerType=function(){},OoyalaStrategy.prototype.getAutoplayType=function(){return this.autoplayType_},OoyalaStrategy.prototype.getViewStartTime=function(){return isNaN(this.viewStartTime_)?0:this.timeElapsed_(this.viewStartTime_)},OoyalaStrategy.prototype.getViewPlayTime=function(){return this.videoPlayed_||this.adPlayed_?this.timeElapsed_(this.viewStartTime_):-1},OoyalaStrategy.prototype.getViewAdPlayTime=function(){return this.adPlayed_&&this.adStartTime_?this.timeElapsed_(this.adStartTime_):-1},OoyalaStrategy.prototype.getSections=function(){},OoyalaStrategy.prototype.getAuthors=function(){},OoyalaStrategy.prototype.getTime=function(){return(new Date).getTime()},OoyalaStrategy.verify=function(player){return player.hasOwnProperty("currentItem")&&player.hasOwnProperty("getDuration")&&player.hasOwnProperty("getItem")&&player.hasOwnProperty("getPlayheadTime")&&player.hasOwnProperty("getState")&&player.hasOwnProperty("getTargetBitrate")},window._cbv_strategies=window._cbv_strategie||[],window._cbv_strategies.push(OoyalaStrategy),window._cbv_removePlayer=function(){void 0!==window._cbv_player&&(window._cbv.push(["removePlayer",window._cbv_player]),window._cbv_player=null)},jQuery.subscribe("espn.video.playerjsReady",function(){window._cbv_removePlayer();var playerObject={currentItem:function(){var playerElement=espn.video.player.playerElement;return playerElement&&"function"==typeof playerElement.getCurrentItem?playerElement.getCurrentItem():null},getDuration:function(){var playerElement=espn.video.player.playerElement;return playerElement&&"function"==typeof playerElement.getCurrentItem?playerElement.getCurrentItem().time:null},getItem:function(){var playerElement=espn.video.player.playerElement;return playerElement&&"function"==typeof playerElement.getCurrentItem?playerElement.getCurrentItem():null},getPlayheadTime:function(){var playerElement=espn.video.player.playerElement;return playerElement&&"function"==typeof playerElement.getPlayheadTime?playerElement.getPlayheadTime():null},getState:function(){var playerElement=espn.video.player.playerElement;return playerElement&&"function"==typeof playerElement.getState?playerElement.getState():null},getTargetBitrate:function(){var playerElement=espn.video.player.playerElement;return playerElement&&"function"==typeof playerElement.getTargetBitrate?playerElement.getTargetBitrate():null}};window._cbv_player=playerObject;var _cbv=window._cbv||(window._cbv=[]);_cbv.push(playerObject)}),jQuery.subscribe("espn.video.playerRemoved",function(){window._cbv_removePlayer()}),$(document).on("page.load",function(e,data){window._cbv_removePlayer()});