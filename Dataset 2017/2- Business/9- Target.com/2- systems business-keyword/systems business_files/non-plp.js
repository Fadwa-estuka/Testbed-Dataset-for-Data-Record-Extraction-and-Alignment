function paintGlobalError(){}$.fn.toggle=function(e){return $(this).css("display")==="none"||""?$(this).show():$(this).hide(),this},$.fn.validate=function(e){var t=[],n;$("#error-container .close-btn").bind("click",function(){$("#error-container").hide()}),trim=function(t){return"".trim?t.val().trim():$.trim(t.val())},getError=function(e){var t=!1;$.each($(".errorMessage"),function(n,r){r=$(r),attrId=$.trim(r.attr("id"));if(attrId==e.id)return isFunction(e.message)?$(r).html(e.message($("#"+e.refId),!1)):$(r).html(e.message),t=!0,r});if(!t)return erroMessage=isFunction(e.message)?e.message($("#"+e.refId),!1):e.message,$('<div id="'+e.id+'" class="errorMessage">'+erroMessage+"</div>")},removeSuccessMessage=function(e){var t=!1;$.each($(".successmessage"),function(t,n){n=$(n),attrId=$.trim(n.attr("id"));if(attrId==e.successid){temp=$(n).get(0),temp.parentNode&&temp.parentNode.removeChild(temp);return}})},removeError=function(e){var t=!1;$.each($(".errorMessage"),function(t,n){n=$(n),attrId=$.trim(n.attr("id"));if(attrId==e.id){temp=$(n).get(0),temp.parentNode&&temp.parentNode.removeChild(temp);return}})},getLayerError=function(e){var t=!1;$.each($(".error-list"),function(n,r){r=$(r),attrId=$.trim(r.attr("id"));if(attrId==e.layerId)return isFunction(e.message)?$(r).html(e.message($("#"+e.refId),!0)):$(r).html(e.message),t=!0,r});if(!t)return erroMessage=isFunction(e.message)?e.message($("#"+e.refId),!0):e.message,$('<li id="'+e.layerId+'" class="error-list"><a href="#'+e.refId+'">'+erroMessage+"</a></li>")},removeLayerError=function(e){var t=!1;$.each($(".error-list"),function(t,n){n=$(n),attrId=$.trim(n.attr("id"));if(attrId==e.layerId){temp=$(n).get(0),temp.parentNode&&temp.parentNode.removeChild(temp);return}})},submitHandler=function(){var n=!1,r,i,s=null;$("#errors").html("");for(r=0,i=t.length;r<i;r+=1)t[r].validate(!0)||(s===null&&(s=t[r]),n=!0);return paintGlobalError(),n?(isFunction(e.failcallBack)&&e.failcallBack(),!1):isFunction(e.successcallBack)?e.successcallBack():!0},isFunction=function(e){return!!(e&&e.constructor&&e.call&&e.apply)},validateField=function(n,r){var i=$(r);$.each(i,function(i,s){s=$(s),idval=s.attr("id");var o={message:n.message,id:(idval?idval:r.slice(1))+"_"+i+"_error",successid:(idval?idval:r.slice(1))+"_"+i+"_success",refId:idval,layerId:(idval?idval:r.slice(1))+"_li_"+i+"_error"},u,a;t.push(s),s.validate=function(e){var t,r=$(this),i=$("#error-container > ul"),f,l=!1,c=!1,h,p=!!r.get(0).attributes.getNamedItem("required")||n.required,d=n.errorParentEl&&n.errorParentEl.length>0?n.errorParentEl:"",v=n.type&&n.type.length>0?n.type:"",m=n.minLength&&n.minLength>0?n.minLength:"",g=n.maxLength&&n.maxLength>0?n.maxLength:"",y=n.rangeLength?n.rangeLength:"",b=n.range?n.range:"",w=n.min&&n.min>0?n.min:"",E=n.max&&n.max>0?n.max:"",S=n.pattern?n.pattern:"",x=n.equalTo&&n.equalTo.length>0?n.equalTo:"",T=n.onlySubmit?n.onlySubmit:!1,N=s.attr("type")==="password",C=isFunction(n.arg)?n.arg():n.arg;return zipcodevalid=s.attr("zipcode-valid"),n.rePopulateField&&(r=$("#"+r.attr("id"))),isFunction(n.clean)?t=n.clean(r.val()):!n.trim&&!N?t=trim(r):t=r.val(),r.val(t),T&&e!==!0?(removeError(o),removeLayerError(o),r.removeClass("error"),!0):n.depends!==undefined&&isFunction(n.depends)&&!n.depends(r)?(removeError(o),removeLayerError(o),r.removeClass("error"),paintGlobalError(),!0):(f=(t.length>0||p==="sometimes")&&isFunction(n.test),p===!0&&t.length===0?(l=!0,o.message=n.message):f?(l=!n.test(t,C),o.message=n.invalid_message):(m!==""&&(l=!validator.minLength(t,m),o.message=n.minlength_message?n.minlength_message:n.invalid_message),g!==""&&!l&&(o.message=n.maxlength_message?n.maxlength_message:n.invalid_message,l=!validator.maxLength(t,g)),w!==""&&!l&&(o.message=n.min_message?n.min_message:n.invalid_message,l=!validator.min(t,w)),E!==""&&!l&&(o.message=n.max_message?n.max_message:n.invalid_message,l=!validator.max(t,E)),b!==""&&!l&&(o.message=n.range_message?n.range_message:n.invalid_message,l=!validator.range(t,b)),y!==""&&!l&&(o.message=n.rangelength_message?n.rangelength_message:n.invalid_message,l=!validator.rangeLength(t,y)),S!==""&&!l&&(l=!validator.patternMatch(t,S),o.message=n.pattern_message?n.pattern_message:n.invalid_message),x!==""&&!l&&(l=!validator.equal(t,$(x).val()),o.message=n.equalto_message?n.equalto_message:n.invalid_message),v!==""&&!l&&(v.toLowerCase()==="email"?(l=!validator.email(t),o.message=n.invalid_message):v.toLowerCase()==="password"?(l=!validator.password(t),o.message=n.invalid_message):v.toLowerCase()==="creditcard"?(l=!validator.creditcard(t),o.message=n.invalid_message):v.toLowerCase()==="url"?(l=!validator.url(t),o.message=n.invalid_message):v.toLowerCase()==="uszip"?(l=!validator.USZip(t),t==""?o.message=n.message:o.message=n.invalid_message):v.toLowerCase()==="usphone"?(l=!validator.USPhone(t),o.message=n.invalid_message):v.toLowerCase()==="name"?(l=!validator.name(t),o.message=n.invalid_message):v.toLowerCase()==="cardname"?(l=!validator.cardName(t),o.message=n.invalid_message):v.toLowerCase()==="address"?(l=!validator.address(t),o.message=n.invalid_message):v.toLowerCase()==="city"?(l=!validator.city(t),o.message=n.invalid_message):v.toLowerCase()==="state"?(l=!validator.state(t),o.message=n.invalid_message):v.toLowerCase()==="tmdpattern"&&(l=!validator.tmdPattern(t),o.message=n.invalid_message))),removeSuccessMessage(o),l?(u=getError(o),r.addClass("error").after(u),d?$(d).append(u):r.addClass("error").after(u),e==1&&(a=getLayerError(o),i.append(a),paintGlobalError()),!1):(removeError(o),r.removeClass("error"),removeLayerError(o),e==1?paintGlobalError():$("#error-container > ul ").children().length===0&&$("#error-container").hide(),!0))},s.bind(e.when||"blur",s.validate)})},validator={USPhone:function(e){return/^\d{10}$/.test(e)||/^\(?(\d{3})\)?[\- ]?\d{3}[\-]\d{4}$/.test(e)},USZip:function(e){return/^\d{5}([\-]?\d{4})?$/.test(e)},IntZip:function(e){return/^[a-z,A-Z,0-9\- ]{3,}$/.test(e)},InternationalPhone:function(e){return/^[0-9\-]{10,}$/.test(e)},date:function(e){return/^(?:0[1-9]|1[0-2])\/(?:0[1-9]|[12][0-9]|3[01])\/(?:\d{4})/.test(e)},email:function(e){return Target.util.validation.email.test(e)},url:function(e){return/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},patternMatch:function(e,t){return t.test(e)},minLength:function(e,t){return e.length>=t},maxLength:function(e,t){return e.length<=t},password:function(e){return e.length>=8&&(/\d/.test(e)||/[A-Z]/.test(e)||/\W/.test(e))},name:function(e){return/^[a-z,A-Z,0-9.\'\-\s]*$/.test(e)},cardName:function(e){return/^[a-z,A-Z,0-9.\'\-\s]*$/.test(e)},address:function(e){return/^[a-zA-Z0-9#,.\\\-\/\s]*$/.test(e)},city:function(e){return/^[a-zA-Z0-9#,.\\\-\/\s]*$/.test(e)},state:function(e){return/^[a-z,A-Z0-9#,.\\\-\/\s]*$/.test(e)},giftCard:function(e){return/^\d{3}-?\d{3}-?\d{3}-?\d{3}-?\d{2,3}$/.test(e)},tmdPattern:function(e){return/^\d{8,12}$/.test(e)&&parseInt(e)>0},equal:function(e,t){return e==t},rangeLength:function(e,t){return e.length>=t[0]&&e.length<=t[1]},min:function(e,t){return e>=t},max:function(e,t){return e<=t},range:function(e,t){return e>=t[0]&&e<=t[1]},creditcard:function(e){return cardType=Target.Mobile.isValidCard(e),cardType!==""?!0:!1}};for(n in e.fields)validateField(e.fields[n],n);return e.submitButton?$.fn.CEvent([{selector:e.submitButton,cb:function(e,t,n){submitHandler()}}],self):this.on("submit",submitHandler),this},define("validator",function(){}),define("text!templates/common/awesomeshop-list.html",[],function(){return' <% _.each(awesomeshopdisplay.awesomedata, function(data,index){ %> <li class="product"> <a href="<%= data.linkUrl %>" title="<%= data.productName %>"> <img src="<%= data.imageUrl %>" alt="<%= data.productName %>" class="product--image"> </a> <div class="details"> <div class="price"> <% var price = data.priceRange;\n          		if(price.indexOf("-") != -1){\n					var priceData = $.trim(price.split("-")[0])+"+";          		\n          		} else {\n          			var priceData = price;\n          		}\n          %> <%= priceData %> </div> <a class="details--title" href="<%= data.linkUrl %>" title="<%= data.productName %>"> <%= data.productName %> </a> </div> </li> <% }); %> '}),define("text!templates/common/awesome-shop.html",[],function(){return'<section class="l-row h-standardSpacing"> <div class="l-col-xs-12 l-col-nopadding"> <div class="title"> <h2 class="title-text alpha">now trending</h2> <p class="title-subtext">what other guests are shopping for</p> </div> <div class="products products-scroll carousel-scroll"> <ul class="product--list"> </ul> </div> </div> </section>'}),define("text!templates/tablet/preview/preview-component.html",[],function(){return'<style> * {\n  box-sizing: border-box;\n}\nbody {\n  font: normal 9pt "Target Helvetica", sans-serif;\n  margin: 0;\n  padding: 0;\n  background: #f1f1f1;\n  color: #333333;\n}\n.redText, .emphasisText {\n  color: #CC0000;\n}\n\n.storycard-content {\n  /* flexbox mixins */\n  display: flexbox;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-align: stretch;\n  flex-align: stretch;\n  -webkit-align-items: stretch;\n  -moz-box-align-items: stretch;\n  -ms-align-items: stretch;\n  -webkit-align-items: stretch;\n  align-items: stretch;\n  min-height: 100px;\n}\n.storycard-headline {\n  font-size: 117%;\n  /* 20px */\n  font-weight: bold;\n  margin-bottom: 0.12em;\n}\n.storycard-detail {\n  font-weight: normal;\n  color: #666666;\n  display: none;\n}\n.storycard-text {\n  padding: 10px 16.18034px;\n  /* flexin behavior */\n  -webkit-box-flex: 1 1 auto;\n  -moz-box-flex: 1 1 auto;\n  -ms-flex: 1 1 auto;\n  -webkit-flex: 1 1 auto;\n  flex: 1 1 auto;\n  /* child elements\' behavior */\n  display: flexbox;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-flex-direction: column;\n  -moz-box-flex-direction: column;\n  -ms-flex-direction: column;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  -ms-flex-pack: center;\n  flex-pack: center;\n  -webkit-justify-content: center;\n  -moz-box-justify-content: center;\n  -ms-justify-content: center;\n  -webkit-justify-content: center;\n  justify-content: center;\n}\n@media only screen and (min-width: 200px) {\n  .storycard-text {\n    padding: 15px 24.27051px;\n  }\n  .storycard-detail {\n      display: block;\n  }\n}\n@media only screen and (min-width: 600px) {\n  .storycard-text {\n    padding: 15px 28.27051px;\n  }\n}\n@media only screen and (min-width: 900px) {\n  .storycard-text {\n    padding: 20px 32.36068px;\n  }\n}\n.storycard-image {\n  /* this container\'s behavior */\n  -webkit-box-flex: 0 0 38.1966%;\n  -moz-box-flex: 0 0 38.1966%;\n  -ms-flex: 0 0 38.1966%;\n  -webkit-flex: 0 0 38.1966%;\n  flex: 0 0 38.1966%;\n  /* child elements\' behavior */\n  display: flexbox;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -ms-flex-align: center;\n  flex-align: center;\n  -webkit-align-items: center;\n  -moz-box-align-items: center;\n  -ms-align-items: center;\n  -webkit-align-items: center;\n  align-items: center;\n  /* padding */\n  padding: 5px 8.09017px;\n}\n@media only screen and (min-width: 600px) {\n  .storycard-image {\n    padding: 7.5px 12.13525px;\n  }\n}\n@media only screen and (min-width: 900px) {\n  .storycard-image {\n    padding: 10px 16.18034px;\n  }\n}\n.storycard-image:last-child {\n  padding-left: 0;\n}\n.storycard-image > img {\n  display: block;\n  width: 100%;\n}\n.storycard {\n  display: block;\n  /* font sizes */\n  font-size: 17px;\n  line-height: 1.13;\n  background-position: 50% 50%;\n  background-size: cover;\n  background-color: #FFF;\n  color: #333333;\n  text-decoration: none;\n  /* variants */\n  margin-bottom: 10px;\n}\n@media only screen and (min-width: 600px) {\n  .storycard {\n    font-size: 25.5px;\n  }\n}\n@media only screen and (min-width: 900px) {\n  .storycard {\n    font-size: 34px;\n  }\n} </style> <% \n	var contents = slotdisplay.content;\n	\n%> <a class="storycard" href="<%= contents.headline_url %>"> <div class="storycard-content"> <div class="storycard-text"> <div class="storycard-headline"><%= contents.headline %></div> <div class="storycard-detail"><%= contents.subhead %></div> </div> <%if(contents.image){%> <div class="storycard-image"> <img src="<%= contents.image.image_path %>" alt="<%= contents.image.image_alt_text %>"> </div> <%}%> </div> </a> '}),define("controllers/mixins/tgtcrush-parallel-c-mx",["collections/common/browseToLp.collection"],function(e){var t=function(t){return{before:{process:function(){var e=this;e.listenTo(Backbone.Events,"v:view:rtp",e.updateFlag),e.listenTo(e,"c:coll:push",e.throwCollection)},initializeView:function(){var e=this;e.listenTo(Backbone.Events,"v:view:rtp",e.updateFlag),e.listenTo(e,"c:coll:push",e.throwCollection)}},setDefaults:{itemSets:4,vReadyToPaint:!1,collectionStore:[],collectionName:null,parallelCall:function(t,n){var r=this,i,s=r.divideIntoBucket(t);r.collectionName=n||null,_.each(s,function(t,n){var s=_.stringToObject(Target.Get.Cookie("fiatsCookie"),"|","_").DSI;i=new e(null,{storeParams:s?"storeId="+s:"",data:t.map(function(e){return{ParentSKU:e}})}),r.listenToOnce(i,"sync",r.pushCollection),r.listenToOnce(i,"error",function(e){r.throwCollection(!0,e)}),i.fetch()})},divideIntoBucket:function(e){var t=this,n,r;return _.each(e,function(t,n){isNaN(t)&&e.splice(n,1)}),r=_.range(e.length/4).map(function(r,i){return n=i*t.itemSets,e.slice(n,n+4)}),r},pushCollection:function(e){var t=this;t.collectionStore.push(e),t.trigger("c:coll:push")},updateFlag:function(){var e=this;e.vReadyToPaint=!0,e.throwCollection()},throwCollection:function(e,t){var n=this,r=null;if(!this.vReadyToPaint)return;e===!0?(n.vReadyToPaint=!1,Backbone.Events.trigger("c:paint:err-collection",{collection:t,name:n.collectionName})):(r=n.collectionStore.shift(),r&&(n.vReadyToPaint=!1,Backbone.Events.trigger("c:paint:collection",{collection:r,name:n.collectionName})))}}}};return t}),define("views/tablet/home/main.view",["jquery","page","Target","patlab.filmstrip","text!templates/common/topSellingItemsList.html","text!templates/common/awesomeshop-list.html","text!templates/common/awesome-shop.html","text!templates/tablet/preview/preview-component.html","text!templates/common/popular-products.html","templates/tablet/precompiled/lpcommon","views/mixins/common/recommendation-view-mx","views/mixins/home/home-common-mx","views/mixins/common/search-rec-mx","views/mixins/common/redoak-mx","firefly!home/main","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","controllers/mixins/tgtcrush-parallel-c-mx"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=t.extend({css:["/css/patlab/global.css"],itemnumber:0,events:{"click #js-mCategories":"displayAllCategories","click .js-browseByCategory a":"redirectToCategory","click .js-drawerList li a":"redirectToCategory","click .storycard--link":"redirectToCategory"},templates:{awesomeshop:s,awesomeshoplist:o,previewComponent:u,topSellingItemsList:i,recoTpl:_.template(f["common/recommendations"]),popularProd:a},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){var e=this;this.listenTo(Backbone.Events,"ct:mainview:loadGridStructure",this.loadGridStructure),this.listenTo(Backbone.Events,"ct:mainview:nowTrendingData",this.nowTrendingData),this.listenTo(Backbone.Events,"ct:mainview:previewComponentDisplay",this.previewComponentDisplay),this.listenToOnce(Backbone.Events,"ct:slingshot:process",this.processRedOakContent),this.listenTo(Backbone.Events,"c:paint:collection",function(t){e.paintSubviews(t.collection,t.name)}),this.listenTo(Backbone.Events,"renderFallbackContent",this.renderFallbackContent)},nowTrendingData:function(e){if(e!="error"){var t={awesomedata:e},n=this.tpl("awesomeshopdisplay","awesomeshoplist",t);this.$(".product--list").append(n)}else this.$("#awsCarouselSec").hide()},getDynamicData:function(){var e=this.getDynamicBsdlObj(),t={occurrences:!0};return e.todaysDate=this.setTimeBsdlObj(),e.pageName="home page",e.siteEvents=t,e.channel="home page",e.pageType="home page",e.levelTwo="home page",e.levelThree="home page",e.levelFour="home page",e.loginStatus=n.User.isAnonymous?"not logged in and not registered":"logged in",e.globalPage="home page",e}}).mixin([l,c,h,p,d,v,m,g,y],{viewType:d.VIEW_TYPE_TABLET});return b}),define("text!templates/common/browse/product-error-details.html",[],function(){return'<div class="l-row" id="pdp-error-main-id"> <div class="l-col-xs-12 l-col-md-12"> <div class="title h-standardSpacingTop"> <h2 class="title-text alpha">product not available</h2> <p class="title-subtext">we\'re sorry! this page is currently unavailable. please try again later.</p> </div> <div class="boxedImage boxedImage-basket boxedImage-nothingHereSizing"> <img src="<%= pdError.imageSvrPath %>/images/error/Basket2x.png" title="Page Not Found basket" alt="basket"> </div> </div> </div> '}),define("text!templates/common/browse/product-price-row.html",[],function(){return'<% if(offer.price){ %> <%if(offer.priceIsTooLow){%> add to cart to see price <% } else if(isPriceVaries){%> <%= offer.readPrice %> <%if(isPriceByCarrier){%> <span class="product--seePriceByCarrier"><a href="javascript:void(0)" class="link-underline" data-behavior="gotoPricesByCarrierTab">see prices by carrier</a></span> <% } %> <% } else { %> <span <% if(eyebrow){ %> class="h-text-red h-text-lowercase" <% }else{ %> class="h-text-lowercase" <%}%>> <%= offer.readPrice %> </span> <% } %> <% if(!offer.isPriceVaries && !offer.seeStorePrice){ %> <% if(offer.unitPrice){%> (<%=offer.unitPrice%>) <%}%> <% if(eyebrow || saleEndDuration){ %> <span class="h-text-red price--eyebrow"><%=eyebrow?eyebrow:\'sale\'%>&nbsp;<span class="price--saleEnd"></span></span> <% } %> <% if(!offer.priceTooLow) { %> <span class="price--saveStory"> <% if(previous && previous.price) { %> <%=( previous.qualifier || "")%>&nbsp;<%= previous.price %> <% } %> <% if(offer.amountSaved) { %> Save&nbsp;<%= offer.amountSaved %> <% } %> <% if(offer.percentSaved) { %> (<%= offer.percentSaved %>% off) <% } %> </span> <% } %> <% } %> <% } %> '}),define("text!templates/common/browse/product-attributes.html",[],function(){return'<% if(data.tabs.length) { %> <ul class="accordion"> <% _.each(data.tabs, function(tab, idx) { %> <li class="accordion--item <% if (tab.isHidden) { %>is-hidden<% } %>" data-behavior="toggle" data-tab="<%=tab.tabId%>" data-tabindex="<%=idx%>" data-self="true"> <h2> <a id="<%=tab.tabId%>----toggle" href="javascript:void(0)" class="accordion--title js-accordion--title" role="tab" aria-controls="<%=tab.tabId%>----panel"> <%= tab.name %> <span class="h-sr-only a11y-text-toggle">shows more content</span> </a> </h2> <section class="accordion--content" tabindex="-1" aria-hidden="true"> <% _.each(tab.content, function(row) { %> <% if(row.type === "text") { %> <% if(row.content!="rating_content") { %> <div class="<%=row.cssClass || \'\'%>"><%=row.content%></div> <% } %> <% } else if(row.type === "link") { %> <% if(row.content!="rating_content") { %> <a href="<%=row.href || \'\'%>" class="link-underline <%=row.cssClass || \'\'%>"><%=row.content%></a> <% } %> <% } else if (row.type === "list") { %> <ul class="<%= row.cssClass || \'\' %> h-standardSpacing override-highlights"> <% _.each(row.content, function(item) { %> <li> <% if(item.label) { %> <% if(item.href) { %> <a class="link-underline" href="<%= item.href %>" <% if(row.cssClass == \'specification-list\'){ %> data-behavior="modal" data-target="#pdpModelId" data-event="v:model:specification" <% } %>><%= item.label%></a> <% } else { %> <%= item.label%> <% } %> <% } %> <span class="h-text-grayDarker"><%= item.value%></span> </li> <% }); %> </ul> <% } else if (row.type === "lazy") { %> <div class="lazy-data-row bb-lazy-data-row <%=row.cssClass || \'\'%>" data-use-iframe="<%=row.loadAsIframeContent|| false %>" data-lazy-source="<%=row.src%>" data-custom-handler-key="<%=row.customHandlerKey || \'\'%>"></div> <%}	 %> <% }); %> </section> </li> <% }); %> </ul> <% } %> '}),define("text!templates/tablet/browse/pdp.html",[],function(){return'<a id="js-pdp-page-title" class="h-sr-only" tabindex="-1"><h1 class="h-sr-only" tabindex="-1">Product description page - <%=title%></h1></a> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacingTop js-recommendationExt"></div> <aside id="asideRightBlockId" class="l-sidebar l-xs-order-1"> <div id="stickySidebar" class="sidebar sidebar-sticky" data-display="affix" data-offset-top="400"> <div class="details details-pdp"> <a id="js-product-sr-id" class="" tabindex="-1" style="text-decoration: none"> <div class="price" data-placeholder="pdp-price-row"></div> </a> <div class="h-text-md h-text-normal h-text-red h-display-flex is-hidden h-tinySpacingTop" id="redCardPrice"> </div> </div> <div class="bb-promotion-callout-section promo" style="display:none"> </div> <div id="js-review-qa"></div> <hr aria-hidden="true"> <div class="variator--pdp sbc-varaition-mx"></div> <div id="basic_messages" class="content-alert h-standardSpacingTop single section-margins" style="display: none"></div> <div class="TGTLazyLoading"></div> </div> </aside> <div class="l-col-xs-flex" role="main" id="pdpMainContainer"> <div class="js-breadcrumb"></div> <div> <div id="imagecarousal" class="product-image-carousal-holder tapToZoom js-tapToZoom"></div>  <div class="product--titlePdp h-border-bottom h-text-center"> <h2 class="title-product"> <% if (mediaFormatType) { %> <span class="details--format"><%=mediaFormatType%></span> <% } %> <span itemprop="name"><%=title%></span> </h2> <span class="h-sr-only" aria-hidden="true" itemprop="brand" class="product--brand"> <%=manufacturerBrandName%> </span> <div class=""> <a class="h-text-underline js-collectionTitle h-tightSpacingRight" href="#"></a> <% if (brandLink) { %> <a class="h-text-underline js-routeToUrl" href="/bp/<%=brandLink%>">shop all <%=brandLink%></a> <% } %> </div> <div class="js-collectionList h-tightSpacing" style="display:none"></div> </div> </div> <div class="js-carousel-container carousel-container h-standardSpacing js-collRec h-border-bottom" style="display:none"></div> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing js-recommendationP1"></div> <div class="guestRating h-zeroPadding" id="registry_share_rating_section_Id"></div> <div class="guestReview" id="js-most-helpful-reviews-id"></div> <div class="reviews--summary h-standardPaddingBottom js-reviews-summary" id="bvTag-reviewsSummary"></div> <h2 class="addThirdParty h-sr-only" aria-hidden="true">third party advertisement</h2> <div class="js-additionalDvm h-standardSpacing h-border-top h-standardPadding h-flex-align-center h-zeroPaddingBottom is-hidden"> <div id="mobile-div-gpt-ad-pdp1_<%=timestamp%>" class="dvmSlot dvmSlot-desktop h-text-center h-align-center pdpad_desktop pdpad_tablet_landscape pdpad_tablet_portrait"></div> <div id="mobile-div-gpt-ad-pdp2_<%=timestamp%>" class="dvmSlot h-text-center h-align-center pdpad_tablet_landscape"></div> </div> <div id="product-attributes" class="section-margins"></div> <div id="pdpVideoContainer"> </div> <div id="ugcContainer"> </div> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing js-recommendationP2"></div> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing js-recommendationP3"></div> <div id="wc-power-page"></div> <% if(!isQpdp){ %> <div class="content h-standardSpacing"> <p>Prices, promotions, styles and availability may vary by store & online. See our <a href="https://corporate.target.com/about/shopping-experience/shop-with-confidence" class="link-grayDark link-underline" id="fromGooglePrice">price match guarantee.</a> <a href="#" class="link-grayDark link-underline" data-behavior="modal" data-target="#pdpModelId" data-event="v:modal:showHowStoreIsSetContent">See how</a> a store is chosen for you.</p> </div> <% } %> <div class="desktop--footerAdBlock h-standardSpacingTop"> <div id="pdpPlaAd" class="h-standardSpacingBottom"></div> <h2 class="h-sr-only google-ad"> third party advertisement</h2> <div id="dvmfooter_<%=timestamp%>" class="dvmSlot dvmSlot--footer h-standardSpacingRight pdpad_desktop"></div> <div id="adcontainer1" class="ad--text mwebPdpGoogleAds"></div> </div> </div> <div class="l-col-xs-flex l-col-nopadding is-hidden js-pdp-mainContainerTakeover"></div> <div class="modal modal-carousel fade js-imageZoomContainer" id="carouselProduct" tabindex="-1" role="dialog" aria-labelledby="carouselProduct" aria-hidden="true"> <div class="modal-dialog modal-product-carousel"> <div class="modal-content js-imageZoomOverlay"> </div> </div> </div> <div class="modal modal-default" id="pdpModelId" tabindex="-1" role="dialog" aria-labelledby="pdpModelId" aria-hidden="true"> <div class="backdrop"></div> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <span class="modal-title" id="myModalLabel"> <h2 class="js-modal-title-display modal-title"></h2> </span> </div> <div class="modal-subtitle"></div> <div class="TGTLazyLoading"></div> <div class="modal-body"> </div> <a href="#" class="icon icon-close-circle" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> </div> </div> </div> <div class="modal modal-default" id="reviews-termsModal" tabindex="-1" role="dialog" aria-labelledby="reviews-termsModal" aria-hidden="true"> <div class="backdrop animate-fadeOut"></div> <div class="modal-dialog"> <div class="modal-content animate-slideUp"> <div class="modal-header"> <h2 class="modal-title" tabindex="-1">review guidelines</h2> </div> <div class="modal-body"> <p> Please be sure to review only the item itself. If you have any site-related, customer services, shipping, or purchase issues or questions, please <a class="h-text-underline" target="_blank" href="http://www.target.com/HelpContent?help=/sites/html/TargetOnline/help/contact_us/contact_us.html">contact us</a> or click "Help" at the top of the page to find what you\'re looking for. If you experience a health or safety issue with the product you are reviewing, please call Target Guest Relations at 1-800-480-0680 or <a class="h-text-underline" target="_blank" href="http://www.target.com/HelpContent?help=/sites/html/TargetOnline/help/contact_us/contact_us.html">contact us</a>. For any reviews you submit, you grant to Target a non-exclusive license, as set forth in our <a class="h-text-underline" target="_blank" href="http://www.target.com/spot/terms-conditions">Terms and Conditions</a>. Your review will be posted in one to two days. We\'ll post your screen name and location with your review. If you choose to answer reviewer profile questions such as age or gender, your responses will also be displayed with your review. Any submissions that do not follow our <a class="h-text-underline" target="_blank" href="http://help.target.com/help/subcategoryarticle?childcat=Product+Reviews&parentcat=Policies+%26+Guidelines&searchQuery=search+help">review guidelines</a> will not be posted. Target does not endorse, recommend or sponsor any guest product reviews, ideas or advice. </p> </div> <a href="#" class="icon icon-close-circle" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> </div> </div> </div> <div class="modal modal-default" id="reviews-tipsModal" tabindex="-1" role="dialog" aria-labelledby="reviews-tipsModal" aria-hidden="true"> <div class="backdrop animate-fadeOut"></div> <div class="modal-dialog"> <div class="modal-content animate-slideUp"> <div class="modal-header"> <h2 class="modal-title" tabindex="-1">tips for writing helpful reviews</h2> </div> <div class="modal-body"> <strong>Follow these guidelines to ensure that your review is published:</strong> <p> <ul> <li>• Keep your review short and sweet – between 75–300 words.</li> <li>• Focus on the item and your experience with it.</li> <li>• Don’t include your full name or other personal information.</li> <li>• Issues with customer service? Call us at 1-800-480-0680 so we can address your concerns.</li> </ul> </p> </div> <a href="#" class="icon icon-close-circle" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> </div> </div> </div> '}),define("text!templates/common/browse/product-review-rating-row.html",[],function(){return'<% if(webClass!=="Prepaid Cards" && webClass!==\'Giftcards\'){ %> <div class="title title-ratings"> <h2 class="title--category bravo"><a id="js-reviews-sr-id" class="link link-grayDarkest" style="text-decoration:none" tabindex="-1">guest reviews</a></h2> <a class="link link-grayDark link-underline guestRating--total" href="#" title="" aria-label="<%=totalreviewText%><% if(totalreviewText!=\'be the first!\'){ %> reviews <% } %>" data-behavior="handleReview"> <span class="link-underline" aria-hidden="true"><%=totalreviewText%></span> </a> </div> <div class="ratings-block"> <div class="ratings ratings-lg"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width:<%=(Number(overallrating.replace("-",".")) / 5) * 100%>%"> <span class="h-sr-only h-inlineWrap"> <%=overallrating%> out of 5 stars </span> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> </div> <%if(overallrating.replace("-",".") > 0 && totalreviewText > 0){%> <span itemprop="aggregateRating" itemscope itemtype="http://schema.org/AggregateRating"> <meta itemprop="reviewCount" content="<%=totalreviewText%>"> <meta itemprop="ratingValue" content="<%=overallrating.replace("-",".")%>"> <meta itemprop="bestRating" content="5"> </span> <% }%> <% } %> '}),define("text!templates/common/browse/product-mmbv-modal.html",[],function(){return'<%if(pdMmbvModal){%> <div id="overlay-curtain" data-behavior="removeOverlayCurtain" style="width: 10000px; height: 10000px; opacity: 0.5; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial" class="curtain-open"> </div> <div class="overlay xsmall modal" role="dialog" id="overlay" style="display:none;top: 46%; left: 50%; margin-left: -147.5px; margin-top: -170px" aria-busy="false"> <div class="content"> <div class="offer-details"> <%=pdMmbvModal.message || pdMmbvModal%> <input type="hidden" value="TV_NR_Rating.html"> <input type="hidden" value=""> </div> </div><div id="overlay-loading-curtain"></div><a href="javascript:;" id="close" class="icon-sprite close" title="Close" data-behavior="closeModal"></a></div> <%}%>'}),define("text!templates/common/browse/product-image-zoom-modal.html",[],function(){return'<div class="pdp-zoom-carousel"> <ul id="carouselModal" class="carousel carousel-product--modal js-images"> </ul> <ul id="carouselThumbnails" class="carousel carousel-product--thumbnails js-imageZoomThumbnails"> <li> <a href="javascript:void(0);" class="js-imageZoomThumbImgPos_0 js-changeSelZoomImage" data-idx="0" aria-label="Image 1 of <%= totalImages %>. Double tap to view." data-img-url="<%=heroImage%>"> <img src="<%=heroImage%>?wid=290&amp;hei=290&amp;qlt=70&amp;fmt=pjpeg" alt=""> </a> </li> <% _.each(altImages,function(imageUrl,index) { %> <li> <a href="javascript:void(0);" class="js-imageZoomThumbImgPos_<%=index+1%> js-changeSelZoomImage" data-idx="<%=index+1%>" aria-label="Image <%=index+2%> of <%=totalImages%>. Double tap to view." data-img-url="<%=imageUrl%>"> <img src="<%=imageUrl%>?wid=290&amp;hei=290&amp;qlt=70&amp;fmt=pjpeg" alt=""> </a> </li> <% }) %> </ul> </div> <button id="closeCarouselModal" class="icon js-closeZoomContainer btn btn-sm btn-round btn-default pdp-zoom-close" data-dismiss="modal" aria-label="close"> <img src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20%20id%3D%22svg4063%22%20inkscape%3Aversion%3D%220.48.5%20r10040%22%20sodipodi%3Adocname%3D%22UI%20-%20Bare%20Close%20%2822x22%29.svg%22%20xmlns%3Asodipodi%3D%22http%3A%2F%2Fsodipodi.sourceforge.net%2FDTD%2Fsodipodi-0.dtd%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ainkscape%3D%22http%3A%2F%2Fwww.inkscape.org%2Fnamespaces%2Finkscape%22%20%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2032%2032%22%20%20enable-background%3D%22new%200%200%2032%2032%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%20%3Cg%3E%20%20%3Cline%20fill%3D%22none%22%20stroke%3D%22%23767676%22%20stroke-width%3D%222.3%22%20stroke-miterlimit%3D%2210%22%20x1%3D%222%22%20y1%3D%222%22%20x2%3D%2230%22%20y2%3D%2230%22%2F%3E%20%20%3Cline%20fill%3D%22none%22%20stroke%3D%22%23767676%22%20stroke-width%3D%222.3%22%20stroke-miterlimit%3D%2210%22%20x1%3D%222%22%20y1%3D%2230%22%20x2%3D%2230%22%20y2%3D%222%22%2F%3E%20%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E"> </button> '}),define("text!templates/tablet/common/howStoreIsSet.html",[],function(){return'<div id="howStoreIsSet"> <div class="content-ATC apologize"> <p class="msgcontent">For your convenience, the nearest store is automatically selected for you. This is based on your current location information, as determined by the IP address of your mobile device. This information will be stored as a cookie on your device. You can change your location at any time by selecting <b><a href="/store-locator/find-stores">change store</a></b>.</p> </div> <div class="modal--buttons btn-group"> <button role="button" class="btn btn-primary btn-lg btn-block" data-dismiss="modal">okay</button> </div> </div> '}),define("text!templates/tablet/common/selectOptionOverlay.html",[],function(){return'<a id="popover-content-link" style="text-decoration: none" tabindex="-1"> <div class="popover fade top in <%=cssClass%>" role="button" data-trigger="focus" tab-index="0"> <div class="arrow"></div> <div class="popover-content"><%=message%></div> </div> </a> '}),define("text!templates/common/browse/product-specification-modal.html",[],function(){return' <%if(specModal){%> <div id="overlay-curtain" data-behavior="removeOverlayCurtain" style="width: 10000px; height: 10000px; opacity: 0.5; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(0, 0, 0); background-position: initial initial; background-repeat: initial initial" class="curtain-open"> </div> <div class="overlay xsmall modal" role="dialog" id="overlay" style="display:none;top: 46%; left: 50%; margin-left: -147.5px; margin-top: -170px" aria-busy="false"> <div class="content"> <div class="offer-details"> <h4 class="module-title"><%=specModal.description%></h4> <p><%=specModal.text%></p> </div> <div class="btn-rounded btn-red" style="margin-top:10px"><input type="button" value="okay" class="btn-red close" data-behavior="closeModal"></div> </div><div id="overlay-loading-curtain"></div> <a href="javascript:;" id="close" class="icon-sprite close" title="Close" data-behavior="closeModal"></a></div> <%}%> '}),define("text!templates/common/browse/product-attribute-ratings.html",[],function(){return'<%if(hasRatings) {%> <div class="detail_review_section" id="bb_detail_reviews" data-behavior="handleReview"> <div class="rating_header_container"> <div class="review-header"><%if(totalReviews>1){ %> guest reviews <%}else{%> guest review <%}%> <span class="total_reviews_amount">(<%=totalReviews %>)</span></div> <span class="detail_rating Stars-Grey_<%=overallrating%>"><%=overallrating%> out of 5 stars</span> <div class="clear"></div> </div> <span class="icon-icon_searchSubmit icon-arrow-right" aria-hidden="true"></span> <div class="clear"></div> </div> <% } else { %> <div class="detail_review_section" id="bb_no_reviews" data-behavior="handleReview"> <div class="rating_header_container"> <div class="review-header" id="rating_and_review">be the first to write a review</div> <span class="detail_rating Stars-Grey_0">0 out of 5 stars</span> <input name="type" type="hidden" value="write"> </div> <span class="icon-icon_searchSubmit icon-arrow-right" aria-hidden="true"></span> <div class="clear"></div> </div> <%}%> '}),define("text!templates/common/browse/product-video.html",[],function(){return'<div id="productVideoContainer"> <h2 class="h-tightSpacingTop h-text-center bravo">get a closer look</h2> <ul class="l-row l-col-xs-block-1 l-col-sm-block-1 l-col-md-block-1 l-col-lg-block-2 l-col-xl-block-3 px-inline-video h-overflow-hidden"> <li data-video-analytic-name="<%=video.path%>" class="px-video-container h-stretch" id="video-<%=video.sequenceId%>"> <div class="px-video-img-captions-container"> <div class="px-video-title show l-row"> <div class="l-col-xs-9 h-text-left l-col-nopadding"> <h3 class="h-text-overflow-ellipsis px-video-header"> <span><%=video.title%></span> </h3> <span class="px-video-runtime">/ <%=video.runtime%></span> </div> <%if (video.transcriptUrl) { %> <div class="l-col-xs-3 h-text-right h-zeroPaddingRight"> <a href="<%=video.transcriptURL%>" target="_blank" class="px-video-transcript"> transcript </a> </div> <% } %> </div> <div class="px-video-captions hide" aria-hidden="true"></div> <a href="#" class="icon-play-container js-initializePlayer"> <img class="icon-play" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQXJ0d29yayIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzMS45cHgiIGhlaWdodD0iMzMuNnB4IiB2aWV3Qm94PSItMS41IC0wLjUgMjIuOSAyMy42IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMi45IDIzLjYiIHhtbDpzcGFjZT0icHJlc2VydmUiIGZpbGw9IndoaXRlIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMC41Ij48cGF0aCBkPSJNMTkuNiwxMC45YzEsMC42LDEsMS41LDAsMkw1LjgsMjFjLTEsMC42LTEuNywwLjEtMS43LTFWMy45YzAtMS4xLDAuOC0xLjUsMS43LTFMMTkuNiwxMC45eiIvPjwvc3ZnPg==" alt="Play <%=video.title%>"> </a> <video poster="http://cdnapi.kaltura.com/p/<%=vTargetId%>/thumbnail/entry_id/<%=video.path%>/width/<%=width%>" title="<%=video.title%>"> </video> <% if(video.usage) { %> <span class="pdp-video-title" id="vmsVideoTitle<%=video.sequenceId%>"> <%=video.usage%> </span> <% } %> </div> <div class="px-video-controls hide"></div> </li> <% if (moreVidCount !== 0) { %> <li class="h-stretch h-standardSpacingTop h-text-center"> <button class="btn btn-default btn-lg h-align-center js-showMoreVideos" id="showMoreVideos"> <% if (moreVidCount === 1) { %> show <%=moreVidCount%> more video <% } else { %> show <%=moreVidCount%> more videos <% } %> </button> </li> <% } %> </ul> </div> '}),define("text!templates/common/browse/product-video-show-more.html",[],function(){return'<%_.each(videos,function(video){%> <li data-video-analytic-name="<%=video.path%>" class="h-standardSpacingTop px-video-container h-stretch" id="video-<%=video.sequenceId%>"> <div class="px-video-img-captions-container"> <div class="px-video-title show l-row"> <div class="l-col-xs-9 h-text-left l-col-nopadding"> <h3 class="h-text-overflow-ellipsis px-video-header"> <span><%=video.title%></span> </h3> <span class="px-video-runtime">/ <%=video.runtime%></span> </div> <%if (video.transcriptUrl) { %> <div class="l-col-xs-3 h-text-right h-zeroPaddingRight"> <a href="<%=video.transcriptURL%>" target="_blank" class="px-video-transcript"> transcript </a> </div> <% } %> </div> <div class="px-video-captions hide" aria-hidden="true"></div> <a href="#" class="icon-play-container js-initializePlayer"> <img class="icon-play" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQXJ0d29yayIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzMS45cHgiIGhlaWdodD0iMzMuNnB4IiB2aWV3Qm94PSItMS41IC0wLjUgMjIuOSAyMy42IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMi45IDIzLjYiIHhtbDpzcGFjZT0icHJlc2VydmUiIGZpbGw9IndoaXRlIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMC41Ij48cGF0aCBkPSJNMTkuNiwxMC45YzEsMC42LDEsMS41LDAsMkw1LjgsMjFjLTEsMC42LTEuNywwLjEtMS43LTFWMy45YzAtMS4xLDAuOC0xLjUsMS43LTFMMTkuNiwxMC45eiIvPjwvc3ZnPg==" alt="Play <%=video.title%>"> </a> <video poster="http://cdnapi.kaltura.com/p/<%=vTargetId%>/thumbnail/entry_id/<%=video.path%>/width/<%=width%>" title="<%=video.title%>"> </video> <% if(video.usage) { %> <span class="pdp-video-title" id="vmsVideoTitle<%=video.sequenceId%>"> <%=video.usage%> </span> <% } %> </div> <div class="px-video-controls hide"></div> </li> <%});%> '}),define("text!templates/common/browse/product-promo-row.html",[],function(){return'<div class="promoBlock promoBlock-PDP"> <%_.each(promotions,function(promotion) { %> <div class="promoBlock--slot"> <div class="promo promo-PDP"> <div class="promo--container"> <span class="promo--text h-text-red"><%=promotion.shortDescription%></span> <% if (promotion.promoUrl) { %> <a href="<%=promotion.promoUrl%>" class="promo--link promo--link-detailsLink js-routeToUrl">shop all</a> <% } %> <a href="#" class="promo--link promo--link-detailsLink" data-behavior="modal" data-target="#pdpModelId" data-event="v:model:showPromoContent" data-promotionidentifier="<%= promotion.promotionIdentifier %>">offer details</a> <% if(promotion.isCoupon && !isCouponApplied) { %> <a href="javascript:;" class="promo--link promo--link-couponLink" data-behavior="applyCouponDiscount">apply coupon</a> <% } else if(promotion.isCoupon && isCouponApplied)  { %> <span class="promo--couponApplied"> coupon applied </span> <% } %> </div> </div> </div> <%})%> </div> '}),define("text!templates/common/browse/product-callout-row.html",[],function(){return'<div class="details--ribbon"> <span class="h-sr-only"><%=callOutMsg%> Target</span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> <%=callOutMsg%> <img class="icon-bullseye-sm" src="<%=img_domain%>/images/icons/bullseye-black.svg" alt="Target"> </span> </div> '}),define("text!templates/tablet/browse/product-hero-image-carousal.html",[],function(){return'<ul class="carousel carousel-product"> <li> <a href="javascript:void(0);" data-idx="0" title="<%= title %> Image 1 of <%= totalImages %> zoom in." class="js-showZoomImage"> <img itemprop="image" src="<%=heroImage%>?wid=450&amp;hei=450&amp;fmt=pjpeg" alt="" class="<%= (!hasAltImages)? \'single-image\': \'\' %>"> </a> </li> <%_.each(altImages,function(imageUrl,index){ %> <li class="<%= (hideAltImages)? \'hidePdpAltImages\': \'\' %>"> <a href="javascript:void(0);" class="js-showZoomImage" data-idx="<%=index+1%>" title="<%= title %> Image <%=index+2%> of <%=totalImages%> zoom in." class="image_position_<%=index+1%>"> <img src="data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D\'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\' viewBox%3D\'0 0 450 450\'%2F%3E" data-src="<%=imageUrl%>?wid=450&amp;hei=450&amp;fmt=pjpeg" alt=""> </a> </li> <% }) %> </ul> <div class="h-float-right btn-pinterest productCrush"> <div class="popover top popover-white popover-sm js-productCrushCount productCrush-count"> <div class="arrow"></div> <div class="popover-content"> <div> <span class="h-sr-only js-loveCountAria"></span> <span aria-hidden="true" class="js-loveCount"></span> </div> </div> </div> <div class="popover-demo productCrush-icon js-productCrushIcon" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content link link-white&quot;></div></div>" data-placement="top" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites btn-favoritesPDP js-tgtcrush js-favorites" aria-label="<%= \'love \' + (title || \'this item\') + \' to keep tabs on it\' %>" data-title="<%= title %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#333" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </div> '}),define("text!templates/tablet/browse/product-message-row.html",[],function(){return'<% if(chokingHazard){ %> <span class="content-alert--message messageInfo"><%=chokingHazard%></span> <% } %> <% if(noGiftWrapable){ %> <span class="content-alert--message messageInfo"> <%=noGiftWrapable%></span> <% } %> <% if(inventoryStatus && inventoryCode===1){ %> <span class="content-alert--message messageInfo"><%=inventoryStatus%></span> <% } %> '}),define("text!templates/tablet/common/variation-primary.html",[],function(){return'<%var iterator=1000; var totalProducts = 0;%> <div class="title product-variation-color-title"> <p class="charlie"> <span class="h-text-bold"><%=varObj[ "prVariationText"]%></span> <span class="selImgCol sbc-prim-text-hook"><%=varObj.preSelectPrimary[ "prKey"]%></span> </p> </div> <div class="carousel carousel-scroll sbc-carousal"> <div class="js-carousel-view variator variator-color products-scroll"> <ul class="js-carousel-list sbc-carousal variator-options variator-color-options"> <%_.each(varObj.augmentedEntitledItemLookup,function(value, key){%> <% var isChecked = (varObj.preSelectPrimary.prKey == key) %> <li data-role="radio" class="variator--option variator--option-color"> <a href="javascript:void(0);" class="variator--option--label js-variator-options" aria-label="<%= key %> <%= isChecked ? \'checked\' : \'\' %>" data-checked="<%= isChecked ? \'true\' : \'false\' %>" aria-atomic="true" aria-live="polite" data-text="<%= key %>"> <input aria-hidden="true" tabindex="-1" name="variator_primary" id="<%=iterator%>" class="variator--option--control sbc-carousal-option" type="radio" data-key="<%=encodeURIComponent(key)%>" <%= isChecked ? \'checked=checked\' : \'\' %> > <div class="variator--option--imagecircle" aria-hidden="true"> <img class="variator--option--image" src="<%= value.swatchColorUrl %>" alt=""> </div> <div class="variator--option--swatch" aria-hidden="true"> <div class="variator--option--swatch--arc"></div> <img class="variator--option--swatch--image" src="<%= value.swatchAltUrl %>&qlt=80" alt=""> <svg class="variator--option--swatch--check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" aria-hidden="true" focusable="false"> <path fill="#FFF" d="M9.6 20.9C9 20.9 1 16.7 1 14.8c0-.9 1-2.3 2.8-4.2.2-.2.5-.3.7-.3.2 0 .5.1.6.2 1.1.9 2.4 1.9 3.2 2.4 1-1.4 3.2-5.1 4.7-7.5 2.4-4 2.5-4 2.8-4.2.2-.1.4-.1.5-.1 1 0 4.5 2.8 4.5 4.2 0 .4 0 .9-5.2 8.2-5.1 7.4-5.4 7.4-6 7.4z"/> <path fill="#333" d="M16.5 2.1c.4 0 3.4 2.4 3.4 3.1 0 .7-9.8 14.6-10.4 14.6-.5 0-7.5-4.2-7.5-5.1 0-.9 2.5-3.5 2.5-3.5s3.6 2.9 4.1 2.9c.6.1 7.6-11.8 7.9-12m0-2.1c-.4 0-.8.1-1.1.3-.6.3-.6.3-3.2 4.6-1.1 1.8-2.9 4.8-4.1 6.5-.7-.5-1.5-1.2-2.3-1.7-.3-.3-.7-.5-1.2-.5s-1.1.2-1.5.6C0 13.1 0 14.3 0 14.8c0 1.2.6 2.1 4.5 4.6C8.4 22 9.1 22 9.6 22c1.2 0 1.5 0 7.1-7.9C22 6.5 22 6 22 5.2c0-1.1-.6-2-2.3-3.4C17.6 0 16.9 0 16.5 0z"/> </svg> </div> </a> </li> <% iterator++; totalProducts++; })%> </ul> </div> </div> <div class="carousel--expander js-carouselExpander" data-total="<%= totalProducts %>" data-type="<%= varObj.prVariationText %>s"> <button> <span class="js-carouselExpanderText"> all <%= totalProducts %> <%= varObj.prVariationText %>s </span> <div class="h-sr-only js-carouselExpanderA11y">shows more content</div> <svg class="carouselExpander--arrow" xmlns="http://www.w3.org/2000/svg" fill="#333" height="7" width="7" viewBox="0 0 32 32"><path d="M16 25L0 9l2-2 14 14.063L30 7l2 2z"/></svg> </button> </div> '}),define("text!templates/tablet/common/variation.secondary.html",[],function(){return'<% var preSelectKey=varObj.preSelectPrimary[ "prKey"];\nvar preselect = false;\nvar totalProducts = 0;\nvar variation=primary?_.getVal(varObj, "augmentedEntitledItemLookup"):_.getVal(varObj, "augmentedEntitledItemLookup[\'"+preSelectKey+"\'].secondaryVariation"); var iterator=primary?1000:2000;\n%> <div class="title product-variation-color-title"> <p class="charlie"> <span class="h-text-bold"><%=primary ? varObj["prVariationText"] : varObj["srVariationText"]%></span> <span class="<%=primary? \'sbc-prim-text-hook\':\'sbc-sec-text-hook\'%>"><%=primary ? preSelectKey : \'\'%></span> <% if(varObj.sizechart){ %> <span><a class="link-grayDarker h-text-underline size-chart-content" id="js-sizechart--open" href="#">size chart</a></span> <% } %> </p> </div> <div class="carousel carousel-scroll sbc-carousal"> <div class="js-carousel-view variator variator-size products-scroll"> <ul class="js-carousel-list variator-options variator-size-options variator--option-size"> <%_.each(variation,function(value, key, index) {\n                    preselect = false;\n                    %> <%\n                    if (primary  || (!primary && value.inStock)) {\n                      if (!primary) {\n                        preselect = value.preSelect;\n                      } else {\n                        if (preSelectKey == key){\n                          preselect = true;\n                        }\n                      }\n                    %> <li data-role="radio" class="variator--option variator--option-size"> <a href="javascript:void(0);" class="btn btn-default variator--option--label js-variator-options sbc-variator-options" aria-label="<%= key %> <%= preselect ? \'checked\' : \'\' %>" data-checked="<%= preselect ? true : false %>" aria-atomic="true" aria-live="polite" data-text="<%= key %>"> <input aria-hidden="true" tabindex="-1" name="variator_<%= primary ? \'primary\' : \'secondary\'%>" class="variator--option--control sbc-carousal-option" id="<%= iterator %>" type="radio" data-key="<%=encodeURIComponent(key)%>" <%=preselect ? "checked=checked": ""%> > <span aria-hidden="true"><%= key.split("_sr")[0] %></span> <svg class="variator--option--swatch--check" xmlns="http://www.w3.org/2000/svg" viewBox="293 473 612 612" aria-hidden="true" focusable="false"> <circle fill="#333" cx="599" cy="779" r="306"/> <path fill="#FFF" d="M685.7 656.6c-5.1 2.6-107.1 175.9-112.2 175.9-7.6 0-58.6-40.8-58.6-40.8s-38.3 38.2-38.3 51 102 73.9 109.6 73.9S736.6 715.2 736.6 705c.1-12.7-45.8-50.9-50.9-48.4z"/> </svg> </a> </li> <%}%> <% iterator++; totalProducts++; })%> </ul> </div> </div> <div class="carousel--expander js-carouselExpander" data-total="<%= totalProducts %>" data-type="<%= primary ? varObj.prVariationText : varObj.srVariationText %>s"> <button> <span class="js-carouselExpanderText"> all <%= totalProducts %> <%= primary ? varObj.prVariationText : varObj.srVariationText %>s </span> <div class="h-sr-only js-carouselExpanderA11y">shows more content</div> <svg class="carouselExpander--arrow" xmlns="http://www.w3.org/2000/svg" fill="#333" height="7" width="7" viewBox="0 0 32 32"><path d="M16 25L0 9l2-2 14 14.063L30 7l2 2z"/></svg> </button> </div> '}),define("text!templates/tablet/common/variation-pdp.html",[],function(){return'<div class="sbc-header-wrapper add-heading"> </div> <%if(varObj["espItem"]){%> <div id="SfsWrapper" class="pdp-esp-wrapper"> <div class="form form-checkbox"> <input id="warranty_service" class="form--control esp-custom-chbx" type="checkbox" value="service" data-behavior="changeCheckBoxColor"> <label for="warranty_service" class="form--label"> <span class="form--text"><%=varObj.espItem.espDescription%></span> <span class="form--subtext"><span class="price"><%=varObj.espItem.espPrice%> </span><a href="#" class="learnmore-link link-underline" data-behavior="modal" data-target="#pdpModelId" data-event="v:model:showEspContent">See plan details</a></span> </label> </div> </div> <%}%>  <%if(appleTnC && appleTnC.isAppleCard){%> <div class="plpAppleGiftCardTnCFlip h-standardSpacingBottom"> <div class="plppoptrig plpAppleGiftCardTnCText"> <span class="plpAppleGiftCardTnCTextHdr"> <%=appleTnC.shortProductDescription || \'\'%> </span> <a href="javascript:void(0);" class="plpAppleGiftCardTnCMoreLink" title="Click to view Apple Terms and Conditions">More...</a> <div class="details-hidden plpAppleGiftCardTermsnConds h-sr-only"> <h3 class="details-header">apple terms and conditions</h3> <%=appleTnC.shortProductDescription || \'\'%> </div> </div> </div> <%}%> <%if(varObj.variationCount){%> <div class="js-carousel-container carousel-container uim-pr-var variator--pdp"> <%=vPrimaryTpl({ "varObj":varObj, "primary":true})%> </div> <%}else{%> <div class="pre-order-margin"> <%}%> <%if(varObj.variationCount>1){%> <div class="js-carousel-container carousel-container uim-sec-var h-text-lowercase variator--pdp"> <%=vSecondaryTpl({ "varObj":varObj, "primary":false})%> </div> <%}%> <div class="js-fitstyle"></div> <div class="add-item-wrapper h-standardSpacingTop"> </div> </div>'}),define("text!templates/tablet/common/addtocart-all.html",[],function(){return' <% if(isSubscription) { %> <div class="form form-radio form-subscription"> <input id="normalItem" class="form--control" type="radio" data-behavior="addChkboxToggle" name="radio-add-subscription" checked="checked"> <label for="normalItem" class="form--label"> <span class="form--text"> one-time order </span> </label> <input id="subscriptionitem" class="form--control subscription-custom-chbx" type="radio" data-behavior="subscriptionChkboxToggle" name="radio-add-subscription"> <label for="subscriptionitem" class="form--label"> <span class="form--text" style="color: #c00"> <%=subDisplayMsg%> </span> <span class="form--subtext"> <span class="h-text-grayDark"> ships free on your schedule.</span> <a class="learnmore-link js-routeToUrl" href="/c/why-target-subscriptions/-/N-4sn09" title="learn more">learn more</a> </span> </label> <div id="subscription-freq-wrapper" class="form--subElements is-hidden" aria-hidden="true"> <div class="h-collapsible--content"> <div class="dropdown dropdown-default dropdown-native" data-behavior="forms"> <label class="dropdown--label h-sr-only" for="subFreq">select subscription frequency</label> <select id="subFreq" name="subFreq" class="dropdown--select subscription-freq"> <% _.each(subRecurrence, function(txt) { %> <option value="<%= txt.value %>"><%= txt.key %></option> <% }) %> </select> </div> <%if(showRegReturn){%> <div class="title-registry--info h-tightPaddingBottom h-text-xl h-text-grayDark"> back to <a href="<%=registry.backLinkUrl%>" title="<%=registry.backLinkName%>" class="link link-grayDark link-underline"><%=registry.backLinkName%></a> </div> <%}%> <div class="subscribe-wrap" style="padding-bottom:1px"> <%if(isAddToCartEligible){%> <button data-subscribe="true" class="sbc-subscribe btn btn-primary btn-lg btn-block <%=isProductSelected?\'sbc-selected\':\'\'%>" <%=(isAcclaim||canBeShipped)?"":"disabled"%> > add subscription to cart </button> <%}else{%> <button class="btn btn-default btn-lg btn-block btn-disabled is-disabled" disabled="disabled"> currently unavailable </button> <%}%> </div> <div class="card" id="subscription-wrap" style="display:none"> <p class="card--title"> <span class="h-text-lowercase">free subscription shipping</span></p> <p class="card--message"><span class="h-text-greenDark">first order ships in 1-2 days</span></p> </div> </div> </div> </div> <% } %> <div id="AddToCartAreaId"> <%if(showRegReturn){%> <div class="title-registry--info h-tightPaddingBottom h-text-xl h-text-grayDark"> back to <a href="<%=registry.backLinkUrl%>" title="<%=registry.backLinkName%>" class="link link-grayDark link-underline"><%=registry.backLinkName%></a> </div> <%}%> <div class="add-to-cart-wrap <%= (!enableHandlingfeeLink) ? \'h-standardSpacingBottom\' : \'\' %>"> <div class="<%= (!isPreOrder && inStockQtyWCS && isAddToCartEligible  && enableHandlingfeeLink) ? \'btn-prepend\' : \'\' %>"> <%if(!isPreOrder && inStockQtyWCS && isAddToCartEligible && enableHandlingfeeLink && enableHandlingfeeLink){%> <div class="quantityDropdown quantityDropdown-button quantityDropdown-button-red"> <select id="sbc-quantity-picker"> <% (inStockQtyWCS > 99) && (inStockQtyWCS = 99);\n					for (var i=1; i <= inStockQtyWCS; i++) { %> <option value="<%=i%>"><%=i%></option> <% } %> </select> <label class="quantityDropdown--label" for="sbc-quantity-picker"> <span class="quantityDropdown--value h-text-bold js-quantityDropdownUpdate" aria-hidden="true">1</span> <svg class="quantityDropdown--arrow" xmlns="http://www.w3.org/2000/svg" fill="#fff" viewBox="0 0 32 32"><path d="M16 25L0 9l2-2 14 14.063L30 7l2 2z"/></svg> <div class="quantityDropdown--text" aria-hidden="true">qty</div> <div class="h-sr-only">quantity is <div class="js-quantityDropdownUpdate" aria-hidden="true">1</div></div> </label> </div> <% } %> <%if(isAddToCartEligible){%> <button data-express="false" data-behaviour="modal" data-target="#block-ATC" data-store="<%=fromStore%>" data-tcin="<%= tcin %>" data-fiats="<%=fiats%>" data-event="<%=eventId%>" class="sbc-add-to-cart btn btn-primary btn-lg btn-block <%=isProductSelected?\'sbc-selected\':\'\'%>" <%=((isAcclaim||canBeShipped) && !isPOUnsellable)?"":"disabled"%> > <%=isPreOrder ? atcText : "add to cart" %> </button> <%}%> </div> </div> <div class="add-to-cart-wrap <%= (!enableHandlingfeeLink) ? \'h-standardSpacingBottom\' : \'\' %>"> <% if(!isAddToCartEligible) { %> <% if(isGetThisPhone) { %> <button data-carriercorpid="<%=carrierCorpId%>" data-dpci="<%=dpci%>" data-storeid="<%=storeId%>" data-express="false" data-store="<%=fromStore%>" data-tcin="<%= tcin %>" data-fiats="<%=fiats%>" data-event="<%=eventId%>" aria-title="get this phone" class="sbc-getphone btn btn-primary btn-lg btn-block <%=isProductSelected?\'sbc-selected\':\'\'%>" <%=(isAcclaim||canBeShipped)?"":"disabled"%> > get this phone </button> <%} else if(isOnlySoldInStore) { %> <button class="btn btn-default btn-lg btn-block btn-disabled is-disabled" aria-title="only in stores" aria-disabled="true"> only in stores </button> <%} else {%> <button class="btn btn-default btn-lg btn-block btn-disabled is-disabled" disabled="disabled"> <%=isOOSNearyBy? \'unavailable near you\' : \'currently unavailable\'%> </button> <% } %> <% } %> <% if (typeof showRegBtn != \'undefined\' && showRegBtn) { %> <div class="<%= isProductSelected ? \'btn-prepend\' : \'\' %>"> <% if (isProductSelected) { %> <div class="quantityDropdown quantityDropdown-button quantityDropdown-button-white"> <select id="js-regQtyPicker"> <%  for (var i=1; i <= 99; i++) { %> <option value="<%=i%>"><%=i%></option> <% } %> </select> <label class="quantityDropdown--label" for="js-regQtyPicker"> <span class="quantityDropdown--value h-text-bold js-regQtyUpdate" aria-hidden="true">1</span> <svg class="quantityDropdown--arrow" xmlns="http://www.w3.org/2000/svg" fill="#333333" viewBox="0 0 32 32"><path d="M16 25L0 9l2-2 14 14.063L30 7l2 2z"/></svg> <div class="quantityDropdown--text" aria-hidden="true">qty</div> <div class="h-sr-only">quantity is <div class="js-regQtyUpdate" aria-hidden="true">1</div></div> </label> </div> <% } %> <button class="sbc-add-to-registry btn btn-default btn-lg btn-block js-registryEvent"> <%=regText%> </button> </div> <%}%> </div> <%if(!isGiftCard || isShippingGiftCard){%> <div class="card"> <%if(!isAcclaim || !isShippingMessageReadyToDisplay) { %> <div class="min-height-loader"> <div class="TGTLazyLoading"></div> <input type="hidden" data-target="#fiatsOverlay" data-behavior="modal" data-tcin="<%= tcin %>" id="findStore" class="btn btn-sm btn-default"> </div> <% } else { %> <%if(!isDigitalDownload){%> <%if(isProductSelected){%> <%if(zipCode) { %> <div class="js-Zipcode-block" style="display: none"> <span class="h-text-lowercase"> <%=zipCodeMsg%> to <%=zipCode%> </span> <div class="form form-input h-standardPaddingTop"> <label for="zipCodeFF" style="background: #f7f7f7">enter your zip code <span class="h-sr-only"></span> </label> <input id="zipCodeFF" name="zipCodeFF" class="form--control validation-field js-zipcode-ff" type="text" required="required" value=""> <aside class="form--longInstruction">we’ll show updated delivery options for your area</aside> </div> <div> <button type="button" class="btn btn-primary btn-sm js-zipcode-submit">submit</button> <button type="button" class="btn btn-default btn-sm js-zipcode-close" value="cancel">cancel</button> </div> </div> <%}%> <div class="js-shipping-block"> <%if(_.isDefined(shipping)){%> <p class="card--title"> <span class="h-text-lowercase"> <%=shippingMsg%> <%if(shipping && zipCode){%> to <a href="#" class="js-zipcode-fetch link-underline"><%=zipCode%></a> <%}%> </span> <% if(shipping && isBackOrder) { %> <span class="h-text-orangeDark h-text-lowercase"><%=shippingCondition%></span> <%} else if(!shipping) { %> <span class="h-text-orangeDark h-text-lowercase"><%=shippingCondition%></span> <%} else { %> <% if(isLtdQty && ltdQtyItem > 0) { %> <span class="h-text-orangeDark h-text-lowercase" style="font-size:15px !important"> only <%=parseInt(ltdQtyItem)%> left</span> <%}%> <%}%> </p> <% if(shipping && !isPreOrder && !isBackOrder) { %> <p class="card--message"> <%if(!_.isEmpty(shipMethodMsgs)){%> <%_.each(shipMethodMsgs, function(method) {%> <%if(method.showGenericMsg){%> <span class="h-text-greenDark"><%=method.date%> </span><%=method.shippingCondtion%> <%}else{%> <%if(shippingMethod.toLowerCase() == \'rush delivery\'){shippingMethod = \'rush\';}%> </p><p> <span class="h-text-greenDark">get it <%=method.date%></span> <% if (method.showRedCardMsg) { %> <span> free with your REDcard</span> <% } else { %> <span> with <%=method.shippingCondtion.toLowerCase() %> shipping</span> <% } %> </p> <%}%> <%})%> <%}else if(shipMethodsFailed){%> <span class="h-text-greenDark">in stock </span><span><%=Target.labels.get(\'SHIPMETHODS_FAIL_SHIPPING_MSG\')%></span> <%}else{%> <span class="h-text-greenDark">get it free in 3-5 days </span><%=shippingCondition%> <%}%> <%if(bulky) {%> <br><span class="h-text-grayDark"><% if(enableHandlingfeeLink) { %> <a href="javascript:;" class="link link-grayDark link-underline" data-behavior="modal" data-target="#pdpModelId" data-event="v:model:showHandlingFee">handling fee applies</a> <% } else { %>handling fee applies<% } %></span> <%}%> <p></p> <% } else if(isPreOrder) { %> <p class="card--message"> <span class="h-text-greenDark"><%=pickupMsg%></span> <% if(!isPOUnsellable) { %> <br> <span class="h-text-grayDark">arrives on or shortly after release date</span> <% } %> </p> <%}%> <%}else if(_.isDefined(delivery)){%> <p class="card--title"> <%=deliveryMsg%> <%if(!delivery){%> <span class="h-text-grayDark"><%=deliveryCondition%></span> <%} else if(zipCode) {%> to <a href="#" class="js-zipcode-fetch link-underline"><%=zipCode%></a> <%}%> <% if(isLtdQty && ltdQtyItem > 0) { %> <span class="h-text-orangeDark h-text-lowercase" style="font-size:15px !important"> only <%=parseInt(ltdQtyItem)%> left</span> <%}%> </p> <% if(delivery) { %> <p class="card--message"> <span class="h-text-greenDark"> free <%= deliveryLTLMessage%> </span> <%=upgradeAvailable%> <%if(obgbMsg){%> <%\n                     	    		if(shippingMethod.toLowerCase() == \'rush delivery\'){\n                     	    			shippingMethod = \'rush\';\n                     	    		}\n		                        %> <br><span class="h-text-greenDark">get it <%=obgbMsg%></span><span> with <%=shippingMethod.toLowerCase() %> shipping</span> <%}%> <%if(bulky) {%> <br><span class="h-text-grayDark"><% if(enableHandlingfeeLink) { %> <a href="javascript:;" class="link link-grayDark link-underline" data-behavior="modal" data-target="#pdpModelId" data-event="v:model:showHandlingFee">handling fee applies</a> <% } else { %>handling fee applies<% } %></span> <%}%> </p> <%}%> <%}%> </div> <% if (!isGiftCard) { %> <hr class="card--hr"> <%if((storePickup || shipToStore) || pickupMsg) {%> <%if(Target.Template.bridgeData.feature.PEAK_HOURS_FLAG == \'true\') {%> <p class="card--title"> free order pickup <% if(!storePickup) { %> <span class="h-text-orangeDark">not available</span> <%}%> </p> <%}else{%> <%if(_.isUndefined(storePickup)) {%> <%if(isPreOrder){ %> <p class="card--title"> free order pickup <span class="h-text-orangeDark">not yet available</span> </p><p class="card--message"> <span class="h-text-greenDark"><%=StorePickupMsg%></span> </p> <p></p> <%}else{%> <p class="card--title"> <%if(_.isUndefined(shipToStore)){%> free order pickup <%}else{%> free ship to store <%}%> <% if(!shipToStore && !aoService) { %> <span class="h-text-orangeDark">not available</span> <%}%> </p> <% }if(!isPreOrder && myStore) { %> <p class="card--message"> <span class="<%=inStock?\'h-text-greenDark\':\'h-text-orangeDark\'%>"> <%=pickupMsg%></span> <%if(myStore != true){%> at <%=myStore%><%}%> <%if(shipToStoreMsg && shipToStoreMsg!=\'or your favorite target store\'){%> <br> <span class="h-text-grayDark"><%=shipToStoreMsg%></span> <%}%> </p> <%}else{%> <% if(isPreOrder && isAoPreOrderAvailable) { %> <p class="card--message"> <span class="<%=inStock?\'h-text-greenDark\':\'h-text-orangeDark\'%>"> <%=preOrderAoMsg%></span> <%if(myStore && myStore != true){%>at <%=myStore%><%}%> </p> <%}%> <%}%> <%}else{%> <%if(isPreOrder && isWebOnly){%> <p class="card--title"> <span class="h-text-orangeDark">not sold in stores</span> </p> <%}else {%> <p class="card--title"> <% if(!storePickup) {\n										if(isPreOrder){ %> free order pickup <span class="h-text-orangeDark">not yet available</span> </p><p class="card--message"> <span class="h-text-greenDark"><%=StorePickupMsg%></span> </p> <%}else{%> <% if(pickupMsg == \'in stock\'){ %> buy in store <% } else {%> free order pickup <span class="h-text-orangeDark">not available</span> <% } %> <%}%> <%}else{%> <%= (pickupMsg == \'in stock\') ? "buy in store" : "free order pickup" %> <%}%> <% if(isStoreLtdQty && StoreltdQtyItem > 0) { %> <span class="h-text-orangeDark h-text-lowercase" style="font-size:15px !important"> only <%=StoreltdQtyItem%> left</span> <%}%> <p></p> <% if(!isPreOrder) { %> <%if(myStore || (bulky && shipToStore) || (typeof(visitStoreToPurchase) != \'undefined\')){%> <p class="card--message"> <%if(myStore){%> <span class="<%=inStock?\'h-text-greenDark\':\'h-text-orangeDark\'%>"><%=pickupMsg%></span> <%if(myStore != true){%> at <%=myStore%><%}%> <%if(myStore != true && additionalStore){%> <br><span class="<%=additionalStore.inStock?\'h-text-greenDark\':\'h-text-orangeDark\'%>"><%=additionalStore.pickupMsg%></span> at <%=additionalStore.myStore%> <%}%> <%}%> <%if(bulky && shipToStore) {%> <br><span class="h-text-grayDark"><% if(enableHandlingfeeLink) { %> <a href="javascript:;" class="link link-grayDark link-underline" data-behavior="modal" data-target="#pdpModelId" data-event="v:model:showHandlingFee">handling fee applies</a> <% } else { %>handling fee applies<% } %></span> <%}else if(typeof(visitStoreToPurchase) != \'undefined\'){%> <br><span class="h-text-grayDarker"><%=visitStoreToPurchase%></span> <%}%> </p> <%}%> <%}}%> <%}%> <%}%> <% } else {%> <p class="card--title"> <span class="h-text-orangeDark">not sold in stores</span> </p> <%}%> <% } %> <% } else {%> <% if (!isGiftCard) { %> <% if(isProductSelected) {%> <p class="card--message"> <%if(myStore && !isPreOrder){%><span class="h-text-orangeDark"><%=pickupMsg%></span> <%if(myStore != true){%>at <%=myStore%><%}}%> </p> <% } else { %> <p class="card--title"> <span class="h-text-orangeDark"><%=pickupMsg%></span> </p> <% } %> <% } %> <% } %> <% } else { %> <p class="card--title"> <span class="h-text-orangeDark">not sold in stores</span> </p> <% } %> <%if ((isProductSelected && pickupMsg && !isPreOrder) || (isPreOrder && isAoPreOrderAvailable) || disableGeo) {\n             \n	        	var fiatsName = "find at another store";\n				var topPadding = "";\n	        	if(pickupMsg && pickupMsg == "check store availability"){\n	        		fiatsName = "check store availability";\n					topPadding = "h-tinySpacingTop";\n	        	}\n            \n            %> <button data-target="#fiatsOverlay" data-behavior="modal" data-tcin="<%= tcin %>" id="findStore" class="btn btn-sm btn-default <%=topPadding%>"><%=fiatsName%></button> <%}%> <span id="aisleInfoMsg" class="h-display-inline h-text-sm h-tightSpacingLeft is-hidden"></span> <% } %> </div> <% } else if (productDeliveryMethod) { %> <div class="card"> <p class="card--title"> <span class="h-text-lowercase"> <%= productDeliveryMethod %> delivery </span> </p> <p class="card--message"> <span class="h-text-greenDark"> usually sent within 4 hours </span> </p> </div> <% } %> </div> '}),define("text!templates/tablet/common/addToBundle.html",[],function(){return' <div class="add-to-cart-wrap"> <%if(isAddToBundleEligible){%> <%if(isAddedToBundle){%> <button class="sbc-add-to-bundle btn btn-primary btn-lg btn-block <%=isProductSelected?\'sbc-selected\':\'\'%>"> add to bundle </button> <%}else{%> <button class="sbc-remove-bundle btn btn-primary btn-lg btn-block <%=isProductSelected?\'sbc-selected\':\'\'%>"> remove from bundle </button> <%if(update){%> <a href="javascript:;" class="sbc-update-bundle">update bundle</a> <%}%> <%}%> <%}else{%> <button class="btn btn-default btn-lg btn-block" aria-title="currently unavailable dimmed"> currently unavailable </button> <%}%> <div></div></div>'}),define("text!templates/tablet/common/esp-details.html",[],function(){return'<ul class="feature-details"> <% _.each(espdetails,function(item){ %> <li><%= item %></li> <% }); %> </ul> <a class="esp-terms-condition link-underline" target="_blank" href="https://www.squaretrade.com/terms" data-behavior="gotoEspTandCpage">Terms and Conditions</a> '}),define("text!templates/tablet/common/variation-header.html",[],function(){return'<div class="details details-pdp"> <%if(dataAvailable){%> <%if(isBundle){%> <span>bundle includes choice of:</span> <%}else{%> <h2 class="title-product h-border-zero js-variation-title" tabindex="-1"><%=title%></h2> <div class="price"> <span class=" <% if ( eyebrow && !mapPrice) {%> h-text-red <% } %>" aria-live="polite"><%=offerprice%></span> <% if ( eyebrow && !mapPrice) {%> <span class="h-text-red price--eyebrow"><%=eyebrow%></span> <% }%> </div> <% if (!!chokingHazard) {%> <div class="content-alert h-standardSpacingTop single section-margins"> <span class="content-alert--message messageInfo"><%=chokingHazard%></span> </div> <% }%> <%if(promotion){%> <ul class="h-text-red promo"> <li class="promo--container"><%=promotion%></li> </ul> <%}%>  <%}%> <%} else {%> <span class="h-text-red" role="header" aria-level="2">choose options</span> <%}%> </div> <hr aria-hidden="true"> '}),define("text!templates/tablet/common/fiats-find-store.html",[],function(){return'<div id="fiatfindstore" title="Find in a target store page"> <div class="stores" id="mFiatsSearch"> <form id="fiatsForm" action="javascript:void(0)"> <div class="headSetFocus" title="Find in a target store page"><h2 class="fiat-search-heading fiat-stores-heading">find in a Target store</h2></div> <div class="form-div field-wrapper"> <input type="text" id="fiatsLocationInput" name="fiatsLocationInput" data-name="enter ZIP or city, state" placeholder="enter ZIP or city, state" class="fiats-stores-input validation-field"> </div> <div class="button large-button important-button"> <div class="button-bg"> <div class="button-shadow"> <a href="#" id="fiatsGoBtn">find stores</a> </div> </div> </div> </form> </div> </div> '}),define("text!templates/tablet/common/find-in-store.html",[],function(){return'<div class="addToCartOverlay plp-findStore modal-at-center"> <div class="triangle"></div> <div class="modal fade in" id="block-ATC1" tabindex="-1" style="z-index:10003" role="dialog" aria-labelledby="myModalLabel"> <div class="modal-dialog xsmall"> <div class="modal-content modal-container scContent"> <div class="content-ATC"> </div> </div> </div> </div> </div>'}),define("text!templates/common/browse/product-helpful-review-row.html",[],function(){return'<div class="guestReview"> <div class="title title-left"> <h3 class="title-text delta">Most Helpful Positive Review</h3> </div> <p class="guestReview--text">"<%= reviewText %>"<% if(isMoreEnable){ %><a class="link link-grayDarker" href="#" data-behavior="handleReview">more</a><% } %></p> <button class="btn btn-default btn-sm" href="#" data-behavior="handleReview">see all <%= totalreview %> reviews</button> <%if(isWriteReview){%> <button class="btn btn-default btn-sm" href="#" data-behavior="writeAReview">write a review</button> <%}%> </div>'}),define("text!templates/tablet/common/global-errors.html",[],function(){return'<%if(message){%> <style> .sbc-gerror {\n		width: 100%;\n		max-width: 100%;\n		top: 108px;\n		border-radius: 0px;\n		color: #c45500;\n		display: block;\n		background-color: #fff;\n	} </style> <div class="popover fade top in hide sbc-gerror" role="button" data-trigger="focus" tab-index="0"> <div class="popover-content"> <%=message%> <%if(linkText){%> <a href="#" class="<%=linkClass%>"> <%=linkText%> </a> <%}%> </div> </div> <%}%> '}),define("text!templates/common/browse/expertReviews/beauty-concierge-review.html",[],function(){return'<div class="js-expertReviews-beautyConciergeReview"></div> '}),define("text!templates/common/browse/expertReviews/common-sense-review-container.html",[],function(){return'<div class="js-expertReviews-commonSenseReviewContainer"></div> '}),define("text!templates/common/browse/question-answer.html",[],function(){return'<div class="is-hidden questionAnswer--summary js-questionAnswer-summary" id="bvTag-questionAnswerSummary"></div> '}),define("text!templates/common/browse/breadcrumb-pdp.html",[],function(){return'<div class="h-text-sm h-tightSpacing" itemscope="" itemtype="http://schema.org/WebPage"> <span itemtype="http://schema.org/breadcrumb" itemprop="breadcrumb"> <% _.each(obj.taxonomy, function(obj, id) { %> <% if (obj.name) { %> <a class="js-breadCrumb link-underline h-text-grayDark" href="<%=obj.url%>" itemprop="url"> <span itemprop="name"><%= obj.name %></span> </a> <% if (taxonomy.length-1 !== id) { %> <span class="breadcrumb--divider" aria-hidden="true">/</span> <% } %> <% } %> <%})%> </span> </div> '}),define("text!templates/common/browse/user-generated-content.html",[],function(){return'<div class="h-standardSpacingTop"> <div class="title"> <h2 class="title-text bravo h-zeroMarginBottom">#TargetStyle</h2> <p class="h-text-grayDark"> tag your look to see it here <a href="http://awesomeshop.target.com/looks" target="_blank" class="h-text-underline" aria-label="see all looks opens in a new tab">see all looks</a> </p> </div> <div class="l-row l-align-center h-standardSpacingTop"> <div class="l-col-xl-6 l-col-md-12 l-col-nopadding"> <img itemprop="image" src="<%=imageUrl%>" alt="<%=username%>\'s picture"> </div> <div class="l-col-xl-6 l-col-md-12 l-col-nopadding"> <br> <div class="l-row l-align-center"> <div class="l-col-xs-2 l-col-nopadding"> <a target="_blank" href="<%=url%>"> <img itemprop="image" src="<%=userImageUrl%>" alt="" class="btn-round"> </a> </div> <div class="l-col-xs-10"> <p> <a class="h-text-bold h-text-underline" target="_blank" href="<%=url%>"> <%=username%> </a> <%=caption%> </p> <span class="h-text-grayDark h-text-sm"><%=date%></span> </div> </div> </div> </div> </div> '}),define("models/browse/expertReviews/beauty-concierge-review.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.grootReviewsUrl,constructor:function(){n.Model.apply(this,arguments)},fetch:function(e){var t=e||{};return t.url=this.urlRoot+e.vendorUrl,n.Model.prototype.fetch.call(this,t)}});return i}),define("models/browse/reviews/reviews-statistics.model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({constructor:function(){n.Model.apply(this,arguments)},initialize:function(){this.on("invalid",function(e,t){console.log("Error initializing: "+t)})},parse:function(e,n){var r,i,s=[],o=[],u={},a=[0,0,0,0,0,0],f,l;if(e&&e.result&&!e.hasErrors){r=e.result[n.productId];if(r){r.mostHelpfulPositiveReview&&r.mostHelpfulPositiveReview.ReviewText&&(r.mostHelpfulPositiveReview.paragraphs=r.mostHelpfulPositiveReview.ReviewText.split(/\n/g)),r.mostHelpfulNegativeReview&&r.mostHelpfulNegativeReview.ReviewText&&(r.mostHelpfulNegativeReview.paragraphs=r.mostHelpfulNegativeReview.ReviewText.split(/\n/g)),r.coreStats&&t.each(r.coreStats.RatingDistribution,function(e){a[e.RatingValue]=e.Count}),r.ratingBreakdown=a,i=t.filter(r.secondaryRatingFields||[],function(e){var n=e.Id.replace("rating_",""),i=t.map(e.Options,function(e){return e.Label});u[n]={optionLabels:i,label:e.Label};if(r.coreStats&&r.coreStats.SecondaryRatingsAverages[n])return e.averageSecondaryRating=r.coreStats.SecondaryRatingsAverages[n].AverageRating,e}),r.secondaryLabels=u,r.summarySliders=t.filter(i,function(e){return e.Options.length}),r.summaryStars=t.filter(i,function(e){return!e.Options.length}),t.each(r.photoInfoList,function(e){var n=e.reviewId;t.each(e.Photos,function(e){s.push({reviewId:n,id:e.Id,thumbnailUrl:e.Sizes.thumbnail.Url,normalUrl:e.Sizes.normal.Url,captionText:e.Caption||""})})}),r.photoCount=s.length;for(l=0;l<s.length;l+=10)o.push(s.slice(l,l+10));r.photoBlocks=o,f=t.extend(r,r.coreStats)}}if(typeof f=="undefined"||!f.TotalReviewCount)f={TotalReviewCount:0,AverageOverallRating:0};return f}});return r}),define("models/browse/reviews/review.model",["jquery","underscore","backbone","Target","models/mixins/browse/datetime-to-english.model-mx"],function(e,t,n,r,i){var s=n.Model.extend({initialize:function(){this.validation.userEmail.required=r.getParameterByName("anonymousPurchaserFlag")==="yes"&&r.getParameterByName("productID")&&r.getParameterByName("orderId")||sessionStorage.getItem("guestType")==="P"},urlRoot:r.Config.grootReviewsUrl+"/secure/review",formFactor:function(){var e="";return r.deviceAtlas.isDesktop()?e="desktop":r.deviceAtlas.isPad()?e="tablet":r.deviceAtlas.isMobile()&&(e="mobile"),e},defaults:{campaignId:"api_"+this.formFactor+"_pdp",agreedToTermsAndConditions:!0},validation:{rating:{required:!0},title:{required:!1,minLength:1,maxLength:200},reviewText:{required:!0,minLength:20,maxLength:4e3},userNickname:{required:!0,pattern:/^(?!\s)[a-z0-9 ]{0,24}[a-z0-9]$/i},userEmail:{minLength:1,maxLength:255,pattern:"email"}},constructor:function(){n.Model.apply(this,arguments)},parse:function(e){var t=e||{};return t.SubmissionTime=this.datetimeToEnglish(t.SubmissionTime),t},postReview:function(e){var r=e||{},i=t.clone(this);return this.set("productId",r.productId),i.attributes={productReview:this.attributes},r.xhrFields={withCredentials:!0},r.orderId&&r.partNumber&&(r.url=this.urlRoot+"?orderId="+r.orderId+"&partNumber="+r.partNumber),(this.sync||n.sync).call(this,"create",i,r)}}).mixin([i]);return s}),define("models/browse/reviews/secondary-ratables.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.grootReviewsUrl,constructor:function(){n.Model.apply(this,arguments)},initialize:function(){},fetch:function(e){var t=e||{};return t.url=this.urlRoot+"/reviewforms?product_id="+e.productId,n.Model.prototype.fetch.call(this,t)}});return i}),define("models/browse/reviews/user-status.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.gamModURL+"/TargetGuestWEB/guests/v5/userStatus",constructor:function(){n.Model.apply(this,arguments)},initialize:function(){},fetch:function(e){var t=e||{};return t.xhrFields={withCredentials:!0},n.Model.prototype.fetch.call(this,t)}});return i}),define("models/browse/reviews/nickname.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.grootReviewsUrl+"/secure/nicknames",constructor:function(){n.Model.apply(this,arguments)},initialize:function(){},fetch:function(e){var t=e||{};return t.xhrFields={withCredentials:!0},n.Model.prototype.fetch.call(this,t)}});return i}),define("collections/browse/reviews/reviews.collection",["jquery","underscore","backbone","models/browse/reviews/review.model"],function(e,t,n,r){var i=n.Collection.extend({urlRoot:Target.Config.grootReviewsUrl+"/reviews/",model:r,constructor:function(){n.Collection.apply(this,arguments)},initialize:function(){this.on("invalid",function(e,t){console.log("Error initializing: "+t)})},parse:function(e){return e.result},fetch:function(e){var t=e||{};return t.sortMethod=t.sortMethod||"helpfulness_desc",t.sortTitle=t.sortTitle||"most helpful",t.filterMethod=t.filterMethod||"",t.filterTitle=t.filterTitle||"all ratings",t.limit=t.limit||10,t.offset=t.offset||0,t.url=this.urlRoot+t.productId+"?sort="+t.sortMethod+"&filter="+t.filterMethod+"&limit="+t.limit+"&offset="+t.offset,n.Collection.prototype.fetch.call(this,t)}});return i}),define("models/browse/reviews/photo-upload.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.grootReviewsUrl+"/photo?contentType=review",constructor:function(){n.Model.apply(this,arguments)},initialize:function(){},postPhoto:function(e){var t=this;this.uploadPhotoXhr=new XMLHttpRequest,this.uploadPhotoXhr.onreadystatechange=function(){var n=t.uploadPhotoXhr,r;e.waiting();if(n.readyState!==4)return;n.status===200?(r=JSON.parse(n.responseText),r.successFlag==="Y"?e.success(r):e.error(r)):e.error(),t.uploadPhotoXhr=null,e.complete()},this.uploadPhotoXhr.open("post",this.urlRoot,!0),this.uploadPhotoXhr.send(e.formData)}});return i}),define("views/mixins/browse/bv-tracking.view-mx",[],function(){var e=function(){return{setDefaults:{formFactor:function(){var e="";return Target.deviceAtlas.isDesktop()?e="desktop":Target.deviceAtlas.isPad()?e="tablet":Target.deviceAtlas.isMobile()&&(e="mobile"),e},bvEnvironment:window.location.hostname==="www.target.com"||window.location.hostname==="m.target.com"?"prod":"staging",bvBaseInViewData:function(){var e=JSON.parse(sessionStorage.getItem("productdetails"))||{},t=e.categoryId,n=e.manufacturer,r={clientID:"targetcom",environment:this.bvEnvironment,dc:window.navigator.language,productId:this.getProductId(),categoryId:t,brand:n};return r}}}};return e}),define("text!templates/common/browse/reviews/review-form.html",[],function(){return'<div id="reviewForm<%= instanceNumber %>"> <div class="l-container js-reviews-composeRatingsStars"> <div class="l-row h-standardSpacingTop"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h3 class="title-text title-charlie js-reviews-reviewFormTitle" tabindex="-1">review this item</h3> </div> </div> </div> </div> <div class="l-row is-hidden js-reviews-errorSummary"> <div class="l-col-xs-12"> <h4 class="h-text-normal h-text-md h-text-orangeDark js-reviews-errorSummaryHeading" tabindex="-1">review the following...</h4> <ul class="js-reviews-errorList"></ul> </div> </div> <div class="l-row"> <div class="l-col-sm-12 l-col-md-6 l-col-lg-4 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <fieldset class="form-rating h-border-zero h-zeroMargin h-zeroPadding js-reviews-ratingWrapperOverall"> <legend class="h-tinySpacingBottom"> <h4 class="title title-left title-charlie h-text-normal">overall rating</h4> </legend> <input type="radio" id="overall--rating1-<%= instanceNumber %>" name="overall--rating" value="1" class="form-rating--input" required="required"> <label class="form-rating--label" for="overall--rating1-<%= instanceNumber %>" title="Poor"> <span class="h-sr-only">1 star, Poor</span> </label> <input type="radio" id="overall--rating2-<%= instanceNumber %>" name="overall--rating" value="2" class="form-rating--input" required="required"> <label class="form-rating--label" for="overall--rating2-<%= instanceNumber %>" title="Fair"> <span class="h-sr-only">2 stars, Fair</span> </label> <input type="radio" id="overall--rating3-<%= instanceNumber %>" name="overall--rating" value="3" class="form-rating--input" required="required"> <label class="form-rating--label" for="overall--rating3-<%= instanceNumber %>" title="Average"> <span class="h-sr-only">3 stars, Average</span> </label> <input type="radio" id="overall--rating4-<%= instanceNumber %>" name="overall--rating" value="4" class="form-rating--input" required="required"> <label class="form-rating--label" for="overall--rating4-<%= instanceNumber %>" title="Good"> <span class="h-sr-only">4 stars, Good</span> </label> <input type="radio" id="overall--rating5-<%= instanceNumber %>" name="overall--rating" value="5" class="form-rating--input" required="required"> <label class="form-rating--label" for="overall--rating5-<%= instanceNumber %>" title="Excellent"> <span class="h-sr-only">5 stars, Excellent</span> </label> <div class="form--longInstruction" data-errortext="Please select the overall rating" aria-hidden="true"></div> </fieldset> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr> </div> </div> </div> <div class="js-review-secondaryRatablesContainer"></div> <div class="l-row"> <div class="l-col-xs-12 l-col-lg-6 l-col-xl-6 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="js-reviews-secondaryRatablesContainerRecommend"> <div class="title title-left"> <legend> <h4 class="title-text title-charlie">would you recommend this item? <span class="h-text-normal">(optional)</span></h4> </legend> </div> <div class="js-reviews-secondaryRatablesRecommend"> <div class="form form-radio h-zeroMargin"> <input name="isRecommended" id="reviews-isRecommended-yes<%= instanceNumber %>" class="form--control" type="radio" value="yes"> <label for="reviews-isRecommended-yes<%= instanceNumber %>" class="form--label"> <span class="form--text">yes. absolutely!</span> </label> </div> <div class="form form-radio h-zeroMargin"> <input name="isRecommended" id="reviews-isRecommended-no<%= instanceNumber %>" class="form--control" type="radio" value="no"> <label for="reviews-isRecommended-no<%= instanceNumber %>" class="form--label"> <span class="form--text">nope. no way. not at all.</span> </label> </div> </div> </div> </div> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h4 class="title-text title-charlie">your review</h4> </div> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="reviewTextArea<%= instanceNumber %>"> review <span class="h-sr-only">at least 20 characters</span> </label> <textarea id="reviewTextArea<%= instanceNumber %>" rows="9" class="js-reviews-composeReviewTextarea" maxlength="4000" required="required"></textarea> <span class="form--longInstruction" data-errortext="Reviews must be at least 20 characters" aria-hidden="true"></span> </div> <div class="form--longInstruction h-standardSpacingBottom"> at least 20 characters. <a href="#" class="link link-underline" data-behavior="modal" data-target="#reviews-tipsModal" aria-label="Tips for writing helpful reviews">tips for writing helpful reviews</a> </div> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="reviewTitleInput<%= instanceNumber %>"> title of review (optional) <span class="h-sr-only">summarize your thoughts in a short headline</span> </label> <input id="reviewTitleInput<%= instanceNumber %>" type="text" class="js-reviews-composeReviewTitle" maxlength="200"> <span class="form--longInstruction" data-errortext="Please enter a title" aria-hidden="true"></span> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> summarize your thoughts in a short headline </aside> </div> </div> </div> <div class="l-row h-standardSpacingBottom js-reviews-currentUserNicknameContainer"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <span class="js-reviews-currentUserNickname"></span> </div> </div> </div> <div class="l-row js-reviews-currentUserInfo"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="form form-input h-zeroMarginBottom js-reviews-composeReviewScreenName" data-behavior="forms"> <label for="reviewScreenNameInput<%= instanceNumber %>"> screen name <span class="h-sr-only">This will be displayed with your review.</span> </label> <input id="reviewScreenNameInput<%= instanceNumber %>" type="text" class="js-reviews-reviewScreenNameInput" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a screen name that does not contain spaces or special characters (must be less than 25 characters)" aria-hidden="true"></span> </div> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> this name will be displayed with your review </aside> </div> </div> </div> <div class="l-row is-hidden js-reviews-userEmailContainer"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="js-reviews-userEmail"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="reviewUserEmailInput<%= instanceNumber %>"> email </label> <input id="reviewUserEmailInput<%= instanceNumber %>" type="text" class="js-reviews-composeReviewUserEmail" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a valid email" aria-hidden="true"></span> </div> </div> </div> <aside class="form--longInstruction" aria-hidden="true"> provide a valid email address </aside> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> by submitting, I agree to the <a href="#" class="link link-underline" data-behavior="modal" data-target="#reviews-termsModal">review guidelines</a> </div> </div> </div> <div class="l-row l-row-halfpadding h-standardSpacingTop"> <div class="l-visible-lg l-col-xs-12 l-col-lg-6 h-zeroPadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-reviews-hideComposeReviewPanel">cancel</button> </div> </div> <div class="l-col-xs-12 l-col-lg-6 h-zeroPadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-reviews-submit js-reviews-submitReview" aria-label="Submit review for this product.">submit review</button> </div> </div> <div class="l-hidden-lg l-col-xs-12 h-zeroPadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-reviews-hideComposeReviewPanel">cancel</button> </div> </div> </div> </div> '}),define("text!templates/common/browse/reviews/secondary-ratables-container.html",[],function(){return'<div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <h4 class="title title-left title-charlie">tell us more <span class="h-text-normal">(optional)</span></h4> </div> </div> </div> <div class="js-reviews-secondaryStarRatings"></div> <div class="js-reviews-secondarySliders"></div> <div class="js-reviews-secondaryQuestions"></div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr> </div> </div> </div> '}),define("text!templates/common/browse/reviews/secondary-ratables-stars.html",[],function(){return' <% if (starRatings.length) { %> <div class="l-row"> <% _.each(starRatings, function (rating) { %> <div class="l-col-sm-12 l-col-md-6 l-col-lg-4 l-col-nopadding h-tightSpacingBottom"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <fieldset class="form-rating h-border-zero h-zeroMargin h-zeroPadding js-reviews-ratingWrapperSecondary" data-rating-id="<%= rating.Id %>"> <legend class="h-tinySpacingBottom"> <h5 class="title title-left title-charlie h-text-normal"><%= rating.Label %></h5> </legend> <input type="radio" id="<%= rating.Id %>--rating1-<%= instanceNumber %>" name="<%= rating.Id %>--rating" value="1" class="form-rating--input"> <label class="form-rating--label" for="<%= rating.Id %>--rating1-<%= instanceNumber %>" title="Poor"> <span class="h-sr-only">1 star, Poor</span> </label> <input type="radio" id="<%= rating.Id %>--rating2-<%= instanceNumber %>" name="<%= rating.Id %>--rating" value="2" class="form-rating--input"> <label class="form-rating--label" for="<%= rating.Id %>--rating2-<%= instanceNumber %>" title="Fair"> <span class="h-sr-only">2 stars, Fair</span> </label> <input type="radio" id="<%= rating.Id %>--rating3-<%= instanceNumber %>" name="<%= rating.Id %>--rating" value="3" class="form-rating--input"> <label class="form-rating--label" for="<%= rating.Id %>--rating3-<%= instanceNumber %>" title="Average"> <span class="h-sr-only">3 stars, Average</span> </label> <input type="radio" id="<%= rating.Id %>--rating4-<%= instanceNumber %>" name="<%= rating.Id %>--rating" value="4" class="form-rating--input"> <label class="form-rating--label" for="<%= rating.Id %>--rating4-<%= instanceNumber %>" title="Good"> <span class="h-sr-only">4 stars, Good</span> </label> <input type="radio" id="<%= rating.Id %>--rating5-<%= instanceNumber %>" name="<%= rating.Id %>--rating" value="5" class="form-rating--input"> <label class="form-rating--label" for="<%= rating.Id %>--rating5-<%= instanceNumber %>" title="Excellent"> <span class="h-sr-only">5 stars, Excellent</span> </label> <div class="form--longInstruction" data-errortext="Please select the <%= rating.Id %> rating" aria-hidden="true"></div> </fieldset> </div> </div> <% }); %> </div> <% } %> '}),define("text!templates/common/browse/reviews/secondary-ratables-slider.html",[],function(){return' <div class="l-row"> <div class="l-col-xs-12 l-col-lg-6 l-col-xl-4 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="h-tightSpacingTop js-reviews-secondaryRatablesSlider"> <div class="dropdown dropdown-default dropdown-native"> <label class="dropdown--label is-hidden" for="reviewsSlider<%= slider.Id %>_<%= instanceNumber %>"><%= slider.Label.toLowerCase() %> </label> <select id="reviewsSlider<%= slider.Id %>_<%= instanceNumber %>" name="<%= slider.Label %>" data-slider-id="<%= slider.Id %>" class="dropdown--select"> <option value="" selected="selected">rate <%= slider.Label.toLowerCase() %></option> <% _.each (slider.Options, function (option) { %> <% if (option.Selected) { %> <option value="<%- option.Value %>" selected="selected"><%- option.Label.toLowerCase() %></option> <% } else { %> <option value="<%- option.Value %>"><%- option.Label.toLowerCase() %></option> <% } %> <% }); %> </select> </div> </div> </div> </div> <div class="l-col-xs-12 l-col-lg-6 l-col-xl-8"></div> </div> '}),define("text!templates/common/browse/reviews/secondary-ratables-question.html",[],function(){return' <div class="l-row"> <div class="l-col-xs-12 l-col-lg-6 l-col-xl-4 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div> <h5 class="title title-left title-charlie h-text-normal"><%= question.Label.toLowerCase() %></h5> </div> <div class="js-reviews-secondaryRatablesQuestion"> <div class="dropdown dropdown-default dropdown-native" data-update="currentSelected"> <label class="dropdown--label is-hidden" for="reviewsQuestion<%= question.Id %>_<%= instanceNumber %>"></label> <select id="reviewsQuestion<%= question.Id %>_<%= instanceNumber %>" name="<%= question.Label %>" data-question-id="<%= question.Id %>" class="dropdown--select"> <option value="" selected="selected">make a selection</option> <% _.each (question.Options, function (option) { %> <% if (option.Selected) { %> <option value="<%- option.Value %>" selected="selected"><%- option.Label.toLowerCase() %></option> <% } else { %> <option value="<%- option.Value %>"><%- option.Label.toLowerCase() %></option> <% } %> <% }); %> </select> </div> </div> </div> </div> <div class="l-col-xs-12 l-col-lg-6 l-col-xl-8"></div> </div> '}),define("text!templates/common/browse/reviews/photo-upload-row.html",[],function(){return'<div class="h-tightSpacingTop clearfix js-reviews-uploadPhotoRow" data-photo-number="<%= index %>"> <div class="l-row"> <div class="l-col-xs-12"> <div class="clearfix"> <div class="h-float-left h-standardSpacingRight reviews--photoThumbnail" data-photo-url="<%= imageNormalUrl %>" style="background-image: url(\'<%= imageThumbnailUrl %>\')" title="uploaded photo"></div> <div class="h-float-left h-text-sm"> <p class="h-tightSpacingTop"> <a href="#" class="link link-underline js-reviews-deleteUploadPhoto">remove photo</a> </p> </div> </div> </div> </div> <div class="is-hidden js-reviews-uploadPhotoCaptionPanel"> <div class="l-row l-row-halfpadding h-standardSpacingTop"> <div class="l-col-xs-12 l-col-nopadding"> <div class="l-col-halfpadding"> <div class="form form-input h-zeroMarginBottom h-standardSpacingTop" data-behavior="forms"> <label for="reviewPhotoCaption<%= index %>"> caption </label> <textarea id="reviewPhotoCaption<%= index %>" rows="5" maxlength="200"></textarea> <aside class="form--longInstruction" aria-hidden="true"> up to 200 characters </aside> </div> </div> </div> </div> <div class="l-row l-row-halfpadding h-standardSpacingTop"> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-reviews-hideUploadPhotoCaption">cancel</button> </div> </div> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-reviews-saveUploadPhotoCaption" aria-label="Save caption for this photo.">save caption</button> </div> </div> </div> </div> </div> '}),define("text!templates/common/browse/reviews/review-alert.html",[],function(){return'<div class="l-container"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="<%= alertTextClass %>"> <div class="title-text title-charlie"><%= alertText.title %></div> <div><%= alertText.subtitle %></div> </div> </div> </div> </div> '}),define("text!templates/common/browse/small-spinner.html",[],function(){return'<span id="subLoader" class="smallSubLoader h-zeroMargin"> <svg role="img" focusable="false"> <use xlink:href="#loading"/> </svg> </span> '}),function(e){define("patlab.formRatings",["jquery","jquery.patlab","patlab.utils"],e)}(function(e,t,n){function i(t,r){var i=e(t.currentTarget),s=i.parent(),o=s.find("label"),u=t.type;e(o).each(function(t,i){switch(u){case"mouseover":n.addClass(i,"form-rating--label-mouseover");break;case"change":n.addClass(i,"form-rating--label-active");break;case"mouseout":e(i).removeClass("form-rating--label-mouseover");break;default:}return i.getAttribute("for")!==r})}function s(t){var n=t.currentTarget,r=n.parentNode,s=r.querySelectorAll("input:checked")[0].getAttribute("id");e(r).find("label").removeClass("form-rating--label-active"),i(t,s)}function o(e){var t=e.currentTarget.getAttribute("for");i(e,t)}function u(t){return this.plugin=r,this.$el=e(t),this}var r="formRatings";return u.prototype={init:function(t){var n=e(t);n.find("label").on("mouseout",function(e){i(e)}),n.find("label").on("mouseover",function(e){o(e)}),n.find("input").on("change",function(e){s(e)});return}},u}),define("views/common/browse/reviews/review-form.view",["underscore","backbone","Target","page","models/browse/reviews/review.model","models/browse/reviews/nickname.model","models/browse/reviews/photo-upload.model","models/browse/reviews/secondary-ratables.model","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/reviews/review-form.html","text!templates/common/browse/reviews/secondary-ratables-container.html","text!templates/common/browse/reviews/secondary-ratables-stars.html","text!templates/common/browse/reviews/secondary-ratables-slider.html","text!templates/common/browse/reviews/secondary-ratables-question.html","text!templates/common/browse/reviews/photo-upload-row.html","text!templates/common/browse/reviews/review-alert.html","text!templates/common/browse/small-spinner.html","patlab.formRatings","patlab.dropdown","backboneValidation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){var b=r.extend({patlab:{},initialize:function(e){var t=$("<div />");t.addClass("js-reviews-reviewForm"),e.container.html(t),this.$el=e.container.find(".js-reviews-reviewForm"),this.instanceNumber=e.instanceNumber,this.model=new i,this.nicknameModel=new s,this.photoUploadModel=new o,this.secondaryRatablesModel=new u,Target.getParameterByName("fromSeeding")&&this.model.set("secondaryQuestion",{ContextDataValue_IncentivizedReview:"True"})},render:function(n){var r=n||{},i=e.template(f,{instanceNumber:this.instanceNumber});this.$el.empty(),t.Validation.bind(this),this.$el.html(i),this.getSecondaryRatables({success:r.success})},model:null,getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},getPartNumberFromUrl:function(){var e=window.location.href.split("?")[0],t=/-(\w+)/.exec(e.split("/").pop())[1];return t},onHideComposeReviewPanel:function(){this.hideComposeReviewPanel(),this.remove()},hideComposeReviewPanel:function(){var e=$(".js-reviews-composeReviewPanel"),t=$(".js-reviews-showComposeReviewPanel"),n=$(".js-reviews-reviewAlerts");e.addClass("is-hidden"),t.removeClass("is-hidden").eq(0).focus(),n.addClass("is-hidden").empty()},uploadPhoto:function(t){var n=this,r=t.target,i=r.files[0],s=new FormData,o=$(r).closest(".js-reviews-composePanel"),u=$(r).closest(".js-reviews-photoUploadRow"),a=u.find(".form--longInstruction"),f=$(r).parent(),l=u.find(".js-reviews-photoUploadPhotos"),c=o.find(".js-reviews-submit"),h=u.find(".js-reviews-addPhotoInput");a.parent().removeClass("is-invalid"),s.append("file",i),f.addClass("reviews--waiting"),c.attr("disabled","disabled"),this.photoUploadModel.postPhoto({formData:s,waiting:function(){var e=$(".js-reviews-uploadPhotoSpinner");e.html(m).removeClass("is-hidden")},success:function(t){var i,s=n.model.get("photoUrl")||[],o;$(r).removeAttr("disabled").val(""),f.removeClass("reviews--waiting"),c.removeAttr("disabled"),i=e.template(d,{imageThumbnailUrl:t.thumbnail_url,imageNormalUrl:t.normal_url,index:l.children().length+1}),l.append(i).removeClass("is-hidden"),l.children().length>=1&&n.$el.find(".js-reviews-addPhotoButton").text("add another photo"),l.children().length>=6?(f.addClass("is-hidden"),l.addClass("full"),u.find(".js-reviews-photoUploadDelete").focus()):h.focus(),s.push(t.normal_url),n.model.set("photoUrl",s);try{o=this.bvBaseInViewData(),o.bvProduct="RatingsAndReviews",o.name="Reviews_Upload_Photo_Success",o.detail1="reviews_submit"+uploadFor+"photo_"+this.getProductId(),window._bvapiq.push(["FeatureUsed",o])}catch(a){console.log(a)}},error:function(e){n.uploadPhotoError(t,e)},complete:function(){var e=$(".js-reviews-uploadPhotoSpinner");e.addClass("is-hidden").empty(),h.focus()}})},uploadPhotoError:function(e,t){var n=e.target,r=$(n).closest(".js-reviews-photoUploadRow"),i=r.find(".form--longInstruction"),s=$(n).parent(),o=$(n).closest(".js-reviews-composePanel"),u=o.find(".js-reviews-submit"),a=t&&t.error_msg?t.error_msg:"Sorry, your file could not be uploaded.";$(n).removeAttr("disabled").val(""),s.removeClass("reviews--waiting"),u.removeAttr("disabled"),i.parent().addClass("is-invalid"),i.attr("data-errortext",a)},deleteUploadPhoto:function(e){var t=$(e.currentTarget),n=t.closest(".js-reviews-uploadPhotoRow"),r=n.parent(),i=this.$el.find(".js-reviews-addPhotoButton"),s=this.$el.find(".js-reviews-addPhoto"),o=n.data("photo-number"),u=this.model.get("photoUrl");e.preventDefault(),n.remove(),r.children().length||i.text("add photo"),i.focus(),u.splice(o-1,1),this.model.set("photoUrl",u),this.model.unset("photoCaption_"+o),r.children().length<6&&s.removeClass("is-hidden")},onUploadPhotoFileSelect:function(e){var t=e.target,n=$(t).data("upload-for"),r=$(t).closest(".js-reviews-uploadPhotoRow"),i=r.find("form--longInstruction"),s="the file size of your photo must be below 5MB",o="please upload a valid image",u,a;i.addClass("is-hidden");if(!t.value)return;if(this.uploadPhotoXhr&&this.uploadPhotoXhr.readyState)return;if(window.File){u=t.files[0];if(u.size>5e6){t.value="",i.parent().addClass("is-invalid"),i.attr("data-errortext",s).focus();return}}try{a=this.bvBaseInViewData(),a.bvProduct="RatingsAndReviews",a.name="Reviews_Upload_Photo_Button",a.detail1="reviews_submit"+n+"photo_"+this.getProductId(),window._bvapiq.push(["FeatureUsed",a])}catch(f){console.log(f)}i.parent().addClass("is-invalid"),i.attr("data-errortext",o),$(t).attr("disabled","disabled"),this.uploadPhoto(e,n)},showUploadPhotoCaption:function(e){var t=$(e.currentTarget),n=t.closest(".js-reviews-uploadPhotoRow"),r=n.find(".js-reviews-uploadPhotoCaptionPanel"),i=n.find("textarea");e.preventDefault(),t.addClass("is-hidden"),r.removeClass("is-hidden"),i.focus()},editUploadPhotoCaption:function(e){var t=$(e.currentTarget),n=t.closest(".js-reviews-uploadPhotoRow"),r=n.find(".js-reviews-uploadPhotoCaptionSummaryText").text(),i=n.find(".js-reviews-uploadPhotoCaptionPanel"),s=n.find("textarea");e.preventDefault(),t.addClass("is-hidden"),i.removeClass("is-hidden"),s.focus(),s.val(r)},hideUploadPhotoCaption:function(e){var t=$(e.currentTarget).closest(".js-reviews-uploadPhotoRow"),n=t.find(".js-reviews-uploadPhotoCaptionPanel"),r=t.find("textarea"),i=t.find(".js-reviews-showUploadPhotoCaption"),s=t.find(".js-reviews-editUploadPhotoCaption"),o=t.find(".js-reviews-uploadPhotoCaptionSummaryText").text().length!==0;e.preventDefault(),o?s.removeClass("is-hidden").focus():i.removeClass("is-hidden").focus(),r.val(""),n.addClass("is-hidden")},saveUploadPhotoCaption:function(e){var t=$(e.currentTarget).closest(".js-reviews-uploadPhotoRow"),n=t.find(".js-reviews-uploadPhotoCaptionPanel"),r=t.find("textarea").val().trim(),i=t.find(".js-reviews-uploadPhotoCaptionSummary"),s=t.find(".js-reviews-uploadPhotoCaptionSummaryText"),o=t.find(".js-reviews-showUploadPhotoCaption"),u=t.find(".js-reviews-editUploadPhotoCaption"),a=t.data("photo-number");r.length?(i.removeClass("is-hidden"),u.removeClass("is-hidden").focus(),this.model.set("photoCaption_"+a,r)):(o.removeClass("is-hidden").focus(),i.addClass("is-hidden"),this.model.unset("photoCaption_"+a)),s.text(r),n.addClass("is-hidden")},invalidateFormControl:function(e){e.parent().addClass("is-invalid"),e.addClass("is-invalid")},resetViewControlValidation:function(e){e.parent().removeClass("is-invalid"),e.removeClass("is-invalid")},validateOverallRating:function(){var e=this.$el.find(".js-reviews-ratingWrapperOverall input"),t=e.filter(":checked").val(),n=this.model.preValidate("rating",t),r=this.$el.find(".js-reviews-errorList"),i=e.parent().find("label");this.model.set("rating",t),n?(this.invalidateFormControl(e),this.$el.find(".js-reviews-errorMessage-overall").length||(r.append('<li class="js-reviews-errorMessage-overall"><a href="#overall--rating1-'+this.instanceNumber+'" class="h-text-orangeDark h-text-underline '+'js-reviews-navigateToError">'+"please select the overall rating"+"</a>"+"</li>"),i.find(".js-reviews-errorLabel").length||i.append('<span class="h-sr-only js-reviews-errorLabel" aria-atomic="true" aria-live="polite">Please select the overall rating</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-reviews-errorMessage-overall").remove(),e.parent().find(".js-reviews-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-reviews-errorSummary").addClass("is-hidden"))},validateTitle:function(){var e=this.$el.find(".js-reviews-composeReviewTitle"),t=this.removeHtmlTags(e.val()),n=this.model.preValidate("title",t),r=this.$el.find(".js-reviews-errorList"),i=e.parent().find("label");this.model.set("title",t),n?(this.invalidateFormControl(e),this.$el.find(".js-reviews-errorMessage-title").length||(r.append('<li class="js-reviews-errorMessage-title"><a href="#reviewTitleInput'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-reviews-navigateToError">'+"please enter a title"+"</a>"+"</li>"),i.find(".js-reviews-errorLabel").length||i.append('<span class="h-sr-only js-reviews-errorLabel" aria-atomic="true" aria-live="polite">Please enter a title</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-reviews-errorMessage-title").remove(),i.find(".js-reviews-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-reviews-errorSummary").addClass("is-hidden"))},validateText:function(e){var t=this.$el.find(".js-reviews-composeReviewTextarea"),n=this.removeHtmlTags(t.val()),r=this.model.preValidate("reviewText",n),i=this.$el.find(".js-reviews-errorList"),s=t.parent().find("label");this.model.set("reviewText",n);if(e.type==="keyup"&&n.length<20)return;r?(this.invalidateFormControl(t),this.$el.find(".js-reviews-errorMessage-text").length||(i.append('<li class="js-reviews-errorMessage-text"><a href="#reviewTextArea'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-reviews-navigateToError">'+"please enter review text"+"</a>"+"</li>"),s.find(".js-reviews-errorLabel").length||s.append('<span class="h-sr-only js-reviews-errorLabel" aria-atomic="true" aria-live="polite">Reviews must be at least 20 characters</span>'))):(this.resetViewControlValidation(t),this.$el.find(".js-reviews-errorMessage-text").remove(),s.find(".js-reviews-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-reviews-errorSummary").addClass("is-hidden"))},validateScreenName:function(){var e=this.$el.find(".js-reviews-reviewScreenNameInput"),t=this.removeHtmlTags(e.val()),n=this.model.preValidate("userNickname",t),r=this.$el.find(".js-reviews-errorList"),i=e.parent().find("label");this.model.set("userNickname",t),n?(this.invalidateFormControl(e),this.$el.find(".js-reviews-errorMessage-screenName").length||(r.append('<li class="js-reviews-errorMessage-screenName"><a href="#reviewScreenNameInput'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-reviews-navigateToError">'+"please enter a screen name"+"</a>"+"</li>"),i.find(".js-reviews-errorLabel").length||i.append('<span class="h-sr-only js-reviews-errorLabel" aria-atomic="true" aria-live="polite">Please enter a screen name that does not contain special characters (must be less than 25 characters)</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-reviews-errorMessage-screenName").remove(),i.find(".js-reviews-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-reviews-errorSummary").addClass("is-hidden"))},validateUserEmail:function(){var e=this.$el.find(".js-reviews-composeReviewUserEmail"),t=e.val(),n=this.model.preValidate("userEmail",t),r=this.$el.find(".js-reviews-errorList"),i=e.parent().find("label");this.model.set("userEmail",t),n?(this.invalidateFormControl(e),this.$el.find(".js-reviews-errorMessage-email").length||(this.$el.find(".js-reviews-errorList").append('<li class="js-reviews-errorMessage-email"><a href="#reviewUserEmailInput'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-reviews-navigateToError">'+"please enter a valid email"+"</a>"+"</li>"),i.find(".js-reviews-errorLabel").length||i.append('<span class="h-sr-only js-reviews-errorLabel" aria-atomic="true" aria-live="polite">Please enter a valid email</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-reviews-errorMessage-email").remove(),i.find(".js-reviews-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-reviews-errorSummary").addClass("is-hidden"))},getSecondaryRatables:function(t){var n=this,r=t||{};this.secondaryRatablesModel.fetch({productId:this.getProductId(),success:function(t){var i={};i.starRatings=e.filter(t.attributes.SecondaryRatingFields,function(e){return e.Type==="IntegerInput"}),i.sliders=e.filter(t.attributes.SecondaryRatingFields,function(e){return e.Type==="SelectInput"}),i.questions=e.filter(t.attributes.SecondaryQuestions,function(e){return e.Label&&e.Id!=="contextdatavalue_IncentivizedReview"}),(i.starRatings||i.sliders||i.questions)&&n.$el.find(".js-review-secondaryRatablesContainer").html(l);if(i.starRatings){var s=e.template(c,{starRatings:i.starRatings,instanceNumber:n.instanceNumber});n.$el.find(".js-reviews-secondaryStarRatings").html(s)}i.sliders&&e.each(i.sliders,function(t){var r=e.template(h,{slider:t,instanceNumber:n.instanceNumber});n.$el.find(".js-reviews-secondarySliders").append(r)}),i.questions&&e.each(i.questions,function(t){var r=e.template(p,{question:t,instanceNumber:n.instanceNumber});n.$el.find(".js-reviews-secondaryQuestions").append(r)});var o=new g;o.init(n.$el.find(".form-rating")),n.patlab.dropdown=new y($("#reviewForm"+n.instanceNumber)),r.success&&r.success()},error:function(e,t,n){console.log(n)}})},updateSecondaryRatings:function(e){var t=$(e.currentTarget),n=t.parent().data("rating-id"),r=t.filter(":checked").val();this.model.attributes.secondaryRating=this.model.attributes.secondaryRating||{},r!==""?this.model.attributes.secondaryRating[n]=r:delete this.model.attributes.secondaryRating[n]},updateSecondarySliders:function(e){var t=$(e.currentTarget),n=t.data("slider-id"),r=t.find("option:selected").val();this.model.attributes.secondaryRating=this.model.attributes.secondaryRating||{},r!==""?this.model.attributes.secondaryRating[n]=r:delete this.model.attributes.secondaryRating[n]},updateSecondaryQuestions:function(e){var t=$(e.currentTarget),n=t.data("question-id"),r=t.find("option:selected").val();this.model.attributes.secondaryQuestion=this.model.attributes.secondaryQuestion||{},r!==""?this.model.attributes.secondaryQuestion[n]=r:delete this.model.attributes.secondaryQuestion[n]},updateIsRecommended:function(){var e=this.$el.find(".js-reviews-secondaryRatablesRecommend input:checked").val()==="yes";this.model.attributes.isRecommended=e},submitReview:function(t){var n=this,r=this.$el.find(".js-reviews-reviewScreenNameInput").val(),i=$(".js-reviews-reviewAlerts"),s={title:"thanks for submitting a review!",subtitle:"We check every review for inappropriate or offensive content. Your comment may take a few days to appear."},o={title:"we&#39;re sorry.",subtitle:"There was an error while posting your review.<br />Unless your submission contains unsupported emoji characters or inappropriate language, please try again in a little while."},u={title:"we&#39;re sorry.",subtitle:"You have already submitted a review for this product."},a=this.getProductId()||this.getPartNumberFromUrl(),f;this.validateOverallRating(),this.validateTitle(),this.validateText(t),this.validateScreenName(),(this.isAnonUser()||this.isPartialUser())&&this.validateUserEmail(),this.model.isValid(!0)?(this.$el.find(".js-reviews-errorSummary").addClass("is-hidden"),this.model.postReview({productId:a,orderId:Target.getParameterByName("orderId"),partNumber:Target.getParameterByName("productID"),success:function(t){t.HasErrors?t.Errors.length&&t.Errors[0].Code==="ERROR_DUPLICATE_SUBMISSION"?(n.hideComposeReviewPanel(),n.createAlert({container:i,alertType:"warning",alertText:u})):(n.createAlert({container:i,alertType:"warning",alertText:o}),typeof t.Errors=="string"?console.log(">>> "+t.Errors):e.each(t.Errors,function(e){console.log(">>> "+e.Message)})):(n.setUserNickname(r),n.hideComposeReviewPanel(),n.createAlert({container:i,alertType:"success",alertText:s}));try{f=n.bvBaseInViewData(),f.bvProduct="RatingsAndReviews",f.name="Submit_Review_Success",f.detail1="Submit_Review_"+n.getProductId(),f.bvAttributes={containerId:"reviewForm"+n.instanceNumber},window._bvapiq.push(["FeatureUsed",f])}catch(a){console.log(a)}},error:function(e){n.createAlert({container:i,alertType:"warning",alertText:o}),console.log(e.responseText)}})):(this.$el.find(".js-reviews-errorSummary").removeClass("is-hidden"),this.$el.find(".js-reviews-errorSummaryHeading").focus());try{f=n.bvBaseInViewData(),f.bvProduct="RatingsAndReviews",f.name="Submit_Review_Button",f.detail1="Submit_Review_"+n.getProductId(),f.bvAttributes={containerId:"reviewForm"+n.instanceNumber},window._bvapiq.push(["FeatureUsed",f])}catch(l){console.log(l)}this.model.set("productId",this.getProductId())},removeHtmlTags:function(e){return e.trim().replace(/<(?:.|\n)*?>/gm,"")},isAnonUser:function(){var e=Target.getParameterByName("anonymousPurchaserFlag")==="yes"&&Target.getParameterByName("orderId")&&Target.getParameterByName("productID");return e},isPartialUser:function(){return sessionStorage.getItem("guestType")==="P"},setUserNickname:function(e){var t=$(".js-reviews-currentUserNickname"),n=$(".js-reviews-reviewScreenNameInput"),r=$(".js-reviews-currentUserInfo"),i=JSON.stringify({nickname:e||"",timeStamp:(new Date).getTime()});window.sessionStorage.setItem("userNickname",i),t.html("screen name: "+e).toggleClass("is-hidden",!e),n.val(e),r.toggleClass("is-hidden",Boolean(e))},createAlert:function(t){var n=t.alertType==="success"?"h-text-greenDark":"h-text-orangeDark",r=e.template(v,{alertTextClass:n,alertText:t.alertText});$(t.container).html(r).removeClass("is-hidden").focus()},navigateToError:function(e){var t=$(e.currentTarget).attr("href");e.preventDefault(),this.$el.find(t).focus()},events:{"click .js-reviews-hideComposeReviewPanel":"onHideComposeReviewPanel","change .js-reviews-addPhotoInput":"onUploadPhotoFileSelect","click .js-reviews-deleteUploadPhoto":"deleteUploadPhoto","click .js-reviews-showUploadPhotoCaption":"showUploadPhotoCaption","click .js-reviews-editUploadPhotoCaption":"editUploadPhotoCaption","click .js-reviews-hideUploadPhotoCaption":"hideUploadPhotoCaption","click .js-reviews-saveUploadPhotoCaption":"saveUploadPhotoCaption","click .js-reviews-submitReview":"submitReview","blur .js-reviews-composeReviewTitle":"validateTitle","keyup .js-reviews-composeReviewTitle":"validateTitle","blur .js-reviews-composeReviewTextarea":"validateText","keyup .js-reviews-composeReviewTextarea":"validateText","blur .js-reviews-reviewScreenNameInput":"validateScreenName","keyup .js-reviews-reviewScreenNameInput":"validateScreenName","blur .js-reviews-composeReviewUserEmail":"validateUserEmail","change .js-reviews-ratingWrapperOverall input":"validateOverallRating","change .js-reviews-secondaryRatablesSlider select":"updateSecondarySliders","change .js-reviews-secondaryRatablesQuestion select":"updateSecondaryQuestions","change .js-reviews-ratingWrapperSecondary input":"updateSecondaryRatings","change .js-reviews-secondaryRatablesRecommend input":"updateIsRecommended","click .js-reviews-navigateToError":"navigateToError"}}).mixin([a]);return b}),define("models/browse/reviews/feedback.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.grootReviewsUrl+"/feedback",constructor:function(){n.Model.apply(this,arguments)},postHelpfulnessVote:function(e){return this.set({FeedbackType:"helpfulness",Vote:e.voteType}),(this.sync||n.sync).call(this,"create",this,e)},postReport:function(e){return this.set({FeedbackType:"inappropriate"}),(this.sync||n.sync).call(this,"create",this,e)}});return i}),define("models/browse/reviews/comment.model",["jquery","underscore","backbone","Target","models/mixins/browse/datetime-to-english.model-mx"],function(e,t,n,r,i){var s=n.Model.extend({urlRoot:r.Config.grootReviewsUrl+"/v1",idAttribute:"Id",defaults:{campaignId:"mobile_pdp",agreedToTermsAndConditions:!0},validation:{commentText:{required:!0,minLength:20,maxLength:4e3},userNickname:{required:!0,pattern:/^(?!\s)[a-z0-9 ]{0,24}[a-z0-9]$/i}},constructor:function(){n.Model.apply(this,arguments)},initialize:function(e){var t=this.parseDate(e);this.set(t)},parseDate:function(e){var t=e||{};return t.SubmissionTime=this.datetimeToEnglish(t.SubmissionTime),t},postComment:function(e){var t=e||{},r={ProductComment:this};return t.url=this.urlRoot+"/secure/comment?userId="+e.userId,(this.sync||n.sync).call(r,"create",this,e)}}).mixin([i]);return s}),define("text!templates/common/browse/reviews/comment.html",[],function(){return'<div class="h-tightSpacingTop h-standardSpacingBottom js-reviews-commentRow"> <div class="h-text-grayDark h-text-sm"> <span class="h-sr-only">submitted by </span> <% if (comment.UserNickname) { %><%= comment.UserNickname %> &mdash;<% } %> <%= comment.SubmissionTime %> </div> <div class="h-text-md"> <%- comment.CommentText %> </div> </div> '}),define("views/common/browse/reviews/comment.view",["underscore","Target","page","models/browse/reviews/feedback.model","text!templates/common/browse/reviews/comment.html"],function(e,t,n,r,i){var s=n.extend({initialize:function(e){this.$el=e.$el},render:function(t){if(typeof this.model=="undefined")return;var n=e.template(i,{reviewId:t.reviewId,comment:this.model.attributes});this.$el.find(t.container).append(n)},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},onCommentReport:function(e){var t=$(e.currentTarget),n=new r({ContentId:this.model.id,ContentType:"comment"});e.preventDefault(),n.postReport({success:function(){var e=$("<div/>").addClass("h-display-inline h-text-orangeDark h-tightSpacingRight test-reviews-reviewReportSuccess").text("reported").attr({tabindex:"-1",role:"alert"});t.replaceWith(e),e.focus()},error:function(){console.log("error reporting")}})},events:{"click .js-reviews-commentReport":"onCommentReport"}});return s}),define("text!templates/common/browse/reviews/comment-form.html",[],function(){return'<% if (isAuth) { %> <div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="title title-left"> <h3 class="title-text title-charlie">post a comment</h3> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="commentTextArea<%= reviewId %>"> comment </label> <textarea id="commentTextArea<%= reviewId %>" rows="6" class="js-reviews-composeCommentTextArea" maxlength="4000" required="required"></textarea> <span class="form--longInstruction" data-errortext="Comments must be at least 20 characters" aria-hidden="true"></span> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> at least 20 characters. </aside> </div> </div> <div class="l-row h-standardSpacingBottom js-reviews-currentUserNicknameContainer"> <div class="l-col-xs-12"> <span class="js-reviews-currentUserNickname"></span> </div> </div> <div class="l-row js-reviews-currentUserInfo"> <div class="l-col-xs-12"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="form form-input h-zeroMarginBottom js-reviews-composeCommentScreenName" data-behavior="forms"> <label for="reviewScreenNameInput<%= reviewId %>"> screen name <span class="h-sr-only">This will be displayed with your comment.</span> </label> <input id="reviewScreenNameInput<%= reviewId %>" type="text" class="js-reviews-commentScreenNameInput" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a screen name that does not contain spaces or special characters (must be less than 25 characters)" aria-hidden="true"></span> </div> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> this name will be displayed with your comment </aside> <hr> </div> </div> <div class="l-row"> <div class="l-col-lg-7 l-col-nopadding"></div> <div class="l-col-xs-12 l-col-lg-5 l-col-nopadding"> by submitting, I agree to the <a href="#" class="link link-underline" data-behavior="modal" data-target="#reviews-termsModal">review guidelines</a> </div> </div> <div class="l-row h-standardSpacingTop"> <div class="l-col-lg-7 l-col-nopadding"></div> <div class="l-col-xs-12 l-col-lg-5 l-col-nopadding"> <button class="btn btn-primary btn-block js-reviews-submitComment" aria-label="Submit comment for this review.">submit comment</button> </div> </div> </div> <% } else { %> <button class="btn btn-sm btn-default h-tightSpacingRight js-reviews-writeCommentSignIn"> comment </button> <% } %> '}),define("text!templates/common/browse/reviews/popover.html",[],function(){return'<div class="popover popover-gray"> <div class="arrow"></div> <div tabindex="-1" class="popover-content"></div> </div> '}),define("text!templates/common/browse/reviews/signin-popover-link.html",[],function(){return' <a href="#" class="js-reviews-signIn"><%= text %></a> '}),define("views/common/browse/reviews/comment-form.view",["underscore","backbone","Target","page","models/browse/reviews/comment.model","models/browse/reviews/nickname.model","models/browse/reviews/user-status.model","text!templates/common/browse/reviews/comment-form.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/reviews/signin-popover-link.html","patlab.formRatings","backboneValidation"],function(e,t,n,r,i,s,o,u,a,f,l){var c=r.extend({initialize:function(e){this.$el=e.$el,this.model=new i,this.nicknameModel=new s,this.userStatusModel=new o,t.Validation.bind(this)},render:function(t){var n=sessionStorage.getItem("memberId"),r=Boolean(n),i=e.template(u,{reviewId:t.reviewId,isAuth:r});this.$el.html(i),this.getUserStatus();var s=new l;s.init(this.$el.find(".form-rating"))},model:null,getUserStatus:function(){var e=this;this.userStatusModel.fetch({success:function(t){e.getUserNickname(t.attributes.profile.memberId)}})},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},onHideComposeCommentPanel:function(){$(".js-reviews-reviewAlerts").empty(),this.hideComposeCommentPanel()},hideComposeCommentPanel:function(){var e=$(".js-reviews-composeCommentPanel"),t=$(".js-reviews-showComposeCommentPanel");t.removeClass("is-hidden").eq(0).focus(),e.addClass("is-hidden"),this.clearErrors()},invalidateFormControl:function(e){e.parent().addClass("is-invalid"),e.addClass("is-invalid")},resetFormControlValidation:function(e){e.parent().removeClass("is-invalid"),e.removeClass("is-invalid")},validateText:function(e){var t=this.$el.find(".js-reviews-composeCommentTextarea"),n=this.removeHtmlTags(t.val()),r=this.model.preValidate("reviewText",n);if(e.type==="keyup"&&n.length<20)return;r?this.invalidateFormControl(t):(this.resetFormControlValidation(t),this.model.set("reviewText",n))},validateScreenName:function(){var e=this.$el.find(".js-reviews-commentScreenNameInput"),t=this.removeHtmlTags(e.val()),n=this.model.preValidate("userNickname",t);n?this.invalidateFormControl(e):(this.resetFormControlValidation(e),this.model.set("userNickname",t))},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=$(".js-reviews-currentUserNickname"),o=$(".js-reviews-commentScreenNameInput"),u=$(".js-reviews-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).toggleClass("is-hidden",!n),o.val(n),u.toggleClass("is-hidden",Boolean(n)))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.UserNickname||""),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t))},error:function(e,t,n){console.log(n)},complete:function(){s.html("screen name: "+n).toggleClass("is-hidden",!n),o.val(n).toggleClass("is-hidden",Boolean(n))}})},setUserNickname:function(e){var t=$(".js-reviews-currentUserNickname"),n=$(".js-reviews-commentScreenNameInput"),r=$(".js-reviews-currentUserInfo"),i=JSON.stringify({nickname:e||"",timeStamp:(new Date).getTime()});window.sessionStorage.setItem("userNickname",i),t.html("screen name: "+e).toggleClass("is-hidden",!e),n.val(e),r.toggleClass("is-hidden",Boolean(e))},submitComment:function(){var t=this,n=$(".js-reviews-composeCommentPanel"),r=n.find(".js-reviews-composeCommentTextarea"),i;this.validateText(),this.validateScreenName(),this.model.isValid(!0)&&this.model.postComment({userId:this.userStatusModel.attributes.profile.memberId,success:function(n){n.HasErrors?n.Errors[0].Code==="ERROR_DUPLICATE_SUBMISSION"?t.createAlert(alertsContainer,"warning","We&#39;re sorry. You have already submitted a review for this product."):(t.createAlert(alertsContainer,"warning",errorText),typeof n.Errors=="string"?console.log(">>> "+n.Errors):e.each(n.Errors,function(e){console.log(">>> "+e.Message)})):(t.createAlert(alertsContainer,"success",successText),commentTextInput.val(""),t.setUserNickname(userNickname),t.hideComposeCommentPanel())},error:function(e){e.status===401?t.openLogin():(t.createAlert(alertsContainer,"warning",errorText),console.log(e.responseText))}}),this.model.set("productId",this.getProductId())},removeHtmlTags:function(e){return e.trim().replace(/<(?:.|\n)*?>/gm,"")},writeCommentSignIn:function(t){var n=e.template(f,{text:"sign in to comment"});t.preventDefault(),this.showPopoverMessage({popoverElement:$(t.currentTarget),message:n,focusSelector:".js-reviews-signIn"})},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:a}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},events:{"click .js-reviews-hideComposeCommentPanel":"onHideComposeCommentPanel","click .js-reviews-submitComment":"submitComment","blur .js-reviews-composeCommentTextarea":"validateText","keyup .js-reviews-composeCommentTextarea":"validateText","blur .js-reviews-commentScreenNameInput":"validateScreenName","keyup .js-reviews-commentScreenNameInput":"validateScreenName","click .js-reviews-writeCommentSignIn":"writeCommentSignIn"}});return c}),define("views/models/browse/reviews/review.view.model",["underscore"],function(e){var t=function(t,n){t.viewModel=t.viewModel||{},e.extend(t.viewModel,n)},n=function(n){var r=n.reviewStats||{},i=n.review||{},s={};s.hasVisibleSecondaryRatings=!1,s.secondaryRatingsStars=[],s.secondaryRatingsSliders=[],e.each(i.SecondaryRatingsOrder,function(n){var o={},u={};e.isObject(i.SecondaryRatings[n])&&(o=e.clone(i.SecondaryRatings[n])),u.isVisible=!1,r.secondaryLabels=r.secondaryLabels||{},r.secondaryLabels[o.Id]&&r.secondaryLabels[o.Id].label&&(s.hasVisibleSecondaryRatings=!0,u.isVisible=!0,o.DisplayType==="SLIDER"&&(u.isDisplayTypeSlider=!0,u.sliderValue=r.secondaryLabels[o.Id].optionLabels[o.Value-1],s.secondaryRatingsSliders.push(o)),o.DisplayType==="NORMAL"&&(u.isDisplayTypeNormal=!0,u.starValue=Math.round(o.Value*10)/10,u.ratingsScoreWidth=o.Value/5*100,s.secondaryRatingsStars.push(o)),u.label=r.secondaryLabels[o.Id].label),t(o,u)}),t(i,s)};return{"default":function(e){return n(e),e}}}),define("text!templates/common/browse/reviews/photos.html",[],function(){return' <div data-photo-count="<%= photos.length %>"> <% _.each(photos, function(photo, index) { %> <div data-index="<%= index %>" data-large="<%= photo.Sizes.normal.Url %>" style="background-image: url(<%= photo.Sizes.thumbnail.Url %>)"> <span class="h-sr-only">Photo <%= index + 1 %> - Opens a larger image.</span> </div> <% }); %> </div> '}),define("text!templates/common/browse/reviews/review.html",[],function(){return'<div class="js-reviews-reviewRow" data-review-id="<%= review.Id %>" id="bvTag-review<%= review.Id %>"> <div data-scroll-offset="125" class="h-standardSpacingBottom js-reviews-review"> <% if (review.Title !== null) { %> <div class="title title-left"> <h4 class="title-text delta"> <%- review.Title %> <% if (!hideWouldRecommend &&\n                        review.IsRecommended !== null &&\n                        typeof review.IsRecommended !== \'undefined\') { %> <% if (review.IsRecommended) { %> <span class="h-text-normal">(would recommend)</span> <% } else { %> <span class="h-text-normal">(would not recommend)</span> <% } %> <% } %> </h4> </div> <% } else { %> <h4 class="h-sr-only">Review <% if (review.UserNickname) { %>by <%= review.UserNickname %><% } %></h4> <% } %> <div class="ratings-block h-display-inline-block"> <div class="ratings ratings-xs"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width: <%= (review.Rating / 5) * 100 %>%"> <span class="h-sr-only h-inlineWrap"><%= Math.round(review.Rating * 10) / 10 %> out of 5 stars</span> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> </div> <div class="h-display-inline-block h-text-grayDark h-text-sm"> <span class="h-sr-only">submitted by </span> <% if (review.UserNickname) { %>&nbsp;<%= review.UserNickname %> &mdash;<% } %> <%= review.SubmissionTime %> </div> <% if (review.IsSyndicated && review.SyndicationSource.Name) { %> <div class="test-reviews-syndicatedBadge"> <div class="h-float-left h-text-grayDark"> originally posted on <%= review.SyndicationSource.Name %> </div> <div class="h-float-left h-tightSpacingLeft"> <% if (review.SyndicationSource.LogoImageUrl) { %> <img src="<%= review.SyndicationSource.LogoImageUrl %>" alt="<%= review.SyndicationSource.Name %> logo"> <% } %> </div> <div class="h-float-clear"></div> </div> <% } %> <% if (review.Badges && !_.isEmpty(review.Badges.incentivizedReview) && review.Badges.incentivizedReview.Id === \'incentivizedReview\') { %> <div class="h-text-grayDark test-reviews-incentivizedBadge">reviewer received free item</div> <% } %> <% if (review.ReviewText) { %> <div class="h-tinySpacingTop"> <div class="h-display-inline js-reviews-reviewText" tabindex="-1"> <%- review.ReviewText.substring(0, truncatedLength) %><% if (review.ReviewText.length > truncatedLength) { %>...<% } %>&nbsp; </div> <div class="h-display-inline is-hidden js-reviews-reviewText" tabindex="-1"> <%- review.ReviewText %>&nbsp; </div> <% if ((!exposeHelpfulness && !review.IsSyndicated) ||\n                    review.Photos && review.Photos.length ||\n                    (review.ReviewText && review.ReviewText.length > truncatedLength) ||\n                    review.viewModel.hasVisibleSecondaryRatings) { %> <span class="h-inlineWrap"> <a href="#" class="link-underline xh-inlineWrap js-reviews-showExpandedReview">see more <% if (review.UserNickname) { %><span class="h-sr-only">of <%= review.UserNickname %>\'s review</span><% } %></a> </span> <% } %> </div> <% } %> <div class="is-hidden js-reviews-expandedReviewContent"> <% if (review.viewModel.hasVisibleSecondaryRatings) { %> <div class="l-container test-secondaryRatings"> <div class="l-row l-row-nopadding"> <% _.each(review.viewModel.secondaryRatingsStars, function(rating) { %> <% if (rating.viewModel.isVisible) { %> <div class="l-col-xs-6 l-col-lg-3 l-col-xl-2 h-tightSpacingTop test-secondaryRating"> <div> <span class="h-text-bold h-text-lowercase" aria-hidden="true"> <%= rating.viewModel.label %> </span> <span class="h-sr-only"> <%= rating.viewModel.label %> <%= rating.viewModel.starValue %> out of 5 stars </span> </div> <div class="h-tinySpacingTop"> <div class="ratings-block"> <div class="ratings ratings-xs"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width: <%= rating.viewModel.ratingsScoreWidth %>%"> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> </div> </div> </div> <% } %> <% }); %> <% _.each(review.viewModel.secondaryRatingsSliders, function(rating) { %> <% if (rating.viewModel.isVisible) { %> <div class="l-col-xs-6 l-col-lg-3 l-col-xl-2 h-tightSpacingTop test-secondaryRating"> <div> <span class="h-text-bold h-text-lowercase" aria-hidden="true"> <%= rating.viewModel.label %> </span> <span class="h-sr-only"> <%= rating.viewModel.label %> <%= rating.viewModel.sliderValue %> </span> </div> <div class="h-text-lowercase" aria-hidden="true"> <%= rating.viewModel.sliderValue %> </div> </div> <% } %> <% }); %> </div> </div> <% } %> <% if ((!exposeHelpfulness && !review.IsSyndicated) ||\n                review.Photos && review.Photos.length ||\n                (review.ReviewText && review.ReviewText.length > truncatedLength) ||\n                review.viewModel.hasVisibleSecondaryRatings) { %> <div class="h-tightSpacingTop"> <a href="#" class="link-underline js-reviews-hideExpandedReview is-hidden">see less <% if (review.UserNickname) { %><span class="h-sr-only">of <%= review.UserNickname %>\'s review</span><% } %></a> </div> <% } %> </div> <div class="h-text-sm h-tightSpacingTop <% if (!exposeHelpfulness) { %>js-reviews-expandedReviewContent is-hidden<% } %>"> <% if (!review.IsSyndicated) { %> <a href="#" class="link-underline h-tightSpacingRight js-reviews-voteHelpful">helpful (<span class="js-reviews-feedbackTotal"><%= review.TotalPositiveFeedbackCount %></span>)</a> <a href="#" class="link-underline h-tightSpacingRight js-reviews-voteNotHelpful">not helpful (<span class="js-reviews-feedbackTotal"><%= review.TotalNegativeFeedbackCount %></span>)</a> <a href="#" class="link-underline js-reviews-reviewReport" title="report this review as inappropriate for Target.com">report</a> <% } %> <div class="h-standardSpacingLeft is-hidden js-reviews-commentsPanel"> <div class="js-reviews-commentList"></div> <div class="js-reviews-composeCommentForm"></div> </div> <hr> </div> </div> </div> '}),define("views/common/browse/reviews/review.view",["underscore","Target","page","models/browse/reviews/review.model","models/browse/reviews/feedback.model","models/browse/reviews/comment.model","models/browse/reviews/user-status.model","models/browse/reviews/nickname.model","views/common/browse/reviews/comment.view","views/common/browse/reviews/comment-form.view","views/models/browse/reviews/review.view.model","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/reviews/photos.html","text!templates/common/browse/reviews/review.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/reviews/signin-popover-link.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=n.extend({initialize:function(){this.userStatusModel=new o},render:function(t){if(typeof this.model=="undefined")return;var n=this,r=e.template(p,e.assignContext(l.default,{review:this.model.attributes,reviewStats:t.reviewStats,subTemplates:{photosTemplate:h},truncatedLength:t.truncatedLength,exposeHelpfulness:t.exposeHelpfulness,hideWouldRecommend:t.hideWouldRecommend})),i=this.model.attributes.Comments,o;this.$el.html(r),$(t.container).append(this.el),i&&i.length&&i.forEach(function(e){var t=new a({$el:n.$el.find(".js-reviews-commentsPanel"),model:new s(e)});t.render({container:".js-reviews-commentList"})})},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},overtAccessibilityToggle:function(e){$(e).each(function(e,t){$(t).hasClass("is-hidden")?$(t).removeClass("is-hidden").removeAttr("aria-hidden"):$(t).addClass("is-hidden").attr("aria-hidden","true")})},toggleExpandedReview:function(e){var t=this.$el.find(".js-reviews-reviewText, .js-reviews-showExpandedReview, .js-reviews-hideExpandedReview, .js-reviews-expandedReviewContent");this.overtAccessibilityToggle(t),this.$el.find(e.focusSelector).focus()},showExpandedReview:function(e){var t;e.preventDefault(),this.toggleExpandedReview({focusSelector:".js-reviews-reviewText:visible"});try{t=this.bvBaseInViewData(),t.bvProduct="RatingsAndReviews",t.name="Reviews_Show_Expanded_Review",t.bvAttributes={containerId:"bvTag-review"+this.getProductId()},window._bvapiq.push(["FeatureUsed",t])}catch(n){console.log(n)}},hideExpandedReview:function(e){var t;e.preventDefault(),this.toggleExpandedReview({focusSelector:".js-reviews-showExpandedReview"});try{t=this.bvBaseInViewData(),t.bvProduct="RatingsAndReviews",t.name="Reviews_Hide_Expanded_Review",t.bvAttributes={containerId:"bvTag-review"+this.getProductId()},window._bvapiq.push(["FeatureUsed",t])}catch(n){console.log(n)}},feedbackVote:function(e){var t=this,n=$(e.currentTarget),r=new i({ContentId:this.model.get("Id"),ContentType:"review"}),s=n.hasClass("js-reviews-voteHelpful")?"Positive":"Negative",o,u;s==="Positive"?o=this.model.get("TotalPositiveFeedbackCount"):o=this.model.get("TotalNegativeFeedbackCount"),e.preventDefault(),r.postHelpfulnessVote({voteType:s,success:function(){var e=$("<div/>").addClass("h-display-inline h-tightSpacingRight").html(n.html()).attr({tabindex:"-1",role:"alert"});n.hasClass("js-reviews-voteHelpful")?(e.addClass("h-text-greenDark"),t.$el.find(".js-reviews-voteNotHelpful").remove()):n.hasClass("js-reviews-voteNotHelpful")&&(e.addClass("h-text-orangeDark"),t.$el.find(".js-reviews-voteHelpful").remove()),n.replaceWith(e),e.find(".js-reviews-feedbackTotal").html(o+1),e.focus()},error:function(){console.log("error voting")}});try{u=this.bvBaseInViewData(),u.bvProduct="RatingsAndReviews",u.name="Reviews_Submit_Feedback_Vote_Button",u.detail1="reviews_"+(s==="Positive"?"helpful":"nothelpful"),u.bvAttributes={containerId:"bvTag-review"+this.getProductId()},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}},reviewReport:function(e){var t=$(e.currentTarget),n=new i({ContentId:this.model.get("Id"),ContentType:"review"}),r;e.preventDefault(),n.postReport({success:function(){var e=$("<div/>").addClass("h-display-inline h-text-orangeDark h-tightSpacingRight test-reviews-reviewReportSuccess").text("reported").attr({tabindex:"-1",role:"alert"});t.replaceWith(e),e.focus()},error:function(){console.log("error reporting")}});try{r=this.bvBaseInViewData(),r.bvProduct="RatingsAndReviews",r.name="Reviews_Submit_Report_Button",r.detail1="reviews_report",r.bvAttributes={containerId:"bvTag-review"+this.getProductId()},window._bvapiq.push(["FeatureUsed",r])}catch(s){console.log(s)}},toggleCommentsPanel:function(e){e.preventDefault(),this.$el.find(".js-reviews-commentsPanel").toggleClass("is-hidden")},onShowComposeCommentPanel:function(t){var n=this,r=$(t.currentTarget),i=e.template(v,{text:"sign in to comment"});t.preventDefault(),this.checkUserIsLoggedIn({success:function(){var e=sessionStorage.getItem("memberId"),s=sessionStorage.getItem("guestType");s==="R"||s==="P"?n.showComposeCommentPanel(t):n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-reviews-signIn"})},error:function(){n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-reviews-signIn"})}})},showComposeCommentPanel:function(e){this.toggleCommentsPanel(e)},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:d}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},checkUserIsLoggedIn:function(e){this.userStatusModel.fetch({success:function(t){var n=t.attributes;n&&n.profile&&n.profile.memberId?(sessionStorage.setItem("memberId",n.profile.memberId),sessionStorage.setItem("guestType",n.profile.guestType),e.success()):e.error()},error:function(){e.error()}})},openLogin:function(e){var t=sessionStorage.getItem("memberId"),n=sessionStorage.getItem("guestType");e.preventDefault(),t&&n==="P"?window.location.href=Target.Config.gamModURL+"/gam-login?redirectToURL="+encodeURIComponent(window.location.href):(this.$el.find(".js-reviews-showComposeReviewPanel").popover("hide"),$("#js-toggleRightNav:visible, #js-toggleRightNavLg:visible").trigger("click"),setTimeout(function(){$("#rightNavigation .navigation--url").first().trigger("click"),setTimeout(function(){$("#logonIdSide").focus()},800)},800))},events:{"click .js-reviews-showExpandedReview":"showExpandedReview","click .js-reviews-hideExpandedReview":"hideExpandedReview","click .js-reviews-voteHelpful, .js-reviews-voteNotHelpful":"feedbackVote","click .js-reviews-reviewReport":"reviewReport","click .js-reviews-toggleCommentsPanel":"toggleCommentsPanel","click .js-reviews-showComposeCommentPanel":"onShowComposeCommentPanel"}}).mixin([c]);return m}),define("text!templates/common/browse/reviews/reviews-list-shell.html",[],function(){return' <div class="l-container" id="bvTag-allReviews"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardSpacingTop h-standardPaddingLeft h-standardPaddingRight"> <a class="headingBackLink js-reviews-hideAllReviews" href="#"> <div class="title title-left"> <h2 class="title-charlie title--headingBackLink"> <span class="h-sr-only">back to </span><%= product.title %> </h2> </div> </a> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr class="h-tightSpacing"> </div> </div> </div> <div class="l-row test-reviews-allReviewsSummary"> <div class="l-col-xs-12 l-col-nopadding"> <div class="l-row"> <div class="l-col-xs-7 l-col-lg-9 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <h2 class="title--category title-bravo h-display-inline js-reviews-allReviewsHeading" tabindex="-1"> <span class="h-sr-only"><%= reviewStats.TotalReviewCount %> guest reviews</span> <span aria-hidden="true">guest reviews</span> </h2> <span class="h-text-xl test-reviews-totalReviews" aria-hidden="true"><%= reviewStats.TotalReviewCount %></span> </div> </div> <div class="l-col-xs-5 l-col-lg-3 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <button class="btn btn-primary btn-sm btn-block js-reviews-showComposeReviewPanel">write a review</button> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="ratings-block"> <div class="ratings ratings-lg"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width: <%= (reviewStats.AverageOverallRating / 5) * 100 %>%"> <span class="h-sr-only h-inlineWrap"><%= Math.round(reviewStats.AverageOverallRating * 10) / 10 %> out of 5 stars</span> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> </div> </div> </div> </div> <% if (reviewStats.summaryStars.length > 0 || reviewStats.summarySliders.length > 0) { %> <div class="l-row h-standardSpacingBottom test-reviews-allReviewsSummarySecondaryRatings"> <% _.each(reviewStats.summaryStars, function(rating) { %> <div class="l-col-xs-6 l-col-lg-3 l-col-xl-2 l-col-nopadding h-standardSpacingTop"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div> <span class="h-text-bold h-text-lowercase" aria-hidden="true"> <%= rating.Label %> </span> <span class="h-sr-only"> <%= rating.Label %> <%= Math.round(rating.averageSecondaryRating * 10) / 10 %> out of 5 stars </span> </div> <div class="stars-small h-tinySpacingTop"> <div class="ratings-block"> <div class="ratings ratings-xs"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width: <%= (rating.averageSecondaryRating / 5) * 100 %>%"> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> </div> </div> </div> </div> <% }); %> <% _.each(reviewStats.summarySliders, function (slider) { %> <div class="l-col-xs-6 l-col-lg-3 l-col-xl-2 l-col-nopadding h-standardSpacingTop"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div> <span class="h-text-bold h-text-lowercase" aria-hidden="true"> <%= slider.Label %> </span> <span class="h-sr-only"> <%- slider.Label %> <%- slider.Options[parseInt(Math.round(slider.averageSecondaryRating), 10) - 1].Label %> </span> </div> <div class="h-text-lowercase" aria-hidden="true"> <%- slider.Options[parseInt(Math.round(slider.averageSecondaryRating), 10) - 1].Label %> </div> </div> </div> <% }); %> </div> <% } %> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr class="h-tightSpacing"> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12"> <div class="js-reviews-reviewAlerts h-tightSpacing is-hidden" role="alert" tabindex="0"></div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="is-hidden js-reviews-composeReviewPanel"></div> </div> </div> <% if (reviewStats.TotalReviewCount > 1) { %> <div id="sortAndFilterReviewsRow" class="l-row h-tightSpacingTop l-row-halfpadding"> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <div class="dropdown dropdown-default dropdown-native js-reviews-sortControl" data-variant="centeredText"> <label class="dropdown--label is-hidden" for="reviewssortby">sort by</label> <select id="reviewssortby" name="sortby" class="dropdown--select"> <% _.each (sortConfig.options, function (element, index, list) { %> <% if (element.isSelected) { %> <option value="<%- element.value %>" selected="selected"><%- element.text %></option> <% } else { %> <option value="<%- element.value %>"><%- element.text %></option> <% } %> <% }); %> </select> </div> </div> </div> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <div class="dropdown dropdown-default dropdown-native js-reviews-filterControl" data-variant="centeredText"> <label class="dropdown--label is-hidden" for="reviewsfilterby">filter by</label> <select id="reviewsfilterby" name="filterby" class="dropdown--select is-hidden"> <% _.each (filterConfig.options, function (element, index, list) { %> <% if (element.isSelected) { %> <option value="<%- element.value %>" selected="selected"><%- element.text %> (<%- element.count %>)</option> <% } else { %> <option value="<%- element.value %>"><%- element.text %> (<%- element.count %>)</option> <% } %> <% }); %> </select> </div> </div> </div> </div> <% } %> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="reviews--reviewList js-reviews-reviewList"></div> </div> </div> </div> <% if (reviewStats.TotalReviewCount && !reviews.length) { %> <div class="l-row"> <div class="l-col-xs-12"> <h3>no reviews to display</h3> </div> </div> <% } %> <div class="l-row l-row-halfpadding"> <% if (hasShowMoreButton) { %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-reviews-loadMoreReviews">show more</button> </div> </div> <% } %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-reviews-showComposeReviewPanel">write a review</button> </div> </div> </div> <div id="subLoader" class="is-hidden"></div> </div> '}),define("views/common/browse/reviews/reviews-collection.view",["underscore","Target","page","collections/browse/reviews/reviews.collection","models/browse/reviews/review.model","models/browse/reviews/user-status.model","models/browse/reviews/nickname.model","views/common/browse/reviews/review.view","views/common/browse/reviews/review-form.view","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/reviews/review-form.html","text!templates/common/browse/reviews/photos.html","text!templates/common/browse/reviews/reviews-list-shell.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/reviews/signin-popover-link.html","patlab.dropdown"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=n.extend({patlab:{},numReviewsPerPage:10,numReviewsInFirstRequest:20,reviewQueue:[],initialize:function(){var e=this;this.reviewQueue=[],this.$el=$(".js-pdp-mainContainerTakeover"),this.collection=new r,this.userStatusModel=new s,this.nicknameModel=new o,$(window).bind("keydown.reviews-all-reviews",function(t){e.onKeydownEscape(t)})},render:function(t){var n=this,r={options:[{value:"helpfulness_desc",text:"most helpful",isSelected:!0},{value:"time_desc",text:"most recent",isSelected:!1},{value:"rating_desc",text:"highest rating",isSelected:!1},{value:"rating_asc",text:"lowest rating",isSelected:!1}]},i=this.generateFilterConfig(t.reviewStats),s;window.history&&window.history.pushState&&($(window).on("popstate.reviews-all-reviews",function(){n.hideAllReviews()}),window.history.pushState("forward",null)),this.reviewStats=t.reviewStats,this.collection.fetch({productId:this.getProductId(),limit:n.numReviewsInFirstRequest,success:function(s){var o=JSON.parse(sessionStorage.getItem("productdetails"))||{},a=s.models,f=e.template(h,{reviews:a,reviewStats:n.reviewStats,product:{id:o.partNumber,title:o.title},sortConfig:r,filterConfig:i,hasShowMoreButton:n.reviewStats.TotalReviewCount>n.numReviewsPerPage});n.$el.html(f),t.reviewStats.TotalReviewCount&&e.each(a,function(e,t){var r;t<n.numReviewsPerPage?(r=new u({model:e}),r.render({reviewStats:n.reviewStats,container:".js-reviews-reviewList",truncatedLength:300,exposeHelpfulness:!0})):n.reviewQueue.push(e.attributes)}),$("#pdp-main #pdpMainContainer").addClass("is-hidden"),n.$el.removeClass("is-hidden"),$(".js-reviews-allReviewsHeading").focus(),n.patlab.dropdown=new v($("#sortAndFilterReviewsRow"))},error:function(e,t,n){console.log(n)}});try{s=this.bvBaseInViewData(),s.bvProduct="RatingsAndReviews",s.bvAttributes={containerId:"bvTag-allReviews"},s.name="Reviews_All_Reviews_Viewed",window._bvapiq.push(["FeatureUsed",s])}catch(o){console.log(o)}},generateFilterConfig:function(e){var t={options:[]},n,r;if(typeof e=="undefined")return t;t.options.push({value:"",text:"all ratings",count:0,isSelected:!0,isEnabled:!0});for(r=5;r>0;r--)e.ratingBreakdown[r]&&(n={value:r,text:r+" stars",count:0,isSelected:!1},n.count=e.ratingBreakdown[r],t.options[0].count+=e.ratingBreakdown[r],r===1&&(n.text="1 star"),t.options.push(n));return t},reviewStats:{},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},checkUserIsLoggedIn:function(e){this.userStatusModel.fetch({success:function(t){var n=t.attributes;n&&n.profile&&n.profile.memberId?(sessionStorage.setItem("memberId",n.profile.memberId),sessionStorage.setItem("guestType",n.profile.guestType),e.success()):e.error()},error:function(){e.error()}})},openLogin:function(e){var t=sessionStorage.getItem("memberId"),n=sessionStorage.getItem("guestType");e.preventDefault(),t&&n==="P"?window.location.href=Target.Config.gamModURL+"/gam-login?redirectToURL="+encodeURIComponent(window.location.href):(this.$el.find(".js-reviews-showComposeReviewPanel").popover("hide"),$("#js-toggleRightNav:visible, #js-toggleRightNavLg:visible").trigger("click"),setTimeout(function(){$("#rightNavigation .navigation--url").first().trigger("click"),setTimeout(function(){$("#logonIdSide").focus()},800)},800))},getReviews:function(e){var t=$("#reviewssortby").find("option:selected"),n=t.val(),r=$("#reviewsfilterby").find("option:selected"),i=r.val();this.collection.fetch({productId:this.getProductId(),sortMethod:n,filterMethod:i,limit:e.limit,offset:e.offset,success:function(t){e.success(t)},error:function(e,t,n){console.log(n)}})},getSortedFilteredReviews:function(t){var n=this,r=$(t.currentTarget),i=r.find("option:selected").text().split("(")[0],s;if(!r.attr("disabled")){try{s=this.bvBaseInViewData(),s.detail1=i,s.bvProduct="RatingsAndReviews",s.bvAttributes={containerId:"bvTag-allReviews"},r.attr("id")==="reviewssortby"?s.name="Reviews_Sort_Button":r.attr("id")==="reviewsfilterby"&&(s.name="Reviews_Filter_Rating_Button"),window._bvapiq.push(["FeatureUsed",s])}catch(o){console.log(o)}this.getReviews({limit:this.numReviewsInFirstRequest,success:function(t){var r=t.models;n.reviewQueue=[],$(".js-reviews-reviewList").empty(),n.reviewStats.TotalReviewCount&&(e.each(r,function(e,t){var r;t<n.numReviewsPerPage?(r=new u({model:e}),r.render({reviewStats:n.reviewStats,container:".js-reviews-reviewList",truncatedLength:300,exposeHelpfulness:!0})):n.reviewQueue.push(e.attributes)}),r.length>n.numReviewsPerPage?$(".js-reviews-loadMoreReviews").removeClass("is-hidden"):$(".js-reviews-loadMoreReviews").addClass("is-hidden"))}})}},loadMoreReviews:function(t){var n=this,r=$(t.currentTarget),s=$(".js-reviews-reviewList .js-reviews-reviewRow").length,o,a,f,l=Math.floor(s/this.numReviewsPerPage)+1;if(!r.attr("disabled")){try{f=this.bvBaseInViewData(),f.bvProduct="RatingsAndReviews",f.name="Reviews_Page_Button",f.detail1="Page_"+l,f.detail2="Offset_"+s,window._bvapiq.push(["FeatureUsed",f])}catch(c){console.log(c)}this.reviewQueue.forEach(function(e){var t=new u({model:new i(e)});t.render({reviewStats:n.reviewStats,container:".js-reviews-reviewList",truncatedLength:300,exposeHelpfulness:!0})}),o=$(".js-reviews-reviewList .js-reviews-reviewRow").length,a=$(".js-reviews-reviewList .js-reviews-review").eq(s),a.find(":first-child").eq(0).attr("tabindex","-1").focus(),$(".js-reviews-loadMoreReviews").attr("disabled","disabled"),this.getReviews({offset:o,success:function(t){n.reviewQueue=[],$(".js-reviews-loadMoreReviews").removeAttr("disabled");var r=t.models;n.reviewStats.TotalReviewCount&&e.each(r,function(e){n.reviewQueue.push(e.attributes)}),r.length===0&&$(".js-reviews-loadMoreReviews").addClass("is-hidden")}})}},onShowComposeReviewPanel:function(t){var n=this,r=$(t.currentTarget),i=e.template(d,{text:"sign in to review this item"}),s=this.bvBaseInViewData(),o;t.preventDefault(),this.isAnonUser()?(o=new a({container:this.$el.find(".js-reviews-composeReviewPanel"),instanceNumber:2}),o.render({success:function(){n.showComposeReviewPanel(),n.$el.find(".js-reviews-currentUserNickname").addClass("is-hidden"),n.$el.find(".js-reviews-userNicknameInput").removeClass("is-hidden"),n.$el.find(".js-reviews-userEmailContainer").removeClass("is-hidden")}})):this.checkUserIsLoggedIn({success:function(){var e=sessionStorage.getItem("memberId"),t=sessionStorage.getItem("guestType");t==="R"||t==="P"?n.$el.find(".js-reviews-composeReviewPanel").is(":empty")?(o=new a({container:n.$el.find(".js-reviews-composeReviewPanel"),instanceNumber:2}),o.render({success:function(){n.getUserNickname(e),n.showComposeReviewPanel()}})):(n.getUserNickname(e),n.showComposeReviewPanel()):n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-reviews-signIn"}),t==="P"&&$(".js-reviews-userEmailContainer").removeClass("is-hidden")},error:function(){n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-reviews-signIn"})}});try{s.bvProduct="RatingsAndReviews",s.bvAttributes={containerId:"bvTag-allReviews"},s.name="Reviews_Write_Review_Button",window._bvapiq.push(["FeatureUsed",s])}catch(u){console.log(u)}},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:p}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},showComposeReviewPanel:function(){var e=this.$el.find(".js-reviews-composeReviewPanel"),t=this.$el.find(".js-reviews-showComposeReviewPanel"),n=this.$el.find(".js-reviews-reviewFormTitle"),r=this.$el.find(".js-reviews-composeReviewTitle"),i=this.$el.find(".js-reviews-composeReviewTextarea"),s=this.$el.find(".js-reviews-ratingLabel"),o=this.$el.find("input"),u=this.$el.find(".js-reviews-secondaryRatablesQuestion"),a=e.find(".js-reviews-photoUploadPhotos"),f=e.find(".js-reviews-addPhoto"),l=e.find(".js-reviews-submit"),c=e.find(".js-reviews-showTermsModal"),h=$(".js-reviews-reviewAlerts");r.val(""),i.val(""),s.removeClass("ratings--star-active"),o.attr("checked",!1),u.val(""),c.attr("href","#"),e.removeClass("is-hidden"),$("body, html").stop().animate({scrollTop:t.offset().top-15}),t.addClass("is-hidden"),n.focus(),f.removeClass("is-hidden").children("input").removeAttr("disabled").val(""),a.empty().removeClass("full").addClass("is-hidden"),l.removeAttr("disabled"),c.removeAttr("href"),h.addClass("is-hidden").empty(),this.uploadPhotoXhr&&this.uploadPhotoXhr.readyState&&this.uploadPhotoXhr.abort()},isAnonUser:function(){var e=Target.getParameterByName("anonymousPurchaserFlag")==="yes"&&Target.getParameterByName("orderId")&&Target.getParameterByName("productID");return e},onHideAllReviews:function(e){e.preventDefault(),this.hideAllReviews(),window.history.back()},hideAllReviews:function(e){e&&e.preventDefault(),$("#pdp-main #pdpMainContainer").removeClass("is-hidden"),$(".js-pdp-mainContainerTakeover").addClass("is-hidden").empty(),this.undelegateEvents(),$(window).unbind("keydown.reviews-all-reviews").off("popstate.reviews-all-reviews")},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=$(".js-reviews-currentUserNickname"),o=$(".js-reviews-reviewScreenNameInput"),u=$(".js-reviews-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.attributes.UserNickname),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t),s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))},error:function(e,t,n){console.log(n)}})},onKeydownEscape:function(e){e.keyCode===27&&$(".modal-shown").length===0&&$(".show-dropdown").length===0&&this.onHideAllReviews(e)},events:{"change #reviewssortby, #reviewsfilterby":"getSortedFilteredReviews","click .js-reviews-hideAllReviews":"onHideAllReviews","click .js-reviews-loadMoreReviews":"loadMoreReviews","click .js-reviews-showComposeReviewPanel":"onShowComposeReviewPanel","click .js-reviews-signIn":"openLogin"}}).mixin([f]);return m}),define("text!templates/common/browse/reviews/reviews-summary.html",[],function(){return'<div class="l-container"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="guestRating"> <div class="title title-ratings"> <h2 class="title--category title-bravo">guest reviews</h2> <% if (reviewStats.TotalReviewCount === 0) { %> <a class="link-grayDark link-underline guestRating--total js-reviews-showComposeReviewPanel" href="#" title="" aria-label="be the first to write a review"> <span class="link-underline-inner" aria-hidden="true">be the first</span> </a> <% } else if (reviewStats.TotalReviewCount > 0 && reviewStats.TotalReviewCount <= recentReviewCount) { %> <span class="guestRating--total test-text-review-count"><%= reviewStats.TotalReviewCount %></span> <span class="h-sr-only">review<% if (reviewStats.TotalReviewCount !== 1) { %>s<% } %></span> <% } else { %> <a class="link-grayDark link-underline guestRating--total js-reviews-showAllReviews" href="#" aria-label="see all <%= reviewStats.TotalReviewCount %> reviews"> <span class="link-underline-inner" aria-hidden="true"><%= reviewStats.TotalReviewCount %></span> </a> <% } %> </div> <div class="ratings-block"> <div class="ratings ratings-lg"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width: <%= (reviewStats.AverageOverallRating / 5) * 100 %>%"> <span class="h-sr-only h-inlineWrap"><%= Math.round(reviewStats.AverageOverallRating * 10) / 10 %> out of 5 stars</span> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> </div> <% if (reviewStats.TotalReviewCount > 0) { %> <span itemprop="aggregateRating" itemscope="" itemtype="http://schema.org/AggregateRating"> <meta itemprop="reviewCount" content="<%= reviewStats.TotalReviewCount %>"> <meta itemprop="ratingValue" content="<%= reviewStats.AverageOverallRating %>"> <meta itemprop="bestRating" content="5"> </span> <% } %> </div> </div> </div> </div> <% if (reviewStats.TotalReviewCount > 0) { %>  <% if (reviewStats.mostHelpfulPositiveReview) { %> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h3 class="title-text title-charlie">most helpful positive review</h3> </div> <div class="js-reviews-mostHelpfulPositiveReview"></div> </div> </div> </div> <% } %> <% if (reviewStats.mostHelpfulNegativeReview) { %> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h3 class="title-text title-charlie">most helpful negative review</h3> </div> <div class="js-reviews-mostHelpfulNegativeReview"></div> </div> </div> </div> <% } %>  <% if (!reviewStats.mostHelpfulPositiveReview && !reviewStats.mostHelpfulNegativeReview) { %> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h3 class="title-text title-charlie">most recent review</h3> </div> <div class="js-reviews-mostRecentReview"></div> </div> </div> </div> <% } %> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding js-reviews-recentReviewsButtonContainer"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <% if (reviewStats.TotalReviewCount > 1 &&\n                    !(reviewStats.TotalReviewCount === 2 &&\n                    reviewStats.mostHelpfulPositiveReview &&\n                    reviewStats.mostHelpfulNegativeReview)) { %> <button class="btn btn-default btn-sm js-reviews-showRecentReviews">more reviews</button> <button class="btn btn-default btn-sm is-hidden js-reviews-hideRecentReviews">fewer reviews</button> <% } %> <% if (reviewStats.TotalReviewCount > 0) { %> <button class="btn btn-default btn-sm js-reviews-showComposeReviewPanel">write a review</button> <% } %> </div> </div> </div> <div class="is-hidden js-reviews-recentReviewsContainer h-standardSpacingTop"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <% if (reviewStats.mostHelpfulPositiveReview || reviewStats.mostHelpfulNegativeReview) { %> <h3 class="title--category title-charlie js-reviews-recentReviewsTitle"> recent reviews </h3> <% } %> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="js-reviews-recentReviews"></div> <div class="is-hidden js-reviews-seoRecentReviews"></div> </div> </div> </div> <div class="l-row l-row-standardNegativeMargin l-row-halfpadding"> <% if (reviewStats.TotalReviewCount > 5) { %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-reviews-showAllReviews">see all <%= reviewStats.TotalReviewCount %> reviews</button> </div> </div> <% } %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-reviews-showComposeReviewPanel">write a review</button> </div> </div> </div> </div> <% } %> <div class="l-row"> <div class="l-col-xs-12"> <div class="js-reviews-reviewAlerts h-tightSpacing is-hidden" role="alert" tabindex="0"></div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="is-hidden js-reviews-composeReviewPanel"></div> </div> </div> </div> '}),define("text!templates/common/browse/reviews/reviews-summary-photos.html",[],function(){return'<% _.each(photoBlocks, function (photoBlock, index) { %> <% _.each(photoBlock, function (photo, index) { %> <a href="#" class="js-showZoomImage" data-idx="<%= index %>" data-large="<%= photo.normalUrl %>" data-review-id="<%= photo.reviewId %>" data-caption-text="<%- photo.captionText %>" style="background-image: url(<%= photo.thumbnailUrl %>)"> <span class="h-sr-only">Guest photo <%= index + 1 %>&mdash; Opens larger view.</span> </a> <% }); %> <% }); %> '}),define("views/common/browse/reviews/reviews-summary.view",["underscore","Target","page","models/browse/reviews/reviews-statistics.model","models/browse/reviews/review.model","models/browse/reviews/secondary-ratables.model","models/browse/reviews/user-status.model","models/browse/reviews/nickname.model","collections/browse/reviews/reviews.collection","views/common/browse/reviews/review-form.view","views/common/browse/reviews/reviews-collection.view","views/common/browse/reviews/review.view","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/reviews/reviews-summary.html","text!templates/common/browse/reviews/reviews-summary-photos.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/reviews/signin-popover-link.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=n.extend({initialize:function(e){this.$el=$(".js-reviews-summary"),this.model=new r,this.userStatusModel=new o,this.nicknameModel=new u,this.model.attributes=this.model.parse(e.get("ratingAndReviewStatistics"),{productId:this.getProductId()})||{},this.secondaryRatablesModel=new s,this.collection=new a(e.get("ratingAndReviewReviews").result),$.getScript(this.bvApiSrc),window._bvapiq=window._bvapiq||[]},render:function(){var t=this,n=e.template(p,{reviewStats:this.model.attributes,recentReviewCount:5}),r=Target.getParameterByName("write-review")==="true"||this.isAnonUser();this.$el.html(n),this.getReviewsSummary(),this.getRecentReviews(),r&&setTimeout(function(){t.$el.find(".js-reviews-showComposeReviewPanel").eq(0).trigger("click")},800);try{window._bvapiq.push(["PageViewProduct",this.summaryViewInViewData()])}catch(i){console.log(i)}},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},checkUserIsLoggedIn:function(e){this.userStatusModel.fetch({success:function(t){var n=t.attributes;n&&n.profile&&n.profile.memberId?(sessionStorage.setItem("memberId",n.profile.memberId),sessionStorage.setItem("guestType",n.profile.guestType),e.success()):e.error()},error:function(){e.error()}})},openLogin:function(e){var t=sessionStorage.getItem("memberId"),n=sessionStorage.getItem("guestType");e.preventDefault(),t&&n==="P"?window.location.href=Target.Config.gamModURL+"/gam-login?redirectToURL="+encodeURIComponent(window.location.href):(this.$el.find(".js-reviews-showComposeReviewPanel").popover("hide"),$("#js-toggleRightNav:visible, #js-toggleRightNavLg:visible").trigger("click"),setTimeout(function(){$("#rightNavigation .navigation--url").first().trigger("click"),setTimeout(function(){$("#logonIdSide").focus()},800)},800))},getReviewsSummary:function(){var t=this.model.attributes,n,r,s=new i,o=new i;if(t){t.mostHelpfulPositiveReview&&(n=new c({model:s.set(s.parse(t.mostHelpfulPositiveReview))}),n.render({reviewStats:t,container:".js-reviews-mostHelpfulPositiveReview",truncatedLength:120,hideWouldRecommend:!0})),t.mostHelpfulNegativeReview&&(r=new c({model:o.set(o.parse(t.mostHelpfulNegativeReview))}),r.render({reviewStats:t,container:".js-reviews-mostHelpfulNegativeReview",truncatedLength:120,hideWouldRecommend:!0}));if(t.photoBlocks&&t.photoBlocks.length){var u=e.template(d,{photoBlocks:t.photoBlocks});this.$el.find(".js-reviews-summaryPhotos").html(u)}try{window._bvapiq.push(["FeatureUsedInView",this.summaryViewInViewData()])}catch(a){console.log(a.message)}}},toggleRecentReviews:function(e){var t=this.$el.find(".js-reviews-recentReviewsContainer"),n=this.$el.find(".js-reviews-showRecentReviews, .js-reviews-hideRecentReviews"),r=t.hasClass("is-hidden");e.preventDefault(),r?this.$el.find(".js-reviews-recentReviewsButtonContainer").removeAttr("aria-live"):this.$el.find(".js-reviews-recentReviewsButtonContainer").attr("aria-live","polite").attr("aria-relevant","all"),t.toggleClass("is-hidden"),n.toggleClass("is-hidden"),r?t.find(".js-reviews-recentReviewsTitle").attr("tabindex",-1).focus():this.$el.find(".js-reviews-showRecentReviews").focus(),$("html, body").animate({scrollTop:e.pageY-20})},getRecentReviews:function(){var t=this.model.attributes,n=5,r=this.collection.models,s=t.mostHelpfulPositiveReview||t.mostHelpfulNegativeReview,o,u=new i;e.each(r,function(e,t,n){e.get("ReviewText")&&(n[t].paragraphs=e.get("ReviewText").split(/\n/g))}),!s&&r.length>0&&(o=new c({model:u.set(u.parse(r[0].attributes))}),o.render({reviewStats:t,container:".js-reviews-mostRecentReview",truncatedLength:120})),t.TotalReviewCount&&e.each(r,function(e,r){var o=new i,u=new c({model:o.set(o.parse(e.attributes))});r+1<=n?(s||!s&&r!==0)&&u.render({reviewStats:t,container:".js-reviews-recentReviews",truncatedLength:300}):u.render({reviewStats:t,container:".js-reviews-seoRecentReviews",truncatedLength:300})})},onShowComposeReviewPanel:function(t){var n=this,r=$(t.currentTarget),i=e.template(m,{text:"sign in to review this item"}),s=this.bvBaseInViewData(),o;t.preventDefault(),this.isAnonUser()?(o=new f({container:this.$el.find(".js-reviews-composeReviewPanel"),instanceNumber:1}),o.render({success:function(){n.showComposeReviewPanel(),n.$el.find(".js-reviews-currentUserNickname").addClass("is-hidden"),n.$el.find(".js-reviews-userNicknameInput").removeClass("is-hidden"),n.$el.find(".js-reviews-userEmailContainer").removeClass("is-hidden")}})):this.checkUserIsLoggedIn({success:function(){var e=sessionStorage.getItem("memberId"),t=sessionStorage.getItem("guestType");t==="R"||t==="P"?n.$el.find(".js-reviews-composeReviewPanel").is(":empty")?(o=new f({container:n.$el.find(".js-reviews-composeReviewPanel"),instanceNumber:1}),o.render({success:function(){n.getUserNickname(e),n.showComposeReviewPanel()}})):(n.getUserNickname(e),n.showComposeReviewPanel()):n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-reviews-signIn"}),t==="P"&&$(".js-reviews-userEmailContainer").removeClass("is-hidden")},error:function(){n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-reviews-signIn"})}});try{s.bvProduct="RatingsAndReviews",s.bvAttributes={containerId:"bvTag-reviewsSummary"},s.name="Reviews_Write_Review_Button",window._bvapiq.push(["FeatureUsed",s])}catch(u){console.log(u)}},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:v}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},showComposeReviewPanel:function(){var e=this.$el.find(".js-reviews-composeReviewPanel"),t=this.$el.find(".js-reviews-showComposeReviewPanel"),n=this.$el.find(".js-reviews-reviewFormTitle"),r=this.$el.find(".js-reviews-composeReviewTitle"),i=this.$el.find(".js-reviews-composeReviewTextarea"),s=this.$el.find(".js-reviews-rateLabel"),o=this.$el.find("input"),u=this.$el.find(".js-reviews-secondaryRatablesQuestion"),a=e.find(".js-reviews-photoUploadPhotos"),f=e.find(".js-reviews-addPhoto"),l=e.find(".js-reviews-submit"),c=e.find(".js-reviews-showTermsModal"),h=$(".js-reviews-reviewAlerts");r.val(""),i.val(""),s.removeClass("ratings--star-active"),o.attr("checked",!1),u.val(""),c.attr("href","#"),e.removeClass("is-hidden"),$("body, html").stop().animate({scrollTop:t.offset().top-15}),t.addClass("is-hidden"),n.focus(),f.removeClass("is-hidden").children("input").removeAttr("disabled").val(""),a.empty().removeClass("full").addClass("is-hidden"),l.removeAttr("disabled"),c.removeAttr("href"),h.addClass("is-hidden").empty(),this.uploadPhotoXhr&&this.uploadPhotoXhr.readyState&&this.uploadPhotoXhr.abort()},isAnonUser:function(){var e=Target.getParameterByName("anonymousPurchaserFlag")==="yes"&&Target.getParameterByName("orderId")&&Target.getParameterByName("productID");return e},showAllReviews:function(e){var t=new l,n=this.model.attributes;e.preventDefault(),t.render({reviewStats:n}),$("html, body").animate({scrollTop:0})},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=$(".js-reviews-currentUserNickname"),o=$(".js-reviews-reviewScreenNameInput"),u=$(".js-reviews-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.attributes.UserNickname),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t),s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))},error:function(e,t,n){console.log(n)}})},bvApiSrc:"//magpie-static.ugc.bazaarvoice.com/magpie-api/1.4/bvAnalyticsAPITracker.min.js.gz",summaryViewInViewData:function(){var e=this.bvBaseInViewData(),t=this.model.get("TotalReviewCount")||0,n=this.model.get("AverageOverallRating")||0,r=this.model.get("OverallRatingRange")||5,i=n/r*100;return e.bvAttributes={containerId:"bvTag-reviewsSummary"},e.bvProduct="RatingsAndReviews",e.numReviews=t,e.avgRating=n,e.percentRecommended=i,e},events:{"click .js-reviews-showRecentReviews, .js-reviews-hideRecentReviews":"toggleRecentReviews","click .js-reviews-showAllReviews":"showAllReviews","click .js-reviews-showComposeReviewPanel":"onShowComposeReviewPanel","click .js-reviews-signIn":"openLogin"}}).mixin([h]);return g}),define("models/browse/expertReviews/common-sense-review.model",["jquery","underscore","backbone","Target"],function(e,t,n,r){var i=n.Model.extend({urlRoot:r.Config.grootReviewsUrl,constructor:function(){n.Model.apply(this,arguments)},fetch:function(e){var t=e||{};return t.url=this.urlRoot+e.vendorUrl,n.Model.prototype.fetch.call(this,t)}});return i}),define("text!templates/common/browse/expertReviews/common-sense-review.html",[],function(){return' <div class="h-standardPaddingTop"> <img class="js-commonSense-logo" alt="Common Sense Media logo" height="72" width="175" tabindex="-1" src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwP/2wBDAQEBAQEBAQIBAQICAgECAgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwP/wAARCAEfArwDAREAAhEBAxEB/8QAHwABAAMBAQACAwEAAAAAAAAAAAkKCwgHAQYDBAUC/8QAaxAAAAYCAQIDAwUIBw8QBwYHAQIDBAUGAAcICRESEyEKFDEVFiI5QRcYIzJRd3i3NDhCYXa21hkaJDM3U1hxc3SBl7GytSUmJzU2OlVicnV5kZOzyNJDUmOYtMfXKUhWlKHwZ4OHo9Hh8f/EAB0BAQEBAAIDAQEAAAAAAAAAAAABAgMIBQYHCQT/xABMEQACAQIDBAcHAgQEAwUGBwAAAQIDEQQhMQUGEkEHMlFhcbHwEyKBkaHB0QjhFCNCcjNDUvEVJGIWF3OCkiU0k6KywkRUY4Ojw9P/2gAMAwEAAhEDEQA/AL/GAMAYAwBgDAGAMXQPLdmbu1BpqONK7U2XSqCzBIViDaLFGxTlwmA9hFkwcLg/fj3+xFJQfTPHY7a2zdmW/j69Kk3opSSk/wC2PWl4JM8LtrePd/dvCyx28GNwuCwkVdzrVYU1bxm19CPHYXWW4c09Vy0rD6/bReIgIJKU+oOGUOucB7diTFucVxIxB+PjTIoAh8O4+memY7pN3cwt/Ye2rtO3uxUfmqkoTt3qDPjW2P1LdF2zZyo4KvitoVoq6/h6E3Tl4Vqip0X8Jv5nI9k68LcfMJTeNb4exjAm4tmxWbfxFARAhzMoSuSHh8Ydh7e8CIf5PWsV0ucMrYTBxce2VWX/ANPsl/8AUfPMX+rTCST/AOGbBxN03b2+IpQvZ5O1FV8nrrfPPO9vJHPXW3oc5/c9Damak8Q+V71aLg/OBfF3+mKTaOAwmL+TsAD+XP4p9LWOt/KoUl4wk/KsvsesP9We90pPh2Bs6Mb5XxtaTtyv/wApDVcr5drPzMeuvupNYgyWgNXOkPTzvcLfbGKwiAD3FMriOkE/pj9gj9EPtNiPSzjErzw9Jy7FGSXfn7WVvkzdL9Wm9SqxVfd/Z7oc3HHVVL4ReDad+xyVu1ntdY68FaUMgldeOFlYgYwA4eVS+Q0yRMvbuJyMZmHr6gj39AL5w/2/tzyWF6XKMl/zmDUbf6arbfgnSS+cvie2YL9WmyXKMdp7Dx0E3nKjWoVVHvaqSoSfwT+WZ2Lrrq9cKr4ok1lrpY9YvVAIUU9jVSRjGBVTgH0BnYYZ6EIUDD28ai6ZftHsGez4DpH3bxrjGc6lGpLRTjxfN0nUS8ZWPpGxv1F9FG1nwV8fPAVFa/8AF0qlCCv/APqyTov4VLEhlK2HQ9kRJJ3X90q12h1CpmCSqs9GTzMvml8ZCqrxrlyRFQS/uD+EwfaADnuWDx+B2hT9tgK1KtS7YSUl8bN2fcz7Js/aeztq4eOL2ZXo4jDSV1OlOM4u/fFtH3Hv3+Hrn9Z/cMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAOGeUfUK46cVSOoi1WM1w2KmgJ22saOZtLWcqhiKCj8vLCunFVRsocnbxv1klRKYBTSU+A+pbe3z2LsC9OtU9pjF/lws2tOu9I2um1nPhzjCR8u3+6YNyujyDobVruvtrhvHCYe1TESunw8Suo0Yys0qlaVOF8uK+RX75BdXHlHuJR9FUOQZ6Hpq51CJMqQp77dHLYTiKfyleX7crpuuZIexwjW7EA7/jG7d8+Nba6SNubSbp4WX8NhnyptqVmudTKbaealB0++J1A3x/Udv/vI54bYbhsbZjdl7K1XEySeXFWqR4IXWUo06acb+7VepGHLykrYJNxN2CVlJ+adnUUdzE7IvZiWcnVMJ1DLyUku5eKiYw9/pHHPQauIr15OdWTlKTu+9rK77X3vM+DYmrXx2KeO2hVq4nHO96tac6tRpu7XtKjlO1+V7LRKx+hnCYGAMAYAwBgH2SnXK4a7m0LLr+2WSj2BsqC6MzU5uRr8gVUodiiovGOGwuSgAfiK+Mg/aA5/Xh8di8JUVbDVJwqxVlKLakle9lJNSjn/AKWj+vZO0dpbAxf8fsHE4jA43i4nOhUlScpWteag1GplyqRnHuJbeO3Wc31rk7KD3lCsN3VRIE0VJxuDOr7IZoETBMFPfWqKdcsahR+kYrlu1WU7dhcB3759I2J0obVwbVLaiWJodr92aV+Uks0lopRlKT1qI7E7m/qd3u2M4YTfGhDa2z0kva01Cji0klm1lh6zbu3lh7d7LA3HLmFoLlNDjIamu7R9MtW5V5qjzJQhbzAAb8b5SrrpQXKrYg9g96ai4ZnEQ8KoiPbPsmxN5dkbfp8WAqL21runKymvhdqSWjlByjfK98juDuX0i7ob/wCEeJ3ZxkKtWCXtKMr069JvlUoztON+UrOMlnGTVmdPAPf1D4Dnnz3cYAwBgDAGAcg8oefPDrhghGn5M7/oerH0yiLqHrkk6fTNylWgCoT35hSquxm7Y4jhVSMT3oGfu3mAJRU7gIZG0vEqV1fkfSeMXU94F8xrAeoceOStDvN1Iio4JSHZZymXN4giQ6rhWIrF5iK3MzqTZFMx1TsUXJUiB4jiUPXCaYt2ZnegD3+GUgwBgDAGAMA8a3tyG0hxj1/J7T3/ALPqGqKDE/QcWG3yqTBFy6FM6qcZEMigrJz8y4TTMKTFig5eLeEfAmbsOS6RbFZjkX7V/wAeahJSEHxl487B3SDcVm7e7X+dZ6mqjhZNQSEeR0KWMtdtko5UoeIvvKEUsID6lLku+RLx8fXrkR8PPaz+Xp3gnYcXeNzaP8Sgg1eS+znrzwCH4IBfIT8eh4yD6mH3fsb4ABfji77icS7H8/2Og9Se1vyBXTZrvjhm2OyUWTK7nNQ7QODhmgJgBZVGr3SveB+cpe4lIMs37j6dw+OLsvFF63X1/BYX4VdX7ghzxcNa9prbiMFs1ymY4ac2kzJQ9lK+Ht4gh4x67cw1uMAAJhCFfSJk0yiZQCAHfKmmW19MyTnKQYByxyt5q8YeEtFLsDkttyta2iXfvCcBFvVV5K3W563IBjx9Qp0Qi+sljdFMYhVDNmxkG4qFFdRIg+LI3Ytsr8ishvn2tSkRz+Qi+M3E6x21iioJI+5bnurOmouyF7h5vzHqcfZ35ElBDuXzJZFTw/jEAfTJdkvFdr+nr5HIbb2s/l6V6Cjvi5xuXjvEQRatpjZzV74AEfMKEgrPPEBMYBDsPu3YO3wHv6LvuHFHsfz/AGJCOOPtXnHi5ScbA8nOPt+0j715DdxeaHNtts1Fs4UUAijyThAi6tcIuMSIPiN7qhLLFAPQpsXYvDvXr1yLN2kd96Z5Ja9iNraH2VUtqa+mwEGNnqEqjJMyuCJpqrR0iiXwPoWYaEWL57J4kg8biYAUTIPplWegeR65lAwCv3zt9oR0BwN5PX3i7etD7ku9noMdS5GQstSf0lCBfEutQh7gyTZpTE00kAOzZTKaSonTKAqkN4e5ewjLl91at38P3OXK57V5xPn7FXoFXjVyAik52ehoRSUdyWulGsaWXkm0cMg5TRsQrKN2XvPmqAUPEJCj29cnEFwN2Td33fuWn3btqwauXz5y3ZMmTdZ28eO1k27Vo1bpmWcOXLhYxEUG6CJBMc5hApSgIiIAGaIV0uantLPCrjTOy9C0lETnLW/wzlZjJO6DMx9d1JGvkDqouGw7QfNJclhWbLkDuaGjpFocoiAOQMAgGW+wuS11Ia5P2tLlirKKKwvFbjwxhfNUFJhKWHZMpKAgIh5RFJVpKRDQVSh+MYGQFMPwKGLv1/uTij2P5/sSE8QvapdCbLssNSuW2m5fjypLLoMS7Tqc8rsPWjJ44UKmVezRZ4mKuFWiS9/pOEU5cqfcBU8sgGOVftF4vu9dpasg5yFs8LEWSty8ZYK9PxjGagp6EftZWGmoeUbJPY2ViZNiquykY2QZrEVQXROdJVM4GKYSiA5oHInMrqBcUeBVORt/JPakTUlpNu4Vq1Gjkzz+ybsqh5gClU6XHGPKvkPNSFM7xUqEcgp2BZwl3DI2kW2V3kir5vH2tiV+VnTLjZxEYGg27pUjWybwvbksjKtAN2RcHp1FZgjDKHL6iQZp327/ABDJdk4o97+n5PL9fe1sb9ZTDY+1uImobHX/ABgDxHXd6uVOm/LEw9zNF7M3u7AyhCiHYpyFAwh+MXv3Bdjij2P53+yLNXTx6s/E3qRQr9DT8/J1Ta1dj05K4aRv6LWLvsKwEyCCs5E+6OnkRb6sV6sCXv0euoKJhIDpJsZRMhqnfxLyutPXrsJOMpBgFWW7e1VcW6RdbnSXvGTkC9eUu3WaoPHrWT10Vq8d1icfwbl22KrYiqlbuVmBjkAwAYCmDv65niZXwJtXeT7P3OkODPtDfHTnPyb1/wAYKlpHb+vrPsZrbVoSyXJ/SVoBN3U6rL21aPckh5t3Ie8SLCFWTQ8CZgFbwgPYB7hbj3Xpe/h+5Obs7aWuNLUaw7M21eKxrnX9UYqSNht9wmGUHBRbUnoUXD58qikZw4UEE0ESeJZwsYqaRDqGKUaErlXTlR7Vjx/ocxK1fifo+075UZKLtUdj3qXPq+gu10VDEI8hIM0VMXadi1ilAxDOkIZQwD3AvbsI5uS8V3+u39iP2P8Aa0eWacmRWV4r8dncN5pBUYx1g2VHSfkB38whJVzKybXzjB8DCz8IfaUcXZOJdj+f7E4PT09oh4nc17nBad2HXpfjFuyzOUI2pwdznGNi19eppcU0m8FV9htGUORtYn6om92YyjFgLg3hSbrLrnKmZftKrPTX16+xYJzQInuevWc4RdP1w7qWyLu82HuVFt5xNKanSY2e6sDKpmO0G4OVXzKvUVBcfCbwybtF4ZE4KJN1SiHeNlyXWy9eu4rkbJ9rZ3g9l1x0/wAQdWV2AARK2DZt+tlwmlCh+Kq4+ajOlMEBP8RTKKvh+HjN8cl2Tij2P52/J950l7WzZSzbZpyP4hwitdcOEE3U/pK9v0JeJbCoUHDtOqXpo6azhyJdxKiEuxERD8fF2OKPevr+C15xG5lceOcWp2O5OON+ZXWqrLlj5lgoipF2qmTwIJruK1dK078MhATbYinfwnAyLgnZVuosiYqhtXT0HkdR4AwBgEOPOfrncD+DEtLUOxXSS3JuaIFdu/1PplBjZZSAkEwMBWV2s7l8xqNRcFWKJFmyztWTQ7dzNOwh3l0XJdbLz9eJX/2P7W5uJ5JKfcg4da3r8MAiVEdl7Is1slVQDv2VVTqkPTmbcxg7CKZTqgX4eM3xyXfcTij2P52+z8z+LRva2OQrOTbH2XxE01YoUDE98Qol7u1PlTk7/hRaubC1u7NM4h6lA6Rg+wR+3F2OKPY/n+xN5wv9oo4DcsJeIo1ymJzi/s6ZVbs4+v7mUjUKXMSbk/gSj4LaMYupWfPOb0IEsWHOqYQKmU5xAuL9pcn1Xn9SeohyKEIomcqiahSnTUIYDkOQ4AYpyGKIlMUxR7gIeghmiH+sA8j39t6I4/aO2/vSfipKdg9O61uuzJiFhztSS0tGUivSFiex0Yd6qizK/eNo8yaQqnImBzB4hAO45HkirN5lZoPa0+KQgA/et8iPUAH/AG11t9od/wD8R5LsXh2v5fuSd9MrrKaS6nlw2rR9bax2NrSd1XWq9a3yV9c1hynNRE9JvogysYavyj8yZo141TBUFQKAguXwiPrlTu7DJq6vkd9cnOWvHXhxrtxtLkjtSs6vqJDqto5SZcKrzVkkkiFU+RqlWo5J5YLTLiU5RFuxbLnTIbxqeBMBOC4tz5FWfkN7WjXI+VfRHFbitI2eLbLmIzvO8LaFYTkkSgJfNSoNPbS79skc/wBIhlplNQSdvEkQwiAS7JeK7X9Pz5I5tqPtavJhrMN1b5xM0ZO18Fu7plULhfqrMmbeIO6beSmj3BiVcCd/pGaiUR/chi77hxR7H8/2LFPTm63HETqJyCOv624mNN78Biq+PpfZK7AJCfQapCtIONdWlgcIa8oR6QeNZAhWkmRIDqmZgiQygVPt1GT6v7kxuUDAGAMAYAwD63b7fWKFWpq43OfiqvV68wXkpqfm3iLCLjGSBe513TpwYqZQEwgUpQ7nUOYClATCADwYnE4fB0JYrFTjTw8Fdybsl60S1byWZ/Jj8fgtl4OrtHaNWnQwFGDnUqVJKMIRiruUpOySS5srT81Or5dNjLy2ueLzmSoNBAyrCR2iokLO925IBMRYaugqXzaXBrj+I4EPlRYgdwFsBuw/Ct6uknE4ziwWw3KlhLNOeaqS8Gs6atnaPv6XlF8VM6R9J36kdp7XqVNidHjnhNkp8MsbJWr1lz/h4SX8mm3kqs06skm4QgnCq4SlVVnC7h05XXdO3a6jl27drqunjxysbxLOnbpwdRw6crG9TqKGMcw+oiI58oqVJ1ZOc3eT+7v8M22dWbNzlUm5TrTlxSlKTnOcnrKc5NynJ2zlJuT5tn48wUYAwD8SrhBABMuskiUAERMqoRMoAAdxEROYA7AGbhSqVHanGUn3JvyOCvisNhY8eJqU6cEr3lJRWWera5H+0jguUDoeJcggAgdApliCBvUBAyYGKICHwyShKD4Z+7Jcnk/kzdGpDEQVXDfzKTSalBOSaejTjdNPkz/K6yTYO7k5WwegeJwPkF7iPYA7q+AO4j8MsKVSq7Uk5Puz8jOIxFDCLixclSj2zfAs9M5W15HymomqHiTUIoX/ANYhimD/AKyiIZJQlB2mmn3mqValWjx0ZRnHtTTX0P8AeZOQYAwD+xXrDYKjOxdoqc7L1izQjpN7D2CAkHUTMRjpI5VCLMn7NRJwiPiIHiL38By/RMAlEQznw+Jr4WrGth5ShUi7pptNPNXTVmmruzTTV8mmc+DxeM2djae0tmV62G2lRlenVpScKkHdPKS/pbS4oO8JpcM4yjdFhXhH1hUpRxD6u5cOGca+W8mOgt3NGybOIeLiYqbZtsaNblKhCuVgHw/KrYpWRjgArpodxUH7Xup0lRq8OB3gaTySrfT+YkrWv/WkrJ+9G0ZVDuP0W/qShi6lLd7pHcKOLk+Gnj4pQozf9McTG9qE5LL2sf5E5J39i5Qg7ADR21fNm71k4QeM3iCLpo7aqpuGrpq4TKs3ctnCRjpLoLpHAxDkESmKICAiGfYoThUipwacGrprNNPRprVPkzt7GUZxU4NODV01mmno0+w/YzRRgDAI0OqX1Jtb9NXjq/2XPEj7Ptm3/KFc0Zq9Z0ZJe6XFJsQ6kjKEbnK9bUipFcpOphyQSCCZk26ZyruURyPs5jK13oZfe6t0bP5E7Uuu69zW6TvOy9gzC83ZrJKqidVZdUezePj24D5EVBRDUpGzBigBGzNqmRJMpSlDMmG7u7Po9dsVhqFhg7dUpyWrFrrEsxnq1ZYB+4i5yAm4xwR3HS0RJM1EnTF+ycplOmomYDAIfk9MeQWWa1NVrpScsLDzV4Dce9/3UWxtgz9bka3sNZokm3QfXagz8pS56aI2SKRFqNjXhCyRkkykSRM7EhCgQpQzSZyPt7SRHKQYAwBgHG3PHm5qXp/ccbhyH20qs9aw4Jw9Kpcc5Qbz+yL9JouBrtKgjuCqJoLSCjc6rp0YihGDBBdyYhwS8Bo3Yd70RmEc2+dPIfn9uOT3FyAtiskv57pGk0KKVdNtf6wryqvib1ukQKqyqbRFJIpAcvVRUkJFUoquVlDj6Qy3fwOPMhkYKMA9M0pVJe97o0/SYBV8hPW/aevavCuYxdZrJtpKwW2IiWriOdNjpuWz1JR2ApnTMU5TduwgOR6ZFiveVu1GxmikVBJJBPxeWimRJPxnOqfwJkAhfGqoY6ih+wepjCJh+0RHOQ0Rm9VTqUUDpoccnGzZhiztu2bu4kKtovWjlyo3Tt1wbtE13crNnbnTeN6TTW7pF3LKoiVU5VEWqZ01nSShY3bxGSV3oZkfIzkjuzlltmybt5AX2X2FsSzuFDuJKSVEkdDR/mnUaVyqQqQhHVirxZT+BqwaETRSKHcQMcTGNkw23mzw7APxgqkY3hBRMTf+qByib/qAe+Uh+TIU7c4H9QDkL08txx+19GWRf5LdumSWxtXSrtyahbSrzdXuvD2WLIcUkZEiBzgxlESlfR6pvEmcSCdM7zKnbwNQLhly61Pzk470LkbpyQMvWbkyOjKQbxVE07SLfG+BCzUizIomEG83X35vAb0KRwgZJwl3RWTMbSd13mn3aHUuUGZz7Rf9btyR/gxoX9R9EzL1My1Xh92Qg+NVP8IgbwrpiCiBu4l8KyYgdI3iD1L4TlAe4eoY8SeZPD1N+uTvPm7SKloDWj6f1Vx8h6PTovYjNq7NHWzeFzZV+KLZ3VzdMHBxa0BrYkVvk+FTVFN2UhHT3xnFJBtL31Nymm3w6EDwABQAAAAAAAAAA7AAB6AAAHoAAGDB84AwCwz05+vXs3gbwo29xzVrzvZ11ipOPccTnViXUc1PW7azmlDXthaTGdlfuaxXJIqEpDxbYCgu8euUjKJIiAgvbQ0pK2eq+v8AsQb7p3ZtjkVsuzbh3ffLBsnZNweHeTtpsjwzl0oHcfd46PblAjKGg41LskzYNE0WjREpU0kylAAwZbbd2eXYAwD1/QW9tl8ZNy6733p+fc1zYmsLIxsteftzmBF0LZQAkIKWb9/Kka/Y44yrF+1VAyLlquchyiA4Cdnc1teNO86zya4/ab5A07wEr24Nc1W+sWhV/eTRSs/EtnkjBOF/LSBV5X5Q6zJcQKACs3N29M0tDkeuWh7flIY62/8A+r7vf89m2v1g2LMLT4GZdZ+L8z1zgZyFi+KHMrjhyLsCMw5rOptnwtmtrOvoouZx9URTdRloYxLZw5ZN3Mg7g5BciKaiySZ1BADnKXuYDEWlK70z8j3TqTdUXkP1KdoLWPY8k4qOoK9IuD6q0RCSSylRpbDxHTbSkyYhGxLhfXbc3d5LuUgMBjCk1TbtikSB4hyvkur619ZfUjVwQYB8kOdM5FElFElUjkVSWROdJZFVI5VElkVUxKokskoUDEOUQMUwAICAhgFl+7+0j8k3HT+1Hx0184m4TlK3gpSj7h5LvlG6kuWnwi/ybUZeiG8Sqw7MtFa8sktMuS+YxcoHct/G6clVaLu1jbmmrrr+vXYVqpCQkJeQfy8u/fS0tKvHEjKysm7cSEnJyLtQyzt/Iv3aizt69dLHE6iqpzHOYREREcGM+Z+pgDAJW+jRzpsnBXnDq+znnHTXT+2LBB6o3lAnXP8AJD6pWmTSi4y1uGoiKXytr+bepSTdcoFVBAjhDxgkuoUzvNRefDyfnyNSjNlGAU4+v91t7Tr6w2vgfxAtq9es8akaJ5E7orj4UZuuu3KXdzqOhyTYfHEziLZQPl6TRODloY/uSIpLFcGLlu/gG+H+7y/f14UmTHOc6iihzqKKqHVWVUOZRVZVUwnVWWVOJlFVVTmExjGETGMPcREchxn+DGKQO5jFKH5TCAB/1jgApyHDuQ5Th8O5DAYO/wDbARDAuDFKYolMUDFMHYxTAAlEB+ICA+ghgFpToT9bu3cfLtTeH3K+5vLHx0t8gwq+r9hWmQUdSuibE+WTZwsLITT5RRZxqaXcqEbGTcHEIJUxFkjka+emF08DkT4snr2/Z+u7wv45oHEvUq+ry5xfon7+/VfZsj0KjJTJ+IT/AJJf8gZDiWhKr0leow36Z+59zbocU13sBzcePdo13WKki5BlHyF8cWunWCpL2F/4vNjq6xUhnB3ayJFXAo+JJIoHVA5Zo7o3FpXT0OPuVfLffvNTbkxurkRfJG7W+SMqhFMzHUa1alQRl1FmtVo1dKqdjW68xFQfCkiHmLnEVV1FVjnUMI23qc3YIMA+wVO2WihWmt3mj2CVqdzp05GWap2iCeLR81XrDDO030VLxb5udNds8Yu0SnIYoh8Ow9wEQEFk7rU1ZemBzFLzt4RaS5EP/cUbtOQjms7Sjo8pU28bs6mPVq9bipN00kkmbaYdsyyjZEgCVJm/SL3EQHNJ3RyO2q0Z39lIMAYAwDzva21aJpOg2LZmyZ5rXKjWGKj2RfuTAKqpgAQbR8c1AQWkJWRX7Itm6QGUWVMBQD7Q/h2ltLB7Jwc8djpqGHgs3zb5RS5yk8klqzxO3NubK3b2TX23tqtGhszDwc5zlyS5JaylJ5RirylJpJNsp+c3+d2xeY1sO1WO8qmmYCROvS9cpOBArk6BzFaWe6CgcUZezKJj4k0xE7aPA3hRAVPGqfrVvVvjj94sS0m6ez4t8FNPRaXl2zayb0SvGPuuTn+cHSv0sbX6Ttofw748NujQqqVHDXzqSi7wr4mztOomuKnTu4UnaXvVYqceEc9MPlAwD5KBjqJIpkOqsuqRBBBIh1V3C6pgIkggimUyq66px7FIQBMYfQAEc1GEpu0Vd+vl4sjklKMFd1JyUYxSblKTyUYxV5Sk3koxTk3kk2STcfOlVys3okwm5eBZ6XpT0qS6U/spN22nXjVUE1CLRVGaFCdVBZA/iIZ6MemPp2MIZ75sXo729tVKrVh/D4Z/1VLxus9I2c21lrFRkndTPt+5/wCnzpD3rjDF42nT2PsqSup4pN1pLJrhwsGpJSi3/jVKMotK9NkwmpuipxhppGrvZk7etxS6RgOsk/lBptWUHsHdMsFWFEZE6QG+ALSK3cPjn0vZ3RbsPDRvj51MRUsrpfy43XNWbqK/O1W3cdkN3v0w9HuyuGttqeN2riou/wDNqulSz5exoezjKPYqjqPtbO9qPw44q64RIjTuPmpory/D4HK1LhpeRAxf3Yyk22kZIyg/aYVRMP2iOe34fdfd3DWdPB4dzS60oKpL/wBU+KX1Pr2xuj3cXd6n7LYmx9m4aF7+5h6Sd+1y4btvm27vme4M6bUI5PyY+q1tij2APKZwcW1T7F7+EPAg1IXsXv6enpnlYYLB01w06VKK7oxXkj2mGFw1NcNOnTiu6KX2P15KhUWZTMjL0upyiRy+EycjXId8mYv5DEdM1SmD94QzNTAYGsrVqNKS74RfmjNTBYOsuGtRpTj2SjFr6o56vnBXiDsoDjbOPOr1lzgb+joOtt6lJEMYPVQkjVDQzwFRHsIm8fcRD1754bE7obt4qMo1MHRhxaumnSb8XTcG/iem7Z6MOjveB8W19i7OrVFpL2EIzV+anBRkn3pojz2/0P8ASNiSdPtL7EumsJUSrKN4iwmTvtUOuYB8lAQenYWVk2KPYPEV8uIfHwj8M9N2n0VbLrpz2dWnRnlZTSlFZ6Jrhkm9OKTqdtmfGN4/0sbn46Mqu6+MxmzMT7zUZS/iqDbWSlGs/aqKfKnWh9iGnkR07eUvGwj6Xs9HG60ZmKhjbA1sLqywaLZMSB7zMxhWyNirpBMfsJnLXyC9v6cOfLtt7k7c2GnVr0uPCr/Mg+KCWersnFJJXc4wV3ZXOtW+XQr0h7kqeJxmEWP2RD/8Rg+KoklbOpQt7andt6KrCKV5VEjhshyKFA6ZinIYO5TkMBimD8oGARAQz1GUZRfDJNSXJnyeFSFWCqUpKVNq6ad0/BrJn+shsCACAgIAICHYQH1AQH4gIfaA40zWpGk1Z6EsnTz6lFj41ScTqfb8lIWPj8/ckasXq5ln81qNZwp+zIgfpuXtIFU4mdx4eIzMBFZqAB40T/S9y9+sRsecdn7Qcp7Mbt2yhf8Aqh259aH9Wco/zLqr2D6GenDGbiV6W7e9NSVbcmT4YVJNyngL6W1csJ2xzeH1h/J92la8g5yHs0PGWGvSbGagppi1k4iXjHSL2Ok456iRw0esnbc50XDZwicDFMURAQHOw1CvRxNKNfDyU6E4pxkndSTzTTWTTP0FoV6GKoQxOGnGph6kVKMotOMotXTTWTTWaa1P6ucpynOPLLlNqHhjoW+chd3WAkFSaPGmVI2RMiedtdgdAdKApdTYKHIaVtFlfgVBqiUQKQBOsqZNuksqnG7FS+Rlq88ucO4OoJyJtXIDbr1RuZ74oTX9GbPFnFf1jr5m6XWhKbAJn8KfZLzzOH7oCFPISCyrg/qcClz5mG7vuONMEPtVFo1x2ddKprnXlblbjfLzYIuq0+qwTVR7MWCwzLpNnGRce2SATKLOXCoB3HsUhe5jCBSiIBm3ZamrX0zeJbzhBwe0DxumnTN/b6VVnUjf38eYFGTi/XKak7jbkWa4HMV0xipmcUYt1g8ILN2pD+EBMIZpaZ6nI7aLRHd2UgwBgDAM5b2kbmtKckOdMroaBllVNUcSEl6CwjkVTgykdtSaLV5s+wOURESmfxbkG8CQfgmSMUEoAKqnfOrJLL3fXqxXlyGSfno5dD+4dRkXG6tvT87qvinX5tWFTl4JBsS9bdnI5UpZqDoa8m2dx0JBQ490Xs4u3dEK6H3dsgsoRwdvdcjSjldlxWj9CHpR0WAawKPEGkWo6LUjZ1PXybulwsUkoUpQO9dSMvZFSN3awl7m90TbJgIj4SFAe2XhRq67F8l9znbkJ7Nh0z9xQ7wmuqPceNtsM2XCOsWq7lOSUUm/OBvIXlqbfXtphX7JI4h4kGox5zFDsVUnxxbsJk9Uvhl+30IIdKdB7ldww6pnC11ZWDLcnHVvvyFtzLeNLjHHyNHp68bSN6ZROzqu4UevqFMP1YFFNEyqjqLdLHBNB2ooBky5fZ61Ko2ldPLPx0frL6F9zNkMurrac1JHmtz821YI+ZNI6o05KyOk9ONm65lIr5tUyScMp+zsiiUgGUvFtSdvxVEoKC1FsmI+FIoBgk9bcl58/wAfAiQEQKAmEewFATCP7wB3H4fvYMF3ro3+z06fe6ipXKDnpUFr/ctiRUfbde6CmHT5hTqRUpJEr2Al9jx8eszd2i4zrI6Tv5MWW+To5soVJwiu5MoVvUr+ByWUf7vIsbWLpvdP61VVelTXCzi+pXV2nuQtWGkdewrxBHwEIJ2U1CQMdOR7oSkDuug5SXEQ7+Pvl4UXiZTV64vQrgeGNZd8seJKM6548JyjRltHWUo8e2CR00vNvk2UNZIGdeHcSclrh5JOUmKyb9RZ3GOVURFddFYfd5a3gRpPNalXrIYLNnsxHNWR0ty7nOJtmlVC605RxThxXWjlwUjOD3TR4t3Kwr1r5oHBEbjU2z6MXTS8BnTpJh4hHyihlWTNxd1w/H165GgvmgZnPtF/1u3JH+DGhf1H0TMvUzLVeH3ZCFkId69P7pzcjeo3tc+udHQSLKuQB2LjZe2rIi6RoGtYl6c4IKS7xBMVZWwSKaSgsIhp4njsUzHEE0E1V0xVFvPRF4jjj7Nb02dOVNow2xS7NydvB2qRZq5bGtNmrMUo+AOy6tcpFBnoGMgo84/iIul5RwQPxnJx7CF4e03ktEvP9voRB9dXoW6A4y8f5HmDw4gpqhQNAmYRpuDUziwS9oq6NUskm0gGF1qTyyvpOxxDyGsUg1SfNFHbpsu2d+amVuLc3nGreBGk1dZNFP7IYAd+4AAGExjFKUpQMYxjGEClKQpQExzmMPYAABERHsGCFrzpe+zWW7fNZr+9OdkvbNQa8nkW8nUdGVvyofa9oil0gXaS17mJBo7LryKflMQyUek3VmFkRMKpmI+Dx21/A5FFLralhqw+zz9JmdpTmntOM6tXeLR/ube9VzZ20U7zHufL8AS7aSmLdMxS8iB/p+F0xcNTG9DIiX6OXhRcuxW8PTM/vqFcOZ/gVy623xjm5k9nZUqRjpOmWxRsRmtaaBao1vPVGZeNUTHbtZYYx2Dd8kkYySb5usUgiUAzJiSs8tDi3BDS99nPtz609Jvj+zemMf5l2DbtNZnMUAMLBjs+0SrUgj3ETlQJM+WXv8CEAvwDNI5OSfd+xONlIY62/wD+r7vf89m2v1g2LMLT4GZdZ+L8zyXBCbvpU9EXe/UecIbKsUi80jxbYPlWzvachEC9sGwHTJYyL2E1NBPDt20v5C6ZkXUw5MEazOBykB0umZuFt2GlHnLQuJa+9ng6T1HqbesynHN7st+mgKTu6bE2Zsd5bZE4k8IuFlqxZarBMVe4iYAZMGpCiPoX4Y4UXLsXrxKjvXZ6T1P6bu0tcXHR8hPPePW9E7AhXoWzvxmJvXd5rBWLubqJpwxCOZivSEXKJPIpZ0AvCFTcIKnWFAF1BJJWuiBTIZPuOvde3nbN4q2tNZ1Odvd/u0w0gKnUa0wWk5yel3p/CgzYs0QExh7AJ1DmEqSKRTKKGKQpjACTeS1LtXAP2XTU1ZrULfeoDYZLY+wJBu2fraP17Y3lf11UfOIChoiz3KEUa2W7zCAHAi5o9zHRySpTFSM7T8Kxql2m0ku9/T14/I7i5R+zgdOvbmqLFA6K1ePHLbaMW9Vo1/qtwvkvFJ2BNsoMUzudctdhs8fM1lw7ApHfkJIvypmE6SwGKBRW7C5PJpeXkZ0FrrE5SLTZqVZ2R42y06xTdUsMcp38bGcrsm6h5ZoYRABH3d+zUKA/aAd8hxtWdj6+ZZRsAuUTCRZt2cIqB8U1kB81I4fvkUIAh/awQ2K9BWd7dtE6VuckoqtI27UuuLO/VXMJllXs/ToaVdKLGETCZU67swmHuPcRzS0RzSVpNd5zH1OOXaXBzhDvfkM2VbfPCvVca9rFm5FESv8AaFzcJ1qkgCC6SyLxGKlpAsi4RMXsq0ZKh3D44ehF2vRGUHMTExYpeWsNhk3s3YJ+Tfzc7MyS6jqRl5mWdqv5SUfuVjHVcPH75wdVU5hETHOIjmTj73qe+cSeLm0eZ/IXW3G/T7Juvc9jTHunylIAuEJVK8xSM+s1zsSjZNZwlBViGRVcr+WUyqolKkkUyqhCiKld2NG7h30MOnrxKpsNHO9JU/kDslJiiSz7X3tWYi+SU7KGRID1xD1GfSlafTYr3nxmatWTUV0UxKVVy5UL5xtcK5m9Orl5/M++cnujD05eU1TkYCycatd60sSzJZCF2No+tQmqLpXnqncyUkitUo9hCzyiSg+qMszft1C+gk+AgsuQvfrZ+u0zteotwI2h06OSdg0HsVySwxKrMlq1fsVoxUj4zY+vZB04bRk8izOot8nTDFy2UZSjIFFQaPkTgQ6iJklVM+Jhxs+5nCIgBgEo/AwCUfUQ9B9B9Q7CGDJpjez/APNWS5icAKgzu0waX2zx3lDaQvbx248+UmYyBjWT3Xlrf/RA5lZimu0GqqpzHUcPY5yoYe5s0nyOW/EuLn9/WZ3J1Kvq8ucX6J+/v1X2bD0CMlMn4hP+SX/IGQ4lof6EwFAREQKAB3ERHsAAH2jkBZ86Wfs5GyeVddrm+eYUzadE6QsDZtMU7XcK1bsdybJhHBSqs5t6pMtXbXWtVlEDgq0UctHUm+Q7KEboIqouD1Z+ByKNutr2fn8FmNP2e7pKkp41IeLiaq4sBZjcVdn7aNdBcCTwfKoSwXcrQsiBvpB2bA38X/ou3plsMuxW9c9fqUdusF05P5mpytPqutz0vbNP7BrCWxdOWKwe6nsZK2tJO4mVqlncMUGrF7P1KYZmRM5SSRB40UbuBSRMqZMudMjMklmtGRVYIX2/ZOLe/k+HPIqlLqKHYVHkeaXjiGH8GiNv13U/fU0g7iIeJxAeM32dz5UbXUXi/t+S1RmgMAYB/In5+FqsHL2WxybOGgICNezE1LSCxW7GNi45uo7fPna5/opN2zdIxzCP2BnDXr0cLRnicRJQoU4uUpPJJJXbfgjhxOIoYPDzxeKnGnhqUHOcpNKMYxV5SbeiSzbKcHP/AJw2DmDsk7eFWfw+jqVIOUtd1lUxkVJtconbrX6xtgESGl5ZPv7mgbxBHszgQPwp1jD1m303rq7xY5wouUdnU21CLy7nKS/1y5/6V7iy4pT/ADW6X+lfGdJm2/ZYNypbm4Oo/wCGp6OvJZfxVVdss/YQf+HTfHL+ZNxp8AZ6QfIhgHSvGPibuTlpcj1TVkKUsbGqoBbL7NEcIUymoL9jENKPkiCd9KKo9zoR7bxulgDuIET7qB7Fu/uztLeHEqjg4P2V/ek8oxj2uVna+iybbvwxajK3uu4nR7vP0j7Sns7dynGOHpNKtiqif8PQbzSlZp1atveVCElJqznKlGcZu1LxM6dGguKjVhNR8SXYG1k0Si92hbmbZxJtXJgIKpKjFG89hUGIGJ9H3fxOzB/THCnfOwW7u5OyNgQjUUVWx6s3UktH2wjmo6uzznZ2c2rI7/8AR50N7n9HlOOJwdL+L3g4bTxddKVXO140lbhoQdl7lJRva83KV5PvvPcj6wMAYAwBgDAGAf5MUDAJR9QHuBgEAEDAICAlEBAQEBAcPMZc8yKTmB0o9McgEpW46sRjtMbeX852aQh2AJ0W2PRIP0LbWWRSJNXDg5S95CPKk5KPcyhHH4ufOt5OjzZm14uvs9Rw+O1yVqcne+aXUbbfvQVrtylCbtb4F0k9AG6++vtdq7F4Nlb0yu3VpwXsa0rWX8TRVlO9or2sHCskkuNxvF1e9zaT2fx+vchrjbdVe1SzsSmXQIt/REVORvmiknNVuYSKDObh1zh2KskPiIb6CpU1O5A+BbV2Pj9jYqWEx1OUKkXzWTXJp5pp2dmm07NJ3jJLodvPuvt/czbEtg7zYd4baKi5Rz4qdWCdnUoVLJVIJtJ5KcLxVSEHJJ+V54s8CPgAiPoAB3EfsAPyj+QMB5K70Rap6M9P35W+PkpJbHklENR2STQk9I1KWbuDz0XGKGcnnp1o7UWD5Pp1idqEUj2BkzfSKq5IKaS5Sm7F9GmH2tT2O6mNk/4Kcr0k9f8Aqkr6Rl8pyvNLNzqd+/0y7L3x2duTOrt6pw7t15xns6hNP2tKi7ucuLi92hVk1PD0eG9ON5KShUhRpSxXm8VDWdOs+wb/AGOJqNJpcHJWW1WacdpsYmDgodqo9kpN+5UECpN2rZITD27mMPYCgJhAB+lnZHUzLesd1ULZ1Kd9GGtrSte4warkJGN0nSHZlGy80YwmaSG1bexKby/nTa0k/wChm5vEETGiRuUTKmcqrY5mZSv7q0+/rQh4wQeoiAABjCIgUpSlE5zGMIFKUhCgJjnMYewAACIiPYMA0AvZ9ej196zS4rmZyPrZEuSGyK+c2tabLte7zR2u51t2Fd+3XIAstl3eOVAz0A/CxcYqVmJirKvEy1LmbS4Vbn6y/JaBzQGAMAYB9buVnYUioWu5yo9ouo1uds8kPi8HZhARbqVeD4/Cfwdm7Q3r4R7fkHDyVypXdjHP2Fd5nZl/vWyLE7VfT+wblaLvNPFzidZzKWucfTr1ZU4iImOdw+NmFkjjbu2+1n69Ip8xsK6U6gV5Iy0/erZXKZCJEKJznlrRMs4OPApCgIm7OnxB7dh9MBK7Ue1mvtx20dTONOi9UaC16zRZU/U1Gr9Khyot02xnoQ7FJF/Mu0khEgydgkxWfOz9xFR04UOIiJhHNrJHI3d9x7NggwBgHM/NDbC2iuIvJrcbR4LCS1vonaVthHZe3jSsMRTJhxXPAI+gHUnStyl/fNkehY6mQp5iywiu5UMq5XMZZwscRMdVwsIqLqnMPcTHUVMJhEfURHMnH46ne3S649x3KXqB8VNJzzAJWq2LakVO3WNMBvLkKTQWzy+2tgqJAMJUZGGrarYw9hAAW9fTHcah1vDP18TWMAAKAFKAFKUAAAAAAAAA7AAAHoAAGbKfOAec7f1dU93aq2Np29sE5Km7QpNmodlZqpJK+ZD2iIdw7xREqxTkI7bpOxUQU7eJJYhTlEDFAQPNWKnZ3MfbZNEl9WbG2DrGfIdOc1xeLbQ5cqgCB/lKoT8hX3gmAfgJ148w/wCHMHG1ZtdjPunHDacro3kLovc0Iv7vKat29ru9tVe4lDtXLXFyLpNQQEO6LhmiomoHcO5DiGHoWLtJX0ubCyC6TlFFygcFUHCSayKpfxVElSFUTUL9vhOQwCGbNGZ97Rf9btyR/gxoX9R9EzL1My1Xh92QhZCGnv0CqlV6v0n+J7yuV6Hg3lwrtttlsdxce2ZOrLZ3ewbXHOZ+ccIJkWlJdWOi2rcV1jHUBu2SSAQTTIUtjp8WcjySXcvImMzRCL7rTpJrdK3m8RVMihQ0rJqAVQpTlBRGZhVkTgBgEAOkqmUxR+JTAAh6hkehVz8H5MyvcycZLT0LqdVL31VuJUBdK5DWqDLY7tOhDzzBvJxgzFY1ncbDXpE7J0RRuq6hp2Nbu25jFHy3CJDgHcoYNQ1+BqNZsowDO29qPQRS6lsKqmkQijnjTrBRwoUoAZY6dm2GimZQQ/GMRIgFAfyB2zLJLl4fcri5DJpG+zS/VUa1/Onun+OzvNLQ5HovXNk+2Uhjrb//AKvu9/z2ba/WDYswtPgZl1n4vzPNoZFJzNQrZdMqrdzMxLdwkcO5FUF5FskskcPTuRRI4lH94cj0Is2l3rzNkqk1OsUSn1imUuAiKpUavBRcFW61AMG8ZCwULGM0WsfFxce1Im3aMmbdMpCEKAAABnItDkep9owQqoe1lIpG4f8AGxcySZlkuR6hElhKAqJkW1tbhWIQ4+pSqikXxAHx8IfkzLD6nxX3KFeQwW0/ZLqhVpbkNyxuEpXoeRtNP1VrtnVLA9j2zqWrbe02S0oWMkG9WTOtGDNt4puk5MiJDKpJgQwiQRAatTcdH8PuXsM0BgGSv1Lmrdl1FudzRoim3bN+XfINJBBEgJpIpE2fZAImmQvYpSFD4AGZ5GZdY4ec/sdf+4q/5hsLUy9DYI4mftV+M/6P2mv1c1vLHqrwOafXfiysr7Wrtt9D6P4laOZPPCzv20LzsifZFMIGUT1pWY2EgDKl7AB0Re7EcmKHcex0QH8mR6mX1PF/v+CjPkMF0j2S/jvFnY8qeVktGgtMFk6voakSZylErKPQZpXvYSbcTEESLvnLuAKYxDAIJoCUQED5VqbjlG/a/L/cud5oDAKyftSnHKL2NwYp/IFpGgpcOOe04PzJRMgeaTXm0VEahZGDg5SeNRH50hBOCeI3hTMkft6nHvGLXi+7Mz6MyYLX3sm223sFyj5M6SWfilCbF0lCbCbsDGHwObLrO5MoVE6RQAey/wAhbDdmEfQPAl2ERHwhlWpuOj+HryLdfUq+ry5xfon7+/VfZsr0KjJTJ+IT/kl/yBkOJaEiHSYqNWvfUp4XVS616ItdYld51kZSvT7BvKQsmWPQfyrNGSjXZFWj9slIMUlBSVIdI4kADlMXuAw1HrL4+TNXbNmhgFJz2ulBEtq4KOSpJg4UguQKCi4EKCx0Un+pVUkTqdvGZNJRc4lKI9gE4iHxHMvUktF4v7FN/IZL1nsk37W/lv8An0qP6v2+Va/D8nIuovF/Ytr5ogwBgFcXrI8ylZOU+9H13K+GKjfcZbdsiwc+khImKi/gdeHOj6GbMkxSfyZBMPiUM3RMX6KoZ8R6TN6G6n/AcFJqMWnVa5y1Ub9kMm8s52zTptPpf+pjpLlWq/8AdpsaovYcMZ7QlGWt7SpYTLlJWq102vc9nBxlGrK0AmfFzqGMA7j4OcIbvzIvyjRBR3WtTVV21HYd9Kj3MkB/CuWr1nzSCi9tMk39e4+JJiibzlQERTTU9v3S3Txe8uM4VeGAg06lS2i7I9s3yWi60srKX1Xoo6K9p9Ju1mm54fdjDTSxOIWrevsKN1Z1ZR60s1Si085OKLhWptR690dRIPW2sK0xq1SgEPLaR7In4Vy5OBPe5SVdn7uZSYkFCeNw6WMdVU3xHsAAHZjZuzcHsnBwwOAgoUI8ubfOUnrKT5t+Vj9H9g7A2PuxsqjsTYVCnhtmUI2jCCsu+TespSecpyblKTbbbZ6Rn955gYAwBgDAGAMAYAwBgHOXJzi5qvldrp3r/ZkSU6qXnO6pbmCSJLPSZwyQppS8C/OQTEA3YCuWpxFs8RDwKlH6Il8Jt3YGA3gwTwmNj71nwzXWg+1dq0vF5Oy5pNem78bibvdIOxJbE3gpcUL8VKrGyq0KlmlVpTs3GSTaazjOLcJqUJNOm3ya40bI4qbRkdY7GaFOYCKSNUtLJFUkFd62KwpN5yHUV8XgUKbsm7amMKrNx3IfuAkOfrDt/YGO3ex0sHjI5axkurKL0afY7eKaaeaPzV373G230ebwS2BtpKSac6FaKap4iknbjhe9pRbSq07t05NZuM4Sl2D00eBzrlPeibG2FGuE9B6/mCBKEVKoglsm0sTJrp0tkuHhMrBsDCRSZVSHv4BK1AQMqcSe0biboVNt4v8AjcbBrZdJq9/63qoR8VZyfKLVvelGUfo3Qb0S/wDeFtRbf23GX/YzA1rOOixleD/wb/1UKUv/AHi2U5r2DbSrQLdDRo1YNm7Ji2QZs2iCLVo0aopt2rVs2TKi3bNm6JSIoIIIkApCEAClKAAAdgzsfCEKcFCCUYJJJLJJLRJLRLkforGMYRUIJKEVZJZJJaJdi7igJ7QR1iD8prhL8MON9n8zjfryf8radyg3QC13hsCBdmAIpk/bnEr/AFhSpFH8CBBFvLyifvI+Yi3ZnGXv4Fk7e6tef4/PyKv+UwMgLa3s7nR7Lt+dr3PrkzVhW1XVJT37jnr+daCDXYtuiHQkLtScZOU/C8pVTkEDFiERAU5KUSFc/du1KRzVn4G4qyu9fWf4+fYXrc0BgDAGAMA5j5sLqteGfLdygcUl2/GPfa6Khfxk1UdV2tRM4fvkOUByS6r8DUesvEyEWwdmzcPyIJB//bLkOFaHdXTIZtH/AFG+CbN+kRdmvyy0SC6So9kzlT2FBqkAw9w+CqZR+PxDIaj1vn5M1oM2aGAMAYBFj1t3Tpn0pebqzPxecbTyrYwk8fiBs9s1dZPB+gIGAAZuFO4/AA+Pp3yPQq5+D8mZZWZOMnd9m2bt1urLpxVZMp1GWtd5OWpjegorm13JtDKE/wCMLV0oX+0Ycc0ahz8PujSmzZRgDAMmrqjNGzHqS872rNIiLZLlZukU0kwAqaYrXOScKlIUoAUpQWVN6B8Mwvu/Mk+t8vJHCAiJQ8QD2EolEB/IICAgP+Acpg2OtMOFnentTunChlnDnWtEcLrHHudVZarxSiqhh+0yhzCI/vjlWi8Dml1n4mcH7Rf9btyR/gxoX9R9EyPU45arw+7IQshDUY6E/wBUtwr/ADeWX9Zt5yx0+L8zkfL+1eSJa80QjB60f1V/N/8AMlL/AOlIjI9Crn4PyMrrMnGTG9AP623iZ/f20/1N37HM1DV+Bp7ZsowDO79qS+spr36M2s/417GzPNmZarw+5XAyENI32aX6qjWv5090/wAdneaWhyPReubJ9spDHW3/AP1fd7/ns21+sGxZhafAzLrPxfmed1//AHQV7/n+D/0q0yS0ZF1l4rzNmVp+xW397o/92XOQ5HqfsYIVVPayf2nXG/8ASS/+W1yyMS6nxX3KE+ZMFvb2R7+rHzV/Nnpz+NN6yrU1HR+K+5eNzRRgGS91N/rHuen6X/IX9aFkzPL4vzMy1OF3P7HX/uKv+YbC1MvQ2COJn7VfjP8Ao/aa/VzW8seqvA5p9d+LKcftbjt4ffHDhichwj2+pNnO26gqAKZnju415F4QqX4xDkQZICJh9DAYAD8Ucj1My6q8X9iozkMGh17LG3QS6adlWSIUqzvlNtlV0cADxKKpVbWjVMTj8fotm5AAPyB+/mlz8Tf9K+PmyyTlAwCJLrttWzvpK800nQFMmnr6ruyAYQAPemG0KI+ZGDxdw8RXjdMQ+0RD09cj0+KL2+D8jLpzJxlg32ZFwsj1Sq4kkqYibvRO5EHJA7dlkSNq86KmfuAj4SuGxD+nYe5fyd8c0ahz8Pui851Kvq8ucX6J+/v1X2bNPQ0jJTJ+IT/kl/yBkOJaEmXRt+tI4P8A58ob/RE1k9fU1HrL4+TNVTNmhgFKH2ur/dJwR/5n5C//ABmoMyyS0Xi/sU2shkvWeyTftb+W/wCfSo/q/b5Vr8Pyci6i8X9i2vmiDAOa+XXIOK4wcf7/ALdfgg4koaNCOqEUschfly7TRvcKzGFKcSgomMgoC64AICDVFUwfDPBbx7YhsPZFbHu3tVG0E9HOV+G9ruyzlK39MWz0zpC3xwu4e5+N3nxSUpYelalC6Tq15vgo0ldpXnUlGOuSu9EUcpydmrRNzVnskk4mbFZJaQnp+WdqHVcyUxLOlX0i9VOoY5+67pcxgDuIFL2KHoAZ1NxNepiq88RVblUnJtt6tt3bdkk23m3bNtvmflZicXjcfiqu0NpVHW2liKsqtWo7+/Um3KbV22o3doxu1CKjFZRR/LzgOE9143cfbrye3BVdQUch0HU2uZ3P2AyHnMahU2J0zTlmkAMJUxIyQUBNukI93DxVJIAHxD281sDYuJ29tKngMMlxSd23eyitZO2dks3mr5RTUpRPatydzdq7/by4fdjZXFCVW8q1ZJNYehG3tKr4snLNQpRs+KrKN4uCm1dq0npihcf9Z1fVOt4hOIrFWYlbpfA76WkFex5OfmnXYDv5uZdiZZwsf1E5vCXwkKUodq9lbMwux8DDAYOKVKC1yvJ85StbNv4JWSSSSX6ibs7tbI3R2Hh93thUlR2bhocMVq29ZTnJ5zqTk3Kc5NylJtt3Z6tnkTzwwBgDAGAMAYAwBgDAGAMA5e5Y8TtbcvdbE19sArmNdRsm3mqrcYhFsax1OSIdNN6tErOCmJ5EtHAds6RP3SWTMAmKJkyCXwO8O7+D3iwX8JirxnF3jNJNx0urPJqSWaeV0pL3oxa9G6Qej7YHSRsL/ge3oyShUVSlWhZVqFRZcdKbT4XKDlCS0lCUoyTTse0621xTdR0Wsa31/Ctq/UKhFNoeEimpexUWzco+JZdTsB3L54sYyzhY/dRZY5jmETGEc8ngMDhtm4SGBwceHD01ZLV9rberk3dybzbbbzZ7PsfY+zdgbLobF2PRhQ2ZhqUadOnFWjGMVZJfd6t3bzKqvtEPWKDVULYeAvGK2CXaFoizMORmwq+9EquuapLNvwmrIWQbGAyV4tkcuAyyqZ+8XFq+R395cnBr/S+zkeSb4f7vXpfPsKLoABQApQAClAClAA7AAAHYAAPsAAyHGfOCk4XRN6TM91GN1Dd9jxz+K4k6fmmK2zZv8OyPsmxJeU/Y6gqzxMU1VFX6AkWnHaBg+To04E8ZHLpt3qzyNRXN6evX0NKuAgYSqwULWK1Ex0BXK5Ex0DX4KIZoR8TCwkOzRj4qJi2DUiTZjHRzBumigimUqaSRClKAAABmin9bAGAMAYAwDyzedIU2ZpPcWuEQ7q7A1ZsGkJB2791LXUpeBIHb079zPwyPNWLF2kn3mOmsxcRi68Y7TMi7jHC8c7ROAgdF0wVO0cInAfUDpLImKP74ZnXM47Wyep6horZzzSe7tObkYAYzzVG09f7GQKURAxxplrirAomUQ+1RJgYv7/fBU0mm9LmwfUrTA3mq1m7VWSbzNXuNfhrTW5dqbxtZWAsMc2loeSbH9PE3fRztNUg/aUwZvU1a2T1PsGAMAYBw51Mdbrbc6fHMygNkxWezXHPajmOQAonM5lK/VJCyRbUhSgIio6kYhJMv/GMGR6FWtu3L55GS4mbxppn9fpkIb17gP0igPr39ftzJxErXRE3FH6P6pXEa1y7hFrEWS8yeqJBy4VIg2bhtyrzev41dwsqdNJJFGcnWhhMYQAvbxfZjv7zcNbdqf5+xqWZsowD9R+/ZRTB7JyTpBjHRrRw/fvXShEWzNkzRO4dOnCyggRJBugmY5zCIAUoCI4Fr5LUx+uT+0g3jyV5B7mKYxktq7r2fsBsY5hOcWVqucxLx/iMPqYfcXKfr9uYWhmWcnbS55zr+pSV/v1EocM3Udy12utUqEY1RL41XD+yz8fCtUUyh3ExzrPSgAflw9AleSXejZCg4lrAQsPBMSgRlCxcfEsygHhArWNaIs25QDubsAJIh6dxzZtu7uZpvtF/1u3JH+DGhf1H0TMvUxLVeH3ZCFkIajHQn+qW4V/m8sv6zbzljp8X5nI+X9q8kS15ohGD1o/qr+b/5kpf/AEpEZHoVc/B+RldZk4yY3oB/W28TP7+2n+pu/Y5moavwNPbNlGAZ3ftSX1lNe/Rm1n/GvY2Z5szLVeH3K4GQhpG+zS/VUa1/Onun+OzvNLQ5HovXNk+2Uhjrb/8A6vu9/wA9m2v1g2LMLT4GZdZ+L8zzuv8A+6Cvf8/wf+lWmSWjIusvFeZsytP2K2/vdH/uy5yHI9T9jBCqp7WT+0643/pJf/La5ZGJdT4r7lCfMmC3t7I9/Vj5q/mz05/Gm9ZVqajo/FfcvG5oowDJe6m/1j3PT9L/AJC/rQsmZ5fF+ZmWpwu5/Y6/9xV/zDYWpl6GwRxM/ar8Z/0ftNfq5reWPVXgc0+u/FlUj2uTXi5o/hLtlBBQ7dvI7k1xKOQS/BIKyDOkWiCRUXAR7ndFipASFEA7eUYQ79x7R6mZdXwfmv2KWmQwXr/ZMtysZnjlye0Gs6QLLa93HC7OYsjqlB0vCbPqTKCcOUEBN4ztmctroxVDAXsQ65PEP0yhlWptdXwfr7ltTNAYBAf7SduBjrPpa7LqSi6BZXel+1hquJbGVKV2qRG0tdiTK7dHxeYok3h6EsVUwAJSgqBREBOXvGxom+4zbMyYLOXsqeu1rLz32zsE6SnuGsuN0+kVwVPxJBM3m706JYtFDiYoJnXiox+oUewiPkiHbsPcKtTUdG/D19C5v1Kvq8ucX6J+/v1X2bK9DSMlMn4hP+SX/IGQ4loSZdG360jg/wDnyhv9ETWT19TUesvj5M1VM2aGAUofa6v90nBH/mfkL/8AGagzLJLReL+xTayGS9Z7JN+1v5b/AJ9Kj+r9vlWvw/JyLqLxf2La+aIMArH9bffalo2rQ+PcO8OMNraIJdre3TMcqa9ytTc6UG1cAU4prDC1cBWKBg7lNJflAM+DdKu2fb46nsik/wCXQjxS0680nnzTjDhs8spzWZ0d/VPvZLG7dwO5OGk/4bB0/wCKrpcSTq1VKFCLs+GShTVSbi07OpTlk0iDrPkR1VP8nOVMhlDmApCFMc5jD2KUpQETGEfsAADLGLlJRirybsjFSpClTlVqNRpxTbb0SWbb7ki3F0neKKWhNCNtk2iLBvtLdzSPsssZyiUH1fpIkMvTquQxgMq3FRm4+UHhQMAGcugKYO6Je3ZPo73fjsnY6x1Vf85iUpZ8qesUrpNcXXeV7OMZdRH6K/p+6Pf+xm58drbRpcO8m1VGtWulxU6Vm6GHvm17OEnKaTa9tOo1lYlVz6EfehgDAGAMAYAwBgDAGAMAYAwBgEFPW76t0J07tN/c71e/jZfltuCDfI68ijii9R1jWlxVj323LOwETAf3FYFEoNosAJv5NMTnA7ds4TPG+SGiuzNmnJyas83MWWyS8lYLHYZR/OT89MvF5GXm5qVdKvZOWlH7k6jh7ISDxY6qqpzCY5zCI5kxzu9T+XgHd3Tr4C7X6i3I6u6N1wReHrrbyLBtrZKjI7uI1pr5F0RGRmnBe5EXc9Ij3axDETkF4+OUDCVEiyidLFXfcakvHDjrqbifpah6C0lWkatrrXsOlFQ7IDEXkJBwYRXlLBYJAqSJ5ayWCRUUdvnRilFZwqYQKQnhIXSVjTzPcMAYAwBgDAGAMAyxes1xQkeIHUS5A0QkUaOo9/s7vdmq1kmyyEa6o2z3rye9yjDrEJ56VVsx5GHVEvcCqsB7CICAjjuJPW/bn+fqRbYMlx/oNdc7W+q9c1ThHzPtqNKgaicYfQ28J5Q3zYY1525UWaa12NKeExoBGFduDJxEu4EWJGRitXKjcjdI56nY2mnlz8/X18S6PWrRWrnCR9lp9igrXXJZArqKsFalmE7CSbY4dyOI+Vi3Dpg8QOA+h01DFH8uaDTWT1PqW0dy6j0hWnVx3Hs2hatqzNJVZefv9sg6nGdkUzKnTRdTb1km5cCQg+BJLxqqG+iUoiIBhtLUqTehWm3/AO0t6ff8ntA6D4gRJbzQLHvbWFV3Jv23xr+IritHm7pFQ9ljdWV1+RpMv3LiPeD/AKtSKLZFACmBu1X8RFy5b7NArXS1by9dvkWmXrJpJMncc/bpPGL9q4ZPWi5AVQdNHSR0HLdZMwCVRJdE5imKPoID2zRDJH5+8X5rhrzG3/x1l2zlFnRL/LKUx05T8sZnXFjV+cWvppLt3IYj6qyTYD+ERAi5FCD6lEAwZkrS7tfXkckMH7+JfsJWKeOI6VinzOTi5FooZJ3HyUe4TeMHzVUogZJyzdokUTMHqU5QHBO9amnp0g+qpq/qJ6ErTOXs8JC8qaHX2EVujWLt20YTMpIxyANFNl02NOdJSbpVq8kHKh2yY/JLxU7RwUgAgo40ny5nJrmtPL1yJhcpCsz7QP1ateceND3vh5pO7Rli5MblhH1LvCVbfovjaU1tNtzsrU7s71qdRCMutqilVY+NjBH3xFBdV6qVEpGwuMt3yRb8OfPl+fwZ8BSgUpSlAAKUAKUA+AAAdgAP3gDIcZOD7PlxMkuTvUd1fZnUadxr3jMH3ebs/OQotE5avre6a0hxMqHkrPJO9uGzgEe4nM0YODgAgmbL3GoLPi7PX5ZpiZopmc+0X/W7ckf4MaF/UfRMy9TMtV4fdkIWQhqMdCf6pbhX+byy/rNvOWOnxfmcj5f2ryRLXmiEYPWj+qv5v/mSl/8ASkRkehVz8H5GV1mTjJjegH9bbxM/v7af6m79jmahq/A09s2UYBnd+1JfWU179GbWf8a9jZnmzMtV4fcrgZCGkb7NL9VRrX86e6f47O80tDkei9c2T7ZSGOtv/wDq+73/AD2ba/WDYswtPgZl1n4vzPO6/wD7oK9/z/B/6VaZJaMi6y8V5mzK0/Yrb+90f+7LnIcj1P2MEKqntZP7Trjf+kl/8trlkYl1PivuUJ8yYLe3sj39WPmr+bPTn8ab1lWpqOj8V9y8bmijAMl7qb/WPc9P0v8AkL+tCyZnl8X5mZanC7n9jr/3FX/MNhamXobBHEz9qvxn/R+01+rmt5Y9VeBzT678WR1derihI8sem7uCKq8YpK7A0wvG79ozFskRR4/da8RfmtkU2H+nHVkdfSkuVJFPxGXdFRIBRN4ex9pErprm/X7GYgUwGKBij3KYAMUfygIdwH/CGZOIkr6UHP2V6c3L6pbtcNpGY1fYWK2u93VmMAij+X1xOPGblxJxTZQ6ZHM/T5Zk3lGSQnT94M3O3E5SrmHBqLs7PRmobp7c2quQOu63tnSt9reytc25ilIQFrq0gnIRztJRMih265Q8DqNlGYn8t0ydJovGawGSXSTUKYgaTT0NWsfb7PaazSK9M2652GDqVUrse4lZ+y2WVYwcBCRbQgqOpGWmJNdrHxzFumHc6qyhCFD4jlFm9DN769PVAgOoRyIr9N01JOJDjTx9JNRNDmlEFWRNkXWbM1Rt+x0Wa5E3SUCqjHIMIYq4FVOzRO5EiQuzJEzrmST5LQgeyGTQY9l24nyOm+F915F2iOUY2LlRdm8nW03KKZVw1TrdOSr1VfEMP9EoJz9jkJp0BBApVWwNlQ8RTFEKu02so+OZMj1Kvq8ucX6J+/v1X2bK9CoyUyfiE/5Jf8gZDiWhJl0bfrSOD/58ob/RE1k9fU1HrL4+TNVTNmhgFKH2ur/dJwR/5n5C/wDxmoMyyS0Xi/sU2shkvWeyTftb+W/59Kj+r9vlWvw/JyLqLxf2La+aIfqvXjWOZun75dNqyZNnDx24VN4U27Vqkddwuob9ymiiQTGH7ADMznCnBzqNKEU22+SWbZJSjCLqSdoRV2+SSKFm99nPd0bq2rtd8cx1L5erBOtAFQygIQyj07WvNUxN+Kk0gGrZIpQ9AAvpnT/bWPntPalbHTverUlLNWaUm3wv+2/Cu5I/JTe7b896t7Np7yTaaxmNqThZtr2MX7OhbsToQptpZXbPJ88WevnVvCHRReRnKDVWs3rczitGmRtl3KAmKX5m1ACTEu2OoBDlIEuqkgwDxB2EXWey7pbH/wCNbbo4OavQcrz06iTlK/jFOKa0k4n0Hop3Ujvr0hbO2HWjxYCNR4nELPOhh3Gbjpa1Sq6VOUX1oTkXhEkkkE00UUyJIpEImkkkUqaSSSZQImmkmQAImmQhQACgAAABna+MVFWjlHs5I/UpJJWWSR+TNFGAMAYAwBgDAGAMAYAwBgDAI+epT1CdV9OLjfPbnvh2k5c5Uzmt6c1iV6RCX2Tf1GplmkekmUfeG1ahSiV3MvwDy2TMAL3Fws3SVN201GXPQy5+QnIDa/KXct933u20OrfsnY0ypLz0ouJitWiJCFbRVfg2XiFKJrVcjEkmcezS7JNmqJCFD4iODDdzxrAPYNBaG2lyd3FQtD6WrDq37K2ROIQddh2/dNukJgFaQmpp6ICjEVuvx6ajyQeqiVFq0ROoYfT1BJt2RqL9NDp46u6b3HCF03SQaT15mjNbJubZwsyt5TY19O0BFw7E5y+8taxApnM0hmIm8DRqAnEBcLuFFNJW8Tky0WhIZlIMAYAwBgDAGAMAg765PS0/mivHllY9YtGCHKDRSMvOaqWXBszTv0E/KgtZ9Ty8ooKXu5JsGRHMQusYyDSVSKU3lIunKpY+0WurGazY65YafYJypW2CmKvaqzKvoKyVqwRzqInYCbjFztZGIl4t6mi7YSDFymYiiShCmKYMyYzWT1P4oh39B9QH0EB+3APuFX2HsKkFMnSr/eacmcDAdKqW+xVxEwGAQN4kYeSZJD4gMID6evfGRVKSVk2l4n8edsNhtLoH1osE9ZnoD3K8sc1Jzrso/lK4lXTtYv8AgEMaEbb1bZ+rGyriBk4yeaKGSdQUnHzTVUg9jpOYl4hIN1Cj6djJqtgEP3wxrkL2z7MzY71bdmmzNZa62PH+X7hsCiVG7MvKN40vdLXX4+dbeUcPx0/Jfl8I/aGbWaucklZtd5X59oL6Tszza1bF8kdA14JTkzoyvvmr+rsE+0puTVKKi8s7qkcTxAR7dqi7UXfQqPYFXxXDlmUVFVWpAy1zHWXDz5fgzwl0F2q7ho7brtHbRdZq7aOkVWzpo6bKGRctXTZcpFmzlusQxFEzlKchwEBABAQyHGf069YrDUZuNs1TnpurWSGckeQ9hrcs/gpyKdpiBiOY6Wi3DV+yWKIfjJqFHA0zWp2JN9S3qHWOtq1Gd5u8opOtuGp2LmLX3NdiEdsjkBMzR46QlUX7tuKYeHwqKmDt6Ysa45dvkcTrLLOV13TlZZy6dLKOHTpyqo4cuXCxhOq4cuFjHWXXVOPcxzmExh9RERwZPuGuNcXzb98qmr9X1ObvWwrzMtK/UqlXWSr+Ym5Z6oCaLdsgkA+BJMBFRZY4lRbolMooYpCmMAJNuy1NPLo/dNqF6bPFtnQ5RSPmt5bLdsLvvm2R4lVaO7QVkZCJp0K57AderUBi5VaNDm/ZDlZ06ACA58smkvmcmSVloSu5SGZz7Rf9btyR/gxoX9R9EzL1My1Xh92QhZCGox0J/qluFf5vLL+s285Y6fF+ZyPl/avJEteaIRg9aP6q/m/+ZKX/ANKRGR6FXPwfkZXWZOMmN6Af1tvEz+/tp/qbv2OZqGr8DT2zZRgGd37Ul9ZTXv0ZtZ/xr2NmebMy1Xh9yuBkIaRvs0v1VGtfzp7p/js7zS0OR6L1zZPtlIY62/8A+r7vf89m2v1g2LMLT4GZdZ+L8zzuv/7oK9/z/B/6VaZJaMi6y8V5mzK0/Yrb+90f+7LnIcj1P2MEKqntZP7Trjf+kl/8trlkYl1PivuUJ8yYLe3sj39WPmr+bPTn8ab1lWpqOj8V9y8bmijAMl7qb/WPc9P0v+Qv60LJmeXxfmZlqcLuf2Ov/cVf8w2FqZehsEcTP2q/Gf8AR+01+rmt5Y9VeBzT678We/KJpqkMmqQqiZymIomcpTkUIcokOQ5DAJTEMUwgID6CGUyZunXV6TVl4I7xm93aprLx1xD3NZXkrW38W1WcR+m7rNuFn8jqywKE8wYuHWcnUWrjhcQTcMxFr4zrtTifNrZEkr+8vj69eRAVkMntmmOSvIjjm/eyegd57Y0y9k+3ymprW+WOpIyfh+HymyiH7dhIj9ndZI49vTBVKSyTy9cj+/unl/yt5HNG8bvzkfuvcES0V89pCbA2NZ7DAtlu4iCqEC8kDQyahRMPYwIdy/Z2wHKTVm8jnTBCVPpOdMLZPUp3/HV1FjLQPHmhScbKb42gmgogyjoQqxXAUStyCiZm7q/XBBMyLZInjFk3Mo8VL4EgKe+GpUr5vq+fd+TUMptPrGvajWKHSoVjW6fS6/D1Wq16MTFGOhK9AR7eKh4pkmYxzEasI9qmkTuIm8JQ7iI+uaNN3d2ck9Sr6vLnF+ifv79V9myPQqMlMn4hP+SX/IGQ4loSZdG360jg/wDnyhv9ETWT19TUesvj5M1VM2aGAUofa6v90nBH/mfkL/8AGagzLJLReL+xTayGS9Z7JN+1v5b/AJ9Kj+r9vlWvw/JyLqLxf2La+aIck88L+vrLh9yEt7NQqUghrachI04m8JgkbaVKqMhTH8YFSOJopiiHqXw9w+Getb34r+D3cxdXi4eKl7O/NOq1Tuu9cV/gehdKe26u7vRztrbGHt/E0dnVvZ3dk6koOEFfvnJFH1NMqSaaRA7ESIVMgfkKQoFKH+AAzqhOTnNzl1m238T8rKNKFCjChSVqcIqKXYkrL6H+8ychYM6FOr0lX2+dzvEDea2JW9YQSxyAJQIoU9qspkTiHchziaMKbt2EQL6+mfauiXZ6csTtKSTcYqnF2zTk+KafwhTf/mfadw/0nbCi1tremopcbnRwcL6WhH29SUf7nWhGX/hosU59sO5IwD/JzkTIY5zFIQhTHOc5gKQhCgImMYwiAFKUA7iI+gBgHNSXNHh2vawoiHK7jatdjOQYlqKW8tZKWUz4VhbgxLCEs4yRn3nh4PJBPzfF6eHJddprhlpZ3OlgEBABAQEB9QEB7gID6gID++GUyfOAMAYAwBgDAGAMA8O5Ici9S8TtLXzfu7rMjVtd69h1ZWXeCUi8jIuTCCMXXa9HmVRNL2WwyCibRg0KYorOFSgJiE8Rym7BGW71Fufu2OovyNsO8NjKLw1ba+8QGpNapPVHcRrPX6To6sfDNzdk0Xk/JD2dS78EyC8emHwgRFNFNPBmTv4HB+CH78VFSs9KxkFBRj+anJuRZRELDRTRZ/KS8tJOUmcdGRrFuRRw8fv3axEkkiFE51DAAB3HA7lqaRnQ56R8R0+NPF2rtqMZSPLncME0UvDoxUHaWpqm5Mk/Y6nrjwoqFO7TORJxPvEhAruQKVBPxN2iSqukubOS1lbnz9dhKLy75W6+4g6iltm3ZQr+SU86NpNNbOU0Zi62YW510YtgUwHMiyapEFd67EopNG5RMYfEJCH8Jt/bmH2DgXiatpV5Phpwvbik+12bUVdcUrO2SScnGL9A6SekXYPRjuvW3l27JyUU40aMbe1xFXhclSpp2ztFynJ2jThGU5tRi2dB1OfbWyrVq0shKLOy1+Gn2gkETEFtMxzaRQEphABEopOQ7CP2Z5TCYiOKwtLFQ6lSnGa8JJNeZ7vhcRDF4aniqedOpTjNeEkmvoz7Bn9BzjAGAMAYAwBgDAIfOpD0VeJnUa826WNq905yBRYosWO89exzA0rLINSeUyZbGrDgzSK2HHskB8CR11WsmimQiST1NEgJZLc0MnqVF9/+zM9STU0k9Pq+K1ryRqyXmrNJah3SMp9jFqVQxUSSFP2M4rxiSB0+wmSYvpEgCPooIB3yZk4Oxry/b6nDC/Rq6pTd0dopwf3eZVNUEjHQioR01E4iAdyPW06qzUS7j+OVQSfv5Pn8mOCXd81+TpPUfs63VT2m+ZJyukq1p6HdKkI4n9sbKqEckwTOIeJZaAqchb7UqBCj38JGQj9ncB9MZjgfNpeu4se8DfZi+NuhJWD2Py3tpeUewYpVtIs6CjFrV3RcNJICKhBfwjhdef2ODZwUh0/lJRpHqgAlWj1Cjlt2lSS0zfrl/uWd4+PYRLBlFxbJpGxka0bMI6OYNkWbFgxZokbtGTJo3Im3atGrdMqaaaZSkTIUClAAAAzQP28Aga6lvQK4v895ic25SpFXjpyQlvOeS1/qsM2k6bsOSFMxiuNl0UHEYlIS7pYpQUmWDhpIiBjHce+CBShGuwOz19evTKl+9vZ0uqLpmRkC17Uda31W2qgla2fTd4gXqj5LuYSqfNG4OancUFfAHcxCs1ilEewHNkJwPk15eeX1OSGfSI6nz58WOR4L8iU1zHIQFXlIOwY+JQTAUTSb523jikDwfSMKoFL6dxDuGT1oxwS7vmvySH8b/Zleont+Uj19xNte8Y6YsdFV/JXGzxl6ufuRlClXCKpNBfSrY8iRPuJUpGUjSiIepuwh3ufIcPa/XrvLinTo6RfFDpvQajzWUG6ve5piP9wtu+b4izd3iUbKETFzD1ts3IEXRKqquUxhYx5QVXASg7cOhTTMW2+ZdMloSk5QMApfdX7oac8eaXP/AHFyN0hGahc61u8JqxjBrWrZRq7OmcVHWdXqkwDyI+br8GxCy0Qt5Q+abzEvCb079gzzDjezutO/v7iM/wDnYzqk/wDAmgP8co/ySxbx9fEnD3r6/gu9dL3jvsjibwJ438d9uowaGx9YVGYh7UlWpYZyDI9f3SzzqBY+WFqyF6mDCWR8RvKIAH8RQ79u41KyNP7L6I73ykOJuo9oe/8AJ7g1yY0DqxKGX2HtPWkhVqmlYJMYaFUlnD6PcJlkZQGzz3JuKbY30/KP2Ht6ZHoVfZ+RRn/nYzqk/wDAugP8cg/ySyfP18TPB3r6/gkO6UnQi598QOfOheRO5YvTzfW+u3N5Vsa1Y2aM/OELP67tVZj/AHGJ+brH3sRlJhED/hS+BPxG9e3YVsyxXDm2tO/8F2PNAYBUW64PRl5sc9+ZUTvDj7HasdUVnpel0VZW5bCGry4TsFO2+QflLG/IMj4mgN5pHwK+Z9IfEHYO3rm2YavbNX+P4Id/52M6pP8AwJoD/HKP8ksW8fXxJw96+v4LjfRk4hbj4O8FaZx+3u3rLXYkJedkWB8jUZ75yQpY6z2ZxKRQpSvuMf5q5migCoXyw8BvTuOVGnol61JVspDPM2v7Nd1N7htbaVvhobQx4a2bKv1ohzudvmbuTxVhtsvMRpnCA1Q4oLmZPSCcncfAbuHce2ZSy5+viHG7bTVm32/g+oRPsynVFZy8Q8XhdAggzlox4uJdxmMYEWr5u4VEpfml9IwJpj2D7RyNXVs/XxIo5p3Wvf8Ag0XUCGTQRTN+MRJMhu3qHiKQCj2H7fUM2U/LgEFvXm6f/IfqGcedO6145NKW8s9J3J89pwl2tI1RgWC+Ztig/G0efJsn7y79/k0g8vwl+h3Hv6dsjuW142vZ3RVg/nYzqk/8CaA/xyj/ACSyW8fXxM8Pevr+CwL0COlTy06dWw+SNl5Isdcs4zaFM13BVUaPdxtjhR/Wpy0P5QJBH5Gi/ckSt5VHyzeI/jMIh2DthLMqVk81n+/cWbM0BgFCjmp7PD1Hd68w+U+66FEaRVo+3OQW29kU5WX2uMZKqVm5XaYnoU8nHfNhx7g/NHvieaj5h/LP3L4h7d8yHG7vdfX8HMC3sxXVLOiqQsJx/wDEdM5S/wCzKIepiiAevzS/KOPn9PyTgfavr+DQe0LTpnXejNMa/sZWpbDRtT66p08Vi4F2xLM1moQ8LKFZuhTRFy1B8yU8tTwF8ZOw9g79sqyVjUneTa0uesZSH0/YGvqPtelWXXGy6nAXqh3GKcQlpqVojGsxAzkU6APOZyEe8TVQWJ4ilOQe3jTUKU5BKcpTAGhT75x+ysoyUvM3vgNtOMrzJ4q5fhojc7uTVi40x/Et8n0jZ7BtKyabIVDeW3aTLNYyJCh45A32ZaYaT0yf0/b6kBOxeh/1U9ZyKsdK8Odi2YEzCBJHWz+p7Hi3BfXwqIuKlPyK5SmKHfsqkmYO/YQAe4ZCcEu5/Ffex/KovRW6p+wpFCNiOFe24VRwJAB3fSVzXkYiBwKIGcP7nPQyKRS+L6XxEPXuHoOPmOCXO3zX5JvOGPsqWxZmViLbzp27C0+soKIO3en9KPjT9uliFEwqRc/siQZN4CtpGEC+MYtrKqKEESkXRN2OFsOFc8/Xz8i5LorQeneM+sq5pzRGv6/rTW9UQFGHrNcamQbgqoBfepKSdrKLyM3NyJygd0+eLLu3Kn0lVDm9c0lYt7nr2Ac18y9W2veHEjk1pqikjlLrtXQ+1te1JOXe/JsUex2+kTUDDEkZAEXHuLI0g+TBVXyz+WTubwj27ZHoValCAvsxnVKApQGE0B3AoAP+zKPxAP4JZPn6+Jngfavr+DtDp2+z/dQ7jRzg4zb72fFaWQ19qvZ0da7atA7SGYmE4hrHyTdU0dF/NpqL50KrkgFT8wnfv37h2xZlUbO7a59vY12F6PNAYBWz6/vS75VdRiY4uveNjHXzxDU0ftptbxvN0+aRk1bk41+rC/JpfkiU9+KYtbc+aP0PLEC/HxekeoautUmV2v52M6pP/AmgP8co/wAkslvH18ScPevr+C0D0DunbyP6dund+0nke0o7Sc2Ls+v2ytkpFsG2NTxEdU0Yd0Z85GLiwaOPfSCBSeE/cvr3DKtTWkbd7+xPhlIRR9ZqfWhuFMqwRMJfnRs3XMAsUB7CduSTcz6hR+0S94IO/wC9+9nz3pMqqnu06beVStFf+mM6i+sEfAf1MYyeE6KMTTp3vXxuDpu3+l4mnKXw4Yu65oqTZ1rPzxGAW5OjjVArvCiuyhkgIvdr9sG0Kqdg8SqRJr5uMxE/YBMQGlfJ2D4B3HOynRnQhS3ZjVirOrWnJ5c4qNJ/WB+in6bdnywPRRg6s1/MxOJxVa/bGWIqKD/+HGHhoSo59CPvAwCkX7Tb1KNqMdrtOn3qG2zNJosHTa/beQDyvu14mXvc3cmxpas0F7Js1iPPmZE1c7Z+7akMmnIOn5CrlORsn3y8/AN2WWrKdfkI9u3kpdvF4v6WX8bv38Xw/G7/AG/HBx2LUvQx650zx2nK5xH5jXORmuP047aw2rNr2V64kpPSUu7WSbMa7ZZV4qq6caoeqHAiaqhjmgVRAQEGQnBBe3gcifFk9e38l91s5bvG7d4zcIu2jtFJy1dNlSLt3LdchVUHDddIxklkVkjAYhyiJTFEBAe2aB+bAGAMAYAwBgH8Wx2OBqFfnLXapiOr1ZrMRJWCxT8y8Qj4iEg4dmtISstKSDo6bZjHxzFudVZVQxSJpkEwiAAOB3IzUetb1ZrB1HN1Fp+u30jD8S9QzD1DV8Abz2SmxJ9LzmL3b9rZH8tQzuSbmMlCtFi/6mxpxHwlcuXImz3kk/6Vp5+v3IRMhk+BECgJjCBSlARMYR7AAAHcREfgAAGAXgfZ1+juaix9Z6g3J6pCndZyOTlOMmu7GxEqtPr8o27o7mnIt2mBkrPYmC3+t5NUvdjHq+/AHnrtjoVK/gbStr1vL9/9u0tZbm3FQdCa3s+09lTRISq1ZiZy5V7Aq+kXh+6cfCQrPuCklNzDsSoNkCep1DAIiUoGMX+Hae08JsjBTx2Nlw0YLuu29IxvbNvJaLm2km14PeTePY+6WxMRvBt2qqOzMNDilLNt8owhFZzqTk1GEIpynJqKTbKWHLPlDe+XW15XZF182NiEiOImi0ojkXEfS6oKomQjkxDsg4l3/Yq0i6KUPeHHoX8EmmUOrm8e8WL2/tOWNrS/lp2hFX4YxTyUdH3ttJyd20sox/MPpF382t0mbentra0XRwSjKnhsM2pKhRk9JWbjKtUspVpRvFyShGUoQjJ28uC1oVuXDvjdPrKisq41FT2Sqom8QnUhIxODOYR+HqaN+H2fDOyO6VSU928GpXcoUIw/+HeH/wBp+jnRdtN7Z6N9hbUk+KVfZWGk32v2Ubv5nV2exHvgwBgDAGAMAYAwBgDAGAMAYAwBgDAGAfHYPUO3fv8AHv698A+cAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYB8dg/J+Qf8Aq+GAfP7/ANv5f7Xw/wAuAMAYAwBgDAGAMAYAwBgDAGAQ0dcA5w4sUVMDCBFN3VrzCh27H8urXI5O/p3+iYO+fLOlltbDw1v/AM3/AP01Trh+qO//AHcUo3ye1MPf4Ko/NIqw518OgQwC6D0wm6bfgfx1KmHYFatNuT+hQEVXV1s7hUR8IB3+mp2Dv69gDO0+4kFT3Ww0Y6Xq/WtUZ+mvQZFR6I9gW57Pg/jJyb+rO9M9vPq4wDPU9p+4tX7WvOtHk6rFvHmrOR1KpbJhZUGyhoyH2DretM6ZMU+RcgXy20k6rsIxk2wHEAcpLLeX4hQVAuXqJaJ8tPXzK0+QwfAgAgJRABAQEBAQ7gID6CAgPoICGCFtroK9cM+n3VQ4Q8xLcJtSvnDOu6G3LY3pQDV71yr5Mfrm/TDxQvbXrxdQqUTJLn7QiglbrmBgZM7MnbwORPiyepepKYpylOUQMUwAYpiiBimKYO4CUQ7gICA+ghmwfOAMAYAwBgFD72hzrEBu+xWDgfxltnvGmqhKgy3/ALAr703ue07lDuiqG1xCvm5ilf0GnSaADIrFEyErKogQnjbNSqOMt38BJ293nz/H5+XaVPchgYBZV6AnR9U5i39jyx5DVw48XNXWApqhWZZqb3fe+xYVwVQGJkFigR1rWnPEynlFR8SUk9KVgQDkK9FK2vlyNRX9T+H59f76B1jsVco9blrNZZOOrlXrUU6lZiXfqps4uIiYxuKzhy4UHwkRbt0E/QAD7AKUO4gGcWJxFHCUJ4nEyUMPTi5Sk9Elnc4MXi8LgMNUxuNqQpYSlBznOTUYxjFXlKTeSSSu2ynT1AOcFg5hbKFCFUfQ+j6Q9coa6ra4nQcTS/0m7i+2Vt4vCExLJdytG5u/yezN4P6aosI9Z99d66m8eN4aLlHZ9NtQi8v/ADNc5Pm/6V7kf6pT/Njpg6Vsb0l7cdLCN0tzcHN/w1PNSrTV08VWXJyTaoU7Xp025TftKjhS4Az0g+RF0PpiKCpwO449/wD0VQlW5fUR7ptbjZW6Yh3+BRTSDsAegfAPTO1O41R1N18NKWrdX6Vqh+mnQXFR6IN3oLqx2bTivCN0vojvLPbT6wMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwCH7raRgu+IUHJFKJhht00dc4gAj4En8ZZooxxEPQA814QPUPt+zPmnSnQ9ru/Sn/oxN/wD+Kr+x11/VDT4ui917N+y2nhH4cdT2f/3lUvOuh+fowC410nZ9Gc4J6cQROUxq6tea047D3MVePvdiWEpw+IG8t2UQ/wCKID8Bzs90d1XU3VoJ9aM6q+dSU19JI/Sj9P8AjKeM6I9kezd1Rp1aL/uo16lN/WJI3nvB9kGAeDcl+NWnOXOmLnoXe1Sa3DXt3YGavWpwKlKQskmU4xVorEp5Sq0FaYB0YF2TxMPEkoHYwHTMdM8YMxjqb9NPcPTS3s411dyurVqy2LSMppLcTdiZtD3+tNlCGUjpApPGhDX+tJOEkpeNE4+AxiOEBUaroqmhlq2mnr13/QjcyEPgxQMAlMAGKYBKYoh3AQEOwgID6CAhgFyboJdcoYQaZwX5oXLxQ3ZlV+Ou9LTIesP6osoTT2xpd2b1iQDwoV6XcKd2oARg4P5Hux0KnbwNp8Ts+t5/v5+Ot17NAYAwBgFV72g/rFk46VKZ4ScZ7QUu/wC+Q/u+4b3BvSGX0vQplqYDVyMdNxEzTZl1j1uxTgYqkPFnFcABw4bHRy+zkG+H+71n+Pn40Hf+v/CIiI9x7iIiIiIiI/ER9RHIcYwUld6R/TBvPUt5CI1tYstXOPWt3MZNb42MzTFIzSJXUMswoNYeqpnbDebqRsomh3A/uDMqzw5DAmRNW+GpYq+b09ZevwaeGt9cUXT9CqOrtY1eJpWv6HAx1YqNVg2/u0XBwkUgVuzZNiCY6qglIXxKKqnUWXVMZRU51DmMOtDWpD/1yLxKwWgtV0iPlHrJpf8AZy3y8yaOVG6UvD1avPpQrORImYgu49OXcNFDJG7pmVKQTAPhDt8s6VcVUpbIoYenNxU6jk1/qUUlZ+DmpLsaTWaTOr/6q9rYjB7k4DZVGdSNLaG0406qjJxUqdOjWrcM7NOUHOnTUo6SulJON0VgM6+HRMYBdb6cEWvDcG+NTFwAgqbXDN+PcBDuWXkpKWTEAH7DJPQEP3hztfudHh3bwturKMpLwlUnJfRn6edCmFqYPoj3dw9b/FjsnDt+Mqal9ztrPZz6gMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwCPbqnU8LhwZ3aUiRlnVWYV68NSFL4jANVtEPIvFA7epQTiyrmEQAfQBD7c9N3+wssXuviIw68XCXwU4qX/yOR8g6etnR2j0S7ZTTlLD4dYlJduGqQr+UGU086tn5pDALO/Q0v6Utoja+tlDh71RNnFnm6Zj91Bir3CNFiHIQRE/kll4F4HcPogI52A6KccquysRg5STnTqxnbsjOPAl86TfxO9f6VNrxxO5WO2Ha0sDtKbV3m4YiMa3F4e1dWK5e6yb7Pqx2hGAMA5d5h8QNKc4tE23QG9a4WaqtkS95ipZt5aNko9qaJrBCXWnyZyHPFWGEXWEyZwAUl0TKN1yKN1VUjxq6KvozMF6g/ADdfTq35LaW22zPJwzz3uY1bs1iyUbVraNKK5Mi1nIzudcjCZZgJUpSMOoZZg69O50ToqqZMSVvA4YwQ+BDuHYf/wDA/lAQEPUBAftwC5j0UvaCK9Vq1WOJnP26uI1pBpNYHUPJOxLOXzIkSmAIRlI3FJD57pn8nFAqEfYVQMgCHhSfmSBP3k1TtlyNp8WvW8/38/HW53X7FX7ZCRdmqs5D2auTbNGRhbBX5NlMwkvHuC+Nu+i5WNXcsZBmuQe5FUlDkOHwEc0NNT88vLxMBGP5uelI6Ehopos/lJeXeto2LjWLYhlXD1/IPFUWjNo3TKJjqKHKQhQ7iIBgLPJalUjqwe0ea51XDWXQ3ACwRWzduOyPoSxcgGaaEnrLWv4zVz8wVlSqM9j3JI3j8p2mU8EzECqAo9MIpJ5vfQNpd8vXqxRan5+dtc7NWm0TUrZLNZJV/O2Gwzr9zKTU5NSjlR5JS0tJPFFXb+QfOlTKKqqGMc5zCIjkMZvN6n8nAOqOGHD7b/OnkJSeO2l4wF7FaHPvc/ZHiK565r2lslkQsN8tblAhxbQ0I3VDwph+GeujpNUCnWWIUQSbfcal3Czh3qDgpx6pPHfTEZ7vX6w3M8nrA7RRJP366P0kPnHerQul395m55ygUe3iMRq2TRbJdkUEyl0lY35HVuUFZfrn7DTltvaU1g2ckWJTaLPXCTQKfuLWRukw3jGBVCegEUNG1Y5w+PcigZ8G6WsbGrtHD4KLd6VHi7v5ks14pU4PwZ0g/Vdtn2+39j7vU5RcMPhq2IqLnGVWUKVJ/GMKxBlnyI6pH41gVMkoRuUTuDkMRAhQ7mOucBKkQpQ9TGMoIAAB6iObpcPtI8fUur+HP6HDiFWlQnHDpvEuLUEtXJq0Uu1t2SXMvw6HqHzA0lqGkil5ClU1nR6+uj8ATcxVbjmjoO3YOw+8pnzt/sPCvA7GwmDfWpYanF+Kgk/qfr1u9s+OydgYLZcElHD4SjTstFwU4x+x6xnlDzAwBgDAGAMAYAwCOrmr1V+EPAYPkzf23WiewFWZHzHUVEZHuu0nrVUiarddesxipUq81doqlOg4mHMc2XL3FNQwAPaXRbc3kiAzYPtcGsWUg8baq4X3+zRhFDAxmL7teuUpy5SARAqi8DA1W8+7Cf0HsD4/YPy5Lsl49/r4n0WE9rrKCpfnJwRWFDubxjA8gkTLFD6PhEhZLUqRDiAd+4CJe/p6hi77hxR7/p+x2dpz2qXghdnDOP21rTfGj3bpVJJWTXgYPY9UYgcex1ncjUpclk8hPuHcU4c5u3f09Mt+0Xj2/Nfi5Ovxw5o8U+XcMec42761xttugkK76MrU8kS1RCAHKn507SpUkdcIBMxzABTPWKAGH4d8Jpls9eR07lIMA+n37YVE1XUZy/7LuNZoNIrLM8hYLbb5uPr1eh2ZBAoryEtKOGzJsU5zAUgGOAnOYClATCAC01CV8kVxOSvtSfCHVEq+r2h6Fs3k9IsFzoHsUQVrrLXLrwegnjLHbWruzSJCn9PGSCBA4epFDAIDmeLsF49t33evK5H6t7XNdxkfG34O1csR5pRBsvvSVPJCiAfSAXiesyNQVMPqA+QJQ+Hr8cXZOKPY/mdm8fvas+I98l2cJyB0jtfj8DxZu2+dcQ/jdwU5iZQSFWeTBoZhWrexYpCImEW0Q/OBQ+A5blvF8/n6ZZM0zvDUPIfX0JtXR+xqntHXlhJ4oq10+XbS0aqsVNJRdg6FE3vEZLswWKDhk6Ii7bHHwqpkN6Yui2seqZSDAITOZ/Xs4X8FeQlr41bjqPIOWv8AToqqzEq+oFFp85V1Gtwr7KyRZGclMbGrr9ZdNg/ICwGaEKRXuBRMAd8l9e4Oy1fmc2QftSnTjnp2DgUaVyqZLTs1FQiL2R1nQko9mtLv28ek7fqobbcrpMmyjkDrGImcxUwEQKYQABnF3MLhbtfz/BZGzQIOubHtAnAXhzMy9DYWiY5E7ZhjuGkjSNJBGTMPAyiHhA0da9hvnrWoxTkhxEiqDRWSetlCGKq3IYO2S/YXJdb9/XiQxzftc9nPLGNW+DcKjBAoHgSnt6vF5hRID9xE60drNFi3VMn6dgIqBTevcQ9Ml2Tij2M7m4q+1JcPtxWOMp/IbW934tyEq5bsmtxfyrTZer0HCoAUTztghYuCsdbbKriBSrKxCzVIDeJZZMgGMFv2hOL559/r8FmeEm4WzQ0VYq5Lxdgr87HMpiDnYSQaSsNMxMi3Tdx8pFSbBVdlIxz9osRVFdE50lUzAYphAQHKD+pgDAIk+anW04A8HJiSpOwtnu9ibXiTqN5LU2mI5verbCu0/MILO0vQkYypVJ4msTwqtpCSQfJgPi8gQ7d5ctra5EItx9rnq6Ttwjr7g9ZJFiRRQGr+6buiYN05S7h5Si8VBa+sabM4l7iYoPFuwj2AfTuMuyXj3+vmfoV/2uqMFQhbXwTlSJCBAUWre/WDlRMe4+MxG8rq1iVYPD27AKpPX4ji7JxR7zvXSPtQvTq2S7YRezo7dHH1+6MQjiTudKRt1PZmMIAPmTmupKyzPlAPf6Z4pMoF9R7fDLct4vn88v2+pOto/kdoXktVErvoHb+vdu1g5EDLSdEtEXPjHHcFMdFrNsWbg8jAvzEKIi2eot3Be3qQMXTK014HtWUgwDx7eXIDSvGnX8ptLfWzqfqihRP0HNkuUshGtVnRk1FUo2LaiJpCdmHJEjCixZJOHi/hHy0zCGLpaizZW13/AO1ccUqPKu4bj5ojau+StVXDf51WGSjNP1N4dM4kSdRKckwtVtesVgDxALmMYKdh/FzN+wXitXfw/c49ae1zXcsj43/B2rqxPmG7t2e9JRGSKiJvoADpfWazU6pCfH8CUDD/AOri7HFHsZIjxl9qK4L7flWFc3nT9lcXJeQcFbpTtkTabE1s3E/cqYyFuqKCM9GFOoIB5jiDTbJgImUVIUBHHF2hOL0eff6a+dixtTbpUNiVeDu9BtFfutNszBKUrtqqswwn69ORqwiCT6JmItw6YP2pzFEPGkoYviAQ+ICGavcrTWTPs2CDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAfRtm0plsjXN81/IAmLO7U2y1NwZUviImnYId3GCsIflRFyBwEPUDFAQ9Qz+LaWDhtHZ1fAT6tajOH/qi19Ln8G1cBS2rszE7MrpOhiaFSlLwnFxf0ZQPkYeQrslKV2XIdKWr0nIwEqmoQUzpycI9Xi35DEN6lErtqcM6e4qnKliJwnHgmpZxvfhvnb4aM/IJ4PEbOqVNmYxuWMwlWdCo2uG9ShOVKbtyvKDa5W0bWZ+nnACVDo/bnR1dy2Z0+UdEbwW7q08opjLKGKkS1RhzWGpGKTv4POdqNnbMoj8Tuih9odvo3RptRYHb8cNUdqOIi4PLK7s4tv8AuioRWedRn339Nm80Ng9Iz2TXko4XbGFdFXb/AMehxVqKS0vKDxCbyd+BZ3VrcudkD9DxgDAGAcXc8eCmkOoPoSf0XuiLFMFfNlqFfYxs3PbNY3ZNsqhGW2tOFvCBzJePy3jI5gbyLQx0Fe3cpyRq5V2PQzBubfCjeHAbfdl0FvOE91lo3xSlPt8ck4NUdmUlw4VRiLtTpBdNMHUc9BMU3CBuzmOeEUauCkVTMGZMNW8DkbBB/wD8/wCvAOhdM8tuU3HRBZpoXkXunT7BybxuYrX2x7RW4Vwf4ideDYyJIdU4j8RFARHBVKSyTyPz7l5gcr+RDRKN3vyS3ft2KRMB0YW+7KtVggkjh37GJBO5I0OBg7j2HyO4d8Byk8m8jnIAAAAA9AAOwAHoAAHwAA+wAwZPnBT0TUmpNk732TT9Qagp8xfdkX2YbwVVqsG3Fd9IvlxEx1VDj2QYxrBuUy7t2uYjdo2TOqqcpCiIAk27I03ekd0vqH00+PyFcV+SrTyD2Igwmt67LapickhMJEMowpFUWXSTdNaHTiuDpNimAqj5yZV4sUpliJIaS5vU3orL165EsWUH+TnKmUTHMBClATGMYexSlKAmMYxh9ClAodxEfTI3bXQd5Ry5s7lT35yo3Nspk496gnVpVrNSW8IkA9SpaZa3CrFKJjABJAGCjsOw9hFyI+vfuPU7ezav/GNu4jGQbdGU3w5prhSUYNW04oRg2v8AU2flj0qbyx3u6Rtq7bpNSwir/wANRdmn7HC3pLXVSq+2qRaycZpq+r5Zz1s9BOguKGslNx8ltHa4Buo4aWHY9dVmQTJ5nlV2BdBZLAsoT7USxEQsU3/K7dw+Oec3bwD2ntvD4JWaqVYpp8439/4qHFL4HuPR1sKW8u/+xtiqMpUqm0KdSpblTw7eIm5f9MvZKD/vSyvdXs87dH6tjAGAMAYAwBgDAIJOu91RpTp5ceoSpahetE+TO/TTMLrt6um2eE11U4lFBO27Ocx63mkcSEepIN2cMismKCz9cyxvGRookplvkXRXZm42Wy2O52Kct9wn5m12yzSbuasdnsck7mZ+emH6xnD2Tl5V+qu9fvnSxxMdRQ5jCI/kyHHrm9T+GJygYpBMAHP6EJ3DxnH8hC/jGH+1lAUMCIgVb8CY34pVgFIxv7RVPCI5AfOATYezya/VvnVi48LF95I0o0PtLYMoq0UUSHyILXs6wjU3YpHT81mpYJpmUxD9yCYQ7gPYMGoavw/b7mmpmynke+N46142ae2FvXb9hRq2uNY1t3Z7TMqlBQ6bNsZNFswYNxMQX0zNSC6LJi2KIKOXjhJIn0jhhu2YMxjqddVDfPUr2s+mLbIyVM0NXZZybUeiY+QV+b1cjEjqIsbBbCImTQtexJBqbxu365TEbGUMg0IigUCjjxMuV8lp61Ivu/w/KYxSgH2mMcQKUoB8RMYwgAB8RHBD3wnFPlIpUgvyfGrkAejGa+/FuBNN7FNWRZdvF74E2Fc+TxbeH18fmeHt698ZF4Z9j+R4IICUxiGASnTOZNQhgEp01CGEp0zlMAGIchgEBAQAQH0HBDvjp59RTffTl3VHbO1JMO5OmSj5gjtjT7+QXTpuz60iqJXDZ607qN4y1MWyqhouXTT95ZrD4TeY3Osio71qWLtlyNRjjTyJ1lyx0XrbkLp6YGaoGzq41n4dVUpUpCMcCY7WYrs21KY4Mp+tTLddg+RAxipuW5wKY5PCc2k7m2reB7nlIZpftH31tm+P4DaK/VNWcxzfivIk+Xh92QYAoqiILNxErhExVkDAPhEq6RgURMBg9SiVQoCA/ZgyWPepz1/dwcpdd1XjnxulbBqrUhNd1GK3LemSziF2Bt+3LViMJdINo8bKEe1TWjSZM4agiicryaIQyjg5GygNct3bM3KVn7nz9evvXAKUCh2KAAAfYAdg9R7j/wBYjkMH+sAYBcj9lx6gtqPa7X09dlWJ1LVleuzGy+OoyjlV0tW3kKsR1sPXMUdUqihIOQjXRpxm38ZUGarV8JC/0R2CrU3F3VnqvIuwZoFV32i/qz3Li9BQfDPjbanVX3Rs2tDZtsbAhHJEZ3WutJNRdhDV+uPEFDOYe53tRq5Od12ScR0WkVREfMdpKo5bvkG+FX5vQoQKKKLKqrrKKLLrqqLrrrKHWXXXWOKiy66yhjKrLrKGExzmETGMIiIiI5DB/gBAxwSKPiVEO4JF+koIflBMvc4h/gwD/JjkIfy1DAmp/W1B8Cnx7fiH7G+P72Uh/vIUtG+yiUBWb5ub52AYjkrCh8cl43xoqqptTTV3vtYQYg8TIYqS6gRNdf8AleMBEv0hL9uVao1HR/D7l/bNFOP+dXNTU3APjjdORe3VlnUbAFSialUI9wg3ntiX2VScfNqkQJ1yqJpPJVZsdRdwYihGTFBdychyoiUY3bxHe9DME5v87uQ/UB3HJ7g39a1n4g5dpUbXsUu7b6+1dXlle7au0uDWWVTbgmgUgOn63mSEiqUVXCpzCABky3fw9fU49bNnL102ZMmzl69eLJtmbJm3WdvHblUfCk3atW5FHDldQ3oUhCmMYfgGCHuFo4t8nKRWAu1z45b5qdNFEjj52WTUGwYSuA3VJ5ibg01I15vHkQOn9IDmUAvb174yLwy7GeEAIGADFEDFMHcDAICAgPwEBD0EMpCYzpF9W7anTd21FQ03KzVw4nXScbJbX1Yo4VfJ1oj5VJu62XrdmuqCMTbodHsq6bJCm3mmyYordlgbrou/majK2T6vkaatOt9Z2BUqze6XNsLLT7nARFpq1hilgcRs5Xp5g3lIeWYLdg8xpIR7pNVMRAB8Jg7gA+maWeZXkfY8AYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYA/tfHAKc3VU0oppzmFd5Bo1FvWtwNm+1IA4ABUTPpUwsLi0RKQPAmZtZmaq5i/YR4Qf3WdZOkLZL2bvDVqQjbD1/5sbKy/mNuV32+0VTLlFRPzd/UHuw92+k3E4mCtgtrU44unnl7RKNLERiuSjJU6ku11yOPPRD4qf1IOcmavOQtnrr5SMsFbl42fgpFExyKMZiGeoyMa6KZMxT/AIF43IYQAQ8QAIfAc58NXnhq8K9NtThJNNapp3TV+a1T5OzObDYvG7PxVHaOzZ+z2jhqsKtKWdlUpyU4N2abjxJcSuuKN4vJsvP8Wt9QXJfROv8AcEIZFJWyQ6SdjiklCKHr9vjf6Bs8EuUiiopGYSyKnlgYfEdAyZ/gcM7a7v7Wp7b2VS2hBrjnG00tIzWUkr52bzjdK8XF8z9Wdxt7cDvzupgt58BlTxNFOcLpulVj7tWlLhbXFTqKUJK7zR0Fnmj20YAwBgEfvUb6dOk+pFol3qXaSPyBaoQ7ua1PtiLj2zu1aytqqBEvf2HnGQGTrsuVFNGXijqpoSLchfpJLpN10Y1fPmMrWehmk83eBXJDp+7Zeaq5B05WNIu4dmo+xYZN091xs6Fbqdk5ul2FRBFNcxkDkO4j3BUZJgY/gcIkHsIzzMuLXgcaZCDAGAMA6i4kcM+RnOHaTLUnHDXcpdp85kFrDOGIoxpNCh1VSpqWG+WtVI0bXYlHxfRA5jOnR+yTZFZYxUxFUW9NDRl6VXSB0f00KKaSbqM9nck7fFIN9kbqkI0iB0ETgRdela4YuPNcVejNHJQ8f0vfZZUhV3ZuwIN22kub1N5LJaEvmUgwCOzqcclycdOMVmTh3xWuxdrFea5oaZTE96bHlWZy2eyIkN6+XXa8qqcqgCAkdrNw+JgDPSd/NuR2NsGcYO2KxF6cbapPKctHa0Xwp8pyhyPj/Thv1/2G3ExFbCTUdu46+GwqyuqlSL46tna6oU1Oq+1xUdWkU2yEKmQpCB2KQpSlDuI9ilAAD1HuI+gfbnWCUnKTlLVs/NCnTjSgqcFaEUkvBZI/1kNk4/RA0mexba2RvmTZ+KL11XiUasOTgYoDa7gCbubVQES+FQ0dWGhEj9h+iEh6/HPr3RTsp1cfV2rNfy6MOGOluOeSa53jFTTXZOLO1P6Vt13jNvbR3yrx/k4OisJRef8Ai1uGrXtyajTVBJrnOaLN2feDvGMAYAwBgDAGAMAzg/aZ9hTtv6pFsqcm5UVidT6b1HUq02Mbuk1Z2CDX2HJnSKHoUzqWtygnH4m8Ad/QA7Y5sk+Xh93+Cvoqfy0lFADuJEznAPy+Eom7f4e2DBqFdK/pt8RONfErQs7WNR67uGzL/quhbDve47PWYW1XG0WK6VqOsz08bPTDR6vCVliaUBvHsWAtmpWqKZzkOuZVZSpJq7OZ+43GJIxc+OnH3YzJaO2DovT14YOCCmszt2s6XY26hBL4PCZKXhXhB7F9A9O4fZlsuwnFLS7sQ8cpfZyOnDyFYyb6g0WY4w310Rwq0s+l5JVCt/KCvqkrL61n1ZOpOmCRu/dCPJEqG+xYvxycPYHZ6r7evijmHo59FXenTe51bl2RsufpWzNVu9FPqdqfZtZXUjH76asF8rchJMp6kyCykrW5xnX60Pmimq+j1COuyTk5wEpCvcJJJ2epaKzRCkR7VVzWkZW8an4HU6YMlX6vFx+690t2axi/KNnmDPWWs6xJlAhBFGChUnMwZLxGTUPItDiHjRL2y3mJZRt2+vXgU88hgu9ezfdJ3XH3LIbqCcg6bF3K53Z/I/e5Vi0RzWTg6TUoV84iVtoDEvirtnVxskyzXLFLrJd41g3I5Q7quiqJVK/gbS4Vf+pr16+HaXCc0Cop7SV0sdbSumpvqAaNpsTUNka7ko1TkFGVuPaRcbsSiz8k3hx2A/YNBQRUutRnX7YXbpNEyz+NcrKOTiLQhhy1z5B5r/q+3r8FGfIYLjfsovLuQZ2ve/CKzyp1IWXifu9aoaO3IeWwmo1zG1rZsLGom7mMMyxexcl5ZRApBZOVO3iUMI1a9xuOcbc15evMu0ZoGaX7R99bZvj+A2iv1TVnMc34ryJPl4fdkGGDJ1twx4Q8iOe232WmuO1OGfmSpJSNrtMqqpGUbXVcOsCKtlu9h8lZONYlHuVBumRZ8/WDymqKqg+HAiuL4F1njP7LZwj13WY1fklbdk8iNgqNyHmjMJ99q7XTR0okmZVrBV+sLltC6LRfxFK4ey6hnBQA4oI9xIF4e02lFcr+JHt1kPZ7dLcceO1w5XcMX12iWOq0kJzaOnbVOObnGr0VRygzkrTSJ1+mayR7+qnXI5eM3i71Fyw85UiiB24EXNW8BZPTJlPnIYJL+jbc5SidUfhFLxLhZsvKbwg6U7MiYSmWidgR8pS5VsoJRARRXYzhwOHwEPj3+GPyah1vg/I1VM2UypOsTsCe2V1Qebs5YXart1C73tGvI8VTmP7tX9YA1oEAzS8Qj4EW8ZXk/CUPQBER+IjmDMut3WXl+SP6j1xO43amVBWSQhkrbbqzV1Zh0JQbRKVhnGMQpJuBN3KCLAjwVTd/TsT1w9AldpdrNY7jD0+uIXETXtb19prRevIoIKMZs39zlKrCTWwrdIoIJkeWC2XOSYuJyWlZNyUy5yisVsgZQSN0kUSkTLpJG+JrJZI9M2HxN4ubaYuY3Z/HPR1+aO01E1iWzVlJnFeyoCBzoun8Is7bL/SEQUSORQo+oGAcWXYXil2shE5Z+zJ8DN3spKX0Epa+KF9VIKjI1QeO7rrBd0InOb5V17a5FV22SXOIFD5KlYxNEvcQSN6FyW7DNovVfLL9j7J0IOlvvLpryHMGP3sNMmX2wLVrCO11dqTLmkYm10qpQ9pdu5JJm8SZzcCdSYs4JLNHzdNQirYRTMqkJVDFe+ZbWja+d/8Ab7lhnNEM6T2k/mvJciucTzj3Xpcy2qOJTdSmosG6hwZSe35tqzfbJnHSYlKJ3sH3bQSYD3KkLBcSdvPP4s6u5Jf6fXq3mV1TGApTGMPYpQEwj6j2AA7iPYPX4ZDJot9BPpO664n8fKDya2xS4ud5V7orMfdkZewR7SQdabotmaJyFXp9QBwDgISwv4Fwi6m3qYJPRXcmZCJUkBBSpczk6uS15/gsTKpJLpKILpprIrJnSWRVIVRJVJQokUTUTOAkOmcgiAgICAgPYc0Qoee0mdLXXnHGVqPNbjxUo6la82dbBpG5qHXWKEdWK1saTavZat3SuxTQCNoaOuiEe7bP2qCSbVGQQRUIAGdmKGXl4CSuuLnzKoeQwX/vZbuXT/bvEnYPF+2Saj6x8XrWzVpxnbkqjg+pNkjJSsLGoJmDz1G9WtkbKoAcTGKk3ctki+EpChlXYbWcV3Zfj8fAtC5oDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGARR9XbjavuvjefYVbjjvb1oly8ubRJskdR3JUhw3Ije4tNNJMyjg7Zg3SkkyiYCgLAwAAibPnfSPsP8A4psb+NpRvicLeV+fs31/BRajNv8A0xklqfAv1FbkVN69xZbUwFNz2zsibxNNRTcp0lG2IppLOTdK84R0dSnAqSlMBigYogYpgAxTAICBiiHcBAQ9BAQzrc007PJo/O6MozipwacWrprmnoz5yGiV7pT8y0OO211tV3+UBrqDcEkxQM+eOAIypOwxBJhCz5xV7JNYiwJeBjIHAxCkOVusbuUhxz6T0eb0R2NjngMZK2ArtXdsoS5Tb7P6ZvP3bSbSp59g/wBPfSYtzd4nuztioo7tbUqRUZSlaNDFu0IPPJU8QrU5u6UasaTUX7SclbXzsYm3qfoSMoGAMAYB5FvDQemeSmvJnVG+dbVTamvJ4ofKFYt0YnIMyuCJqpoSca4AU38JNMyLn93fMlm7xuJhFJUg+uHmCqRy69lFqc7JSdo4Tb6PQ03aqjhDU+8m0jY62xMoJ1DtoTZNfQXtDJgmIgRFF/GSixSgHjdG+OZsxaL7U/mQrXf2c7qxU545RY6IqN+YoKHIlL0fcWuHDZ2UoHMCiDCyzlYnSFOUnp5jQnqIB8cmZODsa+v4Pij+zodWK5PGyL7Q9ToLFZQhFZe87g1y2bMynAhhUXYVucs04oUhTeoJNFB7gIfHGfYxwd69fAmj4leyhViGkY2y81uQCl1TbKlXX1Xoho/r0C9FMSKJt5jZdlap2NyzUMAkWRYxUasYvfy3RR7CFs+ZVGKz1+hay0Jxz0Zxd19Har4+6uqOqKFFj5iMBU4wjMrt2JCpqSc3JLGcTFjmlyEKCr6QcOnioFADqG7BlSsW/I9pykGAfyZ6dh6xCy1jsEkzh4KBjnkvMysguRsxjYuPQO6fPna6ggRJu1bJGOcR+ABnDXr0cNRniMRJQo04uUpN2Sildt9yRw4jEUcLQnisTONPD04uUpSdoxjFXbbeSSSu2UrudvK6R5c73mLs2O6ba6rKa9U1ZDuAFIyFYbujKLz7tuHolLW14UHawCJjJIgiiI/gs6t747xT3h2tKurrCQ92ms1aK0uv9Tbblks3w5qEWfmL0s9IdXpI3uqbUouS2BhVKjg4PnTveddrlLESUZJNtxpRppqMuNHGOepnzM/Iii4dLt2jNss8evHCDNiybF8xy9eu1iNmbNsn8VHDtyqVNMv7o5gDN0qcqs1Tje7fY345K7yWeSuR+0bjTowdTETlGEIK3FOc5KMIRu0uKc3GMU2ryaRd44N8dycYeNWvdZOk0wtRmalqv66XqVzebMCT+cJ4vEfxJxf4JgkICICi1J2ztfupsZbD2JSwclbENcdT++SWTaSvwRUYXtnw31Z+pnRduZHcLcfA7uys8dCm6mIkr2niKr460ldtqPG3GKu+GCjFZJHXOeyH0EYAwBgDAGAMAYBnce1CaYnaD1GmG1nDZYa1vrS9Hl4iRBFQGhpzXibihWCI88S+Wd8xYx8a5OQB7lSepj29czzJLk+631/crh5DJYC6cHtCXJzgvS63pK/1OJ5H6BqyRGFWgJyYcVjZFDhSCqZODqV5TaSrR9ANTLfgGMqxdC3TIVFu4bogBAuZpS5MtIcd/aROmdu8rCPud8uHHK0OiIJqxW56m7bQIPlRKU6DW8VA9prINSHH0XfKx4CAdzFL8McXaa916NeX7fUm417s7W+2q21uWrL/AEvZFSe/sSzUSzwttgXBvAU4kSloJ6+YmUIU4CYvj8Re/qAZrXQNNan3nBBgGTt1TdwO97dRXmPsZw/WkWjve11qsA4WN4jEqmun46+q7Yn0jlKkhCVlEAAoiX8g9sx3mZ9bwy9fE4GKn5xioCoVEFzkRFc4gBEAVMCYrGEe4AVIDeIR/IGDOppoaG6ufSL0hpHUGnIXmnqBvF6s1lRtfs02jG5JIGSqNajYMVwKSqdjHcnYiocw9zHOcTGETCI5pZKxyuzd0428V+T1j+bidJ/+za1T/wDlbr/JTFxl2x+a/J4ryR6uPSV3jx63lpp3zP1A+S2lqPYlBK2dsredEXNqqctDMlfw9TFJNZs8eJqpKfFNQhTgIGKA5G8iq11dxt4r8mZ8QgplKmYwKGIAEFQPgcSfRE4fvH7d/wDDkOElX6Im0Hmp+qjw5m2ipk07VshxquQIHYSuGG1a3NUfyVCmKYpgB/MN1A7h3KdMDB2MACA3DrW7n+fsal2bKZpftH31tm+P4DaK/VNWcxzfivIk+Xh92QYYMmmx7PrqvXevulnxvs9NqUPAWPbUTZLzsmdZN+0tcrUS7WiAbys2+VMo4cmZQsS3at0vECLdFPsmQviOJrHS/ecjySXKy+qJq80Q5S53tWz3hBzHau0EnLZbixyCKqgsQFEzgGp7aYPEU3p3KYAEB+ICACHqGSXVfgaj1l4mRIh/SEf7kn/mBkOFaEgfSm+sv4I/pR6j/jO0yPT4rzNw63wfkzWFzZTLX63um53SvVH5cxcy2WRa7B2GfdFcdnSMm3k4HazFraveWaggBF02c07es1DFEezhqoUewgIZgzPrdzS/H2IpAEQ9QExRAQEDFMJTFEB7gYpiiBimKIdwEBAQHBC0FwP9pz5DcfKrWdV8p9doclqNWmLKEiNgRU0nVN0R8OySbs2aM47eN3lYv5o9kh4SKuCR0g4N3M4eLHHxZbteBpSX9X0/BZU46e0E9MHkKeOjFN4raPtUiqg3TrO/oF1r8pXC3oJRuJFZjXRUiKenjUmE+4D37B69nF2mlZ6NeXn9iZCs2is3SDjrPTrFBWytS6BXUTYazLx89ByjU3cCuY6Wi3Dpg9QMIeh0lDFH8uaunoRprU/u4B9fttkj6bVbNb5YwliqpX5qySZgEpRLHwca5lHpgMcQIUQbNTeo+gfbjTMqV3Yx0dlXyZ2psfYOz7G8WkJ/Y94tl7mnzg5lFnUnbZ5/PPFlDnETmMdZ+Px9cwjEndt8rn2rj3F0Cb35pKI2vYY2paukNs69b7ItEx7x8kwFEG1xR7ZKyXuaLl2LJpBEXMoCSaigl9ClE3YMMRtxK+lzTGR633SZbIpN2/NXUiCCCaaKCCLG5JooopEAiSSSadTAiaaZCgBSgAAAB2DNXRvLtj81+T8n83E6T/8AZtap/wDyt1/kpi4y7Y/Nfkjj6t3Ux6YvLPp4cmdKUTlpqu37Em6YzntcwLdragkZG70uxQ1ug2USo9rbZulJSSkOdomJlCFEHAlEwFEcjYys81p2oz8QyHGWNvZetouaV1J39CKoPuO5tB7ErayAiPgPIU95A7Aj3Al7CAKINIB4QB/GAqpg79hEBczUea7r/X9zROzZRgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAPwuG6DtBZq5RRctnKSiDlu4SIsg4brFFNZBZFQDJqpLJmEpimAQEB7CHbJKMZRcZJOLVmno12ElFSTjJJxeqKWvUF4nveJu/ZiBjGa4auvZ31v1XICUTt0Yhw5A0rUlVwExQkKjIOPJAhvCY7I7dQA7GHt1b313cnu/taUIL/kqnvU3f+ns8YdV6vJSk/fR+ZPTH0e1OjvfKphcLBrdzHudfBtJ8MFde1w17tJ0ZyvBe6vYzgoJ+zm1w1npx8qPgxSnKYhygYhyiUxTB3AxTB2EBD7QEByxbi1KLtJMxOEKkHTqJSpyTTT0aeqZZO6WHUVb2xhAcYd7TxULnGoIROpbxMOuyd0jG6YptKTMPnB/S3RaCYEZKKG/1SbFAgCLgnZX7v0fb6QxFKGxNqT/AJ0bRpTk9VooSf0pvnlB+9wOp3e6A+mqO1oUdwd76ttuU4qOExE5ZYuEU/5UpN/+9U4rn/jU1xxblGrGM9GfXjtiMAYAwBgDAGAMAYAwBgH41lSIpnVUUIkmmQ6h1FTARMhCFE5zqHMJSkIUhREREQAADMykoptuySuG0ld6FXrqj9Q9LdDyT46aTm/O1PEvSo7Ft8YuYG2yJmOcFOFei3CZg95pMO9RAyygd05J0mHbxIJgKnwPf3fZ7Qm9k7Jn/wAjF+/Nf5jWlv8AojrF/wBTSmvdUHLon0/dMdLeaVXcPdarx7vwlw4ytB+7iZReeHg11qMZK1Zr3asl7LOCqJwp58nOr4wCYfpCcSFdwbeHftxjTH1vpmSTNWyOkDi1tG0QSKvHppCfwJuGVKaqg9WEPGUHp2xBDuU4B9R6Nt2ntHaH/FcVH/k8PJNXtaVTWK/8uVR6NWhrGbt2R/Td0eS3i3je+20of+xNlzcaF07VcZbOS0UoYaEv+qLrTS92dFlq0AAPQP8A99/Uf/1zsKd+z5wBgDAGAMAYAwBgEbHVG6buuOpdx2X1RZpFOn7HqL5za9L7OBj7+tSrgo091ctZFqUyTh/ULS0IRrKtUzlMYhElyd1myQZGr+JcrWehmx8xOB3KXgjfXNE5IaumqmQztwhXL4xQXl9ZXpokYopyNPuzZEIp+VZFQhztFhQkGon8DhukcBKGTDi1ny7Tj/BBgHs+i+Re+OMlwbX3j7ty+6gtbc5DHkqPYX0OjIJlOVQzSciUlDQ1hjlhL2UbPm7hBQvoYghgJuOmhdq6PftDheT1zqfFzmo0rtT3ZaHDaD1puOvtUoKl7Sn1gBNpV7VAlN7lTr3LqgJWajMSRUkuYEE0WqwpJr1PtNpqXcy1lmgY2u0nriS2js6Qdn810+2RfXblQe/4RdzbJdZU/qJh+kc4j6iI5haGZdZ+L8z6Ngh+D3lv/X0f+1J/5spLoe8t/wCvo/8Aak/82BdD3lv/AF9H/tSf+bAuh7y3/r6P/ak/82BdHZ/TjemR6gnCJVk4S97Jys0SLfwuQSN5g7FgA+iqn41CG7CPYQARyPQ1B++jW7zZozS/aPvrbN8fwG0V+qas5jm/FeRJ8vD7sgwwZNRjoT/VLcK/zeWX9Zt5yx0+L8zkfL+1eSJa80Q5a5y/tJ+YX6LXIL9UtuzMuq/A1HrLxMhtD+kI/wByT/zAwcK0JBOlN9ZfwR/Sj1H/ABnaZHp8V5m4db4PyZrC5spCH1oOkNA9S7W0HbKHJxVK5R6lin7TXFolwMlXbpW3Tg8g91ld3LdBd60jFpAx3MW+IVT5NerKiZMyThbtGhk1ZmdXyF4z784o7Bf6v5E6rt2qbmxVVIkxs0aojHTbdJZRAspVbAh58Da4VydIwpO49w4QUL8DfZmTLTWuh4ZgyfAgAh2EAEB+ICHcB/tgPoOCnUvF/mvyp4ZWlG2cat23bWTgrhFxI16PkTSVDsYICJitrTQZcH1Sn24+If2Q0MoTv3IchuxgFUmslp2F9Lo59c2l9Q1ZPRG54OE1XyuiodzJs42HXXLRtxxMS3M5l5mhkkFl38PYYpoQziQhF1nBytynctllUSrEbVPkzV081qS283na7Dhdy8fNj+W5ZcX9/O26gd/oLt9UWxZI/oID9FQgD6CA+mWXVfgWPWXiZCrb9jof3FL/ADC5DiWh+YxgKAmMIFKAdxMYQAAD8oiPoAZAfh95b/19H/tSf+bKLoe8t/6+j/2pP/NgXQ95b/19H/tSf+bAuh7y3/r6P/ak/wDNgXRNn7O05W/muvGUkedBY6kLvEjknnlAQY/cSvh3JygVQonMmBAEC+oD2+Hpk5rxNR1fh90aa+bNDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMA5R5k8V6py50vM62nDtoqxtFPl3XtuUbiqvVLg1RUTZOzGSD3g8RIpqGayCBe4LNVDD4RORMS+u7zbAobxbMlg6lo11nTm11Zd/wD0y0lbPSS96MWvQukjcHZnSNuvV2Bj7U8SmqmHrWvKhXinwVFazcXdxqRvadOUoPJlKnYOv7jqq7WbXOwYNzXblUJReHnYlz9IEnKIgKblm4AATfRcg3MVdq4J9BdBQpw+PYOq+0MDX2bjKmCxMXGtTk009Vbt8+aaacW4tN/mDtfY21t3tqV9h7doPD7XwtTgqQeavqp05WXHSmrSpzSV4tcSjNShH6dn8Z44+QExDEUTOokqkomsisiodFdBdE5VUF0FkjEVQXQVIU5DkMU5DlAxRAQAc1CcqclODtJev91o1kzMoqSWbUk0003GUZRalGUZRalGUZJSjKLUoySlFppMsH8CereixbwunuWcwoVNAiEZVd3uQMqUSE8KTSN2aCZRUTVAnYpJohRIbsHvYFMIrj9p3O6RlGMdm7fk+FWUKubaWiVTVyS0485JZz4kpVF3H6Jv1F04xo7tdI9Xhmko0toOyhK2kcXaypza0rpKlNr3/ZyceOwzHyLCXYtJOKfNJONft0XjCRj3KLxi+aOEyqt3bN22Oo3dNl0jgYihDGKYB7gIhn2inVp1oKpSkpU5JNNNNNPRprJrvR3Ep1IVYKrSkpU5JNNNNNPRprJp8mfuZs2MAYAwBgDAGAMA+rXW8U/XFYl7pfLJD1GqQLRV9Lz88+Qjo1i3SKJhMq4cGKUyqgh4U0y+JRU4gUhTGEAH+bF4vDYGhLE4ucadCKzlJ2Xcu9vRJXbeSVz+LaO0tn7HwNXae1a1LD7OoQc6lSpJQhCKV25Sk0kkVf8An71S5/fqUxqHQysrUNNKirH2G2KebG2zZqAGMVZsikHluq1S1w9PIESvX5PVbykzCib4Hvl0gVdrxezdlOVPZ2knpKp49kXrwc1ZT1lTj0U6Xen7Gb2Ktu1uW6uG3ad4VcTnCtilpKNNZSo4d6OT4atXOypws6kORSlKUClAClKAFKUoABSlAOwAUA7AAAHwDPl7bbu82zrTGMYRUIJKCVklkklokuSR85DR71xq47XzlHtyvaloLc6biRMD+zWNREVIyl1NsqQsrZZU49kwBAhvLaoCPjeOzkSIA9zCXzmwNh4vb+0IYLCpZvNu9opW4m7Z2Seea1UU1KUb+17j7mbW6QN5aO7OyFKLmuOvWSvHDUE7Sqyb93ib92jB3dSpkk4RqShdp0vp+k6F1jUNT69jQjavTotKPZ+MQUeyDofErIzcq57AZ3MTL5RRy5VH8ZVQe3YoAAdqtl7MwuycDTwGEjajTXddt5yk7WV5PN2VlorKyP1F3a3d2VunsLC7u7Fp+y2bhKShBXbbtrKcndynN3lOUm3KTbbuz1LPIHnBgDAGAMAYAwBgDAGAfVrpR6XsetydN2FUKxe6jNI+7zFWuMDF2auyqHfxAjIwsy1exzxMDB3AFEzAA+vxxrqVNrQgo5JezZdNveqshM0Sq3XjRanhXCpHWmrIIVEz9dQVAcu6DcG1jgkmxBHt7vGjFp9vQBDtksT3Xqvll+30IDOUXsr3LfWLKTsXGbbFC5JQ7IgrJVGcajqXZrlMCnUUTj0ZORmqHKKolL2/CS7A6phDwJ9x8ISzJwrk/n+f2RWev+vr1qm52PXOzafY6DfqhJKxFop1tiXcJYYGSRApjtJKMfJpOEDimcpyG7CRRMxTkExDAYYZaayep9Wau3jB01fxztwwkWDlu+j37RU6Dti/ZrEcsnrVdMSqIuWjlIqiZyiBinKAh6hgeGprRdN3kNJ8rOCfFzf08qZxZdgangVbe7OICZ9dK2ZzT7nID4SlKX3+0192t4QDsUD9vszS0OR6+ueZlu8uqG71byu5Na3fonQd0ff+360qkcokMUIy/TyKAiUfUPMbAQwfvGzK0MT678fPM8Hi5AImUi5cUUnBYmTjpUzddMqyDgsc9QeGQWROUxFkVgQ8JiGAQMURAQEBwRPhafea1WtuNPCTaGu6Dsuv8U+NC8DsOlVW9Qi5dF6tORaIt0Exn41UqhauYpyqM5Ag9wEe/fvmkk1eyOVykm1dn3X7y/h3/Yncaf8AETq7+S2LLsQ4pdrH3l/Dv+xO40/4idXfyWxZdiHFLtY+8v4d/wBidxp/xE6u/ktiy7EOKXaz+rBcTOK9Xmomy1njPx+rtigZBrLQc/Baa1zETULKsVSrspOJlY+tt30dIM1yAdJZFQiiZwASiAhiy7CcUu1nQOUhml+0ffW2b4/gNor9U1ZzHN+K8iT5eH3ZBhgyajHQn+qW4V/m8sv6zbzljp8X5nI+X9q8kS15ohy1zl/aT8wv0WuQX6pbdmZdV+BqPWXiZDaH9IR/uSf+YGDhWhIJ0pvrL+CP6Ueo/wCM7TI9PivM3DrfB+TNYXNlGAeYbb0np/fdRd0LdmsaLtamvQUFauX6sRFoiyKqJGRF21by7R0DF+mmcQTcICmumPqQ5R7DhpPUqbWhATyM9l/6fe2lZGW03K7S4yz7sfG3aU+eLeaA2VHuJzjT758oyxSGMPfy2sy0TL8ClAMzbsJaL1Xyy/b6Ffzlr7Mpzq0JGzFt0hL07ldT4sjp2MXS0nVP22WPbE8wVS69nnDuOnHZy+hGsTLvnipgECIGHsAtCcPY/t6+hXQkY6Rh5F/ES8e+iZeJeuo2VipNo4j5KMkWK52z2PkGDtNF0yes3KRk1UlCFUTOUSmABAQyGdHZ6n3rUG2Lhofauud1a/lF4a6aqudfvlbkW5xIdGSrkihIFRU7CAKNH6KJ27hM3ciqCpyGASmEMWCfC+LsNai7rtOTHDy3Oau3WMx5A8ap9eutB/DuDNNraudqRDcfAVMVlhRnky+gF8RvgAZp5x+Byr3Z2fJmQj7uq0EWjggpuGhjNHCZgEDJuGxhQWTMA+oCRVMQH+1mTh0yOpeDlupdD5m8VrdsiJhZ3XkLv7Vyt6h7HGsJiBkag8tkbGWJvLRkog5jXrIYl6qY5F0zp/R7iHph6Z6G4ZTVvV8jVI+8v4d/2J3Gn/ETq7+S2asuxG+KXax95fw7/sTuNP8AiJ1d/JbFl2IcUu1j7y/h3/Yncaf8ROrv5LYsuxDil2sfeX8O/wCxO40/4idXfyWxZdiHFLtZ9ppnGjjjriwtLdrzj/pKhWtgk7QYWemapolXsLJB+3O0fItJqDgWMk2SetFTJKlIqUFEzCU3cBEMWROKTybdj23KQYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDFr6gjK6ifT9huW9UJcqOEdX9+U+OUSrks58LWNu8Qj41/mTaXBQ/BFOqYwxz8wGFiucSn7oKH8Pom+e5tDeHD/xOHSjtWEbJ5LjS0i32r+lvL+l2T4o/D+mfogw3SRsxbQ2W6dDfHCQfsaksoVoavD12rvgk86dSzlRm+JKUHOE6jVkrVipthmqjboOTrNprck5h5+vzLVRlKRMmzUFJw0dt1A7lMUwdynKJk1SCByGMQxTD1sxWFr4KvLDYmLjWg2mnk013PNPtTzTyZ+deMweO2bja2zdp0KuG2lh6jhVpVFwzpzjqms009Yzi5QnFqcJShJN/xM/nP5xgHaPFrntyE4mrIRtHn0rProFRUd6suajp9VexwEFVK84SUCSqDs49h8TM3u5jFAVEFM9t3f3y2xsCfDRqOeFbu4S96Lu7t2umpPPOMott3nxJWPpm4HS7vn0cKGE2PUhit342/wCSxDfsopJpKhUSc8N/TlGNSkksqN25Fhnjz1buLm5U2ERdpdfRl2ceWipEbBXRJV3Ls5/LBOHvaBSwiqRx9S+/AwV7D2Enf4/aNi9I2wtpwUcW/wCFxNs1N3p8rtVLKyV7XqRgr6XSudytzf1DdH29KhhtoVnsna8ml7LFuMISk20lTxCfsZ3tdR4o1LNcUE3Yk7ipeKnY9tLQknHzEW9TBZnJRT1tIR7tI34qrZ40VWbrpj9hiGEM99o1qVemqtGUZ0paOLTT8Grpn3KlVpV6aq0ZRnSkrqUWmmu1NZM/oZyHIMAYAwD61a7nUaJEOJ+7Wiv1GCalMZxMWWZjoOMRApROIHeyblsgBvCHoHi7j9mfzYrGYTA0nXxtSnSoLWU5KK+baP5cZjcFs/DyxWPrUqGGirudSShFLvlJpL5kR/I3rNaG1yg/hNFRzveNwIU6SEskLmv62Yr+A4FWcT7tuEpPJpLFABTjmx01A+DgoeufO9t9JuyMCnR2ZGWIxCyu04wWl8nacmtUrRhLO1Q67b6/qZ3N2FTnhd04vbW1Unwum/Z4ROzs5YlxfHG6s/4eFZq6vZZlevkVyv3rynsBZrb9yXk45k5UcQFKiSHiaNWvGYPCMVX0llElnpUyFKL12dy8P4fVUA+iHxXbe8u1dv1va4+o3FaRWUY3Vnwx0V7tN5yaylKVkzpzvr0hb3dIOL/iN5sVx4SE708NTThhqWd4tU7vjqKy/m1XOSabhwJuJznngD0wYB6Zp/T+w987CgNX6ur7ixW2wLgRFEniTj4pgmYPfZ2ff+AyUVBRiQ+Ndc/7xCAdQxCG8jsvZWM2xjIYLAwc603/ALtvklq28kjzm7e7W2979tUd393qLr7SrPwhTh/VVrSz4KcOb1btGClNqLuS8LuHdF4eawSqUEZGdu88DWR2PeztgRd2abTSMBW7QhhMqxrkR5p02LXv9AgmUP3VUOI9nd1t2cJu3gfYUrTxc0nUnbrNf0rshHOy5tuTzbP0s6NOjnZHRtu+tlYD+btCq1PE4hq0q1W1m7Z8NOPVp07tQjzcnKT7Ez2g+iDAGAMAYAwBgDAGAMAgL5xddjWfALntC8Xdx66lJzUMhqSnW+ybLpB1JG6UC32mas6SaMnUXKqLax1X5vxrFc/uaqUg3Msocibr6KQS5clZPVkvPHzlJx35WUxC/wDHXcVE25Vlk0jru6jNoO5CIOt4vLaWSvr+7WKrSRgII+6yTRo5APUSAHbCaYs9eR73lIMAoFe1b/cx+/W0X82BhB2Z9wAA2mEV7n7+DP54yw6/Gz+6fhvlkYwXnk+8/h/k73ft+B8nMvUS0Xbn8sv3+pVxyGDT76BMVIxHSQ4fJSRlvMe1zYcu0RXTBMW8bL7h2FIRxUw7FE6C7Rci5DD3ExVQHuIds0tPicmiXgvIp6+0f8Ynug+pFc9hMowzWkcna1CbegHiZDC1PaWzRvU9jsDLAUqXygFiiCySqYfSKlKJGH8buM7jM+Uu37ftYgOyGS+x7N/1R6NtDR1Z4G7htbCC3bp5s5i9Mqzz5NoG1NWgss9jYCFcu1SlfXDXxVjtDMSiCy0Qm3VRIcEHIp1ZZG07rvXq5arzQGAc+cjOVnHbiTRXexuRm3aZqmrNkljtlrLKppy86qiKZTMKrWmoObHbJQTKl/oWOauV+w+ISgUBEI2kWz15EFfDPr5tOeXUwp3F/UOuj07jnLULabuMtN1TL90zYVxqcKSyxsmMY0dKxlLrSMLFvhTYid49XN2UWVS/Y5Jd3XYE07ru+6LK+aIZpftH31tm+P4DaK/VNWcxzfivIk+Xh92QYYMmox0J/qluFf5vLL+s285Y6fF+ZyPl/avJEteaIctc5f2k/ML9FrkF+qW3ZmXVfgaj1l4mQ2h/SEf7kn/mBg4VoSCdKb6y/gj+lHqP+M7TI9PivM3DrfB+TNYXNlK6tw9oc0Bonn7v/h/yUqr+l631tdYmnVDftUSkLLGNJH5t191ZWWzqo2I5m49rF2J88STkolN4AJJEIq0J2OuOb/Ir4b20dvXr6k8eq9w6p3lT47YGm9jUraNJlU01GNnolkibPDKiokRb3dR5EOnSbZ8iRQAVbq+BdE3cqhCmAQDV7hprU9HwQYBmS+0IjrEeq1yH+5j8i+D5O1x90H5vg1+Tw2mFKi/niC/uYAgM54vd/lPv+F+UPO878N5mY5u2lyT1Xbb19LEKDj9jr+nfsir6fl+gb0/w5TD0NenhFFyEHww4jQssCxZSJ4x6GjZEjggJrpPWWrKq2dIrEACgVRFZMSiHx7h6+uWPVXgc0us/EzKuq3xiecReoHyY0/8AJqsdWFNhSmwtc+L6aLnXGzF1blVvdlykIk4CLQlFI5USAAEcslCCBRKJQz3HHLrX7c/XxI8PX9yYxDB6lOQwlOQwepTkMHqU5R9QEPUBwQ0t+h71S6Hzt431DWdztMcw5XaYqsXV9kVGRdlQmL1CwDVKKiNs1tJ0sZacYTzFukMv5InOwlRVBUiaSzUyul2HJ1veXxJzcpBgHGHMLqCcSuCdPXtfI7bsBVHp2h3EDr+OXSntn3BTwLGQbVaiR6p5t8VyoiKfvapEI5E4h57hIo+LI2l4ltzeSIwek51nrB1OOWXJXXqOuo3WGpde6zrVv1JBOnPypfZRqS2r1+zWC8SyKvyWR4+GVjhRYMU/d2JBEhlnJxFY0Td8xk07crfcsG5ogwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAjt5y9PTXXL+GGwMFmlE3bEMPdq/sFFmKjWYbtwEWlevLNsBVpeF8Q+FJwXu8YgIikJi90j+k72bmYLeOn7aFqe04rKfKSWkZ2V/7ZJNx7JRvB/H+lToe2J0lYP+Ii1g96aULUcVGN7pZqlXimva0b8rqcLt05Rbd6mm6NH7T493h7rzbtSfVSxtfGq0MqAuIWwR5VDJkmKxNJkKynIpUS/wBMSHxpj9FUiZ+5Q657W2Pj9jYqWFx9OUKkXzWq5NNXTT5NNq91e6aX55b0bq7w7l7XexN58NLDY5K8XdypVor+uhVslUiuatGcLr2kIOST8nzxZ4AYAEAEBAQAQEOwgIdwEPyCH2hhO2aI0mrPQ9G11uHbWoXQPNWbNvevVgDsJKnZpWJYqB6+i8Ui4+SnBR7+oKIHAQzyOD2vtLAT9pg61SnNu7cZSi2/+pxacvBto81sLeTeXdZp7s7RxuAilZRo1ZKkl3UJcVD4umzuKndWznFUkmrZ1sKr3dq2KUolutDg3b1cpQAO6snABXXh1BEO4mMJv7We24XpI3nw0XGdZVexTjBpfKKm14zv3n1bZ36i+lnZ6p06uKwOMpR6zxGFXtJZf66FShFNvNv2bXLhPeI/rjcmmyQEkNWaQlFAAQFYja7xpjj9H6Z0yWd2Tv6eoB2Ae/2dvXytLpX29H/Fp4V+FOf/APue30v1W76wjatsrZlSXaqteH0tU9fX9WX64HKN8kZOL1zpGDObv4XARtylVk+4AAeEHVqQQN6h3HuQe/f971xW6VtvzypU8JFf+HO/1rNfQ46/6qt+KsbUNmbLoy7XKvUt9ad/Xx51u/VR5yXhuqzNt1rTWiom/B6+qFfrrhMhh/ETlHTaYmU+xfTuVwBg+ICA54fGdIe82Kdo4iVOn/pioR/+aMIzXd73zPSdp/qB6W9q0nRe0cPg03rhMNCnJK+nFXliXpk2rPmuF6cPXS+XrZMoeb2JdbZe5ZQ/mjIW+wyticFU79/Eh8qOnJGvYfgCRSFD8mepYnH43F1Pa4mrOpVzXFKTlKz1Tk25NeLZ8q2xtba+8Nd4neDF4rHVuJS/n1Z1UpLRwhNuFN/+HGK7j6pn8h/AMAYB01xg4kbm5aXEKzrCDMlCMHCBLZsOZQcoUyoN1TfSF8/IT/VOXMkBjIxzUTule3c3lpiKgexbv7s7S3hxKpYSD9kmuObyjFa3k87ZdVWcpf0xaUmveNwujrejpH2k8Du/S4MDTaVbF1Iv+Ho52tfL21XJv2NN8SsvaSpRlGTt08SuHOp+IFG+bFCaHlrNLJN1LtsSYQQ+c1vkES9/E4OkAkjIZuoJvdY9AQQblHuPjUE6huyO7u7Oz93MM6WESeImlx1Gs5dy14YLlG77ZOUm5P8ARXo86N93ejfYy2XsWMqmKnZ18TUs62Iml1qjSSS14KcEqdNZRikdZZ7Ge/jAGAMAYAwBgDAGAMAYBl6deLZhNpdVzlpJoHKdpT7HUdWtikP5iaRtcUKtVuTTKPiN4RNOtnZzl/cqnMHYO2Y/JJ627Evz9yLrX+x9hans7G66tvdx1tcI1QqrC0USzTNTn2pyD3KKUrBPGLzwgP7kTiUftAQwZTazRLpqr2hDqtaqjWkMXkQw2TGMwAqRNta7plxlVCgAF/oq0JRkRanpuxQ+ku9VN39R7iIiL5muN80n8PxY9HvftKXVRuUO5h4rYmq9c+9tDtF5ej6jgBmylVRFFVZm8ty9rbsHRgMJiqpIgdI/YxBKIB2uY4+5fX8kH18v152ncbFsPZdvsd+vluklZez3C3S72esU9JrgUqjyTlZBZd05V8BCkKAm8KaZSkIBSlAAhltt3ep6Lxq46bP5Z7z1xx509COZy+7MsDaFjyooqqNYSMDu4sFtm1UiH9xrtThUln75wfsRJBEfXuJQF5hK7sa2+hdO1jj3pPU+i6YBvmtqPX1T17CLKJEQXes6rCs4gsm7STMdMr2UUamcr9hEBWVMPfNLJWOR5u/Ijt6yfTeZ9SHik9pdaCOYb61Y9eX3Q89IqpNGiliFkDadokq+VDy2cBsGMQI1VVMJCN3yDNyc3loGKY1z5kyas9DMPutJuGtrhZtfbBrM1TLzS5uQrdsqdiYLxk5X52KcHayEZJMXBSKoOG66Yh8BKcvYxRMUQEcmNHZ6n8Bm8eRzxpIxzx3HyDByi9YSDByuyfsXjY4Kt3bJ42USctHTdUoGIomYpyGDuAgOB38yXjTnXn6qWlK+2q8HyfkbtCMkypNEtvVCo7PlkEky+BJL512SJWt7hNInoUqz9QAAA/JjwNcb52frusfYNh+0GdWLYsS4hF+S7elsXRPAsrrfWWuahLgHhEomb2FCuO59kcQEfVBymID6h2EA7XMcb5JL133ImNjbP2VuG0vLxtrYN12dcpAwme2q/wBnmrbPOPF6iU0nOvHroiX5CEMUgfYAZDLbepIJ0XbjK0fqm8KJWIbvnS8puBrTniMe3cOVgh73BTVNlnS6bYh1CR7FpOCs4VMAJpIkExxAoCODUOt8H5M1Rs2UzS/aPvrbN8fwG0V+qas5jm/FeRJ8vD7sgwwZNRjoT/VLcK/zeWX9Zt5yx0+L8zkfL+1eSJa80Q5a5y/tJ+YX6LXIL9UtuzMuq/A1HrLxMhtD+kI/3JP/ADAwcK0JBOlN9ZfwR/Sj1H/GdpkenxXmbh1vg/JmsLmymQhzM2YO5+XvKPbIKAqnsPkFty1NTlEokFhJ3mbPGlTEn0RSTjipFJ29PCAZhaGZ9d+PlkfQ9Pb43bx7sgXDRO3Njafs3wUmNdW+bqjl2Tv6pSCcS8btpNub4GTcpqpmD0EBDATcdCXXXntG3VboLBpGPt00nZDRkkVBJTYupaXIShyF+11NVtnVpN8sb7VF1FTj+X4Zc+0vG+aX1/J+Db3tFXVP21X5OsN9yVPU8ZLt1Wrt5qDXkLWbMRBXt4gjbdKnsNhg3BQD6Lhgu1ck+xQMZjjfYl67yESQkJCXkH8tLP3srKyr11JSkpJO3D+RkpF8sdy9fyD52os6evXjhQyiqqhzKKHMJjCIiI5DPfzO+emJwguPPzmDrDSUHFyCtGYzMbdN2WVugoZlUNTwEm0cWNy8d+AyDeQsIAWKjUziHnvnZAD6JTmK7ixV3fkvX1NXdq1bMWrZkyQRas2bdFq0at0ypINmzdMqKCCCRAAiaKKRAKUoAAFKAAGbNFdv2gvpWzvOPTEFvrRNeNNcmOP8RJpIVtgQDS+29UrrKSstR44oiHvtqrUgZWSg0AEDuTru2pAOs5QKEa5l1XDz5Gdaugu1XcNHTddo7aLrNXbR0io2dNHTZUyDlq6bLFIs3ct1yGIomcpTkOUSmABAQzJxn9yp2610Kyw1zotnsNLt9cepSVftVUmZGvWKEfomAyTyKmYlw0kGLggh+MmoURD0HuHpgJtO61Jhtd+0JdWHXUC0rqPI6PuzJikVFs92TrHX9usHgKBSgZ3ZFYNlNyavYvqd2uucR7iIiI98Z9prjfNJ+u6x9U2x15eqzt+MWhpflXOUuMW8YHS1LUqTrCQ8CgdjEJZKvAtbUmXt8BK+AwfYPxwON8rL133InrJZrJcp2StFwsM7bLPMODupax2eYkZ+ek3KhhOdd/MSzl3IPFTGEREyihhwZd27vUsDezCXSUrXU6QrrFq/cx+xNBbTrU4q0QcrNY9vEq127R7uUVRIZFo2UkKsCCR1hKQy6xSFETiUMc0ahz8PujRizZRgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwDx7d2hNTciaW5oe3qZGW+BVE6zIXRTt5WDfmJ4CS1emWxkpGFlEPQSqoKEE3hApwMTuUfGbU2Rs/bOH/htoU1UhnZ6Si2rXjLVO2T5NZNNZHr28+6m72+Wyp7F3lwtLFbPnnaSzhJaTpzVp06kXnGcGpRaumVvuU/Rz3Jq5WStPHx063TRCHWchVVvdGm0oJr4hMVuRqAtou6JJFMBSnaeQ9OAdxbHHuI/D94ejLaOBcsRslvEYXsS/mJd8V1vGmm23ZUopXOlW/36aN5dhSntDcictq7JTb/h5uMMXTV37sJPhp4hK6Su6VVJXftZvOHiSjpKFknsLNRsjCzMasZvIw8wxdRctHrkMJDovY5+i3eNVQMUfQ5CiPbPmNWhVoScKsXGSdnfk1qvFc1quZ1srUq2FxM8Fi6dWhjab9+lVhKnVhm171OajON7ZXWazV1mfp5xGBgDAGAMAYAwBgH2Sn024bDsTOo0Cq2C7WqQOVNlXqvFO5mVWE/fwnM2ZpqC2b/RHussKaJPiY4B65/XhMDi8dVjQwtOU6knkkm29L2STbtdXsm0s9D+vZmztpbcx62VsPDV8btR2tSowc5q97OVvdpxdmlOrKFO+skTk8U+i1ZJpSNuPK6aGtxAGRdI6kp0ii4nnxA8RyoXC3NhVZRLdQPB5jWMFZcQExRcpj3DPrW7vRdVqWxO3pezp6+zi05vTKTV4w5p2cpNO69nJHazo/8A0wYuvOntTpGrKnQTTWBw8ruWbyxGIXJrhbpULWacXWnFtFheha/pWr6rEUnXtXhadU4NsVrFwEAxSYRzVMoABjgkkAGXcrCXxKrKCdZU/cxzGMIiP2bB4LC4DDxw2DpxpUI6Rjpd6t823q2223m22dxtl7K2bsTAUtlbHoUsNs2jBRp0qcVCEIpWSjGKSR9xz+s/vGAMAYAwBgDAGAMAYAwBgEKnPPoOcHOdE3Y9kvIGb0ZvWyLOZGW2vqVRmy+c0458Pilr9SJFJesWt0ocDHXcpkYSbk5hFR4Ycluwrs9V+fXiVhuQ3stvPLWzt880RcdS8j62RZYY9ulNDqm+Gak9UzP4K4qKVIrg5f3KE8r3EPgHoGSzM8K5P5+n9iLS59I3qb0N84YTvB3kM7O2OJFHVTo7i+RhhAR+kjKUhewMFyD27gJVBDtkHBL01+T6jCdMTqNWNYiMRwZ5TLmUU8sDudMXWKblN3KA+a7l4tg1RIXxh3Mc4FAB+OLk4Jdn1X5JIONvs1vUh3ZJRy+zq3S+MlLXOiq9nNl2aNsFpKzE5PPLGUKjPJx+pIlSERIlIuotMxvQyhfXtdS8Ha7fX9vqXPOm10nOM/TSqL9DWLN7edv2pggx2BvS4tmoXGxtEjpOPkCDYthVYUqmEeoguSNaGOdVQCHduHSiSRyW3Pma5WWhKDlIMAiG6lXRk4s9SJqa2WhF7qXkHHxqEbB71ozFkrMPWjMgIsIjYddcHax+wIJmh9BEFlW0i1IUpG7xJIBSNGrjJqz0KbnJP2cXqWaIkJFejUGs8lqY2EVGdk07Y2Cc6s3MJhSI917b3EDZ0n5UwDzE2RZFEp/Qqxw7COcycPY15ft9SOGa6dPP+uujMZvhLyrYui/FL7g+yXYD6APcqzCvOkDlEBAQEDCAh8O+COMlyPvFH6UnUp2I7bNKzwf5HB72oCaT6y64l6PElMbw+q8xdi16MbFADAIidUoAHxwXgl2fVfkmE4u+yycxdkPmEpyf2Jr3jjUhUKaQgq+8Q2xs5ZDt4/KbNoRw1oUaZX8QVVJd0ZER7+Qft4ctmXhXN/L9/wAMt38FOlzw96ekEq20Lroi17kmZWVl3JeFm9n2rZEO3iVaq2NVm1SgIdZQe5o6JQYsT+AhlEznKB8qXzLystCQ/KQpI9aPo0dQ3mF1Ctr774/6drtw1baapqmMhJ5/tjWtVduXtX1/CQM0ipC2SyRss2BrJslCFMdICqFADFESj3zNndhq9s1p39r7iKz+dy+rp/Y7VH/H1pf+WePgzPC+1fX8F7npT6E2jxf6fHGTQu6YJpWdoa4p01E2+CYzUTYmsa/e3i0zbdFGag3T2JfgaOlETiZBU5AMYS9+4DlirLM2+XgvIkIykPB+U9HsuzuMXI7WtMZJSVw2Fofb9Hqkcu8axyD+y2zX1hgYJktIPVEWTFJ1KSCSZlljlSSA3iOIFARyNXTRY5ST7zOyR9nK6upUkim461EDFTIUwfd60uPYQKACHf55+vrk+DMcL7V9fwdfcA+hD1O9F83eKO5tm6Lq8FrvV299e3e6zLbc+qJlxF1uvziD6UeoRMTancnJKot0xEqKCSipx9CgOHfS3M1FWd21z7ezwNAfNArw81fZteDvJ2Rmrvp9Wb4nbNmHC8g8da4YtJrV0rJOlVXDp3Kark3DNnHqullA7/Ir6ISD1MKRzCI5m3YHZ66+vh9+8rd769mR6kWqnLpxrBrqnkbX0hWUQdUW6NadZfdiGN5XvlX2OFdbg8OQAEUmcg9ABHsBhD1yZ9hOHsa8v2+pG1aOlV1Kac4cNpzgzyY7tjGKo5hdXT1pjx8HoYUZKrIzLBcn5BIoYB+zvgcEuz6r8n4q10sOpNbXDdvC8GOThveTlTTcy2qLLW2BRMIlAVpGyNYlg3IAh6mUUKUv2iGLk4Jdn1X5JW+K/swXOnbsvGv+RcvSOLtCMogrJFdTEZsvZzlkcBMdOHq1SfuKwzd9g8IjIzCApCPfylO3hG2ZeFc38vX5LrvBjgJxx6eupA1Px8qqrAsou2k73fJ9ZKUv+ybA2ROgjM3CdIg3BcGSSxyM2TdNCPYJqHBBEhlFTKVKxeVlodqZQMAgH6mnQB4188Jmd3DraULxy5JS4qvZm4V+FQkqBsiTFMw+9bHpKCseY068VKQFZqOXbvT9zqOU3p/D2jXYHZ6+vXplRzkD7Px1RNDSD8rLQ5N6Vpq4USZ2vQ9ijLkSTSJ2ErhOnv1IPYDTxgYPoqRfoPcAE3bvmScD5Wf08/ycLyHT157xTs7CR4UcrWrxM3gOgbQWz1TFN4hJ2E6FaVS/GDt+NgnDLsZ7Frjo/dTvab9qwrXCbesaDwSglI32sE1jClKY3h81aW2E7rTNNIv2j4hH94cF4Jemv9ybPiX7KdvO2Poqw8y90VfU1Y8SLh/rvUKhL3sN2mVQgrRry3yLRtSK0ool3AHDVOdAo/ufty2fgOFc38vX2LevEHgvxe4La+DXfGzVsNSGTsrc9ls6oDL367vW5AKWQul0fgpNziwH8R00TKEZNROYG6CJDCXNJWNXytojrnBBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAOfN4cVuP/ACMYg02/rCtWt2mkKTOwmbHjLZGh4BTT+TrTEnZTjUqQD6EBcUvykHPCbV3d2NtqNtoUITqWtxq8ZpdnHG0mr291txyzTPU96Nxt0d9MOsPvNgMPi1G/DOUbVYO1r06sbVIOzecJJkP24OhdBOlHUhoXc8jBeMwGbVbaMaE/HpFAO4pJWqBIwl0yib0AVmbs4B8RMIevzbafRNSm3U2ViLZt8NRW109+CskuxUr25nW/eP8AShs2o5Vdz9q18Npalio/xNNJaqNSLp17y/1VJ1ba2ejjg2H0q+bmvzOVEdWM9gx6CihEn+t7RDTqjghAEQULDyS0HOkE4B+L7sYQEe3r8c9GxnR5vPhHlQdWHOUHGS+CTdR+PAvDkfFttfp86V9j8c6WAoY+jFvheFxEJSkuTcK/8O03/pTlZvV6nI9q0DvmjKGRuGkduV1QhvCcJHXVtKQo/l89CKXbmT/4wHEv7+et1dh7XoSca2HrU7f64Spr4cajc+dbT3N302M0tp7F2vTd7ZYOvVSv2yowqRt33subPNl4eaan8t1BzjVT1/BOoaTbq/RHsPdNZqQ4dh9Ph8c8bOnKm+Gbin/cvyeHlgNpQdqmExkJdkqFaL+UoJn+20FYHx/LY12xv1O4F8thATD5QTD8Cgm0ZLHEw/k7ZqnQqVnw0+Fv+6P5JHAbTn/hYPHVGuUMNXm/lCnJ/Q9bqXGXkhfPD8ztBbhnwP6lUba/sjRv2/KZ5KMGDNIP3zqFDPKYfd7bWKmoUMNXlfnGnOUf/VCMl9T2HZu4W/22KftNl7C2tVvopYadD64lUUvi0dk636RPNO+qNVJqp1TVsW49Tvr7bGJnyJfTuJoGqkscj4uw9/Cp5Q/vgOez4Ho23mxedWlGhG+tSUUrf+Vzmn3Omj6ZsT9OHShtaUZY2lg9m4aSzdesp1I//tUFUi//AI0SS7TPQ81RXzM5PeezbNsp8mVFRet1JuFEqgrkN4jpLvSrydoftT/AfA5ZiIfZ8e/vmzOinZ9FqptSvKq7v3YLhVnylJ3bt/qiqbPt27H6V92cDwV97cditpYhKN6dL/lcPxJ3bShKVdp6OMq7i1k1reXrVGjtQ6Ngi1vUeu6rQYnwlKulXotBq7fiQREqkrKGBSUl1wERHzHSyp+4/HPpGztkbO2TTdLAUadKL1aV5St/qk7yk++TZ2M2Du1u/uvgls7d3B4bBYJf0UYRgm9buyvJt6uTbfNnqgAAegf/AL7emeSPOHzgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYA/fwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAf4Mmmce5iEMIegCYpRHt+TuIDkcYvVIlk9T5KQhO/gIUnf1HwlAvcf3+wBhJLRF00P9ZQMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgFIpz1uuoSn1eVeIhNh0ENHF58/cCLBDqqqDMhrX7svzL+TRsnlfKYyXyD9D3zxed5n0/jmc7XuW/vcNlb4/ku65ogwCP3mV1Q+EvAqSr9d5Jbia1m5WdmEpD0Ovwc7dLmpBiuo2+X30FWWEivDQh3KJ00nD0W5XJyHKh5gpqAWXL45HRfG/k1ovlxquI3Tx32LCbM1zMuXccjOQ3vbdZhMRwIjJQM9ESbZjMV+fjgcJmWZvEEVypqpqeEU1EzGt7ix7vggwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAZj7z/fCS3/Sv/wDiPzH9I/zPXYacGbAwDOZ9ow4l8jqN1CNn7+sNQudu07u9tSH+utixkNJzdfjSwVLg6w911JPI9F4hAS8BIwyx27VcUhdNF010wMJ1ALh5aiSbzWa9f7/Ena9ly4ub80Txy35szcFZsNEqu/LpQ5bVdQtLR9ETTmJpsHYGMzfFa/IIououPtis41bs1FCJqu0YzzRKKIoHNV28gso2et/wWjM0BgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAzH3n++Elv+lf/APEfmP6R/meuw04M2BgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgHjtw5E8fteXGL13f96ado2wJwsYaFo1w2bSqzcZcs08Uj4c0XWZqbZTUgWWfpGQbCkgfz1iiQniMAhkui2b0TPYspDxfdnI3QnG6tjbt+bi1zqGvCRY7aQv9uha38ombgUVkIZnIu0X828IBg/AM0l1h7+hcjaWpbEZMv7Qb0kIiQUj/vrmsoKQgVR7Das3LIxoG8QlMCb5LX4IuSk7d/GkJyCA/REccSFl2o6047dTXgPyvmEa1oPlNqy9Wp0cibGnrSryn3SSUP37JxVPvbCsWaUUAA7iVu1VEoeogGLi2V1n9TurKQYBxZyK6i/Bzia8PFcg+Tuqdd2BEQBeouJ4bDeG3iIChTOaPUW8/bm5FCGASmOyKU/7kRyXRbPV5eORxhH+0I9I+QkCMB5WIMAUOchH8lqjdLSN7lHsUTuja8N5CanxAyhSlAPxhLi/iLLtRJbofk9x45QVo9u49bn1zuCBQBL351RLRGTjmIOv4/IQnYtuv8rQDpYEzCVJ6ggqIB3AvbF0xZ68j3XKQYAwBgHM3IXmZxT4oRxJHkZv/V2owWRK4ZxdttUe2s0k3MYxAXiKi2UdWmYRA5BATtWaxQH0EQyXXxLZ2vyI9VPaEukcnJfJ/wB9YkomC5UBk0tSbsPFh37AK3n/AHOgWM3II+pgTH4dw7h644kMu1HfvHPm7xI5btFXXHDkHrHbSzZE7h5CVqxti2yPbJiUp3UnTJMI+2xjUDHAPNcMk0xH0Ae+LpiztfkdTZSDAGAMAYBwzunqZ9P/AI8yK8Nt/l1o2qTrRZVu9rqV3jrLZY9wiYxFW8jXKkadm45chyiHgXbpm7h8Ml0VprXLxyPBYrrl9JyZdpsmnNfWKKypilIaVir/AATbxHHsUDPZunx7Inr8fEoHb7cXXeLd6+a/J3hqHk1x03+3B1o/euo9tkBsDtVHXmw6rbXzRuP7t/HQso8kI8Q+0q6SZi/aGLr4iz15Gce8/wB8JLf9K/8A+I/M/wBJP8z12GnBmwMA8o2ZvjR2lRhy7k3NqnUprED0a+GzNiVChjOhG+7fKIw4WmYivlP5P98R8/yPH5Xmk8XbxF7xtLUqTeh9wpt2puxazFXTX1trN7p06ksvB2ymz0VZ6zMoN3S7FwtFT0I7fRcikg9aqonMiqcCqpmIPYxRALroRq2p9nwBgH4l10WyKzlysk3bt0lF1111CJIoIpEFRVZZVQSkTSTIUTGMYQAADuOAcD7e6qPTo0U6Uj9m8yNEREogY5HEPC3VleZpoqmYxFEXkLQws0ozcFMUQ8tVEh/T4ZLotmtcvHI5xL1/ekMZYEA5kQAHE/l+I2qt9EQAe/buLo+qytip/wDHE/h/fxdEy7V80dxceecXEHleQQ468i9U7XfkRVcrV+tWth87mzZEoGVdPKZInY2xm1TAfpKKsiED8vpi6LZ2vyOqcpBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAZ5vtN026qvVQoFujvwcrVdEaWssauQoCsk/gL3eZZmokYOxgORwzKJewh65nVsN2cX2fklN6l/tLlX11XmeqOBSELd9uTldhndr3NLN0Z2gaukJ2IavT12nxJyma7DvcUu9BJZVYBh2LhMUjkeqCdJFxXLK0XbWXr1YiJ4/9EvqkdTywl5E8mLhMa1hbn5EoG0eTMhYZnZFjinHknQVp2r0/DNR0MLFUh2JHgwMaZv4fdvEQChhdxGm+u/XkvWRLCx9kd04nEeTJc1NqOp8U/WSYapprCIKt2L9IsK4sUk8FIBAfoi/EwgP4wYs+4cMOd/mvwQg9THoWcmOm7BE3dC29jvLQUZMsWrjadQiZCo3HW8i7dJoQT69VMJCVWgGL6QMRFvLR8g7apOjJprGbqKoAo0yZHHnF6fMnp6EXWuZXzRm3dSc69vRkZPcYqOjsWG3df5UE3lt022etIF+wtMgsJ31ivFQm5Bi2bmSI5kppCQRIBFXKRzLL21KnxLvXq/5I7+e/Xv5bc8tim4udNur7LodDs75zXomRokQ/d8jtzEMbwLLshhyuXmsqqqiXxCkxOSQBuJju3qSZjN042+egu72hm+31p4v6H7PGD2WDlJthkhd+We76zoBWdA0i7qUDHm3JtEXC5vMMNplhm4ansH7kDeIxkZGXOUwj5geIBLls/gThWsnn65/sdkXL2R3XCsE5+57zSvzGzptlTMhumqq1LwDx6VMRRSeEgrFBSTBsqsAAZRM65kyiIgmcQ7Csy8MeV/p+EVv92aK519FDlpX1T2N/rLZsQU1j1vtbXkk7ea/2rUm70GzvygeNmaNirrs5QbS8DLtSqJlVAi6AFUSUPDOcHdc/r4+vA0VemdzhgeoTxA1vyMjY9rA2eQB9UNpVRkqos0qu0ar7u2tUWyOsJ1hiX3vCElHgoY6pY9+gChjHAw5s2+1aM75wQYBVR65XXdlOLU3PcQeHUvEq75bsit9ubi8LOYY6WCQQTXJUqozXIvGSO0FmCxVHa7gqreCTUKQU1HxhBpG+S0Daj/d5evXfEJwf9n25i9QVBDk1y22tYdJ1DZPa0M7FsFnLbE5BbNZyZffGtmUhbBKMQrkLMkOCjZ1Lu/elUTkWSYnQOmc0V+Q4ec27/X9vWhM2X2UHgwECLM29OUZrF7t4fl0s/rMrH3zwj+HCBHW4l938YgPlC68XYO3md/XFhaPYQS9QnoactOl+DflJx/2lPbU1VRJBtKrbW182lNf7j00umqiLSds8RByT05K8k5OCZpiMeHRSEO7tu2TOUTS3boOG3vQvf6/v3+RYS6D/AFo5HnDGK8X+S8jHk5R0qvqy9XuSSbWMbb1pkSQoSb9SObkQZtNiVdASqySLYpUn7MReJJk8pyBanyYT4l3llbNAYB4xyE5Ban4taevG9t22tnTtca/iFJWclnP4VwucTFRj4aGYEEHEtPzb5RNqyaJAKrhwqUgfERCN2FjPv5n9Xjn71Z9xBx14twuyKNqm4yDmFpGgNQLvCX3YMUkJzrTO3LXCqNXL1oLUgOXjP3lrXYtAgCt5pkzOj5feLu9ofv8At6zOweOXsnu/bjDNJ7k5yKpOknsg3K7VpOuKwrtmzR6yg9zsp6xO5qp1VF+T4nMxPKod/wAVU/xC2ZFGK1+n7/g6omPZF9aqNDhX+cOwmT8EzeWpN6Wq0uyMr4foeNCPu0EuVMTeg9lREA//AFWfd6+I4Y/9XzX4I2N9+zTdRjjasfYvHW4U3fPzfUUk2C+qLFMav3DHlYdnCLxhCT7iNbuZABL3SSjZtw6McOxExEQAVu1BRs7xefy9fQi24Y/dG/mpXFv7sHzt+6wXm5qUmywv3yj8+QvSe2odO0BcPlf/AFVGyhLlVB6Ln8OLjxCcRN3HJy+Ijfj97U1fs2UYBSu9rtTTO+4I+MhD9keQXbxFKbt3HU3ft3Ae3fMvX4El1V4k6nQRKUnSM4YlKUClCn3/ALFKAAAf7M2yB9ADsAeuI6fF+Zp8vBeSJfc0Q8r3rZbdTNI7juGv28e7vlU1XsKy0lrLtlnkU5t0FUZeUrbeTaNnDRw6j1plqiVZNNVI50xMUpyiICEeSLFXkk9Lmcmwb9bvrWSBpBJbdm0dcv3YnFQ75LTHGGEVSKXzEWaZlqzRJRyzRMACVMspJnAPpeYYfXOr7fXyJ77XZH5fu/qSNaX9kq3nNNWzzfPKzWWtjLpFWWhNW0We2Y+aqGKBhauJSwyeuI7zgMPhMdJNdMo+oCcMtmTgj2+vXcdPufZGNWGYiRlzg2UhJ+DsV2701UXceCnr9I0ahcmDkSfD6PvYD6fH19Fn6/3Lwx/6vmvwQZdQLo0cy+lgvCb3jrYhftWQ88w+RuQGnXFgqtj1zPqvgSgBucSC5JykO3rsiYNn7R49jhXUTRM5IsciRpbtJw2fFF/ZlqL2fzqx2znjra2aG5AyiEtyT0VCRkv88ASTau9taucu0oZtbZVq2TTaEttYl1W7GXVTKmR5720ceDzVVxzSfIt+JX58yxllAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgGdt7UkYCdSmFOPfsTjPrMw9vj2LZtiCPb9/0zLJPReBOb0QeiForRmr9P8yt6IQO7N77KpFQ2nrpjIR/vuvtLwV0gGFmrZoKGlW5U5zYyEZJpHcy7pESx7r6EeQgpe9rkuZUlHTretCz5mgMA833Fqyp7x1RsjTl7YISdO2hSbLRLGzXbouSnirPEOol0skmuUyYO2hHXnIH9DJLEIcogYoCAqdncyWdBcYLfyB5W0PiPWJqIgLffNsr6nbWCyA8+RolzHy79m+l5NFgku8cpM28SquCKZROqoUpAEoj4gwnlcxw+9wdjf0NNfp49MPjN04Nckq+n6+We2NNR7VHZG8LQzZq7Cvz0gJrOEjOkyqFrNSI8J4mkKyODVApSCqZw4A7hTSXzN5WsskSL5SDAK7ftN+i4HZnTalNprx7Y9r48bNolzgZkyYC9aQlxm2mu7ZDpLiPdNjLlsbJdYgAPjWj0B/c5l9oteLXx9fC5wb7I3eZR3Q+betHDlwpDQFy01eYpoY3dq0f26CvMDOKpEEexVnqNLY+MQ+IIh3+zC1Cd4+D+yLi2aBwZ1M+YTTgrwo3fyJIZmpbq9XPm9q6NeCiKcttO4LFr9IQFu4TVSfNoyUehJO0BD8KxYrh3D4hGVdvJFIXoA8Fw5+c2rXvbfbdxf8AWmgnrTa+wT2cnyu32Zui4S7+QpkPZjPRVJKNVZNi+nZBJYqqboGKaCpRTXEMzZN2JG93N6/f9vwaNubAwD+dMQ8TYYmUgJ6MYTUHORz2ImYaVaN5CLlomTbKspGMkmDtNVq+YP2a50lkVSmTVTOJTAICIYGhmH85NSW3o79VuQeaYWdxUTqrYVV31ohVQ7k6TvWtlWGYRpjxZYCGlY5iiMlV33iAxXKLdQDdwP64tyI/dlxLT1f7mmBqbZNd3Jq3W+3KiqZarbQolT2DXVDmIZQYW4QLCwRpVhTESA4TaSBCqAH4pwEPszSd1c01Z2PQcpDP09pk57Te9uUjPhhQ5hytqfjW4YqXCNi3Cira577m48izwXaCPgB4bX0LJpRTRE5TmQkl34gI+MvbD7eRJacK19W/JZl6J3TCqnT54zQM/bK6xV5Tbor8TZd0Wp028czWGsik3lojTkQ4XSTXi4OmFOmWRSS7A/miLLqGVIm0BHS7eZbW91evXImmygYAwDMfef74SW/6V/8A8R+Y5D/M9dhpwZsDAKWPtdf7O4Jf3HkD/l1NmXr8CS6q8fsTpdBP6o7hl/BC/wD65tkYjp8X5mny8F5Il8zRD8Thug6QWaukUnLZyko3cN3CZFkHCCxBTWRWRUAyaqSqZhKYpgEDAPYfTAP1YqKi4KNYw0JGsIeHi2qDCMiopm3j42OYtkypNmbBi0TRatGjdIoFImmUpCFAAAADA11P38AYB5VvLUNS39pvaGk73HtpOo7Uotlo061doJOUys7FEuY4HiSapDlI9jVliOW6oB40XCRFCCBilEI1dWKnZ3M4/wBn+tctqnq9aKriTxYreym3PqaxJpqHBOSaDQ7W6bFcFS7gsmSx1dm4AB+iB0ym+zvmexkjlJx7n9P9jTFzYGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAzs/al/rJIn9GPWv8ZNi5nn8ST0XgXm+BX7Rjhf+idx0/U/Tsq0NS1fidY5SDAGAZg3Tm+vB0h+mne/4w3nMfsP81+MvuafObAwBgEOvX9+qH5kfwf1X+vrVeSWgej8H5EHPsif+2PPP+9eOn/ebmyLUkeq/EuoZopUK9rZ2zIxWm+Iej2T4xI+87K2BsqwMCGEAXDW9bh4GvKLFAexkyOtiOzFAQ/HJ3D1DMvUPq+L9fY+8+zjbm4c8ZuADpztLklx01rtHbe5r5c7HAXbb+vapc2kLCki6VU2kxCTdhZSzRqDOAXeNPNRIB035jl7gbvkTS1Kl7qt6z/2J9/5ofwG/s2OKH/vB6p/lXl4o9osx/ND+A39mxxQ/94PVP8q8cUe0WY/mh/Ab+zY4of8AvB6p/lXjij2izKa3tQ+xuPG69v8AE7aujN1ak3A+HW2xNfW82r9hVO+KQTOu2eGsdaCeCsS0oMUR6vb5L3Xz/L87y1vB38I9o9bokuqu27+xZa6AOxXGxuk/xZWeuFXUhS4y9a3drqn8ZhSpexbVGQ6QfaUrWvAzRAB7j+D/ACZqOhXon3eWX2JcrfZ42k1K0XOZMYkPUq7N2eVOTw+MkbAxjmVfGL4hAviK1aGEO4gHfK8swld2Mwfpl0yQ53dXzSD/AGAUljNsTkLa+Q2wk5PsuhMs6kvYtzS7N95pgBVtIuYdNsYoj9MingD1EAzHcyRac3Llm/x9jUazYGAMAYBmPvP98JLf9K//AOI/Mf0j/M9dhpwZsDAKWPtdf7O4Jf3HkD/l1NmXr8CS6q8fsTpdBP6o7hl/BC//AK5tkYjp8X5mny8F5Il8zRBgDAPKtq710pouICf3TtzWupoUySyyUlsa71umtXJW5RMqVmpYJKP9+VAAHsmiBzmH0ABEQDI2lqVJvQia2z7RB0p9VmXbtN/Sm1pFuZQisdqLXlytIeYmPh8CU3IxcBVnAHH8Uyb86fp6mD0xcZJ2bXn5XOBr77WVxHiTrE1vxq5DXgpB/Ar2V3r7X6KwB9pgRsFzcpdx/wDZD6ZLkvHv+X5aK2HRMlCzvWE4rzhETNiTe09kTJGxzgodsSVoOwn5G51ClKVQ6JXHhEwAAGEO/YMiJF3nftuagWbKMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYBnZ+1L/WSRP6Metf4ybFzPP4knovAvN8Cv2jHC/8ARO46fqfp2VaGpavxOscpBgDAMwXpzfXg6P8A00r3/GG85j9h/mvxl9zT6zYGAMAh06/v1Q3Mn+D+q/19aryS0D0fg/Ig69kT/wBseef968dP+83NkWpI9V+JdQzRSjX7W97592vhn4vD8n/cv2p5Hor4vfPnXWPeu4j+B8PkeT27fS/L6eHMvUS6q8X9jnrgh7OBIc4uJem+VDDlpG0BvtuJsMj8zXWmlrGrALVy7WaluGgzhNhRASRVVq2ZYD+7I9vM8HhHw+IxXemg4Y2V272OuP50Rnf7OSF/xAOP/qnlzHDHtf0H86Izv9nJC/4gHH/1TxmOGPa/oP50Rnf7OSF/xAOP/qnjMcMe1/Q/0X2RSfL38POaHL3+Ph0E5Dv2+HfttPJZjhj2v6FlPpgcGpDp3cUYTjRI7Mb7ZUhLrd7WhbW1WGnpGb3GWCWCN+RzTM8fxMVjH7qi4MKni+BQAAyortZJaI9k50vXEbwk5iyLTx+9MOK/IR628sRBT3hrqS3Lo+AQAwgfzCB27APrh6MR6y8Sg57MqxaOeqZQ13BiAtF6P3K8jym8PczlSCi45Ty+4+LxlZPVfxe4+ER+zvk5rxMQ5/2/dGkXmjQwBgDAMx95/vhJb/pX/wDxH5j+kf5nrsNODNgYBSx9rr/Z3BL+48gf8upsy9fgSXVXj9idLoJ/VHcMv4IX/wDXNsjEdPi/M0+XgvJEvmaIfR9lbKoWnaDbtpbRtcNR9e0OCf2W3WyfdAziYOFjUhWdO3SvYyhzdgAiSSZTrrrGKkkQ6hylENSi11AfaUOSe/7dIad6fsZM6c11JSR63C7AbwJZ3kBs5Z0qdm3UrEYLeUQ1+3kznKLNuzbuZ3v2MLlAxhQLm9/AnFnaKu/Wi9eB4nov2ezqhc1pYNscmrIXS6VjUTk31n5J2ix3vc0uRyoPnrDSG7mWnIx8UO4i3m30QqUP3AegZEnyDi3nN/f9vqTSae9lA4fVhFJbdm/d77ckSAmY6FVJVNTV45wEBUIdilHXWdMgbt2ACyZDdvt/JbMto9nz/axIvQOgN0ndfpNfK4owlxfNRIb5T2JddjXJdwYnh9XTCTtowSwHEvcS+6AQe/bt29Mti5ckvlfzuUmei+1bsesvxqZM0E2zNluTazNo2RKBEWzVrTNjoNm6JA9CJIIplKUoegFAAzK0RF/iO2nvfc09M2BgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAM7P2pf6ySJ/Rj1r/GTYuZ5/Ek9F4F5vgV+0Y4X/oncdP1P07KtDUtX4nWOUgwBgGYL05vrwdH/AKaV7/jDecx+w/zX4y+5p9ZsDAGAQ6df36obmT/B/Vf6+tV5JaB6PwfkQdeyJ/7Y88/7146f95ubItSR6r8S6hmilQT2trVMhJ6i4f7tZsDnj6XsbYutLBIlIIkbm2JXISxV1BY4F7FKqvrx74O49vEIgHqOZeol1fB+vsdkezA7lY7C6bo62M+RVntD7lv9RdxwH7uWsBbXDXYddeqk/cN3q9lfIpCHoJmh/tAcq5ousU/h9fxYsZ5SDAGAMAYB5Jv6iONpaI3XrJoUDuti6k2PRGxBMUgHcW6nTNfRKJz9iEAykgAdx9A+3I9CxaUk3pczZugfslrpTqw8ZS2U52SNrlL7pOQIcfJMSevFOnq5BM1QUEPCY90QZJeEfpCcQKH0hDM87rQzFWdnrZ/n7GnpmyjAGAMAzH3n++Elv+lf/wDEfmP6R/meuw04M2BgFLH2uv8AZ3BL+48gf8upsy9fgSXVXj9idLoJ/VHcMv4IX/8AXNsjEdPi/M0+XgvJEvmaIUzPaveW1kiUeP8AworEm8jYG1RT3fG10Wq4ETsTSPmXNX1nAPPLAFhYMZiKlpFZucwpLLps1BJ4kSGzLzEso+PkvX0OvfZx+mdrTTHGulc29iVWPsPIPfcU9sFFlpxgR0pqfVDl04YQDOqIu0RJF2G8sG4yL+TSH3hWPdINUzppA4KuiEuFW5tevXb8CztmgMAYBmJdGn66Hjn+ezb38UdlZhaIL/Ff/m+5p25sDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAZ2ftS/1kkT+jHrX+Mmxczz+JJ6LwLzfAr9oxwv8A0TuOn6n6dlWhqWr8TrHKQYAwDMF6c314Oj/00r3/ABhvOY/Yf5r8Zfc0+s2BgDAIdOv79UNzJ/g/qv8AX1qvJLQPR+D8iDr2RP8A2x55/wB68dP+83NkWpI9V+JdQzRSPzqjcOy86uD28OPsegyNeJaBRteqXj0yaacftGlOk7DUezlZVJBknNuWh4pwscfCk0kFTD8Mj0Kux6Mov9CfqAl6c/M6e19vRZ/TNM7uXbap3IjNlXZBrHYlXl3zSoXSfYrCiLRKrzLx7FSxlA8TRi/WX8JhQAo5vz5GY5PheX59fY0mmbxpItGshHumz5g+bIPGT1muk5aPGjlIqzZ01comOi4bOETlOQ5DCU5RAQEQHNlP2cAYBzNyt5gceuFOqZXcXIvYsRRaoxTcpxTJU5Xlpukyij5qFYo1aQP8p2awvDGKUqKBBTRA/muFEUCnVIeXiVK/gfy+EHK2uc3uLmqeUVTrb+nwW1WNhfM6vLSLWUlYMa/cLDUV2Uk8ZIoNTvRXgDKHKQvhJ4/CAmAAMaLTPUO3LQ6tykMw7rG8Ybt0+OpnfJ+jJOarXblfG3J/j3Y41JRqzjizNl+c7iMilSnOKa9A2Ag5ZCn4/MBumgoIAVYvfGmTJLKXGvH48/XeaAvTo50a56g3F2h75pD1g3sa8e1gts0hFcppDXmzo5oiFlrr1uKh1yR67g3vcYubuDuNXRUAfEJyk0nc0+1aM7sykGARidTzqi6Q6amn17NcHTK37ptcc9T07pRlIJJz1vlClVQSnJwqZjua/r6JeF/o6SOTsYSig3BRwIECN2Giu9DPH4gbQtW7+q1xq3NelWC102vzp1hsS1qRTQrCMNYbfuKLnZYI5iQxytGRHj0xUk/EYSkAAERHuOTlYkXedzVzzRRgFLH2uv8AZ3BL+48gf8upsy9fgSXVXj9idLoJ/VHcMv4IX/8AXNsjEdPi/M0+XgvJEvmaIZ8XtVlcl47qCawnnhFPkm08XamSFX7B5XmQV/2KzlUCHKUv4ZFV2kc5REwgVUg+gGDM8yT0XxLgPSJ2fVdt9NThlZ6i4aKsovRVJoco2aHTEYyz63jE6JZo1yiQ5ztnLear6xvAfwmMmcp+3Y4ZY6Gnnn2okcykGARxdQ3qicYunFr5aw7dsaVi2ZLxrhxrrRdWfM1tiXp4XxJNljtTCqWqVMHQeFzNPyFapEKcESuVylbnjdvEtub09aFBfokShpzrAcVJw6ANTTe0NjTJmpVPOK2NK6/2C/FsVYSJisCAuPAB/CXxdu/YO/bMozF3nftuagubKMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYBnX+1MqpE6ksSB1EyD97HrUexjlKPb5ybF9ewiA9szzJPReBef4EiA8GOF4gICA8TuOggIeoCA6fp3YQH7QHKtDUtX4nWOUgwBgGYD05VkR64WjygqmJh5p3sAKByiIj84bz6AHfv3zH7D/NfjL7mn9mwMAYBDn1/wAxS9IXmSYxgKUK/qruYwgAB/s9arD1EfQPXJLQPR+D8iDj2RBRM8jz08ByH7NeOffwmA3bufc/bv2Ee3ftkWpI9V+P2LqeaKMAqidcPoMSnJqwWLl9wyh4tPeUiid/uHTIrs4eP3Cs1QKQblTnTkW8ZHbNM2SAHzZwdJtOgUFPMI+AwvMtWeQa4vEgo4U9brnz0wlw43bYpj3ZeuaI6PEG0dvlpYadsnWaTdQhF4anWt2zNYYGNRKl4UI+SZyca3KI+6pIgYRGJ9gu1lNfn9/WZOJAe1q8ZHMR59n4n77hp0EgMaMhLLruxxgrCIAKac09kq05MmAdx8ZmRBH/ANXLdi8O/wCS/JxfyQ9rG3HZop3BcWuNlT1S6epLtEbztqzKbInmii30W72FqMExrNebyCXcBKV65k0BN+MkcPTF2OKPJX8fX3OK+PfTL6pPWc2vHb45MWjYNV1rLKonfb63oxeMkwrThyo4UitFapVCFB+wMXzPdiR7WNr6an9McgbsU0XcOFvr5Ls/bl4v6l9fh5xP1bwj49UHjbp0s6ek0Fq/8iQs0qpLz85MTUi5mbBPSroSItU3cxMPVlzItkkGqAHAiSZCAAZpKw8NDpvKCNTqi9NfWPUv4+qaxtL1KobNprl9ZNK7SIy99c0m1uGyaDtlJNiGTXkqbaUGyTeVaEOUxippLp/hm6WRq4yeT0KBjJz1LOhNyWduwZWHT9idqjHuVXzBW06C33V2K5hS8Dk5U67cIwyawmROmo1nIhRUQAWjgDAGfMnvQ/tfy/bz+BPJq72uBiWvM2+6+GMgtbEkQB/L6p2kzSrkguHbuozr9wrykpDom9R8B5J8IfDxj8ct2Xij3+f4PFeS3tYe5bZXnsBxa441jTki+bqtC7C2nZybNnYxVURBF/AVGNh67WEJFH0EgSCso3E34yBw9MXZHJLRfP19zn/p59Hnl71VNyE5b88p/ZsFpOwyTOwWC7bDcPmm1t8NG5iKNa3r2Nkk0XNXoJm5SoBKe7t2LdqPlRiKhgEyJZ6aFs3nP1+F67zynf2gapxg9os1rqakQcVU6K35jcVrXRq1DoJMomFq90ea6nmMVFtEx8CLKOculm5Ch3H8EPiHxd8crd5Xb2ifavtb7Gj1miDAKV3tdqiZH3BHxnITujyC7eIxS9+w6m79u4h37Zl6/AkuqvEnU6CJin6RnDExTAYo0+/9jFEBAf8AZm2QHoIeg4jp8X5mny8F5Il9zRCDvrodL2V6jPHSCk9TpxyfJPRD2YsWr0JBdtHM71BTbZonb9Zv5ZwZFGPXmwi2rqMcuD+7t5BqUigppOVliR9otdWKbHAbqj8y+jtsS76cmqA/kqOvZjuto8ZNwNJqnykDbECoMn1iqb5ZqpJ0izvWDQiK6oNnkbIpJpHVQVMkgqnO9ETcfdksiw3He1rcaFa/71LcTt8sbR5QCMLH2jXkpCeeJTCJC2Rw/iXgoFMAB4xjCm7D38A9u2Lst49/yX5I5+S3tP3Mzfqo614e6Zg9CLWdROJi5RqRxu7dr9d4BmoNay1NBMavHPXgrACflw0g6SU8IpLFMHfF3zJxK9oq79cv9z0Dp/ez3cl+WexycoeqJYdgVevT0olZpXXdwsUhLcg9vuwVKqVLYs09eO5HW1ccCAkWbqKDOnSKKJEWAGIuBL5Ftneeb7PXkjkjhXpyG47+0iQukK8wSh61rvlVvCFp8STuQrGlrUm/ytObIkUUUU8hGsyDUpO5jD4QD1H45F9wrKp3Wf1VzRfzYGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAGAMA4U5HfzMz5/I/fdfeKfdR+brDyPvjvuAfP75p+8v/kvyfum/64vm773717v4f6G8zzfB9Lx5Hw87Glx2yvY7GpfzO+Z1T+5582vuf/NqC+Y3zL+S/md8zvktr82fmn8h/wCovza+RfI9w9z/AKF918Hlfg/Dl8NCO989T7LggwBgEeNE/mT33Yoj7mP8zx++A+dr/wCQfmJ97b92L59+c9+U/kj5v/69fnb7x7z5/k/0Z4/M8fr4sz7vKxt8fO5IdmjAwBgHle7PuI/cvtf3x33K/uLeRHfPj7tnzS+5f7r8sxvyR86/n3/rU8j5w+6e7e+fR998nwfhfBh256FV75anj3F/7xLx3T7y770rzfDA/dE+9f8AuO+Pw95b5sfPT7lH0vD39+9w9+/9v5X/AKTIrcrFfF/Vc61ymRgDAOCualf6aloj46E59OOILUj1mYkAtyPs2rahPEZeabxDWLBc5aEsTBDz/F3Mwcph4+/ce+TLmXNL/p+hD9I8FvZe5OQLJE2fwjjyAbxmYRPPtg0i1B9O4GahvpQCpmEPxSmKUO/oAB2yWXaycUeyJ2jxZ1T0E9X26LZcXJXp2ymxl3SBYFSC3LqLbuxQfgoBmwwD+x3m62xs+FQv0RaKEUEe4B8e2LRWpU2+rr3fsTS+np+X7P8A/WaIMAYAwDxvfROPymtJonJ0dPhp85kSWEd6HpqeugUMCgNhlVL4YtcTW9TeUZUQOA9xKPfI7cyq9/d1IC7pw39mFvMi4kneweA0A+cOFF3PzI5t1imsxUOICZNOFr+7WUIySKIehEGyRQ7/AAyWRLx58P0Pf+M2iPZ6dRXeENx7sPT0ndmqu2yNdWc8h9Y7mux5XzS+6qV1tc9kXSQay4reHyzsEklvH28Pri0Sp3fuWv3a/knZzRDjXY38z3++ArP3XPvNfvp/fqh8zvujfcS++A+Uvey/MH5s/Ob/AGRffvfu3yP7r+E83t7t9LJ7t+VzXvWyvY7KymRgHJfKD7xPxUz79D70vx9pz7nv30H3HfF2/wBTPnJ8zPurevb9h+/e4/8AsfN/cZHw87FXF/Tc9j0t9xX7mFT+92+5d9xj3R58xfuLfNP7mHuPyq/+UPmn8xv9anuny37153uf0PevN8X4Tx4VuWgd756nqOUgwCPfm7VumDcm8XAdQB1w9ZunjIfm8vyIuOsaJbSRwKKAb5sWW0zldtrFl55jd/cXSZBP6j9IA7R8N89S3aWfV79CJE/Bb2XpSUCWDZ3CMiQHA4xSXP1mSFN9LxeEzUN+ePwD37dgUD0+GSyJePZElO4R07pO0Z8rAcBnnCt9Z2zJwL1xoW86s2HsM0cKfZ18qWSDsNnvLph5YfTBw7OmAfHLlfvLdtZdXu0JKMpDjf8A+z5++Y/+5v8AfjfKv/8ABP75j5c+bY//ANUvlX5o/wD875N/9jkyvyua963Ox2RlMjAGAMAYAwBgDAGAMAYAwBgDAGAMAYAwBgDAP//Z"> </div> <div class="h-standardPaddingTop"> <span class="h-text-bold">age <%= obj.ageRating %>+</span> </div> <div class="h-standardPaddingTop"> <span class="h-text-bold"><%= obj.oneLiner %></span> </div> <div class="h-standardPaddingTop"> <h3 class="title--category title-charlie">what parents need to know</h3> </div> <div> <%= obj.parentsNeedToKnow %> </div> <div class="h-standardPaddingTop"> <div class="l-row"> <div class="l-col-xs-12 l-col-lg-8 l-col-xl-6 l-col-nopadding"> <% _.each(obj.contentGrid, function (item, index) { %> <div class="l-row"> <div class="l-col-xs-8 l-col-nopadding"> <a href="#" class="link link-underline h-text-bold js-commonSense-openDetailModal" data-behavior="modal" data-content-item="<%= index %>" data-target="#pdpModelId" aria-label="details on <%= item.label %>"><%= item.label.toLowerCase() %></a> </div> <div class="l-col-xs-4 l-col-nopadding"> <div class="h-float-right"> <div aria-hidden="true"> <% _.times(item.rating, function (bullet) { %> <div class="h-float-left"> <svg width="14px" height="10px" x="4px" y="0px" viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve"> <circle fill="#333333" stroke="#333333" stroke-width="7" stroke-miterlimit="10" cx="30" cy="30" r="26"/> </svg> </div> <% }) %> <% _.times((5 - item.rating), function (bullet) { %> <div class="h-float-left"> <svg width="14px" height="10px" x="4px" y="0px" viewBox="0 0 60 60" enable-background="new 0 0 60 60" xml:space="preserve"> <circle fill="none" stroke="#888888" stroke-width="7" stroke-miterlimit="10" cx="30" cy="30" r="26"/> </svg> </div> <% }) %> </div> <span class="h-sr-only">rating <%= item.rating %> out of 5</span> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <hr class="h-tightSpacing"> </div> </div> <% }) %> </div> </div> </div> <div class="h-tinyPaddingTop"> <h3 class="title--category title-charlie">families can talk about...</h3> <ul class="vList-bulleted"> <% _.each(obj.talkingPoints, function (talkingPoint) { %> <li class="h-tinyPaddingBottom"><%= talkingPoint %></li> <% }) %> </ul> </div> <div class="h-standardPaddingTop"> <span class="h-text-grayDark">Provided by Common Sense Media. For more information, visit <a class="h-text-underline" href="http://www.commonsense.org" target="_blank">commonsense.org</a></span> </div> '}),define("views/common/browse/expertReviews/common-sense-review.view",["underscore","Target","page","models/browse/expertReviews/common-sense-review.model","text!templates/common/browse/expertReviews/common-sense-review.html"],function(e,t,n,r,i){var s=n.extend({initialize:function(e){this.$el=e.$el,this.model=new r},render:function(t){var n=this;this.model.fetch({vendorUrl:t.vendorUrl,success:function(t){var r;t.attributes.content&&(r=e.template(i,JSON.parse(t.attributes.content))),n.$el.html(r),n.$el.find(".js-commonSense-logo").focus()},error:function(e){console.log("error:"+JSON.stringify(e))}})},openDetailModal:function(e){var t=JSON.parse(this.model.get("content")).contentGrid,n=$(e.currentTarget).data("content-item"),r,i;t&&t[n]&&(t[n].label&&(r=t[n].label.toLowerCase()),t[n].text&&(i=t[n].text.toLowerCase())),setTimeout(function(){$("#pdpModelId .js-modal-title-display").html(r),$("#pdpModelId .modal-body").html(i),$("#pdpModelId .TGTLazyLoading").hide()},0)},events:{"click .js-commonSense-openDetailModal":"openDetailModal"}});return s}),define("models/browse/questionAnswer/question.model",["jquery","underscore","backbone","Target","models/mixins/browse/datetime-to-english.model-mx"],function(e,t,n,r,i){var s=n.Model.extend({initialize:function(){this.validation.userEmail.required=r.getParameterByName("anonymousPurchaserFlag")==="yes"&&r.getParameterByName("productID")&&r.getParameterByName("orderId")||sessionStorage.getItem("guestType")==="P"},urlRoot:r.Config.grootReviewsUrl+"/secure/question",formFactor:function(){var e="";return r.deviceAtlas.isDesktop()?e="desktop":r.deviceAtlas.isPad()?e="tablet":r.deviceAtlas.isMobile()&&(e="mobile"),e},defaults:{CampaignId:"api_"+this.formFactor+"_pdp",AgreedToTermsAndConditions:!0},validation:{QuestionSummary:{required:!0,minLength:20,maxLength:200},UserNickName:{required:!0,pattern:/^(?!\s)[a-z0-9 ]{0,24}[a-z0-9]$/i},userEmail:{minLength:1,maxLength:255,pattern:"email"}},constructor:function(){n.Model.apply(this,arguments)},parse:function(e){var t=e||{};return t.SubmissionTime=this.datetimeToEnglish(t.SubmissionTime),t},postQuestion:function(e){var t=e||{};return t.xhrFields={withCredentials:!0},(this.sync||n.sync).call(this,"create",this,t)}}).mixin([i]);return s}),define("collections/browse/questionAnswer/questions.collection",["jquery","underscore","backbone","models/browse/questionAnswer/question.model"],function(e,t,n,r){var i=n.Collection.extend({urlRoot:Target.Config.draxUrl+"/questions",model:r,constructor:function(){n.Collection.apply(this,arguments)},initialize:function(){this.on("invalid",function(e,t){console.log("Error initializing: "+t)})},fetch:function(e){var t=e||{};return t.sortMethod=t.sortMethod||"recent_answered",t.sortTitle=t.sortTitle||"newest answers",t.filterMethod=t.filterMethod||"",t.limit=t.limit||10,t.offset=t.offset||0,t.url=this.urlRoot+"?product_id="+t.productId+"&sort_order="+t.sortMethod+"&limit="+t.limit+"&offset="+t.offset,n.Collection.prototype.fetch.call(this,t)}});return i}),define("text!templates/common/browse/questionAnswer/question-form.html",[],function(){return'<div id="bvTag-questionForm<%= instanceNumber %>"> <div class="l-container"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h3 class="title-text title-charlie js-questionAnswer-questionFormTitle" tabindex="-1">your question</h3> </div> </div> </div> </div> <div class="l-row is-hidden js-questionAnswer-errorSummary"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <h4 class="h-text-normal h-text-md h-text-orangeDark js-questionAnswer-errorSummaryHeading" tabindex="-1">review the following...</h4> <ul class="h-standardSpacingBottom js-questionAnswer-errorList"></ul> </div> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="questionTextArea<%= instanceNumber %>"> question <span class="h-sr-only">at least 20 characters</span> </label> <textarea id="questionTextArea<%= instanceNumber %>" rows="5" class="js-questionAnswer-composeQuestionTextarea" maxlength="200" required="required"></textarea> <span class="form--longInstruction" data-errortext="Questions must be at least 20 characters" aria-hidden="true"></span> </div> <div class="form--longInstruction h-standardSpacingBottom"> at least 20 characters </div> </div> </div> </div> <div class="l-row h-tightSpacingBottom js-questionAnswer-currentUserNicknameContainer"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <span class="js-questionAnswer-currentUserNickname"></span> </div> </div> </div> <div class="l-row js-questionAnswer-currentUserInfo"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="form form-input h-zeroMarginBottom js-questionAnswer-composeQuestionScreenName" data-behavior="forms"> <label for="questionScreenNameInput<%= instanceNumber %>"> screen name <span class="h-sr-only">This will be displayed with your question.</span> </label> <input id="questionScreenNameInput<%= instanceNumber %>" type="text" class="js-questionAnswer-questionScreenNameInput" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a screen name that does not contain spaces or special characters (must be less than 25 characters)" aria-hidden="true"></span> </div> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> this name will be displayed with your question </aside> </div> </div> </div> <div class="l-row is-hidden js-questionAnswer-userEmailContainer"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="js-questionAnswer-userEmail"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="questionUserEmailInput<%= instanceNumber %>"> email </label> <input id="questionUserEmailInput<%= instanceNumber %>" type="text" class="js-questionAnswer-composeQuestionUserEmail" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a valid email" aria-hidden="true"></span> </div> </div> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> provide a valid email address </aside> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr class="h-tinySpacingTop"> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> by submitting, I agree to the <a href="#" class="link link-underline js-questionAnswer-openTermsModal" data-behavior="modal" data-target="#pdpModelId" aria-label="Q & A - guidelines">q&a guidelines</a> </div> </div> </div> <div class="l-row l-row-halfpadding h-standardSpacingTop"> <div class="l-visible-lg l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-questionAnswer-hideComposeQuestionPanel">cancel</button> </div> </div> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-questionAnswer-submitQuestion" aria-label="Submit question for this product.">submit question</button> </div> </div> <div class="l-hidden-lg l-col-xs-12 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-questionAnswer-hideComposeQuestionPanel">cancel</button> </div> </div> </div> </div> '}),define("text!templates/common/browse/questionAnswer/guidelines.html",[],function(){return'<p class="h-standardPaddingBottom">Please focus your question or answer on the item itself, and keep it concise.</p> <p class="h-standardPaddingBottom">If you have questions regarding Target.com, customer services, shipping or purchasing items, please call 1-800-591-3869. If you have questions regarding a health or safety issue with a product, please call Target Guest Relations at 1-800-440-0680. All submitted questions or answers become the licensed property of Target.com, subject to the terms set forth in our <a target="_blank" href="http://www.target.com/spot/terms-conditions" class="link link-underline">Terms and Conditions</a>, including Target\'s right (but not an obligation) to monitor, alter, remove or refuse to post or allow to be posted any User Content. Product questions and answers constitute "User Content" under our <a target="_blank" href="http://www.target.com/spot/terms-conditions" class="link link-underline">Terms and Conditions</a>. Your question or answer will be posted in one to two days. We\'ll post your nickname with your post.</p> <p class="h-standardPaddingBottom">You may not submit copyrighted images or other content unless you own the copyright to such content, or have the express authorization of the copyright owner to do so.</p> <p class="h-standardPaddingBottom">Any questions or answers that we believe to be in violation of these guidelines may be removed at our sole discretion and without notice. Target does not endorse, recommend or sponsor any User Content, including product questions, answers, ideas or advice.</p> <p>Target reserves the right to make changes to the q&amp;a <a target="_blank" href="http://help.target.com/help/subcategoryarticle?childcat=Product+Reviews&parentcat=Policies+%26+Guidelines&searchQuery=search+help" class="link link-underline">guidelines</a> ("Guidelines") at any time and such changes will be effective immediately upon being posted here. Each time you submit a question or answer, you should review the current <a target="_blank" href="http://help.target.com/help/subcategoryarticle?childcat=Product+Reviews&parentcat=Policies+%26+Guidelines&searchQuery=search+help" class="link link-underline">Guidelines.</a></p> '}),define("views/common/browse/questionAnswer/question-form.view",["underscore","backbone","Target","page","models/browse/questionAnswer/question.model","models/browse/reviews/nickname.model","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/questionAnswer/question-form.html","text!templates/common/browse/reviews/review-alert.html","text!templates/common/browse/questionAnswer/guidelines.html","backboneValidation"],function(e,t,n,r,i,s,o,u,a,f){var l=r.extend({initialize:function(e){this.$el=e.$el,this.instanceNumber=e.instanceNumber,this.model=new i,this.nicknameModel=new s},render:function(n){var r=n||{},i=e.template(u,{instanceNumber:this.instanceNumber});t.Validation.bind(this),this.$el.html(i),r.success&&r.success()},model:null,getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},hideComposeQuestionPanel:function(){var e=$(".js-questionAnswer-composeQuestionPanel"),t=$(".js-questionAnswer-showComposeQuestionPanel"),n=$(".js-questionAnswer-questionAlerts");e.addClass("is-hidden"),t.removeClass("is-hidden").eq(0).focus(),n.addClass("is-hidden").empty()},onHideComposeQuestionPanel:function(){this.hideComposeQuestionPanel(),this.resetView()},invalidateFormControl:function(e){e.parent().addClass("is-invalid"),e.addClass("is-invalid")},resetViewControlValidation:function(e){e.parent().removeClass("is-invalid"),e.removeClass("is-invalid")},validateText:function(e){var t=this.$el.find(".js-questionAnswer-composeQuestionTextarea"),n=this.removeHtmlTags(t.val()),r=this.model.preValidate("QuestionSummary",n),i=this.$el.find(".js-questionAnswer-errorList"),s=t.parent().find("label");if(e.type==="keyup"&&n.length<20)return;this.model.set("QuestionSummary",n),r?(this.invalidateFormControl(t),this.$el.find(".js-questionAnswer-errorMessage-text").length||(i.append('<li class="js-questionAnswer-errorMessage-text"><a href="#questionTextArea'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-questionAnswer-navigateToError">'+"please enter question text"+"</a>"+"</li>"),s.find(".js-questionAnswer-errorLabel").length||s.append('<span class="h-sr-only js-questionAnswer-errorLabel" aria-atomic="true" aria-live="polite">Questions must be at least 20 characters</span>'))):(this.resetViewControlValidation(t),this.$el.find(".js-questionAnswer-errorMessage-text").remove(),s.find(".js-questionAnswer-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"))},validateScreenName:function(){var e=this.$el.find(".js-questionAnswer-questionScreenNameInput"),t=this.removeHtmlTags(e.val()),n=this.model.preValidate("UserNickName",t),r=this.$el.find(".js-questionAnswer-errorList"),i=e.parent().find("label");this.model.set("UserNickName",t),n?(this.invalidateFormControl(e),this.$el.find(".js-questionAnswer-errorMessage-screenName").length||(r.append('<li class="js-questionAnswer-errorMessage-screenName"><a href="#questionScreenNameInput'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-questionAnswer-navigateToError">'+"please enter a screen name"+"</a>"+"</li>"),i.find(".js-questionAnswer-errorLabel").length||i.append('<span class="h-sr-only js-questionAnswer-errorLabel" aria-atomic="true" aria-live="polite">Please enter a screen name that does not contain special characters (must be less than 25 characters)</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-questionAnswer-errorMessage-screenName").remove(),i.find(".js-questionAnswer-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"))},validateUserEmail:function(){var e=this.$el.find(".js-questionAnswer-composeQuestionUserEmail"),t=e.val(),n=this.model.preValidate("userEmail",t),r=this.$el.find(".js-questionAnswer-errorList"),i=e.parent().find("label");this.model.set("userEmail",t),n?(this.invalidateFormControl(e),this.$el.find(".js-questionAnswer-errorMessage-email").length||(this.$el.find(".js-questionAnswer-errorList").append('<li class="js-questionAnswer-errorMessage-email"><a href="#questionUserEmailInput'+this.instanceNumber+'" class="h-text-orangeDark link-underline '+'js-questionAnswer-navigateToError">'+"please enter a valid email"+"</a>"+"</li>"),i.find(".js-questionAnswer-errorLabel").length||i.append('<span class="h-sr-only js-questionAnswer-errorLabel" aria-atomic="true" aria-live="polite">Please enter a valid email</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-questionAnswer-errorMessage-email").remove(),i.find(".js-questionAnswer-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"))},submitQuestion:function(t){var n=this,r=this.$el.find(".js-questionAnswer-questionScreenNameInput").val(),i=$(".js-questionAnswer-questionAlerts"),s={title:"thanks for asking a question!",subtitle:"We check every submission for inappropriate or offensive content. Your question may take a few days to appear."},o={title:"we&#39;re sorry.",subtitle:"There was an error while posting your question.<br />Unless your submission contains unsupported emoji characters or inappropriate language, please try again in a little while."},u;this.validateText(t),this.validateScreenName(),this.isPartialUser()&&this.validateUserEmail(),this.model.isValid(!0)?(this.model.set("ProductId",this.getProductId()),this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"),this.model.postQuestion({success:function(t){t.HasErrors?(n.createAlert({container:i,alertType:"warning",alertText:o}),typeof t.Errors=="string"?console.log(">>> "+t.Errors):e.each(t.Errors,function(e){console.log(">>> "+e.Message)})):(n.setUserNickname(r),n.hideComposeQuestionPanel(),n.resetView(),n.createAlert({container:i,alertType:"success",alertText:s}));try{u=n.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="Submit_Question_Success",u.bvAttributes={containerId:"bvTag-questionForm"+n.instanceNumber},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}},error:function(e){n.createAlert({container:i,alertType:"warning",alertText:o}),console.log(e.responseText)}})):(this.$el.find(".js-questionAnswer-errorSummary").removeClass("is-hidden"),this.$el.find(".js-questionAnswer-errorSummaryHeading").focus());try{u=n.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="Submit_Question_Button",u.bvAttributes={containerId:"bvTag-questionForm"+n.instanceNumber},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}},removeHtmlTags:function(e){return e.trim().replace(/<(?:.|\n)*?>/gm,"")},isPartialUser:function(){return sessionStorage.getItem("guestType")==="P"},setUserNickname:function(e){var t=$(".js-questionAnswer-currentUserNickname"),n=$(".js-questionAnswer-questionScreenNameInput"),r=$(".js-questionAnswer-currentUserInfo"),i=JSON.stringify({nickname:e||"",timeStamp:(new Date).getTime()});window.sessionStorage.setItem("userNickname",i),t.html("screen name: "+e).toggleClass("is-hidden",!e),n.val(e),r.toggleClass("is-hidden",Boolean(e))},createAlert:function(t){var n=t.alertType==="success"?"h-text-greenDark":"h-text-orangeDark",r=e.template(a,{alertTextClass:n,alertText:t.alertText});$(t.container).html(r).removeClass("is-hidden").focus()},resetView:function(){this.render()},navigateToError:function(e){var t=$(e.currentTarget).attr("href");e.preventDefault(),this.$el.find(t).focus()},openTermsModal:function(){setTimeout(function(){$("#pdpModelId .js-modal-title-display").html("q&a guidelines"),$("#pdpModelId .modal-body").html(f),$("#pdpModelId .TGTLazyLoading").hide()},0)},events:{"click .js-questionAnswer-hideComposeQuestionPanel":"onHideComposeQuestionPanel","click .js-questionAnswer-submitQuestion":"submitQuestion","blur .js-questionAnswer-composeQuestionTextarea":"validateText","keyup .js-questionAnswer-composeQuestionTextarea":"validateText","blur .js-questionAnswer-questionScreenNameInput":"validateScreenName","keyup .js-questionAnswer-questionScreenNameInput":"validateScreenName","blur .js-questionAnswer-composeQuestionUserEmail":"validateUserEmail","click .js-questionAnswer-navigateToError":"navigateToError","click .js-questionAnswer-openTermsModal":"openTermsModal"}}).mixin([o]);return l}),define("models/browse/questionAnswer/answer.model",["jquery","underscore","backbone","Target","models/mixins/browse/datetime-to-english.model-mx"],function(e,t,n,r,i){var s=n.Model.extend({initialize:function(){this.validation.userEmail.required=r.getParameterByName("anonymousPurchaserFlag")==="yes"&&r.getParameterByName("productID")&&r.getParameterByName("orderId")||sessionStorage.getItem("guestType")==="P"},urlRoot:r.Config.grootReviewsUrl+"/secure/answer",idAttribute:"Id",defaults:{CampaignId:"mobile_pdp",AgreedToTermsAndConditions:!0},validation:{AnswerText:{required:!0,minLength:20,maxLength:1e4},UserNickName:{required:!0,pattern:/^(?!\s)[a-z0-9 ]{0,24}[a-z0-9]$/i},userEmail:{minLength:1,maxLength:255,pattern:"email"}},constructor:function(){n.Model.apply(this,arguments)},parse:function(e){var t=e||{};return t.SubmissionTime=this.datetimeToEnglish(t.SubmissionTime),t},postAnswer:function(e){var t=e||{};return t.xhrFields={withCredentials:!0},(this.sync||n.sync).call(this,"create",this,t)}}).mixin([i]);return s}),define("text!templates/common/browse/questionAnswer/answer.html",[],function(){return'<div class="h-tightSpacingTop js-questionAnswer-answerRow" data-answer-id="<%= answer.Id %>" id="bvTag-answer<%= answer.Id %>"> <div data-scroll-offset="125" class="h-standardSpacingBottom js-questionAnswer-answer"> <% if (answer.AnswerText) { %> <div class="h-tinySpacingTop h-text-md"> <span class="h-text-bold">A:</span> <h4 class="h-display-inline h-text-normal h-text-md js-questionAnswer-answerText" tabindex="-1"> <%- answer.AnswerText.substring(0, truncatedLength) %><% if (answer.AnswerText.length > truncatedLength) { %>...<% } %> </h4> <h4 class="h-display-inline h-text-normal h-text-md is-hidden js-questionAnswer-answerText"> <%- answer.AnswerText %> </h4> <% if (answer.AnswerText && answer.AnswerText.length > truncatedLength) { %> <span class="h-inlineWrap"> &nbsp;<a href="#" class="link-underline xh-inlineWrap js-questionAnswer-showExpandedAnswer">see more <% if (answer.UserNickname) { %><span class="h-sr-only">of <%= answer.UserNickname %>\'s answer</span><% } %></a> </span> <div class="h-tinySpacingTop"> <a href="#" class="link-underline js-questionAnswer-hideExpandedAnswer is-hidden">see less <% if (answer.UserNickname) { %><span class="h-sr-only">of <%= answer.UserNickname %>\'s answer</span><% } %></a> </div> <% } %> </div> <% } %> <div class="h-text-grayDark h-text-sm h-tinySpacingTop"> <span class="h-sr-only">submitted by </span> <% if (answer.UserNickname) { %><%= answer.UserNickname %> &mdash;<% } %> <span class="h-tightSpacingRight"><%= answer.SubmissionTime %></span> <span class="h-inlineWrap"> <a href="#" class="link-underline h-tightSpacingRight js-questionAnswer-voteHelpful">helpful (<span class="js-questionAnswer-feedbackTotal"><%= answer.TotalPositiveFeedbackCount %></span>)</a> <a href="#" class="link-underline h-tightSpacingRight js-questionAnswer-voteNotHelpful">not helpful (<span class="js-questionAnswer-feedbackTotal"><%= answer.TotalNegativeFeedbackCount %></span>)</a> </span> <% if (answer.Badges.Staff) { %> <div class="h-text-red h-tinySpacingTop test-questionAnswer-teamMemberBadge">Target Team Member</div> <% } %> <% if (answer.IsBrandAnswer && answer.BrandImageLogoURL) { %> <span class="h-sr-only">User badge</span> <div> <img class="questionAnswer--syndicatedAnswerLogo h-tinySpacingTop test-questionAnswer-vendorBadge" alt="<%- answer.UserNickname %> vendor logo" src="<%= answer.BrandImageLogoURL %>"> </div> <% } %> </div> </div> </div> '}),define("views/common/browse/questionAnswer/answer.view",["underscore","Target","page","models/browse/reviews/feedback.model","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/questionAnswer/answer.html"],function(e,t,n,r,i,s){var o=n.extend({initialize:function(){},render:function(t){if(typeof this.model=="undefined")return;var n=e.template(s,{questionId:t.questionId,answer:this.model.attributes,truncatedLength:t.truncatedLength});this.questionId=t.questionId,this.$el.html(n),t.container.append(this.el)},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},feedbackVote:function(e){var t=this,n=$(e.currentTarget),i=new r({ContentId:this.model.get("Id"),ContentType:"answer"}),s=n.hasClass("js-questionAnswer-voteHelpful")?"Positive":"Negative",o,u;s==="Positive"?o=this.model.get("TotalPositiveFeedbackCount"):o=this.model.get("TotalNegativeFeedbackCount"),e.preventDefault(),i.postHelpfulnessVote({voteType:s,success:function(){var e=$("<div/>").addClass("h-display-inline h-tightSpacingRight").html(n.html()).attr({tabindex:"-1",role:"alert"});n.hasClass("js-questionAnswer-voteHelpful")?(e.addClass("h-text-greenDark"),t.$el.find(".js-questionAnswer-voteNotHelpful").remove()):n.hasClass("js-questionAnswer-voteNotHelpful")&&(e.addClass("h-text-orangeDark"),t.$el.find(".js-questionAnswer-voteHelpful").remove()),n.replaceWith(e),e.find(".js-questionAnswer-feedbackTotal").html(o+1),e.focus()},error:function(){console.log("error voting")}});try{u=this.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="QuestionAnswer_Submit_Feedback_Vote_Button",u.detail1="questionAnswer_"+(s==="Positive"?"helpful":"nothelpful"),u.bvAttributes={containerId:"bvTag-answer"+this.model.get("Id")},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}},overtAccessibilityToggle:function(e){$(e).each(function(e,t){$(t).hasClass("is-hidden")?$(t).removeClass("is-hidden").removeAttr("aria-hidden"):$(t).addClass("is-hidden").attr("aria-hidden","true")})},toggleExpandedAnswer:function(e){var t=this.$el.find(".js-questionAnswer-answerText, .js-questionAnswer-showExpandedAnswer, .js-questionAnswer-hideExpandedAnswer, .js-questionAnswer-expandedAnswerContent");this.overtAccessibilityToggle(t),this.$el.find(e.focusSelector).focus()},showExpandedAnswer:function(e){var t;e.preventDefault(),this.toggleExpandedAnswer({focusSelector:".js-questionAnswer-answerText:visible"});try{t=this.bvBaseInViewData(),t.bvProduct="AskAndAnswer",t.name="QuestionAnswer_Show_Expanded_Answer",t.bvAttributes={containerId:"bvTag-answer"+this.model.get("Id")},window._bvapiq.push(["FeatureUsed",t])}catch(n){console.log(n)}},hideExpandedAnswer:function(e){var t;e.preventDefault(),this.toggleExpandedAnswer({focusSelector:".js-questionAnswer-showExpandedAnswer"});try{t=this.bvBaseInViewData(),t.bvProduct="AskAndAnswer",t.name="QuestionAnswer_Hide_Expanded_Answer",t.bvAttributes={containerId:"bvTag-answer"+this.model.get("Id")},window._bvapiq.push(["FeatureUsed",t])}catch(n){console.log(n)}},events:{"click .js-questionAnswer-showExpandedAnswer":"showExpandedAnswer","click .js-questionAnswer-hideExpandedAnswer":"hideExpandedAnswer","click .js-questionAnswer-voteHelpful, .js-questionAnswer-voteNotHelpful":"feedbackVote"}}).mixin([i]);return o}),define("text!templates/common/browse/questionAnswer/answer-form.html",[],function(){return'<div id="bvTag-answerForm<%= questionId %>_<%= instanceNumber %>"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="title title-left"> <h3 class="title-text title-charlie js-questionAnswer-answerFormTitle" tabindex="-1">your answer</h3> </div> </div> </div> </div> <div class="l-row is-hidden js-questionAnswer-errorSummary"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <h4 class="h-text-normal h-text-md h-text-orangeDark js-questionAnswer-errorSummaryHeading" tabindex="-1">review the following...</h4> <ul class="h-standardSpacingBottom js-questionAnswer-errorList"></ul> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="answerTextArea<%= questionId %>_<%= instanceNumber %>"> answer </label> <textarea id="answerTextArea<%= questionId %>_<%= instanceNumber %>" rows="6" class="js-questionAnswer-composeAnswerTextarea" maxlength="10000" required="required"></textarea> <span class="form--longInstruction" data-errortext="Answers must be at least 20 characters" aria-hidden="true"></span> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> at least 20 characters. </aside> </div> </div> </div> <div class="l-row h-tightSpacingBottom js-questionAnswer-currentUserNicknameContainer"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <span class="js-questionAnswer-currentUserNickname"></span> </div> </div> </div> <div class="l-row js-questionAnswer-currentUserInfo"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="form form-input h-zeroMarginBottom js-questionAnswer-composeAnswerScreenName" data-behavior="forms"> <label for="answerScreenNameInput<%= questionId %>_<%= instanceNumber %>"> screen name <span class="h-sr-only">This will be displayed with your answer.</span> </label> <input id="answerScreenNameInput<%= questionId %>_<%= instanceNumber %>" type="text" class="js-questionAnswer-answerScreenNameInput" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a screen name that does not contain spaces or special characters (must be less than 25 characters)" aria-hidden="true"></span> </div> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> this name will be displayed with your answer </aside> </div> </div> </div> <div class="l-row is-hidden js-questionAnswer-userEmailContainer"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <div class="js-questionAnswer-userEmail"> <div class="form form-input h-zeroMarginBottom" data-behavior="forms"> <label for="answerUserEmailInput<%= questionId %>_<%= instanceNumber %>"> email </label> <input id="answerUserEmailInput<%= questionId %>_<%= instanceNumber %>" type="text" class="js-questionAnswer-composeAnswerUserEmail" maxlength="255" required="required"> <span class="form--longInstruction" data-errortext="Please enter a valid email" aria-hidden="true"></span> </div> </div> </div> <aside class="form--longInstruction h-standardSpacingBottom" aria-hidden="true"> provide a valid email address </aside> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr class="h-tinySpacingTop"> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> by submitting, I agree to the <a href="#" class="link link-underline js-questionAnswer-openTermsModal" data-behavior="modal" data-target="#pdpModelId" aria-label="Q & A - guidelines">q&a guidelines</a> </div> </div> </div> <div class="l-row l-row-halfpadding h-standardSpacingTop"> <div class="l-visible-lg l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-questionAnswer-hideComposeAnswerPanel">cancel</button> </div> </div> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-questionAnswer-submitAnswer" aria-label="Submit answer for this question.">submit answer</button> </div> </div> <div class="l-hidden-lg l-col-xs-12 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-questionAnswer-hideComposeAnswerPanel">cancel</button> </div> </div> </div> </div> '}),define("text!templates/common/browse/questionAnswer/signin-popover-link.html",[],function(){return'<a href="#" class="js-questionAnswer-signIn"><%= text %></a> '}),define("views/common/browse/questionAnswer/answer-form.view",["underscore","backbone","Target","page","models/browse/questionAnswer/answer.model","models/browse/reviews/nickname.model","models/browse/reviews/user-status.model","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/questionAnswer/answer-form.html","text!templates/common/browse/reviews/review-alert.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/questionAnswer/signin-popover-link.html","text!templates/common/browse/questionAnswer/guidelines.html","backboneValidation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=r.extend({initialize:function(e){this.$el=e.$el,this.questionId=e.questionId,this.instanceNumber=e.instanceNumber,this.model=new i,this.nicknameModel=new s,this.userStatusModel=new o,t.Validation.bind(this)},render:function(t){var n=t||{},r=e.template(a,{questionId:this.questionId,instanceNumber:this.instanceNumber});this.$el.html(r),n.success&&n.success()},model:null,getUserStatus:function(){var e=this;this.userStatusModel.fetch({success:function(t){e.getUserNickname(t.attributes.profile.memberId)}})},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},onHideComposeAnswerPanel:function(){this.hideComposeAnswerPanel(),this.resetView()},hideComposeAnswerPanel:function(){var e=$('[data-question-id="'+this.questionId+'"]'),t=e.find(".js-questionAnswer-composeAnswerPanel"),n=e.find(".js-questionAnswer-showComposeAnswerPanel"),r=e.find(".js-questionAnswer-answerAlerts");t.addClass("is-hidden"),n.removeClass("is-hidden").focus(),r.addClass("is-hidden").empty()},invalidateFormControl:function(e){e.parent().addClass("is-invalid"),e.addClass("is-invalid")},resetViewControlValidation:function(e){e.parent().removeClass("is-invalid"),e.removeClass("is-invalid")},validateText:function(e){var t=this.$el.find(".js-questionAnswer-composeAnswerTextarea"),n=this.removeHtmlTags(t.val()),r=this.model.preValidate("AnswerText",n),i=this.$el.find(".js-questionAnswer-errorList"),s=t.parent().find("label");if(e.type==="keyup"&&n.length<20)return;this.model.set("AnswerText",n),r?(this.invalidateFormControl(t),this.$el.find(".js-questionAnswer-errorMessage-text").length||(i.append('<li class="js-questionAnswer-errorMessage-text"><a href="#answerTextArea'+this.questionId+"_"+this.instanceNumber+'" '+'class="h-text-orangeDark link-underline '+'js-questionAnswer-navigateToError">'+"please enter answer text"+"</a>"+"</li>"),s.find(".js-questionAnswer-errorLabel").length||s.append('<span class="h-sr-only js-questionAnswer-errorLabel" aria-atomic="true" aria-live="polite">Answers must be at least 20 characters</span>'))):(this.resetViewControlValidation(t),this.$el.find(".js-questionAnswer-errorMessage-text").remove(),s.find(".js-questionAnswer-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"))},validateScreenName:function(){var e=this.$el.find(".js-questionAnswer-answerScreenNameInput"),t=this.removeHtmlTags(e.val()),n=this.model.preValidate("UserNickName",t),r=this.$el.find(".js-questionAnswer-errorList"),i=e.parent().find("label");this.model.set("UserNickName",t),n?(this.invalidateFormControl(e),this.$el.find(".js-questionAnswer-errorMessage-screenName").length||(r.append('<li class="js-questionAnswer-errorMessage-screenName"><a href="#answerScreenNameInput'+this.questionId+"_"+this.instanceNumber+'" '+'class="h-text-orangeDark link-underline '+'js-questionAnswer-navigateToError">'+"please enter a screen name"+"</a>"+"</li>"),i.find(".js-questionAnswer-errorLabel").length||i.append('<span class="h-sr-only js-questionAnswer-errorLabel" aria-atomic="true" aria-live="polite">Please enter a screen name that does not contain special characters (must be less than 25 characters)</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-questionAnswer-errorMessage-screenName").remove(),i.find(".js-questionAnswer-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"))},validateUserEmail:function(){var e=this.$el.find(".js-questionAnswer-composeAnswerUserEmail"),t=e.val(),n=this.model.preValidate("userEmail",t),r=this.$el.find(".js-questionAnswer-errorList"),i=e.parent().find("label");this.model.set("userEmail",t),n?(this.invalidateFormControl(e),this.$el.find(".js-questionAnswer-errorMessage-email").length||(this.$el.find(".js-questionAnswer-errorList").append('<li class="js-questionAnswer-errorMessage-email"><a href="#answerUserEmailInput'+this.questionId+"_"+this.instanceNumber+'" '+'class="h-text-orangeDark link-underline '+'js-questionAnswer-navigateToError">'+"please enter a valid email"+"</a>"+"</li>"),i.find(".js-questionAnswer-errorLabel").length||i.append('<span class="h-sr-only js-questionAnswer-errorLabel" aria-atomic="true" aria-live="polite">Please enter a valid email</span>'))):(this.resetViewControlValidation(e),this.$el.find(".js-questionAnswer-errorMessage-email").remove(),i.find(".js-questionAnswer-errorLabel").remove(),this.model.isValid(!0)&&this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"))},isPartialUser:function(){return sessionStorage.getItem("guestType")==="P"},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=this.$el.find(".js-questionAnswer-currentUserNickname"),o=this.$el.find(".js-questionAnswer-answerScreenNameInput"),u=this.$el.find(".js-questionAnswer-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).toggleClass("is-hidden",!n),o.val(n),u.toggleClass("is-hidden",Boolean(n)))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.UserNickname||""),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t))},error:function(e,t,n){console.log(n)},complete:function(){s.html("screen name: "+n).toggleClass("is-hidden",!n),o.val(n).toggleClass("is-hidden",Boolean(n))}})},setUserNickname:function(e){var t=this.$el.find(".js-questionAnswer-currentUserNickname"),n=this.$el.find(".js-questionAnswer-answerScreenNameInput"),r=this.$el.find(".js-questionAnswer-currentUserInfo"),i=JSON.stringify({nickname:e||"",timeStamp:(new Date).getTime()});window.sessionStorage.setItem("userNickname",i),t.html("screen name: "+e).toggleClass("is-hidden",!e),n.val(e),r.toggleClass("is-hidden",Boolean(e))},createAlert:function(t){var n=t.alertType==="success"?"h-text-greenDark":"h-text-orangeDark",r=e.template(f,{alertTextClass:n,alertText:t.alertText});$(t.container).html(r).removeClass("is-hidden").focus()},resetView:function(){this.render()},submitAnswer:function(t){var n=this,r=this.$el.find(".js-questionAnswer-answerScreenNameInput").val(),i=$('[data-question-id="'+this.questionId+'"] .js-questionAnswer-answerAlerts'),s={title:"thanks for submitting an answer!",subtitle:"We check every submission for inappropriate or offensive content. Your answer may take a few days to appear."},o={title:"we&#39;re sorry.",subtitle:"There was an error while posting your answer.<br />Unless your submission contains unsupported emoji characters or inappropriate language, please try again in a little while."},u;this.validateText(t),this.validateScreenName(),this.isPartialUser()&&this.validateUserEmail(),this.model.isValid(!0)?(this.model.set("QuestionId",this.questionId),this.$el.find(".js-questionAnswer-errorSummary").addClass("is-hidden"),this.model.postAnswer({questionId:this.questionId,success:function(t){t.HasErrors?(n.createAlert({container:i,alertType:"warning",alertText:o}),typeof t.Errors=="string"?console.log(">>> "+t.Errors):e.each(t.Errors,function(e){console.log(">>> "+e.Message)})):(n.setUserNickname(r),n.hideComposeAnswerPanel(),n.resetView(),n.createAlert({container:i,alertType:"success",alertText:s}));try{u=n.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="Submit_Answer_Success",u.bvAttributes={containerId:"bvTag-answerForm"+n.questionId+"_"+n.instanceNumber},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}},error:function(e){n.createAlert({container:i,alertType:"warning",alertText:o}),console.log(e.responseText)}})):(this.$el.find(".js-questionAnswer-errorSummary").removeClass("is-hidden"),this.$el.find(".js-questionAnswer-errorSummaryHeading").focus());try{u=n.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="Submit_Answer_Button",u.bvAttributes={containerId:"bvTag-answerForm"+n.questionId+"_"+n.instanceNumber},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}},removeHtmlTags:function(e){return e.trim().replace(/<(?:.|\n)*?>/gm,"")},writeAnswerSignIn:function(t){var n=e.template(c,{text:"sign in to answer"});t.preventDefault(),this.showPopoverMessage({popoverElement:$(t.currentTarget),message:n,focusSelector:".js-questionAnswer-signIn"})},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:l}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},navigateToError:function(e){var t=$(e.currentTarget).attr("href");e.preventDefault(),this.$el.find(t).focus()},openTermsModal:function(){setTimeout(function(){$("#pdpModelId .js-modal-title-display").html("q&a guidelines"),$("#pdpModelId .modal-body").html(h),$("#pdpModelId .TGTLazyLoading").hide()},0)},events:{"click .js-questionAnswer-hideComposeAnswerPanel":"onHideComposeAnswerPanel","click .js-questionAnswer-submitAnswer":"submitAnswer","blur .js-questionAnswer-composeAnswerTextarea":"validateText","keyup .js-questionAnswer-composeAnswerTextarea":"validateText","blur .js-questionAnswer-answerScreenNameInput":"validateScreenName","keyup .js-questionAnswer-answerScreenNameInput":"validateScreenName","blur .js-questionAnswer-composeAnswerUserEmail":"validateUserEmail","click .js-questionAnswer-writeAnswerSignIn":"writeAnswerSignIn","click .js-questionAnswer-navigateToError":"navigateToError","click .js-questionAnswer-openTermsModal":"openTermsModal"}}).mixin([u]);return p}),define("collections/browse/questionAnswer/answers.collection",["jquery","underscore","backbone","models/browse/questionAnswer/answer.model"],function(e,t,n,r){var i=n.Collection.extend({urlRoot:Target.Config.draxUrl+"/answers",model:r,constructor:function(){n.Collection.apply(this,arguments)},initialize:function(){this.on("invalid",function(e,t){console.log("Error initializing: "+t)})},fetch:function(e){var t=e||{};return t.sortMethod=t.sortMethod||"newest",t.sortTitle=t.sortTitle||"newest",t.filterMethod=t.filterMethod||"",t.limit=t.limit||5,t.offset=t.offset||0,t.url=this.urlRoot+"?question_id="+t.questionId+"&product_id="+t.productId+"&sort_order="+t.sortMethod+"&limit="+t.limit+"&offset="+t.offset,n.Collection.prototype.fetch.call(this,t)}});return i}),define("text!templates/common/browse/questionAnswer/answers-list-shell.html",[],function(){return' <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="js-questionAnswer-answerList"></div> </div> </div> <div class="l-row"> <% if (hasShowMoreButton) { %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <button class="btn btn-sm btn-default js-questionAnswer-loadMoreAnswers" aria-label="show more answers to <%= questionAuthor %>\'s question">show more</button> </div> <% } %> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <button class="btn btn-sm btn-default h-tightSpacingRight h-tinySpacingBottom js-questionAnswer-showComposeAnswerPanel" aria-label="answer <%= questionAuthor %>\'s question"> answer it </button> </div> </div> <div id="subLoader" class="is-hidden"></div> '}),define("views/common/browse/questionAnswer/answers-collection.view",["underscore","Target","page","collections/browse/questionAnswer/answers.collection","models/browse/questionAnswer/answer.model","views/common/browse/questionAnswer/answer.view","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/questionAnswer/answers-list-shell.html"],function(e,t,n,r,i,s,o,u){var a=n.extend({numAnswersPerPage:5,numAnswersInFirstRequest:10,answerQueue:[],totalAnswerCount:0,initialize:function(e){this.answerQueue=[],this.$el=e.$el,this.collection=new r,this.questionId=e.questionId,this.questionAuthor=e.questionAuthor,this.totalAnswerCount=e.totalAnswerCount},render:function(t){var n=this;this.answerQueue=[],this.collection.fetch({questionId:this.questionId,productId:this.getProductId(),limit:this.numAnswersInFirstRequest,success:function(r){var o=JSON.parse(sessionStorage.getItem("productdetails"))||{},a=r.models,f=e.template(u,{answers:a,questionAuthor:n.questionAuthor,product:{id:o.partNumber,title:o.title},hasShowMoreButton:n.totalAnswerCount>n.numAnswersPerPage});n.$el.html(f),n.totalAnswerCount&&e.each(a,function(e,t){var r=new i,o;t<n.numAnswersPerPage?(o=new s({model:r.set(e.attributes)}),o.render({container:n.$el.find(".js-questionAnswer-answerList"),truncatedLength:300})):n.answerQueue.push(e.attributes)}),t.success()},error:function(e,t,n){console.log(n)}})},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},getAnswers:function(e){this.collection.fetch({questionId:this.questionId,productId:this.getProductId(),limit:this.numAnswersPerPage,offset:e.offset,success:function(t){e.success(t)},error:function(e,t,n){console.log(n)}})},loadMoreAnswers:function(t){var n=this,r=$(t.currentTarget),o=this.$el.find(".js-questionAnswer-answerList .js-questionAnswer-answerRow").length,u,a,f,l=Math.floor(o/this.numAnswersPerPage)+1;if(!r.attr("disabled")){try{f=this.bvBaseInViewData(),f.bvProduct="AskAndAnswer",f.name="QuestionAnswer_Page_Answers_Button",f.detail1="Page_"+l,f.detail2="Offset_"+o,window._bvapiq.push(["FeatureUsed",f])}catch(c){console.log(c)}this.answerQueue.forEach(function(e){var t=new s({model:new i(e)});t.render({container:n.$el.find(".js-questionAnswer-answerList"),truncatedLength:300})}),u=this.$el.find(".js-questionAnswer-answerList .js-questionAnswer-answerRow").length,a=this.$el.find(".js-questionAnswer-answerList .js-questionAnswer-answerRow").eq(o),a.find(".js-questionAnswer-answerText").eq(0).attr("tabindex","-1").focus(),this.$el.find(".js-questionAnswer-loadMoreAnswers").attr("disabled","disabled"),this.getAnswers({offset:u,success:function(t){var r=t.models;n.answerQueue=[],n.$el.find(".js-questionAnswer-loadMoreAnswers").removeAttr("disabled"),n.totalAnswerCount&&e.each(r,function(e){n.answerQueue.push(e.attributes)}),r.length===0&&n.$el.find(".js-questionAnswer-loadMoreAnswers").addClass("is-hidden")}})}},events:{"click .js-questionAnswer-loadMoreAnswers":"loadMoreAnswers"}}).mixin([o]);return a}),define("text!templates/common/browse/questionAnswer/question.html",[],function(){return'<div class="js-questionAnswer-questionRow" data-question-id="<%= question.Id %>" id="bvTag-question<%= question.Id %>"> <div data-scroll-offset="125" class="h-standardSpacingBottom js-questionAnswer-question"> <% if (question.QuestionSummary) { %> <div class="h-tinySpacingTop"> <h3 class="h-text-md h-display-inline js-questionAnswer-questionSummary" tabindex="-1"> Q: <%- question.QuestionSummary %> </h3> </div> <% } %> <% if (question.IsSyndicated && question.SyndicationSource.Name) { %> <div class="test-questionAnswer-syndicatedBadge"> <div class="h-float-left h-text-grayDark"> originally posted on <%= question.SyndicationSource.Name %> </div> <div class="h-float-left h-tightSpacingLeft"> <% if (question.SyndicationSource.LogoImageUrl) { %> <img src="<%= question.SyndicationSource.LogoImageUrl %>" alt="<%= question.SyndicationSource.Name %> logo"> <% } %> </div> <div class="h-float-clear"></div> </div> <% } %> <div class="h-display-inline-block h-text-grayDark h-text-sm"> <span class="h-sr-only">submitted by </span> <% if (question.UserNickname) { %><%= question.UserNickname %> &mdash;<% } %> <%= question.SubmissionTime %> </div> <div class="h-tightSpacingTop"> <% if (question.TotalAnswerCount > 0) { %> <button class="btn btn-sm btn-default h-tightSpacingRight h-tinySpacingBottom js-questionAnswer-toggleAnswersPanel" data-answer-count="<%= question.TotalAnswerCount %>" aria-label="show <%= question.TotalAnswerCount %> answer<% if (question.TotalAnswerCount !== 1) { %>s<% } %> to <%= question.UserNickname %>\'s question - shows more content"> show <%= question.TotalAnswerCount %> answer<% if (question.TotalAnswerCount !== 1) { %>s<% } %> </button> <button class="btn btn-sm btn-default h-tightSpacingRight h-tinySpacingBottom is-hidden js-questionAnswer-toggleAnswersPanel" data-answer-count="<%= question.TotalAnswerCount %>" aria-label="hide <%= question.TotalAnswerCount %> answer<% if (question.TotalAnswerCount !== 1) { %>s<% } %> to <%= question.UserNickname %>\'s question - hides content"> hide <%= question.TotalAnswerCount %> answer<% if (question.TotalAnswerCount !== 1) { %>s<% } %> </button> <% } else { %> <button class="btn btn-sm btn-default h-tightSpacingRight h-tinySpacingBottom js-questionAnswer-showComposeAnswerPanel" aria-label="answer <%= question.UserNickname %>\'s question"> answer it </button> <% } %> <div class="is-hidden js-questionAnswer-answersPanel"> <div class="l-row"> <div class="l-col-xs-12"> <div class="js-questionAnswer-answerAlerts h-tightSpacing is-hidden" role="alert" tabindex="0"></div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="js-questionAnswer-answerList"></div> <div class="is-hidden js-questionAnswer-composeAnswerPanel"></div> <% if (!hideDivider) { %> <hr> <% } %> </div> </div> </div> </div> </div> </div> </div> '}),define("views/common/browse/questionAnswer/question.view",["underscore","Target","page","models/browse/questionAnswer/question.model","models/browse/reviews/feedback.model","models/browse/questionAnswer/answer.model","models/browse/reviews/user-status.model","models/browse/reviews/nickname.model","views/mixins/browse/bv-tracking.view-mx","views/common/browse/questionAnswer/answer.view","views/common/browse/questionAnswer/answer-form.view","views/common/browse/questionAnswer/answers-collection.view","text!templates/common/browse/questionAnswer/question.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/questionAnswer/signin-popover-link.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=n.extend({questionAnswerStats:{},initialize:function(){this.userStatusModel=new o,this.nicknameModel=new u},render:function(t){if(typeof this.model=="undefined")return;var n=e.template(h,{question:this.model.attributes,questionAnswerStats:t.questionAnswerStats,hideDivider:t.hideDivider});this.questionAnswerStats=t.questionAnswerStats,this.$el.html(n),$(t.container).append(this.el)},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},toggleAnswersPanel:function(e){var t=this,n=$(e.currentTarget),r=t.$el.find(".js-questionAnswer-answersPanel"),i=t.$el.find(".js-questionAnswer-composeAnswerPanel"),s=t.$el.find(".js-questionAnswer-toggleAnswersPanel"),o=new c({$el:t.$el.find(".js-questionAnswer-answerList"),questionId:this.model.get("Id"),questionAuthor:this.model.get("UserNickname"),totalAnswerCount:this.model.get("TotalAnswerCount")}),u;e.preventDefault();if(this.model.attributes.TotalAnswerCount&&this.$el.find(".js-questionAnswer-answerList").is(":empty")&&!n.is(":disabled")){n.attr("disabled","disabled"),o.render({success:function(){r.removeClass("is-hidden"),n.removeAttr("disabled"),s.toggleClass("is-hidden"),t.$el.find(".js-questionAnswer-answerList .js-questionAnswer-answerText").eq(0).attr("tabindex","-1").focus()}});try{u=this.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="QuestionAnswer_Show_Answers_Button",u.bvAttributes={containerId:"bvTag-question"+this.model.get("Id")},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}}else{r.toggleClass("is-hidden"),i.toggleClass("is-hidden"),s.toggleClass("is-hidden");if(r.hasClass("is-hidden")){s.filter(":visible").attr("tabindex","-1").focus();try{u=this.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="QuestionAnswer_Hide_Answers_Button",u.bvAttributes={containerId:"bvTag-question"+this.model.get("Id")},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}}else{this.$el.find(".js-questionAnswer-answerList .js-questionAnswer-answerText").eq(0).attr("tabindex","-1").focus();try{u=this.bvBaseInViewData(),u.bvProduct="AskAndAnswer",u.name="QuestionAnswer_Show_Answers_Button",u.bvAttributes={containerId:"bvTag-question"+this.model.get("Id")},window._bvapiq.push(["FeatureUsed",u])}catch(a){console.log(a)}}}},onShowComposeAnswerPanel:function(t){var n=this,r=$(t.currentTarget),i=this.bvBaseInViewData(),s=e.template(d,{text:"sign in to answer"}),o;t.preventDefault(),this.checkUserIsLoggedIn({success:function(){var e=sessionStorage.getItem("memberId"),t=sessionStorage.getItem("guestType");t==="R"||t==="P"?n.$el.find(".js-questionAnswer-composeAnswerPanel").is(":empty")?(o=new l({questionId:n.model.get("Id"),$el:n.$el.find(".js-questionAnswer-composeAnswerPanel"),instanceNumber:1}),o.render({success:function(){n.getUserNickname(e),n.showComposeAnswerPanel()}})):(n.getUserNickname(e),n.showComposeAnswerPanel()):n.showPopoverMessage({popoverElement:r,message:s,focusSelector:".js-questionAnswer-signIn"}),t==="P"&&$(".js-questionAnswer-userEmailContainer").removeClass("is-hidden")},error:function(){n.showPopoverMessage({popoverElement:r,message:s,focusSelector:".js-questionAnswer-signIn"})}});try{i.bvProduct="AskAndAnswer",i.bvAttributes={containerId:"bvTag-question"+this.model.get("Id")},i.name="QuestionAnswer_Write_Answer_Button",window._bvapiq.push(["FeatureUsed",i])}catch(u){console.log(u)}},showComposeAnswerPanel:function(){var e=this.$el.find(".js-questionAnswer-answersPanel"),t=this.$el.find(".js-questionAnswer-composeAnswerPanel"),n=this.$el.find(".js-questionAnswer-showComposeAnswerPanel"),r=this.$el.find(".js-questionAnswer-answerFormTitle"),i=this.$el.find(".js-questionAnswer-composeAnswerTitle"),s=this.$el.find(".js-questionAnswer-composeAnswerTextarea"),o=this.$el.find("input"),u=t.find(".js-questionAnswer-submitAnswer"),a=t.find(".js-questionAnswer-showTermsModal"),f=$(".js-questionAnswer-answerAlerts");i.val(""),s.val(""),o.attr("checked",!1),a.attr("href","#"),e.removeClass("is-hidden"),t.removeClass("is-hidden"),$("body, html").stop().animate({scrollTop:n.offset().top-15}),n.addClass("is-hidden"),r.focus(),u.removeAttr("disabled"),a.removeAttr("href"),f.addClass("is-hidden").empty()},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:p}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=$(".js-questionAnswer-currentUserNickname"),o=$(".js-questionAnswer-answerScreenNameInput"),u=$(".js-questionAnswer-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.attributes.UserNickname),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t),s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))},error:function(e,t,n){console.log(n)}})},checkUserIsLoggedIn:function(e){this.userStatusModel.fetch({success:function(t){var n=t.attributes;n&&n.profile&&n.profile.memberId?(sessionStorage.setItem("memberId",n.profile.memberId),sessionStorage.setItem("guestType",n.profile.guestType),e.success()):e.error()},error:function(){e.error()}})},openLogin:function(e){var t=sessionStorage.getItem("memberId"),n=sessionStorage.getItem("guestType");e.preventDefault(),t&&n==="P"?window.location.href=Target.Config.gamModURL+"/gam-login?redirectToURL="+encodeURIComponent(window.location.href):(this.$el.find(".js-questionAnswer-showComposeAnswerPanel").popover("hide"),$("#js-toggleRightNav:visible, #js-toggleRightNavLg:visible").trigger("click"),setTimeout(function(){$("#rightNavigation .navigation--url").first().trigger("click"),setTimeout(function(){$("#logonIdSide").focus()},800)},800))},events:{"click .js-questionAnswer-voteHelpful, .js-questionAnswer-voteNotHelpful":"feedbackVote","click .js-questionAnswer-questionReport":"questionReport","click .js-questionAnswer-toggleAnswersPanel":"toggleAnswersPanel","click .js-questionAnswer-showComposeAnswerPanel":"onShowComposeAnswerPanel","click .js-questionAnswer-signIn":"openLogin"}}).mixin([a]);return v}),define("text!templates/common/browse/questionAnswer/questions-list-shell.html",[],function(){return' <div class="l-container" id="bvTag-allQuestions"> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardSpacingTop h-standardPaddingLeft h-standardPaddingRight"> <a class="headingBackLink js-questionAnswer-hideAllQuestions" href="#"> <div class="title title-left"> <h2 class="title-charlie title--headingBackLink"> <span class="h-sr-only">back to </span><%= product.title %> </h2> </div> </a> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr class="h-tightSpacing"> </div> </div> </div> <div class="l-row test-questionAnswer-allQuestionsSummary"> <div class="l-col-xs-12 l-col-nopadding"> <div class="l-row"> <div class="l-col-xs-7 l-col-lg-9 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <h2 class="title--category title-bravo h-display-inline js-questionAnswer-allQuestionsHeading" tabindex="-1"> <span class="h-sr-only">Q &amp; A - <%= questionAnswerStats.questionCount %> guest questions</span> <span aria-hidden="true">q&amp;a<span class="h-text-normal h-text-xl h-tightSpacingLeft test-questionAnswer-totalQuestions"><%= questionAnswerStats.questionCount %></span></span> </h2> </div> </div> <div class="l-col-xs-5 l-col-lg-3 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <button class="btn btn-primary btn-sm btn-block h-zeroMargin js-questionAnswer-showComposeQuestionPanel">ask a question</button> </div> </div> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <hr class="h-tightSpacing"> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12"> <div class="js-questionAnswer-questionAlerts h-tightSpacing is-hidden" role="alert" tabindex="0"></div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="is-hidden js-questionAnswer-composeQuestionPanel"></div> </div> </div> <% if (questionAnswerStats.questionCount > 1) { %> <div id="sortQuestionsRow" class="l-row h-tightSpacingTop l-row-halfpadding"> <div class="l-col-xs-1 l-col-sm-2 l-col-md-3 l-col-lg-4 l-col-nopadding"></div> <div class="l-col-xs-10 l-col-sm-8 l-col-md-6 l-col-lg-4 l-col-nopadding"> <div class="l-col-halfpadding"> <div class="dropdown dropdown-default dropdown-native js-questionAnswer-sortControl" data-variant="centeredText"> <label class="dropdown--label is-hidden" for="questionssortby">sort by</label> <select id="questionssortby" name="sortby" class="dropdown--select"> <% _.each (sortConfig.options, function (element, index, list) { %> <% if (element.isSelected) { %> <option value="<%- element.value %>" selected="selected"><%- element.text %></option> <% } else { %> <option value="<%- element.value %>"><%- element.text %></option> <% } %> <% }); %> </select> </div> </div> </div> </div> <% } %> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="h-standardPaddingLeft h-standardPaddingRight"> <div class="js-questionAnswer-questionList"></div> </div> </div> </div> <% if (questionAnswerStats.questionCount && !questions.length) { %> <div class="l-row"> <div class="l-col-xs-12"> <h3 class="h-standardSpacingBottom">no questions to display</h3> </div> </div> <% } %> <div class="l-row l-row-halfpadding"> <% if (hasShowMoreButton) { %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-questionAnswer-loadMoreQuestions" aria-label="show more questions">show more</button> </div> </div> <% } %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block js-questionAnswer-showComposeQuestionPanel">ask a question</button> </div> </div> </div> <div id="subLoader" class="is-hidden"></div> </div> '}),define("views/common/browse/questionAnswer/questions-collection.view",["underscore","Target","page","collections/browse/questionAnswer/questions.collection","models/browse/questionAnswer/question.model","models/browse/reviews/user-status.model","models/browse/reviews/nickname.model","views/common/browse/questionAnswer/question.view","views/common/browse/questionAnswer/question-form.view","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/questionAnswer/question-form.html","text!templates/common/browse/questionAnswer/questions-list-shell.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/questionAnswer/signin-popover-link.html","patlab.dropdown"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=n.extend({patlab:{},numQuestionsPerPage:10,numQuestionsInFirstRequest:20,questionQueue:[],initialize:function(){var e=this;this.questionQueue=[],this.$el=$(".js-pdp-mainContainerTakeover"),this.collection=new r,this.userStatusModel=new s,this.nicknameModel=new o,$(window).bind("keydown.questionAnswer-all-questions",function(t){e.onKeydownEscape(t)})},render:function(t){var n=this,r={options:[{value:"recent_answered",text:"newest answers",isSelected:!0},{value:"most_answered",text:"most answers",isSelected:!1},{value:"least_answered",text:"fewest answers",isSelected:!1},{value:"newest",text:"newest questions",isSelected:!1}]},s;window.history&&window.history.pushState&&($(window).on("popstate.questionAnswer-all-questions",function(){n.hideAllQuestions()}),window.history.pushState("forward",null)),this.questionAnswerStats=t.questionAnswerStats,this.collection.fetch({productId:this.getProductId(),limit:this.numQuestionsInFirstRequest,success:function(s){var o=JSON.parse(sessionStorage.getItem("productdetails"))||{},a=s.models,f=e.template(c,{questions:a,questionAnswerStats:n.questionAnswerStats,product:{id:o.partNumber,title:o.title},sortConfig:r,hasShowMoreButton:a.length>=n.numQuestionsPerPage&&n.questionAnswerStats.questionCount>n.numQuestionsPerPage});n.$el.html(f),t.questionAnswerStats.questionCount&&e.each(a,function(e,t){var r=new i,s;t<n.numQuestionsPerPage?(s=new u({model:r.set(e.attributes)}),s.render({questionAnswerStats:n.questionAnswerStats,container:".js-questionAnswer-questionList",instanceNumber:2})):n.questionQueue.push(e.attributes)}),$("#pdp-main #pdpMainContainer").addClass("is-hidden"),n.$el.removeClass("is-hidden"),$(".js-questionAnswer-allQuestionsHeading").focus(),n.patlab.dropdown=new d($("#sortQuestionsRow"))},error:function(e,t,n){console.log(n)}});try{s=this.bvBaseInViewData(),s.bvProduct="AskAndAnswer",s.bvAttributes={containerId:"bvTag-allQuestions"},s.name="QuestionAnswer_All_Questions_Viewed",window._bvapiq.push(["FeatureUsed",s])}catch(o){console.log(o)}},questionAnswerStats:{},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},checkUserIsLoggedIn:function(e){this.userStatusModel.fetch({success:function(t){var n=t.attributes;n&&n.profile&&n.profile.memberId?(sessionStorage.setItem("memberId",n.profile.memberId),sessionStorage.setItem("guestType",n.profile.guestType),e.success()):e.error()},error:function(){e.error()}})},openLogin:function(e){var t=sessionStorage.getItem("memberId"),n=sessionStorage.getItem("guestType");e.preventDefault(),t&&n==="P"?window.location.href=Target.Config.gamModURL+"/gam-login?redirectToURL="+encodeURIComponent(window.location.href):(this.$el.find(".js-questionAnswer-showComposeQuestionPanel").popover("hide"),$("#js-toggleRightNav:visible, #js-toggleRightNavLg:visible").trigger("click"),setTimeout(function(){$("#rightNavigation .navigation--url").first().trigger("click"),setTimeout(function(){$("#logonIdSide").focus()},800)},800))},getQuestions:function(e){var t=$("#questionssortby").find("option:selected"),n=t.val(),r=$("#questionsfilterby").find("option:selected"),i=r.val();this.collection.fetch({productId:this.getProductId(),sortMethod:n,filterMethod:i,limit:e.limit,offset:e.offset,success:function(t){e.success(t)},error:function(e,t,n){console.log(n)}})},getSortedQuestions:function(t){var n=this,r=$(t.currentTarget),i=r.find("option:selected").text().split("(")[0],s;if(!r.attr("disabled")){try{s=this.bvBaseInViewData(),s.bvProduct="AskAndAnswer",s.detail1=i,s.bvAttributes={containerId:"bvTag-allQuestions"},r.attr("id")==="questionssortby"&&(s.name="QuestionAnswer_Sort_Questions_Button"),window._bvapiq.push(["FeatureUsed",s])}catch(o){console.log(o)}this.getQuestions({limit:this.numQuestionsInFirstRequest,success:function(t){var r=t.models;n.questionQueue=[],$(".js-questionAnswer-questionList").empty(),n.questionAnswerStats.questionCount&&(e.each(r,function(e,t){var r;t<n.numQuestionsPerPage?(r=new u({model:e}),r.render({questionAnswerStats:n.questionAnswerStats,container:".js-questionAnswer-questionList",instanceNumber:2})):n.questionQueue.push(e.attributes)}),r.length>n.numQuestionsPerPage?$(".js-questionAnswer-loadMoreQuestions").removeClass("is-hidden"):$(".js-questionAnswer-loadMoreQuestions").addClass("is-hidden"))}})}},loadMoreQuestions:function(t){var n=this,r=$(t.currentTarget),s=$(".js-questionAnswer-questionList .js-questionAnswer-questionRow").length,o,a,f,l=Math.floor(s/this.numQuestionsPerPage)+1;if(!r.attr("disabled")){try{f=this.bvBaseInViewData(),f.bvProduct="AskAndAnswer",f.name="QuestionAnswer_Page_Questions_Button",f.detail1="Page_"+l,f.detail2="Offset_"+s,window._bvapiq.push(["FeatureUsed",f])}catch(c){console.log(c)}this.questionQueue.forEach(function(e){var t=new u({model:new i(e)});t.render({questionAnswerStats:n.questionAnswerStats,container:".js-questionAnswer-questionList",instanceNumber:2})}),o=$(".js-questionAnswer-questionList .js-questionAnswer-questionRow").length,a=$(".js-questionAnswer-questionList .js-questionAnswer-question").eq(s),a.find(":first-child").eq(0).attr("tabindex","-1").focus(),$(".js-questionAnswer-loadMoreQuestions").attr("disabled","disabled"),this.getQuestions({offset:o,success:function(t){var r=t.models;n.questionQueue=[],$(".js-questionAnswer-loadMoreQuestions").removeAttr("disabled"),n.questionAnswerStats.questionCount&&e.each(r,function(e){n.questionQueue.push(e.attributes)}),r.length===0&&$(".js-questionAnswer-loadMoreQuestions").addClass("is-hidden")}})}},onShowComposeQuestionPanel:function(t){var n=this,r=$(t.currentTarget),i=e.template(p,{text:"sign in to ask a question"}),s=this.bvBaseInViewData(),o;t.preventDefault(),this.checkUserIsLoggedIn({success:function(){var e=sessionStorage.getItem("memberId"),t=sessionStorage.getItem("guestType");t==="R"||t==="P"?n.$el.find(".js-questionAnswer-composeQuestionPanel").is(":empty")?(o=new a({$el:n.$el.find(".js-questionAnswer-composeQuestionPanel"),instanceNumber:2}),o.render({success:function(){n.getUserNickname(e),n.showComposeQuestionPanel()}})):(n.getUserNickname(e),n.showComposeQuestionPanel()):n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-questionAnswer-signIn"}),t==="P"&&$(".js-questionAnswer-userEmailContainer").removeClass("is-hidden")},error:function(){n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-questionAnswer-signIn"})}});try{s.bvProduct="AskAndAnswer",s.bvAttributes={containerId:"bvTag-questionAnswerSummary"},s.name="QuestionAnswer_Write_Question_Button",window._bvapiq.push(["FeatureUsed",s])}catch(u){console.log(u)}},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:h}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},showComposeQuestionPanel:function(){var e=this.$el.find(".js-questionAnswer-composeQuestionPanel"),t=this.$el.find(".js-questionAnswer-showComposeQuestionPanel"),n=this.$el.find(".js-questionAnswer-questionFormTitle"),r=this.$el.find(".js-questionAnswer-composeQuestionTitle"),i=this.$el.find(".js-questionAnswer-composeQuestionTextarea"),s=this.$el.find("input"),o=e.find(".js-questionAnswer-submitQuestion"),u=e.find(".js-questionAnswer-showTermsModal"),a=$(".js-questionAnswer-questionAlerts");r.val(""),i.val(""),s.attr("checked",!1),u.attr("href","#"),e.removeClass("is-hidden"),$("body, html").stop().animate({scrollTop:t.offset().top-15}),t.addClass("is-hidden"),n.focus(),o.removeAttr("disabled"),u.removeAttr("href"),a.addClass("is-hidden").empty()},onHideAllQuestions:function(e){e.preventDefault(),this.hideAllQuestions(),window.history.back()},hideAllQuestions:function(e){e&&e.preventDefault(),$("#pdp-main #pdpMainContainer").removeClass("is-hidden"),$(".js-pdp-mainContainerTakeover").addClass("is-hidden").empty(),this.undelegateEvents(),$(window).unbind("keydown.questionAnswer-all-questions").off("popstate.questionAnswer-all-questions")},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=$(".js-questionAnswer-currentUserNickname"),o=$(".js-questionAnswer-questionScreenNameInput"),u=$(".js-questionAnswer-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.attributes.UserNickname),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t),s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))},error:function(e,t,n){console.log(n)}})},onKeydownEscape:function(e){e.keyCode===27&&$(".modal-shown").length===0&&$(".show-dropdown").length===0&&this.onHideAllQuestions(e)},events:{"change #questionssortby":"getSortedQuestions","click .js-questionAnswer-hideAllQuestions":"onHideAllQuestions","click .js-questionAnswer-loadMoreQuestions":"loadMoreQuestions","click .js-questionAnswer-showComposeQuestionPanel":"onShowComposeQuestionPanel","click .js-questionAnswer-signIn":"openLogin"}}).mixin([f]);return v}),define("text!templates/common/browse/questionAnswer/questionAnswer-summary.html",[],function(){return'<div class="l-container"> <div class="js-questionAnswer-recentQuestionsContainer"> <% if (questionAnswerStats.questionCount > 0) { %> <div class="l-row"> <div class="l-col-xs-12"> <div class="js-questionAnswer-recentQuestions"></div> </div> </div> <% } %> <div class="l-row l-row-halfpadding"> <% if (questionAnswerStats.questionCount > 2) { %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-default btn-block js-questionAnswer-showAllQuestions">see all <%= questionAnswerStats.questionCount %> questions</button> </div> </div> <% } %> <div class="l-col-xs-12 l-col-lg-6 l-col-nopadding"> <div class="l-col-halfpadding"> <button class="btn btn-primary btn-block <% if (!questionAnswerStats.questionCount) { %>h-standardSpacingTop<% } %> js-questionAnswer-showComposeQuestionPanel">ask a question</button> </div> </div> </div> </div> <div class="l-row"> <div class="l-col-xs-12"> <div class="js-questionAnswer-questionAlerts h-tightSpacing is-hidden" role="alert" tabindex="0"></div> </div> </div> <div class="l-row"> <div class="l-col-xs-12 l-col-nopadding"> <div class="is-hidden js-questionAnswer-composeQuestionPanel"></div> </div> </div> </div> '}),define("views/common/browse/questionAnswer/questionAnswer-summary.view",["underscore","Target","page","models/browse/reviews/user-status.model","models/browse/reviews/nickname.model","collections/browse/questionAnswer/questions.collection","views/common/browse/questionAnswer/question-form.view","views/common/browse/questionAnswer/questions-collection.view","views/common/browse/questionAnswer/question.view","views/mixins/browse/bv-tracking.view-mx","text!templates/common/browse/questionAnswer/questionAnswer-summary.html","text!templates/common/browse/reviews/popover.html","text!templates/common/browse/questionAnswer/signin-popover-link.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=n.extend({initialize:function(e){this.$el=$(".js-questionAnswer-summary"),this.questionAnswerStatistics=e.get("questionAnswerStatistics"),this.userStatusModel=new r,this.nicknameModel=new i,this.collection=new s},render:function(t){var n=e.template(l,{questionAnswerStats:this.questionAnswerStatistics}),r;this.$el.html(n),this.getRecentQuestions({success:t.success}),r=this.bvBaseInViewData(),r.bvProduct="AskAndAnswer",r.bvAttributes={containerId:"pdp"};try{window._bvapiq.push(["FeatureUsedInView",r])}catch(i){console.log(i.message)}},getProductId:function(){return(JSON.parse(sessionStorage.getItem("productdetails"))||{}).partNumber},checkUserIsLoggedIn:function(e){this.userStatusModel.fetch({success:function(t){var n=t.attributes;n&&n.profile&&n.profile.memberId?(sessionStorage.setItem("memberId",n.profile.memberId),sessionStorage.setItem("guestType",n.profile.guestType),e.success()):e.error()},error:function(){e.error()}})},openLogin:function(e){var t=sessionStorage.getItem("memberId"),n=sessionStorage.getItem("guestType");e.preventDefault(),t&&n==="P"?window.location.href=Target.Config.gamModURL+"/gam-login?redirectToURL="+encodeURIComponent(window.location.href):(this.$el.find(".js-questionAnswer-showComposeQuestionPanel").popover("hide"),$("#js-toggleRightNav:visible, #js-toggleRightNavLg:visible").trigger("click"),setTimeout(function(){$("#rightNavigation .navigation--url").first().trigger("click"),setTimeout(function(){$("#logonIdSide").focus()},800)},800))},getRecentQuestions:function(t){var n=this.questionAnswerStatistics;this.collection.fetch({productId:this.getProductId(),limit:2,sortMethod:"recent_answered",success:function(r){var i=r.models;e.each(i,function(e,t,n){e.get("QuestionSummary")&&(n[t].paragraphs=e.get("QuestionSummary").split(/\n/g))}),n.questionCount&&e.each(i,function(e,t){var r=new a({model:e}),s=t+1===i.length;r.render({questionAnswerStats:n,container:".js-questionAnswer-recentQuestions",hideDivider:s,instanceNumber:1})}),$(".js-questionAnswer-summary").removeClass("is-hidden"),t.success()}})},onShowComposeQuestionPanel:function(t){var n=this,r=$(t.currentTarget),i=e.template(h,{text:"sign in to ask a question"}),s=this.bvBaseInViewData(),u;t.preventDefault(),this.checkUserIsLoggedIn({success:function(){var e=sessionStorage.getItem("memberId"),t=sessionStorage.getItem("guestType");t==="R"||t==="P"?n.$el.find(".js-questionAnswer-composeQuestionPanel").is(":empty")?(u=new o({$el:n.$el.find(".js-questionAnswer-composeQuestionPanel"),instanceNumber:1}),u.render({success:function(){n.getUserNickname(e),n.showComposeQuestionPanel()}})):(n.getUserNickname(e),n.showComposeQuestionPanel()):n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-questionAnswer-signIn"}),t==="P"&&$(".js-questionAnswer-userEmailContainer").removeClass("is-hidden")},error:function(){n.showPopoverMessage({popoverElement:r,message:i,focusSelector:".js-questionAnswer-signIn"})}});try{s.bvProduct="AskAndAnswer",s.bvAttributes={containerId:"bvTag-questionAnswerSummary"},s.name="QuestionAnswer_Write_Question_Button",window._bvapiq.push(["FeatureUsed",s])}catch(a){console.log(a)}},showPopoverMessage:function(e){e.popoverElement.popover({html:!0,placement:"top",content:e.message,template:c}).popover("show"),e.focusSelector?$(e.focusSelector).focus():$(".popover-content").focus(),$("body").on("click",function(t){$(e.popoverElement).each(function(){this!==t.target&&!this.contains(t.target)&&$(this).popover("destroy")})})},showComposeQuestionPanel:function(){var e=this.$el.find(".js-questionAnswer-composeQuestionPanel"),t=this.$el.find(".js-questionAnswer-showComposeQuestionPanel"),n=this.$el.find(".js-questionAnswer-questionFormTitle"),r=this.$el.find(".js-questionAnswer-composeQuestionTitle"),i=this.$el.find(".js-questionAnswer-composeQuestionTextarea"),s=this.$el.find("input"),o=e.find(".js-questionAnswer-submitQuestion"),u=e.find(".js-questionAnswer-showTermsModal"),a=$(".js-questionAnswer-questionAlerts");r.val(""),i.val(""),s.attr("checked",!1),u.attr("href","#"),e.removeClass("is-hidden"),$("body, html").stop().animate({scrollTop:t.offset().top-15}),t.addClass("is-hidden"),n.focus(),o.removeAttr("disabled"),u.removeAttr("href"),a.addClass("is-hidden").empty()},showAllQuestions:function(e){var t=new u,n=this.questionAnswerStatistics;e.preventDefault(),t.render({questionAnswerStats:n}),$("html, body").animate({scrollTop:0})},getUserNickname:function(e){var t,n,r=parseInt(e||0,10),i=window.sessionStorage.getItem("userNickname"),s=$(".js-questionAnswer-currentUserNickname"),o=$(".js-questionAnswer-questionScreenNameInput"),u=$(".js-questionAnswer-currentUserInfo"),a=(new Date).getTime();i&&(i=JSON.parse(i),t=parseInt(i.timeStamp,10)+36e5,a>t?window.sessionStorage.removeItem("userNickname"):(n=i.nickname||"",s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))),!n&&r>0&&this.nicknameModel.fetch({userId:e,success:function(e){var t;e.hasErrors||(n=e.attributes.UserNickname),n&&(t=JSON.stringify({nickname:n,timeStamp:(new Date).getTime()}),window.sessionStorage.setItem("userNickname",t),s.html("screen name: "+n).removeClass("is-hidden"),o.val(n),u.addClass("is-hidden"))},error:function(e,t,n){console.log(n)}})},events:{"click .js-questionAnswer-showAllQuestions":"showAllQuestions","click .js-questionAnswer-showComposeQuestionPanel":"onShowComposeQuestionPanel","click .js-questionAnswer-signIn":"openLogin"}}).mixin([f]);return p}),define("views/mixins/browse/pdp-main.view-mx",["modernizr","jquery","page","Target","contextMappings","models/browse/pdp.model","models/browse/expertReviews/beauty-concierge-review.model","router","patlab.carousel","patlab.modal","views/common/browse/reviews/reviews-summary.view","views/common/browse/expertReviews/common-sense-review.view","views/common/browse/questionAnswer/questionAnswer-summary.view","helpers/dvm.helper","patlab.video"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=function(e){return{addToObj:{events:{'click [data-behavior="openShareView"]':"openShareView",'click [data-behavior="applyCouponDiscount"]':"callApplyCouponService","click .js-routeToUrl":"goToHref",'click [data-behavior="handleReview"]':"handleReview","click .js-registryEvent":"handleRegistryEvent",'click [data-behavior="goToReviewRatingsPage"]':"goToReviewRatingsPage",'click [data-behavior="writeAReview"]':"goToWriteReviewPage",touchmove:"disableBodyScrollForIOS",click:"disableBodyScrollForIOS",touchend:"enableBodyScrollForIOS",'click [data-behavior="modal"]':"handleModel",'click [data-dismiss="modal"] ,.modal-backdrop':"closeModel",'click [data-behavior="closeModal"]':"closeModal",'click [data-behavior="removeOverlayCurtain"]':"removeOverlayCurtain",'click [data-behavior="backToBundel"]':"backToBdp","click .js-pdp-tabs, .js-accordion--title":"switchTabs","click #pinit-params":"triggerPinit","click .js-slickPrevImg,.js-slickNextImg":"changeHeroImageFocus","hidden.bs.modal #pdpModelId":"closeModel","click #js-sizechart--open":"sizeChartOpen","click .js-collectionTitle":"goToCollectionList","hidden.bs.modal #block-ATC":"focusAddtoCart","click .flip-rec-cart-btn":"recProductInfo","click #beautyConcierge----toggle":"loadBeautyConciergeReview","click #commonSense----toggle":"loadCommonSenseReview","click .js-redirect-to-pdp":"routeToDetailPage","click #questionAnswer----toggle":"loadQuestionAnswer","click .js-collectionDet":"goToCollectionDet","click .js-showFitStyleDet":"showFitStyleDet","click .js-initializePlayer":"initializeVideoPlayer","click .px-video-play":"hideVideoTitle","click .px-video-pause":"showVideoTitle","click .px-video-btnFullScreen":"maintainVideoFocus","keydown .px-video-btnFullScreen, .px-video-rewind":"maintainVideoFocus","click .js-showMoreVideos":"showMoreVideos","change #js-regQtyPicker":"updateRegQuantity","click #js-ratings":"scrollToRatingsSection","click #js-qa":"scrollAndOpenQa"}},setDefaults:{bindBackboneListeners:function(){this.listenTo(Backbone.Events,"v:pdp:viewload",this.toggleState),this.listenTo(Backbone.Events,"c:pdp:triggerRatingInfoCallSuccess",this.triggerRatingInfoCallSuccess),this.listenTo(Backbone.Events,"c:var:addToBundelSuccess",this.addToBundelSuccess),this.listenTo(Backbone.Events,"c:pdp:callApplyCouponServiceSuccess",this.callApplyCouponServiceSuccess),this.listenTo(Backbone.Events,"c:pdp:setItemLocation",this.setItemLocation),this.listenTo(Backbone.Events,"c:pdp:errorItemLocation",this.errorItemLocation),this.listenTo(Backbone.Events,"c:pdp:helpfullReviewSuccess",this.helpfullReviewSuccess),this.listenTo(Backbone.Events,"c:pdp:getAppleTermsSuccess",this.getAppleTermsSuccess),this.listenTo(Backbone.Events,"c:pdp:getReturnPolicySuccess",this.getReturnPolicySuccess),this.listenTo(Backbone.Events,"c:pdp:getLazyLoadCalSuccess",this.getLazyLoadCalSuccess),this.listenTo(Backbone.Events,"c:pdp:getSizeChartSuccess",this.getSizeChartSuccess),this.listenTo(this,"v:var:herochange",this.herochange),this.listenTo(this,"v:var:selectevent",this.variationselected),this.listenTo(this.model,"change:currentSelectedTCIN",this.onVariationUpdate),this.listenTo(this,"v:var:alert",this.showCartWarning),this.listenTo(this,"v:model:showEspContent",this.showEspContent),this.listenTo(this,"v:model:showMPAAContent",this.showMPAAContent),this.listenTo(this,"v:model:showPromoContent",this.showPromoContent),this.listenTo(this,"v:model:specification",this.showSpecificationContent),this.listenTo(this,"v:modal:showHowStoreIsSetContent",this.showHowStoreIsSetContent),this.listenTo(this,"v:model:showHandlingFee",this.showHandlingFee),this.listenTo(Backbone.Events,"v:var:tagPdp",this.doPDPTagging),this.listenTo(Backbone.Events,"vi:fiats:onFIATSOverlayDismiss",this.onFIATSOverlayDismiss),this.listenTo(Backbone.Events,"v:pdp-main:collDet",this.showCollDetails),this.listenTo(Backbone.Events,"c:pdp:collListSuccess",this.collListSuccess)},model:null,dvmTimeStamp:(new Date).getTime(),enableTapToZoom:!1,startX:0,distance:0,pageName:"product details",allowSwipe:!0,minimumQuantity:null,OBGB:"",flexFlow:!1,regTag:"pdp",dvmConfigData:{siteskin:{category:"",page:"productdetails",id:"siteskin"}},toggleState:function(e){e!="pdp-main"?this.$el.hide():r.getParameterByName("type")==="VB"&&Backbone.Events.trigger("v:pdpM:isQpdp",!0)},setModel:function(e){try{if(e.partial)try{var t=this.model.parseListingServiceData(e);t!=null?(this.model.clear({silent:!0}),this.model.set(t,{parse:!1}),this.showPage()):this.$el.empty()}catch(n){TL.err(31,"PDP setModel error for item "+e.partNumber+": "+n)}else this.model.clear({silent:!0}),this.isFromCollectionPage=!1,r.Get.TCookie("isFromCollectionPage")&&(this.isFromCollectionPage=!0,r.Set.removeTCookie("isFromCollectionPage"),this.$el.empty()),this.model.set(e,{parse:!0}),this.itemMeta=null,this.showPage(),TL.e(1),TL.s(4),this.trackPageLoad(this)}catch(n){TL.err(31,"PDP setModel error for item "+e.partNumber+": "+n)}},notifyViewLoad:function(e){Backbone.Events.trigger("v:pdpM:isQpdp",!0)},rerenderSubViewIfNeeded:function(){r.getParameterByName("type")==="VB"&&this.notifyViewLoad(),this.$el.show(),t(".TGTloading").removeSpacedLoader()},submitFiatsForm:function(e){this.stopAll(e),t("#fiatsForm").submit()},showPromoContent:function(e){var n=_.findWhere(this.model.getAttributeValue("promotions",[]),{promotionIdentifier:t(e.event.target).attr("data-promotionIdentifier")});this.setModelTitle(n.shortDescription),this.setModelBody(n.legalDisclaimer)},showHandlingFee:function(e){this.setModelTitle("details"),this.setModelBody(this.model.getAttributeValue("bulkyMessage",""))},showMPAAContent:function(e){var n=this.model.getAttributeValue(t(e.event.target).attr("data-rtype"),"");n&&n.url&&Backbone.Events.trigger("v:pdp-main:triggerRatingInfoCall",n.url)},setModelTitle:function(e){this.$("#pdpModelId .js-modal-title-display").html(e)},setModelBody:function(e){e.length==0?this.$("#pdpModelId .TGTLazyLoading").show():this.$("#pdpModelId .TGTLazyLoading").hide(),this.$("#pdpModelId .modal-body").html(e)},handleModel:function(e){this.setModelTitle(""),this.setModelBody(""),this.$("#pdpModelId").attr("aria-hidden","false"),this.trigger(t(e.target).attr("data-event"),{event:e})},closeModel:function(e){t("#pdpModelId").attr("aria-hidden","true"),t("body").removeAttr("style"),this.setModelTitle(""),this.setModelBody("")},showEspContent:function(e){this.setModelTitle("Service Plan Details"),this.setModelBody(this.itemInfoTpl.espDetailsTpl(this.getItemInfoContract().espItem))},showSpecificationContent:function(e){var n=this,i=t(e.event.currentTarget);n.urlIdentifier=r.getParameterByName("identifier",i.attr("href")),n.specModel={};if(this.model.getAttributeValue("specItemAttributes").length>0){var s=this.model.getAttributeValue("specItemAttributes");_.each(s,function(e){e.id==n.urlIdentifier&&(n.specModel=e)}),_.isEmpty(n.specModel)||(this.setModelTitle(n.specModel.name),this.setModelBody(n.specModel.text))}},focusAddtoCart:function(e){t(e.currentTarget).find(".closeAddToReg").length?(this.deregisterEvent(),t(e.currentTarget).remove(),t(".add-to-cart-wrap .js-registryEvent").focus()):t(".sbc-add-to-cart").attr("tabindex","-1").focus()},addToBundelSuccess:function(e){this.backToBdp()},disableBodyScrollForIOS:function(e){"use strict";var n,r,i;n=e.target,r=t(n),i=e.type,t("#product-image-zoom").hasClass("active")&&r.parents("#product-image-zoom").length&&!r.hasClass("bb-allow-click")&&i!=="click"&&t("body").attr("ontouchstart","event.preventDefault();").attr("ontouchmove","event.preventDefault();")},enableBodyScrollForIOS:function(e){"use strict";t("body").attr("ontouchstart","").attr("ontouchmove","")},displayStoreModal:function(){var e=_.tpl("product",this.templates.howStoreIsSet,{}),n=t("#block-ATC").find(".content-ATC"),r=t("#block-ATC"),i=t("#addToCartOverlay .modal");n.children().remove(),t(".modal-container .close-ATC").remove(),n.html(e),r.modal({show:!0,backdrop:"true"}),t(".modal-backdrop").unbind("click").bind("click",function(){self.closeStoreModal()})},closeStoreModal:function(){this.$("#block-ATC").modal("hide"),this.$("#block-ATC").find("a.close").attr("aria-hidden","false")},showHowStoreIsSetContent:function(){var e=_.tpl("product",this.templates.howStoreIsSet,{}),t="how your store is set";this.setModelTitle(t),this.setModelBody(e)},renderView:function(){t(".TGTloading").removeSpacedLoader()},resetUrl:function(){var e=this.getWindowLocation().pathname;e=e.split("?")[0];var t={};window.history.replaceState(t,"",e)},herochange:function(e){var t=this.model.getAttributeValue("variationLookUp").augmentedEntitledItemLookup[e.color];if(t&&t.hasSecondaryVariation&&e.size){var n=t.secondaryVariation[e.size];n&&(t=n)}this.model.set("heroChange",t),t&&this.productImageCarousel(t.heroImage,t.hasAltImages,t.altImages)},variationselected:function(e){this.model.set("currentSelectedTCIN",e.id),this.initializePageLoad(e)},onVariationUpdate:function(){this.updateAllRows()},showCartWarning:function(e,t,n,i){var s=r.labels.get(e);e==="_ERR_AVL_PARTIAL_INVENTORY"?e=r.labels.get(e,{limitValue:i||""}):e==="SBC_ERR_AVL_INVENTORY"||e==="_ERR_AVL_INVENTORY"?e=r.labels.get("_ERR_AVL_INVENTORY"):s.indexOf("_ERR")==="0"||e==="SBC_ATC_GLOBAL_ERROR"?e=r.labels.get("ADD_TO_CART_FAIL"):e=r.labels.get(e),e=e||r.labels.get("CC_SOMETHING"),n?this.showGlobalError(e):this.showFadeAwayModal("popover-alert",e,t,e)},showGlobalError:function(e){var n=this.templates.globalErrorTpl({message:e,linkText:""}),r=this,i=function(){s&&window.clearTimeout(s),r.$(".sbc-gerror").slideUp("slow",function(){t(this).remove()})};this.$(".sbc-gerror").remove(),this.$el.prepend(n);var s=window.setTimeout(i,2800)},updateAllRows:function(){this.addPriceRow(),this.addPromotionRow(),this.addRatingQaRow(),this.addCallOutRow(),this.updateBasicMessagesRow(),this.model.getAttributeValue("isQpdp",!1)||_.isEnabled("ENABLE_GROOT_REVIEWS")||(this.addRatingReviewRow(),this.addHelpfulReviewRow()),this.model.getAttributeValue("partial",!1)||this.renderTabView()},showPage:function(){var e=this;this.enableTapToZoom=!1,r.Set.TCookie("mCurrentProduct",this.model.getAttributeValue("parentTCIN")?this.model.getAttributeValue("parentTCIN"):this.model.getAttributeValue("tcin"));var e=this;this.isPartialData=this.model.getAttributeValue("partial",!1),this.isNotPainted=(this.$("#pdpMainContainer").html()||"").length===0,this.enableTapToZoom=!0,this.$el.html(this.templates.pdp(this.model.pdpBasicPageData((new Date).getTime())));var t=this.model.getAttributeValue("isVariation",!1);Backbone.Events.trigger("v:tgtcrsh:getLoveCount",{tcin:this.model.getAttributeValue("parentTCIN"),callback:function(t){var n=t.length?t[0].count:0;e.model.set({loveCount:n}),Backbone.Events.trigger("v:tgtcrsh:showLoveCount",n,e.model.getAttributeValue("parentTCIN"))}});if(!t||t&&!this.model.getAttributeValue("childs",!1))this.productImageCarousel(null,null,null),this.updateAllRows();this.addCollectionTitle(),this.addRedCardPriceRow(),this.addCartRow(),this.showFitStyle(),this.model.getAttributeValue("isQpdp",!1)||_.isEnabled("ENABLE_GROOT_REVIEWS")&&this.addReviewsSummaryRow(),this.readPageHeaderDefault(),r.deviceAtlas.isDesktop()&&this.addBreadcrumb(),this.getCollRecData(),this.displayRecommendationsRow(),_.isEnabled("ENABLE_VIDEO_PLAYER_PDP")&&this.getKalturaScript();var n=this.model.getAttributeValue("taxonomy",[])[0];this.addUgcContent(),e.displayDVMRow(),e.displayGoogleAds(),_.deferImage(this.$el),this.showWebcollage(),this.addMicrodata(),Backbone.Events.trigger("registry:breadcrumb",_.getVal(Taxo,"breadCrumb.breadCrumbFull")),Backbone.Events.trigger("v:pdp-main:showPageComplete",!0),this.hLUpdateCall()},getKalturaScript:function(){var e=this.model.getAttributeValue("videos"),n=this.$("#pdpVideoContainer"),i=this,s,o;if(e){o=e[0];var u=this.templates.productVideo({video:o,width:n.width(),vTargetId:"1634272",moreVidCount:e.length-1});n.html(u),s=r.Get.Config("kalturaScriptUrl"),t.getScript(s).done(function(n,r){t.getScript("http://player.kaltura.com/kWidget/kWidget.getSources.js").done(function(){i.initializeVideoSources([e[0]])}).fail(function(){t("#js-productVideoContainer").hide()})}).fail(function(){t("#js-productVideoContainer").hide()})}},initializeVideoSources:function(e){var n=this;t.each(e,function(e,r){var i="video-"+r.sequenceId,s=n.$("#"+i+" .px-video-img-captions-container");kWidget.getSources({partnerId:"1634272",entryId:r.path,callback:function(e){var n=t("#"+i+" video");for(var r=0;r<e.sources.length;r++)n.append(t("<source />").attr({src:e.sources[r].src,type:"video/mp4"}));s.append(n)}})})},showMoreVideos:function(){var e=this.model.getAttributeValue("videos").slice(1),n=this.$("#pdpVideoContainer"),r=this.templates.productShowMoreVidTpl({videos:e,width:n.width(),vTargetId:"1634272"});this.$el.find(".px-inline-video").append(r).find("#showMoreVideos").hide();var i=t("video")[1],s=t(i).closest(".px-video-img-captions-container");t(s).find("h3").attr("tabindex","-1").focus(),this.initializeVideoSources(e)},initializeVideoPlayer:function(e){e.preventDefault(),e.stopPropagation();var n=t(e.currentTarget).parent(),i=n.parent(),s,o,u,a;o=i.attr("id"),u=/video-(\d+)/,a=Number(o.match(u)[1]),r.deviceAtlas.isDesktop()?(d.InitPxVideo({videoId:a,captionsOnDefault:!1,autoPlay:!0}),n.find(".js-initializePlayer").hide(),i.find(".px-video-controls").removeClass("hide").addClass("show"),this.hideVideoTitle(e)):(s=n.find("video")[0],s.play(),s.webkitEnterFullscreen())},showVideoTitle:function(e){var n=t(e.target).closest(".px-video-container");n.find(".px-video-title").removeClass("hide").addClass("show"),n.find(".px-video-captions").hide()},hideVideoTitle:function(e){var n=t(e.target).closest(".px-video-container");n.find(".px-video-title").removeClass("show").addClass("hide"),n.find(".px-video-captions").show()},maintainVideoFocus:function(e){var n=t(e.target),r;n.hasClass("px-video-rewind")?(r=n.closest(".px-video-controls-top").find(".px-video-btnFullScreen"),r.is(":checked")&&(e.keyCode||e.which)==9&&e.shiftKey&&(e.preventDefault(),r.focus())):n.hasClass("px-video-btnFullScreen")&&n.is(":checked")&&(e.keyCode||e.which)==9&&(e.shiftKey||(e.preventDefault(),t(e.target).closest(".px-video-controls-top").find(".px-video-rewind").focus()))},setProductDetailsStorageItem:function(){if(!r.util.isPrivateBrowse()){var e={},t=this.model.getAttributeValue("breadcrumbs")||_.getVal(Taxo,"breadCrumb.breadCrumbFull")||[],n=t.length||1,i=t[n-1]||{};e.partNumber=this.model.get("parentTCIN")||this.model.getAttributeValue("tcin"),e.title=this.model.getAttributeValue("title"),e.manufacturer=this.model.get("manufacturer"),e.categoryId=i.nid,sessionStorage.setItem("productdetails",JSON.stringify(e))}},addMicrodata:function(){var e=this.model.getAttributeValue("tcin"),t={productName:this.model.attributes.title,microdataCollection:this.model.getAttributeValue("childs")||{}};_.isEmpty(t.microdataCollection)&&(t.microdataCollection[e]=this.model.attributes),this.$el.prepend(this.templates.pdpMicrodataTpl(t))},addReviewsSummaryRow:function(){this.setProductDetailsStorageItem();var e=new l(this.model);e.render()},addBreadcrumb:function(){"use strict";var e=this,n=e.model.addBreadcrumbData();if(n.taxonomy.length){var r=t(".js-breadcrumb");r.empty(),r.prepend(e.templates.breadcrumbTpl(n))}},addUgcContent:function(){"use strict";if(!_.isEnabled("SHOW_UGC"))return;var e=this.model.getAttributeValue("ugcContent");if(_.isObject(e)){var n=this.model.datetimeToEnglish(e.timestamp*1e3);e.date=n;var r=t("#ugcContainer");r.empty(),r.html(this.templates.ugcTpl(e))}},readPageHeaderDefault:function(){r.TimeToFirstPaint();var e=this;this.hideAllViews(),window.scrollTo(0,0),this.$("#js-pdp-page-title").attr("tabindex","-1").focus(),window.setTimeout(function(){e.showAllViews()},1e3)},hideAllViews:function(){this.$("#nav").attr("aria-hidden","true"),this.$("#header").attr("aria-hidden","true"),this.$("#footer").attr("aria-hidden","true"),this.$("#asideRightBlockId").attr("aria-hidden","true"),this.$("#pdpMainContainer").attr("aria-hidden","true"),this.$(".header--top").attr("aria-hidden","true")},showAllViews:function(){this.$("#nav").attr("aria-hidden","false"),this.$("#header").attr("aria-hidden","false"),this.$("#footer").attr("aria-hidden","false"),this.$("#asideRightBlockId").attr("aria-hidden","false"),this.$("#pdpMainContainer").attr("aria-hidden","false"),this.$(".header--top").attr("aria-hidden","false")},updateBasicMessagesRow:function(){this.$("#basic_messages").html(this.templates.productBasicMessageTpl(this.model.getBasicMessagesRowData())),this.$(".messageInfo").text()?this.$("#basic_messages").show():this.$("#basic_messages").hide()},loadGoogleAds:function(){Backbone.Events.trigger("v:googleAdsense:callGoogleAdsense",this.model.getGoogleAdsData(),this.model.getAdBlockStyles())},loadGooglePlas:function(){Backbone.Events.trigger("v:googleAdsense:callGooglePLA","plas",this.model.getGooglePLAData(),this.model.getGooglePLABlock(this.backfillAFS))},backfillAFS:function(e,t){!t&&!r.deviceAtlas.isDesktop()&&this.loadGoogleAds()},getAdOnDevice:function(){return r.deviceAtlas.isDesktop()?"desktop":formFactor==="tablet"&&window.matchMedia("(orientation: portrait)").matches?formFactor+"_"+"portrait":formFactor==="tablet"&&window.matchMedia("(orientation: landscape)").matches?formFactor+"_"+"landscape":"mobile"},getCategoryNid:function(){var e=this.model.addBreadcrumbData().taxonomy,n=this.model.addBreadcrumbData().taxonomy.length,r="";return t.each(e,function(e,t){e>0&&(r+=t.url.split("-").pop(),e<n-1&&(r+="/"))}),r},displayDVMRow:function(){var e=this,n=t(".dvmSlot");n.hide();var i=Taxo.breadCrumbNids||"";if(_.isEnabled("AD_RECS_ENABLED_PDP"))var s={placements:[]},o=[];var u={pdpad_desktop:[{pos:"block1",name:"ad_728x90",slots:[728,90]},{pos:"btf",name:"ad_300x250",slots:[300,250]}],pdpad_tablet_portrait:[{pos:"block1",name:"ad_300x75",slots:[300,75]},{pos:"pdp",name:"ad_300x75",slots:[300,75]}],pdpad_tablet_landscape:[{pos:"block1",name:"ad_300x75",slots:[300,75]},{pos:"block2",name:"ad_300x75",slots:[300,75]},{pos:"pdp",name:"ad_300x75",slots:[300,75]}],pdpad_mobile:[{pos:"block1",name:"ad_300x75",slots:[300,75]}]},a=u["pdpad_"+e.getAdOnDevice()],f=t(".pdpad_"+e.getAdOnDevice());t.each(f,function(n){t(this).show();var r=n+1;dvmObj={},dvmObj.container_id=t(this).attr("id"),dvmObj.page="productdetails",dvmObj.item=e.model.getAttributeValue("tcin"),dvmObj.breadCrumbNids=i,dvmObj.dvmConfig={pos:a[n].pos,slots:[a[n].slots]},_.isEnabled("AD_RECS_ENABLED_PDP")?(s.placements.push({page_location:dvmObj.dvmConfig.pos,placement_size:dvmObj.dvmConfig.slots[0].join("x")}),o.push({pageLocation:dvmObj.dvmConfig.pos,name:a[n].name,dvmObj:dvmObj})):p.renderDvm(a[n].name,dvmObj)}),_.isEnabled("AD_RECS_ENABLED_PDP")&&(s.channel_id=r.Get.Cookie("visitorId"),s.channel_type="firefly",s.page_type=dvmObj.page,s.tcin=e.model.attributes.tcin,TL.s(117),p.getAdUnits(s,function(e,t,n){TL.e(117),_.each(o,function(t){var r=_.findWhere(e,{page_location:t.pageLocation});t.dvmObj.dvmConfig.lineItemId=r&&r.line_item_id,t.dvmObj.xApiId=n.getResponseHeader("x-api-id"),p.renderDvm(t.name,t.dvmObj)})},function(){var e=/\/p.*\/-\/[a-zA-Z]-(\d+)/,t=window.location.href.match(e);TL.err(118,"Recommendations call failure for item "+_.getVal(t,"1")),_.each(o,function(e){p.renderDvm(e.name,e.dvmObj)})})),setTimeout(function(){e.dvmConfigData.siteskin.item=e.model.getAttributeValue("tcin"),e.dvmConfigData.siteskin.breadCrumbNids=i,e.dvmConfigData.siteskin.container_id="siteskin",p.renderDvm("siteskin",e.dvmConfigData.siteskin)},500)},preventDefaultAction:function(e){e.preventDefault(),e.stopPropagation()},backToBdp:function(e){e&&this.stopAll(e),t(".TGTloading").showSpacedLoader();var n=r.Get.TCookie("bdp-path");n&&(n="/p/"+n,this.goTo(n))},triggerRatingInfoCallSuccess:function(e){this.setModelTitle(""),this.setModelBody(e||"")},closeModal:function(e){this.stopAll(e),t("#overlay, #overlay-curtain").remove(),t(document.body).hasClass("modal-open")&&t(document.body).removeClass("modal-open"),t(".popover-heading").attr("aria-hidden","false"),t(".popover-contain").attr("aria-hidden","false"),t(e.target).parent().hasClass("nonPopoverModal")&&(t("#popover").css("left","100%"),window.setTimeout(function(){this.$("#overlay").removeClass("nonPopoverModal"),this.$("#popover").removeClass("nonPopoverModal")},600))},removeOverlayCurtain:function(e){this.stopAll(e),t("#overlay, #overlay-curtain").remove(),t(document.body).hasClass("modal-open")&&t(document.body).removeClass("modal-open"),t("#popover").css("left","100%"),t("#popover").hasClass("nonPopoverModal")&&window.setTimeout(function(){this.$("#overlay").removeClass("nonPopoverModal"),this.$("#popover").removeClass("nonPopoverModal")},600)},howStoreSet:function(e){this.howStoreSetTemplate=this.tpl("_howstoreset","howYourStoreSet"),t("#main_body").append(this.howStoreSetTemplate),t("#footer,.main,#checkout-header,.search-wrap").attr("aria-hidden","true"),t("#returnpolicy").modal("show").css("margin-top",-1*t("#returnpolicy").height()/2)},productImageCarousel:function(e,t,n){var r=this.model.productImageModelData(e,t,n);if(r){r.altImages.length>0&&r.altImages[0]==r.heroImage&&(r.hideAltImages=!0);var i=_.template(this.templates.productHeroImageCarousalTpl,r);this.$("#imagecarousal").html(i),this.initializeSlickCarousel(),this.model&&Backbone.Events.trigger("v:tgtcrsh:showLoveCount",this.model.get("loveCount")||0,this.model.get("tcin"));var s=this.$("#imagecarousal").find("img");this.addImgLoadHooks(s,function(){TL.e(0),TL.e(4)}),this.renderZoomTemplate(r)}_.deferImage(this.$el)},addImgLoadHooks:function(e,n){var r=e.length;e.each(function(e,i){t(i).on("load",function(){r--,r||n()})})},initializeSlickCarousel:function(){t("#imagecarousal").find(".carousel-product").slick({dots:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!0,variableWidth:!0,mobileFirst:!0,arrows:!0,prevArrow:'<button class="slick-prev js-slickPrevImg js-slickHideArrowImg" aria-label="previous"><img aria-hidden="true" class="slick-nav" src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20%20viewBox%3D%220%200%2032%2032%22%20enable-background%3D%22new%200%200%2032%2032%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolyline%20fill%3D%22none%22%20stroke%3D%22%23666666%22%20stroke-width%3D%220.775%22%20stroke-miterlimit%3D%2210%22%20points%3D%2223.8%2C0.5%208.2%2C16%2023.8%2C31.5%20%22%2F%3E%3C%2Fsvg%3E"></img>Previous</button>',nextArrow:'<button class="slick-next js-slickNextImg js-slickHideArrowImg" aria-label="next"><img aria-hidden="true" class="slick-nav" src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20%20viewBox%3D%220%200%2032%2032%22%20enable-background%3D%22new%200%200%2032%2032%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolyline%20fill%3D%22none%22%20stroke%3D%22%23666666%22%20stroke-width%3D%220.775%22%20stroke-miterlimit%3D%2210%22%20points%3D%2223.8%2C0.5%208.2%2C16%2023.8%2C31.5%20%22%2F%3E%3C%2Fsvg%3E"></img>Next</button>',responsive:[{breakpoint:600,settings:{dots:!0,arrows:!0,prevArrow:'<button class="slick-prev js-slickPrevImg" aria-label="previous"><img aria-hidden="true" class="slick-nav" src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20%20viewBox%3D%220%200%2032%2032%22%20enable-background%3D%22new%200%200%2032%2032%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolyline%20fill%3D%22none%22%20stroke%3D%22%23666666%22%20stroke-width%3D%220.775%22%20stroke-miterlimit%3D%2210%22%20points%3D%2223.8%2C0.5%208.2%2C16%2023.8%2C31.5%20%22%2F%3E%3C%2Fsvg%3E"></img>Previous</button>',nextArrow:'<button class="slick-next js-slickNextImg" aria-label="next"><img aria-hidden="true" class="slick-nav" src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20%20viewBox%3D%220%200%2032%2032%22%20enable-background%3D%22new%200%200%2032%2032%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolyline%20fill%3D%22none%22%20stroke%3D%22%23666666%22%20stroke-width%3D%220.775%22%20stroke-miterlimit%3D%2210%22%20points%3D%2223.8%2C0.5%208.2%2C16%2023.8%2C31.5%20%22%2F%3E%3C%2Fsvg%3E"></img>Next</button>'}}]});if(this.enableTapToZoom){var e=t(".js-tapToZoom");e.length&&(setTimeout(function(){e.addClass("is-tapToZoom-shown")},10),setTimeout(function(){e.removeClass("is-tapToZoom-shown")},2e3)),this.enableTapToZoom=!1}},renderZoomTemplate:function(e){var t=_.template(this.templates.productImageZoom,e);this.$(".js-imageZoomOverlay").html(t),this.initializePanzoom()},changeHeroImageFocus:function(){setTimeout(function(){this.$("#imagecarousal .slick-active a").focus()},300)},showFadeAwayModal:function(e,n,r,i){"use strict";var s,o,u,a,f;i=i||n,a=_.template(this.templates.selectOptionOverlay,{message:n,cssClass:e,selectOptionReaderMessage:i}),f=t(a),r.before(f);var l=function(){f.off("click",l),f.off("mousedown",l),f.off("touchstart",l);var e=f;f=null,e&&(e.remove(),t(".subscribe-wrap").length>0&&t(".subscribe-wrap").find("#popover-content-link").remove()),s&&window.clearTimeout(s),o&&window.clearTimeout(o),u&&window.clearTimeout(u)};f.mousedown(l),f.on("touchstart",l),f.on("click",l),n.indexOf("tap to zoom")==-1&&t("#popover-content-link").focus(),s=window.setTimeout(function(){f&&r.find(".select-option-reader-message").focus()},200),o=window.setTimeout(function(){f&&(f.addClass("fadeOut"),n.indexOf("tap to zoom")==-1&&window.setTimeout(function(){t(".sbc-add-to-cart").attr("aria-hidden","false").attr("tabindex","-1"),t(".sbc-add-to-cart").focus(),t(".sbc-subscribe").attr("aria-hidden","false").attr("tabindex","-1"),t(".sbc-subscribe").focus(),window.setTimeout(function(){t(".sbc-add-to-cart").removeAttr("aria-hidden").removeAttr("tabindex")},1e3)},1e3))},2e3),u=window.setTimeout(l,2800)},addCartRow:function(){var e=this.model.getAttributeValue("isVariation",!1),n=this.model.getAttributeValue("childs",!1);!e||e&&n?this.variationDisplayFlow(this.getItemInfoContract(),this.$(".sbc-varaition-mx"),this.model.getAttributeValue("isQpdp",!1)?"QPDP":"PDP",!1):e&&!n&&(this.$(".sbc-varaition-mx").append('<button class="btn btn-default btn-lg btn-block btn-disabled is-disabled" aria-title="currently unavailable" aria-disabled="true"> currently unavailable </button>'),t("#asideRightBlockId .TGTLazyLoading").hide())},getItemInfoContract:function(){var e=this.model.getAttributeValue("variationLookUp",{});return e},getAddToCartContract:function(e){return this.model.getAddToCartContract(e)},addPriceRow:function(){"use strict";var e=this.model.addPriceRowData();this.$('[data-placeholder="pdp-price-row"]').html(this.templates.productPriceRow(e)),e.saleEndDuration&&!isNaN(e.saleEndDuration)&&this.startSaleEndTimer(e.saleEndDuration)},addRedCardPriceRow:function(){"use strict";this.$("#redCardPrice").html(this.templates.redCardPriceTpl())},addCollectionTitle:function(){var e=this.model.getAttributeValue("collectionDetails");if(e&&_.isArray(e)&&e.length){var t="shop this collection";e.length>1&&(t="shop collections"),this.$(".js-collectionTitle").html(t)}else this.$(".js-collectionTitle").remove()},addPromotionRow:function(){this.$(".bb-promotion-callout-section").html(this.templates.pdpPromoTpl(this.model.addPromotionRowData())),this.$(".bb-promotion-callout-section .promo--text").text()?this.$(".bb-promotion-callout-section").show():this.$(".bb-promotion-callout-section").hide()},addRatingQaRow:function(){var e=this.model.addRatingReviewRowData(),t=e.overallrating||"";t.indexOf("-")!=-1&&(t=t.replace("-","."),e.overallrating=Number(t).toFixed(1)),e.overallrating=Number(e.overallrating);var n=this.model.attributes.questionAnswerStatistics||{};e.totalQuestionCount=n.questionCount||0,this.$("#js-review-qa").html(this.templates.productRatingQaTpl(e))},addCallOutRow:function(){var e=this.model.addCalloutData();e?this.$(".ribbon-pdp").html(this.templates.pdpCalloutTpl(e)):this.$(".ribbon-pdp").hide()},addRatingReviewRow:function(){this.setProductDetailsStorageItem(),this.$("#registry_share_rating_section_Id").html(this.templates.ratingReviewTpl(this.model.addRatingReviewRowData()))},addHelpfulReviewRow:function(){this.model.getAttributeValue("totalreview",0)>0&&Backbone.Events.trigger("v:pdp-main:getHelpfullReview",this.model.attributes.tcin)},helpfullReviewSuccess:function(e){var t=!1;e.length>123&&(e=e.slice(0,123)+"...",t=!0),this.$("#js-most-helpful-reviews-id").html(this.templates.helpfulReviewTpl({totalreview:this.model.getAttributeValue("totalreview",0),reviewText:e,isMoreEnable:t,isWriteReview:_.getVal(r,"Template.bridgeData.feature.ENABLE_WRITE_REVIEW")=="true"}))},callApplyCouponService:function(e){t(".TGTloading").showSpacedLoader(),e.preventDefault(),Backbone.Events.trigger("v:pdp-main:callApplyCouponService",{couponPromotionId:this.model.getAttributeValue("couponId")})},callApplyCouponServiceSuccess:function(e){if(e.status=="success"){t(".TGTloading").removeSpacedLoader();if(r.Get.TCookie("couponIds")!=""&&r.Get.TCookie("couponIds")!=undefined){if(r.Get.TCookie("couponIds").indexOf(this.model.getAttributeValue("couponId"))==-1){var n=r.Get.TCookie("couponIds")+"|"+this.model.getAttributeValue("couponId");r.Set.TCookie("couponIds",n)}}else r.Set.TCookie("couponIds",this.model.getAttributeValue("couponId"));this.model.set("isCouponApplied",!0),this.addPromotionRow()}},openShareView:function(e){this.stopAll(e),this.preventDefaultAction(e);var t=this;t.partNumber=this.model.getAttributeValue("tcin");var n=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");Backbone.history.navigate(n.slice(0,n.lastIndexOf("/"))+"/share/t-"+t.partNumber,{trigger:!0,refresh:!1})},goToHref:function(e){this.stopAll(e);var n=t(e.currentTarget).attr("href");r.util.navigateTo(n,{trigger:!0,refresh:!1})},handleRegistryEvent:function(e){this.stopAll(e);if(!this.model.getAttributeValue("isVariation",!1)||this.model.getAttributeValue("currentSelectedTCIN"))this.regVarPartNumber=this.model.getAttributeValue("tcin"),this.addToRegQty=t("#js-regQtyPicker").val(),this.registrySetup(e);else{var n="Select "+this.model.getAttributeValue("variationLookUp",{}).srVariationText||"variation option";this.showFadeAwayModal("popover-alert",n,this.$('[name="variator_secondary"]:first').closest(".carousel-container").find(".title p"),n)}},loadRegistryURI:function(){try{var e=this.model.getAttributeValue("registry"),t="/gift-registry/addToRegistryPage?",n="catentryId="+this.model.getAttributeValue("catEntryId")+"&action="+"addItem"+"&productId="+this.model.getAttributeValue("tcin")+(_.getVal(e,"regType")?"&regType="+(_.getVal(e,"regType")||""):"")+"&productName="+encodeURI(this.model.getAttributeValue("title"))+"&redirectUrl="+encodeURIComponent(location.href);t+=n,window.location.assign(t)}catch(r){}},goToReviewRatingsPage:function(e){var t=this,n={action:"readReview",events:"event31",product:this.model.get("parentTCIN")||this.model.getAttributeValue("tcin")};this.triggerAnalyticsEvent("readReview",n),this.stopAll(e),this.redirectToReviewRatingsPage()},goToWriteReviewPage:function(e){var n=this,i={action:"writeReview",events:"event66",location:this.model.get("parentTCIN")||this.model.getAttributeValue("tcin")};this.triggerAnalyticsEvent("writeReview",i),this.stopAll(e);var s={};s.isAnonymous=r.User.isAnonymous,s.email=r.User.email,this.eventBsdlObj={product:t(".headSetFocusPdp").text().trim()};var o=!this.model.getAttributeValue("totalreview");if(o){this.eventType="writeReview",this.bootstrapEventTracking(),this.launchReviewOverlay(r.Get.TCookie("mCurrentProduct"));return}if(!s.isAnonymous&&t(e.currentTarget).data("behavior")=="writeAReview"&&_.getVal(r,"Template.bridgeData.feature.ENABLE_WRITE_REVIEW")=="true"){this.eventType="writeReview",this.bootstrapEventTracking(),this.launchReviewOverlay(r.getParameterByName("productID"));return}s.isAnonymous?(this.eventType="writeReview",this.bootstrapEventTracking(),this.launchReviewOverlay(r.Get.TCookie("mCurrentProduct"))):(this.eventType="readReview",this.bootstrapEventTracking(),this.redirectToReviewRatingsPage())},handleReview:function(e){this.stopAll(e),this.model.getAttributeValue("totalreview")?this.goToReviewRatingsPage(e):this.goToWriteReviewPage(e)},launchReviewOverlay:function(e){var t=this;this.eventType="compInteraction",this.eventBsdlObj={componentName:"write review",componentLocation:"pdp : write review"},this.bootstrapEventTracking();var n="";e?n=e:(n=this.getWindowLocation().pathname,n=n.slice(n.lastIndexOf("-")+1)),this.wr="",$BV&&$BV.ui("rr","submit_review",{productId:n})},redirectToReviewRatingsPage:function(e){var t="?partNum="+(this.model.get("parentTCIN")||this.model.getAttributeValue("tcin"));e&&(t+="&wr=true"),this.goTo("/MCustomReview"+t)},goToSiginPage:function(e){var t="/gam-login",n="",r="?partNum="+(this.model.get("parentTCIN")||this.model.getAttributeValue("tcin")),i=this.getWindowLocation();e&&(r+="&wr=true",n=encodeURIComponent("MCustomReview"+r));var s=i.href.slice(i.href.indexOf("p/"));t=t+"?redirectToURL="+n+"&loginFailUrl="+s,this.goTo(t,!0)},triggerPinit:function(e){var n=t(e.currentTarget).attr("data-ref");n!=""&&window.location.assign(n)},displayRecommendationsRow:function(){var e=this.checkExtRec(),t=this.model.getLastCatDet(),n=this.model.getAttributeValue("tcin"),i={partNumber:n,elementId:this.$(".js-recommendationP3"),categoryId:t.nid||""},s=[];s[0]={partNumber:n,placementId:e.placementId,callback:"recPDPCallback",elementId:this.$(".js-recommendation"+e.position)},s[1]={partNumber:n,placementId:this.recPlacementId2,callback:"recPDPCallback2",elementId:this.$(".js-recommendationP2")},i.categoryId&&(s[0].categoryId=s[1].categoryId=i.categoryId),Backbone.Events.trigger("v:recommendations:render",s),this.initializeProductHl(i),r.deviceAtlas.isDesktop()||(this.$(".js-recommendation"+e.position).addClass("h-border-bottom"),this.$(".js-recommendationP2").addClass("h-border-bottom"))},checkExtRec:function(){var e=new RegExp("^google_pla|bing_pla|google$|bing$");return _.isEnabled("PDP_EXT_REC")&&e.test(r.getParameterByName("AFID"))?{placementId:this.recPlacementIdExt,position:"Ext",recsCollapse:!0}:(this.$(".js-recommendationExt").remove(),{placementId:this.recPlacementId1,position:"P1",recsCollapse:!1})},getReviewAnonymousTokens:function(){var e=r.getParameterByName("productID"),t=r.getParameterByName("orderId"),n=this;e!=""&&t!=""&&(Tgt_Auth.setRequestType("GET",!0),Tgt_Auth.postRequest("anonymousReview",{},{orderId:t,partNumber:e},function(t,r){if(t&&!t.error){var i=decodeURI(window.location.href.replace(domain,""));i=i.replace("&anonymousPurchaserFlag=yes","").replace("&lnk=anonyreview_email",""),Backbone.history.navigate(window.location.origin.replace(window.location.origin,"")+i,{trigger:!1,replace:!0}),n.launchReviewOverlay(e)}}))},doPDPTagging:function(e){this.model.getAttributeValue("partial",!1)||(this.minimumQuantity=!e||!e.taggingLtdQty?"":e.taggingLtdQty,this.storeMinimumQuantity=!e||!e.taggingStoreLtdQty?"":e.taggingStoreLtdQty,this.OBGB=!e||!e.taggingOBGB?"":e.taggingOBGB,this.ATP_fullfillment=!e||!e.taggingShippingMethod?"":e.taggingShippingMethod,this.tagErrors=!e||!e.tagErrors?"":e.tagErrors,this.storeStatus=!e||!e.storeStatus?"":e.storeStatus,this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking())},sizeChartOpen:function(e){this.stopAll(e),t("html, body").animate({scrollTop:t('.accordion--item[data-tab="sizecharts"]').position().top},1500),t('.accordion--item[data-tab="sizecharts"]').hasClass("is-active")||t('.accordion--item[data-tab="sizecharts"]').find(".js-accordion--title").trigger("click"),t("#sizecharts----toggle").focus()},goToCollectionList:function(e){this.stopAll(e);var t=this.model.getAttributeValue("collectionDetails");t&&t.length>1?this.$(".js-collectionList a").length?this.$(".js-collectionList").toggle():this.$(".js-collectionList").html(this.templates.collDetailsTpl({collectionDet:t})).show():this.collectionRoute(t[0].product_description_title,t[0].tcin)},goToCollectionDet:function(e){this.stopAll(e);var n=t(e.currentTarget).attr("data-tcin"),r=this.model.getAttributeValue("collectionDetails");if(n&&r.length){var i=_.findWhere(r,{tcin:n});this.collectionRoute(i.product_description_title,i.tcin)}},collectionRoute:function(e,t){if(e&&t){var n=this.model.buildPdpUrl(e,t);r.Set.removeTCookie("mCurrentProduct"),Backbone.history.navigate(n,{trigger:!0,replace:!1})}},onFIATSOverlayDismiss:function(e){e&&Backbone.Events.trigger("v:fiats:refreshAddToCartBlock","PDP",e)},recProductInfo:function(e){e.stopPropagation(),e.preventDefault();var n={};n.itemType="stand alone",n.tcin=t(e.currentTarget).attr("data-tcin"),n.price=t(e.currentTarget).attr("data-price"),this.addRecItemToCart(n,"REC")},getCollRecData:function(){var e=this.model.getAttributeValue("collectionParentTcin");e&&(this.isFromCollectionPage?Backbone.Events.trigger("v:collection:collDet","PDP"):Backbone.Events.trigger("v:pdp-main:collRec",e))},showCollDetails:function(e){this.paintCollData(this.model.getLpCollVal(e))},collListSuccess:function(e){this.paintCollData(this.model.getCollAttrVal(e))},paintCollData:function(e){e&&(this.$(".js-collRec").html(this.templates.collRecTpl(e)).show(),r.deviceAtlas.isDesktop()&&(this.$(".js-collRec").carousel(),this.$(".js-collRec").removeClass("h-border-bottom")))},loadBeautyConciergeReview:function(){var e=t(".js-expertReviews-beautyConciergeReview"),n=r.Get.TCookie("mCurrentProduct"),i=new o,s=this.model.attributes.ratingAndReviewStatistics.result[n].expertReviewContentMetadata,u="";e.is(":empty")&&(_.each(s,function(e){e.vendor==="BEAUTY_CONCIERGE"&&(u=e.url)}),i.fetch({vendorUrl:u,success:function(t){e.html(t.attributes.content)},error:function(e){console.log("error:"+JSON.stringify(e))}}))},showWebcollage:function(){typeof Webcollage!="undefined"&&typeof Webcollage.terminatePowerPage=="function"&&Webcollage.terminatePowerPage();var e=this;if(_.isEnabled("ENABLE_WEBCOLLAGE")){r.deviceAtlas.isDesktop()&&this.$("#wc-power-page").removeClass("h-border-top");var t=r.Config.webCollage;r.util.getCachedScript(t).done(function(){Webcollage.loadContent("target",e.model.getAttributeValue("parentTCIN"),{reload:!0})})}else this.$("#wc-power-page").remove()},loadCommonSenseReview:function(){var e=t(".js-expertReviews-commonSenseReviewContainer"),n=r.Get.TCookie("mCurrentProduct"),i=this.model.attributes.ratingAndReviewStatistics.result[n].expertReviewContentMetadata,s=new c({$el:e}),o="";e.is(":empty")?(_.each(i,function(e){e.vendor==="COMMON_SENSE"&&(o=e.url)}),s.render({vendorUrl:o})):t(".js-commonSense-logo").focus()},routeToDetailPage:function(e){"use strict";e.preventDefault(),this.closeModal(e);var n=t(e.currentTarget).attr("data-href");n.charAt(0)!=="/"&&(n="/"+n),Backbone.history.navigate(n,{trigger:!0,replace:!1})},loadQuestionAnswer:function(e){var n=this,r=t(e.currentTarget).closest(".accordion--item").hasClass("is-active"),i=t(".js-questionAnswer-summary"),s=new h(this.model);i.is(":empty")&&r?s.render({success:function(){n.focusQuestionAnswer()}}):this.focusQuestionAnswer()},focusQuestionAnswer:function(){var e=t(".js-questionAnswer-summary");e.find(".js-questionAnswer-questionSummary").length?e.find(".js-questionAnswer-questionSummary").eq(0).focus():e.find(".js-questionAnswer-showComposeQuestionPanel").focus()},hLUpdateCall:function(){var e=this,t={hlpt:"P",platform:formFactor!="phone"?"web":"mobile",parentsku:e.model.getAttributeValue("parentTCIN")},n=this.model.getAttributeValue("childs"),r=new RegExp("^[a-zA-Z ]+$");if(n)_.each(n,function(e){var n=e.inventoryCode!=6?1:0;t.quantity=_.isDefined(t.quantity)?t.quantity+"|"+n:n,t.productid=t.productid?t.productid+"|"+e.tcin:e.tcin;var i=_.getVal(e,"offer.price")||"";if(r.test(i))t.RenderingAttributes=t.RenderingAttributes?t.RenderingAttributes+'|{"hidePrice":"1"}':'{"hidePrice":"1"}';else{t.price=t.price?t.price+"|"+e.offer.priceInt:e.offer.priceInt;var s=e.previous&&e.previous.priceInt?e.previous.priceInt:e.offer.priceInt;t.comparePrice=t.comparePrice?t.comparePrice+"|"+s:s,t.RenderingAttributes=t.RenderingAttributes?t.RenderingAttributes+'|{"hidePrice":"0"}':'{"hidePrice":"0"}'}});else{t.quantity=e.model.getAttributeValue("inventoryCode")!=6?1:0,t.productid=e.model.getAttributeValue("tcin");var i=e.model.getAttributeValue("offer.price")||"";r.test(i)?t.RenderingAttributes='{"hidePrice":"1"}':(t.price=e.model.getAttributeValue("offer.priceInt"),t.comparePrice=e.model.getAttributeValue("previous.priceInt")||e.model.getAttributeValue("offer.priceInt"),t.RenderingAttributes='{"hidePrice":"0"}')}this.initUpdateProductHl(t)},showFitStyle:function(){var e=this.model.getAttributeValue("fitStyle"),n=this.model.getAttributeValue("display_option",{}).is_size_chart&&this.model.getAttributeValue("size_chart_url");e&&e.bullets?t(".js-fitstyle").html(this.templates.fitStyleTpl({fitStyleDet:e,sizeChart:n})):t(".js-fitstyle").remove()},showFitStyleDet:function(e){this.stopAll(e);var n=t(".js-showFitStyleDet");n.hasClass("is-expand")?(n.removeClass("is-expand"),n.find(".js-showFitStyleDetAlly").html("shows more content"),n.find(".js-fitStylelst li:gt(1)").attr("aria-hidden","true")):(n.addClass("is-expand"),n.find(".js-showFitStyleDetAlly").html("hides content"),n.find(".js-fitStylelst li:gt(1)").attr("aria-hidden","false"))},updateRegQuantity:function(){var e=t("#js-regQtyPicker").val();t(".js-regQtyUpdate").html(e),setTimeout(function(){t("#js-regQtyPicker").parent().attr("tabindex","-1").focus()},500)},scrollToRatingsSection:function(e){e.preventDefault();var n=t("#bvTag-reviewsSummary");t.scrollToTag(n,300),n.attr("tabindex","-1").focus()},scrollAndOpenQa:function(e){e.preventDefault();var n=t('.accordion--item[data-tab="questionAnswer"]');t.scrollToTag(n,300),n.hasClass("is-active")||n.find(".js-accordion--title").trigger("click"),t("#questionAnswer----toggle").attr("tabindex","-1").focus()}}}};return v}),function(e){typeof define=="function"&&define.amd&&define("patlab.panzoom",["jquery","patlab.utils"],e)}(function(e,t){function i(n,i){return this.plugin=r.plugin,this.defaults=r,this.opts=e.extend({},this.defaults,i),this.el=n,this.$el=e(n),this.rawImageWidth=this.$el.width(),this.rawImageHeight=this.$el.height(),this.scale=1,this.focalx=0,this.focaly=0,this.utils=t,this.init(),this}var n="panzoom",r={plugin:n,transition:1,panLimit:!0,pinchLimit:!0};return i.prototype={init:function(){return this.refresh(),!0},refresh:function(e){this.scale=1,this.focalx=this.rawImageWidth/2,this.focaly=this.rawImageHeight/2,this.move(e)},pan:function(e,t,n){this.focalx+=e/this.scale,this.focaly+=t/this.scale,this.move(n)},panTo:function(e,t,n){this.focalx=e,this.focaly=t,this.move(n)},zoom:function(e,t){this.scale+=e*this.scale,this.move(t)},zoomTo:function(e,t){this.scale=e,this.move(t)},screenToImage:function(e,t){return{x:(e-this.rawImageWidth/2)/this.scale+this.focalx,y:(t-this.rawImageHeight/2)/this.scale+this.focaly}},move:function(e){var t,n,r,i=typeof e=="undefined"?this.opts.transition:e;this.$el.css({transition:"transform "+i+"s","-webkit-transition":"-webkit-transform "+i+"s","-moz-transition":"-moz-transform "+i+"s","-o-transition":"-o-transform "+i+"s"}),this.focalx<0&&(this.focalx=0),this.focaly<0&&(this.focaly=0),this.focalx>this.rawImageWidth&&(this.focalx=this.rawImageWidth),this.focaly>this.rawImageHeight&&(this.focaly=this.rawImageHeight),this.scale<=1e-4&&(this.scale=1e-4),t=-this.focalx*this.scale+this.rawImageWidth/2,n=-this.focaly*this.scale+this.rawImageHeight/2,r="translate3d("+t+"px,"+n+"px, 0) "+"scale("+this.scale+","+this.scale+")",this.$el.css({"tranform-origin":"0 0","-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0",transform:r,"-webkit-transform":r,"-moz-transform":r,"-o-transform":r})}},i}),define("views/mixins/browse/panzoom.view-mx",["jquery","page","models/browse/pdp.model","patlab.panzoom"],function(e,t,n,r){var i=function(t){return{addToObj:{events:{"click .js-showZoomImage":"onImageClick","click .js-closeZoomContainer":"modalClose","click .js-changeSelZoomImage":"changeZoomImage","keydown .js-imageZoomContainer":"onCloseClick"}},setDefaults:{patlab:{},isZoomActive:!1,isZoomed:!1,panTimer:null,lastPan:{x:0,y:0},currentPan:{x:0,y:0},lastScale:1,currentScale:1,zoomTimer:null,model:new n,instances:{},loadHammer:function(e,t){var n=this;n.Hammer===undefined?require(["patlab/vendor/hammer"],function(r){n.Hammer=r,e&&e.call(n,t)}):e&&e.call(n,t)},initializePanzoom:function(){this.$zoomContainer=this.$(".js-imageZoomContainer"),this.$zoomImg=this.$zoomContainer.find(".js-zoomImage"),this.$zoomParentContainer=this.$(".js-imageZoomContainer"),this.$zoomThumbnailsContainer=this.$(".js-imageZoomThumbnails"),this.isZoomActive=!1,this.loadHammer();var t=this;e(".js-images").on("afterChange",function(n,r,i){var s=e(".js-imageZoomContainer").find(".js-zoomImage"),o=e(this).slick("slickCurrentSlide"),u=s[o].getAttribute("data-id");t.patlab.panzoom=t.instances[u],t.changeSelectedThumbnail(o),e(".zoom_"+o).attr("tabindex","-1").focus()})},changeZoomImage:function(t){if(!e(t.currentTarget).parent().hasClass("is-selected")){var n=e(t.currentTarget).data("idx");e(".js-images").slick("slickGoTo",n,!0)}},destroyPanzoom:function(){this.unbindHammerEvents(),delete this.patlab.panzoom,this.isZoomActive=!1},bindHammerEvents:function(e){var t=this.hammer=new this.Hammer.Manager(e,{});delete t.options.cssProps,t.add(new this.Hammer.Tap({event:"dbltap",taps:2})),t.add(new this.Hammer.Pan({enable:!0})),t.add(new this.Hammer.Pinch({enable:!0})),t.on("dbltap",this.onDblTap.bind(this)),t.on("panstart panmove",this.onPan.bind(this)),t.on("pinchstart pinchmove pinchend",this.onPinch.bind(this))},unbindHammerEvents:function(){var e=this.hammer;e!==undefined&&(e.off("dbltap"),e.off("panstart panmove"),e.off("pinchstart pinchmove pinchend"),e.destroy(),delete this.hammer)},onImageClick:function(t){var n=e(t.currentTarget).data("idx");this.destroyPanzoom(),this.openZoomContainer(),this.setupImage(n),this.changeSelectedThumbnail(n)},onCloseClick:function(e){e.type==="keydown"&&e.which===27&&this.modalClose()},modalClose:function(){this.closeZoomContainer(),this.destroyPanzoom(),e(".slick-active")[0]?(e(".slick-active a").focus(),e("#carouselModal").slick("unslick")):e(".single-image").parent().focus()},onDblTap:function(e){var t;return e.center===undefined?!1:(t=this.patlab.panzoom.screenToImage(e.center.x,e.center.y),this.isZoomed?this.patlab.panzoom.refresh():(this.patlab.panzoom.zoomTo(4),this.patlab.panzoom.panTo(t.x,t.y)),this.isZoomed=!this.isZoomed,!1)},onPinch:function(e){function n(){var e=t.currentScale-t.lastScale;t.lastScale=t.currentScale,t.patlab.panzoom.zoom(e,0)}var t=this;if(e.type==="pinchstart")return this.lastScale=e.scale,this.currentScale=e.scale,this.pinchTimer=setInterval(n,20),!1;if(e.type==="pinchmove")return this.currentScale=e.scale,!1;if(e.type==="pinchend")return clearInterval(this.pinchTimer),this.updatePinch(),!1},onPan:function(e){function i(){var e=n.x-r.x,i=n.y-r.y;n.x=r.x,n.y=r.y,t.patlab.panzoom.pan(e,i,0)}var t=this,n=this.lastPan,r=this.currentPan;e.type==="panstart"?(n.x=0,n.y=0):e.type==="panmove"&&(r.x=e.deltaX,r.y=e.deltaY),i()},openZoomContainer:function(){var t=this;t.$zoomThumbnailsContainer.show(),t.$zoomParentContainer.modal("show"),t.ariaHideHeaderPdPBodyFooter(!0),window.history&&window.history.pushState&&(e(window).on("popstate.zoomImage",function(){t.closeZoomContainer()}),window.history.pushState("forward",null))},closeZoomContainer:function(){this.$zoomParentContainer.modal("hide"),this.ariaHideHeaderPdPBodyFooter(!1),e(window).off("popstate.zoomImage")},changeSelectedThumbnail:function(t){e(".js-imageZoomThumbnails li").removeClass("is-selected"),e(".js-imageZoomThumbImgPos_"+t).parent().addClass("is-selected")},setupImage:function(t){e(".TGTloading").showSpacedLoader();var n,r,i,s=this;if(!_.isEmpty(this.model.toJSON())){var o=this.model.getAttributeValue("heroChange");o?(n=o.altImages,r=o.heroImage,i=this.model.getAttributeValue("title",[])):(n=this.model.getAttributeValue("altImages",[]),r=this.model.getAttributeValue("heroImage",[]),i=this.model.getAttributeValue("title",[]))}else n=this.collection.metaData.altImages||[],r=this.collection.metaData.heroImage||[],i=this.collection.metaData.title||[];var u=n.length+1,a=_.template(this.templates.zoomImageCarouselTpl,{altImages:n,heroImage:r,title:i,totalImages:u});e("#carouselModal").hasClass("slick-initialized")&&e("#carouselModal").slick("unslick"),e(".js-images").html(a),this.initializeZoomCarousel(t);var f=e(".js-imageZoomContainer").find(".js-zoomImage");f.each(function(){e(this).one("load",s.imageInit.bind(s,this,t))}),this.triggerAnalyticsEvent("clickInteraction",{action:"zoomProductImage:"+t})},initializeZoomCarousel:function(t){e(".js-images").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,swipe:!1,infinite:!0,prevArrow:'<button class="btn btn-sm btn-default btn-icon-only btn-left btn-round btn-paginate"><img aria-hidden="true" class="slick-nav slick-arrow-left" src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2232%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%3E%3Cpath%20d%3D%22M16%2025l-16-16%202-2%2014%2014.063%2014-14.063%202%202z%22%20fill%3D%22%23000000%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E">Previous</button>',nextArrow:'<button class="btn btn-sm btn-default btn-icon-only btn-right btn-round btn-paginate"><img aria-hidden="true" class="slick-nav slick-arrow-right" src="data:image/svg+xml;charset=US-ASCII,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20width%3D%2232%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%3E%3Cpath%20d%3D%22M16%2025l-16-16%202-2%2014%2014.063%2014-14.063%202%202z%22%20fill%3D%22%23000000%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E">Next</button>'}),e(".js-images").slick("slickGoTo",t,!0)},addImageToDom:function(e){var t=this,n=50;e!==this.$zoomImg.attr("src")?(this.$zoomImg.one("load",this.imageInit.bind(this)),this.$zoomImg.animate({opacity:0},n,function(){t.$zoomImg.attr("src",e)})):this.isZoomActive===!1&&this.$zoomImg.animate({opacity:0},n,function(){t.imageInit()})},imageInit:function(t,n){var i=this,s=50,o=e(".js-imageZoomContainer").find(".js-zoomImage");window.setTimeout(function(){i.$zoomImg.animate({opacity:1},s),i.$zoomImg.attr("alt","triple-tap to zoom"),i.$zoomImg.attr("tabindex","-1").focus(),i.instances[t.getAttribute("data-id")]=new r(t),t.getAttribute("data-index")==n&&(i.patlab.panzoom=i.instances[t.getAttribute("data-id")],e(".zoom_"+n).parent("li").attr("tabindex","-1").focus()),i.loadHammer(i.bindHammerEvents,t)},s*6),this.isZoomActive=!0,e(".TGTloading").removeSpacedLoader()}},ariaHideHeaderPdPBodyFooter:function(t){var n=e("#header"),r=e("#pdpMainContainer"),i=e("#footer"),s=e(".header--top"),o=e("#js-pdp-page-title"),u=e("#nav");t?(n.hide(),r.hide(),i.hide(),s.hide(),o.hide(),u.hide()):(n.show(),r.show(),i.show(),s.show(),u.show(),o.show())},triggerAnalyticsEvent:function(e,t){"use strict";t=t||{};var n={pageName:this.pageName,product:this.model.getAttributeValue("title")};this.eventType=e,this.eventBsdlObj=_.extend(n,t),this.bootstrapEventTracking()}}};return i}),define("views/mixins/browse/google-adSense-view-mx",[],function(){var e=function(e){return{setDefaults:{lastCallLocation:null,callGoogleAds:function(e,t,n){if(this.lastCallLocation===window.location.href)return;var r=this,i=t.container;if(window.google&&window.google.ads.search)this.lastCallLocation=window.location.href,new google.ads.search.Ads(e,t);else{if(n>=2)return 0;n++,setTimeout(function(){r.callGoogleAds(e,t,n)},50)}}},callGooglePLA:function(e,t,n){_googCsa(e,t,n)},after:{initializeView:function(){this.listenTo(Backbone.Events,"v:googleAdsense:callGoogleAdsense",this.callGoogleAds),this.listenTo(Backbone.Events,"v:googleAdsense:callGooglePLA",this.callGooglePLA)}}}};return e}),define("views/mixins/browse/tabs-mx",["modernizr","jquery","page","Target","contextMappings","router","patlab.toggler"],function(e,t,n,r,i,s,o){var u=function(e){return{addToObj:{events:{'click [data-behavior="gotoPricesByCarrierTab"]':"gotoPricesByCarrierTab","click .js-returns-details":"goToReturnsDetailsPage"}},after:{initializeView:function(){this.listenTo(Backbone.Events,"v:pdp-main:showPageComplete",this.onPageShowComplete)}},setDefaults:{patlab:{},ccsCnetItemInfo:null,ccsGamespotItemInfo:null,initializePatLab:function(){this.patlab.toggler=new o(this.el)},switchTabs:function(e){if(e.target!==e.currentTarget&&t(e.target).parents(".accordion--content").length)return;var n=e.currentTarget,r=t(n).parent().parent(".accordion--item"),i=r.data();r.hasClass("is-active")||(this.currentlySelectedTab=r,this.loadLazyContent(r),this.triggerTabChangeAnalyticsEvent(r)),this.patlab.toggler.toggle(r[0],i)},registerCustomTabLazyLoader:function(e,t){"use strict";this.customDataTabHandelers||(this.customDataTabHandelers={}),this.customDataTabHandelers[e]=t},getCustomTabLazyLoaderForKey:function(e){"use strict";return this.customDataTabHandelers?this.customDataTabHandelers[e]:null},buildTabObject:function(e,t,n){"use strict";var r=t&&(t.length||_.keys(t).length);if(!e||!r)return;return t&&!_.isArray(t)&&(t=[t]),n||(n=e.replace(/[^a-zA-Z]/g,"")),{tabId:n,name:e,content:t,isSelected:!1,isHidden:!1}},buildLazyItem:function(e,t,n){"use strict";n=n||{};var r,i,s=n.customHandler;return s&&(r=_.uniqueId(e),this.registerCustomTabLazyLoader(r,s)),i={type:"lazy",customHandlerKey:r,src:t,cssClass:n.cssClass||"",loadAsIframeContent:n.useIframe||!1,jsonKey:n.jsonKey||!1},i},buildLazyLoadTab:function(e,t,n){"use strict";var r=e.replace(" ",""),i=this.buildTabObject(e,this.buildLazyItem(r,t,n));return i},buildOverviewTab:function(){"use strict";var e=this.model.buildOverviewTabData(),t=this.buildTabObject("item details",e);return t},buildSpecificationTab:function(){"use strict";var e,t=this.model.getSpecificationData(),n=this.model.getAttributeValue("energyGuide")||{};if(!_.isEmpty(n)){var r=this.model.buildEnergyGuideObj(n);this.model.addItemToList(t,"text",this.templates.energyGuideTpl(r))}if(!_.isEmpty(t))return e=this.buildTabObject("specs",t),e},injectCssIntoIframe:function(e,t,n){var r;n&&(r="<style>"+n.join("")+"</style>"),_.each(e,function(e){t.append('<link href="'+e.cssfile+'"media="all" rel="stylesheet" type="text/css">')}),r&&t.append(r)},buildAppleTermsTab:function(){var e,t=this.model.getAttributeValue("isAppleGiftCard");if(!t)return;return customHandler=function(e,n,r){Backbone.Events.trigger("v:pdp-main:getAppleTerms",t,r,e)},e=this.buildLazyLoadTab("apple terms",null,{customHandler:customHandler}),e},getAppleTermsSuccess:function(e,n,r){e&&(r.html(t("<div></div>").html(e)),n&&n())},buildShippingTab:function(){"use strict";if(this.model.getAttributeValue("POBoxProhibited").is_po_box_prohibited!==!0)return;var e,t=this.model.buildShippingTabData();return e=this.buildTabObject("shipping",t),e},buildReturnTab:function(){"use strict";var e,t,n=this,r=this.model.buildReturnsTabData();return t=function(e,t,n){Backbone.Events.trigger("v:pdp-main:getReturnPolicy",n,e)},r.push(this.buildLazyItem("returnTerms",null,{customHandler:t,cssClass:"return-legal-preformatted"})),e=this.buildTabObject("returns",r),e},getReturnPolicySuccess:function(e,n,r){var i=t("<div></div>").html(e.message).text();i.indexOf("refund/exchange policy<br/><br/>")!==-1&&(i=i.replace("refund/exchange policy<br/><br/>",'<div class="basic-subheading title-text">refund/exchange policy</div>')),i.indexOf("Target return policy")!==-1&&(i=i.replace("Target return policy",'<a class="link-underline js-returns-details" href="/returns-details">Target return policy</a>')),r.html(i),n&&n()},goToReturnsDetailsPage:function(n){n.preventDefault();var r=t(n.currentTarget),i=r.attr("href");Backbone.history.navigate(i,{trigger:!0,replace:!1})},setExternalCSS:function(e){var n=this;if(!e)return;typeof e=="string"&&(e=[e]),_.each(e,function(e){t('<link rel="stylesheet" type="text/css" href="'+e+'"  data-name = "'+n.$el.attr("data-name")+"/style"+'"></link>').appendTo(t("head"))})},addItemToListIfPresent:function(e,t){e&&(this.currentlySelectedTab?e.tabId===this.currentlySelectedTab.data("tab")&&(e.isSelected=!0):t.length||(e.isSelected=!0),t.push(e))},buildTabsModel:function(){"use strict";var e=this,t=[],n=r.Get.TCookie("mCurrentProduct");this.addItemToListIfPresent(this.buildOverviewTab(),t),this.addItemToListIfPresent(this.buildAppleTermsTab(),t),this.addItemToListIfPresent(this.buildSpecificationTab(),t),this.addItemToListIfPresent(this.buildSizeChartTab(),t),this.addItemToListIfPresent(this.buildLabelInfoTab(),t),this.addItemToListIfPresent(this.buildDrugTab(),t),this.addItemToListIfPresent(this.buildShippingAndReturnTab(this.buildShippingTab(),this.buildReturnTab()),t),this.model.attributes.ratingAndReviewStatistics.result&&this.model.attributes.ratingAndReviewStatistics.result[n]&&this.model.attributes.ratingAndReviewStatistics.result[n].expertReviewContentMetadata&&_.each(this.model.attributes.ratingAndReviewStatistics.result[n].expertReviewContentMetadata,function(n){_.isEnabled("ENABLE_BEAUTY_CONCIERGE_REVIEW")&&n.vendor==="BEAUTY_CONCIERGE"&&e.addItemToListIfPresent(e.buildBeautyConciergeTab(),t),_.isEnabled("ENABLE_COMMON_SENSE_REVIEW")&&n.vendor==="COMMON_SENSE"&&e.addItemToListIfPresent(e.buildCommonSenseTab(),t)});if(_.isEnabled("ENABLE_CCS_CNET_REVIEW")&&this.model.isQualifiedForCnetReview("cnetreview")){var i={type:"cnetreview",tabId:"ccsCnet",template:this.templates.ccsCnetReviewTpl,name:"CNET editor's review"};this.ccsCnetItemInfo=i,this.addItemToListIfPresent(this.buildCnetContentSolutionsReviewTab(i),t)}if(_.isEnabled("ENABLE_CCS_GAMEPSOT_REVIEW")&&this.model.isQualifiedForCnetReview("gamespot")){var i={type:"gamespot",tabId:"ccsGamespot",template:this.templates.ccsGamespotReviewTpl,name:"Gamespot editor's review"};this.ccsGamespotItemInfo=i,this.addItemToListIfPresent(this.buildCnetContentSolutionsReviewTab(i),t)}return this.addItemToListIfPresent(this.buildTermsTab(),t),_.isEnabled("ENABLE_QUESTION_ANSWER")&&this.addItemToListIfPresent(this.buildQuestionAnswerTab(),t),t},buildCnetContentSolutionsReviewTab:function(e){"use strict";var t=[],n;return t.push({type:"text",cssClass:"",content:""}),n=this.buildTabObject(e.name,t,e.tabId),n.isHidden=!0,n},loadCnetContentSolutionsCodeBlock:function(e){var n=e.template({mf:this.model.get("pdManufacturer"),pn:this.model.get("pdManufacturerPartNumber"),upcean:this.model.get("upc")});t('[data-tab="'+e.tabId+'"] .accordion--content').html(n),this.setIntervalToCheckIfCnetContentSolutionsReviewHasLoaded(e)},setIntervalToCheckIfCnetContentSolutionsReviewHasLoaded:function(e){var n=this,r=0,i='[data-tab="'+e.tabId+'"] .accordion--content #ccs-logos',s=!1,o=500,u=20,a;a=setInterval(function(){r++,s=t(i).html()!=="",s?(clearInterval(a),n.tweakCnetContentSolutionsReviewContent(e),n.showTab(e.tabId)):r>=u&&clearInterval(a)},o)},tweakCnetContentSolutionsReviewContent:function(e){var n=t('[data-tab="'+e.tabId+'"]');e.type==="gamespot"&&(r.deviceAtlas.isMobile()||r.getPageOrientation()==="portrait"&&r.deviceAtlas.width()<=768)&&(n.find(".ccs-logo-gamespot-inline-wrap").css("min-width","auto"),n.find(".ccs-logo-gamespot-tabcontent-images-title").css({"padding-left":0,"padding-right":0,"text-align":"center"}),n.find(".ccs-logo-gamespot-tabcontent-images-preview").css({"padding-left":0,"padding-right":0}),n.find(".ccs-logo-gamespot-tabcontent-images-preview-image").css({width:"100%","max-width":"491px"}))},showTab:function(e){t('[data-tab="'+e+'"]').removeClass("is-hidden")},onPageShowComplete:function(){_.isEnabled("ENABLE_CCS_CNET_REVIEW")&&this.ccsCnetItemInfo!==null&&this.loadCnetContentSolutionsCodeBlock(this.ccsCnetItemInfo),_.isEnabled("ENABLE_CCS_GAMEPSOT_REVIEW")&&this.ccsGamespotItemInfo!==null&&this.loadCnetContentSolutionsCodeBlock(this.ccsGamespotItemInfo)},buildTermsTab:function(){var e="";if(this.model.isGiftCard()&&!this.model.get("isAppleGiftCard")){var t=this.model.buildTermsTabData();e=this.buildTabObject("terms",t)}return e},buildShippingAndReturnTab:function(e,n){var r=[];return e&&(r=e.content),n&&(r=t.merge(r,n.content)),this.buildTabObject("shipping & returns",r,"shippingAndreturns")},buildQuestionAnswerTab:function(){var e='<span class="h-sr-only">Q &amp; A -</span><span aria-hidden="true">q&a</span>',t=this.model.buildQuestionAnswerTabData(this.templates.QuestionAnswerTpl()),n=this.model.attributes.questionAnswerStatistics||{},r=n.questionCount||0;return r>0&&(e+='<span class="h-text-normal h-text-xl h-tightSpacingLeft">'+r+"</span>"),this.buildTabObject(e,t,"questionAnswer")},buildBeautyConciergeTab:function(){var e=this.model.buildBeautyConciergeTabData(this.templates.BeautyConciergeReviewTpl());return this.buildTabObject("beauty concierge",e,"beautyConcierge")},buildCommonSenseTab:function(){var e=this.model.buildCommonSenseTabData(this.templates.CommonSenseReviewContainerTpl());return this.buildTabObject("parental info",e,"commonSense")},resizeFrameOnLoad:function(e,t,n){"use strict";var r=t;r>n&&(r=n),e.css("height",e.contents().height()),e.css("width",r)},buildProductDetailsIframe:function(e,n){var r,i=e.width(),s=this;return injectCssAndResizeOnFrameLoaded=function(){"use strict";var e=r[0].contentWindow;e.eval('window.setHtml = function (contentString) {document.getElementsByTagName("body")[0].innerHTML = contentString};'),n&&e.setHtml(n);var t=r.contents().width(),o=["body {margin: 0;}",".energy-content h2 {width: inherit; margin: 0px;}",".energy-content{width:100%}",".energy-title img{width:100%; max-width:341px;}"];s.injectCssIntoIframe([],r.contents().find("body"),o),s.resizeFrameOnLoad(r,i,t)},r=t(['<iframe class="content-sandbox"></iframe>'].join("")),r.load(injectCssAndResizeOnFrameLoaded),e.html(r),r},loadLazyContent:function(e){"use strict";var n=this;e.find(".bb-lazy-data-row").each(function(e,r){var i,s,o,u,a,f,l=t(r);if(!l.html()){u=l.data("custom-handler-key"),l.html('<div tabindex="-1" class="TGTLazyLoading"></div>');if(u){i=n.getCustomTabLazyLoaderForKey(u),i&&i(l,a);return}Backbone.Events.trigger("v:pdp-main:getLazyLoadCal",l)}})},getLazyLoadCalSuccess:function(e,n){var r=this;e?(useIFrame=n.data("use-iframe"),useIFrame?r.buildProductDetailsIframe(n,e):n.html(t(e))):n.html("An error occurred while loading this content. Please refresh the page and try again.")},triggerTabChangeAnalyticsEvent:function(e){"use strict";var t=e.data("tab");try{this.triggerAnalyticsEvent("clickInteraction",{action:t+"Tab"})}catch(n){}},gotoPricesByCarrierTab:function(){"use strict";t('.accordion--item[data-tab="pricesbycarrier"]').hasClass("is-active")||t('.accordion--item[data-tab="pricesbycarrier"]').find(".js-accordion--title").trigger("click"),window.setTimeout(function(){t("html, body").animate({scrollTop:t(".accordion").offset().top-100},2e3,function(){t(window.document.activeElement).blur(),t('.accordion--item[data-tab="pricesbycarrier"]').find(".js-accordion--title").focus()})},1700)},addTabsRow:function(e,t){this.$(e).html(this.templates.productAttributes({data:{tabs:t}}))},renderTabView:function(){var e=this,t={},n=this.buildTabsModel();this.addTabsRow(this.$("#product-attributes"),n);if(!this.model.getAttributeValue("isQpdp",!1)){this.model.getAttributeValue("overallrating",0)?(t.overallrating=this.model.getAttributeValue("overallrating",0),t.hasRatings=!0,t.totalReviews=this.model.getAttributeValue("totalreview",0)):t.hasRatings=!1;var r=_.template(this.templates.productAttributeRatings,t);this.$(".bb_product_detail_ratings").html(r);if(this.model.checkItemAttributeValue("EXPERT_REVIEW_FLAG","Y")&&this.model.getAttributeValue("expertReview")){var i=this.model.getAttributeValue("expertReview").replace("hook","product")+"&returnMediaType=logos&format=json&callback=?";Backbone.Events.trigger("v:pdp-main:getExpertReview",i)}}var s=this.$(".product-details-scrollable-tab-wrapper").children(),o=s.length-1;if(o){var u=0,a=0,f=this.$(".detail-tab:first").css("margin-left"),l=this.$(".detail-tab:first").css("width");l&&_.isString(l)&&(u=parseInt(l.replace("px",""),10)),f&&_.isString(f)&&(a=parseInt(f.replace("px",""),10));var c=(u+a)*o+a}else this.$("#bb-product-details-container").hide();this.$(".product-details-scrollable-tab-wrapper").css("width",c+"px");var h=this.$(".detail-content-container.selected");if(this.currentlySelectedTab){var p=this.$(".detail-content-container."+this.currentlySelectedTab.data("tab"));this.loadLazyContent(p)}this.initializePatLab()},buildSizeChartTab:function(){"use strict";var e=this.model.createSizeChartUrl();if(!e)return;var t=r.Config.sizeChartURL+"css/size-charts_minified.css",n,i=this,s=[],o=function(n,r,s){i.setExternalCSS(t),Backbone.Events.trigger("v:pdp-main:getSizeChart",e,s,n)};return s.push(this.buildLazyItem("size",null,{customHandler:o,cssClass:"size-chart-table-wrapper"})),s.push({type:"text",content:"Measurements in inches, unless otherwise noted.",cssClass:"basic-content"}),s.push({type:"link",content:"see all size charts",href:e}),n=this.buildTabObject("size charts",s),n},getSizeChartSuccess:function(e,n,r,i,s){e=t(e);var o='div[data-brand-id="'+i+'"]';e.find(".brand-select").length<1&&(o=".brand-group");try{var u=e.find(o);i&&s&&(u=u.find("div[data-size="+s+"]"),e.find(".imgContainer").removeClass("regular").addClass(s)),u.append(e.find(".measure")),r.html(u.html()),setTimeout(function(){t(".size-chart-table-wrapper").show()},600)}catch(a){console.log(a)}n&&n()},buildDrugTab:function(){var e=this.model.getAttributeValue("drugFacts");if(e){var t;return t=this.itemDrugFacts(e),t}return},itemDrugFacts:function(e){var t=this;if(_.size(e)>0){var n=function(e){t.showDrugFacts(e)};return this.buildLazyLoadTab("drug facts",null,{customHandler:n})}return},showDrugFacts:function(e){var t=this.model.getDrugFacts();e.html(this.templates.drugTpl(t))},buildLabelInfoTab:function(){var e=this.model.getAttributeValue("nutritionFacts");if(e)return this.itemNutritionFacts(e);return},itemNutritionFacts:function(e){var t=this;if(_.size(e)>0){var n=function(e){t.showNutritionFacts(e)};return this.buildLazyLoadTab("label info",null,{customHandler:n})}return},showNutritionFacts:function(e){var t=this.model.getNutritionFacts();e.html(this.templates.nutritionTpl(t))}}}};return u}),define("text!templates/common/browse/product-carousel-image.html",[],function(){return'<li> <picture> <source media="(min-width: 1200px)" srcset="<%=heroImage%>?wid=3000&amp;hei=3000&amp;qlt=70&amp;fmt=pjpeg"> <source media="(min-width: 992px)" srcset="<%=heroImage%>?wid=2000&amp;hei=2000&amp;qlt=70&amp;fmt=pjpeg"> <source media="(min-width: 668px)" srcset="<%=heroImage%>?wid=1500&amp;hei=1500&amp;qlt=70&amp;fmt=pjpeg"> <source media="(min-width: 0px)" srcset="<%=heroImage%>?wid=1200&amp;hei=1200&amp;qlt=70&amp;fmt=pjpeg"> <img class="js-zoomImage zoom_0" alt="<%= title %>. Image 1 of <%= totalImages %>." data-id="img_0" data-index="0"> </picture> </li> <%\n_.each(altImages,function(imageUrl,index){ %> <li> <picture> <source media="(min-width: 1200px)" srcset="<%=imageUrl%>?wid=3000&amp;hei=3000&amp;qlt=70&amp;fmt=pjpeg"> <source media="(min-width: 992px)" srcset="<%=imageUrl%>?wid=2000&amp;hei=2000&amp;qlt=70&amp;fmt=pjpeg"> <source media="(min-width: 668px)" srcset="<%=imageUrl%>?wid=1500&amp;hei=1500&amp;qlt=70&amp;fmt=pjpeg"> <source media="(min-width: 0px)" srcset="<%=imageUrl%>?wid=1200&amp;hei=1200&amp;qlt=70&amp;fmt=pjpeg"> <img class="js-zoomImage zoom_<%= index +1%>" alt="<%= title %>. Image <%=index+2%> of <%= totalImages %>." data-id="img_<%= index +1%>" data-index="<%=index +1%>"> </picture> </li> <% }) %> '}),define("text!templates/common/browse/collection-rec.html",[],function(){return'<div class="title"> <h2 class="title-text bravo">more from this collection</h2> <p class="title-subtext"> <a class="h-text-underline js-collectionDet" href="#" data-tcin="<%= collTcin %>"><%=collTitle%></a> </p> </div> <div class="carousel carousel-scroll"> <div class="js-carousel-view products products-scroll"> <ul class="js-carousel-list product--list"> <% _.each(collItems,function(collItem, i) { %> <li class="product"> <div class="product--link"> <a class="product--image js-image-container h-aspect-1x1 js-routeToUrl" href="<%= collItem.itemUrl %>" title="product <%=i+1 %> of <%=collItems.length %>"> <picture> <source media="(min-width: 1200px)" srcset="<%= collItem.image%>?&amp;wid=250&amp;hei=250&amp;qlt=80&amp;fmt=pjpeg"> <source media="(min-width: 992px)" srcset="<%= collItem.image%>?&amp;wid=250&amp;hei=250&amp;qlt=80&amp;fmt=pjpeg"> <source media="(min-width: 668px)" srcset="<%= collItem.image%>?&amp;wid=250&amp;hei=250&amp;qlt=80&amp;fmt=pjpeg"> <source media="(min-width: 0px)" srcset="<%= collItem.image%>?&amp;wid=150&amp;hei=150&amp;qlt=80&amp;fmt=pjpeg"> <img alt="<%= collItem.image %>"> </picture> </a> <div class="details"> <span class="h-sr-only"><%= collItem.title %></span> <div class="price"> <span class="<%= (collItem.eyebrow)? \'h-text-red\': \'\' %>"><%= collItem.price%></span> </div> <a class="details--title js-routeToUrl" aria-hidden="true" href="<%= collItem.itemUrl %>"> <%= collItem.titleTruncated %> </a> </div> </div> </li> <%}); // end of iteration. %> </ul> </div> </div> '}),define("text!templates/common/browse/expertReviews/ccs-cnet-review.html",[],function(){return" <div id=\"ccs-logos\" class=\"is-hidden\"></div> <div id=\"ccs-inline\"></div> <script type=\"text/javascript\"> var ccs_cc_args = ccs_cc_args || [];\n\n  // CNET Logo Service\n  ccs_cc_args.push(['mf', '<%- obj.mf %>']);\n  ccs_cc_args.push(['pn', '<%- obj.pn %>']);\n  ccs_cc_args.push(['upcean', '<%- obj.upcean %>']);\n  ccs_cc_args.push(['lang', 'en-US']);\n  ccs_cc_args.push(['market', 'US']);\n\n  (function () {\n    var o = ccs_cc_args;\n    o.push(['_SKey', '702c538d']);\n    o.push(['_ZoneId', '5b19fb8a4f']);\n    var sc = document.createElement('script');\n    sc.type = 'text/javascript';\n    sc.async = true;\n    sc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.cnetcontent.com/jsc/h.js';\n    var n = document.getElementsByTagName('script')[0];\n    n.parentNode.insertBefore(sc, n);\n  })(); </script> "}),define("text!templates/common/browse/expertReviews/ccs-gamespot-review.html",[],function(){return" <div id=\"ccs-logos\" class=\"is-hidden\"></div> <div id=\"ccs-inline-logos\"></div> <script type=\"text/javascript\"> var ccs_cc_args = ccs_cc_args || [];\n\n  // Gamespot Logo Service\n  ccs_cc_args.push(['mf', '<%- obj.mf %>']);\n  ccs_cc_args.push(['pn', '<%- obj.pn %>']);\n  ccs_cc_args.push(['upcean', '<%- obj.upcean %>']);\n  ccs_cc_args.push(['lang', 'en-US']);\n  ccs_cc_args.push(['market', 'US']);\n\n  (function () {\n    var o = ccs_cc_args;\n    o.push(['_SKey', '702c538d']);\n    o.push(['_ZoneId', '380569e6b6']);\n    var sc = document.createElement('script');\n    sc.type = 'text/javascript';\n    sc.async = true;\n    sc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.cnetcontent.com/jsc/h.js';\n    var n = document.getElementsByTagName('script')[0];\n    n.parentNode.insertBefore(sc, n);\n  })(); </script> "}),define("text!templates/common/browse/nutrition-label.html",[],function(){return'<% if(list && list.length > 0) { %> <h3 class="h-standardSpacingBottom charlie">nutrition information</h3> <% } %> <ul class="l-row"> <% _.each(list,function(nutList, i) { %> <% if (nutList.container || nutList.nutValues) { %> <h4 class="delta"><%= nutList.description %></h4> <li class="l-col-xs-12 h-standardSpacingBottom"> <div class="h-zeroPadding"> <p> <span class="h-text-bold">Serving Size: </span> <span><%= nutList.size %></span> </p> <p> <span class="h-text-bold">Serving Per Container: </span> <span><%= nutList.container %></span> </p> </div> <p class="l-row h-text-bold h-border-bottom">Amount Per Serving</p> <% if (nutList.header.length > 0) {  %> <div class="l-row h-zeroPaddingRight"> <span class="l-col-xs-6"> <span class="h-text-bold"><%= nutList.header[0].name %>: </span> <span><%= nutList.header[0].quantity%></span> </span> <% if(nutList.header[1]) { %> <span class="l-col-xs-6 h-text-right h-zeroPadding"> <span class="h-text-bold"><%= nutList.header[1].name%>: </span> <span><%= nutList.header[1].quantity%></span> <% } %> </span> </div> <hr class="h-zeroMargin"> <hr class="h-zeroMargin"> <hr class="h-zeroMargin"> <div class="h-text-bold h-text-right">% Daily Value* </div> <% } %> <% if (nutList.nutValues.length > 0) {  %> <ul class="l-row h-border-top h-standardSpacingLeft"> <% _.each(nutList.nutValues,function(nutval, j) { %> <li class="l-col-xs-12 h-zeroPadding h-tightSpacingTop h-border-bottom"> <span class="h-text-bold"> <%= nutval.name %> <span class="h-text-normal"><%= nutval.content %></span> </span> <% if ( nutval.percentage || nutval.percentage === 0) {  %> <span class="h-float-right"><%= nutval.percentage%>%</span> <% } %> </li> <%}); %> </ul> <p class="l-row h-standardPaddingLeft"> * Percentage of Daily Values are based on a 2,000 calorie diet. </p> <hr class="h-zeroMargin"> <hr class="h-zeroMargin"> <hr class="h-zeroMargin"> <% } %> </li> <% } %> <%}); // end of iteration. %> </ul> <% if(ingredients) { %> <div class="l-col-xs-12 h-standardSpacingTop"> <div class="h-text-bold">Ingredients:</div> <%= ingredients %> </div> <% } %> <% if(warnings) { %> <div class="l-col-xs-12 h-standardSpacingTop"> <div class="h-text-bold">Allergens & Warnings:</div> <%= warnings %> </div> <% } %> '}),define("text!templates/common/browse/drug-label.html",[],function(){return' <% if(ingred) { %> <div class="l-col-xs-12 h-standardSpacingTop"> <h4 class="h-border-bottom">Active ingredient</h4> <%= ingred %> </div> <% } %> <% if(purp) { %> <div class="l-col-xs-12 h-standardSpacingTop"> <h4 class="h-border-bottom">Purpose</h4><%= purp %> </div> <% } %> <% if(list && list.length > 0) { %> <% _.each(list,function(dList, i) { %> <% if(dList.label === \'Warnings\') {   %> <div class="l-col-xs-12 h-standardSpacingTop"> <h4 class="h-standardSpacingTop h-tightSpacingBottom"><%= dList.label %></h4> <%= dList.text %> </div> <% _.each(warningList,function(l, i) { %> <div class="l-col-xs-12 h-tightSpacingBottom h-tightSpacingtop"> <h4 class="h-border-bottom"><%= l.label %>:</h4> <%= l.text %> </div> <%  }); %> <%} else if(dList.label === \'Directions\') {   %> <div class="l-col-xs-12 h-standardSpacingTop"> <h4 class="h-border-bottom h-standardSpacingTop h-tightSpacingBottom"><%= dList.label %></h4> <%= dList.text %> </div> <% _.each(directionList,function(l, i) { %> <div class="l-col-xs-12 h-tightSpacingBottom h-tightSpacingtop"> <h4><%= l.label %></h4> <%= l.text %> </div> <%  }); %> <%} else {  %> <div class="l-col-xs-12 h-standardSpacingTop"> <h4 class="h-border-bottom"><%= dList.label %></h4> <%= dList.text %> </div> <%  }  %> <%}); %> <% } %> '}),define("text!templates/common/browse/product-microdata.html",[],function(){return'<div id="microdata"> <%_.each(microdataCollection,function(value, key) { %> <%\n            var price = _.getVal(value, \'offer.price\');\n            if (value.itemType.indexOf(\'Variation Parent\') === -1 && price !== \'Price Varies\') {\n                var price = parseFloat(price && price.substring(1)) || null;\n        %> <div itemprop="offers" itemscope itemtype="http://schema.org/Offer"> <meta itemprop="price" content="<%= price %>"> <meta itemprop="priceCurrency" content="USD"> <link itemprop="availability" href="http://schema.org/<%= value.microdataAvailability %>"> <div itemscope itemtype="http://schema.org/IndividualProduct"> <meta itemprop="sku" content="<%= key %>"> <% if (value.variationColor) { %> <meta itemprop="color" content="<%= value.variationColor %>"> <% } %> <% if (value.variationSize) { %> <meta itemprop="weight" content="<%= value.variationSize %>"> <% } %> </div> </div> <% } %> <% }); %> </div> '}),define("text!templates/common/browse/energy-guide.html",[],function(){return'<div class="h-tinySpacingLeft h-tinySpacingRight energyGuide"> <h3 class="h-sr-only">Energy guide</h3> <div class="h-tinyPaddingBottom"> <img class="h-align-center h-stretch" src="<%=img_domain%>/images/energy-guide/EnergyGuide_Logo.png" alt="Based on standard U.S Government tests. Energy guide"> </div> <div class="energyGuide--content"> <div class="h-tightPaddingBottom energyGuide_border"> <div class="h-text-right h-text-sm h-standardPaddingTop"> <% if(product_description) { %> <div class="h-tightSpacingBottom"> <span class="h-text-bold"><%= product_description %></span> </div> <% } %> <% if(manufacturer) { %> <div class="h-tightSpacingBottom"> <span class="h-text-bold">Manufacturer:</span> <span><%= manufacturer %></span> </div> <% } %> <% if(model) { %> <div class="h-tightSpacingBottom"> <span class="h-text-bold">Model:</span> <span><%= model %></span> </div> <% } %> <% if(capacity_measurement) { %> <div> <span class="h-text-bold">Capacity:</span> <span><%= capacity_measurement %></span> </div> <% } %> </div> </div> <div class="h-standardPaddingTop h-tightPaddingBottom h-text-center energyGuide_border"> <% if (estimated_operating_cost) { %> <div class="h-text-bold h-text-md">Estimated Yearly Operating Cost</div> <div class="h-text-bold energyGuide-text-lg"> $<%= estimated_operating_cost %> </div> <% } %> <% if (sliderLowRange || sliderHighRange) { %> <img class="h-align-center" src="<%=img_domain%>/images/energy-guide/SliderCaret.png"> <img class="h-align-center" src="<%=img_domain%>/images/energy-guide/SliderBG.png"> <div class="h-float-clear h-overflow-hidden"> <% if (sliderLowRange) { %> <span class="h-float-left">$<%= sliderLowRange %></span> <% } %> <% if (sliderHighRange) { %> <span class="h-float-right">$<%= sliderHighRange %></span> <% } %> </div> <div class="h-text-xs"><%= sliderLabel %></div> <% } %> </div> <% if (energyUsedTitle) { %> <div class="h-standardPaddingTop h-tightPaddingBottom h-text-center energyGuide_border"> <div class="h-text-bold h-text-md"><%= energyUsedTitle %></div> <div class="h-text-bold"> <span class="energyGuide-text-lg"><%= energyUsedValue %></span> <span class="h-text-lg"><%= energyUsedUnit %></span> </div> </div> <% } %> <div class="l-row h-standardPaddingTop"> <div class="l-col-xs-9 l-col-nopadding energyGuide-text-sm"> <div class="h-tightSpacingBottom"><%= legalDisclaimer %></div> <div><%= legalDisclaimerInfo %></div> </div> <% if (hasEnergyStar) { %> <div class="l-col-xs-3 l-col-nopadding"> <img class="h-float-right" src="<%=img_domain%>/images/energy-guide/EnergyStarLogo.gif" alt="Energy Star Logo"> </div> <% } %> </div> </div> </div> '}),define("text!templates/common/browse/product-red-card-price.html",[],function(){return'<img alt="" class="icon-md h-zeroMargin" src="data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2221%22%20height%3D%2221%22%20viewBox%3D%220%200%2021%2021%22%3E%3Cpath%20d%3D%22M10.5%200C4.7%200%200%204.702%200%2010.5%200%2016.3%204.7%2021%2010.5%2021%2016.303%2021%2021%2016.3%2021%2010.5%2021%204.702%2016.302%200%2010.5%200m0%2017.55c-3.894%200-7.05-3.156-7.05-7.05%200-3.894%203.156-7.05%207.05-7.05%203.895%200%207.05%203.156%207.05%207.05%200%203.894-3.154%207.05-7.05%207.05%22%20fill%3D%22%23cc0000%22%2F%3E%3Cpath%20d%3D%22M10.5%206.9c-1.988%200-3.6%201.61-3.6%203.6%200%201.988%201.612%203.6%203.6%203.6s3.6-1.61%203.6-3.6-1.612-3.6-3.6-3.6%22%20fill%3D%22%23cc0000%22%2F%3E%3C%2Fsvg%3E"> &nbsp;REDcard&nbsp; <span class="h-text-grayDark"> save an additional 5% </span> '}),define("text!templates/common/browse/collection-details.html",[],function(){return'<% _.each(collectionDet,function(det,index) { %> <a href="javascript:void(0);" class="h-text-underline js-collectionDet h-display-block" data-tcin="<%= det.tcin%>"> <%= det.product_description_title %> </a> <% }) %> '}),define("text!templates/common/browse/fitstyle-details.html",[],function(){return'<div class="accordionCard h-standardSpacingTop js-showFitStyleDet"> <div class="l-row l-col-nopadding h-tinySpacingBottom"> <div class="l-col-xs-6 l-col-nopadding"> <h2 class="h-text-md h-text-grayDarkest"> <a class="js-showFitStyleDet" href="#"> <%=  fitStyleDet.title || \'details\' %> <% if(fitStyleDet.bullets.length > 3) { %> <div class="h-sr-only js-showFitStyleDetAlly">shows more content</div> <svg class="carouselExpander--arrow" xmlns="http://www.w3.org/2000/svg" fill="#333" height="7" width="7" viewBox="0 0 32 32"> <path d="M16 25L0 9l2-2 14 14.063L30 7l2 2z"/> </svg> <% } %> </a> </h2> </div> <% if(sizeChart){ %> <div class="l-col-xs-6 l-col-nopadding h-text-right"> <a id="js-sizechart--open" href="#"> <span class="h-text-underline h-text-grayDark">size chart</span> <svg id="Layer_9" data-name="Layer 9" class="h-vertical-bottom h-tinySpacingLeft" xmlns="http://www.w3.org/2000/svg" width="7" height="16" viewBox="0 0 14 32"> <defs><style>.cls-1{fill:#fff;}.cls-2{fill:#666;}.cls-3{fill:#888;}</style></defs> <rect class="cls-1" x="1" y="1" width="7" height="16" rx="1" ry="1"/> <path class="cls-2" d="M12,2V30H2V2H12m0-2H2A2,2,0,0,0,0,2V30a2,2,0,0,0,2,2H12a2,2,0,0,0,2-2V2a2,2,0,0,0-2-2Z"/> <rect class="cls-3" x="2" y="6" width="4" height="2"/> <rect class="cls-3" x="2" y="12" width="6" height="2"/> <rect class="cls-3" x="2" y="18" width="4" height="2"/> <rect class="cls-3" x="2" y="24" width="6" height="2"/> </svg> </a> </div> <% } %> </div> <ul class="js-fitStylelst accordionCard--list h-text-gray"> <% _.each(fitStyleDet.bullets,function(det, key) { %> <li class="accordionCard--item h-tinySpacingBottom" aria-hidden="<%= (key > 1 ) ? \'true\' : \'false\' %>"> <span class="h-text-grayDarkest"> <%= det %></span> </li> <% }) %> </ul> <div class="fadeoutLayer-bottom"></div> </div> '}),define("text!templates/common/browse/product-rating-qa-row.html",[],function(){return'<div class="h-tightSpacingTop rating-section"> <div class="ribbon-pdp h-tightSpacingRight"></div> <% if (overallrating) { %> <a href="#" id="js-ratings"> <div class="ratings-block h-tightSpacingRight"> <div class="ratings ratings-sm h-float-left"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width:<%=ratingBarWidth%>"> <span class="h-sr-only h-inlineWrap"> <%=overallrating%> out of 5 stars with <%=totalreviewText%> reviews </span> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> <span class="ratings--count"> <span aria-hidden="true"><%=totalreviewText%></span> </span> </div> </a> <% } %> <% if (totalQuestionCount) { %> <a href="#" id="js-qa"> <div class="question-count"> <span class="h-sr-only"><%=totalQuestionCount%> questions</span> <svg aria-hidden="true" id="_1" data-name="1" width="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#888;}</style></defs><path class="cls-1" d="M14,11.37a3,3,0,0,1-.36-.11l-.43-.14-.64-.2c-.42-.13-.84-.25-1.24-.41a1.84,1.84,0,0,0-.67-.16,2.33,2.33,0,0,0-.61.11,10.29,10.29,0,0,1-1.27.27,8.9,8.9,0,0,1-1.24.09,8.87,8.87,0,0,1-3.41-.68A5.55,5.55,0,0,1,1.32,7.61,4.31,4.31,0,0,1,.88,5.86a3.8,3.8,0,0,1,.33-1.64A5.6,5.6,0,0,1,3.78,1.54a7.29,7.29,0,0,1,2-.73A8,8,0,0,1,7.52.63H8A7.23,7.23,0,0,1,9.19.81a7,7,0,0,1,3.34,1.64A5.24,5.24,0,0,1,13.71,4a4.55,4.55,0,0,1,.41,1.79,3.81,3.81,0,0,1-.17,1.11,4.23,4.23,0,0,1-.39.94,4.5,4.5,0,0,1-.28.44l-.11.14a2.19,2.19,0,0,0-.24.34,1.18,1.18,0,0,0,.14,1.27,5.18,5.18,0,0,0,.41.53A2.48,2.48,0,0,1,14,11.37Z"/><path class="cls-2" d="M7.52,1H8a7,7,0,0,1,1.1.17,6.6,6.6,0,0,1,3.16,1.55,4.85,4.85,0,0,1,1.1,1.46,4.17,4.17,0,0,1,.38,1.65,3.34,3.34,0,0,1-.16,1,3.94,3.94,0,0,1-.36.86,4.38,4.38,0,0,1-.25.4l-.1.12a2.56,2.56,0,0,0-.28.4,1.55,1.55,0,0,0,.16,1.66,4.18,4.18,0,0,0,.3.4l-.38-.11c-.42-.13-.82-.25-1.24-.41a2.13,2.13,0,0,0-.81-.17h0a2.69,2.69,0,0,0-.68.12l-.06,0a9.43,9.43,0,0,1-1.15.24,8.46,8.46,0,0,1-4.45-.57A5.17,5.17,0,0,1,1.65,7.44a3.94,3.94,0,0,1-.4-1.6,3.43,3.43,0,0,1,.3-1.48A5.23,5.23,0,0,1,4,1.87,6.92,6.92,0,0,1,5.9,1.17,7.56,7.56,0,0,1,7.52,1m0-.75A8.33,8.33,0,0,0,5.75.44a7.68,7.68,0,0,0-2.15.77A5.94,5.94,0,0,0,.86,4.08,4.18,4.18,0,0,0,.51,5.88,4.72,4.72,0,0,0,1,7.78a5.91,5.91,0,0,0,3,2.69,9.17,9.17,0,0,0,3.55.71,9.19,9.19,0,0,0,1.3-.09,10.14,10.14,0,0,0,1.24-.26,2.31,2.31,0,0,1,.56-.11h0a1.49,1.49,0,0,1,.54.13c.62.24,1.26.41,1.9.61l.42.14a2.47,2.47,0,0,0,.49.14h0c.2,0,.38-.18.35-.35-.12-.61-.69-1-1-1.54A.86.86,0,0,1,13.26,9a4.55,4.55,0,0,1,.33-.44,5.13,5.13,0,0,0,.3-.47,4.68,4.68,0,0,0,.43-1,4.12,4.12,0,0,0,.19-1.22,4.93,4.93,0,0,0-.45-1.94,5.64,5.64,0,0,0-1.27-1.69A7.32,7.32,0,0,0,9.26.45,7.57,7.57,0,0,0,8,.26Z"/></svg> <span aria-hidden="true"><%=totalQuestionCount%></span> </div> </a> <% } %> </div> '}),define("views/tablet/browse/pdp-main.view",["modernizr","jquery","page","Target","contextMappings","models/browse/pdp.model","patlab.carousel","text!templates/common/browse/product-price-row.html","text!templates/common/browse/product-attributes.html","text!templates/tablet/browse/pdp.html","text!templates/common/browse/product-review-rating-row.html","text!templates/common/browse/product-mmbv-modal.html","text!templates/common/browse/product-error-details.html","text!templates/common/browse/product-image-zoom-modal.html","text!templates/tablet/common/howStoreIsSet.html","text!templates/tablet/common/selectOptionOverlay.html","text!templates/common/browse/product-specification-modal.html","text!templates/common/browse/product-attribute-ratings.html","text!templates/common/browse/product-video.html","text!templates/common/browse/product-video-show-more.html","text!templates/common/browse/product-promo-row.html","text!templates/common/browse/product-callout-row.html","text!templates/tablet/browse/product-hero-image-carousal.html","text!templates/tablet/browse/product-message-row.html","text!templates/tablet/common/recommendations.html","text!templates/tablet/common/variation-primary.html","text!templates/tablet/common/variation.secondary.html","text!templates/tablet/common/variation-pdp.html","text!templates/tablet/common/addtocart-all.html","text!templates/tablet/common/addToBundle.html","text!templates/tablet/common/esp-details.html","text!templates/tablet/common/variation-header.html","text!templates/tablet/common/fiats-find-store.html","text!templates/tablet/common/find-in-store.html","text!templates/common/browse/product-helpful-review-row.html","text!templates/tablet/common/global-errors.html","text!templates/common/browse/expertReviews/beauty-concierge-review.html","text!templates/common/browse/expertReviews/common-sense-review-container.html","text!templates/common/browse/question-answer.html","text!templates/common/browse/breadcrumb-pdp.html","text!templates/common/browse/user-generated-content.html","views/mixins/browse/pdp-main.view-mx","views/mixins/browse/panzoom.view-mx","views/mixins/common/recommendation-view-mx","views/mixins/browse/google-adSense-view-mx","views/mixins/browse/tabs-mx","views/mixins/variation-select-mx","views/mixins/common/hl-mx","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","views/mixins/common/dynamic-promo-mx","patlab.modal","patlab.affix","patlab.filmstrip","firefly!browse/pdp-main","text!templates/common/browse/product-carousel-image.html","views/mixins/common/registry-view-mx","text!templates/common/browse/collection-rec.html","text!templates/common/browse/expertReviews/ccs-cnet-review.html","text!templates/common/browse/expertReviews/ccs-gamespot-review.html","text!templates/common/browse/nutrition-label.html","text!templates/common/browse/drug-label.html","text!templates/common/browse/product-microdata.html","text!templates/common/browse/energy-guide.html","text!templates/common/browse/product-red-card-price.html","text!templates/common/browse/collection-details.html","text!templates/common/browse/fitstyle-details.html","text!templates/common/browse/product-rating-qa-row.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt){var mt=n.extend({constructor:function(){_.bindAll(this,"backfillAFS"),n.prototype.constructor.apply(this,arguments)},recPlacementId1:"pdpipadh1",recPlacementId2:"pdpipadh2",recPlacementIdExt:"pdpipadexsrch",itemInfoTpl:{variationPrimaryTpl:_.template(N),variationTpl:_.template(k),variationSecondaryTpl:_.template(C),addtocartTpl:_.template(L),addToBundleTpl:_.template(A),espDetailsTpl:_.template(O),headerTpl:_.template(M),fitasFindStoreTpl:_.template(D),findinStoreTpl:_.template(P)},templates:{productPriceRow:_.template(u),productAttributes:_.template(a),pdp:_.template(f),ratingReviewTpl:_.template(l),productMmbvModal:c,ErrorProduct:h,productImageZoom:p,howStoreIsSet:d,selectOptionOverlay:v,productSpecModal:m,productAttributeRatings:g,productVideo:_.template(y),productShowMoreVidTpl:_.template(b),pdpPromoTpl:_.template(w),pdpCalloutTpl:_.template(E),productHeroImageCarousalTpl:S,productBasicMessageTpl:_.template(x),recoTpl:_.template(T),helpfulReviewTpl:_.template(H),globalErrorTpl:_.template(B),BeautyConciergeReviewTpl:_.template(j),CommonSenseReviewContainerTpl:_.template(F),QuestionAnswerTpl:_.template(I),breadcrumbTpl:_.template(q),ugcTpl:_.template(R),zoomImageCarouselTpl:rt,collRecTpl:_.template(st),ccsCnetReviewTpl:_.template(ot),ccsGamespotReviewTpl:_.template(ut),nutritionTpl:_.template(at),drugTpl:_.template(ft),pdpMicrodataTpl:_.template(lt),energyGuideTpl:_.template(ct),redCardPriceTpl:_.template(ht),collDetailsTpl:_.template(pt),fitStyleTpl:_.template(dt),productRatingQaTpl:_.template(vt)},events:{"click [data-behavior=displayStoreModal]":"displayStoreModal"},initializeView:function(){this.model=new s;var e=this;if(!_.isEnabled("ENABLE_GROOT_REVIEWS")){e.wr=r.getParameterByName("wr"),e.anonymousPurchase=r.getParameterByName("anonymousPurchaserFlag"),e.wr=="true"&&e.resetUrl();var n=r.Config.bazaarVoiceUrl;require([n],function(t){e.wr=="true"?e.launchReviewOverlay():e.anonymousPurchase=="yes"&&e.getReviewAnonymousTokens()})}$modalParent1=t("#addToCartOverlay").find(".modal"),t(window).on("orientationchange,scroll",function(){window.matchMedia("(orientation: landscape)").matches?$modalParent1.css("cssText","display:block; top:5% !important"):window.matchMedia("(orientation: portrait)").matches&&$modalParent1.css("cssText","display:block; top:30% !important")}),this.bindBackboneListeners(),this.crushTag="pdp"},displayGoogleAds:function(){_.isEnabled("RENDER_ADSENSE_PLA")&&this.loadGooglePlas(),_.isEnabled("RENDER_ADSENSE_TEXTS")&&this.loadGoogleAds()},getDynamicData:function(){try{var e=this,t=this.model.getTaggingData(),n=(t[t.length-1]||"").split(":");e.label=n[n.length-1].trim();var i="",s="",o=this.model.getAttributeValue("overallrating",null);(o||"").indexOf("-")!=-1&&(o=o.replace("-","."));var u=this.model.getAttributeValue("totalreview",null);u&&o&&(s=o,i=u);var a=[{product:this.model.getAttributeValue("tcin",null),rating:s,review:i}],f={prodView:!0,occurrences:!0,productViews:!0};s&&s.length>0&&(f.rating=!0),i&&i.length>0&&(f.review=!0);var l=this.model.getAttributeValue("isSubscription",!1);e.pageName=(t[2]||"")+": product details",e.products=a;var c="available both",h=this.getDynamicBsdlObj();return h.todaysDate=this.setTimeBsdlObj(),h.siteEvents=f,h.products=a,h.pageName=(t[0]||"")+": product detail",h.channel=t[0]||"",h.pageType="product details",h.levelTwo=t[1]||"",h.levelThree=t[2]||"",h.levelFour=t[3]||"",h.pageTemplateType="product details",h.productAvailability=c,h.globalPage=e.pageName,h.buyPageViews="yes",h.site="Target.com",h.subscription=l?"subscription eligible":"subscription not eligible",h.loginStatus=r.User.isAnonymous?"Anonymous":"Authenticated",!e.minimumQuantity||(h.ATP_limitedQty=e.minimumQuantity),!e.storeMinimumQuantity||(h.ATP_storeLimitedQty=e.storeMinimumQuantity),!e.OBGB||(h.ATP_OBGB=e.OBGB),!e.ATP_fullfillment||(h.ATP_fullfillment=e.ATP_fullfillment),h.errorMessage=e.tagErrors?e.tagErrors:"",h.storeStatusMessage=e.storeStatus?e.storeStatus:"",h}catch(p){}},destroy:function(){googletag&&googletag.pubads&&googletag.pubads().clear(),t("a#titleLink").trigger("click");var e=t("#header"),n=t("#footer"),r=t(".header--top"),i=t("#nav");e.show(),n.show(),r.show(),i.show()}}).mixin([U,z,W,X,V,$,J,K,Q,G,Y,nt,it],{viewType:nt.VIEW_TYPE_TABLET});return mt}),define("text!templates/common/browse/bundle.html",[],function(){return' <div class="main-content" style="margin-top:0px"> <div class="event-catch nav-trigger"></div> <h1 class="h1_global">Virtual Bundle page</h1> <div id="main-bdp"> <div id="products"> <div id="vb-details" class="clearfix"> <div class="vb-desc"> <p class="title"> </p><h3><%=title%></h3><p></p> <p> <%=description%> </p> </div> <div class="priceBlockVerticalLineBDP"></div> <div class="vb-attrs"> <p><span class="vb-price"><%=Pricing.OfferPrice%> </span></p> <p> </p> <p><span>Starting Price</span></p> <p class="priceSave"> reg:<span class="strike"><strong class="h-sr-only">Original Price </strong><%=Pricing.ListPrice%> </span> </p> <div id="bdpbundle">bundle</div> <p></p> </div> </div> <ul id="vb-options"> <%_.each(virtualBundleList, function(items,index){ %> <li class="accordion<%= selected[index+1] ? \' selected\':\'\'%><%=selected && index==selected.active?\' active\':\'\'%>" title="tap to expand" id="selection-<%=index+1%>" data-behavior="accordionToggle"> <div class="icon icon-icon_point_right" aria-hidden="true"></div> <p aria-hidden="true"><%=items.listName%></p> <p class="h-sr-only"><%=items.listName%> shows additional content></p> <span class="vb-<%=items.isMandatory%> vb-message">(optional)</span> <p class="vb-message"> <span class="vb-status"> <%if(selected[index+1] && selected[index+1].title){%> <span class="icon-icon_checkmark" aria-hidden="true"></span> <span class="h-sr-only"> selected bundle item:</span> <%=selected[index+1].title%> <%}else{%> <a href="javascript:void(0);" aria-label="choose expand"><%=\'choose\'%></a> <% }%> </span> </p> <ul aria-hidden="true"> <%_.each(items.bundleitems,function(item){%> <li class="vb-item<%=(selected[index+1] && item.catEntryId==selected[index+1].catid)? \' selected\':\'\'%> <%=(selected[index+1] && item.catEntryId==selected[index+1].catid &&  selected[index+1].esp) ? \' vb-esp\' : \'\' %>" id="catid-<%=item.catEntryId%>" data-level="<%=index%>"> <div class="icon-icon_arrow_right" aria-hidden="true"></div> <a href="<%=item.url%>?type=VB" aria-label="<%=item.title%>" data-behavior="navigateToQpdpPage"> <img alt="<%=item.title%>" orc="<%=item.image%>?wid=140&amp;hei=140"> <p class="vb-title"><%=item.title%></p> <div class="vb-item-price" vb-original-price="" vb-save-percentage="<%=item.percentageSaved%>"><%=item.price%></div> <div class="vb-item-details"></div> <%if(item.color){%> <div class="vb-item-details">choice of COLOR</div> <%}%> <%_.each(item.espiItems,function(esp){%> <div class="vb-esp-details"> <div class="esp-title"><%=esp.title%></div> <div class="esp-price"><%=esp.price%></div> </div> <%});%> <div class="selected-bdp"> <span><%=item.title%> Selected</span> <div aria-hidden="true" class="icon-icon_checkmark"></div> </div></a> </li> <%});%> </ul> </li> <%});%> </ul> <ul class="vb-extra"> </ul> </div> <div id="vb-footer" class="<%=enableAddToBundle%>"> <div class="vb-footer-contain"> <div class="vb-total"> <%="$"+total%> </div> <p>total price</p> <br> <div class="bundle-percentage"> (<%=(Pricing.AmountSaved?"$"+Pricing.AmountSaved:Pricing.percentageSaved+"%")%> in savings) </div> <div class="bundle-highlight">bundle</div> <form class="no-summary order-item" name="OrderItemAddForm" action="http://m.target.com/mwcheckout_addbundletocart" method="post" id="OrderItemAddForm" data-behavior="addBundleToCart"> <span class="h-sr-only" aria-hidden="<%=(enableAddToBundle == \'active\')%>">Add bundle to cart button dimmed</span> <button aria-hidden="<%=(enableAddToBundle != \'active\')%>" type="submit" name="addtobundleCart" id="vb-add-cart" class="vb-button <%=enableAddToBundle%>" title="add bundle to cart" <%=(enableAddToBundle != \'active\')? \'disabled="disabled"\':\'\'%> > add bundle to cart </button> </form> </div> </div> </div> </div> <div id="popover" style="left: 100%" aria-hidden="true"> <div class="popover-heading"> <div class="pop-back poptrig" role="link">back</div> </div> <div class="popover-contain"> <div class="popover-scroll" style="height: 100%"> <div class="popover-content" tabindex="-1"></div> </div> </div> </div> '}),define("views/mixins/browse/bdp.view-mx",["modernizr","jquery","page","Target","models/browse/bdp.model","router","contextMappings"],function(e,t,n,r,i,s,o){var u=function(e){return{setDefaults:{events:{"click [data-behavior=accordionToggle]":"toggle","click [data-behavior=navigateToQpdpPage]":"navigateToQpdp","submit [data-behavior=addBundleToCart]":"addBundleToCart"},renderView:function(){t(".TGTloading").removeSpacedLoader()},renderBdpPage:function(e){t("html").removeClass("vb_active"),this.$el.addClass("bdp"),this.updateBundlePrice(),this.compiledTemplate=_.template(this.templates.bundleTpl,this.model.toJSON()),this.$el.html(this.compiledTemplate),this.addToCartView.initATC(this),el=this.$("#vb-options").find(".active"),el.siblings().removeClass("active").removeAttr("style"),el.siblings().find("ul").attr("aria-hidden","true"),el.siblings().find(".icon").removeClass("icon-icon_point_down"),el.siblings().find(".icon").addClass("icon-icon_point_right"),this.adjustHeight(el.removeClass("active")),this.lazyLoadImages(el.attr("id")),this.setScroll(this.model.get("selected").scrollPos),t(".TGTloading").removeSpacedLoader(),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),window.setTimeout(function(){Backbone.Events.trigger("setAriaBusyStateOnPdpBody",!1),t("h3").attr("tabindex",-1).focus()},400)},updateBundlePrice:function(){var e=this.model.get("selected"),t=this.model.get("mCount"),n=0,r=0,i=0,s=0;e&&_.each(e,function(e,t){e&&(e.isMandatory&&e.isMandatory==1?(s++,i=e.price?i+e.price:i):r=e.price?r+e.price:r,n=e.price?n+e.price:n,n=e.esp?n+e.espPrice:n)}),n&&(n=this.caluculateDiscount(n-r,this.model.get("Pricing"))+r),n=parseFloat(Math.round(n*100)/100).toFixed(2),this.model.set("total",n),this.model.set("enableAddToBundle",s==t?"active":"")},toggle:function(e){this.stopAll(e);var n=t(e.currentTarget);n.siblings().removeClass("active").removeAttr("style"),n.find("ul").attr("aria-hidden","false"),n.siblings().find("ul").attr("aria-hidden","true"),n.siblings().find(".icon").removeClass("icon-icon_point_down"),n.siblings().find(".icon").addClass("icon-icon_point_right");var r=n.attr("id");this.lazyLoadImages(r),this.adjustHeight(n);var i=n.find("a.h-sr-only");setTimeout(function(){i.focus()},1e3)},navigateToQpdp:function(e){this.stopAll(e);try{level=t(e.currentTarget).closest("li").attr("data-level"),active=Number(level),scrollPos=t(window).scrollTop(),parentPartNumber=r.Get.TCookie("bdp-path");var n=decodeURIComponent(r.Get.TCookie(parentPartNumber));try{n=JSON.parse(n)}catch(i){n=void 0}n=n||{},n.active=active,n.scrollPos=scrollPos,n=JSON.stringify(n),r.Set.TCookie(parentPartNumber,encodeURIComponent(n))}catch(s){}t(".TGTloading").showSpacedLoader();var o=t(e.currentTarget)[0].pathname+t(e.currentTarget)[0].search,u=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");this.goTo(o)},addBundleToCart:function(e){e.preventDefault();var t={items:[],type:"virtualBundle",vbProductId:this.model.get("catId")},n={};_.extend(n,this.model.get("selected")),n&&_.each(n,function(e,n){if(_.isObject(e)){var r={};e.catid?r.productId=e.cCatid||e.catid:null,e.esp?r.warrantyProductId=e.esp:null,t.items.push(r)}}),this.addToCartView.addToCart(t,"static")},lazyLoadImages:function(e){var n=t("#"+e+" ul").find("img");if(!n.eq(0).attr("orc"))return;n.each(function(){var e=t(this).attr("orc");t(this).attr("src",e),t(this).removeAttr("orc")})},adjustHeight:function(e){var t=e.find("li"),n=e.find("ul"),r=n.outerHeight(!0),i=-5;e.hasClass("active")?(e.removeAttr("style"),e.removeClass("active"),e.find("ul").attr("aria-hidden","true"),e.find(".vb-status a").attr("aria-label","choose expand"),e.find(".icon").removeClass("icon-icon_point_down"),e.find(".icon").addClass("icon-icon_point_right")):(e.css({height:r+i}),e.addClass("active"),e.find("ul").removeAttr("aria-hidden"),e.find(".vb-status a").attr("aria-label","choose collapse"),e.find(".icon").addClass("icon-icon_point_down"),e.find(".icon").removeClass("icon-icon_point_right"))},setScroll:function(e){e&&e>0&&setTimeout(function(){t(window).scrollTop(e)},250)},caluculateDiscount:function(e,t){return t.AmountSaved?e-t.AmountSaved:e-e*(t.percentageSaved/100)},getAttributeValue:function(e){var t={};return _.each(e,function(e){t[e.name]=e.value}),t}}}};return u}),define("views/tablet/browse/bdp.view",["modernizr","jquery","page","Target","models/browse/bdp.model","router","contextMappings","addToCart","text!templates/common/browse/bundle.html","views/mixins/browse/bdp.view-mx"],function(e,t,n,r,i,s,o,u,a,f){var l=n.extend({dynamicDataLabel:"",addToCartView:u,templates:{bundleTpl:a},css:[],constructor:function(){n.prototype.constructor.apply(this,arguments)},initializeView:function(){this.model=new i,this.listenTo(this.addToCartView,"atc:success",this.removeCookie),this.listenTo(this.model,"render:BdpPage",this.renderBdpPage),this.listenTo(Backbone.Events,"v:pdp:viewload",this.toggleState),partNum=location.pathname.split("/p/").pop(),r.Set.TCookie("bdp-path",partNum),Backbone.Events.trigger("v:pdpM:isBpdp",!0)},toggleState:function(e){e!="bdp"&&this.$el.hide()},setModel:function(e){this.model.setModelData(e)},rerenderSubViewIfNeeded:function(){Backbone.Events.trigger("v:pdpM:isBpdp",!0),this.$el.show()},getDynamicData:function(){var e={pageView:!0,occurrences:!0,productViews:!0},n=this.getCategory(),i="";if(n){var s=t(".cat-active").find("a").text();s=s?s.trim():"NA",i=this.dynamicDataLabel+"Categories: "+n+": "+s}try{var n="",o="",u="",a="";n=this.model.toJSON().title,n.split(",")[n.length-1]?o=this.dynamicDataLabel+"products"+n.split(",")[n.length-1]:o=this.dynamicDataLabel+"products: "+n,n.split(",")[n.length-2]?u=o+n.split(",")[n.length-2]:u=o,a=u;var e={collectionViews:!0,occurrences:!0,averageProductRating:!0,noOfReviews:!0},f=this.getDynamicBsdlObj();return f.todaysDate=this.setTimeBsdlObj(),f.siteEvents=e,f.pageName=a+": collection",f.channel=o,f.pageType="product details",f.levelTwo=o,f.levelThree=u,f.levelFour=a,f.globalPage=a+": collection",f.buyPageViews="yes",f.site="Target Mobile",f.loginStatus=r.User.isAnonymous?"not logged in and not registered":"logged in",f}catch(l){}}}).mixin([f]);return l}),define("collections/browse/pdp-collection.collection",["jquery","backbone","collection","models/browse/pdp-collection.model"],function(e,t,n,r){var i=t.Collection.extend({model:r,initialize:function(){_.bindAll(this,"backfillAFS")},parse:function(e){return e.isCustomPlpData?e.CatalogEntryView||[]:e.CatalogEntryView.splice(1)||[]},parseParent:function(e){var t=e.length-1;e=e[0],e.promotion=e.promotion||{},e.Promotions=this.mapPromotionData(e.promotion);var n=_.getVal(e,"enrichment.images"),r={};r.tcin=e.tcin,r.itemType=e.relationship_type_code||"stand alone",r.altImages=this.getAlternateImages(n[0])||[],r.hasAltImages=!!(_.getVal(r,"altImages")||[]).length,r.heroImage=_.getVal(n[0],"base_url")+_.getVal(n[0],"primary"),r.reviewText=_.getVal(e,"product_description.bullet_description")||null;var i=this.getPricing(e)||null;r.totalreview=totalReviews=_.getVal(e,"CustomerReview[0].totalReviews")||"0";var s=_.getVal(e,"product_description.title")||"";s=s.replace('"',"&quot;"),r.title=s,r.mediaFormatType=null,r.childCount=t,r.eyebrow=_.getVal(e,"price.offerPrice.eyebrow")||null,r.callOutMsg=_.getVal(e,"promotion.calloutText")||null,r.pdpURL=_.getVal(e,"buy_url"),r.timestamp=(new Date).getTime(),r.taxonomy=_.getVal(Taxo,"breadCrumb.breadCrumbFull")||[],r.shortDescription=_.getVal(e,"product_description.downstream_description"),r.highlights=[];var o=_.getVal(e,"product_description.downstream_description");return o&&(r.highlights=this.getFeatures(r.highlights,[o])),_.defaults(r,i,this.getPromotions(e.Promotions,e.couponPromotionId)),this.loadGooglePlas(s),this.metaData=r,r},getPromotions:function(e,t){e=e||[];var n=[],r=!1,i=Target.Get.TCookie("couponIds")||"";return e.forEach(function(e){var r={};r=_.pick(e,["promotionIdentifier","promotionType","timeBasePromotion"]),r.promotionIdentifier!=10584018&&r.promotionIdentifier!=11157002&&(r.legalDisclaimer=_.getVal(e,"Description[0].legalDisclaimer"),r.shortDescription=_.getVal(e,"Description[0].shortDescription"),r.isCoupon=r.promotionIdentifier===t,n.push(r))}),i.indexOf(t)!=-1&&(r=!0),{promotions:n,isCouponApplied:r}},getFeatures:function(e,t){var n=this,r=[];return t&&t.length>0&&_.each(t,function(t){t=t.replace("<strong>",""),t=t.replace(/<strong><\/strong>/gi,"");var r=t.split("</strong>");r.length===2?n.addItemToSublist(e,r[0],r[1]):r.length===1&&n.addItemToSublist(e,"",r[0])}),r.push({type:"list",content:e}),r},addItemToSublist:function(e,t,n,r){n&&(t.indexOf(":")===-1&&t.length&&(t+=":"),e.push({label:t,value:n,href:r}))},getAlternateImages:function(e){var t=[],n=e.alternate_urls;return _.each(n,function(n){t.push(e.base_url+n)}),t},getPricing:function(e){var t=e.price||{},n,r,i=this.getPriceRecord(t.offerPrice)||{},s=this.getPriceRecord(t.TimeBasedPrice);if(s)n=s,r=i;else{n=i;var o=this.getPriceRecord(t.listPrice)||{};if(o&&i.price!=o.price||o&&o.price===0&&i.price===0)r=o}var u=_.getVal(t,"offerPrice.savePercent")||null;u&&u!="0.0"?n.percentSaved=u:n.percentSaved=null;var a=_.getVal(t,"offerPrice.saveDollar")||null;return a&&u!="0.0"?n.amountSaved="$"+a:n.amountSaved=null,n.unitPrice=_.getVal(t,"offerPrice.ppu")||null,{offer:n,previous:r||{},isPriceVaries:(n.price||"").indexOf("price varies")!==-1}},getPriceRecord:function(e){if(!e||!e.formattedPrice)return;var t=(e.formattedPrice||"").indexOf("-")>-1;return(e.formattedPrice||"").toLowerCase().indexOf("too low")>-1&&(e.formattedPrice="see low price in cart"),{readPrice:(e.formattedPrice||"").replace(new RegExp("\\-","g")," $& "),range:t?"Range":"",price:e.formattedPrice,qualifier:this.capitalize(e.priceQualifier),isRange:t,priceTooLow:e.formattedPrice==="see low price in cart",seeStorePrice:e.formattedPrice==="see store for price"||e.formattedPrice==="prices vary by store"}},capitalize:function(e){"use strict";return e=(e||"").trim(),e.charAt(0).toUpperCase()+e.slice(1)},resetMata:function(){this.metaData={}},loadGoogleAds:function(e){e=(e||"").replace(/\u2122|\u00AE|\u00A9/g,"");var n=Target.Get.Config("adCount"),r=Target.Get.Config("googleAdsHeader"),i=Target.Get.Config("googleEnabled"),s="1",o=Target.Get.Config("pubId")+"-pdp",u=Target.Get.Config("googleAdtest"),a=new Date,f=escape(a.toGMTString()),l={pubId:o,query:e,channel:"search",hl:"en",adtest:u,siteLinks:!0,adpage:s,attributionText:r};t.Events.trigger("v:googleAdsense:callGoogleAdsense",l,this.getAdBlockStyles(n))},loadGooglePlas:function(e){t.Events.trigger("v:googleAdsense:callGooglePLA","plas",this.getGooglePLAData(e),this.getGooglePLABlock(this.backfillAFS))},getGooglePLAData:function(e){return{pubId:Target.Get.Config("PLAPUBID")+"-pdp",query:(e||"").replace(/\u2122|\u00AE|\u00A9/g,""),adsafe:Target.Get.Config("adSafe"),adtest:Target.Get.Config("googleAdtest"),theme:"",textColorPalette:["#333333"],hl:"en"}},getGooglePLABlock:function(e){return{container:"adcontainer1",width:300,height:400,adLoadedCallback:e}},backfillAFS:function(e,t){if(t)try{console.log("Google PLA AFSH returned ads")}catch(n){console.log("Google PLA AFSH callback error")}else this.loadGoogleAds(this.metaData.title)},mapPromotionData:function(e){var t=e.promotionList||[],n=[];return n=t.map(function(e){return{promotionIdentifier:e.promotionId,timeBasePromotion:e.timeBased,promotionType:e.promoType,subscriptionType:e.subscriptionType,Description:[{legalDisclaimer:e.legalDisclaimerText,shortDescription:e.longTagSpecialOffer}]}}),n=_.reject(n,function(e){return e.subscriptionType==="SUBSCRIPTION"}),n},getAdBlockStyles:function(e){return{container:"adcontainer1",fontFamily:"arial",number:e,noTitleUnderline:!0,colorBackground:"#fff",fontSizeAttribution:12,colorAttribution:"#666666",fontSizeTitle:13,colorTitleLink:"#333333",fontSizeDomainLink:11,colorDomainLink:"#333333",fontSizeDescription:12,colorText:"#666666",fontSizeAnnotation:11,colorAnnotation:"#666666",titleBold:!0,rightHandAttribution:!1}},getTaggingData:function(){var e=this,t=_.getVal(Taxo,"breadCrumb.breadCrumbFull")||[],n=[];for(var r=1;r<t.length;r++){var i=n.length>0?n[r-2]+":"+t[r].label:t[r].label;n.push(_.unescape(i))}return n}});return i}),define("views/mixins/browse/pdp-collection.view-mx",["jquery","page","Target","underscore","backbone"],function(e,t,n,r,i){var s=function(t){return{addToObj:{events:{"click #pinit-params":"triggerPinit","click .js-highlight-toggle":"toggleHighlightText"}},setDefaults:{subViewsReference:[],toggleState:function(e){e!="pdp-collection"&&this.$el.hide()},triggerPinit:function(t){var n=e(t.currentTarget).attr("data-ref");n!=""&&window.location.assign(n)},toggleHighlightText:function(){var t=e(".js-highlight-text"),n=e(".js-highlight-toggle .icon"),r=e(".js-highlight-toggle .a11y-text-toggle");t.hasClass("is-hidden")?(t.removeClass("is-hidden"),n.removeClass("icon-arrow-down").addClass("icon-arrow-up"),r.html("- hide content"),t.attr("tabindex","-1").focus()):(t.addClass("is-hidden"),n.removeClass("icon-arrow-up").addClass("icon-arrow-down"),r.html("- shows more content"))},setModel:function(e){this.collection.parseParent(e.CatalogEntryView),this.showPage(),this.collection.reset(e,{silent:!1,parse:!0}),i.Events.trigger("plp:displayCollectionsObgbMsg",this.collection),i.Events.trigger("lp:show:altImage",this.subViewsReference),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.trackPageLoad(),this.mPulseTracking()},showPage:function(){var t=this;this.enableTapToZoom=!0;var s=this.collection.metaData;s.hasHighlights=(r.getVal(s,"highlights[0].content")||[]).length>0,this.$el.html(this.templates.mainTpl(s)),this.productImageCarousel(s),this.displayDVMRow(s.taxonomy,s.timestamp,s.tcin),e(".TGTloading").hide(),e("#product-attributes .content").find("li").length==0&&e("#product-attributes .content .title").hide(),s.childCount||this.$("#product-attributes").removeClass("h-border-bottom h-tightPaddingBottom"),r.isEnabled("LP_RECOMMANDATIONS")&&(recParamObj={partNumber:s.tcin,placementId:"collection",callback:"recCollectionCallback",elementId:this.$(".js-recommendationP1")},i.Events.trigger("v:recommendations:render",recParamObj)),i.Events.trigger("v:tgtcrsh:getLoveCount",{tcin:s.tcin,callback:function(e){var n=e.length?e[0].count:0;t.model.set({loveCount:n}),i.Events.trigger("v:tgtcrsh:showLoveCount",n,s.tcin)}}),window.setTimeout(function(){n.scrollToRecentlyViewedItem()},500)},productImageCarousel:function(e){var t=this.productImageModelData(e);if(t){var n=this.templates.productHeroImageCarousalTpl(t);this.$("#imageCollectionCarousal").html(n),this.initializeSlickCarousel(),this.renderZoomTemplate(t)}},productImageModelData:function(e){var t=e.heroImage;if(t)var n={heroImage:e.heroImage,hasAltImages:e.hasAltImages,altImages:e.altImages,pdpURL:e.pdpUrl,title:e.title||null,totalImages:(e.altImages||[]).length,hideAltImages:!1};return n},initializeSlickCarousel:function(){var t=this;e("#imageCollectionCarousal").find(".carousel-product").slick({arrows:!1,dots:!1,infinite:!0,speed:300,slidesToShow:1,centerMode:!0,variableWidth:!0,mobileFirst:!0,responsive:[{breakpoint:600,settings:{dots:!0,arrows:!0}}]});if(this.enableTapToZoom){var n=e(".js-tapToZoom");n.length&&(setTimeout(function(){n.addClass("is-tapToZoom-shown")},10),setTimeout(function(){n.removeClass("is-tapToZoom-shown")},2e3)),this.enableTapToZoom=!1}},rerenderSubViewIfNeeded:function(){this.$el.show()},showFadeAwayModal:function(t,n,r,i){"use strict";var s,o,u,a,f;i=i||n,a=this.templates.selectOptionOverlay({message:n,cssClass:t,selectOptionReaderMessage:i}),f=e(a),r.before(f);var l=function(){f.off("click",l),f.off("mousedown",l),f.off("touchstart",l);var e=f;f=null,e&&e.remove(),s&&window.clearTimeout(s),o&&window.clearTimeout(o),u&&window.clearTimeout(u)};f.mousedown(l),f.on("touchstart",l),f.on("click",l),n.indexOf("tap to zoom")==-1&&e("#popover-content-link").focus(),s=window.setTimeout(function(){f&&r.find(".select-option-reader-message").focus()},200),o=window.setTimeout(function(){f&&(f.addClass("fadeOut"),n.indexOf("tap to zoom")==-1&&window.setTimeout(function(){e(".sbc-add-to-cart").attr("aria-hidden","false").attr("tabindex","-1"),e(".sbc-add-to-cart").focus(),window.setTimeout(function(){e(".sbc-add-to-cart").removeAttr("aria-hidden").removeAttr("tabindex")},1e3)},1e3))},2e3),u=window.setTimeout(l,2800)},renderZoomTemplate:function(e){var t=r.template(this.templates.productImageZoom,e);this.$(".js-imageZoomOverlay").html(t),this.initializePanzoom()},displayDVMRow:function(t,n,r){try{var i;if(t){i=this.getDvmNames(t),i=i.reverse(),i=i.join("/"),i=i.replace(/[&'",]/g,""),i=i.replace(/\s+/g,"_");var s={elementId:"mobile-div-gpt-ad-pdp_"+n,dvmAddName:i,dvmSize:[[300,75]],targeting:{pt:"productdetails",item:r,pos:"pdp",as:"productdetailspdp"}};this.initializeDvmBanner(s),this.dvmConfigData.siteskin.category=s.dvmAddName,this.dvmConfigData.siteskin.item=s.targeting.item}}catch(o){e(".addThirdParty").attr("aria-hidden","true")}},onFIATSOverlayDismiss:function(e){e&&i.Events.trigger("v:fiats:refreshAddToCartBlock","PLP",e)},collDetails:function(){var e=[];r.isObject(this.collection)&&this.collection.filter(function(t){e.push(r.pick(t.attributes,["imgURL","title","offer_price","tcin","eyeBrow"]))});var t={collTitle:r.getVal(this.collection,"metaData.title"),collTcin:r.getVal(this.collection,"metaData.tcin"),collDet:e};i.Events.trigger("v:pdp-main:collDet",t)}}}};return s}),define("text!templates/tablet/browse/pdp-collection.html",[],function(){return'<a id="js-pdp-page-title" tabindex="-1"><h1 class="h-sr-only" tabindex="-1">Product description page - <%=title%></h1></a> <div class="l-col-xs-flex" role="main" id="pdpMainContainer"> <div id="imageCollectionCarousal" class="product-image-carousal-holder tapToZoom js-tapToZoom"></div>  <div class="title"> <h2 class="title-text alpha h-text-center" tabindex="-1"><% if (mediaFormatType) { %> <span class="details--format"><%=mediaFormatType%></span> <% } %><%=title%></h2> </div> <div class="title"> <p class="title-subtext delta h-text-normal"> <span><%=childCount%> items &nbsp; </span> <% if(highlights.length > 0) { %> <a href="javascript:void(0);" class="js-highlight-toggle"><span class="h-text-underline">about the collection</span> <i class="icon icon-sm link-grayDark icon-arrow-down">&nbsp;</i><span class="h-sr-only a11y-text-toggle">- shows more content</span></a> <% } %> </p> </div> <div id="product-attributes" class="section-margins"> <% _.each(highlights, function(row) { %> <% if(row.type === "text") { %> <% if(row.content!="rating_content") { %> <div class="<%=row.cssClass || \'\'%>"><%=row.content%></div> <% } %> <% } else if(row.type === "link") { %> <% if(row.content!="rating_content") { %> <a href="<%=row.href || \'\'%>" class="link-underline <%=row.cssClass || \'\'%>"><%=row.content%></a> <% } %> <% } else if (row.type === "list") { %> <ul class="is-hidden js-highlight-text <%=row.cssClass || \'\'%>"> <% _.each(row.content, function(item) { %> <li class="h-text-grayDarker"> <% if(item.label) { %> <% if(item.href) { %> <a class="link-underline" href="<%= item.href %>" <% if(row.cssClass == \'specification-list\'){ %> data-behavior="modal" data-target="#pdpCollModelId" data-event="v:model:specification" <% } %>><%= item.label%></a> <% } else { %> <%= item.label%> <% } %> <% } %> <%= item.value%> </li> <% }); %> </ul> <% } else if (row.type === "lazy") { %> <div class="lazy-data-row bb-lazy-data-row <%=row.cssClass || \'\'%>" data-use-iframe="<%=row.loadAsIframeContent|| false %>" data-lazy-source="<%=row.src%>" data-custom-handler-key="<%=row.customHandlerKey || \'\'%>"></div> <%}	 %> <% }); %> <% if(hasHighlights) { %> <% } %> <div id="mobile-div-gpt-ad-pdp_<%=timestamp%>" class="dvmSlot section-margins rounded-corner-box h-text-center h-standardSpacing"></div> <div class="l-col-xs-12 l-col-nopadding"> <div class="products-tile"> <ol class="products products--list l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-4 l-col-xl-block-4" itemprop="hasOfferCatalog" itemscope itemtype="http://schema.org/OfferCatalog"> </ol> </div> </div> </div> <h2 class="h-sr-only google-ad"> third party advertisement</h2> <div id="adcontainer1" class="mwebPdpGoogleAds h-standardSpacings"></div> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing js-recommendationP1"></div> <hr> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing js-recommendationP2"></div> </div> <div class="modal modal-carousel fade js-imageZoomContainer" id="carouselProduct" tabindex="-1" role="dialog" aria-labelledby="carouselProduct" aria-hidden="true"> <div class="modal-dialog modal-product-carousel"> <div class="modal-content js-imageZoomOverlay"> </div> </div> </div> <div class="modal modal-default" id="pdpCollModelId" tabindex="-1" role="dialog" aria-labelledby="pdpCollModelId" aria-hidden="true"> <div class="backdrop"></div> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <span class="modal-title" id="myModalLabel"></span> </div> <div class="modal-subtitle"></div> <div class="modal-body"> </div> <a href="#" class="icon icon-close-circle" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> </div> </div> </div> '}),define("views/tablet/browse/pdp-collection.view",["jquery","underscore","page","collections/browse/pdp-collection.collection","views/mixins/browse/google-adSense-view-mx","views/mixins/common/dvm-banner-mx","views/mixins/browse/pdp-collection.view-mx","text!templates/tablet/browse/pdp-collection.html","text!templates/tablet/common/recommendations.html","text!templates/tablet/browse/product-hero-image-carousal.html","text!templates/common/browse/product-image-zoom-modal.html","text!templates/tablet/common/selectOptionOverlay.html","views/mixins/browse/panzoom.view-mx","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","views/mixins/common/recommendation-view-mx","views/tablet/category/plp.item.view","views/mixins/common/alt-image-mx","views/mixins/common/mark-mx","patlab.dropdown","firefly!browse/pdp-collection","text!templates/common/browse/product-carousel-image.html"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){var x=n.extend({regTag:"Collection",constructor:function(){var t=this;n.prototype.constructor.apply(this,arguments),this.collection=new r,this.listenTo(Backbone.Events,"regC:regObj",function(e){t.registryObj=e,t.collection.registryObj=e}),Backbone.Events.trigger("regV:regObj"),this.listenTo(Backbone.Events,"v:pdp:viewload",this.toggleState),this.listenTo(this.collection,"add",this.createView),this.listenTo(Backbone.Events,"v:collection:collDet",this.collDetails),this.crushTag="collection"},initializeView:function(){var t=this},templates:{mainTpl:t.template(u),productHeroImageCarousalTpl:t.template(f),recoTpl:t.template(a),productImageZoom:l,selectOptionOverlay:t.template(c),zoomImageCarouselTpl:S},events:{},renderView:function(){this.dropdown=new w(e("#pdp"))},createView:function(n){var r=e("<li></li>").attr("data-id",n.id).addClass("product");this.$("ol.products").append(r);var i=this.subViewsReference[n.id]=new g({model:n,el:r});i.listenTo(i,"v:var:selectevent",i.variationselected),this.listenTo(Backbone.Events,"vi:fiats:onFIATSOverlayDismiss",this.onFIATSOverlayDismiss),this.subViewsReference[n.id].regTag=this.regTag,this.subViewsReference[n.id].isPdpColection=!0,this.subViewsReference[n.id].render(),t.deferImage(this.$el)},getDynamicData:function(){try{var e=this,t=this.collection.getTaggingData(),n=(t[t.length-1]||"").split(":");e.label=n[n.length-1].trim();var r=[];this.collection.each(function(e){var t="",n="",i=e.get("average_rating");(i||"").indexOf("-")!=-1&&(i=i.replace("-","."));var s=e.get("totalReviews");s&&i&&(n=i,t=s),r.push({product:e.get("tcin"),rating:n,review:t})});var i={prodView:!0,occurrences:!0,productViews:!0,collections:!0};e.pageName=(t[2]||"")+": collections",e.products=r;var s="available both",o=this.getDynamicBsdlObj();return o.todaysDate=this.setTimeBsdlObj(),o.siteEvents=i,o.products=r,o.pageName=(t[0]||"")+": collections",o.channel=t[0]||"",o.pageType="collection view",o.levelTwo=t[1]||"",o.levelThree=t[2]||"",o.levelFour=t[3]||"",o.pageTemplateType="collections",o.productAvailability=s,o.globalPage=e.pageName,o.buyPageViews="yes",o.site="Target.com",o.loginStatus=Target.User.isAnonymous?"Anonymous":"Authenticated",!e.minimumQuantity||(o.ATP_limitedQty=e.minimumQuantity),!e.OBGB||(o.ATP_OBGB=e.OBGB),!e.ATP_fullfillment||(o.ATP_fullfillment=e.ATP_fullfillment),o.errorMessage=e.tagErrors?e.tagErrors:"",o}catch(u){console.log(u)}}}).mixin([o,h,i,s,p,d,v,m,E,y,b],{viewType:E.VIEW_TYPE_TABLET});return x}),define("text!templates/common/browse/custom-plp.html",[],function(){return'<div class="js-plp-facet-wrap h-standardSpacing l-col-xs-12 l-col-nopadding js-search-header search-header"> <div class="title"> <h2 class="title-text alpha js-plp-search-title" tabindex="-1"> <%=Target.getParameterByName("title")%> </h2> </div> </div> <div class="l-col-xs-12 l-col-nopadding"> <div class="products-tile"> <ol class="products--list l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-3 js-insertProductList"> </ol> </div> </div> '}),define("views/tablet/browse/pdp-custom-plp.view",["jquery","underscore","page","collections/browse/pdp-collection.collection","views/tablet/search/plp.item.view","views/mixins/common/recommendation-view-mx","views/mixins/common/alt-image-mx","views/mixins/common/mark-mx","text!templates/common/browse/custom-plp.html","text!templates/tablet/common/recommendations.html","patlab.dropdown","firefly!browse/pdp-custom-plp"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=n.extend({subViewsReference:{},constructor:function(){var t=this;n.prototype.constructor.apply(this,arguments),this.collection=new r,this.listenTo(Backbone.Events,"regC:regObj",function(e){t.registryObj=e,t.collection.registryObj=e}),Backbone.Events.trigger("regV:regObj"),this.listenTo(Backbone.Events,"v:pdp:viewload",this.toggleState),this.listenTo(Backbone.Events,"vi:fiats:onFIATSOverlayDismiss",this.onFIATSOverlayDismiss),this.listenTo(this.collection,"add",this.createView)},templates:{mainTpl:t.template(a),recoTpl:t.template(f)},renderView:function(){this.dropdown=new l(e("#pdp"))},setModel:function(e){this.showPage(e)},onFIATSOverlayDismiss:function(e){e&&Backbone.Events.trigger("v:fiats:refreshAddToCartBlock","PLP",e)},showPage:function(n){n.isCustomPlpData=!0,this.$el.html(this.templates.mainTpl(n)),this.collection.reset(n,{silent:!1,parse:!0}),e(".TGTloading").hide(),Backbone.Events.trigger("plp:displayCollectionsObgbMsg",this.collection),Backbone.Events.trigger("lp:show:altImage",this.subViewsReference),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),t.deferImage(this.$el),this.trackPageLoad()},rerenderSubViewIfNeeded:function(){this.$el.show()},createView:function(t){var n=e("<li></li>").attr("data-id",t.id).addClass("product");this.$(".js-insertProductList").append(n);var r=this.subViewsReference[t.id]=new i({model:t,el:n});r.listenTo(r,"v:var:selectevent",r.variationselected),this.subViewsReference[t.id].regTag=this.regTag,this.subViewsReference[t.id].render()},toggleState:function(e){e!=="pdp-custom-plp"&&this.$el.hide()},getDynamicData:function(){var e=[],t={occurrences:!0,productSearches:!0},n={product:"productsearch1"};e.push(n);var r=this.getDynamicBsdlObj();return r.myStoreSetting="yes",r.siteEvents=t,r.todaysDate=this.setTimeBsdlObj(),r.channel="search",r.pageType="tcin url",r.pageName="tcin url"+(Target.getParameterByName("title")?": "+Target.getParameterByName("title"):""),r.levelTwo=r.pageName,r.levelThree=r.pageName,r.levelFour=r.pageName,r.searchTerm="",r.searchResults="",r.method="search",r.displayView="standard",r.searchPage="",r.products=e,r.loginStatus=Target.User.isAnonymous?"Anonymous":"Authenticated",r.searchSortMethod="",r.operatingSystemVersion=Target.deviceAtlas.os(),r.merchandisingLevelOne="non-browse",r.merchandisingLevelTwo="non-browse",r}}).mixin([s,c,o,u],{viewType:c.VIEW_TYPE_TABLET});return h}),define("views/mixins/browse/pdp.view-mx",[],function(){var e=function(e){return{setDefaults:{renderView:function(){},showErrorPage:function(){var e=this.tpl("pdError","ErrorProduct",{imageSvrPath:Target.Config.imageServerBasePath});this.$el.html(e),$(".TGTloading").removeSpacedLoader()},onViewLoad:function(e,t,n){Backbone.Events.trigger("v:pdp:viewload",n),e.setModel(t.data)},destroy:function(){Backbone.Events.trigger("v:pdpM:isQpdp",!1);var e=this.getSubViews();this.removeAllSubViews(),_.each(e,function(e){e.destroy()}),$("a#titleLink").trigger("click")}}}};return e}),define("views/tablet/browse/pdp.view",["page","text!templates/common/browse/product-error-details.html","views/tablet/browse/pdp-main.view","views/tablet/browse/bdp.view","views/tablet/browse/pdp-collection.view","views/tablet/browse/pdp-custom-plp.view","views/mixins/browse/pdp.view-mx"],function(e,t,n,r,i,s,o){var u=e.extend({css:["/css/patlab/browse.css"],behaviors:{"pdp-main":n,bdp:r,"pdp-collection":i,"pdp-custom-plp":s},templates:{ErrorProduct:t},initializeView:function(){this.listenTo(Backbone.Events,"c:pdp:error",this.showErrorPage),this.listenTo(Backbone.Events,"c:pdp:render",this.initializeSubView),_.bindAll(this)},initializeSubView:function(e,t){$("#pdp-error-main-id").remove();var n={};e==="pdp-main"&&(n={itemscope:"",itemtype:"http://schema.org/Product",style:"display:flex"});var r={viewOptions:{id:e,data:t,className:"l-row",attributes:n},onViewLoad:this.onViewLoad,append:!0};this.addRuntimeView(this.behaviors[e],this.$el,e,r)}}).mixin([o]);return u}),define("models/browse/share.model",["jquery","backbone"],function(e,t){var n=t.Model.extend({defaults:{partNumber:null,title:null}});return n}),define("text!templates/common/browse/share-all.html",[],function(){return'<div class="main-content"> <h1 class="h1_global">Share this item</h1> <div class="comp-share"> <div id="main" role="main"> <div class="share"> <a class="headSetFocus" tabindex="-1"><h2>share item</h2></a> <a class="item-name underlinedanchors" id="titleName" href=""><%= shareAll.title %></a> <ul class="comp-share-links"> <li> <a ontouchstart="" class="bar-link" target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Fm.target.com%2Fp%2F<%= shareAll.prodLink %>%2F-%2FA-<%= shareAll.partNumber %>"><span class="social-sprite facebook"></span>facebook</a> </li> <li> <%var url= shareAll.title+"...http://m.target.com/p/"+shareAll.prodLink+"/-/A-"+shareAll.partNumber%> <a ontouchstart="" class="bar-link" target="_blank" href="http://twitter.com/home?status=<%=encodeURIComponent(url) %>" rel="nofollow"><span class="social-sprite twitter"></span>twitter</a> </li> <li> <a ontouchstart="" class="bar-link" target="_blank" href="http://pinterest.com/pin/create/button/?url=http://m.target.com/p/<%= shareAll.prodLink %>/-/A-<%= shareAll.partNumber %>&amp;ref=http://m.target.com/p/<%= shareAll.prodLink %>/-/A-<%= shareAll.partNumber %>&amp;media=http://target.scene7.com/is/image/Target/<%= shareAll.partNumber %>?wid=300&amp;hei=300&amp;layout=vertical&amp;description=<%= shareAll.title %>" rel="nofollow"><span class="social-sprite pintrest"></span>pinterest</a> </li> <li> <a ontouchstart="" class="bar-link" target="_blank" href="https://plus.google.com/share?url=http://m.target.com/p/<%= shareAll.prodLink %>/-/A-<%= shareAll.partNumber %>" rel="nofollow"><span class="social-sprite google"></span>google+</a> </li> </ul> </div> </div> </div> </div> '}),define("views/mixins/browse/share-view-mx",[],function(){var e=function(e){return{addToObj:{events:{"click #titleName":"goBackToPDP"}},setDefaults:{renderView:function(e){$(".TGTloading").removeSpacedLoader()},loadResponseData:function(e){var t="",n=_.getVal(e,"CatalogEntryView[0].title"),r=e.CatalogEntryView[0].dynamicKitURL.split("/"),i=_.getVal(e,"CatalogEntryView[0].partNumber");r.length>4&&(t=r[r.length-3]),this.model.set("title",n),this.model.set("partNumber",i),this.model.set("prodLink",t);var s=this.tpl("shareAll","shareAllTpl",this.model.toJSON());this.$el.html(s),$(".headSetFocus").focus(),this.bsdlEventTracking()},bsdlEventTracking:function(){$(".TGTloading").removeSpacedLoader();var e=this;try{var t=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");t=window.location.origin+t.slice(0,t.lastIndexOf("/"))+"/p/"+e.model.get("prodLink")+"/-/A-"+e.model.get("partNumber"),e.eventBsdlObj.linkName=t,e.eventType="sendLink",e.bootstrapEventTracking()}catch(n){}},goBackToPDP:function(e){var t=this,n=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");Backbone.history.navigate(n.slice(0,n.lastIndexOf("/"))+"/p/"+t.model.get("prodLink")+"/-/A-"+t.model.get("partNumber"),{trigger:!0,refresh:!1})}}}};return e}),define("views/tablet/browse/share.view",["jquery","page","Target","models/browse/share.model","router","text!templates/common/browse/share-all.html","views/mixins/browse/share-view-mx"],function(e,t,n,r,i,s,o){var u=t.extend({title:null,partNumber:null,model:new r,templates:{shareAllTpl:s},constructor:function(){this.listenTo(Backbone.Events,"ct:share:loadResponseData",this.loadResponseData),t.prototype.constructor.apply(this,arguments)},initializeView:function(){Backbone.Events.trigger("vi:share:getProductDetails")}}).mixin([o]);return u}),define("text!templates/common/browse/product-find-in-store.html",[],function(){return'<%if(summary.storyUnavailable) {%> <div id="storeAvailability"> <p> <span id="ava-status"> <span class="stock_org">store info temporarily unavailable.<br></span> <span class="stock_storename"><%=summary.locationName%></span> </span> </p> </div> <div id="find-store" class="fiatsDiv"> <a id="findStore" href="/fiats-results/t-<%=summary.partNumber%>"><%= summary.attributesFields.decideStoreText %></a> </div> <%}else{%> <%if(summary.attributesFields.purchasingChannelCode != 2){%> <%if(!summary.isEligibleForPreorder){%> <%if(summary.isAvailableinStore === "Available"){  \n	    	var instockMsg = \'in stock\';\n	    	if(summary.attributesFields.pickUpInStores) {\n	    		instockMsg = \'get it today\';\n	    	}\n	    %> <div id="storeAvailability"> <p> <span id="ava-status"> <span class="stock_green"> <%=instockMsg%> </span> at <span class="stock_storename"> <%=summary.locationName%> </span> </span> </p> <%if((summary.aisle || summary.department) && summary.aisle !== 0){%> <p class="available-location">aisle <span id="aisle" class="case_upper"><%=summary.blockAisle%></span> - <span id="dept"><%=summary.department%></span> </p> <%} %> </div> <%}else if(summary.isAvailableinStore==="Not Available"){%> <div id="storeAvailability"> <p> <span id="ava-status"> <span class="stock_org">not sold </span>at <span class="stock_storename"><%=summary.locationName%></span> </span> </p> </div> <%}else if(summary.isAvailableinStore==="Out of Stock"){%> <div id="storeAvailability"> <p> <span id="ava-status"> <span class="stock_org">out of stock</span> at <span class="stock_storename"><%=summary.locationName%></span> </span> </p> </div> <%}else if(summary.isAvailableinStore==="Limited Availability"){%> <div id="storeAvailability"> <p> <span id="ava-status"> <span class="stock_org">limited stock</span> at <span class="stock_storename"><%=summary.locationName%></span> </span> </p> <%if((summary.aisle || summary.department) && summary.aisle !== 0){ %> <p class="available-location">aisle <span id="aisle" class="case_upper"><%=summary.blockAisle%></span> - <span id="dept"><%=summary.department%></span> </p> <%} %> </div> <%} else {%> <div id="find_store_available" style="display: block"> <div class="availability" style="display:block;min-height:0px"> <p> <span class="stock_org">store info temporarily unavailable.<br></span> <% if(summary.locationName) {%><span class="stock_storename"> <%=summary.locationName%> </span> <%}%> </p> </div> </div> <%}}%> <%if(summary.itemType !== \'ProductBean\' && !summary.isEligibleForPreorder && !summary.storyUnavailable){\n	    %> <div id="find-store" class="fiatsDiv"> <a id="findStore" href="/fiats-results/t-<%=summary.partNumber%>"><%= summary.attributesFields.decideStoreText %></a> </div> <%}else{\n	        if(summary.enableStoreButton && !summary.storyUnavailable){\n	        %> <div id="find-store" class="fiatsDiv"> <a id="findStore" href="/fiats-results/t-<%=summary.partNumber%>"><%= summary.attributesFields.decideStoreText %></a> </div> <%}else{%> <%if(summary.isEligibleForPreorder && summary.attributesFields.purchasingChannelCode != 2){%> <label class="h-sr-only" for="availablestores">pre order item</label> <div id="availablestores"><%=summary.preorderFiatsBtnText%></div> <%}%> <%}%> <%} %> <%} else{ %> <% var fiatsBtnTxt = summary.isVariationDefaultVal ? summary.defaultFiatsBtnTxt : "not sold in stores"; %> <div id="not_soldinstore"><%= fiatsBtnTxt %></div> <% } } %>'}),define("views/tablet/browse/pdp-find-in-store.view",["modernizr","jquery","page","Target","router","text!templates/common/browse/product-find-in-store.html","text!templates/tablet/common/fiats-find-store.html"],function(e,t,n,r,i,s,o){var u=n.extend({collection:null,model:null,leftOrRight:!0,isWaitingForServiceResponse:!1,htmlLocationWindowTimeOut:0,css:[],templates:{findInStoreTpl:s,fitasFindStoreTpl:o},events:{"click .stockStatusLink":"navigateToStoreLocator","click #find-store":"findAnotherStore","click #findStore":"suppressEventPropogation"},constructor:function(){n.prototype.constructor.apply(this,arguments)},initializeView:function(){this.listenTo(Backbone.Events,"submit:Fiats",this.fiatsSearchFormValidation)},renderView:function(){var e=r.Get.geoLocationDetails();if(r.Get.TCookie("myStoreId")!==""||e!="GEO_LOCATION_OFF"){var n=this.tpl("summary","findInStoreTpl",this.model.toJSON());this.$el.html(n)}else t(".fiatsDiv").css("margin-top","5px"),t(".fiatsDiv").css("margin-left","18px");this.model.get("attributesFields")&&this.model.get("attributesFields").itemType!="BundleBean"&&(this.checkForPickupInStore(),this.checkForSfs(),this.checkOnlineStatus()),this.isWaitingForServiceResponse||t(".TGTloading").removeSpacedLoader(),t("#footer").css("marginTop","auto")},checkForPickupInStore:function(){var e=this.model.get("attributesFields"),n=e.pickUpInStores;(!this.parentView||!this.parentView.model||!this.parentView.model.getAttributeValue("buyable"))&&this.parentView.setupAddToCartButton(!1,0,"currently unavailable","currently unavailable dimmed.");if(e.purchasingChannelCode!=="2"&&e.inventoryCode!=="4"&&e.inventoryCode!=="5")if(n&&this.model.get("store")&&(this.model.get("isAvailableinStore").toLowerCase()==="available"||this.model.get("isAvailableinStore").toLowerCase()==="in stock"))try{var i=this.model.response.CatalogEntryView[0].marketPU,s=r.Get.Cookie("cpref");if(typeof s!="undefined"&&s.indexOf("MKT=")>-1)if(i!=""){s=s.replace("MKT=",""),cpref_array=s.split(":");for(var o=0;o<=cpref_array.length;o++)i.indexOf(cpref_array[o])!=-1?(t(".sfs").find("button.add-to-cart").text("add to cart").addClass("eligibleForStorePickupAtStore").removeAttr("disabled").data("disabled",""),this.parentView.setupAddToCartButton(!0,e.catid,"Add to cart")):(t(".sfs").find("button.add-to-cart").text("add to cart").addClass("eligibleForStorePickup").removeAttr("disabled").data("disabled",""),this.parentView.setupAddToCartButton(!0,e.catid,"Add to cart"))}else t(".sfs").find("button.add-to-cart").text("add to cart").addClass("eligibleForStorePickupAtStore").removeAttr("disabled").data("disabled",""),this.parentView.setupAddToCartButton(!0,e.catid,"Add to cart");else t(".sfs").find("button.add-to-cart").text("add to cart").addClass("eligibleForStorePickup").removeAttr("disabled").data("disabled",""),this.parentView.setupAddToCartButton(!0,e.catid,"Add to cart")}catch(u){}else n&&this.model.get("store")&&(this.model.get("isAvailableinStore").toLowerCase()!=="available"||this.model.get("isAvailableinStore").toLowerCase()!=="in stock"||this.model.get("isAvailableinStore")==""||this.model.get("storyUnavailable")==1)?(t(".sfs").find("button.add-to-cart").addClass("eligibleForStorePickupAtStore").removeAttr("disabled").data("disabled",""),this.parentView.setupAddToCartButton(!1,null,"currently unavailable","currently unavailable dimmed.")):n&&(t(".sfs").find("button.add-to-cart").addClass("eligibleForStorePickupAtStore").removeAttr("disabled").data("disabled",""),this.parentView.setupAddToCartButton(!1,null,"currently unavailable","currently unavailable dimmed."))},checkForSfs:function(){var e=this.model.get("attributesFields"),t=this.model.response.CatalogEntryView[0].marketSFS,n=1;if((this.model.get("attributesFields").inventoryCode=="6"||_.isUndefined(this.model.get("attributesFields").inventoryCode))&&r.Template.bridgeData.feature.SFS_ENABLE=="true"&&e.SFSEnabled){var i=r.Get.Cookie("cpref");this.updateShippingChannelNo();if(typeof i!="undefined"&&i.indexOf("MKT=")>-1){i=i.replace("MKT=","");if(_.isDefined(t)){i=i.replace("MKT=",""),cpref_array=i.split(":");if(t=="")this.checkSFSAvailableStatus(e),n=0;else for(var s=0;s<=cpref_array.length;s++)t.indexOf(cpref_array[s])!=-1&&(this.checkSFSAvailableStatus(e),n=0)}}else this.checkSFSAvailableStatus(e)}},checkSFSAvailableStatus:function(e){if(!this.parentView||!this.parentView.model||!this.parentView.model.getAttributeValue("buyable"))return!1;var n={},r=[],i={};i.product_id=e.DPIC,i.desired_quantity=1;var s=[],o={};o.multichannel_option="shipguest",s.push(o),i.multichannel_options=s,r.push(i),n.products=r;var u=JSON.stringify(n);Tgt_Auth.setRequestType("POST",!0),this.isWaitingForServiceResponse=!0;var a=this;Tgt_Auth.postRequest("shipfromstore",{Authorization:"Bearer "+a.accessToken},n,function(e,n){_.isDefined(e.products)&&e.products.length>0&&_.isDefined(e.products[0].stores)&&e.products[0].stores.length>0&&e.products[0].stores[0].saleable_quantity>0&&(checkIsEligible=_.findWhere(e.products[0].stores[0].multichannel_options,{multichannel_option:"shipguest"}),_.isDefined(checkIsEligible)&&(t(".sfs").find("button.add-to-cart").text("add to cart").addClass("eligibleforsfs").removeAttr("disabled").data("disabled",""),t(".sfs").removeClass("disabled hide"),t(".sfs").show(),a.updateShippingChannelYes())),a.isWaitingForServiceResponse=!1,t(".TGTloading").removeSpacedLoader()})},updateShippingChannelNo:function(){t("#eligibleShiping").removeClass("ishipping_yes").addClass("ishipping_no"),t("#eligibleShiping").html('<span class="shipping_txt"> Shipping </span>  Not available')},updateShippingChannelYes:function(){var e="Free with REDcard";r.Config.shippingLimitedOffer()&&(e="Free for a limited time"),t("#eligibleShiping").removeClass("ishipping_no").addClass("ishipping_yes"),t("#eligibleShiping").html('<span class="shipping_txt_black"> Shipping </span> '+e)},checkOnlineStatus:function(){var e=t(".sfs"),n=this.model.get("attributesFields");this.parentView.checkItemAvailability(n,e)},updateView:function(e){this.renderView()},navigateToStoreLocator:function(e){this.stopAll(e),this.goTo(t(e.currentTarget).attr("href"))},findAnotherStore:function(e){this.stopAll(e),itempartNumber=this.model.attributesFields.partNumber,productTitle=this.model.attributesFields.title,navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition,this.geohtmlError):this.geohtmlError()},showPosition:function(e){if(_.isDefined(e)){t(".TGTloading").showSpacedLoader();var n=r.Template.bridgeData.feature.STORE_RESULT_LIMIT;t.ajax({url:r.Config.getApiUrl("nearbyStores").replace("{nearby}",e.coords.latitude+","+e.coords.longitude).replace("{resultStoresLimit}",n!==undefined&&parseInt(n,10)>0?parseInt(n,10):5),dataType:"jsonp",async:!0,type:"GET",success:function(e){if(_.isDefined(e.Locations.Location)){var t=e.Locations.Location[0].Address.City,n=e.Locations.Location[0].Address.Subdivision,r=t+", "+n;self.findSearchResults(r,"loc")}else self.geohtmlError()},error:function(e){self.geohtmlError()}})}else self.geohtmlError()},geohtmlError:function(){var e=_.tpl("product",o,{});t(".TGTloading").removeSpacedLoader();var n=t("#block-ATC").find(".content-ATC"),r=t("#block-ATC");$modalParent=t("#addToCartOverlay .modal"),n.children().remove(),t(".modal-container .close-ATC").remove(),n.html(e),r.modal({show:!0,backdrop:"true"}),t(".modal-backdrop").show(),$modalParent.css("cssText","display:block; top:40% !important"),r.find(".modal-container").append('<div class="closeButton-ATC close-ATC" role="button" aria-label="Close" data-behavior="closeStoreModal"></div>'),r.find("a.close").attr("aria-hidden","false");try{self.eventType="clickInteraction",self.eventBsdlObj={events:"event19,event4",pageName:"checkout: shopping cart",action:"FIATS: Enter Zip",location:"product details",products:self.model.get("attributesFields").partNumber},self.bootstrapEventTracking()}catch(i){}t(".modal-backdrop").unbind("click").bind("click",function(){self.closeModal()}),setTimeout(function(){t(".modal-container h2.fiat-stores-heading").attr("tabindex",-1).focus()},500)},findSearchResults:function(e,n){try{this.eventType="FIATS_searchResults";var r=productTitle,i="NA",s="NA",o="NA";n!="zip"?(i=e.split(",")[0],s=e.split(",")[1]):o=e,self.eventBsdlObj={product:r,city:i,state:s,zip:o},self.bootstrapEventTracking()}catch(u){}var a=t(".esp-option:first").hasClass("esp-selected"),f=espDetails="";a&&(f=t(".esp-img-indicator").attr("value"),espDetails="&espWarrantyId="+f),queryString="?searchInput="+e+"&errorPage=fiats";var l=window.location.href,c=l.search("spu=")==-1?"":"&spu="+l.split("spu=")[1],h=l.search("registryId=")==-1?"":"&registryId="+l.split("registryId=")[1],p="/fiats-results/t-"+itempartNumber+queryString+c+h+espDetails;self.goTo(p)},fiatsSearchFormValidation:function(){var e=t("#fiatsLocationInput"),n=self.isLocationValid(e);if(n){var i=e.val();self.closeModal(),t(".TGTloading").showSpacedLoader(),r.Set.TCookie("recentFiatsSearchLocation",i),i=t.trim(i),self.findSearchResults(i,"zip")}},isLocationValid:function(e){var t=e.val();this.displayErrorMsg(e,!1);if(t=="")return this.displayErrorMsg(e,"please enter a valid location."),!1;if(t.search(/^\d+$/)!=-1){if(t.length!=5)return this.displayErrorMsg(e,"please enter a valid zip code."),!1}else if(t.search(/^[A-Za-z ]+,[ ]?[A-Za-z ]+$/)==-1)return this.displayErrorMsg(e,"please enter both city and state."),!1;return!0},displayErrorMsg:function(e,n){n?(t(e).addClass("fiatPopuperror").parent().append('<div class="fiatPopupErrorMessage">'+n+"</div>"),t("div.form-div .fiatPopupErrorMessage").attr("tabindex","-1").focus()):t(e).removeClass("fiatPopuperror").next().remove()},closeModal:function(){t("#fiatSerachStoreOverlayContent").remove(),t(".modal-backdrop").hide(),t(document.body).removeClass("modal-open"),t("#block-ATC").hide(),t("#block-ATC").find("a.close").attr("aria-hidden","false"),t("#store-pop-overlay").html("").hide()}});return u}),define("text!templates/tablet/spot/spot.html",[],function(){return'<div id="main" role="main"> </div>'}),define("views/mixins/browse/spot.view-mx",["underscore"],function(e){var t=function(t){return{setDefaults:{routeToPDF:function(e){this.stopAll(e),$(e.currentTarget).off("click",this.processCapturedLinks);var t=$(e.currentTarget).attr("href");window.location.href=t},renderView:function(){var t=this;this.compiledTemplate=e.template(this.templates.spotTpl),this.$el.html(this.compiledTemplate),this.receivedJson=Target.Template.bridgeData,Target.util.renderInternalCSSLinks(this.receivedJson.cssfiles),this.renderInternalHTMLLinks(),this.captureRoutingLinks(),t.iframeUrl=window.location.href;if(window.location.hash)try{var n=window.location.hash,r=window.location.href;t.iframeUrl=r,n=n.replace("#",""),window.location="#"+n}catch(i){}try{this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking()}catch(i){}$(".TGTloading").removeSpacedLoader(),this.trackPageLoad()},renderInternalJSLinks:function(){var t=this,n=0,r=this.receivedJson.jsfiles,i="";r.length&&e.each(r,function(n){n.jsfile=this.imgServerConfigator+n.jsfile.split("marketing")[1],$("<script/>").attr({type:"text/javascript",src:n.jsfile}).appendTo(t.$el),e=e},t)},renderInternalHTMLLinks:function(){var t=this,n="text/plain; charset=UTF-8",r=0,i=this.receivedJson.view_def.main_body,s=i.length;e.each(i,function(e){typeof linkjs!="undefined"&&(linkjs.jsfile=Target.util.removeMinified(linkjs.jsfile)),Target.util.dynamicRequest(e.path,function(e,n){var i=e;t.$("#main").append($(i)),r++,s==r&&setTimeout(function(){t.renderInternalJSLinks()},1e3),t.addSpotClass()},n)},t)},addSpotClass:function(){var e=$(".product-categories"),t=$("#main.main-help-flag"),n=$("#main.specialty-flag"),r=$("#main.generics-page"),i=$("#ageDivHtml");(e.length>0||i.length>0)&&$(".main-content").addClass("category-links"),t.length&&$(".main-content").addClass("main-help"),(n.length||r.length)&&$(".main-content").addClass("spot-bg"),$(".category-links img").attr("alt")=="the ultimate spring break event"&&$(".main-content").addClass("spot-bg")},preventClick:function(e){e.preventDefault()},routeToSpotPage:function(e){this.preventClick(e);var t=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");Backbone.history.navigate(t.slice(0,t.lastIndexOf("/"))+$(e.currentTarget).attr("href"),{trigger:!0,refresh:!1})},removeAddClass:function(){$(".main-content").removeClass("category-links").removeClass("main-help").removeClass("contact-us").removeClass("spot-bg").removeClass("spot-bg")},routeToStoreLocator:function(e){var t=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");this.preventClick(e);var n=Target.Get.TCookie("myStoreId"),r=Target.Get.TCookie("myStoreName").replace(/\s+/g,"-").toLowerCase();n!=""?Backbone.history.navigate(t.slice(0,t.lastIndexOf("/"))+"/sl/"+r+"/"+n,{trigger:!0,refresh:!1}):Backbone.history.navigate(t.slice(0,t.lastIndexOf("/"))+$(e.currentTarget).attr("href"),{trigger:!0,refresh:!1})}}}};return t}),define("views/tablet/spot/spot.view",["jquery","underscore","page","Target","text!templates/tablet/spot/spot.html","underscore","views/mixins/browse/spot.view-mx","views/mixins/crush/crush.tagging-mx","firefly!spot/spot"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({imgServerConfigator:imageSerURL,iframeUrl:undefined,events:{"click .gift_card_faq":"routeToSpotPage",'click a[type="pdf"]':"routeToPDF"},templates:{spotTpl:i},css:["/css/legacy_global.css"],constructor:function(){n.prototype.constructor.apply(this,arguments)},initializeView:function(){this.removeAddClass()},getDynamicData:function(){var e=this,t={occurrences:!0},n=this.getDynamicBsdlObj();n.todaysDate=this.setTimeBsdlObj(),n.siteEvents=t;var i=r.Template.bridgeData.tracking;if(i)try{i=r.Template.bridgeData.tracking.attribute;for(var s in i)i[s]&&(i[s].name=="s.pageName"&&(n.pageName=i[s].value),i[s].name=="s.prop1"&&(n.pageType=i[s].value),i[s].name=="s.prop2"&&(n.levelTwo=i[s].value),i[s].name=="s.prop3"&&(n.levelThree=i[s].value),i[s].name=="s.prop11"&&(n.levelFour=i[s].value),i[s].name=="s.prop12"&&(n.globalPage=i[s].value),i[s].name=="s.channel"&&(n.channel=i[s].value));return n}catch(o){}else{var u=window.location.pathname,a=u.split("/"),f="";try{return a[2]&&(f+=a[2]),a[3]&&(f+=": "+a[3]),n.pageName="mobile: spotlight: "+f,n.channel="mobile: spotlight",n.server="m.target.com",n.pageType="spotlight level 3",n.levelTwo="mobile: spotlight",n.levelThree="mobile: spotlight: "+f,n.levelFour="mobile: spotlight: "+f,n.globalPage="spotlight: "+f,n.listSortMethod=": account",n}catch(o){}}}}).mixin([o,u,a],{viewType:a.VIEW_TYPE_TABLET});return f}),define("models/bv/bv.model",["jquery","backbone","models/common/base.model","Target"],function(e,t,n,r){var i=n.extend({partNumber:r.getParameterByName("partNum"),defaults:{isBazaarVoice:!0,serviceUrl:"",apiVersion:"",apiPassKey:""},initialize:function(){},url:function(){var e=this;return r.Config.getApiUrl("product").replace("{product}",e.partNumber)},sync:function(n,i,s){var o=this,u=s||{};return e(".TGTLoading").showSpacedLoader(),u.timeout=r.Get.Config("globalAjaxTimeout")||1e4,u.dataType="jsonp",u.processData=!0,u.async=!0,u.type="GET",u.url=this.url(),u.error=function(t){e(".TGTloading").removeSpacedLoader(),o.noResult(t)},t.sync(n,i,u)},noResult:function(){},parse:function(e){e&&this.set("pdpData",e.CatalogEntryView[0])}});return i}),define("text!templates/tablet/bv/bv-pdp.html",[],function(){return'<% if(bv.title){ %> <div class="customreviews"> <a class="customreviews--text" id="backArrowReview" title="<%=bv.title %>" href="/p/<%=bv.title %>/-/A-<%=bv.partNumber %>"> <div class="title title-left"> <h2 class="title--ratingsreviews"> <span class="h-sr-only"> back to </span> <%=bv.title %> </h2> </div> </a> <hr> <div class="customreviews--subtext">Target does not endorse, recommend or sponsor any guest product reviews</div> </div> <% } %>'}),define("views/mixins/browse/bv-pdp.view-mx",[],function(){var e=function(e){return{setDefaults:{setModel:function(){},goToPdp:function(e){var t=this;t.stopAll(e);var n=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),r="p/"+this.model.get("pdpData").title.replace("#","")+"/-/A-"+this.model.get("pdpData").partNumber;Backbone.history.navigate(n.slice(0,n.lastIndexOf("/"))+r,{trigger:!0,refresh:!1})},renderView:function(){var e,t;try{_.isEmpty(this.model.toJSON())||(this.compiledTemplate=_.template(this.templates.bvPdpTpl,{bv:this.model.toJSON().pdpData}),this.$el.html(this.compiledTemplate),this.eventBsdlObj={product:$("#backArrowReview").text().trim()},this.eventType="readReview",this.bootstrapEventTracking(),this.delegateEvents(),e=_.buildUrlStringFromProductTitle(this.model.toJSON().pdpData.title,this.model.toJSON().pdpData.partNumber,"relative"),t=$("link[rel=canonical]"),t.attr("href",e))}catch(n){}finally{}},makeAjaxCall:function(e,t){var n=this;$.ajax({url:e,dataType:"jsonp",async:!0,type:"GET",success:function(e){t.call(n,e)},error:function(e){}})},triggerWriteReview:function(e){var t=$(e.currentTarget);this.stopAll(e)}}}};return e}),define("views/tablet/bv/bv-pdp.view",["jquery","page","Target","router","models/bv/bv.model","text!templates/tablet/bv/bv-pdp.html","contextMappings","views/mixins/browse/bv-pdp.view-mx"],function(e,t,n,r,i,s,o,u){var a=t.extend({templates:{bvPdpTpl:s},model:new i,events:{"click #prodImg":"goToPdp","click #backArrowReview":"goToPdp","click #review-arrow-left":"goToPdp"},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){var e=this;if(!n.util.isPrivateBrowse())var t=JSON.parse(sessionStorage.getItem("productdetails"));t.partNumber!==undefined?(e.model.set("pdpData",t),e.renderView()):e.model.fetch().done(function(){e.renderView()})}}).mixin([u]);return a}),define("text!templates/tablet/bv/bv.html",[],function(){return'<div class="main-content" role="main"> <div class="event-catch nav-trigger"></div> <h1 class="h-sr-only">Welcome to Target</h1> <div id="pdpData"></div> <div id="BVRRContainer"></div> </div>'}),define("views/mixins/browse/bv.view-mx",["jquery","underscore","backbone"],function(e,t,n){var r=function(n){return{setDefaults:{setModel:function(){},renderView:function(){var n=this;try{typeof $BV!="undefined"&&(n.compiledTemplate=t.template(n.templates.bvTpl),n.$el.html(n.compiledTemplate),n.delegateEvents(),Target.productId!=undefined&&($BV.ui("rr","show_reviews",{productId:Target.productId,sort:""}),Target.productId=undefined))}catch(r){console.log(r+" Bazaar Voice Error")}finally{e(".TGTloading").removeSpacedLoader()}},redirectToLoginPage:function(){var t="/gam-login",n="",n=window.location.href.slice(window.location.href.indexOf("MCustomReview")),r=n;t=t+"?redirectToURL="+encodeURIComponent(n)+"&loginFailUrl="+encodeURIComponent(r),e(".TGTloading").removeSpacedLoader(),this.goTo(t,!0)},launchReviewOverlay:function(){var e=this;this.eventType="compInteraction",this.eventBsdlObj={componentName:"write review",componentLocation:"pdp : write review"},this.bootstrapEventTracking();var t=Target.productId;$BV.configure("global",{events:{submissionSubmitted:function(n){e.tagReviewSubmit(t)}}}),$BV.ui("rr","submit_review",{productId:t})},tagReviewSubmit:function(e){Bootstrapper._trackAnalytics("writeReview",{product:e})},makeAjaxCall:function(t,n){var r=this;e.ajax({url:t,dataType:"jsonp",async:!0,type:"GET",success:function(e){n.call(r,e)},error:function(e){}})},triggerWriteReview:function(t){var n=e(t.currentTarget);this.stopAll(t)}}}};return r}),define("views/tablet/bv/bv.view",["jquery","page","Target","views/tablet/bv/bv-pdp.view","router","text!templates/tablet/bv/bv.html","contextMappings","views/mixins/browse/bv.view-mx"],function(e,t,n,r,i,s,o,u){var a=t.extend({templates:{bvTpl:s},css:["/css/patlab/browse.css"],events:{},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){var e=this,t=n.Config.bazaarVoiceUrl;require([t],function(){var t={},i={};n.util.isPrivateBrowse()||(i=JSON.parse(sessionStorage.getItem("productdetails"))),n.getParameterByName("partNum")!==""&&n.Set.TCookie("itemId",n.getParameterByName("partNum")),i.partNumber!==undefined?n.productId=i.partNumber:n.productId=n.Get.TCookie("itemId"),t.isAnonymous=n.User.isAnonymous,t.email=n.User.email;if(n.getParameterByName("wr")=="true"){if(n.productId==undefined||!!t.isAnonymous){e.redirectToLoginPage();return}e.launchReviewOverlay()}e.renderView(),e.bvpview=new r({el:"#pdpData"})})}}).mixin([u]);return a}),define("text!templates/tablet/common/error.html",[],function(){return'<div class="l-row h-standardSpacingTop"> <div class="l-col-xs-12 l-col-md-12"> <div class="nothingHere"> <div class="title h-standardSpacingTop"> <% if (productpage) { %> <h2 class="title-text alpha">product not available</h2> <% } %> <p class="title-subtext">we\'re sorry! this page is currently unavailable. please try again later.</p> </div> <div class="boxedImage boxedImage-basket boxedImage-nothingHereSizing"> <img src="<%= imageSvrPath %>/images/error/Basket2x.png" alt="Page Not Found basket"> </div> </div> </div> </div> '}),define("views/tablet/common/error.view",["jquery","underscore","backbone","page","Target","text!templates/tablet/common/error.html","firefly!common/error"],function(e,t,n,r,i,s,o){var u={title:"sorry about that.",errorMsg:"Something went wrong. Start a new search, or:",visitHomePage:"visit our homepage",shopByCategory:"shop by category",imageSvrPath:i.Config.imageServerBasePath,productpage:!1},a=r.extend({template:t.template(s),events:function(){},constructor:function(){r.prototype.constructor.apply(this,arguments)},initializeView:function(){},renderView:function(){this.$el.html(this.template(u)),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),this.trackPageLoad()},getDynamicData:function(){var e={occurrences:!0,loginPage:!0},t=this.getDynamicBsdlObj();return t.siteEvents=e,t.todaysDate=this.setTimeBsdlObj(),t.pageName="mobile: checkout: error",t.channel="mobile: checkout",t.server="m-secure.target.com",t.pageType="checkout",t.levelTwo="mobile: checkout: error",t.levelThree="mobile: checkout: error",t.levelFour="mobile: checkout: error",t.globalPage="checkout: sign in",t.listSortMethod="mobile: account: sign in",t.loginStatus=i.User.isAnonymous?"not logged in and not registered":"logged in",t.operatingSystemVersion=i.deviceAtlas.os(),t}}).mixin([o],{viewType:o.VIEW_TYPE_TABLET});return a}),define("controllers/home/home.controller",["underscore","backbone","Target","controllers/common/base.controller","controllers/common/slingshot.controller-mx","controllers/mixins/tgtcrush-c-mx","controllers/mixins/recommendation-c-mx"],function(e,t,n,r,i,s,o){var u=r.extend({constructor:function(){this.listenTo(t.Events,"vi:home:nowtrendingdetails",this.nowtrendingdetails),this.listenTo(t.Events,"vi:home:awesomeshopdetails",this.nowtrendingdetails),this.listenTo(t.Events,"vi:home:previewComponent",this.previewComponent),this.listenTo(t.Events,"vi:home:nowtrendingsItems",this.nowtrendingsItems),this.listenTo(t.Events,"v:recommendations:render",this.initializeProductRecommendation),e.listenOnlyOnce("c:slingshot:fetchSlingshotContent",this.fetchSlingshotContent,this),r.prototype.constructor.apply(this,arguments)},loadNonPageJs:function(){var e=[];e.push(function(){require(["views/"+formFactor+"/search/plp.view","views/"+formFactor+"/common/fiats.view","views/"+formFactor+"/search/facet.view","views/"+formFactor+"/search/adsense.view"])}),e=e.concat(Array.prototype.slice.call(arguments)),r.prototype.loadNonPageJs.apply(this,e)},process:function(){var e;this.Shell.subViews["views/common/header.view"]&&(e=this.getDeviceInfo(),this.Shell.subViews["views/common/header.view"].deviceOS=e&&e.deviceType)},previewComponent:function(r){var i;e.isEnabled("PREVIEW_ENABLE")&&(i=n.Get.Config("slingshotPreviewURL")+"/"+r+(r.indexOf("&target")===-1?"&target=mobile":""),i=i.replace("/?preview=components","/components"),n.util.dynamicRequestasync(i,function(e,n){t.Events.trigger("ct:mainview:previewComponentDisplay",e,n)}))},triggerSeoCall:function(){var e=this;u.__super__.triggerSeoCall.call(e)},registerSeoCallback:function(){var e=this;u.__super__.registerSeoCallback.call(e)},nowtrendingdetails:function(e){var r=this,i={},s,o,u,a,f;i.async=!1,localStorage.getItem("awesomedata")!==null&&(u=JSON.parse(localStorage.awesomedata).timestamp,a=(new Date).getTime(),f=Math.abs(u-a)/36e5,f>1&&localStorage.removeItem("awesomedata")),localStorage.getItem("awesomedata")!==null?r.nowtrendingsItems(e,"firstPOS"):(s=n.Get.Config("awesomeshopurl"),n.util.dynamicRequest(s,function(n,i){i!=="error"?(o={awevalue:n,timestamp:(new Date).getTime()},localStorage.awesomedata=JSON.stringify(o),r.nowtrendingsItems(e,"firstPOS")):t.Events.trigger("ct:mainview:nowTrendingData",i)},"",i))},nowtrendingsItems:function(n,r){var i;r==="firstPOS"?(i=e.initial(JSON.parse(localStorage.awesomedata).awevalue,n),i=this.updateLinkValue(0,i)):(i=e.last(JSON.parse(localStorage.awesomedata).awevalue,n),i=this.updateLinkValue(10,i)),t.Events.trigger("ct:mainview:nowTrendingData",i)},updateLinkValue:function(e,t){var n=t||[],r,i;for(i=0;i<n.length;i++)r=e+i+1,n[i].linkUrl!==undefined&&n[i].linkUrl!==null&&(n[i].linkUrl=n[i].linkUrl+"?lnk=hp_productCarousel_1_"+r);return n}}).mixin([i,s,o]);return u}),define("controllers/mixins/ct-plp-c-mx",["backbone","collections/common/browseToLp.collection"],function(e,t){"use strict";var n=function(){return{after:{process:function(){}},before:{process:function(){this.removeListeners(),this.addListeners()}},setDefaults:{viewRef:null,aggrCollection:{},removeListeners:function(){this.stopListening(e.Events,"c:aggregatedPartNoLp:xhr")},addListeners:function(){this.listenTo(e.Events,"c:aggregatedPartNoLp:xhr",this.customLpService)},customLpService:function(e){var n=(e.tcin||"").split(",");n=n.map(function(e){return{ParentSKU:e}});var r=this.getStoreDetails("storeId");this.customLpView=e.viewName;var i=r?"storeId="+r:"";i=i+"&"+this.getLocation(),this.aggrCollection=new t(null,{storeParams:i,data:n}),this.listenTo(this.aggrCollection,"sync",this.intializeCtItemViews),this.listenTo(this.aggrCollection,"error",this.intializeCtItemsViewsFail),this.aggrCollection.fetch()},intializeCtItemViews:function(t){this.stopListening(this.aggrCollection,"sync",this.intializeCtItemViews);var n=t.models.map(function(e){return e.attributes});e.Events.trigger("c:pdp:render",this.customLpView,{CatalogEntryView:n})},intializeCtItemsViewsFail:function(){this.stopListening(this.aggrCollection,"error",this.intializeCtItemsViewsFail)}}}};return n}),window.browseCallback=function(){},window.priceCallback=function(){},define("controllers/browse/pdp.controller",["jquery","controllers/common/base.controller","Target","contextMappings","controllers/mixins/recommendation-c-mx","controllers/mixins/variation-c-mx","controllers/mixins/tgtcrush-c-mx","controllers/mixins/registry-c-mx","controllers/mixins/obgb-list-c-mx","controllers/mixins/ct-plp-c-mx"],function(e,t,n,r,i,s,o,u,a,f){var l=t.extend({collectionChild:{},parentPartNumber:null,spotPLPitems:null,collectionChildRerender:!0,constructor:function(){t.apply(this,arguments),_.bindAll(this)},registerContentCallback:function(){var e=this;seoHttpRequestPromise.then(function(t){var r=t.metadata;t.seo_data=r,r.seo_data=r,Backbone.Events.trigger("updateSeoTag",r),Taxo.children=r.children||[],Taxo.seo_data=r||{},Taxo.typeOfPage=r.type||"",Taxo.breadCrumb=function(e){var t,n,r="",i=[],s={};return _.each(e.breadcrumbs,function(e,s){t=e.page_id,t&&(n=t.split("/")[2]);var o={categoryId:n,index:s,label:e.seo_h1||"Target",nid:n,url:e.canonical_url};r+=r?":"+_.unescape(e.seo_h1):_.unescape(e.seo_h1),i.push(o)}),r+=":"+e.seo_h1,s={breadCrumbFull:i,breadCrumb:r},s}(r),Taxo.breadCrumbNids=function(e){var t="";return _.each(e,function(e){e.nid!=="root"&&(t+="/"+e.nid)}),t}(Taxo.breadCrumb.breadCrumbFull),Taxo.isL1orL2=t.breadcrumbs&&t.breadcrumbs[0]&&t.breadcrumbs[0].length<3;if(n.isNodeEnabledForRoute())return;TL.e(103),e.fetchSlingshotContentSuccess(t)}).catch(function(e){Backbone.Events.trigger("renderFallbackContent")})},setAriaBusyStateOnBody:function(t){"use strict";t?e("body").attr("aria-hidden",t):e("body").removeAttr("aria-hidden")},setPageMetaData:function(e,t){this.routeData=t,this.listenTo(Backbone.Events,"setAriaBusyStateOnPdpBody",this.setAriaBusyStateOnBody),this.listenTo(Backbone.Events,"v:pdp-main:triggerRatingInfoCall",this.triggerRatingInfoCall),this.listenTo(Backbone.Events,"v:pdp-main:addToBundel",this.addToBundel),this.listenTo(Backbone.Events,"v:pdp-main:callApplyCouponService",this.callApplyCouponService),this.listenTo(Backbone.Events,"v:pdp-main:getHelpfullReview",this.getHelpfullReview),this.listenTo(Backbone.Events,"v:pdp-main:getAppleTerms",this.getAppleTerms),this.listenTo(Backbone.Events,"v:pdp-main:getReturnPolicy",this.getReturnPolicy),this.listenTo(Backbone.Events,"v:pdp-main:getLazyLoadCal",this.getLazyLoadCal),this.listenTo(Backbone.Events,"v:pdp-main:getSizeChart",this.getSizeChart),this.listenTo(Backbone.Events,"route:topage",this.routeToPage),this.listenTo(Backbone.Events,"v:pdp-main:collRec",this.getCollList),l.__super__.setPageMetaData.call(this,e),this.path=e||""},process:function(){TL.s(1),e(".TGTloading").showSpacedLoader(),this.routeData&&this.partialPaint(this.routeData),this.routeData=null,this.path.search("type=spot")>-1?(this.spotPLPitems=n.getParameterByName("tcins"),this.doServiceCall(this.spotPLPitems,!0)):this.path.search("/ct-")>-1?(this.spotPLPitems=this.path.split("?")[0].replace("-/ct-","").replace(/Z/g,","),Backbone.Events.trigger("c:aggregatedPartNoLp:xhr",{tcin:this.spotPLPitems,viewName:"pdp-custom-plp"})):this.path.search("search/tcin/")>-1?(this.spotPLPitems=this.path.split("?")[0].replace("search/tcin/","").replace(/[+]/g,","),Backbone.Events.trigger("c:aggregatedPartNoLp:xhr",{tcin:this.spotPLPitems,viewName:"pdp-custom-plp"})):this.doServiceCall(this.path)},doServiceCall:function(e,t,r){var i=this;this.geoPromise.then(function(){var s={},o="";e=i.getPartNumber(e,t);var u=n.getParameterByName("sid").split("S")[0].trim()||i.getStoreDetails("storeId");o=n.Config.browseUrlRedsky+e,o+="?excludes=taxonomy",u&&(o+="&storeId="+u);if(e&&e.split(",").length>1){var a=i.getLocation();a?o+="&"+a:"",i.spotPLPitems=e,s.timeout=n.Get.Config("globalAjaxTimeout")}else t?"":i.parentPartNumber=e,s.timeout=n.Get.Config("browseTimeoutIntervel")||5e3;s.error=i.onError,s.jsonpCallback="browseCallback",s.cache=!0,TL.s(2),n.util.doDynamicRequest(o,r&&r||i.onSuccess,void 0,s)})},onSuccess:function(e,t){if(!_.isArray(e)&&!_.getVal(e,"product.item.tcin")||t.search("error")!==-1||t.search("timeout")!==-1)this.onError(t);else{TL.e(2),TL.s(54);var r=this;e=this.makeItemData(e,"CatalogEntryView");var i=this.getType(e);if(i==="pdp-collection")if(this.collectionChild[this.parentPartNumber]&&!this.collectionChildRerender||this.spotPLPitems)this.parentPartNumber=null,this.spotPLPitems=null,this.collectionChildRerender=!0,this.parentObject&&this.parentObject.CatalogEntryView[0]&&e.CatalogEntryView.unshift(this.parentObject.CatalogEntryView[0]),Backbone.Events.trigger("c:pdp:render",i,e),this.parentObject=null;else if(i==="pdp-custom-plp")Backbone.Events.trigger("c:pdp:render",i,e);else{this.collectionChild[this.parentPartNumber]=[],this.collectionChildRerender=!1;var s=_.getVal(e,'CatalogEntryView[0]["child_items"]')||[];this.parentObject=e,s.map(function(e){e.tcin&&r.collectionChild[r.parentPartNumber].push(e.tcin)}),this.collectionChild[this.parentPartNumber].length>0?this.doServiceCall(this.collectionChild[this.parentPartNumber].toString(),!0):Backbone.Events.trigger("c:pdp:render",i,e)}else{var o=n.getParameterByName("regMode")=="GG",u=_.getVal(e,"CatalogEntryView[0].parent_items");u&&_.isArray(u)&&(u=u[0].tcin),i!=="pdp-custom-plp"&&e.CatalogEntryView[0].relationship_type_code=="Variation Child"&&e.CatalogEntryView[0].tcin&&!o&&u&&this.getPartNumber(this.path)!=u?this.doServiceCall(u,!0):(o&&(e.CatalogEntryView[0].relationship_type_code="stand alone"),e.partNumber=_.getVal(e,'CatalogEntryView[0]["tcin"]'),Backbone.Events.trigger("c:pdp:render",i,e))}Backbone.Events.trigger("lp:c:getalreadyviewed"),Backbone.Events.trigger("lp:c:markViewedLP")}},partialPaint:function(e){var t=e.itemType;t!="Virtual Bundle"&&t!="Collection Parent"&&(e.partial=!0,Backbone.Events.trigger("c:pdp:render","pdp-main",e))},onError:function(e){var t=/\/p.*\/-\/[a-zA-Z]-(\d+)/,n=window.location.href.match(t);TL.err(3,"redsky service error for tcin "+_.getVal(n,"1")+"error: "+JSON.stringify(e)),Backbone.Events.trigger("c:pdp:error")},getPartNumber:function(e,t){if(!e)return"";e=e.split("?")[0];if(t)return e;var n=/-(\w+)/.exec(e.split("/").pop());return n&&n[1]},getType:function(e){return this.path.search("type=VB")===-1&&_.getVal(e,"CatalogEntryView[0].relationship_type_code")=="Collection Parent"||this.collectionChildRerender==0?"pdp-collection":this.path.search("/ct-")>-1||this.path.search("search/tcin")>-1?"pdp-custom-plp":this.isVirtualBundle(e)?"bdp":"pdp-main"},isVirtualBundle:function(e){return _.getVal(e,"CatalogEntryView[0].itemType")=="PackageBean"},triggerRatingInfoCall:function(e){n.util.dynamicRequestasync(e,function(e,t,n){if(t=="error")return!1;Backbone.Events.trigger("c:pdp:triggerRatingInfoCallSuccess",e)},"")},callApplyCouponService:function(e){r.getContext(function(){var t=this;t.context=contextDetails;var n={couponPromotionId:e.couponPromotionId},i={Authorization:"Bearer "+t.context.accessToken};r.setRequestType("POST",!0),r.postRequest("applyCoupon",i,n,function(e,t){Backbone.Events.trigger("c:pdp:callApplyCouponServiceSuccess",{status:t});return})})},getHelpfullReview:function(e){n.util.doDynamicRequest(n.Config.bazaarvoiceApiURL.replace("{productId}",e),function(e){var t=_.getVal(e,"Results[0].ReviewText")||null;t&&Backbone.Events.trigger("c:pdp:helpfullReviewSuccess",t)},void 0,{dataType:"jsonp",jsonpCallback:"targetCallback",cache:!0})},getAppleTerms:function(e,t,r){n.util.doDynamicRequest(e,function(e){Backbone.Events.trigger("c:pdp:getAppleTermsSuccess",e,t,r)},null,{dataType:"html"})},getReturnPolicy:function(e,t){n.util.doDynamicRequest(n.Config.getApiUrl("returnPolicy"),function(n){Backbone.Events.trigger("c:pdp:getReturnPolicySuccess",n,e,t)},"application/json",{dataType:"json"})},getLazyLoadCal:function(e){var t=e.data("lazy-source");n.util.doDynamicRequest(t,function(t){Backbone.Events.trigger("c:pdp:getLazyLoadCalSuccess",t,e)},"application/json",{dataType:"html",error:function(){Backbone.Events.trigger("c:pdp:getLazyLoadCalSuccess",!1,e)}})},getSizeChart:function(e,t,r){var i=n.getParameterByName("dress-type",e),s=n.Config.sizeChartURL+"html/"+i+".html",o=n.getParameterByName("brand-name",e),u=n.getParameterByName("size",e);n.util.doDynamicRequest(s,function(e){Backbone.Events.trigger("c:pdp:getSizeChartSuccess",e,t,r,o,u)},null,{dataType:"html"})},routeToPage:function(e){var t=e.url;if(e.addRegistry!=0){var n=[];_.each(this.registryObj,function(e,t){n.push(t+"="+e)}),n.length&&(t.indexOf("?")>-1?t=t+"&"+n.join("&"):t=t+"?"+n.join("&"))}Backbone.history.navigate(t,{trigger:!0,replace:!1})},makeItemData:function(e,t){var n={},r;return _.isArray(e)&&t?(n[t]=[],_.each(e,function(e){r=e.product.item,_.each(e.product,function(e,t){t!="item"&&(r[t]=e)}),_.size(_.getVal(r,"Errors"))===0&&_.getVal(r,"tcin")&&!_.getVal(r,"status_code")&&n[t].push(r)})):(r=e.product.item,_.each(e.product,function(e,t){t!="item"&&(r[t]=e)}),t&&(n[t]=[]),t&&n[t].push(r)),t&&n||r},getCollList:function(e){var t=this,r={};if(e){var i=n.Config.browseUrlRedsky+e+"?excludes=available_to_promise_network"+",bulk_ship,promotion,rating_and_review_reviews"+",rating_and_review_statistics,taxonomy,available_to_promise_store,product_v3,price";r.timeout=n.Get.Config("browseTimeoutIntervel")||5e3,r.error=function(e){},r.cache=!0,n.util.doDynamicRequest(i,function(e,t){_.getVal(e,"product.item.tcin")&&Backbone.Events.trigger("c:pdp:collListSuccess",e)},void 0,r)}}}).mixin([o,i,s,u,a,f]);return l}),define("controllers/browse/share.controller",["controllers/common/base.controller","models/browse/share.model"],function(e,t){var n=e.extend({model:t,initiate:function(){},constructor:function(){this.listenTo(Backbone.Events,"vi:share:getProductDetails",this.getProductDetails),e.prototype.constructor.apply(this,arguments)},setPageMetaData:function(e){n.__super__.setPageMetaData.call(this,e),this.path=e||""},process:function(){$(".TGTLoading").showSpacedLoader()},getProductDetails:function(){var e=Target.Config.getApiUrl("productSearch").replace("{searchTerm}",this.path);Target.util.dynamicRequestasync(e,function(e,t){if(t=="error")return!1;Backbone.Events.trigger("ct:share:loadResponseData",e)},"")}});return n}),define("controllers/spot/spot.controller",["underscore","controllers/common/base.controller","controllers/mixins/tgtcrush-c-mx","Target"],function(e,t,n){var r=t.extend({initiate:function(){this.setPageDefinition(),this.lazLdResource(this.Shell,this)},setPageMetaData:function(e){r.__super__.setPageMetaData.call(this,e)},setPageDefinition:function(){},process:function(){$(".cancel-search").trigger("click"),$("html").removeClass("legacy")},rerenderSubViewIfNeeded:function(e,t,n,r){var i;r==="views/spot/spot.view"&&(i=t.addSubView(r,(new e({vid:r})).loadEl(n)),i.renderSubviewSpecifically())}}).mixin([n]);return r}),define("controllers/bv/bv.controller",["underscore","controllers/common/base.controller","Target"],function(e,t){var n=t.extend({initiate:function(){},process:function(){return this.Shell.subViews["views/bv/bv.view"]}});return n}),define("controllers/fiats/fiats.controller",["controllers/common/base.controller","contextMappings"],function(e){var t=e.extend({fiatsModel:null,initiate:function(){},setPageMetaData:function(e){t.__super__.setPageMetaData.call(this,e),e=e||"",this.pageQueryString=this.parseQueryString(e)},process:function(){this.setPartNumber(window.location.href),Backbone.Events.trigger("fiats:showStoresList",this.pageQueryString)},setPartNumber:function(e){e=e.substring(e.lastIndexOf("t-")+1),e=e.split("?")[0],this.pageQueryString.tcin=e.substring(e.lastIndexOf("-")+1)}});return t}),define("models/gam/addressbook.model",["jquery","underscore","backbone","Target"],function(t,n,r,i){var s=r.Model.extend({idAttribute:"addressId",defaults:{addressId:"",nickName:"",firstName:"",lastName:"",middleName:"",addressLine1:"",addressLine2:"",addressLine3:"",addressType:"",city:"",state:"",country:"",zipCode:"",mobile:"",defaultAddress:!1,hasSubscription:!1},url:function(t,n){var r=i.GAMMODService.buildURL("address")+"/addresses/";if(t==="update"||t==="delete")n!==undefined&&n==="default"?r=i.GAMMODService.buildURL("address")+"/addresses/"+this.get(this.idAttribute)+"/setdefault":r=i.GAMMODService.buildURL("address")+"/addresses/"+this.get(this.idAttribute);return r},initialize:function(t,r){n.extend(this,this.defaults)},setModelData:function(t){var r=this;n.each(t,function(t,n){r.set(n,t)})},validation:{firstName:[{required:!0,msg:"Enter your first name"},{pattern:/^[a-zA-Z]*[a-z,A-Z.\'\-\s]+[a-z,A-Z0-9.\'\-\s]*$/,msg:"Invalid First Name"}],lastName:[{required:!0,msg:"Enter your last name"},{pattern:/^[a-zA-Z]*[a-z,A-Z.\'\-\s]+[a-z,A-Z0-9.\'\-\s]*$/,msg:"Invalid Last Name"}],addressLine1:[{required:!0,msg:"Please enter address"},{pattern:/^[a-zA-Z0-9#,.\\\-\/\s]*$/,msg:"Invalid address 1 entered"}],addressLine2:[{required:!1},{pattern:/^[a-zA-Z0-9#,.\\\-\/\s]*$/,msg:"Invalid address 2 entered"}],cityField:[{required:!0,msg:"Please enter city"},{pattern:/^[a-zA-Z0-9&,.\\\-\/\s]*$/,msg:"Invalid city entered"}],state:{fn:function(t,n,r){return t.length===0},msg:"Please select state"},zipCode:[{required:!0,msg:"Please enter zip code"},{fn:function(r,i,s){var o=t("#phone1").attr("data-type")==="IC"?/^[0-9\- ]{4,}$/:/^\d{5}([\-]?\d{4})?$/,u="Please enter a valid zip code",a="";if(n.hasValue(r))return a=o.exec(r),n.isArray(a)?"":u}}],mobile:[{required:!0,msg:"Please enter phone number"},{fn:function(r,i,s){var o=t("#mobile").attr("data-type")==="IC"?/^[0-9\-]{10,}$/:/^(\(?(\d{3})\)?[\- ]?\d{3}[\-]\d{4})|(\d{10})$/,u="Please enter a valid 10-digit phone number, area code first",a="",f;return n.hasValue(r)&&(a=o.exec(r),n.isArray(a)&&(f=r,f!==undefined&&(f=f.replace(/[\(\)\.\-\ ]/g,"")),f=parseInt(f,10),f<=999999999||f>9999999999||(u=""))),u}}]},parse:function(t){var n={};return t.hasOwnProperty("address")&&(n=t.address),n},sync:function(t,s,o){var u=[],a;a=o||{},a.url=this.url(t.toLowerCase(),o.operation),a.xhrFields={withCredentials:!0},a.timeout=i.Get.Config("modAjaxTimeout")||1e4,a.beforeSend=function(e){e.setRequestHeader("x-client-access-token",i.Config.gamApiKey)},u=["addressId","firstName","lastName","addressLine1","addressLine2","city","state","zipCode","country","mobile","addressType","defaultAddress","skipAddressValidation"],n.each(s.attributes,function(t,n){u.indexOf(n)===-1&&s.unset(n,{silent:!0})}),r.sync(t,s,a)}});return s}),define("collections/gam/addressbook.collection",["jquery","Target","backbone","collection","models/gam/addressbook.model","underscore"],function(t,n,r,i,s,o){var u,a=i.extend({model:s,defaults:{},async:!0,url:n.GAMMODService.buildURL("address")+"/addresses?responseGroup=S,B,SB",initialize:function(t,n){o.defaults(this,this.defaults)},modelId:function(t){return"addressId"},parse:function(t){var n=[];return t.hasOwnProperty("addresses")&&(n=t.addresses),n},fetchSuccess:function(t,n){r.Events.trigger("c:gam:adrSuccess",n)},fetchError:function(t,n){r.Events.trigger("c:gam:adrFail",n)},sync:function(t,i,s){s.xhrFields={withCredentials:!0},s.beforeSend=function(e){e.setRequestHeader("x-client-access-token",n.Config.gamApiKey)},s.timeout=n.Get.Config("modAjaxTimeout")||1e4,r.sync(t,i,s)}});return{getInstance:function(){return u||(u=new a),u}}}),define("controllers/gam/addressbook.controller",["backbone","controllers/common/base.controller","collections/gam/addressbook.collection"],function(t,n,r){var i=n.extend({collection:r.getInstance(),currentPageName:"",isFetchProgress:!1,constructor:function(t){this.cname=t},listenToEvent:function(){this.listenTo(t.Events,"c:gam:getAddressDetails",this.getAddresses,this),this.listenTo(t.Events,"c:gam:adrSuccess",this.processAddressResponse,this),this.listenTo(t.Events,"c:gam:adrFail",this.processAddressResponse,this)},getAddresses:function(t){var n=this;n.isFetchProgress?t==="address"&&(n.currentPageName=t):n.currentPageName=t,n.collection.length===0?n.isFetchProgress||(n.isFetchProgress=!0,n.collection.fetch({success:n.collection.fetchSuccess,error:n.collection.fetchError})):n.processAddressResponse({})},processAddressResponse:function(n){var r=this,i={};r.isFetchProgress=!1,t.Events.trigger("ct:gamdash:addressDetails"),_.isDefined(n)&&n.statusText==="timeout"&&(i={errorKey:"TIME_OUT",errorMessage:Target.labels.get("GM_ERR_TIME_OUT")}),r.currentPageName==="address"&&t.Events.trigger("c:addressbookController:populateAddressInformation",i),r.currentPageName=""}});return i}),define("controllers/gam/payment.controller",["controllers/common/base.controller","collections/gam/mycard.collection","backbone"],function(t,n,r){var i=t.extend({collection:n.getInstance(),currentPageName:"",isFetchProgress:!1,listenToEvent:function(){this.listenTo(r.Events,"c:gam:getPaymentDetails",this.getPaymentTender),this.listenTo(r.Events,"c:gam:wltSuccess",this.processTenderResponse,this),this.listenTo(r.Events,"c:gam:wltFail",this.processTenderResponse,this)},getPaymentTender:function(t){var n=this;n.isFetchProgress?t==="payments"&&(n.currentPageName=t):n.currentPageName=t,n.collection.length===0?n.isFetchProgress||(n.isFetchProgress=!0,n.collection.fetch({success:n.collection.fetchSuccess,error:n.collection.fetchError})):n.processTenderResponse({})},processTenderResponse:function(t){var n=this,i={};n.isFetchProgress=!1,r.Events.trigger("ct:gamdash:paymentDetails"),_.isDefined(t)&&t.statusText==="timeout"&&(i={errorKey:"TIME_OUT",errorMessage:Target.labels.get("GM_ERR_TIME_OUT")}),n.currentPageName==="payments"&&r.Events.trigger("c:paymentController:populatePaymentInformation",i),n.currentPageName=""}});return i}),define("controllers/gam/giftcard.controller",["controllers/common/base.controller","backbone","collections/gam/giftcard.collection"],function(t,n,r){var i=t.extend({context:"",routeData:{},collection:r.getInstance(),currentPageName:"",isFetchProgress:!1,constructor:function(t){this.cname=t},listenToEvent:function(){this.listenTo(n.Events,"c:gam:getGCDetails",this.getGiftCards,this),this.listenTo(n.Events,"c:gam:gcSuccess",this.processGCTenderResponse,this),this.listenTo(n.Events,"c:gam:gcFail",this.processGCTenderResponse,this),this.listenTo(n.Events,"c:gamController:invokeGCService",this.invokeGCService,this)},getGiftCards:function(t){var n=this;n.isFetchProgress?t==="giftcards"&&(n.currentPageName=t):n.currentPageName=t,n.collection.length===0?n.isFetchProgress||(n.isFetchProgress=!0,n.collection.fetch({success:n.collection.fetchSuccess,error:n.collection.fetchError})):n.processGCTenderResponse({})},processGCTenderResponse:function(t){var r=this,i={};r.isFetchProgress=!1,n.Events.trigger("ct:gamdash:giftCardDetails"),_.isDefined(t)&&t.statusText==="timeout"&&(i={errorKey:"TIME_OUT",errorMessage:Target.labels.get("GM_ERR_TIME_OUT")}),r.currentPageName==="giftcards"&&n.Events.trigger("c:giftcardController:populateGCInformation",i),r.currentPageName=""},invokeGCService:function(e,t){var r=this;Tgt_Auth.setRequestType(e.type,!0),Tgt_Auth.postRequest(e.serviceName,e.header,e.param,function(i,s){if(e.action=="get gift cards")r.processGCTenderResponse(i,t);else if(e.action=="checkGCBalance")i.hasOwnProperty("errors")||_.has(i,"errors")?n.Events.trigger("c:giftcardController:checkGCBalanceError",i):n.Events.trigger("c:giftcardController:checkGCBalanceSuccess",i,r.context.accessToken);else{_.has(i,"Error")&&(i=JSON.parse(i.Error.Detail));if(!(i.hasOwnProperty("errors")||i.hasOwnProperty("errorMessage")||i.hasOwnProperty("contact"))){if(e.action=="add new GC")r.userGC=[],n.Events.trigger("c:giftcardController:saveGCSuccess",i,e.param);else if(e.action=="delete GC")r.userGC=[],n.Events.trigger("c:giftcardController:deleteGCSuccess");else if(e.action=="addGC_ToAccount"){var o=e.pageName;e.isMobileGC?(n.Events.trigger("c:giftcardController:tagAddGC",o,!0),window.location.assign(window.domain.replace(window.location.origin,"")+"/?gcAdd=true")):(n.Events.trigger("c:giftcardController:tagAddGC",o,!1),window.location.assign(window.secure_domain.replace(window.location.origin,"")+"/"+"giftcard/check-balance?gcAdd=true"));var u=$.cookie("giftCardBalance");Target.ToastMsgs.trigger("guestWelcomeMessage",{queryString:"gcAdd",msg:u==undefined||u==""?"cha-ching! GiftCard saved. ":"cha-ching! $"+u+" GiftCard saved. "})}}else{var a=r.processSaveGCErrorResponse(i.errors);if(e.action=="add new GC")n.Events.trigger("c:giftcardController:saveGCError",a,e.param);else if(e.action=="delete GC")n.Events.trigger("c:giftcardController:deleteGCError",a);else if(e.action=="addGC_ToAccount"){e.isMobileGC?(n.Events.trigger("c:giftcardController:tagAddGC",e.pageName,!0,!0,a[0].errorMessage),window.location.assign(window.domain.replace(window.location.origin,"")+"/?gcError=10021")):(n.Events.trigger("c:giftcardController:tagAddGC",e.pageName,!1,!0,a[0].errorMessage),window.location.assign(window.secure_domain.replace(window.location.origin,"")+"/"+"giftcard/check-balance?gcError=10021"));var u=$.cookie("giftCardBalance");Target.ToastMsgs.trigger("guestWelcomeMessage",{queryString:"gcError",msg:u==undefined||u==""?"":"$"+u+" "})}}}})},processSaveGCErrorResponse:function(e){var t=/(<([^>]+)>)/ig,n=["GIFTCARDNUMBER","ACCESSNUMBER","GIFTCARD_ACCESS","FORCECLOSED","NEVERISSUED","GIFTCARD_PURGED","GIFTCARD_ARCHIVED","DELAYED_ACTIVATION","GIFTCARD_DELETED","ERR_CHECKBALANCE_EXCEPTION","ERR_DUPLICATECARD_EXCEPTION","CARDNICKNAME","REDEEM_REQUEST_NOT_FOUND","INVALID_REVERSE_REDEEM_AMOUNT","INVALID_PIN","INVALID_GIFTCARD","_ERR_UNREGISTERED_USER"],r=[];return _.each(e,function(e){var i={};_.each(n,function(n){e.errorKey!==undefined&&e.errorKey.indexOf(n)!==-1&&(n==="GIFTCARDNUMBER"||n==="ERR_CHECKBALANCE_EXCEPTION"?i.code="giftCardNumber":n==="ERR_DUPLICATECARD_EXCEPTION"?(i.code="giftCardNumber",e.errorMessage="You've already added this Target GiftCard to your account."):n==="ACCESSNUMBER"||n==="GIFTCARD_ACCESS"?(e.errorMessage="gift card information entered is either invalid or incomplete.",i.code="accessNumber"):n==="FORCECLOSED"||n==="GIFTCARD_DELETED"?(e.errorMessage="This Target GiftCard has been disabled or deleted. Please call 1-800-544-2943 if you have any questions.",i.code="accessNumber"):n==="CHECKBALANCE"?(e.errorMessage="This Target GiftCard has a $0 balance because it has already been redeemed.",i.code="accessNumber"):n==="DELAYED_ACTIVATION"?(e.errorMessage="This Target GiftCard will be activated within 24 hours. Check back soon to see if it has been activated.",i.code="accessNumber"):n==="GIFTCARD_PURGED"?(e.errorMessage="This Target GiftCard can be used for payment in any Target store. To use it on Target.com, please call 1-800-544-2943.",i.code="accessNumber"):n==="GIFTCARD_ARCHIVED"?(e.errorMessage="This Target GiftCard has not been activated. Please call 1-800-544-2943 for further assistance.",i.code="accessNumber"):n==="REDEEM_REQUEST_NOT_FOUND"||n==="INVALID_REVERSE_REDEEM_AMOUNT"?(e.errorMessage="There is an issue with this Target GiftCard. Please call 1-800-544-2943 for help.",i.code="accessNumber"):n==="INVALID_PIN"||"INVALID_GIFTCARD"?(e.errorMessage="Please enter valid GiftCard number and access / pin number combination.",i.code="accessNumber"):n==="_ERR_UNREGISTERED_USER"?e.errorMessage="_ERR_UNREGISTERED_USER":i.code="cardNickName"),i.errorMessage=e.errorMessage.replace(t,"")}),r.push(i)}),r}});return i}),define("models/gam/orders.model",["jquery","underscore","backbone"],function(t,n,r){var i=r.Model.extend({idAttribute:"id",initialize:function(t,r){n.extend(this,this.defaults)},setModelData:function(t){var r=this;n.each(t,function(t,n){r.set(n,t)})},parse:function(t){var n={};return t.hasOwnProperty("card")?n=t.card:typeof t=="object"&&!t.hasOwnProperty("errors")&&!t.hasOwnProperty("error")&&(n=t),n},sync:function(t,n,i){i.xhrFields={withCredentials:!0},i.beforeSend=function(e){e.setRequestHeader("x-client-access-token",Target.Config.gamApiKey)},i.timeout=Target.Get.Config("modAjaxTimeout")||1e4,r.sync(t,n,i)}});return i}),define("collections/gam/orders.collection",["jquery","Target","collection","backbone","models/gam/orders.model","underscore"],function(t,n,r,i,s,o){var u,a=r.extend({model:s,defaults:{},async:!0,recentDuration:{},url:function(t){var r,i=new Date,s,o,u=n.GAMMODService.buildURL("orders");return parseInt(t,10)?r={from:parseInt(t,10),span:parseInt(t,10)}:r={from:parseInt(t.from,10)||60,span:parseInt(t.span,10)||60},s=new Date(i.setTime(i.getTime()-r.from*864e5)),o=new Date(i.setTime(s.getTime()+r.span*864e5)),this.recentDuration=r,u=u+"?from_date="+s.getUTCFullYear()+"-"+(s.getUTCMonth()+1)+"-"+s.getUTCDate()+"&to_date="+o.getUTCFullYear()+"-"+(o.getUTCMonth()+1)+"-"+o.getUTCDate(),u},initialize:function(){o.defaults(this,this.defaults)},modelId:function(){return"id"},fetchSuccess:function(t){t=t||{noOrders:this.recentDuration},i.Events.trigger("c:gam:ordHistSuccess",t)},fetchError:function(t){i.Events.trigger("c:gam:ordHistFail",t)},parse:function(t){var n=[];return t&&t.orders&&(n=t.orders),n},comparator:function(t){var n=new Date(t.get("placed_date"));return-n.getTime()},sync:function(t,r,s){var o;return s.xhrFields={withCredentials:!0},s.beforeSend=function(e){e.setRequestHeader("x-client-access-token",n.Config.gamApiKey)},s.timeout=s.timeout||n.Get.Config("modAjaxTimeout")||1e4,o=s||{},o.url=this.url(s.duration),o.headers=s.headers||{},i.sync(t,r,o)}});return{getInstance:function(){return u||(u=new a),u}}}),define("controllers/gam/orders.controller",["underscore","controllers/common/base.controller","Target","backbone","contextMappings","collections/gam/orders.collection","serviceAdapter"],function(e,t,n,r,i,s,o){var u=t.extend({collection:s.getInstance(),currentPageName:"",isFetchProgress:!1,historyLength:0,context:"",orderData:{},routeData:{},orderList:{},memberId:"",initiate:function(){},listenToEvent:function(){var e=this;e.listenTo(r.Events,"c:gam:getOrdersHistory",e.getOrdersHistory,e),e.listenTo(r.Events,"c:gam:ordHistSuccess",e.processHistoryResponse,e),e.listenTo(r.Events,"c:gam:ordHistFail",e.processHistoryFailResponse,e),e.listenTo(r.Events,"v:orderDetail:cancelSubscriptionOrder",e.cancelSubscriptionOrder,e),e.listenTo(r.Events,"v:orderDetail:extendPickuptime",e.updateExtentPickupTime,e),e.listenTo(r.Events,"v:orderDetail:getProductAvailability",e.getProductAvailability,e),e.listenTo(r.Events,"v:reorderModalSubmit",e.placeOrder,e),e.listenTo(r.Events,"v:orderDetail:fetchStoreDetails",e.fetchStoreDetails)},process:function(){var e=this,t=window.location.pathname;e.orderhistoryview=e.Shell.subViews["views/gam/orderhistory.view"],e.checkoutorderdetailview=e.Shell.subViews["views/gam/orderdetail.view"],e.findorderview=e.Shell.subViews["views/gam/findorder.view"];if(e.findorderview&&t.indexOf("gam-findorder")>-1){n.User.isAnonymous||n.User.guestType==="G"?r.Events.trigger("ct:orders:showFindOrder",""):r.history.navigate(window.secure_domain.replace(window.location.origin,"")+"/gam-dash",{trigger:!0,replace:!1});return}if(e.orderhistoryview){if(!!n.User.isAnonymous||!!e.timedOut){e.orderhistoryview.trigger("c:gam:isAuthenticatedPage","gam-orderhistory");return}r.Events.trigger("ct:orders:prepareHistoryView","individual"),e.getOrdersHistory("individual")}e.checkoutorderdetailview&&e.showCheckoutOrderDetailViewSource()},getOrdersHistory:function(t,r){var i=this,s=[],o=JSON.parse(sessionStorage.getItem("orderList"))||{},u=Math.max(i.historyLength,o.historyLength||0),a,f=parseInt(n.Template.bridgeData.feature.ORD_HISTORY_ALL_LIMIT,10)||1e3,l=parseInt(n.Template.bridgeData.feature.ORD_HISTORY_MORE_LIMIT,10)||60,c=parseInt(n.Template.bridgeData.feature.ORD_HISTORY_RECENT_LIMIT,10)||30,h=parseInt(n.Template.bridgeData.feature.ORD_HISTORY_REFRESH_LIMIT,10)||15;if(i.isFetchProgress)return;r==="all"?a=f:r==="more"?a=l:(u=0,a=c,i.historyLength=a),u=Math.min(u+a,f),t&&(i.currentPageName=t),n.util.isPrivateBrowse()||(o&&o.userId===n.User.email?(s=JSON.parse(o.orderList)||[],i.collection.set(s,{silent:!0,remove:!1}),o.historyLength&&(i.historyLength=Math.min(Math.max(i.historyLength,o.historyLength),f)),s.length&&!r&&(u=h,a=h)):(sessionStorage.removeItem("orderList"),i.historyLength=a,u=a)),u>i.historyLength&&(i.historyLength=u),i.isFetchProgress=!0,TL.s(305),i.collection.fetch({duration:{from:u,span:a}}).done(i.collection.fetchSuccess.bind(i.collection)).fail(i.collection.fetchError.bind(i.collection)).always(function(){i.isFetchProgress=!1})},processHistoryResponse:function(t){TL.e(305);var i=this,s,o=i.historyLength||0,u=n.User.email,a=JSON.parse(sessionStorage.getItem("orderList")),f=parseInt(n.Template.bridgeData.feature.ORD_HISTORY_ALL_LIMIT,10)||1e3;n.util.isPrivateBrowse()||(a&&a.userId===u?(s=JSON.parse(a.orderList),o=Math.max(i.historyLength,a.historyLength),Array.isArray(s)&&s.length&&i.collection.set(s,{silent:!0,remove:!1})):sessionStorage.removeItem("orderList"),a={userId:u,orderList:JSON.stringify(i.collection.toJSON()),orderListLength:i.collection.toJSON().length,historyLength:o},sessionStorage.setItem("orderList",JSON.stringify(a)),t&&t.guest_id&&sessionStorage.setItem("memberId",t.guest_id)),t&&t.orders&&t.orders.forEach(function(e){var t=i.collection.get(e.id);t.set("order_items",e.order_items),i.collection.remove(e.id),i.collection.add(t)}),i.currentPageName!==""&&(r.Events.trigger("ct:orders:showOrders",!1,i.historyLength>=f),t&&t.noOrders&&i.processHistoryEmptyResponse(t.noOrders)),i.currentPageName=""},processHistoryEmptyResponse:function(t){var i=new Date,s=new Date(i.setTime(i.getTime()-t.from*864e5)),o=new Date(i.setTime(s.getTime()+t.span*864e5)),u=parseInt(n.Template.bridgeData.feature.ORD_HISTORY_ALL_LIMIT,10)||1e3,a="";t.from!==t.span&&(a=n.util.getDateFormatted(s.getTime(),"Mon dd, yyyy")+" &ndash; "+n.util.getDateFormatted(o.getTime(),"Mon dd, yyyy"),r.Events.trigger("ct:orders:showEmptyMessage",a,this.historyLength>=u))},processHistoryFailResponse:function(i){var s=this,o={};i.statusText==="timeout"?o={errorKey:"TIME_OUT",errorMessage:n.labels.get("GM_ERR_TIME_OUT")}:(o=i.responseJSON,i.responseText&&o&&(o=e.isArray(o.errors)?o.errors[0]:o.errors,o&&o.errorKey==="_ERR_FORBIDDEN_ACTION"&&(s.handleForbiddenError(o),TL.err(39,"Order history: "+o.errorKey)),o&&o.errorKey==="_ERR_OMS_TIMEOUT"&&(o.errorMessage=n.labels.get("_ERR_OMS_TIMEOUT"),TL.err(41,"Order history: "+o.errorKey)))),s.currentPageName!==""&&r.Events.trigger("ct:orders:showOrders",o),s.currentPageName=""},showCheckoutOrderDetailViewSource:function(){var t={},i=this,s=n.getParameterByName("lnk"),o=e.getVal(n,"Template.bridgeData.feature.SUBS_SOURCE_FIX_TEMP"),u=n.getParameterByName("ref"),a=n.getParameterByName("s"),f=n.getParameterByName("guestId"),l=n.getParameterByName("fromPage"),c=n.getParameterByName("orderId"),h=n.getParameterByName("orderDetailsToken"),p=l==="findOrder",d=n.User.isAnonymous&&!p&&!h&&(!a||a==="R"||c.substr(0,1)==="2"&&a==="G"),v=c.substr(0,1)==="2"&&(!s||s!=="orderhistory")&&(!u||u!=="Order_Delivered_Email"&&u!=="Sub_Ship_Email"&&u!=="Order_Ship_Email"&&u!=="Order_Delay_Email");if(v||d){var m;v?n.User.isAnonymous?m="/gam-login?orderId="+c+"&errorCode=10029":m="/gam-subscriptions":m="/gam-login"+window.location.search,r.history.navigate(window.secure_domain.replace(window.location.origin,"")+m,{trigger:!0,replace:!1});return}if(!e.isEmpty(i.orderData))r.Events.trigger("ct:orders:displayOrderDetails",{},i.orderData);else{if(h)t={tokens:h,type:"token"};else if(!n.User.isAnonymous){t={type:"regular",orderId:c};if(a==="G")if(o!=="true"||c.substr(0,1)!=="2"){window.location=window.secure_domain+"/gam-dash?orderId="+c+"&errorCode=10025";return}}else if(f&&c)t={userId:f,trackby:"userId",type:"findOrder",orderId:c};else if(c){var g="/gam-findorder"+window.location.search;r.history.navigate(g,{trigger:!0,replace:!1});return}r.Events.trigger("ct:orders:setupOrderDetails",t)}},updateAlternatePickup:function(t){var n=this,i="updatePickupInfo";Tgt_Auth.setRequestType("PUT",!0),n.useDifferentSession&&(i="updateAnonymousPickupInfo"),Tgt_Auth.postRequest(i,{Authorization:"Bearer "+n.accessToken},t,function(n,i){var s=[];n.hasOwnProperty("errors")?(e.each(n.errors,function(e){var t={};t.errorKey=e.errorKey,t.errorMessage=e.errorMessage,s.push(t)}),r.Events.trigger("ct:orders:updateAlternatePickupFailure",s)):r.Events.trigger("ct:orders:updateAlternatePickupSuccess",t)})},updateExtentPickupTime:function(t){var n=this,i="updatePickupInfo";Tgt_Auth.setRequestType("PUT",!0),n.useDifferentSession&&(i="updateAnonymousPickupInfo"),Tgt_Auth.postRequest(i,{Authorization:"Bearer "+n.context.accessToken},t,function(t,n){var i=[];t.hasOwnProperty("errors")?(e.each(t.errors,function(e){var t={};t.errorKey=e.errorKey,t.errorMessage=e.errorMessage,i.push(t)}),r.Events.trigger("ct:orders:extendPickupFailure",i)):r.Events.trigger("ct:orders:extendPickupSuccess")})},getProductAvailability:function(t){var i=this,s=0,u=[];e.each(t,function(t,n){obj={},e.extend(obj,{request_line_id:parseInt(n,10)+1,product:{product_id:t.partNumber,multichannel_option:"ship",inventory_type:"all",field_groups:"summary",requested_quantity:t.quantity}}),u.push(obj)}),Tgt_Auth.changeTimeout(n.Get.Config("globalATPServiceTimeout")||1e4);var a={key:n.Get.Config("apiServer").accesskey,request_type:"availability"},f={queryParams:a,withCredentials:!1};o("atpAggregator").doPost({products:u},f).success(function(e,t){r.Events.trigger("ct:orders:productAvailability",e)}).fail(function(e){r.Events.trigger("ct:orders:productAvailability",e)})},fetchStoreDetails:function(e){var t=this;Tgt_Auth.setRequestType("GET",!0),Tgt_Auth.postRequest("storeDetails",{storeId:e},{locale:"en-US",key:configJSON.apiServer.accesskey},function(e,n){if(!(n=="timeout"||e.errors||e.body&&e.body.errors||e.hasOwnProperty("Error")||e.hasOwnProperty("errors")||e.hasOwnProperty("errorKey"))){var i=t.processOperatingHours(e.Location.OperatingHours),s=e.Location.TelephoneNumber[0].PhoneNumber;i&&r.Events.trigger("c:ordersController:setPhoneAndOpenTimeOfStore",i,s)}})},processOperatingHours:function(t){var r=Array(),i=0,s={},o=new Date,u=o.getDay(),a={},f=t.Hours;return Array.isArray(f)||(f=[].push(f)),e.each(f,function(e,t){e.Interval=="Weekdays"&&e.ShortName=="M-Fr"?(r.push({isOpen:e.TimePeriod.IsOpen,hoursSummary:e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Mon",dayFullName:"Monday"}),r.push({isOpen:e.TimePeriod.IsOpen,hoursSummary:e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Tue",dayFullName:"Tuesday"}),r.push({isOpen:e.TimePeriod.IsOpen,hoursSummary:e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Wed",dayFullName:"Wednesday"}),r.push({isOpen:e.TimePeriod.IsOpen,hoursSummary:e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Thu",dayFullName:"Thursday"}),r.push({isOpen:e.TimePeriod.IsOpen,hoursSummary:e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Fri",dayFullName:"Friday"}),u>0&&u<6&&(a.isStoreOpen=e.TimePeriod.IsOpen=="true",a.todayHours=e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""))):(r.push({isOpen:e.TimePeriod.IsOpen,hoursSummary:e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:e.FullName.substr(0,3),dayFullName:e.FullName}),i=n.util.getWeekIndex(e.FullName.substr(0,3)),i==u&&(a.isStoreOpen=e.TimePeriod.IsOpen=="true",a.todayHours=e.TimePeriod.Summary.replace("-"," - ").replace(/\./g,"")))}),a.currentWeekDay=n.util.getWeekShortName(u),a.hourDetails=r,a},placeOrder:function(e){var t=this,n=e.orderId,i=e.trackEmailId,t=this;e.cvv&&e.cardType&&e.piId?o("UpdatePaymentInstruction").doPut({cvv:e.cvv,cardType:e.cardType},{params:{paymentinstructionId:e.piId}}).done(function(n,r){delete e.cardType,delete e.cvv,t.submitOrder(e)}).error(function(e,t){r.Events.trigger("v:expresscheckoutfails:redirectTogamView",e),r.Events.trigger("v:expresscheckoutfails:hideOrderDetailModal")}):t.submitOrder(e)},submitOrder:function(t){var i=t.trackEmailId;delete t.trackEmailId;var s=this,u=e.getVal(n,"Template.bridgeData.feature.ORDER_SUBMIT_V5")==="true"?"OrderSubmitV5":"OrderSubmit";o(u).doPost(t).done(function(e,i){r.Events.trigger("c:ordersController:completeOrderSuccess",t.orderId,e),n.Cart.setCartQty(0)}).error(function(e,t){r.Events.trigger("v:expresscheckoutfails:redirectTogamView",e),r.Events.trigger("v:expresscheckoutfails:hideOrderDetailModal");return})},handleForbiddenError:function(e){var t=window.secure_domain.replace(window.location.origin,""),n=window.location.pathname;r.Events.trigger("vi:headerview:signOutGuest",{toLogin:!0})}});return u}),define("models/gam/subscription.model",["jquery","underscore","backbone","Target"],function(t,n,r,i){var s=r.Model.extend({idAttribute:"subscriptionId",defaults:{subscriptionId:""},url:function(t,n){var r=i.SUBMODService.buildURL()+"/"+this.get(this.idAttribute);return r},initialize:function(t,r){n.extend(this,this.defaults)},sync:function(t,s,o){var u=["subscriptionId"],a;return a=o||{},a.url=this.url(t.toLowerCase(),a.action),a.timeout=i.Get.Config("modAjaxTimeout")||1e4,a.xhrFields={withCredentials:!0},n.each(s.attributes,function(t,n){u.indexOf(n)===-1&&s.unset(n,{silent:!0})}),a.action==="skip"?s.set("action","skipNext"):a.action==="updateDate"?(s.set("action","updateDate"),s.set("partNumber",a.partNumber),s.set("nextDate",a.nextDate)):a.action==="updateFrequency"&&(s.set("action","updateFrequency"),s.set("subscriptionInterval",a.subscriptionInterval),s.set("subscriptionUOM",a.subscriptionUOM)),r.sync(t,s,a)}});return s}),define("collections/gam/subscription.collection",["jquery","Target","backbone","collection","models/gam/subscription.model","underscore"],function(t,n,r,i,s,o){var u,a=i.extend({model:s,defaults:{},async:!0,url:n.SUBMODService.buildURL(),initialize:function(t,n){o.defaults(this,this.defaults)},modelId:function(t){return"subscriptionId"},parse:function(t){var n=[];return t.hasOwnProperty("Subscription")&&(n=t.Subscription),n},fetchSuccess:function(t,n){r.Events.trigger("c:gam:subsListSuccess",n)},fetchError:function(t,n){r.Events.trigger("c:gam:subsListFail",n)},sync:function(t,i,s){s.xhrFields={withCredentials:!0},s.timeout=n.Get.Config("modAjaxTimeout")||1e4,r.sync(t,i,s)}});return{getInstance:function(){return u||(u=new a),u}}}),define("controllers/gam/subscription.controller",["jquery","backbone","underscore","Target","controllers/common/base.controller","collections/gam/subscription.collection","models/gam/subscription.model"],function(t,n,r,i,s,o,u){var a=s.extend({collection:o.getInstance(),isFetchProgress:!1,constructor:function(t){this.cname=t},currentPageName:function(){return location.href.indexOf("subscriptions")!==-1},listenToEvent:function(){var t=this;t.listenTo(n.Events,"c:gam:getSubscriptionList",t.getSubscriptions,t),t.listenTo(n.Events,"c:gam:subsListSuccess",t.processSubscriptionResponse,t),t.listenTo(n.Events,"c:gam:subsListFail",t.processSubscriptionResponse,t)},getSubscriptions:function(){var t=this;t.collection.length===0?t.isFetchProgress?t.triggerOnDetailsReady():(t.isFetchProgress=!0,t.currentPageName()&&n.Events.trigger("c:subsController:prePopulateSubscriptions"),t.collection.fetch({success:t.collection.fetchSuccess,error:t.collection.fetchError})):(t.isFetchProgress=!0,t.processSubscriptionResponse({}))},processSubscriptionResponse:function(s,o){var a=this,f=a.collection.toJSON(),l,c,h={};o&&o.responseJSON&&(h=o.responseJSON.body||o.responseJSON),n.Events.trigger("ct:gamdash:subscriptionDetails"),i.Set.TCookie("ActiveSub",f.length||0);if(f.length===0){h.errors&&h.errors[0].errorKey!=="GAM_SUBSC_NO_SUBS_ITEMS"?c={errorMessage:"Sorry, your subscriptions are not currently available.",isSubscriptionsAvailable:!0}:c={errorMessage:"You don't have any active subscriptions. save 5% and get free shipping when you subscribe now.",isSubscriptionsAvailable:!1},a.currentPageName()&&n.Events.trigger("c:subsController:populateSubscriptions",c),a.isFetchProgress=!1;return}if(!a.isFetchProgress)return;l=f.filter(function(e){return!e.paymentInstruction||!e.shipment}).map(function(e){var n=new t.Deferred,i=new u(e);return i.fetch().then(function(e){var t;e&&r.isArray(e.Subscription)&&(t=new u(e.Subscription[0]),a.collection.add(t,{merge:!0,silent:!0})),n.resolve()}),n}),a.currentPageName()&&n.Events.trigger("c:subsController:prePopulateSubscriptions",c),t.when.apply(t,l).then(function(){a.triggerOnDetailsReady(),a.isFetchProgress=!1})},triggerOnDetailsReady:function(){var t=this;t.currentPageName()&&(n.Events.trigger("c:subsController:populateSubscriptions"),n.Events.trigger("c:subsController:manageSubscriptionFromUrl"))}});return a}),define("controllers/mixins/storelocator-c-mx",["Target","backbone","underscore"],function(e,t,n){var r=function(r){return{after:{},setDefaults:{isDetailsFromDash:!1,setStoreCookie:function(){if(n.isDefined(e.Get.TCookie("myStoreId"))&&e.Get.TCookie("myStoreId").length===0){var t=e.Get.geoLocationDetails();t.DSI&&t.DSN&&(e.Set.TCookie("myStoreId",t.DSI),e.Set.TCookie("myStoreName",t.DSN))}this.routeToSpecifiedPage()},fetchStoreDetials:function(r,i){var s,o,u;e.getParameterByName("storeNumber")?s=r?this.storeModel.get("myStoreId"):e.getParameterByName("storeNumber"):n.isDefined("STORE_LOCATOR_SEO_URL")&&n.isEnabled("STORE_LOCATOR_SEO_URL")&&(o=parseInt(window.location.pathname.split("/").pop(),10),s=r?this.storeModel.get("myStoreId"):o),this.isDetailsFromDash=i===!0;if(s)u=this.storeModel.getStoreDetailsById(s),u?this.parseStoreDetails(u,!0):this.makeAjaxCall(e.Config.getApiUrl("storeDetail",!0).replace("{store}",s),this.parseStoreDetails,this.errorStoreDetails);else if(i!==!0){var a=e.Get.geoLocationDetails();a.DSI&&t.Events.trigger("c:sl:storefinder")}},errorStoreDetails:function(){(typeof isDash=="undefined"||isDash!==!0)&&t.Events.trigger("c:sl:storefinder")},parseStoreDetails:function(r,i){var s={},o,u,a,f;i?s=r:(o=r.Location.Capability.indexOf(n.findWhere(r.Location.Capability,{CapabilityName:"Flu Shot"})),o!=="-1"&&r.Location.Capability.splice(o,1),s=this.processStoreObject(r.Location)),s=this.storeModel.updateStoreDetalisTplProperties(s),this.storeModel.set("weeklyAdURL","http://weeklyad.target.com/dispatch/?storeref="+("0000"+s.ID).slice(-4)),e.getParameterByName("seo")==="true"?this.storeModel.set("seo",!0):this.storeModel.set("seo",!1),this.storeModel.set("myStore",this.storeModel.get("myStoreId")==s.ID),this.storeModel.set("storedetails",s),a=n.isDefined(s.Address)?s.Address.Latitude:"",u=n.isDefined(s.Address)?s.Address.Longitude:"",t.Events.trigger("c:sl:setModel",this.storeModel),!this.isDetailsFromDash&&n.isDefined(a)&&a!==""&&n.isDefined(u)&&u!==""?(f=e.Config.getApiUrl("nearbyStores").replace("{nearby}",a+","+u).replace("{resultStoresLimit}",4),this.makeAjaxCall(f,this.updateNearByStores,this.updateNearByStores)):t.Events.trigger("c:sl:storedetails",this.isDetailsFromDash)},updateNearByStores:function(r){var i=this,s=[],o=e.Get.TCookie("myStoreId"),u=-1,a;n.isArray(r.Locations.Location)&&n.each(r.Locations.Location,function(e,t){t>0&&s.push(i.processStoreObject(e))}),a=i.storeModel.get("storedetails"),a.storeListArray=s,a.hasNearByStores=s.length>0,i.storeModel.set("storedetails",a),t.Events.trigger("c:sl:setModel",i.storeModel),t.Events.trigger("c:sl:storedetails",i.isDetailsFromDash)},processStoreObject:function(t){var r=this,i=e.Get.TCookie("myStoreId"),s={},o;t.isSelectedMyStore=t.ID==i,t.isStoreOpen=!1,t.todayHours="",o=t.Name.split("With"),t.fname=o[0],o[1]&&(t.lname=o[1]),t.OperatingHours&&(s=r.processOperatingHours(t.OperatingHours),t.storeHours=s.hourDetails,t.isStoreOpen=s.isStoreOpen,t.todayHours=s.todayHours,t.currentWeekDay=s.currentWeekDay),t.TelephoneNumber!==undefined&&($.isArray(t.TelephoneNumber)?n.each(t.TelephoneNumber,function(e){e.FunctionalTypeDescription==="Main"&&(t.contactPhone=e.PhoneNumber,t.contactPhoneFormatted="tel:+1"+t.contactPhone.replace(/[\(\)\.\-\ ]/g,""))}):t.TelephoneNumber.FunctionalTypeDescription==="Main"&&(t.contactPhone=t.TelephoneNumber.PhoneNumber,t.contactPhoneFormatted="tel:+1"+t.contactPhone.replace(/[\(\)\.\-\ ]/g,""))),t.Address!==undefined&&(t.Address.PostalCode!==undefined?t.Address.PostalCode=t.Address.PostalCode.toString():t.Address.PostalCode="");if(t.Capability){var u=n.findWhere(t.Capability,{CapabilityName:"Flu Shot"})&&t.Capability.indexOf(n.findWhere(t.Capability,{CapabilityName:"Flu Shot"}));u&&u!=="-1"&&t.Capability.splice(u,1),n.each(t.Capability,function(e){e.OperatingHours&&(s=r.processOperatingHours(e.OperatingHours),e.storeHours=s.hourDetails),e.TelephoneNumber!==undefined&&($.isArray(e.TelephoneNumber)?n.each(e.TelephoneNumber,function(t){t.FunctionalTypeDescription==="Main"&&(e.contactPhone=t.PhoneNumber,e.contactPhoneFormatted="tel:+1"+e.contactPhone.replace(/[\(\)\.\-\ ]/g,""))}):e.TelephoneNumber.FunctionalTypeDescription==="Main"&&(e.contactPhone=e.TelephoneNumber.PhoneNumber,e.contactPhoneFormatted="tel:+1"+e.contactPhone.replace(/[\(\)\.\-\ ]/g,"")))})}return t},processOperatingHours:function(t){var r=Array(),i=0,s={},o=new Date,u=o.getDay(),a={},f=t.Hours;return Array.isArray(f)||(f=[].push(f)),n.each(f,function(t,n){t.Interval==="Weekdays"&&t.ShortName==="M-Fr"?(r.push({isOpen:t.TimePeriod.IsOpen,hoursSummary:t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Mon",dayFullName:"Monday"}),r.push({isOpen:t.TimePeriod.IsOpen,hoursSummary:t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Tue",dayFullName:"Tuesday"}),r.push({isOpen:t.TimePeriod.IsOpen,hoursSummary:t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Wed",dayFullName:"Wednesday"}),r.push({isOpen:t.TimePeriod.IsOpen,hoursSummary:t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Thu",dayFullName:"Thursday"}),r.push({isOpen:t.TimePeriod.IsOpen,hoursSummary:t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:"Fri",dayFullName:"Friday"}),u>0&&u<6&&(a.isStoreOpen=t.TimePeriod.IsOpen=="true",a.todayHours=t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""))):(r.push({isOpen:t.TimePeriod.IsOpen,hoursSummary:t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,""),day:t.FullName.substr(0,3),dayFullName:t.FullName}),i=e.util.getWeekIndex(t.FullName.substr(0,3)),i==u&&(a.isStoreOpen=t.TimePeriod.IsOpen=="true",a.todayHours=t.TimePeriod.Summary.replace("-"," - ").replace(/\./g,"")))}),a.currentWeekDay=e.util.getWeekShortName(u),a.hourDetails=r,a},makeAjaxCall:function(t,n,r){var i=this;$.ajax({url:t,dataType:"jsonp",async:!0,timeout:3e4,type:"GET",headers:{Accept:e.Config.setAcceptHeaderToJs(t)?"application/javascript":"application/json"},success:function(e){n&&n.call(i,e)},error:function(){r&&r.call(i)}})}}}};return r}),define("models/storelocator/storelocator.model",["jquery","backbone","models/common/base.model"],function(e,t,n){var r=function(){return{pharmacy:"pharmacy",PhotoLab:"photo center",optical:"optical",beauty:"beauty concierge",clinic:"clinic",freshgrocery:"fresh grocery",starbucks:"starbucks",mobilekiosk:"target mobile",apple:"apple store",portrait:"portrait studio",wine:"wine available",flushot:"flu shot (seasonal)",uniform:"school uniform",wic:"accepts wic"}},i=function(){return{AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",WA:"Washington",DC:"Washington DC",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"}},s=function(){return{"in-store-apple-store":{small:"",alt:"",img:""},"beauty-concierge":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/beauty-concierge-small.png",alt:"beauty-concierge",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/beauty-concierge.png"},"fresh-grocery":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/fresh-grocery-small.png",alt:"fresh-grocery",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/fresh-grocery.png"},"mobile-kiosk":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/target-mobile-small.png",alt:"target-mobile",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/target-mobile.png"},starbucks:{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/starbucks-small.png",alt:"starbucks",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/starbucks.png"},wine:{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/wine-available-small.png",alt:"wine-available",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/wine-available.png"},"cafe-pizza":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/cafe-pizza-small.png",alt:"cafe-pizza",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/cafe-pizza.png"},"flu-shot":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/flu-shot-small.png",alt:"flu-shot",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/flu-shot.png"},pharmacy:{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/pharmacy-small.png",alt:"pharmacy",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/pharmacy.png"},"photo-lab":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/photo-center-small.png",alt:"photo-center",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/photo-center.png"},"accepts-wic":{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/accepts-wic-small.png",alt:"accepts-wic",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/accepts-wic.png"},optical:{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/optical-small.png",alt:"optical",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/optical.png"},portrait:{small:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/portrait-studio-small.png",alt:"portrait-studio",img:"http://Img1.targetimg1.com/wcsstore/marketing/com/mobile/images/store-locator/color/portrait-studio.png"}}},o=n.extend({defaults:{showError:!1,searchText:"",services:[],myStore:!1,imageHash:"",myStoreId:"",lat:0,"long":0,capability:{pharmacy:"Pharmacy",PhotoLab:"Photo Center",optical:"Optical",beauty:"Beauty Concierge",clinic:"Clinic",freshgrocery:"Fresh Grocery",starbucks:"Starbucks",mobilekiosk:"Target Mobile",apple:"In-Store Apple Store",portrait:"Portrait Studio",wine:"Wine Available",flushot:"Flu Shot",uniform:"School Uniforms",wic:"accepts wic"}},lookup:["pharmacy","photo center","optical","beauty concierge","clinic","fresh grocery","starbucks","target mobile","portrait studio","wine available","flu shot","school uniforms","accepts wic","in-store apple store","cafe-pizza"],storeAddress:{locations:[]},initialize:function(){this.on("change:storeListArray",this.capabilityRearrange,this),this.on("change:storedetails",this.storeDetailCapabilityRearrange,this),this.set("imageHash",s()),this.set("states",i()),this.set("capabilityList",r()),this.updateCookieValue()},lexographicalArrange:function(){var e=this.get("services");for(var t=0;t<e.length;t++)switch(e[t]){case"PhotoLab":e[t]="photo center";break;case"mobilekiosk":e[t]="target mobile";break;case"apple":e[t]="apple store";break;case"portrait":e[t]="portrait studio";break;case"wine":e[t]="wine available";break;case"flushot":e[t]="flu shot";break;case"uniform":e[t]="school uniform";break;case"wic":e[t]="accepts wic";break;default:}e.sort()},checkCapability:function(e){var t=this,n=[];return _.each(this.get("storeListArray"),function(r){if(e&&e.length>0){var i=!1;_.each(e,function(e){var n=_.find(r.Capability,function(n){return n.CapabilityName.toLowerCase()==t.get("capability")[e].toLowerCase()});n&&(i=!0)})}else i=!0;n.push(i)}),n},updateCookieValue:function(){var e=Target.Get.TCookie("myStoreId");if(!e)try{var t=Target.Get.Cookie("fiatsCookie");if(t){var n=t.split("|");n.length>1&&(e=n[0].split("_")[1])}}catch(r){}this.set("myStoreId",e)},orderArray:function(e){var t=[],n=[],r=e.length,i=r,s,o;for(;r--;)o=e[r],s=this.lookup.indexOf(o.CapabilityName.toLowerCase()),s==-1?n.push(o):t[s]=o;t=t.concat(n);var u=0;while(u<t.length)t[u]||(t.splice(u,1),u-=1),u+=1;Array.prototype.splice.apply(e,[0,i].concat(t))},storeDetailCapabilityRearrange:function(){try{this.get("storedetails").Capability=_.isArray(this.get("storedetails").Capability)?this.get("storedetails").Capability:[this.get("storedetails").Capability],this.setName(this.get("storedetails"),!1),this.setCapabilityAndPhone(this.get("storedetails").Capability),this.orderArray(this.get("storedetails").Capability)}catch(e){}},setCapabilityAndPhone:function(e){var t=this,n=e;n.forEach(function(e){e.CapabilityName.toLowerCase()=="mobile kiosk"?e.CapabilityName="Target Mobile":e.CapabilityName.toLowerCase()=="photo lab"?e.CapabilityName="Photo Center":e.CapabilityName.toLowerCase()=="portrait"?e.CapabilityName="Portrait Studio":e.CapabilityName.toLowerCase()=="wine"?e.CapabilityName="Wine Available":e.CapabilityName.toLowerCase()=="uniform"&&(e.CapabilityName="School Uniforms"),e.TelephoneNumber&&e.TelephoneNumber.length&&(e.TelephoneNumber=e.TelephoneNumber[0])})},capabilityRearrange:function(){var e=this;try{this.get("storeListArray").forEach(function(t){e.setName(t,!0),t.Capability=_.isArray(t.Capability)?t.Capability:[t.Capability],e.setCapabilityAndPhone(t.Capability),e.orderArray(t.Capability)})}catch(t){}},getStoreDetailsById:function(e){if(e)try{var t=this.get("storeListArray"),n=_.find(t,function(t){return t.ID==e});return n}catch(r){}},updateStoreDetalisTplProperties:function(e){if(e.ID){var t;switch(e.ID.toString().length){case 1:t="000";break;case 2:t="00";break;case 3:t="0";break;default:t=""}t+=e.ID.toString(),t="http://tgtfiles.target.com/maps/"+t+".png",e.storeMapImgPath=t}return e},setName:function(e,t){}});return o}),define("controllers/gam/gam.controller",["jquery","underscore","controllers/common/base.controller","Target","backbone","contextMappings","controllers/gam/addressbook.controller","controllers/gam/payment.controller","controllers/gam/giftcard.controller","controllers/gam/orders.controller","controllers/gam/subscription.controller","controllers/mixins/storelocator-c-mx","models/storelocator/storelocator.model","models/gam/personalinfo.model","controllers/mixins/recommendation-c-mx"],function(t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=r.extend({collection:null,routeData:{},gcRequestTimeout:!1,abController:null,pmController:null,gcController:null,findController:null,odController:null,scController:null,storeModel:new p,redirectUrl:"",constructor:function(t){this.cname=t},setPageMetaData:function(t,n){m.__super__.setPageMetaData.call(this,t),this.routeData=n},setGamPageObj:function(){var e=this,t=window.location.pathname,n={addressbook:t.search("addressbookformdetails")>-1,mystore:t.search("mystore")>-1,giftcard:t.search("giftcards")>-1,orderhistory:t.search("orderhistory")>-1,payment:t.search("paymentoptions")>-1,subscriptions:t.search("subscriptions")>-1,personalinfo:t.search("personalinfo")>-1,login:t.search("login")>-1,guestregistration:t.search("guestregistration")>-1,forgotpassword:t.search("forgotpassword")>-1,dash:t.search("dash")>-1,orderdetail:t.search("checkoutmanageorderdetail")>-1,findorder:t.search("findorder")>-1,giftcardBalance:t.search("check-balance")>-1,mobilegiftcard:t.search("gc")>-1};return n},process:function(){TL.s(303);var r=this,o=r.setGamPageObj(),h=i.getParameterByName("lnk"),p=o.dash;t("html").addClass("loaded"),i.validateUserSession("","gam",function(){TL.e(304),i.User.guestType!=="P"?o.giftcardBalance&&t("#giftcard-checkbalance").show():o.giftcardBalance&&(window.location=window.secure_domain+"/"+"gam-giftcards?lnk=acct_nav_view_giftcards"),h==="mgc"&&n.getVal(i,"Template.bridgeData.feature.DISABLE_MOBILE_GC")==="true"&&sessionStorage.setItem("GAM_MIGRATE_GC","TRUE");if(o.dash||o.giftcard||o.addressbook||o.payment||o.subscriptions||o.personalinfo||o.mystore){if(i.User.isAnonymous===!0||r.timedOut===!0){o.subscriptions?r.checkUserAuthenticated("gam-subscriptions"+window.location.search):r.checkUserAuthenticated("gam-dash"+window.location.search);return}r.addressbookview=r.Shell.subViews["views/gam/addressbook.view"],r.gcview=r.Shell.subViews["views/gam/giftcards.view"],r.paymentview=r.Shell.subViews["views/gam/payments.view"],r.subscriptionsView=r.Shell.subViews["views/gam/subscription.view"],n.isNull(r.abController)&&(r.abController=new u,r.abController.listenToEvent(r.addressbookview,"addressbook")),n.isNull(r.gcController)&&(r.gcController=new f,r.gcController.listenToEvent(r.gcview,"giftcards")),n.isNull(r.pmController)&&(r.pmController=new a,r.pmController.listenToEvent(r.paymentview,"paymentview")),n.isNull(r.scController)&&(r.scController=new c,r.scController.listenToEvent(r.subscriptionsView,"subscriptionsView")),r.gamordersview=r.Shell.subViews["views/gam/gam-orders.view"],n.isNull(r.odController)&&(r.odController=new l,r.odController.listenToEvent(r.gamordersview,"gam-orders")),r.mystoreview=r.Shell.subViews["views/storelocator/storelocator.view"],r.listenTo(s.Events,"c:gamController:getPersonalInformation",r.showPersonalInfoView),r.listenTo(s.Events,"c:gam:getMyStore",r.fetchStoreDetials),r.listenTo(s.Events,"v:recommendations:render",r.initializeProductRecommendation),r.loadDashboard(p)}o.giftcard?s.Events.trigger("c:gam:getGCDetails","giftcards"):s.Events.trigger("c:gam:getGCDetails","dash"),o.payment?s.Events.trigger("c:gam:getPaymentDetails","payments"):s.Events.trigger("c:gam:getPaymentDetails",""),o.addressbook?s.Events.trigger("c:gam:getAddressDetails","address"):s.Events.trigger("c:gam:getAddressDetails",""),o.mystore&&(r.storeModel.updateCookieValue(),r.fetchStoreDetials(!0,!0));if(o.giftcardBalance||o.mobilegiftcard)n.isNull(r.gcController)&&(r.gcController=new f),r.gcController.listenToEvent(),o.mobilegiftcard&&s.Events.trigger("c:mobileGCLanding:getDetails");if(o.findorder||o.orderdetail||o.orderhistory)n.isNull(r.odController)&&(r.odController=new l,r.odController.listenToEvent()),r.routeData&&r.routeData.response&&r.routeData.response.id!==""&&(r.odController.orderData=r.routeData),r.odController.process();o.personalinfo&&r.showPersonalInfoView(),o.login&&(r.clearSessionData(),r.showLoginView()),o.guestregistration&&(r.clearSessionData(),r.showGuestRegistrationView()),o.forgotpassword&&r.showForgotPasswordView(),o.subscriptions?s.Events.trigger("c:gam:getSubscriptionList","subscriptions"):s.Events.trigger("c:gam:getSubscriptionList","")}),TL.e(0)},clearSessionData:function(){i.util.isPrivateBrowse()||sessionStorage.removeItem("orderList")},listenToEvent:function(t,n){n==="header"&&(this.Shell.subViews["views/common/header.view"].searchState=!0,this.listenTo(t,"fetch:model",this.setHeader)),t.on("c:gam:isAuthenticatedPage",this.checkUserAuthenticated,this)},checkUserAuthenticated:function(t,n){i.validateUserSession("","gam",function(e){if(i.User.isAnonymous===!0){var r=window.secure_domain.replace(window.location.origin,"")+"/",s;t!==undefined&&t!==""?s="?redirectToURL="+t:s="",e?(s=s+(s!==""?"&":"?")+"errorCode=GM_ERR_TIME_OUT",o.destroyUser(function(){},!0)):s&&s.indexOf("gam-subscriptions")>-1&&s.indexOf("errorCode=10029")===-1&&(s+="&errorCode=10029"),window.location.assign(window.secure_domain+"/gam-login"+s)}else typeof n=="function"&&n()})},rerenderSubViewIfNeeded:function(t,n,r,i){i=i.replace("/"+this.formFactor,""),r==="header"&&this.Shell.subViews[i].preRender()},setHeader:function(t){var r,s=i.getParameterByName("redirectToURL"),o;s=n.isDefined(s)&&s!==""?encodeURI(decodeURIComponent(s)):"/home",o=s,r=t||new headerModel({searchFormVisible:!1,headerLinkTitle:o,headerLinkHref:o,headerLinkText:"back",loginPage:"",loginText:""}),this.Shell.subViews["views/checkout/common/header.view"].setModel(r)},showPersonalInfoView:function(){s.Events.trigger("c:gamController:showPersonalInformation",{})},showLoginView:function(){var t=window.secure_domain.replace(window.location.origin,"")+"/";i.User.isAnonymous===!0||this.timedOut===!0?(s.Events.trigger("v:login:showview"),self.timedOut=!1):window.location.href.indexOf("create_account_orderdetail")!==-1?s.history.navigate(t+"gam-dash?newUserAccount=true",{trigger:!0,replace:!1}):window.location.href.indexOf("newAccount")!==-1?s.history.navigate(t+"gam-dash?newUserAccount=true",{trigger:!0,replace:!1}):window.location.href.indexOf("userSignedIn")!==-1?s.history.navigate(t+"gam-dash?userSignedIn=true",{trigger:!0,replace:!1}):window.location.href.indexOf("subscriptions")!==-1?s.history.navigate(window.secure_domain.replace(window.location.origin,"")+"/"+"gam-subscriptions?lnk=acct_nav_subscriptions",{trigger:!0,replace:!1}):s.history.navigate(t+"gam-dash",{trigger:!0,replace:!1})},showGuestRegistrationView:function(){var t=i.getParameterByName("orderId"),n=window.location.pathname,r=window.secure_domain.replace(window.location.origin,"")+"/";i.User.isAnonymous?s.Events.trigger("v:guestregistration:showview"):t!==""&&t!=="false"&&n.indexOf("/co-thankyou")!==-1?s.history.navigate(r+"gam-checkoutmanageorderdetail?s=R&orderId="+t,{trigger:!0,replace:!1}):window.location.href.indexOf("newUserAccount")!==-1?s.history.navigate(r+"gam-dash?newUserAccount=true",{trigger:!0,replace:!1}):s.history.navigate(r+"gam-dash",{trigger:!0,replace:!1})},showForgotPasswordView:function(){var t=this;s.Events.trigger("v:forgotpassword:showview",t.routeData)},loadDashboard:function(t){var n=this;n.dashview=n.Shell.subViews["views/gam/gamdash.view"],n.dashview&&i.User.isAnonymous!==!0&&n.timedOut!==!0&&n.dashview.showLandingPage(t)}}).mixin([h,v]);return m}),define("views/tablet/brand/plp.item.view",["jquery","underscore","backbone","page","Target","views/mixins/searchcategory/slp-ph-tab-mx","views/mixins/searchcategory/plp-slp-common-mx","views/mixins/variation-select-mx","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","views/mixins/common/registry-view-mx","templates/tablet/precompiled/lpcommon","firefly!shared/plp-item","patlab.modal","patlab.affix"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=r.extend({templates:{prodFaceFrontTpl:t.template(h["common/product-front-face"]),plpMessagesTpl:t.template(h["common/plp-messages"]),selectOptionOverlayTpl:t.template(h["common/selectOptionOverlay"]),actionDropdownTpl:t.template(h["browse/tile-action-dropdown"]),globalErrorTpl:t.template(h["common/global-errors"])},itemInfoTpl:{variationPrimaryTpl:t.template(h["common/variation-primary"]),variationTpl:t.template(h["common/variation"]),variationSecondaryTpl:t.template(h["common/variation.secondary"]),addtocartTpl:t.template(h["common/addtocart-all"]),addtocartAllTpl:t.template(h["common/addtocart-all"]),addToBundleTpl:t.template(h["common/addToBundle"]),espDetailsTpl:t.template(h["common/esp-details"]),headerTpl:t.template(h["common/variation-header"]),fiatsFindStoreTpl:t.template(h["common/fiats-find-store"]),findinStoreTpl:t.template(h["common/find-in-store"])},renderView:function(){},isSearchPaginationTagging:!1,variationflipTemplateModel:null,constructor:function(){r.prototype.constructor.apply(this,arguments)},events:{"hidden.bs.modal #block-ATC":"deleteModal",'click [data-behavior="productsDescReviewModal"]':"productsDescReviewModal",'click .js-product-desc-modal [data-dismiss="modal"]':"closeDescModal","click button.flip-plp-cart-btn, .js-dropdown-registry":"flipProductInfo","click a.addcarthook:not(.disabled),button.plp-cart-btn:not(.flip-plp-cart-btn)":"flipProductInfo","click .plpAppleGiftCardTnCMoreLink":"moreInfo","click a.addbundlehook,a.article-link, .js-redirect-to-pdp":"routeToDetailPage","click .flip-rec-cart-btn":"recProductInfo"},topSellingItemsHeaderText:"",topSellingItems:null,topSellingItemsCarouselScreenWidthAndItemsToShow:[[0,3],[450,3],[600,3],[700,3],[1e3,3],[1200,3],[1400,3],[1600,3],[1800,3]],initializeView:function(){var e=this;this.listenTo(this,"v:var:firstpaint",this.saveVariationId),this.listenTo(this,"v:var:variationselected",this.saveVariationId),this.listenTo(this,"v:var:atcPainted",this.showMessages),this.listenTo(this,"v:var:alert",this.showCartWarning),this.crushTag="blp"},submitFiatsForm:function(t){this.stopAll(t),e("#fiatsForm").submit()},render:function(){var e=this.model.toJSON(),t=this;e.swatchImgArr.length===1&&(e.swatchImgArr.length=0),this.$el.html(this.templates.prodFaceFrontTpl({item:this.model.toJSON(),actionDropdownTpl:this.getActionDropdownTpl()})),setTimeout(function(){i.util.tooltip("more options",t.$el,".js-action-dropdown-over")},0)},destroy:function(){this.stopListening(),this.undelegateEvents(),this.remove(),e("a#titleLink").trigger("click")}}).mixin([s,o,u,a,f,l,c,p],{viewType:p.VIEW_TYPE_TABLET});return d}),define("templates/tablet/precompiled/brand",[],function(){return this.UIModTpl=this.UIModTpl||{},this.UIModTpl["brand/brand-header"]='<section class="js-carousel-container carousel-container rr-carousel-full h-standardSpacing js-a-title js-lpRec"></section> <% if(!productLength){ %> <div class="title"> <h1 class="title-text alpha js-plp-search-title" tabindex="-1"> <span aria-hidden="true"></span><%=meta.keyword%><span aria-hidden="true"></span> <div class="popover-demo h-standardSpacingLeft h-display-inline" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="bottom" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites" data-type="brand" aria-label="<%= \'love \' + (meta.keyword || \'this brand\') + \' to keep tabs on it\' %>" data-title="<%= meta.keyword %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </h1> </div> <div class="title"> <h2 class="title-subtext delta h-text-normal h-text-orangeDark h-tinySpacingTop" aria-atomic="true" and aria-live="polite"> 0 matching results. Remove filters to find items. </h2> </div> <% } else {%> <%if(meta.cartWheel){%> <header> <div class="title"> <div></div> <h1 class="title-text alpha"> <span class="cartwheelHeaderLarge"><%=meta.total_results%> items</span> <small class="cartwheelHeaderSmall"> in your Cartwheel</small> <div class="popover-demo h-standardSpacingLeft h-display-inline" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="bottom" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites" data-type="brand" aria-label="love this brand to keep tabs on it" data-title=""> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </h1> <h3 class="title-subtext">displaying items <span class="plp-showing"> <span class="plp-showing"><%= meta.startResult%>-<%=(Number(meta.count)*(Number(meta.currentPage)-1))+Number(productLength)%></span> </span> </h3> </div> </header> <%}else{%> <%if(meta.autoCorrectMatch && meta.autoCorrectMatch.toLowerCase()===\'matchany\' ){%> <div class="title"> <h3 class="title-subtext"> There are <b>0 exact matches</b> for all your search terms. Results <b>matching some of your terms</b> are shown instead. </h3> </div> <%}%> <%if((meta.autoCorrectKeyword && !(meta.autoCorrectKeyword.indexOf(meta.keyword)>-1))){%> <div class="title"> <h1 class="title-text alpha js-plp-search-title" tabindex="-1"> <span aria-hidden="true"></span><%=meta.autoCorrectKeyword%><span aria-hidden="true"></span> <div class="popover-demo h-standardSpacingLeft h-display-inline" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="bottom" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites" data-type="brand" aria-label="<%= \'love \' + (meta.autoCorrectKeyword || \'this brand\') + \' to keep tabs on it\' %>" data-title="<%= meta.autoCorrectKeyword %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </h1> <h2 class="title-subtext delta h-text-normal h-zeroMargin">no results for <%=meta.keyword%></h2> </div> <%}%> <%if(!(meta.autoCorrectKeyword)){%> <div class="title"> <h1 class="title-text alpha js-plp-search-title" tabindex="-1"> <span aria-hidden="true"></span><%=meta.keyword%><span aria-hidden="true"></span> <div class="popover-demo h-standardSpacingLeft h-display-inline" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="bottom" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites" data-type="brand" aria-label="<%= \'love \' + (meta.keyword || \'this brand\') + \' to keep tabs on it\' %>" data-title="<%= meta.keyword %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </h1> </div> <%}%> <%if(meta.dym & !(meta.autoCorrectKeyword)){%> <div class="title"> <h3 class="title-subtext"> search instead for <%_.each(meta.dym.value, function(val,index){%> <a href="<%=meta.dym.mapValue[val]%>"><span><%=val%></span></a> <%})%> </h3> </div> <%}%> <div class="title"> <%if((meta.autoCorrectKeyword && !(meta.autoCorrectKeyword.indexOf(meta.keyword)>-1))){%> <h3 class="title-subtext delta h-text-normal"> <%=meta.total_results%> items </h3> <% } else {%> <h2 class="title-subtext delta h-text-normal"> <%=meta.total_results%> items </h2> <% } %> </div> <%if(brandMobileBanner){ _.each(brandMobileBanner,function(mobBanner){%> <% if(mobBanner){ %> <div class="search-merch-banner"> <p class="search-merch-message"><%=mobBanner.Slot.content%></p> </div> <% } %> <%});}%> <%}%> <%}%>',this.UIModTpl["brand/no-results"]='<section class="l-row h-standardSpacing js-no-result" style="padding-bottom: 20px"> <div class="l-col-xs-12 l-col-nopadding"> <% if(Target.LPTaggingError == \'ERR-TO\'){ %> <div class="title"> <h1 class="title-text alpha js-plp-search-title" tabindex="-1"> sorry, the items didn\'t load </h1> <p class="title-subtext"> <a class="js-try-again" href="javascript:void(0);">try again</a> or refresh the page </p> </div> <% } else { %> <div class="title"> <%if(meta.autoCorrectKeyword && !(meta.autoCorrectKeyword.indexOf(meta.keyword)>-1)){%> <h1 class="title-text alpha"><span aria-hidden="true">&#147;</span><b><%=meta.autoCorrectKeyword%></b><span aria-hidden="true">&#148;</span></h1> <%}%> <h1 class="title-text alpha js-plp-search-title" tabindex="-1">no results found</h1> <%  if(searchQuery){%> <p class="title-subtext">for &ldquo;<%=searchQuery%>&rdquo;</p> <% } %> </div> <% } %> </div> </section> <section class="l-row h-standardSpacing js-noResult-category"></section> <section class="l-row h-standardSpacing"> <div class="dvm-placeholder"></div> </section> <section class="rr-carousel-full no-marg-top js-slpEmptyRec"></section> <div id="js-categoryMeta" class="l-col-xs-12 editor"></div>',this.UIModTpl["brand/plp"]='<section class=""> <div class="l-col-xs-12 l-col-nopadding"> <div class="products products-tile"> <ul class="products--list l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-3"> <% _.each(products, function(item,index) { %> <li data-id="<%=item.tcin%>" class="product"> </li> <%});%> </ul> </div> </div> </section> <% if(meta.totalPages && meta.totalPages>1) { %> <div class="pagination h-standardSpacing"> <% if(meta.currentPage==1) { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </a> <% } else { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-prev"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </a> <% } %> <div class="dropdown dropdown-above dropdown-constrained dropdown-spaced dropdown-lg" data-convert="false" data-variant="constrainedLarge" data-update="currentSelected"> <label for="pagination" class="dropdown--label is-hidden">page <%= meta.currentPage %> of <%= meta.totalPages %></label> <select id="pagination" class="dropdown--select is-hidden"> <% for(var index = 1; index <= meta.totalPages; index++) { %> <option value="<%= (index-1) %>">page <%= index %> of <%= meta.totalPages %></option> <% } %> </select> <button class="dropdown--button js-dropdown">page <%= meta.currentPage %> of <%= meta.totalPages %><span class="h-sr-only"> - shows more content</span></button> <ul class="dropdown--menu js-dropdown-menu" aria-hidden="true"> <% for(var index = 1; index <= meta.totalPages; index++) { %> <li><a class="js-dropdown-link dropdown--menu--item <% if (meta.currentPage == index) { %> active <% } %>" href="javascript:void(0)" data-value="<%= (index-1) %>">page <%= index %></a> <% } %> </li><li><a href="javascript:void(0)" class="dropdown--menu--item dropdown--menu--close js-dropdown-close">close list</a></li> </ul> </div> <% if(meta.currentPage==meta.totalPages) { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-right">next page</i> </a> <% } else { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-next"> <i class="icon icon-paginate icon-arrow-right">next page</i> </a> <% } %> </div> <% } %> <section class="l-col-xs-12 js-carousel-container carousel-container rr-carousel-full h-standardSpacing js-a-add js-lpRec"></section> <div class="plppopover" style="left: 100%; display: none" aria-hidden="true"> <div class="plppopover-heading"> <div class="plppop-back plppoptrig">back</div> </div> <div class="plppopover-contain"> <div class="plppopover-scroll" style="height: 100%"> <div class="plppopover-content"></div> </div> </div> </div> <div id="js-categoryMeta" class="l-col-xs-12 editor"></div>',this.UIModTpl}),define("views/tablet/brand/header.view",["jquery","page","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","templates/tablet/precompiled/brand"],function(e,t,n,r,i,s){var o=t.extend({subViews:{},events:{"click .js-tgtcrush":"loveThisItem"},templates:{brandHeaderTpl:_.template(s["brand/brand-header"])},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){},render:function(e){this.crushTag="slp",this.$el.html(this.templates.brandHeaderTpl(e))}}).mixin([n,r,i]);return o}),define("models/brand/brand.model",["jquery","underscore","backbone","models/mixins/list.model-mx","backboneAdvice"],function(e,t,n,r){var i=n.Model.extend({constructor:function(e,n){var r=this.parseData(e,n),e=t.extend(e,r);i.__super__.constructor.call(this,e,n)}}).mixin([r]);return i}),define("collections/brand/brand.collection",["jquery","underscore","backbone","collection","Target","models/brand/brand.model"],function(e,t,n,r,i,s){var o=n.Collection.extend({model:s,metaData:{},pageNumReg:/pageNo=[\d]/,initialize:function(){this.on("reset",this.resetMeta,this)},resetMeta:function(){this.metaData={}}});return o}),define("views/tablet/brand/plp.view",["jquery","underscore","backbone","page","Target","views/tablet/brand/plp.item.view","views/tablet/brand/header.view","collections/brand/brand.collection","templates/tablet/precompiled/brand","templates/tablet/precompiled/lpcommon","patlab.dropdown","views/mixins/searchcategory/slp-plp-navigation-mx","views/mixins/common/dvm-banner-mx","views/mixins/searchcategory/plp-DVM-mx","views/mixins/common/recommendation-view-mx","views/tablet/crush/crush-recommendation-view-mx","views/mixins/crush/crush.common.mx","text!templates/common/crush/crush-recommendations.html","views/mixins/common/dynamic-promo-mx","views/mixins/searchcategory/lp-parent-common-mx","views/mixins/common/alt-image-mx","views/mixins/common/mark-mx","firefly!brand/plp","patlab.filmstrip"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){var T=r.extend({subViewsReference:{},collection:new u,isSearchPaginationTagging:!1,variationflipTemplateModel:null,topSellingItemsHeaderText:"",topSellingItems:null,pageName:"blp",regTag:"Brand",topSellingItemsCarouselScreenWidthAndItemsToShow:[[0,3],[450,3],[600,3],[700,3],[1e3,3],[1200,3],[1400,3],[1600,3],[1800,3]],templates:{plpTpl:t.template(a["brand/plp"]),appleTermsConditions:t.template(f["browse/apple-term-conditions"]),crushRecommendationsTpl:t.template(g),recoTpl:t.template(f["common/recommendations"]),brandHeaderTpl:t.template(a["brand/brand-header"]),noResultsTpl:t.template(a["brand/no-results"])},events:{"click .bb-viewswitch":"triggerToggleView","click .bb-refine-button":"triggerShowFilters","click .auto-correct a":"routeTo","click .keyword":"redirectToRegistryPage","click div.plppop-back":"backToPlp","click .js-redirectToReviewsPage":"redirectToReviewPage","click .js-redirectToBrandPage":"redirectToBrandPage",'click [data-behavior="redirectToPDP"]':"redirectToPDP"},initializeView:function(){"use strict";var e=this;i.scrollRestoration({type:"manual",page:"lp"}),this.forceScrollfromViewJS=!1,n.Events.trigger("regV:regObj"),this.listenTo(n.Events,"regC:regObj",function(t){e.registryObj=t,e.collection.registryObj=t}),this.listenTo(n.Events,"plp:more:info",this.showMoreInfo),this.listenTo(n.Events,"vi:fiats:onFIATSOverlayDismiss",this.onFIATSOverlayDismiss),this.listenTo(n.Events,"slp:emptyView",this.emptyView),this.listenTo(n.Events,"plp:pageTagging",this.plpPageTagging);var t=i.getBrandServiceData();this.facetDelimiter=t.facetDelimiter,this.searchFacetParam=t.searchFacetParam},initializePatLab:function(){this.dropdown=new l(e("#blp"))},renderView:function(){i.TimeToFirstPaint(),this.initializePatLab()},emptyView:function(){i.TimeToFirstPaint();var e=this;t.each(this.subViewsReference,function(t,n){t.destroy(),delete e.subViewsReference[n]}),e.$el.empty()},triggerToggleView:function(e){this.parentView.subViews["views/brand/facet.view"].toggleView(e)},triggerShowFilters:function(e){this.parentView.subViews["views/brand/facet.view"].showFilters(e)},createSubViews:function(e){"use strict";var t=this;this.collection.models.forEach(function(n,r){var i=e.find('.products li[data-id="'+n.id+'"]');t.subViewsReference[r]=new s({model:n,el:i}),t.subViewsReference[r].regTag=t.regTag,t.subViewsReference[r].render()})},addHeader:function(){var t=e("#brand-header"),r=this.collection.metaData,i=new n.Model({tcin:this.plpModel.get("searchState").brandSearchTerm,type:"brand"}),s=i.cid;this.subViewsReference[s]=new o({model:i,el:t}),this.subViewsReference[s].render({meta:r,productLength:this.collection.length,brandMobileBanner:this.plpModel.get("brandMobileBanner")})},showPage:function(r){"use strict";var s,o=this,u=i.Get.TCookie("viewType"),a=this.collection.metaData.autoCorrectKeyword||this.collection.metaData.keyword,f="target://display?keywords="+a,l=e('head meta[property="al:ios:url"]');u=u||i.Get.Config("plpDefaultViewType"),i.Set.TCookie("viewType",u),a?l.length?l.attr("content",f):(s='<meta property="al:ios:url" content="'+f+'">'+'<meta property="al:ios:app_store_id" content="402742793">'+'<meta property="al:ios:app_name" content="Target">',e("head").append(s)):(e('head meta[property="al:ios:url"]').remove(),e('head meta[property="al:ios:app_store_id"]').remove(),e('head meta[property="al:ios:app_name"]').remove());var c=u!=="listView",h=this.freezeFacet;this.timestamp=r,n.Events.trigger("view:addRegistryHeader",o.registryObj);if(!this.collection.metaData.total_results||this.collection.metaData.total_results=="0")if(!h){try{var p=i.Get.Cookie("SSOE"),d=t.getVal(i,"Template.bridgeData.build_number");this.collection.metaData.total_results!=null&&TL.err(9,"service_url_"+this.serviceURL+"_window_url_"+window.location.href+"_SSOE_"+p+"_build_no_"+d)}catch(v){}e(".js-search-header").remove(),this.$el.html(this.templates.noResultsTpl({meta:this.collection.metaData,searchQuery:a||"",hasFilers:h})),o.renderBrowseCategories(".js-noResult-category")}else this.$el.empty(),this.addHeader();else{this.addHeader();var m=e(this.templates.plpTpl({products:this.collection.toJSON(),meta:this.collection.metaData,gridView:c,isGridView:c,cid:this.timestamp,searchQuery:a||"",brandMobileBanner:this.plpModel.get("brandMobileBanner"),isDesktop:i.deviceAtlas.isDesktop()}))}this.tabletSpecificLogic(h),this.collection.length&&(this.createSubViews(m),this.$el.html(m)),i.delayRendering(function(){o.initializeAfterRendering(o,a)},1e3),t.getVal(this.collection,"metaData.currentPage")&&Number(t.getVal(this.collection,"metaData.currentPage"))>1&&(this.isSearchPaginationTagging=!0),window.setTimeout(function(){e("body").css("min-height","initial")},2e3),this.onAfterPageReady()},initializeAfterRendering:function(e,t){this.addInGridDVM(),this.setMinHeight(!1)},plpPageTagging:function(e){!e||(this.obgbMsgArr=e),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),this.trackPageLoad()},tabletSpecificLogic:function(t){e("body").addClass("footerhelper"),n.Events.trigger("force:close:typeahead"),!this.collection.metaData.total_results||this.collection.metaData.total_results==="0"?(n.Events.trigger("resize:footer:fornoresult"),t||n.Events.trigger("hide:filters")):(n.Events.trigger("resize:footer:forresult"),n.Events.trigger("show:filters"))},getDynamicData:function(){try{var e=this;return this.appendPaginationMetaTags(),e.isSearchPaginationTagging?e.paginationSerachTagging():e.normalSearchTagging()}catch(t){}},normalSearchTagging:function(){try{var e=t.getVal(this.collection,"metaData.isDLP"),n={occurrences:!0};e?n.dlpSearch=!0:n.productSearches=!0;var r=this.getBaseDynamicObject(!0,n);return r}catch(i){}},paginationSerachTagging:function(){try{var e=t.getVal(this.collection,"metaData.isDLP"),n={occurrences:!0};e&&(n.dlpSearch=!0);var r=this.getBaseDynamicObject(!1,n);return r}catch(i){}},getBaseDynamicObject:function(e,n){"use strict";var r=t.getVal(this.collection,"metaData.isDLP"),s=this,o,u,a,f,l=[],c=[],h=[],p=[],d={},v=this.plpModel,m=this.collection.metaData,g=m.sort_by,y=m.keyword?m.keyword.trim():"NA";y=="NA"&&i.LPTaggingError&&(y=i.LPTaggingError,delete i.LPTaggingError);var b=this.getDynamicBsdlObj(),w=m.currentPage||"",E=v.get("facetLookup"),S=v.get("searchState")[this.searchFacetParam];S&&(f=S.split(this.facetDelimiter)),t.each(f,function(e){var t=E[e],n=t.value,r=t.facet.display_name;h.unshift([r,n].join(":")),d[r]||(d[r]=!0,p.unshift(r))}),t.each(v.get("products"),function(e,n){var r={};try{var i=t.findWhere(s.obgbMsgArr,{partNumber:e.tcin});!!s.obgbMsgArr&&!!i&&(r.ATP_OBGB=i.obgbMsg,r.ATP_fullfillment=i.shippingMethod),!e.wxsLimitedQtyeligible||(r.ATP_limitedQty=e.wxsLimitedQtyeligible),r.tcin=e.tcin,r.productTitle=e.itemAttributes.title,r.productCost=(e.priceSummary.offerPrice||{}).formattedPrice,r.promotion=e.promotionSummary.message.promotionMessageOne,r.placement=n+1,l.push(r)}catch(o){}}),u=v.get("sortOptions")[g],u=(u||g||"").toLowerCase(),a={product:"productsearch1"},c.push(a),e?!m.total_results||m.total_results&&Number(m.total_results)==0?o="brand: null":o="brand: brand results":o="brand: brand results: "+w,b.siteEvents=n,b.todaysDate=this.setTimeBsdlObj(),b.channel="brand",b.pageType="brand: brand results",b.pageName=o,b.levelTwo=o,b.levelThree=o,b.levelFour=o,b.searchTerm=y,b.searchResults=m.total_results,b.method=r?"dlp":"search",b.displayView="standard",b.searchPage="page "+w,b.products=c,b.loginStatus=i.User.isAnonymous?"not logged in and not registered":"logged in",b.searchSortMethod=u,b.operatingSystemVersion=i.deviceAtlas.os(),b.merchandisingLevelOne="non-browse",b.merchandisingLevelTwo="non-browse",i.LPPageRetry&&(b.lnkValue="timeout_tryagain",delete i.LPPageRetry),p.length>0&&(b.refineType=p.join("|").toLowerCase()),h.length>0&&(b.refineAttribute=h.join("|").toLowerCase(),b.searchTerm="refinement:"+b.searchTerm),t.isEmpty(l)&&(n.nullSearches=!0,b.searchPage="null: "+y,b.searchResults="0",delete b.searchSortMethod,delete b.searchView);if(!m.total_results||(m.total_results&&m.total_results)<=0)b.searchTerm="null: "+y;return b.productList=l,b},destroy:function(){var e=this;this.parentView.forceScrollfromViewJS=!0,t.each(this.subViewsReference,function(t,n){t.destroy(),delete e.subViewsReference[n]}),n.Events.trigger("vi:header:clearSearch");var r=!0;this.onAfterPageReady(r),this.unaffixFilters();try{googletag.pubads().clear()}catch(s){console.log("error in destroy")}i.scrollRestoration({type:"auto",page:"lp"})},onFIATSOverlayDismiss:function(e){e&&n.Events.trigger("v:fiats:refreshAddToCartBlock","PLP",e)},routeTo:function(t){t.preventDefault();var r=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");r=r.slice(0,r.lastIndexOf("/"))+e(t.currentTarget).attr("href"),n.history.navigate(r,{trigger:!0,replace:!1})},redirectToRegistryPage:function(t){t.preventDefault();var n=e(t.currentTarget),r=n.find("a").attr("href");r.indexOf("registry")&&(window.location.href="http://m.target.com"+r)},navigate:function(e,r){e.facetValue=e.facetValue?e.facetValue:encodeURIComponent(e.facets||"");var s=i.getParameterByName("kwr"),o=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),u=!e.autoCorrectKeyword||e.autoCorrectKeyword.indexOf(e.keyword)>-1?e.keyword:e.autoCorrectKeyword;o=o.slice(0,o.lastIndexOf("/"))+"/bp/"+encodeURIComponent(u)+"?"+"sortBy="+e.sort_by,o=e.facetValue?o+"&facetedValue="+e.facetValue:o,o=e.category?o+"&category="+e.category:o,o=o+"&Nao="+(t.isNaN(r)?0:r)+(s?"&kwr=y":""),o=this.updateMinAndMaxPriceParams(o),googletag.dvm=[],n.history.navigate(o,{trigger:!0,replace:!1})}}).mixin([c,h,p,d,v,m,y,b,S,w,E],{viewType:S.VIEW_TYPE_TABLET});return T}),define("models/brand/facet.model",["jquery","backbone","models/mixins/facet.model-mx"],function(e,t,n){var r=t.Model.extend({}).mixin([n]);return r}),define("text!templates/tablet/common/blp.wrap.html",[],function(){return'<section class="l-row js-plp-facet-wrap h-standardSpacing"> <div id="brand-header" class="l-col-xs-12 l-col-nopadding search-header lr-scrolling"></div> <div id="facet" class="l-sidebar-filter" data-name="views/tablet/brand/facet.view" data-parent="views/tablet/search/wrapper.shell.view"></div> <div id="blp" class="l-col-xs-flex l-col-halfpadding" data-page="brand listing page" data-name="views/tablet/brand/plp.view" data-parent="views/tablet/search/wrapper.shell.view"></div> </section> '}),define("views/tablet/brand/wrapper.shell.view",["jquery","page","text!templates/tablet/common/blp.wrap.html"],function(e,t,n){var r=t.extend({subViews:{},events:{"click .breadCrumb":"redirect","click .js-noResult-category a":"redirect","click #regHeader":"registryRedirect","click .js-try-again":"reloadPage"},templates:{slpWrapTpl:_.template(n)},constructor:function(){var n=this;t.prototype.constructor.apply(this,arguments),this.listenTo(Backbone.Events,"view:addRegistryHeader",this.addRegistryHeader),this.listenTo(Backbone.Events,"block:view:scrollcall",function(e){n.blockScrollCall=e})},initializeView:function(){},redirect:function(t){t.preventDefault(),t.stopPropagation(),this.goTo(e(t.currentTarget).attr("href"))},renderView:function(){this.$el.html(this.templates.slpWrapTpl({}))},addRegistryHeader:function(e){this.registryObj=e,this.$("#js-regHeaderWrap").remove();var t=_.template('<div id="js-regHeaderWrap" class="l-col-xs-12 l-col-nopadding"><a id="regHeader" href="javascript:void(0);" class="customreviews--text"><div class="title title-left "><span class="title-text bravo title--ratingsreviews"><%=regHeadertext%></span></div><!-- /.title --></a><hr></div>');if(!_.isEmpty(this.registryObj)&&this.registryObj.backLinkName){var n=this.registryObj.registryType;n&&n.indexOf("wish_list")>-1?this.$("#facet").before(t({regHeadertext:decodeURIComponent(this.registryObj.backLinkName)})):this.$("#facet").before(t({regHeadertext:decodeURIComponent(this.registryObj.backLinkName)})),this.blockScrollCall||this.$("#regHeader").focus()}this.blockScrollCall=!1},registryRedirect:function(t){t.preventDefault();var n="",r=decodeURIComponent(this.registryObj.backLinkUrl);r&&(r[0]=="/"?n+=r:n=n+"/"+r,location.assign(location.origin+n))},reloadPage:function(e){e.preventDefault(),Target.LPPageRetry=!0,Backbone.history.loadUrl()}});return r}),define("views/tablet/brand/facet.view",["jquery","underscore","page","Target","text!templates/common/browse/facet.html","text!templates/common/browse/facet-detail.html","models/brand/facet.model","views/mixins/common/facet-mx","views/mixins/common/queryparam-helper","views/tablet/brand/wrapper.shell.view"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({constructor:function(){n.prototype.constructor.apply(this,arguments)},model:new o,ute:"",templates:{facetTpl:i,facetDetailTpl:s},events:{},pageType:"blp",initializeView:function(){"use strict";this.listenTo(Backbone.Events,"lp:facets:expandIfChecked",this.expandFacetIfChecked)}}).mixin([u,a]);return f}),define("views/tablet/brand/adsense.view",["jquery","page","Target","views/mixins/common/adsense-mx"],function(e,t,n,r){var i=t.extend({constructor:function(){_.bindAll(this,"backfillAFS"),t.prototype.constructor.apply(this,arguments)},initializeView:function(){this.listenTo(Backbone.Events,"slp:emptyView",this.emptyView)}}).mixin([r]);return i}),define("text!templates/tablet/thematic/thematic-header.html",[],function(){return'<div class="l-col-xs-12 l-col-nopadding search-header lr-scrolling"> <div class="title"> <h1 class="title-text alpha js-plp-search-title h-text-lowercase" tabindex="-1"> <%=keyword%> </h1> </div> </div> '}),define("text!templates/tablet/thematic/plp.html",[],function(){return'<section class=""> <div class="l-col-xs-12 l-col-nopadding"> <div class="products products-tile"> <ul class="products--list l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-3"> <% _.each(products, function(item,index) { %> <li data-id="<%=item.catEntryID%>" class="product"> </li> <%});%> </ul> </div> </div> </section> <% if(meta.totalPages && meta.totalPages>1) { %> <div class="pagination h-standardSpacing"> <% if(meta.currentPage==1) { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </a> <% } else { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-prev"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </a> <% } %> <div class="dropdown dropdown-above dropdown-constrained dropdown-spaced dropdown-lg" data-convert="false" data-variant="constrainedLarge" data-update="currentSelected"> <label for="pagination" class="dropdown--label is-hidden">page <%= meta.currentPage %> of <%= meta.totalPages %></label> <select id="pagination" class="dropdown--select is-hidden"> <% for(var index = 1; index <= meta.totalPages; index++) { %> <option value="<%= (index-1) %>">page <%= index %> of <%= meta.totalPages %></option> <% } %> </select> <button class="dropdown--button js-dropdown">page <%= meta.currentPage %> of <%= meta.totalPages %><span class="h-sr-only"> - shows more content</span></button> <ul class="dropdown--menu js-dropdown-menu" aria-hidden="true"> <% for(var index = 1; index <= meta.totalPages; index++) { %> <li><a class="js-dropdown-link dropdown--menu--item <% if (meta.currentPage == index) { %> active <% } %>" href="javascript:void(0)" data-value="<%= (index-1) %>">page <%= index %></a> <% } %> </li><li><a href="javascript:void(0)" class="dropdown--menu--item dropdown--menu--close js-dropdown-close">close list</a></li> </ul> </div> <% if(meta.currentPage==meta.totalPages) { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-right">next page</i> </a> <% } else { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-next"> <i class="icon icon-paginate icon-arrow-right">next page</i> </a> <% } %> </div> <% } %> <div class="plppopover" style="left: 100%; display: none" aria-hidden="true"> <div class="plppopover-heading"> <div class="plppop-back plppoptrig">back</div> </div> <div class="plppopover-contain"> <div class="plppopover-scroll" style="height: 100%"> <div class="plppopover-content"></div> </div> </div> </div> <div id="helpful-links"></div> <div id="js-categoryMeta" class="l-col-xs-12 editor"></div> '}),define("text!templates/tablet/thematic/no-results.html",[],function(){return'<section class="l-row h-standardSpacing js-no-result" style="padding-bottom: 20px"> <div class="l-col-xs-12 l-col-nopadding"> <div class="title"> <h1 class="title-text alpha">no results found</h1> <%  if(queryParam){%> <p class="title-subtext">for &ldquo;<%=queryParam%>&rdquo;</p> <% } %> </div> </div> </section> <section class="l-row h-standardSpacing js-noResult-category"></section> <section class="l-row h-standardSpacing"> <div class="dvm-placeholder"></div> </section> <section class="rr-carousel-full no-marg-top js-slpEmptyRec"></section> '}),define("text!templates/common/helpful-links.html",[],function(){return'<div class="h-border-top h-tightSpacingTop h-tightSpacingLeft h-tightSpacingRight"> <% _.each(attribute_groups, function(item,index) { %> <div class="h-standardSpacing"> <h4 class="h-text-lowercase"><%=item.heading == \'Other Options\' ? \'Related Searches\' : item.heading%></h4> <ul class="products--list l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-3"> <% _.each(item.links, function(child,index) { %> <li> <a href="<%=child.url%>" class="h-text-grayDarkest h-text-lowercase link-underline js-redirectToTheLink"><%=child.anchor_text%></a> </li> <%});%> </ul> </div> <%});%> </div> '}),define("text!templates/common/plp-messages.html",[],function(){return'<div id="basic_messages" class="single section-margins" style="margin: 0px"> <div class="messages_icon_container"> <div class="message-icon_container"></div> <div id="bb-message-details" class="messages-detail_container"> <div class="preorderMessage messageInfo" style="padding-top: 3px"><%=message%></div> </div> </div> </div>'}),define("text!templates/common/product-front-face.html",[],function(){return'<%var ratingPercentage=( item.rating/5)*100%> <div class="product--link" itemprop="itemListElement" itemscope itemtype="http://schema.org/OfferCatalog"> <%if(item.callOuts){%> <div class="details--ribbon"> <% if(item.callOuts.toLowerCase().indexOf("only at target")!=-1) { %> <span class="h-sr-only">only at Target</span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> only at <img class="icon-bullseye-sm" src="<%=img_domain%>/images/icons/bullseye-black.svg" alt="Target"> </span> <% } else if(item.callOuts.toLowerCase().indexOf("new at target")!=-1) { %> <span class="h-sr-only">new at Target</span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> new at <img class="icon-bullseye-sm" src="<%=img_domain%>/images/icons/bullseye-black.svg" alt="Target"> </span> <% } %> </div> <%}%> <h3> <a href="<%=item.articleLink%>" class="js-redirect-to-pdp js-altImageChange <%if(item.sponsored){%>js-dropClickBeacon<%}%> product--image" data-tcin="<%=item.tcin%>"> <img class="lazyload js-alreadyViewedAlt js-orgImg" data-src="<%=Target.Get.Config(\'scene7URL\')%><%= item.img %>?wid=360&hei=360&qlt=80&fmt=pjpeg" alt="<%= item.title%>" <%if(Target.Template.bridgeData.page_name == \'mSearchResult\'){if(isLast){%> onload="Target.endTime(Target.Template.bridgeData.page_name)" <%}}%> > </a> </h3> <div class="details details-plp"> <div class="price"> <span <% if(item.showRedPrice) {%> class="h-text-red" <% }%> data-eyebrow="<%=item.eyeBrow%>"> <%= item.priceText %> </span> <% if(item.saveStory) { %> <span class="price--saveStory h-text-lowercase"> <%= item.saveStory %> </span> <% } %> </div> <%if(item.ppunitText){%> <span class="price--perUnit"> <%=item.ppunitText%> </span> <%}%> <p class="details--title"> <a href="<%=item.articleLink%>" class="js-redirect-to-pdp <%if(item.sponsored){%>js-dropClickBeacon<%}%> h-display-block" data-tcin="<%=item.tcin%>"> <%if(item.mmbv){%> <span class="details--format"> <%=item.mmbv%> </span> <%}%> <%=item.truncatedTitle%> <span class="h-sr-only js-alreadyViewed is-hidden">already viewed</span> </a> </p> <% var showReviews = (item.totalReviews > 0); %> <% if( (item.rating && showReviews) || (item.swatchImgArr && item.swatchImgArr.length) ) {%> <div class="details--ratingSwatch"> <%if(item.rating && showReviews){%> <div class="ratings-block <%if(item.swatchImgArr && item.swatchImgArr.length){%> h-border-right <% }%>"> <div class="ratings ratings-sm h-float-left"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width:<%=ratingPercentage%>%"> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" alt="<%=item.rating%> out of 5 stars" aria-hidden="true"> <span class="h-sr-only"><%=item.rating%> out of 5 stars</span> </div> </div> <span class="ratings--count"> <span class="h-sr-only"><%=item.totalReviews%> reviews </span> <span aria-hidden="true"><%=item.totalReviews%></span> </span> </div> <% } %>  <%if (item.swatchImgArr && item.swatchImgArr.length) { %> <div class="product--swatch"> <% _.each(item.swatchImgArr,function(obj, index) { %> <% if(index < item.swatchCountPLP) { %> <img src="" data-src="<%=obj.url%>&qlt=80&fmt=pjpeg" title="<%=obj.name%>" class="product--swatch-color lazyload"> <% } %> <% }) %> <% if(item.swatchImgArr.length > item.swatchCountPLP) { %> <img src="<%=img_domain%>/images/icons/plus-filled.svg" alt="more colors available" role="link" class="product--swatch-more"> <% } %> </div> <%}%> </div> <% } %> <div class="details--messaging"> <% if (item.eyeBrow || item.promotions || item.shipsFreeItem) { %> <ul class="h-text-red"> <% if(item.shipsFreeItem){%> <li>ships free</li> <%}%> <% if(item.promotions){%> <li><%= item.promotions %></li> <%}%> </ul> <% } %> <% if (item.backOderMessage) { %> <p class="h-text-orangeDark"> <%=item.backOderMessage%> </p> <%}%>  <% if (item.subscriptionItems) { %> <p class="h-text-grayDark"> subscription eligible </p> <% } %>  <% if(item.wxsLimitedQtyMsg){ %> <div class="h-text-orangeDark h-text-lowercase"><%=item.wxsLimitedQtyMsg%></div> <%}%> <div id="js-obgbMessage_<%=item.tcin%>"> <span class="h-text-greenDark js-obgbMsg"></span><span class="js-obgbShipping"></span> </div> <%if(item.sponsored){%> <p class="h-text-xs h-tightSpacingTop">sponsored</p> <%}%> </div> <%if(item.atcText){%> <div class="details--button js-details--button <%if(item.hlItem){%>is-hidden<%}%>"> <%if(item.reg_active){%> <button class="btn btn-primary btn-sm <%= item.flagFlippable %> <%if(item.sponsored){%>js-dropClickBeacon<%}%>" aria-label="<%= item.title%> <%= item.atcText%>" data-tcin="<%=item.tcin%>"> <%=item.atcText%> </button> <%}else{%>  <% if(item.isinStock) { %> <button class="btn btn-primary btn-sm <%if(item.sponsored){%>js-dropClickBeacon<%}%> <%= item.flagFlippable %> test-addToCartButton" data-store="<%=item.listStoreEligible%>" data-tcin="<%=item.tcin%>" aria-label="<%= item.atcReadTxt%>"> <%=item.atcText %> </button> <%}else if(item.viewInPdp){%> <button data-href="<%=item.articleLink%>" class="btn btn-primary btn-sm js-redirect-to-pdp <%if(item.sponsored){%>js-dropClickBeacon<%}%> test-addToCartButton" data-tcin="<%=item.tcin%>" aria-label="<%= item.title%> <%= item.atcText%>"> <%=item.atcText %> </button> <% }else{%> <button class="btn is-disabled btn-sm test-addToCartButton" disabled="disabled" aria-label="<%= item.title%> <%=item.atcText %>"> <%=item.atcText %> </button> <% }\n            }%> <div class="popover-demo h-float-right" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites" aria-label="<%= \'love \' + (item.title || \'this item\') + \' to keep tabs on it\' %>" data-title="<%= item.title %>" data-crush-tcin="<%=item.tcin%>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </div> <%}%> </div> <% if(actionDropdownTpl) {%> <%=actionDropdownTpl%> <% } %> </div> <%if(Target.Get.Config(\'markViewed\')() != \'3\'){%> <div class="js-alreadyViewed is-hidden popover-demo flipIcon" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title=""> <%if(Target.Get.Config(\'markViewed\')() != \'2\'){%> <svg focusable="false" xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21" class="h-display-block"> <path fill="#FFF" d="M8.9 6.9L0 21.5h21V0"/> <path fill="#D6D6D6" d="M3.2 0C1.5 0 0 1.5 0 3.2V21L21 0H3.2z"/> <path fill="#888" d="M15.1 17.5c-.2 0-.3-.1-.4-.2l-1.8-1.8c-.2-.2-.2-.6 0-.8.2-.2.6-.2.8 0L15 16l3.1-3.9c.2-.2.5-.3.8-.1.2.2.3.5.1.8l-3.5 4.4c-.1.2-.2.3-.4.3z"/> </svg> <%}else{%> <svg focusable="false" xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 17 17" class="h-display-block"> <polygon fill="#FFF" points="7.19 5.56 0 17 17 17 17 0 7.19 5.56"/> <path fill="#949494" class="cls-2" d="M2.62,0A2.62,2.62,0,0,0,0,2.62V17L17,0Z"/> </svg> <%}%> </div> <%}else{%> <span class="js-alreadyViewed is-hidden viewed-text" aria-hidden="true"> viewed </span> <%}%> <div class="modal fade js-product-desc-modal" id="product-desc-modal" tabindex="-1" role="dialog" aria-hidden="true"> <div class="backdrop"></div> <div class="modal-dialog"> <div class="modal-content modal-container scContent"> <div class="modal-header"> <h2 class="h-text-grayDarkest">item description</h2> </div> <div class="modal-body product-desc-content"> <div class="js-product-desc-content"> <% if(item.brand) { %> <div class="productbrand">Brand: <a href="<%=item.brandUrl%>" data-brand="<%=item.brand%>" class="h-text-underline h-text-grayDarkest js-redirectToBrandPage"><%=item.brand %></a></div> <% } %> <% if(item.description) { %> <div class="productdesc"><%= item.description%></div> <% } %> <% if(item.top_reviews && item.top_reviews.length > 0) { %> <h3 class="h-text-grayDarkest h-tightSpacingTop">top reviews</h3> <div class="product--reviews-block"> <% _.each(item.top_reviews, function(val,key){\n                        var ratingPercentage=(val.rating/5)*100;\n                        %> <% if(val && val.review_text) { %> <div class="ratings-block"> <div class="ratings ratings-xs h-float-left h-tinySpacingTop"> <img src="<%=img_domain%>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width:<%=ratingPercentage%>%"> <img src="<%=img_domain%>/images/icons/star-rating-on.svg" class="ratings-img" role="link" alt="<%=val.rating%> out of 5 stars"> </div> </div> <span class="ratings--reviewer h-tinySpacingLeft h-text-grayDark h-text-sm"> <%=val.user_nickname%> - <%= val.last_moderated_time %> </span> </div> <div class="product-reviews--desc h-float-clear"><%=Target.stringTruncate(val.review_text,150,147)%> <% if(val.review_text.length > 150) { %> <a href="javascript:;" aria-label="read full review by <%=val.user_nickname%>" data-partnumber="<%=item.tcin%>" class="h-text-underline h-tightSpacingLeft js-redirectToReviewsPage" data-dismiss="modal">more</a> <% } %> </div> <% } %> <% }) %> </div> <% } %> <div class="h-standardSpacing"> <button class="btn btn-primary btn-lg btn-block" data-link="<%=item.articleLink%>" data-behavior="redirectToPDP" data-dismiss="modal">full item details</button> <button class="btn btn-default btn-lg btn-block js-product-desc-modal-close" data-dismiss="modal">done</button> </div> </div> </div> <a href="#" class="icon icon-close-circle js-product-desc-modal-close" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> </div> </div> </div> '}),define("text!templates/tablet/common/variation.html",[],function(){return'<div class="sbc-header-wrapper add-heading"> </div> <%if(varObj["espItem"]){%> <div id="SfsWrapper" class="pdp-esp-wrapper"> <div class="form form-checkbox"> <input id="warranty_service" class="form--control esp-custom-chbx" type="checkbox" value="service" data-behavior="changeCheckBoxColor"> <label for="warranty_service" class="form--label"> <span class="form--text"><%=varObj.espItem.espDescription%></span> <span class="form--subtext"><span class="price"><%=varObj.espItem.espPrice%> </span><a href="#" class="learnmore-link link-underline" data-behavior="modal" data-target="#pdpModelId" data-event="v:model:showEspContent">See plan details</a></span> </label> </div> </div> <%}%>  <%if(varObj.variationCount){%> <div class="js-carousel-container carousel-container uim-pr-var variator--pdp"> <%=vPrimaryTpl({ "varObj":varObj, "primary":true})%> </div> <%}else{%> <div class="pre-order-margin"> <%}%> <%if(varObj.variationCount>1){%> <div class="js-carousel-container carousel-container uim-sec-var h-text-lowercase variator--pdp"> <%=vSecondaryTpl({ "varObj":varObj, "primary":false})%> </div> <%}%> <div class="add-item-wrapper h-standardSpacingTop"> </div> <%if(appleTnC){%> <div class="js-appleTnC h-tightSpacingTop"> </div> <%}%> </div>'}),define("text!templates/common/browse/tile-action-dropdown.html",[],function(){return'<div class="js-list-action" aria-hidden="<%=aria_hidden%>" style="visibility: <%=visibility%>"> <div class="dropdown dropdown-below dropdown-sm dropdown-constrained product--tileAction h-zeroMargin" data-variant="constrainedSmall" data-update="none"> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-dropdown js-action-dropdown-over" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title="" data-update="none" aria-label="more options for <%=title%> - shows content" data-title=""> <i class="icon icon-arrow-down icon-paginate"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path fill="#666666" d="M16 25L0 9l2-2 14 14.063L30 7l2 2z"/></svg> </i> </button> <ul class="dropdown--menu js-dropdown-menu"> <% _.each(links,function(link) { %> <li> <a aria-label="<%=link.ally%>" class="dropdown--menu--item dropdown--link js-dropdown-link <%= link.jsClass %>" <% if(link.behavior) { %> data-behavior="<%=link.behavior%>" <% } %> href="<%=link.href %>" target="_blank"><%=link.label %></a> </li> <% }); %> <li><a href="#" class="dropdown--menu--item dropdown--menu--close js-dropdown-close">close list</a></li> </ul> </div> </div> '}),define("views/tablet/thematic/plp.item.view",["jquery","underscore","backbone","page","Target","views/mixins/searchcategory/slp-ph-tab-mx","views/mixins/searchcategory/plp-slp-common-mx","views/mixins/variation-select-mx","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","text!templates/common/plp-messages.html","text!templates/common/product-front-face.html","text!templates/tablet/common/selectOptionOverlay.html","text!templates/tablet/common/variation-primary.html","text!templates/tablet/common/variation.secondary.html","text!templates/tablet/common/variation.html","text!templates/tablet/common/addtocart-all.html","text!templates/tablet/common/addToBundle.html","text!templates/tablet/common/esp-details.html","text!templates/tablet/common/variation-header.html","text!templates/tablet/common/fiats-find-store.html","text!templates/tablet/common/find-in-store.html","text!templates/tablet/common/global-errors.html","text!templates/common/browse/tile-action-dropdown.html","templates/tablet/precompiled/common","patlab.modal","patlab.affix"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){var N=r.extend({templates:{prodFaceFrontTpl:t.template(h),plpMessagesTpl:t.template(c),selectOptionOverlayTpl:t.template(p),actionDropdownTpl:t.template(T),globalErrorTpl:t.template(x)},itemInfoTpl:{variationPrimaryTpl:t.template(d),variationTpl:t.template(m),variationSecondaryTpl:t.template(v),addtocartTpl:t.template(g),addtocartAllTpl:t.template(g),addToBundleTpl:t.template(y),espDetailsTpl:t.template(b),headerTpl:t.template(w),fiatsFindStoreTpl:t.template(E),findinStoreTpl:t.template(S)},renderView:function(){},isSearchPaginationTagging:!1,variationflipTemplateModel:null,constructor:function(){r.prototype.constructor.apply(this,arguments)},events:{"hidden.bs.modal #block-ATC":"deleteModal","click button.flip-plp-cart-btn, .js-dropdown-registry":"flipProductInfo","click a.addcarthook:not(.disabled),button.plp-cart-btn:not(.flip-plp-cart-btn)":"flipProductInfo","click .plpAppleGiftCardTnCMoreLink":"moreInfo","click a.addbundlehook,a.article-link, .js-redirect-to-pdp":"routeToDetailPage","click .flip-rec-cart-btn":"recProductInfo"},topSellingItemsHeaderText:"",topSellingItems:null,topSellingItemsCarouselScreenWidthAndItemsToShow:[[0,3],[450,3],[600,3],[700,3],[1e3,3],[1200,3],[1400,3],[1600,3],[1800,3]],initializeView:function(){var e=this;this.listenTo(this,"v:var:firstpaint",this.saveVariationId),this.listenTo(this,"v:var:variationselected",this.saveVariationId),this.listenTo(this,"v:var:atcPainted",this.showMessages),this.listenTo(this,"v:var:alert",this.showCartWarning),this.crushTag="slp"},submitFiatsForm:function(t){this.stopAll(t),e("#fiatsForm").submit()},render:function(){var e=this.model.toJSON();e.swatchImgArr.length===1&&(e.swatchImgArr.length=0),this.$el.html(this.templates.prodFaceFrontTpl({item:this.model.toJSON(),actionDropdownTpl:""}))},destroy:function(){this.stopListening(),this.undelegateEvents(),this.remove(),e("a#titleLink").trigger("click")}}).mixin([s,o,u,a,f,l]);return N}),define("views/tablet/thematic/thematic.view",["jquery","underscore","backbone","page","Target","text!templates/tablet/thematic/thematic-header.html","text!templates/tablet/thematic/plp.html","text!templates/tablet/thematic/no-results.html","text!templates/common/helpful-links.html","views/tablet/thematic/plp.item.view","views/mixins/searchcategory/slp-plp-navigation-mx","patlab.dropdown","views/mixins/common/alt-image-mx","views/mixins/common/mark-mx","firefly!thematic/thematic"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=r.extend({css:["/css/patlab/browse.css"],isSearchPaginationTagging:!1,subViewsReference:{},pageName:"tlp",regTag:"TLP",templates:{plpTpl:t.template(o),thematicHeaderTpl:t.template(s),noResultsTpl:t.template(u),helpfulLinksTpl:t.template(a)},events:{"click .js-redirectToTheLink":"redirectToTheLink"},initializeView:function(){"use strict";this.listenTo(n.Events,"c:tgtTlp:items",this.showPage),this.listenTo(n.Events,"plp:pageTagging",this.plpPageTagging)},initializePatLab:function(){this.dropdown=new c(e("#tlp"))},renderView:function(){this.initializePatLab()},createSubViews:function(n){"use strict";var r=this;n.models.forEach(function(n,i){var s=e('.products li[data-id="'+t.getVal(n,"attributes.catEntryID")+'"]');r.subViewsReference[i]=new f({model:n,el:s}),r.subViewsReference[i].render()})},showPage:function(r){"use strict";var i=this;this.collection=r,e(".TGTloading").hide();if(this.collection.metaData.seoPageHeader){var s=this.collection.metaData.seoPageHeader;s.title?e("head title").html(s.title):"",s.meta_description?e("meta[name='description']").attr("content",s.meta_description):"",s.meta_keywords?e("meta[name='keywords']").attr("content",s.meta_keywords):"",s.robots_meta_tag?e("meta[name='robots']").attr("content",s.robots_meta_tag):"",s.canonical_url?e("link[rel='canonical']").attr("href",s.canonical_url):""}this.collection.length==0?(this.$el.html(this.templates.noResultsTpl(t.isEmpty(this.collection.metaData)?{queryParam:""}:this.collection.metaData)),i.renderBrowseCategories(".js-noResult-category")):(e("#thematic-header").html(this.templates.thematicHeaderTpl(this.collection.metaData)),this.$el.html(this.templates.plpTpl({products:this.collection.toJSON(),meta:this.collection.metaData})),this.collection.helpfulLinks&&this.collection.helpfulLinks!=null&&e("#helpful-links").html(this.templates.helpfulLinksTpl(this.collection.helpfulLinks)),this.createSubViews(this.collection),t.deferImage(this.$el)),t.getVal(this.collection,"metaData.currentPage")&&Number(t.getVal(this.collection,"metaData.currentPage"))>1&&(this.isSearchPaginationTagging=!0),e(".js-plp-search-title").attr("tabindex",-1).focus(),n.Events.trigger("lp:show:altImage",this.subViewsReference)},plpPageTagging:function(e){!e||(this.obgbMsgArr=e),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),this.trackPageLoad()},getDynamicData:function(){try{var e=this;return this.appendPaginationMetaTags(),e.isSearchPaginationTagging?e.paginationSerachTagging():e.normalSearchTagging()}catch(t){}},normalSearchTagging:function(){try{var e={occurrences:!0,productSearches:!0},t=this.getBaseDynamicObject(!0,e);return t}catch(n){}},paginationSerachTagging:function(){try{var e={occurrences:!0},t=this.getBaseDynamicObject(!1,e);return t}catch(n){}},getBaseDynamicObject:function(e,n){"use strict";var r=this,s,o,u,a,f=[],l=[],c=[],h=[],p={},d=this.collection,v=this.collection.metaData,m=v.sort_by,g=v.keyword?v.keyword.trim():"NA",y=this.getDynamicBsdlObj(),b=v.currentPage||"",w=this.collection.facetMetadata,E="";E&&(a=E.split(this.facetDelimiter));var S=t.map(w,function(e){return e.facetName}),x=t.object(S,w),T="",N="",C;t.isEmpty(x)||t.each(a,function(e){if(e.indexOf(":")==-1)return;C=e.split(":");var t=x[C[0]].displayName;T+=t+"|",N+=t+":"+C[1]+"|"}),T=T.substring(0,T.lastIndexOf("|")),N=N.substring(0,N.lastIndexOf("|"));var k={};k.refinementType=T,k.refinementAttribute=N,k.term=g,t.each(d.models,function(e,n){e=e.attributes;var i={};try{var s=t.findWhere(r.obgbMsgArr,{partNumber:e.tcin});!!r.obgbMsgArr&&!!s&&(i.ATP_OBGB=s.obgbMsg,i.ATP_fullfillment=s.shippingMethod),!e.wxsLimitedQtyeligible||(i.ATP_limitedQty=e.wxsLimitedQtyeligible),i.tcin=e.tcin,i.productTitle=e.title,i.productCost=e.priceText,i.promotion="",i.placement=n+1,f.push(i)}catch(o){}}),o="relevance",o=(o||m).toLowerCase(),u={product:"productsearch1"},l.push(u),e?!v.total_results||v.total_results&&Number(v.total_results)==0?s="thematic: null":s="thematic: thematic results":s="thematic: thematic results: "+b,t.extend(y,{siteEvents:n,todaysDate:this.setTimeBsdlObj(),channel:"thematic",pageType:"thematic: thematic results",pageName:s,levelTwo:s,levelThree:s,levelFour:s,searchTerm:g,searchResults:v.total_results+"",method:"thematic",displayView:"standard",searchPage:"page "+b,products:l,loginStatus:i.User.isAnonymous?"not logged in and not registered":"logged in",searchSortMethod:o,operatingSystemVersion:i.deviceAtlas.os(),merchandisingLevelOne:"non-browse",merchandisingLevelTwo:"non-browse",refinement:k});var L=d?d.get("lnk"):"";L&&L!=""?y.lnkValue=L:"";var A=d?d.guestSearchData:{};y.guestSearchTerm=A&&A.guestSearchTerm||"",y.searchMethod=A&&A.searchMethod||"",y.keywordTransform=A&&A.keywordTransform||"",h.length>0&&(y.refineType=h.join("|").toLowerCase()),c.length>0&&(y.refineAttribute=c.join("|").toLowerCase(),y.searchTerm="refinement:"+y.searchTerm),t.isEmpty(f)&&(n.nullSearches=!0,y.searchPage="null: "+g,y.searchResults="0",delete y.searchSortMethod,delete y.searchView);if(!v.total_results||(v.total_results&&v.total_results)<=0)y.searchTerm="null: "+g;return y.productList=f,y},navigate:function(e,t){e.facetValue=e.facetValue?e.facetValue:e.facets;var r=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),i=e.queryParam;r=r.slice(0,r.lastIndexOf("/"))+"/th/"+encodeURIComponent(i),r=r+"?start="+t,googletag.dvm=[],n.history.navigate(r,{trigger:!0,replace:!1})}}).mixin([l,d,h,p],{viewType:d.VIEW_TYPE_TABLET});return v}),define("text!templates/tablet/common/tlp.wrap.html",[],function(){return'<section class="l-row js-plp-facet-wrap h-standardSpacing"> <div id="thematic-header" class="l-col-xs-12 l-col-nopadding search-header lr-scrolling"></div> <div id="tlp" class="l-col-xs-flex l-col-halfpadding" data-page="thematic listing page" data-name="views/tablet/thematic/thematic.view" data-parent="views/tablet/thematic/wrapper.shell.view"></div> </section> '}),define("views/tablet/thematic/wrapper.shell.view",["jquery","page","text!templates/tablet/common/tlp.wrap.html"],function(e,t,n){var r=t.extend({subViews:{},events:{"click .breadCrumb":"redirect","click .js-noResult-category a":"redirect"},templates:{slpWrapTpl:_.template(n)},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){},redirect:function(t){t.preventDefault(),t.stopPropagation(),this.goTo(e(t.currentTarget).attr("href"))},renderView:function(){this.$el.html(this.templates.slpWrapTpl({}))}});return r}),define("views/tablet/promo/plp.item.view",["jquery","underscore","backbone","page","Target","views/mixins/searchcategory/slp-ph-tab-mx","views/mixins/searchcategory/plp-slp-common-mx","views/mixins/variation-select-mx","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","views/mixins/common/registry-view-mx","templates/tablet/precompiled/lpcommon","firefly!shared/plp-item","patlab.modal","patlab.affix"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=r.extend({templates:{prodFaceFrontTpl:t.template(h["common/product-front-face"]),plpMessagesTpl:t.template(h["common/plp-messages"]),selectOptionOverlayTpl:t.template(h["common/selectOptionOverlay"]),actionDropdownTpl:t.template(h["browse/tile-action-dropdown"]),globalErrorTpl:t.template(h["common/global-errors"])},itemInfoTpl:{variationPrimaryTpl:t.template(h["common/variation-primary"]),variationTpl:t.template(h["common/variation"]),variationSecondaryTpl:t.template(h["common/variation.secondary"]),addtocartTpl:t.template(h["common/addtocart-all"]),addtocartAllTpl:t.template(h["common/addtocart-all"]),addToBundleTpl:t.template(h["common/addToBundle"]),espDetailsTpl:t.template(h["common/esp-details"]),headerTpl:t.template(h["common/variation-header"]),fiatsFindStoreTpl:t.template(h["common/fiats-find-store"]),findinStoreTpl:t.template(h["common/find-in-store"])},renderView:function(){},isSearchPaginationTagging:!1,variationflipTemplateModel:null,constructor:function(){r.prototype.constructor.apply(this,arguments)},events:{"hidden.bs.modal #block-ATC":"deleteModal",'click [data-behavior="productsDescReviewModal"]':"productsDescReviewModal",'click .js-product-desc-modal [data-dismiss="modal"]':"closeDescModal","click button.flip-plp-cart-btn, .js-dropdown-registry":"flipProductInfo","click a.addcarthook:not(.disabled),button.plp-cart-btn:not(.flip-plp-cart-btn)":"flipProductInfo","click .plpAppleGiftCardTnCMoreLink":"moreInfo","click a.addbundlehook,a.article-link, .js-redirect-to-pdp":"routeToDetailPage","click .flip-rec-cart-btn":"recProductInfo"},topSellingItemsHeaderText:"",topSellingItems:null,topSellingItemsCarouselScreenWidthAndItemsToShow:[[0,3],[450,3],[600,3],[700,3],[1e3,3],[1200,3],[1400,3],[1600,3],[1800,3]],initializeView:function(){var e=this;this.listenTo(this,"renderCarousel",this.renderTopSellingItems),this.listenTo(this,"v:var:firstpaint",this.saveVariationId),this.listenTo(this,"v:var:variationselected",this.saveVariationId),this.listenTo(this,"v:var:atcPainted",this.showMessages),this.listenTo(this,"v:var:alert",this.showCartWarning),this.crushTag="prlp"},submitFiatsForm:function(t){this.stopAll(t),e("#fiatsForm").submit()},render:function(){var e=this.model.toJSON(),t=this;e.swatchImgArr.length===1&&(e.swatchImgArr.length=0),this.$el.html(this.templates.prodFaceFrontTpl({item:this.model.toJSON(),actionDropdownTpl:this.getActionDropdownTpl()})),setTimeout(function(){i.util.tooltip("more options",t.$el,".js-action-dropdown-over")},0)},destroy:function(){this.stopListening(),this.undelegateEvents(),this.remove(),e("a#titleLink").trigger("click")}}).mixin([s,o,u,a,f,l,c,p],{viewType:p.VIEW_TYPE_TABLET});return d}),define("templates/tablet/precompiled/promo",[],function(){return this.UIModTpl=this.UIModTpl||{},this.UIModTpl["promo/no-results"]='<section class="l-row h-standardSpacing js-no-result" style="padding-bottom: 20px"> <div class="l-col-xs-12 l-col-nopadding"> <% if(Target.LPTaggingError == \'ERR-TO\'){ %> <div class="title"> <h1 class="title-text alpha js-plp-search-title" tabindex="-1"> sorry, the items didn\'t load </h1> <p class="title-subtext"> <a class="js-try-again" href="javascript:void(0);">try again</a> or refresh the page </p> </div> <% } else { %> <div class="title"> <%if(meta.autoCorrectKeyword && !(meta.autoCorrectKeyword.indexOf(meta.keyword)>-1)){%> <h1 class="title-text alpha"><span aria-hidden="true">&#147;</span><b><%=meta.autoCorrectKeyword%></b><span aria-hidden="true">&#148;</span></h1> <%}%> <h1 class="title-text alpha js-plp-search-title" tabindex="-1">no results found</h1> <%  if(searchQuery){%> <p class="title-subtext">for &ldquo;<%=searchQuery%>&rdquo;</p> <% } %> </div> <% } %> </div> </section> <section class="l-row h-standardSpacing js-noResult-category"></section> <section class="l-row h-standardSpacing"> <div class="dvm-placeholder"></div> </section> <section class="rr-carousel-full no-marg-top js-slpEmptyRec"></section> <div id="js-categoryMeta" class="l-col-xs-12 editor"></div>',this.UIModTpl["promo/plp"]='<section class=""> <div class="l-col-xs-12 l-col-nopadding"> <div class="products products-tile"> <ul class="products--list l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-3"> <% _.each(products, function(item,index) { %> <li data-id="<%=item.tcin%>" class="product"> </li> <%});%> </ul> </div> </div> </section> <% if(meta.totalPages && meta.totalPages>1) { %> <div class="pagination h-standardSpacing"> <% if(meta.currentPage==1) { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </a> <% } else { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-prev"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </a> <% } %> <div class="dropdown dropdown-above dropdown-constrained dropdown-spaced dropdown-lg" data-convert="false" data-variant="constrainedLarge" data-update="currentSelected"> <label for="pagination" class="dropdown--label is-hidden">page <%= meta.currentPage %> of <%= meta.totalPages %></label> <select id="pagination" class="dropdown--select is-hidden"> <% for(var index = 1; index <= meta.totalPages; index++) { %> <option value="<%= (index-1) %>">page <%= index %> of <%= meta.totalPages %></option> <% } %> </select> <button class="dropdown--button js-dropdown">page <%= meta.currentPage %> of <%= meta.totalPages %><span class="h-sr-only"> - shows more content</span></button> <ul class="dropdown--menu js-dropdown-menu" aria-hidden="true"> <% for(var index = 1; index <= meta.totalPages; index++) { %> <li><a class="js-dropdown-link dropdown--menu--item <% if (meta.currentPage == index) { %> active <% } %>" href="javascript:void(0)" data-value="<%= (index-1) %>">page <%= index %></a> <% } %> </li><li><a href="javascript:void(0)" class="dropdown--menu--item dropdown--menu--close js-dropdown-close">close list</a></li> </ul> </div> <% if(meta.currentPage==meta.totalPages) { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-right">next page</i> </a> <% } else { %> <a class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-next"> <i class="icon icon-paginate icon-arrow-right">next page</i> </a> <% } %> </div> <% } %> <section class="l-col-xs-12 js-carousel-container carousel-container rr-carousel-full h-standardSpacing js-a-add js-lpRec"></section> <div class="plppopover" style="left: 100%; display: none" aria-hidden="true"> <div class="plppopover-heading"> <div class="plppop-back plppoptrig">back</div> </div> <div class="plppopover-contain"> <div class="plppopover-scroll" style="height: 100%"> <div class="plppopover-content"></div> </div> </div> </div> <div id="js-categoryMeta" class="l-col-xs-12 editor"></div>',this.UIModTpl["promo/promo-header"]='<section class="js-carousel-container carousel-container rr-carousel-full h-standardSpacing js-a-title js-lpRec"></section> <div class="title"> <h1 class="h-text-red title-text alpha js-plp-search-title" tabindex="-1"> <%=offerName%> </h1> </div> <% if(!productLength){ %> <div class="title"> <h2 class="title-subtext delta h-text-normal h-text-orangeDark h-tinySpacingTop" aria-atomic="true" and aria-live="polite"> 0 matching results. Remove filters to find items. </h2> </div> <%}else{%> <div class="title"> <p class="title-subtext delta h-text-normal"> <span><%=meta.total_results%> items</span> <a href="javascript:void(0);" class="js-offer-details"> <span class="h-text-underline">offer details</span> <span class="h-sr-only a11y-text-toggle">- shows more content</span> </a> </p> </div> <%}%> <div class="modal fade js-offer-details-modal" id="offer-details-modal" tabindex="-1" role="dialog" aria-hidden="true"> <div class="backdrop"></div> <div class="modal-dialog"> <div class="modal-content modal-container scContent"> <div class="modal-header" tabindex="-1"> <h2 class="h-text-grayDarkest h-tightSpacingTop">Offer Details</h2> </div> <div class="modal-body product-desc-content"> <div class="productdesc"><%=offerDetails%></div> </div> <a href="#" class="icon icon-close-circle" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> </div> </div> </div>',this.UIModTpl}),define("views/tablet/promo/header.view",["jquery","page","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","templates/tablet/precompiled/promo"],function(e,t,n,r,i,s){var o=t.extend({subViews:{},events:{"click .js-offer-details":"offerDetailsModal"},templates:{promoHeaderTpl:_.template(s["promo/promo-header"])},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){},render:function(e){this.crushTag="slp",this.$el.html(this.templates.promoHeaderTpl(e))},offerDetailsModal:function(e){var t=this;this.stopAll(e),this.$(".js-offer-details-modal").modal({show:!0,backdrop:!0}),this.$(".js-offer-details-modal").on("hidden.bs.modal",function(e){t.closeOfferDetailsModal(e)})},closeOfferDetailsModal:function(t){window.setTimeout(function(){e(".js-offer-details").focus()},0)}}).mixin([n,r,i]);return o}),define("models/promo/promo.model",["jquery","underscore","backbone","models/mixins/list.model-mx","backboneAdvice"],function(e,t,n,r){var i=n.Model.extend({constructor:function(e,n){var r=this.parseData(e,n),e=t.extend(e,r);i.__super__.constructor.call(this,e,n)}}).mixin([r]);return i}),define("collections/promo/promo.collection",["jquery","underscore","backbone","collection","Target","models/promo/promo.model"],function(e,t,n,r,i,s){var o=n.Collection.extend({model:s,metaData:{},pageNumReg:/pageNo=[\d]/,initialize:function(){this.on("reset",this.resetMeta,this)},resetMeta:function(){this.metaData={}}});return o}),define("views/tablet/promo/plp.view",["jquery","underscore","backbone","page","Target","views/tablet/promo/plp.item.view","views/tablet/promo/header.view","collections/promo/promo.collection","templates/tablet/precompiled/promo","templates/tablet/precompiled/lpcommon","patlab.dropdown","views/mixins/searchcategory/slp-plp-navigation-mx","views/mixins/common/dvm-banner-mx","views/mixins/searchcategory/plp-DVM-mx","views/mixins/common/recommendation-view-mx","views/tablet/crush/crush-recommendation-view-mx","views/mixins/crush/crush.common.mx","text!templates/common/crush/crush-recommendations.html","views/mixins/common/dynamic-promo-mx","views/mixins/searchcategory/lp-parent-common-mx","views/mixins/common/alt-image-mx","views/mixins/common/mark-mx","patlab.filmstrip","firefly!promo/plp"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){var T=r.extend({subViewsReference:{},collection:new u,isSearchPaginationTagging:!1,variationflipTemplateModel:null,topSellingItemsHeaderText:"",topSellingItems:null,pageName:"prlp",regTag:"Promo",topSellingItemsCarouselScreenWidthAndItemsToShow:[[0,3],[450,3],[600,3],[700,3],[1e3,3],[1200,3],[1400,3],[1600,3],[1800,3]],templates:{plpTpl:t.template(a["promo/plp"]),appleTermsConditions:t.template(f["browse/apple-term-conditions"]),crushRecommendationsTpl:t.template(g),recoTpl:t.template(f["common/recommendations"]),promoHeaderTpl:t.template(a["promo/promo-header"]),noResultsTpl:t.template(a["promo/no-results"])},events:{"click .bb-viewswitch":"triggerToggleView","click .bb-refine-button":"triggerShowFilters","click .auto-correct a":"routeTo","click .keyword":"redirectToRegistryPage","click div.plppop-back":"backToPlp","click .js-redirectToReviewsPage":"redirectToReviewPage","click .js-redirectToBrandPage":"redirectToBrandPage",'click [data-behavior="redirectToPDP"]':"redirectToPDP"},initializeView:function(){"use strict";var e=this;i.scrollRestoration({type:"manual",page:"lp"}),this.forceScrollfromViewJS=!1,n.Events.trigger("regV:regObj"),this.listenTo(n.Events,"regC:regObj",function(t){e.registryObj=t,e.collection.registryObj=t}),this.listenTo(n.Events,"plp:more:info",this.showMoreInfo),this.listenTo(n.Events,"vi:fiats:onFIATSOverlayDismiss",this.onFIATSOverlayDismiss),this.listenTo(n.Events,"slp:emptyView",this.emptyView),this.listenTo(n.Events,"plp:pageTagging",this.plpPageTagging),this.listenTo(n.Events,"onAfterPageReady",this.addHeader);var t=i.getBrandServiceData();this.facetDelimiter=t.facetDelimiter,this.searchFacetParam=t.searchFacetParam},initializePatLab:function(){this.dropdown=new l(e("#prlp"))},renderView:function(){i.TimeToFirstPaint(),this.initializePatLab()},emptyView:function(){i.TimeToFirstPaint();var e=this;t.each(this.subViewsReference,function(t,n){t.destroy(),delete e.subViewsReference[n]}),e.$el.empty()},triggerToggleView:function(e){this.parentView.subViews["views/promo/facet.view"].toggleView(e)},triggerShowFilters:function(e){this.parentView.subViews["views/promo/facet.view"].showFilters(e)},createSubViews:function(e){"use strict";var t=this;this.collection.models.forEach(function(n,r){var i=e.find('.products li[data-id="'+n.id+'"]');t.subViewsReference[r]=new s({model:n,el:i}),t.subViewsReference[r].regTag=t.regTag,t.subViewsReference[r].render()})},addHeader:function(){var r=e("#pagetitle"),i=this.collection.metaData,s=this.collection.promo,u="",a="";t.isObject(s)&&(a=s.longTagSpecialOffer,u=s.legalDisclaimerText);var f=new n.Model({tcin:this.plpModel.get("searchState").promo_id,type:"promo"}),l=f.cid;this.subViewsReference[l]=new o({model:f,el:r}),this.subViewsReference[l].render({meta:i,offerName:a,offerDetails:u,productLength:this.collection.length})},showPage:function(r){"use strict";var s,o=this,u=i.Get.TCookie("viewType"),a=this.collection.metaData.autoCorrectKeyword||this.collection.metaData.keyword,f="target://display?keywords="+a,l=e('head meta[property="al:ios:url"]');u=u||i.Get.Config("plpDefaultViewType"),i.Set.TCookie("viewType",u),a?l.length?l.attr("content",f):(s='<meta property="al:ios:url" content="'+f+'">'+'<meta property="al:ios:app_store_id" content="402742793">'+'<meta property="al:ios:app_name" content="Target">',e("head").append(s)):(e('head meta[property="al:ios:url"]').remove(),e('head meta[property="al:ios:app_store_id"]').remove(),e('head meta[property="al:ios:app_name"]').remove());var c=u!=="listView",h=this.freezeFacet;this.timestamp=r,n.Events.trigger("view:addRegistryHeader",o.registryObj);if(!this.collection.metaData.total_results||this.collection.metaData.total_results=="0")if(!h){try{var p=i.Get.Cookie("SSOE"),d=t.getVal(i,"Template.bridgeData.build_number");this.collection.metaData.total_results!=null&&TL.err(9,"service_url_"+this.serviceURL+"_window_url_"+window.location.href+"_SSOE_"+p+"_build_no_"+d)}catch(v){}e(".js-search-header").remove(),this.$el.html(this.templates.noResultsTpl({meta:this.collection.metaData,searchQuery:a||"",hasFilers:h})),o.renderBrowseCategories(".js-noResult-category")}else this.$el.empty(),this.addHeader();else{this.addHeader();var m=e(this.templates.plpTpl({products:this.collection.toJSON(),meta:this.collection.metaData,gridView:c,isGridView:c,cid:this.timestamp,isDesktop:i.deviceAtlas.isDesktop()}))}this.tabletSpecificLogic(h),this.collection.length&&(this.createSubViews(m),this.$el.html(m)),i.delayRendering(function(){o.initializeAfterRendering(o,a)},1e3),t.getVal(this.collection,"metaData.currentPage")&&Number(t.getVal(this.collection,"metaData.currentPage"))>1&&(this.isSearchPaginationTagging=!0),window.setTimeout(function(){e("body").css("min-height","initial")},2e3),this.onAfterPageReady()},initializeAfterRendering:function(e,t){this.page="promo-listing",this.addInGridDVM(),this.setMinHeight(!1)},plpPageTagging:function(e){!e||(this.obgbMsgArr=e),this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),this.trackPageLoad()},tabletSpecificLogic:function(t){e("body").addClass("footerhelper"),n.Events.trigger("force:close:typeahead"),!this.collection.metaData.total_results||this.collection.metaData.total_results==="0"?(n.Events.trigger("resize:footer:fornoresult"),t||n.Events.trigger("hide:filters")):(n.Events.trigger("resize:footer:forresult"),n.Events.trigger("show:filters"))},getDynamicData:function(){try{var e=this;return this.appendPaginationMetaTags(),e.isSearchPaginationTagging?e.paginationSerachTagging():e.normalSearchTagging()}catch(t){}},normalSearchTagging:function(){try{var e=t.getVal(this.collection,"metaData.isDLP"),n={occurrences:!0};e?n.dlpSearch=!0:n.productSearches=!0;var r=this.getBaseDynamicObject(!0,n);return r}catch(i){}},paginationSerachTagging:function(){try{var e=t.getVal(this.collection,"metaData.isDLP"),n={occurrences:!0};e&&(n.dlpSearch=!0);var r=this.getBaseDynamicObject(!1,n);return r}catch(i){}},getBaseDynamicObject:function(e,n){"use strict";var r=t.getVal(this.collection,"metaData.isDLP"),s=this,o,u,a,f,l=[],c=[],h=[],p=[],d={},v=this.plpModel,m=this.collection.metaData,g=m.sort_by,y=m.keyword?m.keyword.trim():"NA";y=="NA"&&i.LPTaggingError&&(y=i.LPTaggingError,delete i.LPTaggingError);var b=this.getDynamicBsdlObj(),w=m.currentPage||"",E=v.get("facetLookup"),S=v.get("searchState")[this.searchFacetParam];S&&(f=S.split(this.facetDelimiter)),t.each(f,function(e){var t=E[e],n=t.value,r=t.facet.display_name;h.unshift([r,n].join(":")),d[r]||(d[r]=!0,p.unshift(r))}),t.each(v.get("products"),function(e,n){var r={};try{var i=t.findWhere(s.obgbMsgArr,{partNumber:e.tcin});!!s.obgbMsgArr&&!!i&&(r.ATP_OBGB=i.obgbMsg,r.ATP_fullfillment=i.shippingMethod),!e.wxsLimitedQtyeligible||(r.ATP_limitedQty=e.wxsLimitedQtyeligible),r.tcin=e.tcin,r.productTitle=e.itemAttributes.title,r.productCost=(e.priceSummary.offerPrice||{}).formattedPrice,r.promotion=e.promotionSummary.message.promotionMessageOne,r.placement=n+1,l.push(r)}catch(o){}}),u=v.get("sortOptions")[g],u=(u||g||"").toLowerCase(),a={product:"productsearch1"},c.push(a),e?!m.total_results||m.total_results&&Number(m.total_results)==0?o="promo: null":o="promo: promo results":o="promo: promo results: "+w,b.siteEvents=n,b.todaysDate=this.setTimeBsdlObj(),b.channel="promo",b.pageType="promo: promo results",b.pageName=o,b.levelTwo=o,b.levelThree=o,b.levelFour=o,b.searchTerm=y,b.searchResults=m.total_results,b.method=r?"dlp":"search",b.displayView="standard",b.searchPage="page "+w,b.products=c,b.loginStatus=i.User.isAnonymous?"not logged in and not registered":"logged in",b.searchSortMethod=u,b.operatingSystemVersion=i.deviceAtlas.os(),b.merchandisingLevelOne="non-browse",b.merchandisingLevelTwo="non-browse",i.LPPageRetry&&(b.lnkValue="timeout_tryagain",delete i.LPPageRetry),p.length>0&&(b.refineType=p.join("|").toLowerCase()),h.length>0&&(b.refineAttribute=h.join("|").toLowerCase(),b.searchTerm="refinement:"+b.searchTerm),t.isEmpty(l)&&(n.nullSearches=!0,b.searchPage="null: "+y,b.searchResults="0",delete b.searchSortMethod,delete b.searchView);if(!m.total_results||(m.total_results&&m.total_results)<=0)b.searchTerm="null: "+y;return b.productList=l,b},destroy:function(){var e=this;this.parentView.forceScrollfromViewJS=!0,t.each(this.subViewsReference,function(t,n){t.destroy(),delete e.subViewsReference[n]}),n.Events.trigger("vi:header:clearSearch");var r=!0;this.onAfterPageReady(r),this.unaffixFilters();try{googletag.pubads().clear()}catch(s){console.log("error in destroy")}i.scrollRestoration({type:"auto",page:"lp"})},onFIATSOverlayDismiss:function(e){e&&n.Events.trigger("v:fiats:refreshAddToCartBlock","PLP",e)},routeTo:function(t){t.preventDefault();var r=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");r=r.slice(0,r.lastIndexOf("/"))+e(t.currentTarget).attr("href"),n.history.navigate(r,{trigger:!0,replace:!1})},redirectToRegistryPage:function(t){t.preventDefault();var n=e(t.currentTarget),r=n.find("a").attr("href");r.indexOf("registry")&&(window.location.href="http://m.target.com"+r)},navigate:function(e,r){e.facetValue=e.facetValue?e.facetValue:encodeURIComponent(e.facets||"");var i=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),s=!e.autoCorrectKeyword||e.autoCorrectKeyword.indexOf(e.keyword)>-1?e.keyword:e.autoCorrectKeyword;i=i.slice(0,i.lastIndexOf("/"))+"/pl/"+encodeURIComponent(s)+"?"+"sortBy="+e.sort_by,i=e.facetValue?i+"&facetedValue="+e.facetValue:i,i=e.category?i+"&category="+e.category:i,i=i+"&Nao="+(t.isNaN(r)?0:r),i=this.updateMinAndMaxPriceParams(i),googletag.dvm=[],n.history.navigate(i,{trigger:!0,replace:!1})}}).mixin([c,h,p,d,v,m,y,b,w,E,x],{viewType:x.VIEW_TYPE_TABLET});return T}),define("models/promo/facet.model",["jquery","backbone","models/mixins/facet.model-mx"],function(e,t,n){var r=t.Model.extend({}).mixin([n]);return r}),define("text!templates/tablet/common/prlp.wrap.html",[],function(){return'<div id="main" class="l-row"> <div id="pagetitle" class="l-col-xs-12 l-col-nopadding"></div> <section class="l-col-xs-12 l-col-nopadding"> <div id="productgrid" data-component="component-productgrid"> <section class="l-row js-plp-facet-wrap h-standardSpacing"> <div id="facet" class="l-sidebar-filter" data-name="views/tablet/promo/facet.view" data-parent="views/tablet/search/wrapper.shell.view"></div> <div class="l-col-xs-flex l-col-halfpadding"> <div id="promotedFacet" class="h-standardSpacingLeft h-standardSpacingRight h-standardSpacingBottom" data-name="views/tablet/promo/promotedFacet.view" data-parent="views/tablet/promo/wrapper.shell.view"></div> <div id="prlp" class="l-col-xs-flex l-col-halfpadding" data-page="promo listing page" data-name="views/tablet/promo/plp.view" data-parent="views/tablet/promo/wrapper.shell.view"></div> </div> </section> </div> </section> </div> '}),define("views/tablet/promo/wrapper.shell.view",["jquery","page","views/mixins/common/redoak-mx","views/mixins/common/wrapper-mx","text!templates/tablet/common/prlp.wrap.html"],function(e,t,n,r,i){var s=t.extend({subViews:{},forPage:"promotion",events:{"click .breadCrumb":"redirect","click .js-noResult-category a":"redirect","click #regHeader":"registryRedirect","click .js-try-again":"reloadPage"},templates:{prlpWrapTpl:_.template(i)},constructor:function(){var n=this;t.prototype.constructor.apply(this,arguments),this.listenTo(Backbone.Events,"ct:slingshot:process",this.processRedOakContent),this.listenTo(Backbone.Events,"view:addRegistryHeader",this.addRegistryHeader),this.listenTo(Backbone.Events,"block:view:scrollcall",function(e){n.blockScrollCall=e})},initializeView:function(){},redirect:function(t){t.preventDefault(),t.stopPropagation(),this.goTo(e(t.currentTarget).attr("href"))},renderView:function(){this.$el.html(this.templates.prlpWrapTpl({}))},addRegistryHeader:function(e){this.registryObj=e,this.$("#js-regHeaderWrap").remove();var t=_.template('<div id="js-regHeaderWrap" class="l-col-xs-12 l-col-nopadding"><a id="regHeader" href="javascript:void(0);" class="customreviews--text"><div class="title title-left "><span class="title-text bravo title--ratingsreviews"><%=regHeadertext%></span></div><!-- /.title --></a><hr></div>');if(!_.isEmpty(this.registryObj)&&this.registryObj.backLinkName){var n=this.registryObj.registryType;n&&n.indexOf("wish_list")>-1?this.$("#facet").before(t({regHeadertext:decodeURIComponent(this.registryObj.backLinkName)})):this.$("#facet").before(t({regHeadertext:decodeURIComponent(this.registryObj.backLinkName)})),this.blockScrollCall||this.$("#regHeader").focus()}this.blockScrollCall=!1},registryRedirect:function(t){t.preventDefault();var n="",r=decodeURIComponent(this.registryObj.backLinkUrl);r&&(r[0]=="/"?n+=r:n=n+"/"+r,location.assign(location.origin+n))},reloadPage:function(e){e.preventDefault(),Target.LPPageRetry=!0,Backbone.history.loadUrl()}}).mixin([n,r]);return s}),define("views/tablet/promo/facet.view",["jquery","underscore","page","Target","text!templates/common/browse/facet.html","text!templates/common/browse/facet-detail.html","models/promo/facet.model","views/mixins/common/facet-mx","views/mixins/common/queryparam-helper","views/tablet/promo/wrapper.shell.view"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({constructor:function(){n.prototype.constructor.apply(this,arguments)},model:new o,ute:"",templates:{facetTpl:i,facetDetailTpl:s},events:{},pageType:"prlp",initializeView:function(){"use strict";this.listenTo(Backbone.Events,"lp:facets:expandIfChecked",this.expandFacetIfChecked)}}).mixin([u,a]);return f}),define("views/tablet/promo/adsense.view",["jquery","page","Target","views/mixins/common/adsense-mx"],function(e,t,n,r){var i=t.extend({constructor:function(){_.bindAll(this,"backfillAFS"),t.prototype.constructor.apply(this,arguments)},initializeView:function(){this.listenTo(Backbone.Events,"slp:emptyView",this.emptyView)}}).mixin([r]);return i}),define("text!templates/tablet/common/crsh.wrap.html",[],function(){return'<section class="l-row js-plp-facet-wrap"> <div id="persia" class="l-col-xs-flex l-col-halfpadding" data-page="crush listing page" data-name="views/tablet/crush/crush.view" data-parent="views/tablet/common/wrapper.shell.view"></div> </section> '}),define("views/tablet/crush/wrapper.shell.view",["jquery","page","text!templates/tablet/common/crsh.wrap.html"],function(e,t,n){var r=t.extend({subViews:{},events:{},templates:{crshTpl:_.template(n)},constructor:function(){t.prototype.constructor.apply(this,arguments)},initializeView:function(){var e=this},redirect:function(e){},renderView:function(){this.$el.html(this.templates.crshTpl({}))}});return r}),define("views/mixins/crush/crush.mx",[],function(){var e=function(e){return{setDefaults:{navigate:function(e,t){t&&_.keys(t).length&&(e=e+"?"+$.param(t)),Backbone.history.navigate(e,{trigger:!0,replace:!1})}}}};return e}),define("views/mixins/crush/crush-atc-mx",["views/mixins/searchcategory/plp-slp-common-mx"],function(e){var t=function(){return{mixin:[e],after:{initializeView:function(){this.listenTo(this,"v:var:selectevent",this.saveVariationId),this.listenTo(this,"v:var:alert",this.showCartWarning)}},addToObj:{events:{"hidden.bs.modal #block-ATC":"deleteModal","click button.flip-plp-cart-btn":"flipProductInfo","click a.addcarthook:not(.disabled), button.plp-cart-btn:not(.flip-plp-cart-btn)":"flipProductInfo"}},setDefaults:{flipProductInfo:function(e){var t=this;Target.util.stopDefaultPropagation(e),["love","stlist","feed"].indexOf(t.pageName)!==-1&&(t.deviceType=="phone"?(t.clearTransitions(t.$el),t.$el.removeClass("h-swipe h-swipe-animate ")):t.deviceType=="tablet"?(t.$el.removeClass("h-turn-around"),t.$el.parents(".products--list").removeClass("h-perspective")):(t.$el.removeClass("h-swipe h-swipe-animate h-turn-around"),t.$el.parents(".products--list").removeClass("h-perspective"))),t.addToCartDelegator("SLP")},deleteModal:function(){var e=this,t=$(e.el).find(".flip-plp-cart-btn");e.$("#block-ATC").remove(),e.deregisterEvent(),t&&t.focus(),["love","stlist","feed"].indexOf()!==-1&&(e.deviceType=="phone"?e.$el.addClass("h-swipe h-swipe-animate "):e.deviceType=="tablet"?(e.$el.addClass("h-turn-around"),e.$el.parents(".products--list").addClass("h-perspective")):(e.$el.addClass("h-swipe h-swipe-animate h-turn-around"),e.$el.parents(".products--list").addClass("h-perspective"))),$("#header, #sortFilterMenu, .products-grid, .pagination, #footer, .disclaimer, .pagination-header, .headerHiddenText").attr("aria-hidden","false")}}}};return t}),define("text!templates/common/crush/crush.item.html",[],function(){return'<% var ratingPercentage = ((item.rating || 0)/5) * 100; %> <div class="js-crush-swipe"> <% if (price.notify) { %> <div class="details--ribbon" style="z-index:1"> <span class="h-sr-only"> loved at <%= price.lovedAtPrice %> </span> <span class="ribbon h-text-red" aria-hidden="true"> loved at <%= price.lovedAtPrice %> </span> </div> <% } else if (item.callOuts) { %> <div class="details--ribbon" style="z-index:1"> <% if (item.callOuts.toLowerCase().indexOf("only at target") != -1) { %> <span class="h-sr-only"> only at Target </span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> only at <img class="icon-bullseye-sm" src="<%= img_domain %>/images/icons/bullseye-black.svg" alt="Target"> </span> <% } else if (item.callOuts.toLowerCase().indexOf("new at target")!=-1) { %> <span class="h-sr-only"> new at Target </span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> new at <img class="icon-bullseye-sm" src="<%= img_domain %>/images/icons/bullseye-black.svg" alt="Target"> </span> <% } %> </div> <% } %> <h3> <a href="<%= item.unpublished ? \'javascript:void(0)\' : item.articleLink %>" data-urllnk="<%= item.unpublished ? \'\' : item.articleLink %>" title="<%= item.unpublished ?  \'\' : item.title %>" class="h-display-block <%= item.unpublished ? \'\' : \'js-redirect-to-pdp\' %>"> <picture> <source media="(min-width: 1200px)" srcset="<%= item.imgURL || item.img %>?&amp;wid=400&amp;hei=400&amp;qlt=100&amp;fmt=pjpeg"> <source media="(min-width: 992px)" srcset="<%= item.imgURL || item.img %>?&amp;wid=330&amp;hei=330&amp;qlt=100&amp;fmt=pjpeg"> <source media="(min-width: 0px)" srcset="<%= item.imgURL || item.img%>?&amp;wid=230&amp;hei=230&amp;qlt=100&amp;fmt=pjpeg"> <img class="product--image" alt="<%= item.unpublished ? (\'TCIN \' + item.tcin) : item.title %>" aria-hidden="true"> </picture> </a> </h3> <div class="details details-plp"> <% if (item.priceText) { %> <div class="price"> <span class="<%= (item.isinStock && item.eyeBrow) ? \'h-text-red\' : \'\' %>"> <%= item.priceText %> </span> <% if (item.saveStory) { %> <span class="price--saveStory h-text-lowercase"> <%= item.saveStory %> </span> <% } %> </div> <% } %>  <% if (item.ppunitText) { %> <span class="price--perUnit"> <%= item.ppunitText %> </span> <% } %> <% if (item.title) { %> <p class="details--title"> <a href="<%= item.unpublished ? \'javascript:void(0)\' : item.articleLink %>" data-urllnk="<%= item.unpublished ? \'\' : item.articleLink %>" class="<%= item.unpublished ? \'\' : \'js-redirect-to-pdp\' %>"> <% if (item.mmbv) { %> <span class="details--format"> <%= item.mmbv %> </span> <% } %> <%= item.title %> </a> </p> <% } %>  <% if ((item.rating && item.totalReviews > 0) || (item.swatchImgArr && item.swatchImgArr.length)) { %> <div class="details--ratingSwatch"> <% if (item.rating && item.totalReviews > 0) { %> <div class="ratings-block <% (item.swatchImgArr && item.swatchImgArr.length) ? \'h-border-right\' : \'\' %>"> <div class="ratings ratings-xs h-float-left"> <img src="<%= img_domain %>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width:<%= ratingPercentage + \'%\' %>"> <span class="h-sr-only h-inlineWrap"> <%= item.rating %> out of 5 stars </span> <img src="<%= img_domain %>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> <span class="ratings--count"> <span class="h-sr-only"><%=item.totalReviews%> reviews </span> <span aria-hidden="true"><%=item.totalReviews%></span> </span> </div> <% } %>  <% if (item.swatchImgArr && item.swatchImgArr.length) { %> <div class="product--swatch"> <% _.each(item.swatchImgArr,function(obj, index) { %> <% if (index < item.swatchCountPLP) { %> <img src="<%= obj.url %>&qlt=80&fmt=pjpeg" title="<%= obj.name %>" class="product--swatch-color"> <% } %> <% }) %> <% if (item.swatchImgArr.length > item.swatchCountPLP) { %> <img src="<%= img_domain %>/images/icons/plus-filled.svg" alt="more colors available" role="link" class="product--swatch-more"> <% } %> </div> <% } %> </div> <% } %> <% if (item.isLtdQty && item.ltdQtyItem > 0) { %> <div class="details--messaging"> <span class="h-text-orangeDark h-text-lowercase"> only <%= parseInt(item.ltdQtyItem) %> left </span> </div> <% } %> <div class="details--messaging"> <% if (item.eyeBrow || item.promotions || item.shipsFreeItem) { %> <ul class="h-text-red"> <% if (item.shipsFreeItem) { %> <li> ships free </li> <% } %> <% if (item.promotions) { %> <li> <%= item.promotions %> </li> <% } %> </ul> <% } %> <% if (item.backOderMessage) { %> <p class="h-text-orangeDark"> <%= item.backOderMessage %> </p> <% } %>  <% if (item.subscriptionItems) { %> <p class="h-text-grayDark"> subscription enabled </p> <% } %>  <% if(ltdQtyItem && ltdQtyItem > 0) { %> <span class="h-text-orangeDark h-text-lowercase"> only <%=parseInt(ltdQtyItem)%> left</span> <%}%> </div> <div class="details--button"> <% if (item.atcText) { %> <% if (item.isinStock) { %> <button class="btn btn-primary btn-sm <%= item.flagFlippable %>" data-store="<%= item.listStoreEligible %>" data-tcin="<%= item.partNumber %>" aria-label="add <%= item.title %> to cart"> <%= item.atcText %> </button> <% } else if (item.viewInPdp) { %> <% if (item.unpublished && item.atcText != \'shop brand\') { %> <button class="btn btn-primary btn-sm is-disabled" aria-label="unavailable" disabled="disabled"> unavailable </button> <% } else { %> <button class="btn btn-primary btn-sm js-redirect-to-pdp" data-urllnk="<%= item.articleLink %>" aria-label="<%= item.title %> <%= item.atcText %>"> <%= item.atcText %> </button> <% } %> <% } else { %> <button class="btn btn-primary btn-sm is-disabled" aria-label="unavailable" disabled="disabled"> <%= item.atcText %> </button> <% } %>  <% } %> <div class="popover-demo h-float-right h-standardSpacingLeft" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title=""> <button class="btn btn-sm btn-secondary btn-icon-only btn-round btn-favorites js-tgtcrush js-favorite is-active" aria-label="<%= \'unlove \' + (item.title || \' this item\') + \' from your loves\' %>" data-title="<%= item.title %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </div> </div> </div> <% if (formFactor === "tablet") { %> <div class="h-overlay h-crush-opacity <%= unlovedState ? \'show\' : \'\' %>"> <div class="flip h-text-grayDarkest title-subtext"> <h2> <a class="js-access-log" role="log" href="javascript:void(0)"> unloved </a> </h2> <a class="link-grayDark h-text-grayDarkest js-tgtcrush" href="#"> undo </a> </div> </div> <% } else { %> <div class="h-pan-decal"> <div class="h-text-grayDarkest title-subtext h-center"> <h2> remove </h2> </div> </div> <div class="h-overlay <%= unlovedState ? \'show\' : \'\' %>"> <div class="flip h-text-grayDarkest title-subtext h-center"> <h2> <a class="js-access-log" role="log" href="javascript:void(0)"> unloved </a> </h2> </div> </div> <% } %> '}),define("views/tablet/crush/crush.item.view",["jquery","underscore","backbone","page","views/tablet/crush/tgtcrush-view-mx","views/mixins/crush/crush.mx","views/mixins/crush/crush.tagging-mx","views/mixins/variation-select-mx","views/mixins/crush/crush-atc-mx","text!templates/common/crush/crush.item.html","text!templates/tablet/common/variation-primary.html","text!templates/tablet/common/variation.secondary.html","text!templates/tablet/common/variation.html","text!templates/tablet/common/addtocart-all.html","text!templates/tablet/common/addToBundle.html","text!templates/tablet/common/esp-details.html","text!templates/tablet/common/variation-header.html","text!templates/tablet/common/fiats-find-store.html","text!templates/tablet/common/find-in-store.html","text!templates/tablet/common/selectOptionOverlay.html","text!templates/tablet/common/global-errors.html","firefly!crush/crush.item"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S=r.extend({templates:{crushItemTpl:t.template(f),selectOptionOverlayTpl:t.template(b),globalErrorTpl:t.template(w)},itemInfoTpl:{variationPrimaryTpl:t.template(l),variationTpl:t.template(h),variationSecondaryTpl:t.template(c),addtocartTpl:t.template(p),addToBundleTpl:t.template(d),espDetailsTpl:t.template(v),headerTpl:t.template(m),fiatsFindStoreTpl:t.template(g),findinStoreTpl:t.template(y)},renderView:function(){},isSearchPaginationTagging:!1,variationflipTemplateModel:null,partialModel:null,constructor:function(){var t=this;r.prototype.constructor.apply(t,arguments)},events:{"click .js-redirect-to-pdp":"routeToPDP"},topSellingItemsHeaderText:"",initializeView:function(){var e=this;e.pageName=e.crushTag="love",e.deviceType="tablet"},render:function(t){var n=this,r=t||n.model.toJSON();n.$el.html(n.templates.crushItemTpl({item:r,ltdQtyItem:r.wxsLimitedQtyMsg&&r.available_to_promise_network&&r.available_to_promise_network.available_to_promise_quantity,atc_visible:!t,unlovedState:n.partialModel.get("alreadyUnloved"),price:n.checkPriceDifference()})),t&&e("li[data-id]").find(">:first-child").length>=e("li[data-id]").length&&TL.e(67)},destroy:function(){var e=this;e.stopListening(),e.undelegateEvents(),e.remove()},updateHeaderLoveCount:function(t){var n=this,r=e(".js-subtitle").text();r=r.replace(/\d+/g,function(e){try{e=Number(e)}catch(n){e=0}return t?e++:e--,e}),e(".js-subtitle").text(r)}}).mixin([s,i,o,a,u,E],{viewType:E.VIEW_TYPE_TABLET});return S}),define("text!templates/common/crush/feed.item.html",[],function(){return'<% var ratingPercentage = ((item.rating || 0)/5) * 100; %> <div class="product--link js-crush-swipe"> <% if (item.callOuts) { %> <div class="details--ribbon"> <% if (item.callOuts.toLowerCase().indexOf("only at target") != -1) { %> <span class="h-sr-only"> only at Target </span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> only at <img class="icon-bullseye-sm" src="<%= img_domain %>/images/icons/bullseye-black.svg" alt="Target"> </span> <% } else if (item.callOuts.toLowerCase().indexOf("new at target") != -1) { %> <span class="h-sr-only"> new at Target </span> <span class="ribbon h-text-grayDarkest" aria-hidden="true"> new at <img class="icon-bullseye-sm" src="<%= img_domain %>/images/icons/bullseye-black.svg" alt="Target"> </span> <% } %> </div> <% } %> <h3> <a href="<%= item.articleLink %>" data-urllnk="<%= item.articleLink %>" title="<%= item.title %>" class="h-display-block js-redirect-to-pdp"> <img src="<%= item.imgURL || item.img %>" class="product--image" alt="<%= item.title %>" aria-hidden="true"> </a> </h3> <div class="details details-plp"> <div class="price"> <span class="<%= item.showRedPrice ? \'h-text-red\' : \'\' %>"> <%= item.priceText %> </span> </div> <% if (item.title) { %> <p class="details--title"> <a href="<%= item.articleLink %>" data-urllnk="<%= item.articleLink %>" class="js-redirect-to-pdp"> <%= item.title %> </a> </p> <% } %> <div class="details--messaging"> <% if (item.eyeBrow || item.promotions || item.shipsFreeItem) { %> <ul class="h-text-red"> <% if (item.shipsFreeItem) { %> <li> ships free </li> <% } %> <% if (item.promotions) { %> <li> <%= item.promotions %> </li> <% } %> </ul> <% } %> </div> <div class="details--button"> <% if ((atc_visible && item.atcText)|| item.atcText == \'shop brand\') { %> <% if (item.isinStock) { %> <button class="btn btn-primary btn-sm <%= item.flagFlippable %>" data-store="<%= item.listStoreEligible %>" data-tcin="<%= item.partNumber %>" aria-label="add <%= item.title %> to cart"> <%= item.atcText %> </button> <% } else if (item.viewInPdp || (item.atcText == \'shop brand\')) { %> <button class="btn btn-primary btn-sm js-redirect-to-pdp" data-urllnk="<%= item.articleLink %>" aria-label="<%= item.title %> <%= item.atcText %>"> <%= item.atcText %> </button> <% } else { %> <button class="btn is-disabled btn-sm"> <%= item.atcText %> </button> <% } %>  <% } %> <div class="h-display-inline-block h-float-right"> <div class="popover-demo h-display-inline-block js-stop" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtdislike js-stop js-unfavorite <%= lovedState ? \'is-disabled\' : \'\' %>" <%= lovedState ? "aria-disbled = true" : "" %>><i class="icon icon-unfavorite js-stop"><%= \'remove \' + item.title + \' from your recommendations\' %></i></button> </div> <div class="popover-demo h-display-inline-block h-tightSpacingLeft" data-trigger="focus" data-behavior="popover" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites <%= lovedState ? \'is-active\' : \'\' %>" aria-label="<%= lovedState ? (\'unlove \' + (item.title || \'this item\') + \'from your loves\') : (\'love \' + (item.title || \'this item\') + \' to keep tabs on it\' ) %>" data-title="<%= item.title %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </div> </div> <% if ((item.rating && item.totalReviews > 0) || (item.swatchImgArr && item.swatchImgArr.length)) { %> <div class="details--ratingSwatch"> <% if (item.rating && item.totalReviews > 0) { %> <div class="ratings-block <% (item.swatchImgArr && item.swatchImgArr.length) ? \'h-border-right\' : \'\' %>"> <div class="ratings ratings-xs h-float-left"> <img src="<%= img_domain %>/images/icons/star-rating-off.svg" class="ratings-img" aria-hidden="true"> <div class="ratings-score" style="width:<%= ratingPercentage + \'%\' %>"> <span class="h-sr-only h-inlineWrap"> <%= item.rating %> out of 5 stars </span> <img src="<%= img_domain %>/images/icons/star-rating-on.svg" class="ratings-img" aria-hidden="true"> </div> </div> <span class="ratings--count"> <span class="h-sr-only"><%=item.totalReviews%> reviews </span> <span aria-hidden="true"><%=item.totalReviews%></span> </span> </div> <% } %>  <% if (item.swatchImgArr && item.swatchImgArr.length) { %> <div class="product--swatch"> <% _.each(item.swatchImgArr,function(obj, index) { %> <% if (index < item.swatchCountPLP) { %> <img src="<%= obj.url %>&qlt=80&fmt=pjpeg" title="<%= obj.name %>" class="product--swatch-color"> <% } %> <% }) %> <% if (item.swatchImgArr.length > item.swatchCountPLP) { %> <img src="<%= img_domain %>/images/icons/plus-filled.svg" alt="more colors available" role="link" class="product--swatch-more"> <% } %> </div> <% } %> </div> <% } %> </div> </div> <% if (formFactor === "phone") { %> <div class="h-overlay js-love-overlay <%= (lovedState && gestureType == \'pan\') ? \'show\' : \'\' %>"> <div class="h-text-grayDarkest title-subtext h-center"> <h2> loved </h2> </div> </div> <div class="h-overlay js-dislike-overlay <%= alreadyDisliked ? \'show from-left\' : \'\' %>"> <div class="h-text-grayDarkest title-subtext h-center"> <h2> <a class="js-access-log" role="log" href="javascript:void(0)"> removed </a> </h2> </div> </div> <div class="h-pan-decal js-pan-love"> <div class="h-text-grayDarkest title-subtext h-center"> <h2> love </h2> </div> </div> <div class="h-pan-decal js-pan-dislike"> <div class="h-text-grayDarkest title-subtext h-center"> <h2> remove </h2> </div> </div> <%} else { %> <% if (crushFlipTemplate) { %> <div class="h-overlay h-crush-opacity js-love <%= lovedState ? \'show\' : \'\' %>"> <div class="flip h-text-grayDarkest title-subtext"> <h2> loved </h2> <a class="link-grayDark h-text-grayDarkest js-tgtcrush" href="#"> undo </a> </div> </div> <% } %> <div class="h-overlay h-crush-opacity js-dislike-overlay <%= alreadyDisliked ? \'show\' : \'\' %>"> <div class="flip h-text-grayDarkest title-subtext"> <h2> <a class="js-access-log" role="log" href="javascript:void(0)"> removed </a> </h2> </div> </div> <% } %> '}),define("views/tablet/crush/feed.item.view",["jquery","underscore","backbone","page","views/tablet/crush/tgtcrush-view-mx","views/mixins/crush/crush.mx","views/mixins/crush/crush.tagging-mx","text!templates/common/crush/feed.item.html","views/mixins/variation-select-mx","views/mixins/crush/crush-atc-mx","text!templates/tablet/common/variation-primary.html","text!templates/tablet/common/variation.secondary.html","text!templates/tablet/common/variation.html","text!templates/tablet/common/addtocart-all.html","text!templates/tablet/common/addToBundle.html","text!templates/tablet/common/esp-details.html","text!templates/tablet/common/variation-header.html","text!templates/tablet/common/fiats-find-store.html","text!templates/tablet/common/find-in-store.html","text!templates/tablet/common/selectOptionOverlay.html","text!templates/tablet/common/global-errors.html","firefly!crush/feed.item"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){var S=r.extend({templates:{feedItemTpl:t.template(u),selectOptionOverlayTpl:t.template(b),globalErrorTpl:t.template(w)},itemInfoTpl:{variationPrimaryTpl:t.template(l),variationTpl:t.template(h),variationSecondaryTpl:t.template(c),addtocartTpl:t.template(p),addToBundleTpl:t.template(d),espDetailsTpl:t.template(v),headerTpl:t.template(m),fiatsFindStoreTpl:t.template(g),findinStoreTpl:t.template(y)},renderView:function(){},isSearchPaginationTagging:!1,variationflipTemplateModel:null,constructor:function(){var t=this;try{E.trackEvents(t)}catch(n){}r.prototype.constructor.apply(t,arguments)},events:{"click .js-redirect-to-pdp":"routeToPDP"},initializeView:function(){var e=this;e.pageName=e.crushTag="feed",e.deviceType="tablet"},render:function(t){var n=this;n.$el.html(n.templates.feedItemTpl({item:t||n.model.toJSON(),atc_visible:!t,lovedState:n.partialModel.get("alreadyLoved"),alreadyDisliked:n.partialModel.get("alreadyDisliked"),crushFlipTemplate:n.crushFlipTemplate})),t&&e("li[data-id]").find(">:first-child").length>=e("li[data-id]").length&&TL.e(63)},destroy:function(){var e=this;e.stopListening(),e.undelegateEvents(),e.remove()}}).mixin([i,s,o,f,a,E],{viewType:E.VIEW_TYPE_TABLET});return S}),define("text!templates/tablet/crush/starterlist.item.html",[],function(){return'<h3> <div class="product--image"> <img src="<%= item.imgURL || item.img %>" class="product--image" alt="<%= item.title %>" role="heading" aria-level="3"> </div> </h3> <div class="details details-plp"> <% if (item.atcText) { %> <div class="h-display-flex"> <% if (item.title) { %> <h3 class="details--title h-tightSpacingRight"> <%= item.title %> </h3> <% } %> <div class="popover-demo h-float-right" data-behavior="popover" data-trigger="focus" data-html="true" data-template="<div style=&quot;width:100%&quot; class=&quot;popover popover-gray&quot; role=&quot;tooltip&quot;><div class=&quot;arrow&quot;></div><h3 class=&quot;popover-title&quot;></h3><div class=&quot;popover-content&quot;></div></div>" data-placement="top" data-original-title=""> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites <%= alreadyLoved ? \'is-active\' : \'\' %>" aria-label="<%= alreadyLoved ? (\'unlove \' + (item.title || \'this item\') + \' from your loves\') : (\'love \' + (item.title || \'this item\') + \' to keep tabs on it\') %>" data-title="<%= item.title %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> </div> <% } %> </div> '}),define("views/tablet/crush/starterlist.item.view",["jquery","underscore","backbone","page","views/mixins/crush/crush.mx","views/tablet/crush/tgtcrush-view-mx","views/mixins/common/tgtcrsh-popover-mx","views/mixins/crush/crush.tagging-mx","text!templates/tablet/crush/starterlist.item.html","firefly!crush/starterlist.item"],function(e,t,n,r,i,s,o,u,a,f){var l=r.extend({templates:{starterlistItemTpl:t.template(a)},constructor:function(){var t=this;r.prototype.constructor.apply(t,arguments)},lovedByAnonymous:[],initializeView:function(){var e=this;e.pageName="stlist",e.crushTag="stlist",e.deviceType="tablet"},events:{"click .js-redirect-to-pdp":"routeToPDP"},render:function(t){var n=this;t||n.model.set({atcText:n.partialModel.get("atcText"),title:n.partialModel.get("title")}),n.$el.html(n.templates.starterlistItemTpl({item:t||n.model.toJSON(),alreadyLoved:n.partialModel.get("alreadyLoved")})),t&&e("li[data-id]").find(">:first-child").length>=e("li[data-id]").length&&TL.e(61)},destroy:function(){var e=this;e.stopListening(),e.undelegateEvents(),e.remove()},myLovedItems:function(){var e=this,t,r,i=e.getItemMeta();t=i.tcin,r=e.loveCollection.get(t),r&&["love","feed"].indexOf(e.pageName)===-1&&Target.Crush.heartAriaLabelUpdate(e.$(".js-tgtcrush"),"unlove"),n.Events.trigger("v:tgtcrsh:lovedonstlist",e.loveCollection.length)},removeExtraLoves:function(e,t){var n=this;n.el.dataset.id==e&&t>3&&Target.Crush.heartAriaLabelUpdate(n.$(".js-tgtcrush"),"love")}}).mixin([s,i,o,u,f],{viewType:f.VIEW_TYPE_TABLET});return l}),define("text!templates/tablet/crush/popular.item.html",[],function(){return'<%\nvar itemTitle = item.title;\nif(itemTitle){\nvar itemTitle = itemTitle.indexOf("\'") >= 0? itemTitle.replace("\'", "&#39;"): itemTitle;\n}\n%> <a href="<%=item.articleLink%>" data-urllnk="<%=item.articleLink%>" title="<%= itemTitle%>" class="product--link js-redirect-to-pdp"> <picture> <% if(item.type != "brand"){%> <source media="(min-width: 1200px)" srcset="<%= encodeURI(item.img) %>&amp;wid=250&amp;hei=250&amp;qlt=80&amp;fmt=pjpeg"> <source media="(min-width: 992px)" srcset="<%= encodeURI(item.img) %>&amp;wid=250&amp;hei=250&amp;qlt=80&amp;fmt=pjpeg"> <source media="(min-width: 668px)" srcset="<%= encodeURI(item.img) %>"> <%}%> <source media="(min-width: 0px)" srcset="<%= encodeURI(item.img) %>"> <img class="product--image" alt="<%=itemTitle%>" src="<%= encodeURI(item.img) %>"> </picture> <div class="details details-plp"> <%if(item.atcText){%> <div> <button class="btn btn-sm btn-icon-only btn-round btn-favorites js-tgtcrush js-favorites <%= lovedState ? \'is-active\' : \'\' %>" style="margin:0 auto" aria-label="<%= lovedState ? (\'unlove \' + (item.title || \'this item\') + \' from your loves\') : (\'love \' + (item.title || \'this item\') + \' to keep tabs on it\') %>" data-title="<%= item.title %>"> <svg class="icon icon-crush" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"> <path fill="#FFF" fill-rule="evenodd" clip-rule="evenodd" d="M15 26.5c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.6-1.7-2.5-3.5-3-5.5-.4-2.4.3-4.2 1.1-5.3 1-1.4 2.6-2.5 4.1-2.7.3 0 .7-.1 1-.1 2 0 3.7.9 5.2 2.7.1.1.1.2.2.3L16 8.9 17.4 7c1.1-1.5 2.5-2.4 4.1-2.7.4-.1.8-.1 1.3-.1 2.1 0 4.1 1.2 5.3 3.2 1.3 2.1 1.3 4.4.1 7.1-.9 2-2.4 3.6-3.9 5.1-2.1 2-4.1 4-6.3 6l-2 1.8c-.3-.3-.6-.6-1-.9z"/> <path fill="#888" d="M22.7 5.2c1.8 0 3.4 1 4.5 2.7 1.1 1.8 1.1 3.7 0 6.2-.8 1.8-2.3 3.4-3.7 4.8-2.1 2-4.2 4-6.2 6l-1.2 1.2-.3-.3c-1.2-1.1-2.4-2.2-3.5-3.3-1.7-1.6-3.6-3.5-5.4-5.4-1.4-1.5-2.3-3.2-2.7-5-.5-2.1.2-3.6.8-4.5.9-1.2 2.2-2.1 3.4-2.3.3 0 .6-.1.9-.1 1.7 0 3.1.7 4.4 2.4.1.1.1.2.2.2l.1.1c.1.1.1.2.2.3l.1.2 1.6 2.3 1.7-2.2.2-.3c.1-.2.2-.3.4-.5 1-1.3 2.1-2 3.5-2.3.3-.1.6-.2 1-.2m0-2c-.5 0-1 0-1.5.2-1.9.4-3.5 1.5-4.6 3.1-.2.2-.4.5-.6.7-.1-.2-.2-.3-.3-.5-.1-.2-.2-.3-.3-.5-1.6-2-3.6-3.1-6-3.1-.4 0-.8 0-1.2.1-3.1.5-7 4.1-6 9.2.5 2.3 1.6 4.3 3.2 6 1.8 1.9 3.6 3.7 5.5 5.5 1.7 1.6 3.4 3.2 5.2 4.8 3-2.8 6-5.6 8.9-8.4 1.6-1.6 3.2-3.3 4.1-5.4 1.2-2.7 1.5-5.4-.1-8.1-1.6-2.3-3.8-3.6-6.3-3.6z"/> </svg> </button> </div> <%}%> </div> </a> '}),define("views/tablet/crush/popular.item.view",["jquery","underscore","backbone","page","views/tablet/crush/tgtcrush-view-mx","views/mixins/crush/crush.mx","views/mixins/crush/crush.tagging-mx","text!templates/tablet/crush/popular.item.html","firefly!crush/popular.item"],function(e,t,n,r,i,s,o,u,a){var f=r.extend({templates:{popularItemTpl:t.template(u)},itemInfoTpl:{},renderView:function(){},isSearchPaginationTagging:!1,variationflipTemplateModel:null,partialModel:null,constructor:function(){var t=this;r.prototype.constructor.apply(t,arguments)},events:{"click .js-redirect-to-pdp":"routeToPDP"},topSellingItemsHeaderText:"",initializeView:function(){var e=this;e.pageName=e.crushTag="popular",e.deviceType="tablet"},render:function(e){var t=this;t.$el.html(t.templates.popularItemTpl({item:e||t.model.toJSON(),lovedState:t.partialModel&&t.partialModel.get("alreadyLoved")||(e?e.alreadyLoved:t.model.get("alreadyLoved"))})),picturefill()},destroy:function(){var e=this;e.stopListening(),e.undelegateEvents(),e.remove()}}).mixin([s,i,o,a],{viewType:a.VIEW_TYPE_TABLET});return f}),define("views/mixins/crush/crush-navigation.mx",[],function(){var e=function(e){return{addToObj:{events:{"click  .js-prev":"previousPage","click  .js-next":"nextPage","change #pagination":"goToPage"}},setDefaults:{previousPage:function(e){e.preventDefault();var t=Target.getParameterByName("pg")||0;t&&(t=Number(t)-1,this.preNavigate(t))},goToPage:function(e){e.preventDefault();var t=Number($(e.currentTarget).find(":selected").val());this.preNavigate(t)},nextPage:function(e){e.preventDefault();var t=Target.getParameterByName("pg")||0;t=Number(t)+1,this.preNavigate(t)},preNavigate:function(e){Target.Crush.sneak(!0);var t=window.location.pathname,n={pg:e};this.navigate(t,n)}}}};return e}),define("text!templates/common/crush/crush.html",[],function(){return'<% if(pageName !=\'stlist\' ) { %> <h1 class="h-sr-only">your loves and personalized recommendations</h1> <div class="navtab-arrows l-col-xs-flex l-container-fixed"> <nav> <ul class="l-row"> <li class="l-col-xs-4 l-col-nopadding h-text-center"> <a class="js-page-nav h-text-xl h-text-bold <%= pageName == \'love\'? \'tab-active\' : \'\' %>" href="/target-crush/love" alt="my loves"> <div class="crush-page-tab"> <span class="h-sr-only"> loves, <%= pageName == \'love\' ? loveCount + \' items selected\' : loveCount + \' items\' %> </span> <span>your</span> <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" focusable="false"> <path fill="#333333" d="M16 28.8c-1.8-1.6-3.5-3.3-5.2-4.9-1.8-1.8-3.7-3.6-5.4-5.4-1.6-1.7-2.7-3.6-3.2-6-1.1-5.1 2.8-8.7 6-9.1 3-.5 5.3.7 7.1 3 .1.2.2.3.4.5 0 .1.1.2.3.4.2-.3.5-.5.6-.8 1.2-1.5 2.7-2.6 4.6-3.1 3.1-.6 5.9.7 7.6 3.5 1.6 2.7 1.4 5.4.2 8-.9 2.1-2.4 3.8-4.2 5.4C22 23.2 19 26 16 28.8z"/> </svg><span class="h-text-bold" aria-hidden="true">s</span> <div class="js-subtitle delta h-text-normal" aria-hidden="true"> <span class="js-lovecount js-subtitle delta h-text-normal h-display-block"><%= loveCount %></span> </div> <div class="pointingDivider"> <svg xmlns="http://www.w3.org/2000/svg" width="4000" height="10" viewBox="0 0 3999.9998 10"> <g fill="#fff"> <path d="M1991 10.5l9-9 9 9" stroke-linecap="round"></path> </g> </svg> </div> </div> </a> </li> <li class="l-col-xs-8 l-col-nopadding h-text-center"> <a class="js-page-nav <%= pageName == \'feed\' ? \'tab-active\' : \'\' %> h-text-xl h-text-bold" href="/target-crush/feed" alt="my feed" aria-label="recommendations inspired by your loves, <%= pageName == \'feed\' ? \'selected, \' : \'\' %>"> <div class="crush-page-tab"> <span>recommendations</span> <div class="js-subtitle delta h-text-normal" aria-hidden="true"> inspired by your <span class="icon icon-md"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" focusable="false"> <path fill="#333333" d="M16 28.8c-1.8-1.6-3.5-3.3-5.2-4.9-1.8-1.8-3.7-3.6-5.4-5.4-1.6-1.7-2.7-3.6-3.2-6-1.1-5.1 2.8-8.7 6-9.1 3-.5 5.3.7 7.1 3 .1.2.2.3.4.5 0 .1.1.2.3.4.2-.3.5-.5.6-.8 1.2-1.5 2.7-2.6 4.6-3.1 3.1-.6 5.9.7 7.6 3.5 1.6 2.7 1.4 5.4.2 8-.9 2.1-2.4 3.8-4.2 5.4C22 23.2 19 26 16 28.8z"/> </svg> </span><span>s</span> </div> <div class="pointingDivider"> <svg xmlns="http://www.w3.org/2000/svg" width="4000" height="10" viewBox="0 0 3999.9998 10"> <g fill="#fff"> <path d="M1991 10.5l9-9 9 9" stroke-linecap="round"></path> </g> </svg> </div> </div> </a> </li> </ul> </nav> </div> <% } %> <section id="js-dispType" class="l-col-xs-flex l-col-halfpadding"> <% if(pageName == "popular") { %> <section id="js-mLoved" class="h-overflow-hidden"> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing"></div> </section> <section id="js-mTopView" class="h-overflow-hidden"> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing"></div> </section> <section id="js-mBrand" class="h-overflow-hidden"> <div class="js-carousel-container carousel-container product-recomendation--pdp h-standardSpacing"></div> </section> <% } %> </section> <div class="modal modal-crush-love" id="modal-crush-love" tabindex="-1" role="dialog" aria-labelledby="modal-crush-love" aria-hidden="true"> <div class="backdrop"></div> <div class="modal-dialog"> <div class="modal-content"> </div> </div> </div> '}),define("text!templates/tablet/crush/crush.pagination.html",[],function(){return' <div class="l-col-xs-12 l-col-nopadding h-tightSpacingBottom js-search-header"> <div class="title"> <%if(pageName==\'stlist\'){%> <h2 id="js-plp-page-title" class="title-text alpha h-standardSpacingLeft h-standardSpacingRight" tabindex="-1"> <%=header.title%> </h2> <%}%> <% if (pageData.items && pageData.items.length) { %> <div class="h-tightSpacingTop"> <% if (header.subtitle) { %> <h2 class="js-subtitle delta h-text-normal h-text-grayDarker"><%= header.subtitle %> <% if (header.subtitleLnk) { %> <a class="h-text-underline <%=header.subtitleClass%>" href="<%=header.subtitleLnkHref%>"><%= header.subtitleLnk %></a> <% } %> </h2> <% } %> </div> <%}else{%> <section class="error error-page h-tightSpacingTop"> <ul class="error-page--list multiple"> <h2 class="delta h-text-normal h-tightSpacingTop"> <%if(pageName=="feed" && loveCount<1){%> <li class="js-tgt-error">We don&#39;t have any recommendations for you right now. Keep loving items and check back later.</li> <%}else if(pageName == "popular"){%> <li class="js-tgt-error"></li> <%}else if(pageName == "love"){%> <li class="js-tgt-error">you haven&#39;t loved anything yet. get to it!</li> <%}%> </h2> </ul> </section> <%}%> </div> </div> <h2 class="h-sr-only"><%= pageName == \'feed\'? \'recommended products\' : \'loved products\' %></h2> <section class=""> <div class="l-col-xs-12 l-col-nopadding"> <div class="products products-tile"> <ul class="products--list h-perspective l-col-xs-block-1 l-col-sm-block-2 l-col-md-block-3 l-col-lg-block-4 l-col-xl-block-4"> <% _.each(pageData.items, function(model,index) { %> <li data-id="<%=encodeURIComponent(model.id)%>" class="product products-tile-center h-turn-around <%=model.get(\'alreadyUnloved\')? \'clockwise\':\'\'%> <%/*=(model.get(\'alreadyLoved\') && pageName!="stlist")? \'clockwise\':\'\'*/%> <%=model.get(\'alreadyDisliked\')? \'clockwise\':\'\'%>"> </li> <%});%> </ul> <div class="modal fade js-feed-desc-modal" id="feed-desc-modal" tabindex="-1" role="dialog" aria-hidden="true"> <div class="backdrop"></div> <div class="modal-dialog"> <div class="modal-content modal-container scContent"> </div> </div> </div> </div> </div> </section> <%if(pageName == \'feed\') {%> <div class="h-text-center"> <h2> thanks for your input. </h2> <a href="/target-crush/feed" class="link-underline"> see what\'s new for you </a> </div> <%}%> <% if(pageData.meta.totalPages>0) { %> <div class="pagination h-standardSpacing"> <% if(pageData.meta.currentPage==0) { %> <button class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </button> <% } else { %> <button class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-prev"> <i class="icon icon-paginate icon-arrow-left">previous page</i> </button> <% } %> <div class="dropdown dropdown-above dropdown-constrained dropdown-spaced dropdown-lg" data-convert="false" data-variant="constrainedLarge" data-update="currentSelected"> <label for="pagination" class="dropdown--label is-hidden">page <%= pageData.meta.currentPage-1 %> of <%= pageData.meta.totalPages+1 %></label> <select id="pagination" class="dropdown--select is-hidden"> <% for(var index = 0; index <= pageData.meta.totalPages; index++) { %> <option value="<%= index %>">page <%= index %></option> <% } %> </select> <button class="dropdown--button js-dropdown">page <%= pageData.meta.currentPage+1 %> of <%= pageData.meta.totalPages+1 %><span class="h-sr-only"> - shows more content</span></button> <ul class="dropdown--menu js-dropdown-menu" aria-hidden="true"> <% for(var index = 0; index <= pageData.meta.totalPages; index++) { %> <li><a class="js-dropdown-link dropdown--menu--item <% if (pageData.meta.currentPage == index) { %> active <% } %>" href="javascript:void(0)" data-value="<%= (index) %>">page <%= index+1 %></a> <% } %> </li><li><a href="javascript:void(0)" class="dropdown--menu--item dropdown--menu--close js-dropdown-close">close list</a></li> </ul> </div> <% if(pageData.meta.currentPage==pageData.meta.totalPages) { %> <button class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate is-disabled"> <i class="icon icon-paginate icon-arrow-right">next page</i> </button> <% } else { %> <button class="btn btn-sm btn-secondary btn-icon-only btn-round btn-paginate js-next"> <i class="icon icon-paginate icon-arrow-right">next page</i> </button> <% } %> </div> <% } %> '}),define("text!templates/common/crush/crush.carousel.html",[],function(){return'<div class="title"> <h3 class="title-text h-standardSpacing"><%=carousalTitle%></h3> </div> <div class="carousel carousel-scroll"> <div class="js-carousel-view products products-scroll"> <ul class="js-carousel-list product--list"> <% var popularMax = _.getVal(Target, "Template.bridgeData.feature.CRUSH_POPULAR_MAX")  || 20;\n            _.each(pageData, function(model,index) {\n                if(index>=popularMax){\n                return;\n                    }\n                %> <li data-id="<%=encodeURIComponent(model.id)%>" class="product"> </li> <%})%> </ul> </div> </div> <hr class="card--hr">'}),define("text!templates/common/crush/crush.sign.in.html",[],function(){return'<h2 class="modal-header h-standardPaddingTop"><%=title%></h2> <div class="modal-body content-ATC"> <div class="stayOnAfterATC-modal-success" class="hide"> <div class="itemRtText h-float-left" tabindex="-1"> <% if(subtitle) { %> <span class="title-subtext"><%=subtitle%></span> <% } %> </div> <div class="h-float-clear"></div> <% if(showSignin) { %> <div class="h-tightSpacingTop"> <button type="button" class="checkout-ATC btn btn-primary btn-block btn-lg crushsign">sign in</button> </div> <% } %> <% if(showCreate) { %> <div class="h-tightSpacingTop"> <button type="button" class="cart-ATC btn btn-default btn-block btn-lg crushcreateacc">create account</button> </div> <% } %> </div> </div> <a href="#" class="icon icon-close-circle closeAddToCart" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> '}),define("text!templates/common/crush/banner.html",[],function(){return'<section class="l-row stlist-banner"> <a class="l-col-xs-12 l-col-nopadding h-border-bottom js-banner-stlist" role="log" style="background-image: url()" data-component="<%= contents.id %>"> <div class="storycard storycard-banner"> <img class="storycard--image" src="<%= contents.image.image_path %>" alt=""> <div class="storycard--text"> <h2 class="storycard--headline"><%=contents.headline %> </h2> <h3 aria-hidden="true" class="storycard--detail"> <%=contents.subhead %> </h3> <div style="position:absolute;width:100%;top: 50%"> <h3 style="color: transparent;width: 250px;margin: 0 auto" class="storycard--detail"> <%=contents.subhead.replace("<br/>", " ") %> </h3> </div> </div> </div> </a> </section>'}),define("text!templates/common/crush/feed.curation.html",[],function(){return'<div class="h-text-center crush-curation-msg product--link h-standardPadding"> <h4>want better recommendations?</h4> <p>Just let us know what you love, and remove what you don&#39;t. Your recommendations will get smarter &#45; and more your style.</p> </div>'}),define("text!templates/common/crush/feed.modal.html",[],function(){return'<h2 class="modal-header" tabindex="-1">we saved your loves</h2> <div class="modal-body feed-desc-content"> <span class="details--title">You\'ve unlocked more items we think you\'ll love.</span> <div class="h-tightSpacingTop"> <button class="btn btn-primary btn-lg btn-block" data-dismiss="modal">see unlocked items</button> </div> <div class="h-tightSpacingTop"> <a class="btn btn-default btn-lg btn-block js-feedurl" href="/target-crush/love">view loves</a> </div> </div> <a href="#" class="icon icon-close-circle" data-dismiss="modal" title="close"> <svg role="img" focusable="false"> <use xlink:href="#closeIcon"/> </svg> </a> '}),define("views/tablet/crush/crush.view",["jquery","underscore","backbone","page","Target","addToCart","views/tablet/crush/crush.item.view","views/tablet/crush/feed.item.view","views/tablet/crush/starterlist.item.view","views/tablet/crush/popular.item.view","views/mixins/crush/crush-navigation.mx","views/mixins/crush/crush.mx","views/mixins/crush/crush.tagging-mx","views/mixins/common/recommendation-view-mx","text!templates/common/crush/crush.html","text!templates/tablet/crush/crush.pagination.html","text!templates/common/crush/crush.carousel.html","text!templates/common/crush/crush.sign.in.html","text!templates/common/crush/banner.html","text!templates/common/crush/feed.curation.html","text!templates/common/crush/feed.modal.html","text!templates/tablet/common/recommendations.html","firefly!crush/crush","patlab.dropdown","patlab.affix"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){var N=r.extend({subViewsReference:{},childViewName:"",rawData:null,parentCrush:!0,itemViewRef:{feed:u,love:o,stlist:a,popular:f},css:["/css/patlab/browse.css"],templates:{crushTpl:t.template(d),crushPageTpl:t.template(v),crushCarTpl:t.template(m),crushSignInTpl:t.template(g),crushBannerTpl:t.template(y),feedCurationTpl:t.template(b),recoTpl:t.template(E),feedModalTpl:t.template(w)},popular:{topView:{id:"#js-mTopView",name:"top viewed"},mostLoved:{id:"#js-mLoved",name:"most loved"},brandList:{id:"#js-mBrand",name:"featured brands"}},events:{"click .js-page-nav":"prePageNavigate","click .crushsign":"redirectToSignIn","click .crushcreateacc":"redirectCreateAccount","click .js-feedurl":"redirectToFeedPage"},initializeView:function(){"use strict";var t=this;i.scrollRestoration({type:"manual",page:"crush"}),t.listenTo(n.Events,"c:tgtcrsh:firstload",t.firstLoad),t.listenTo(n.Events,"c:tgtcrsh:items",t.showPage),t.listenTo(n.Events,"c:tgtcrsh:banner",t.showBannerPage),t.listenTo(n.Events,"c:tgtcrsh:removebanner",t.removeBannerPage),t.listenTo(n.Events,"c:tgtcrsh:itemsCarousal",t.showCarousal),t.listenTo(n.Events,"c:paint:collection",function(e){var n,r,i;n=e.collection,r=e.name,i=r&&t.popular[r].id,t.paintSubviews(n,i)}),t.listenTo(n.Events,"c:paint:err-collection",function(e){var n,r,i;n=e.collection,r=e.name,i=r&&t.popular[r].id,t.fallbackPaintSubview(n,i)}),t.listenTo(n.Events,"c:tgtcrsh:maxlovedreached",t.showSignInModal),t.listenTo(n.Events,"tgt:hlpr:loggedin",t.hideSubtitle),t.listenTo(n.Events,"c:collection:rawData",t.pageRawData),t.listenTo(n.Events,"c:tgtcrsh:loveCountUpdated",function(t){e(".js-lovecount").text(t+" loves")}),t.crushFlipTemplate=i.Get.Config("crushFlipTemplate")()},initializePatLab:function(){var e=this;e.dropdown=new x(e.$el)},renderView:function(){var e=this;e.initializePatLab()},emptyView:function(){var e=this;t.each(e.subViewsReference,function(t,n){t.destroy(),delete e.subViewsReference[n]})},hideSubtitle:function(){var t=this;t.childViewName=="stlist"&&e(".js-subtitle").hide()},firstLoad:function(e){var t=this;t.childViewName=e.pageName,t.$el.html(t.templates.crushTpl(e)),t.emptyView(),t.trigger("v:tgtcrush:pageload"),i.Crush.scroll(),t.trackPageLoad(e)},showBannerPage:function(t){var n=this,r=n.$el.closest("#slp-facet-wrap");e(".TGTloading").hide(),r.has("section.stlist-banner").length||r.prepend(n.templates.crushBannerTpl(t.toJSON()))},removeBannerPage:function(t){var n=this,r=n.$el.closest("#slp-facet-wrap");r.has("section.stlist-banner").length&&e("section.stlist-banner").remove()},showPage:function(n){var r=this;e(".TGTloading").hide(),r.childViewName=n.pageName,n=r.getPageSpecificData(n),n.loveCount=i.Crush.getLoves(!0).number||0,r.$el.html(r.templates.crushTpl(n)),r.$("#js-dispType").html(r.templates.crushPageTpl(n)),n.pageData.items&&n.pageData.items.length&&(r.emptyView(),r.createSubViews(n.pageData.items,n.pageName)),r.trigger("v:tgtcrush:pageload"),n.pageName=="stlist"?i.Crush.restoreCrushPagePosition():i.Crush.removeSavedScrollPosition(),setTimeout(function(){e("a.tab-active").focus()},1e3),i.Crush.scroll(),t.deferImage(r.$el),r.trackPageLoad(n),n.pageName=="feed"&&n.signInFromStlist&&setTimeout(function(){r.displayFeedModal()},1e3),r.stickyHeader(),setTimeout(picturefill,2500)},showCarousal:function(t){var n=this,r=n.popular[t.carousalName],s=n.$("#js-dispType "+r.id+" .js-carousel-container");e(".TGTloading").hide(),i.Crush.scroll(),t.carousalTitle=r.name,s.html(n.templates.crushCarTpl(t)),t.pageData&&t.pageData.length&&n.createSubViews(t.pageData,t.pageName,r.id),i.deviceAtlas.isDesktop()&&s.carousel({imageHeight:81}),setTimeout(function(){picturefill()},0),n.stickyHeader()},stickyHeader:function(){var t=this,n;n=t.$el.find(".navtab-arrows"),n.length&&!t.$el.find(".stickyPlaceholder").length&&(n.off("affix.bs.affix affix-top.bs.affix"),n.removeData("bs.affix").removeClass("affix affix-top affix-bottom"),n.affix({offset:{top:n.offset().top}}),n.on("affix.bs.affix affix-top.bs.affix",function(){e(this).hasClass("affix-top")?e(".stickyPlaceholder").height(e(this).outerHeight(!0)):e(".stickyPlaceholder").height(0)}),setTimeout(function(){t.$el.find(".js-subtitle").focus()},200))},getPageSpecificData:function(e){var n=this,r=i.Crush.getUser();return e.header=t.extend(e.header||{},{title:"",subtitle:"",subtitleLnk:"",subtitleLnkHref:"",subtitleClass:""}),e.pageName=="popular"?e.header.subtitle="what other guests love":e.pageName=="stlist"&&(e.header.title="love 3 items to get started",r.loggedIn||t.extend(e.header,{subtitle:"already loved something?",subtitleLnk:"sign in",subtitleClass:"crushsign"})),e},createSubViews:function(t,r,i){"use strict";var s=this;t.forEach(function(t,n){var o,u;o=i?e(i+' .products li[data-id="'+encodeURIComponent(t.id)+'"]'):e('.products li[data-id="'+encodeURIComponent(t.id)+'"]'),u=i||"";if(r=="feed"&&t.get("feedCuration")){o.append(s.templates.feedCurationTpl());return}s.subViewsReference[t.id+u]=new s.itemViewRef[r]({el:o})}),["stlist","love","feed"].indexOf(r)!==-1||r=="popular"&&i==s.popular.mostLoved.id?(s.partialPaint(t,i),n.Events.trigger("v:view:rtp")):s.paintSubviews(t,i)},partialPaint:function(e,t){var n=this,r=t||"";e.forEach(function(e,t){if(e.id=="curation")return;n.subViewsReference[e.id+r].partialModel=e,n.subViewsReference[e.id+r].render(e.toJSON())})},displayFeedModal:function(t){var n=this,r=e("#feed-desc-modal");r.find("a.close").attr("aria-hidden","true"),r.find(".modal-content").html(n.templates.feedModalTpl()),r.modal("show"),r.find(".modal-content").on("animationend",function(){r.hasClass("in")||e("a.tab-active").focus()})},redirectToFeedPage:function(t){var r=this,s=e(t.currentTarget).attr("href");i.util.stopDefaultPropagation(t),n.history.navigate(s,{trigger:!0,replace:!1})},paintSubviews:function(r,s){var o=this,u,a=r.models||r,f=[],l=s||"";r.hlData&&(f=t.difference(t.pluck(r.hlData,"ParentSKU"),t.pluck(r.models,"id"))),a.forEach(function(e){o.renderSubviews(e.id,l,e)}),f=t.without(f,"curation"),f.length&&f.forEach(function(e){u=o.subViewsReference[e+l].partialModel,u.set("unpublished",!0),o.renderSubviews(e,l,u)}),i.deviceAtlas.isDesktop()&&s&&s==="#js-mLoved"&&e(s+" .js-carousel-container").carousel({imageHeight:81}),n.Events.trigger("v:view:rtp"),e(".TGTloading").hide()},fallbackPaintSubview:function(r,s){var o=this,u,a=r.modelIds,f=s||"";a=t.without(a,"curation"),a.forEach(function(e){u=o.subViewsReference[e+f].partialModel,u.set("unpublished",!0),o.renderSubviews(e,f,o.subViewsReference[e+f].partialModel)}),i.deviceAtlas.isDesktop()&&s&&s==="#js-mLoved"&&e(s+" .js-carousel-container").carousel({imageHeight:81}),n.Events.trigger("v:view:rtp"),e(".TGTloading").hide()},renderSubviews:function(e,t,n){var r=this;if(!r.subViewsReference[e+t])return;r.subViewsReference[e+t].model=n,r.subViewsReference[e+t].render()},showSignInModal:function(e){var t=this,n=e.signInContent||{title:"sign in to discover more for you",subtitle:"We'll save the items you loved to your account for easy access.",showSignin:!0,showCreate:!0};s.initATC(t),$modal=t.$("#block-ATC"),$modal.find(".modal-content").children().remove(),$modal.find(".modal-content").html(t.templates.crushSignInTpl(n)),$modal.find("a.close").attr("aria-hidden","true"),$modal.modal({show:!0,backdrop:!0})},redirectToSignIn:function(t){var n=this,r;i.util.stopDefaultPropagation(t),i.Crush.saveCrushData(n),e("#block-ATC").length&&e("#block-ATC").modal("hide"),r=window.matchMedia(" (orientation: landscape) ").matches?e("#js-toggleRightNavLg"):e("#js-toggleRightNav"),r.trigger("click"),setTimeout(function(){e("#rightNavigation .navigation--url").first().trigger("click")},800)},redirectCreateAccount:function(t){var n=this,r;i.util.stopDefaultPropagation(t),i.Crush.saveCrushData(n),e("#block-ATC").length&&e("#block-ATC").modal("hide"),r=window.matchMedia(" (orientation: landscape) ").matches?e("#js-toggleRightNavLg"):e("#js-toggleRightNav"),r.trigger("click"),setTimeout(function(){e("#rightNavigation #rightNav-createAccount").click()},800)},destroy:function(){var e=this;t.each(e.subViewsReference,function(t,n){t.destroy(),delete e.subViewsReference[n]}),i.scrollRestoration({type:"auto",page:"crush"})},prePageNavigate:function(t){var n=this,r=e(t.currentTarget).attr("href");t.preventDefault(),i.Crush.sneak(!0),n.navigate(r)},pageRawData:function(e){var t=this;t.rawData=e}}).mixin([l,c,h,p,S],{viewType:S.VIEW_TYPE_TABLET});return N}),define("templates/tablet/precompiled/store",[],function(){return this.UIModTpl=this.UIModTpl||{},this.UIModTpl["storelocator/storeAddress"]='<% storedetails = storedetailmain.storedetail %> <div class="maincontent"> <%if(storedetails.myStoreEligible){%> <div id="mystore-DetailsPage"> <%}%> <div id="mobile-div-gpt-ad-storelocator_<%= storedetailmain.cid %>" class="dvmSlot"></div> <div class="storeloc_title"> <a tabindex="-1" class="headSetFocus"><h2><b></b></h2> </a> <select id="storeservice" name="storeservice" class="button webkit-list"> <option disabled="" selected="" value="showAll">only show stores with...</option> <option value="pharmacy">pharmacy</option> <option value="PhotoLab">photo center</option> <option value="optical">optical</option> <option value="beauty">beauty concierge</option> <option value="clinic">clinic</option> <option value="freshgrocery">fresh grocery</option> <option value="starbucks">starbucks</option> <option value="mobilekiosk">target mobile</option> <option value="apple">apple store</option> <option value="portrait">portrait studio</option> <option value="wine">wine available</option> <option value="flushot">flu shot(seasonal)</option> <option value="uniform">school uniform</option> </select> </div> <div class="stores-results" id="myStore-results"> <%if(storedetails.myStoreEligible){%> <h2><b>my store</b></h2> <div class="store-wrapper"> <%}%> <% _.each(storedetails.storeListArray,function(storeListObj,index){ %> <a id="<%= storeListObj.ID %>" class="storeloc-content store-link" href="sl/<%=storeListObj.Name.replace(/\\s+/g, \'-\').toLowerCase()%>/<%= storeListObj.ID %>&dvm=true"> <h3 class="header-title"> <%=storeListObj.Name%> <%= storeListObj.ID == storedetails.myStoreId ? \'<span>My Store<span>\' : \'\' %> </h3> <p class="miles"><%=parseFloat(Math.round(storeListObj.LocationRelationship.DistanceToRelatedLocation * 100) / 100).toFixed(2) %> <%= storeListObj.LocationRelationship.DistanceUnitOfMeasureDescription %></p> <div class="substore-content"> <%if(storeListObj.Address){%> <p class="para-text"><%= storeListObj.Address.AddressLine1 %></p> <%}%> <div class="button_right"> <button class="store-infobtn item-name">store info</button> <% if(storeListObj.ID != storedetails.myStoreId) {%> <button class="setinfo-buton">set as store</button> <%  } %> </div> </div> </a> <% }); %> <% if(storedetails.storeListArray.length == 0){ %> <div class="errortxt"> Sorry. There are no Target stores within 100 miles of your location that match your search request. Your closest Target stores are displayed below. </div> <% } %> </div> </div> <form action="#" class="find-store general" id="storelocatornew" method="post" autocomplete="off"> <h3 class="sec-title">find a store </h3> <div class="storesresult-input-wrapper"> <input type="text" placeholder="enter ZIP or city, state" value="" name="address" class="stores-input address" id="location"> </div> <button type="submit" value="Find Stores" id="saveAddressUpdate" class="findstore-button">find stores</button> </form> <%if(storedetails.myStoreEligible){%> </div></div> <%}%> <div id="mobile-div-gpt-ad-storelocator_<%= storedetailmain.cid1 %>" class="dvmSlot"></div> <%if(storedetails.myStoreEligible){%>  <%}%>',this.UIModTpl["storelocator/storeDetails"]='<% storedata = storedatadetails.storedatamain;%> <div class="l-row"> <%if(!storedatadetails.isGAMDash) { %> <div class="l-col-xs-12 l-col-sm-7 h-border-right"> <div class="store-details-header h-text-center h-standardSpacingTop"> <h1 class="title-text alpha" title="<%=storedata.storedetails.Name%>"><%=storedata.storedetails.Name%></h1> <p class="title-subtext"> <a class="link link-grayDark link-underline searchDiffStore" href="/store-locator/find-stores">search for a different store</a> </p> </div> <div id="store-details-card" class="l-col-xs-12 l-col-nopadding"> <div class="puisBtnCnt add-to-cart-wrap"></div> <% } else { %> <div class="l-col-xs-12 l-col-nopadding h-standardSpacingTop"> <div class="title"> <h2 class="title-text alpha">my store</h2> </div> <div id="store-details-card" class="l-col-xs-12 l-col-nopadding"> <% } %> <div class="card card-store <% if(storedata.myStore) { %>is-active<% } %>" id="store-<%=storedata.storedetails.ID %>"> <h3 class="h-text-normal h-text-xl js-titleSection"> <%if(!storedatadetails.isGAMDash) { %> store info <% } else { %> <%=storedata.storedetails.Name%> <% } %> <span class="h-tinySpacingLeft badge badge-green js-myStore">my store</span> </h3> <hr> <div> <div class="l-col-xs-12 l-col-nopadding"> <%if(storedata.storedetails.Address){%> <a target="_blank" class="link link-grayDarkest link-underline" href="http://maps.apple.com/?q=<%= storedata.storedetails.Address.FormattedAddress %>"><address><%= storedata.storedetails.Address.AddressLine1 %> <%= storedata.storedetails.Address.City %>, <%= storedata.storedetails.Address.Subdivision %> <%= storedata.storedetails.Address.PostalCode %></address></a> <%}%> <div class="store-hours"> <%_.each(storedata.storedetails.enhancedWeeklyStoreHours,function(hours,index){%> <div class="<%= hours.classHours %>"> <span id="<%= hours.day %>" aria-hidden="true"> <span class="days-open"><%= hours.day %>:</span> <span><%= hours.hoursSummary%></span> </span> <div class="h-sr-only"><%=hours.dayFullName %> <%= hours.hoursSummary%></div> </div> <%});%> <%if(storedata.storedetails.contactPhone){%> <div class="h-standardSpacingBottom"> <p> <a href="<%= storedata.storedetails.contactPhoneFormatted %>" class="link link-grayDarkest link-underline"><%= storedata.storedetails.contactPhone %></a> </p> </div> <%}%> </div> </div> <% if(storedata.storedetails.AlternateOperatingHours){ %> <div class="l-col-xs-12 l-col-md-12 l-col-lg-12 l-col-nopadding h-standardSpacingBottom"> <p class="h-text-orangeDark h-tightSpacingTop">*<%= storedata.storedetails.AlternateOperatingHours.Hours.TextMessage %></p> </div> <%}%> </div> <a target="_blank" class="btn btn-default btn-sm weeklyAdd" href="<%= storedata.weeklyAdURL %>" aria-label="click to view store weekly ad">weekly ad</a> <a target="_blank" class="btn btn-default btn-sm storeMap" href="<%= storedata.storedetails.storeMapImgPath %>">map</a> <%if(storedatadetails.isGAMDash) { %> <a class="link link-grayDark link-underline" href="/store-locator/find-stores">change my store</a> <%} else if(!storedata.myStore) {%> <button data-behavior="setMyStoreDetails" id="make_<%= storedata.storedetails.ID %>" data-store-name="<%= storedata.storedetails.Name %>" data-store-id="<%= storedata.storedetails.ID %>" class="btn btn-primary btn-sm"> make it <span class="h-sr-only"><%=storedata.storedetails.Name%></span> my store </button> <%} %> </div> <div class="h-text-left h-standardSpacingTop"> <h2 class="title-text bravo">free order pickup</h2> <p class="title-subtext"> order online & pick up today. <a class="link link-grayDark link-underline" href="http://help.target.com/help/subcategoryarticle?lnk=shippinghub_orderpickupfaq&childcat=Order+Pickup&parentcat=Delivery+Options">learn more</a> </p> </div> <div class="product-category-list l-col-xs-12 l-col-nopadding"> <ul class="categories l-col-xs-block-3 l-col-sm-block-3 l-col-md-block-3 l-col-lg-block-3 l-col-xl-block-6 l-col-halfpadding js-related-feature"> <% var base_url = window.location.host; _.each(storedata.storePickupCateogries,function(value,key){ var value_url=value.url; value_url = value_url.replace(\'/c\',\'c\'); %> <li> <a href="http://<%=base_url%>/<%= value_url %>" class="js-category-link"> <figure><img alt="" src="<%= value.img %>" data-src="<%= value.img %>"></figure> <figcaption><%= value.title %></figcaption> </a> </li> <%});%> </ul> </div> <hr class="card--hr"> <div class="h-text-left h-standardSpacingTop"> <h3 class="title-text bravo">save at the store</h3> <p class="title-subtext"> mobile savings. Target style. </p> </div> <a class="btn btn-default btn-block btn-lg cartWheel" target="_blank" href="http://cartwheel.target.com">check out Cartwheel</a> <hr class="card--hr"> <div id="store-capability-accordion"> <ul class="accordion"> <% _.each(storedata.storedetails.Capability,function(capability,index){ %> <li <% if(capability.hasAddlDetails) { %> class="accordion--item card-storeDetails" data-behavior="toggle" data-self="true" <% }else{ %> class="accordion--item is-empty" <% } %>> <% if(capability.hasAddlDetails) { %> <a href="javscript:void(0);" class="accordion--title"> <%=capability.CapabilityName%> <span class="h-sr-only a11y-text-toggle"> shows more content</span> </a> <section class="accordion--content store-hours"> <% }else { %> <div class="accordion--title"> <%=capability.CapabilityName%> </div> <% }%> <%if(capability.hasStoreHours){%> <%_.each(capability.storeHours,function(hours,index){%> <div class="<%= hours.classHours %>"> <label for="<%= hours.day %>_cat" class="h-sr-only" style="width:100%; display:block"><%=hours.dayFullName %> <%= hours.hoursSummary%></label> <span id="<%= hours.day %>_cat"> <span class="days-open" aria-hidden="true"><%= hours.day%>:</span> <span aria-hidden="true"><%= hours.hoursSummary%></span> </span> </div> <%});%> <%}%> <%if(capability.contactPhone){%> <p><a href="<%= capability.contactPhoneFormatted %>" class="link link-grayDarkest link-underline"><%= capability.contactPhone %></a></p> <% }%> <% if(capability.hasAddlDetails) { %> </section> <% }%> </li> <%});%> </ul> </div> </div> </div> <%if(!storedatadetails.isGAMDash) { %> <div class="l-col-xs-12 l-col-sm-5"> <%if(storedata.storedetails.hasNearByStores) { %> <div class="h-text-left h-standardSpacingTop"> <h3 class="title-text bravo">nearby stores</h3> </div> <ul class="l-row l-col-xs-12 l-col-nopadding"> <% _.each(storedata.storedetails.storeListArray,function(storeListObj){ %> <li class="l-col-xs-12 l-col-nopadding"> <div class="card card-store <%if(storeListObj.isSelectedMyStore){%>is-active<% } %>" id="store-<%= storeListObj.ID %>"> <h3 class="js-listtitleSection h-text-normal h-text-xl" data-store-id="<%= storeListObj.ID %>" data-store-name="<%= storeListObj.fname%>"> <%= storeListObj.fname%> <span class="h-tinySpacingLeft badge badge-green js-myStore">my store</span> </h3> <hr> <div class="h-tightSpacingBottom"> <%if(storeListObj.Address){%> <a class="link link-grayDarkest link-underline" href="http://maps.apple.com/?q=<%= storeListObj.Address.FormattedAddress %>"><address><%= storeListObj.Address.AddressLine1 %>&nbsp; <%= storeListObj.Address.City %>, <%= storeListObj.Address.Subdivision %> <%= storeListObj.Address.PostalCode %></address></a> <%}%> <% if(storeListObj.isStoreOpen) { %> <p class="h-text-greenDark">open today: <%= storeListObj.enhanceHours %></p> <%} else {%> <p class="h-text-greenDark">closed today</p> <%}%> <%if(storeListObj.contactPhone !== undefined){%> <a href="<%= storeListObj.contactPhoneFormatted %>" class="link link-grayDarkest link-underline"><%= storeListObj.contactPhone %></a> <%}%> <% if(storeListObj.AlternateOperatingHours){ %> <p class="h-text-orangeDark h-tightSpacingTop">*<%= storeListObj.AlternateOperatingHours.Hours.TextMessage.substring(0, 50) %>...</p> <%}%> </div> <button data-behavior="redirectStoreDetails" id="storeinfo_<%= storeListObj.ID %>" data-store-id="<%= storeListObj.ID %>" data-store-name="<%= storeListObj.fname %>" class="btn btn-default btn-sm"> store info <span class="h-sr-only">for <%= storeListObj.fname%></span> </button> <%if(!storeListObj.isSelectedMyStore){%> <button data-behavior="setMyStoreNearBy" id="make_<%= storeListObj.ID %>" data-store-name="<%= storeListObj.fname %>" data-store-id="<%= storeListObj.ID %>" class="btn btn-primary btn-sm"> make it <span class="h-sr-only"><%= storeListObj.fname%></span> my store </button> <%}%> </div> </li> <% }); %> </ul> <div class="card-full"> <div role="main"> <div id="mobile-div-gpt-ad-storelocator_<%= storedatadetails.cid %>" class="sl-dvm-footer sd-dvm-footer"></div> <div style="margin-top: 10px" id="mobile-div-gpt-ad-storelocator_<%= storedatadetails.cid1 %>" class="sl-dvm-footer sd-dvm-footer"></div> <div style="margin-top: 10px" id="mobile-div-gpt-ad-storelocator_<%= storedatadetails.cid2 %>" class="sl-dvm-footer sd-dvm-footer"></div> </div> </div> </div> <% }%> </div> <% }%> </div> <div id="addToCartOverlay"> <div class="triangle"></div> <div class="modal fade in" id="block-ATC" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> <div class="modal-dialog xsmall"> <div class="modal-content modal-container scContent"> <div class="content-ATC"></div> </div> </div> </div> </div> <div id="store-pop-overlay"> </div>',this.UIModTpl["storelocator/storeLocator"]='<div class="l-row"> <div class="l-col-xs-12 l-col-halfpadding"> <div class="storeFinder"> <div class="storeFinder--header h-standardSpacingTop"> <div class="title h-standardSpacingBottom"> <h1 class="title-text alpha">find a store</h1> <p class="title-subtext"> </p><h2 id="storeSearchText" class="delta h-display-inline h-text-normal h-text-grayDarker"></h2> <% if (storedetails.showPreciseLocation) { %>  <% }  %> <p></p> </div> <button class="btn btn-default storeFinder--searchToggle is-active" id="js-searchToggle" data-behavior="toggle" data-target="#js-searchContainer, #js-searchCancel" data-alternate="#js-filterToggle">search</button> <button class="btn btn-primary storeFinder--searchCancel" id="js-searchCancel" data-behavior="toggle" data-target="#js-searchContainer, #js-searchToggle" aria-hidden="true">cancel search</button> <button class="btn btn-default storeFinder--filterToggle is-active" id="js-filterToggle" data-behavior="toggle" data-target="#js-filterContainer, .js-filterSubmit" data-alternate="#js-searchToggle">filter by services</button> <button class="btn btn-primary storeFinder--filterSubmit js-filterSubmit" id="js-filterSubmit" data-behavior="toggle" data-target="#js-filterContainer, #js-filterToggle" aria-hidden="true">done filtering</button> <%if(storedetails.hasServices){%> <h3 class="h-sr-only">Current Filters</h3> <ul class="productFilter--tiles" id="js-filterTiles"> <% _.each(storedetails.services, function(service) { %> <li><button data-behavior="removeFilter" data-value="<%= service %>" class="btn btn-default btn-sm"><%= storedetails.capabilityList[service] %><img class="icon-filter-close" src="<%=img_domain%>/images/icons/filter-close.svg" alt="remove filter"></button></li> <% }); %> </ul> <% }  %> </div> <div class="storeFinder--search" id="js-searchContainer" aria-hidden="true"> <form id="storelocatornew" action="#"> <h2 class="title-text bravo">search</h2> <div class="form form-input" data-behavior="forms"> <label for="location">zip or city, state</label> <input id="location" class="form--control js-adaptiveInput" type="text"> <aside id="location--longInstruction" class="form--longInstruction" aria-hidden="true"></aside> </div> <button type="submit" class="btn btn-primary btn-block js-searchSubmit">find stores</button> </form> </div> <div class="storeFinder--filter" id="js-filterContainer" aria-hidden="true"> <hr> <div id="item1"> <h2 class="title-text bravo">store services</h2> <section> <div class="l-row"> <% var iServiceLoop = 0; _.each(storedetails.displayCapability, function(selected, service) { %> <% if (iServiceLoop % 5 == 0) { if(iServiceLoop > 0) { %></div><% } %> <div class="l-col-xs-12 l-col-sm-4"> <% } %> <div class="form form-checkbox"> <input id="<%= service %>" class="form--control js-checkbox" name="concept" type="checkbox" value="<%= service %>" <%= (selected ? \'checked="checked"\' : \'\') %> > <label for="<%= service %>" class="form--label" <%= (selected ? \'aria-checked="true"\' : \'\') %> > <span class="form--text"><%= storedetails.capabilityList[service] %></span> </label> </div> <% iServiceLoop++; }); %> </div> </section> </div> <hr> </div> </div> <div id="resultSection"></div> <% if(cid !== undefined) { %> <div role="main" class="l-row"> <div class="h-sr-only" aria-hidden="true">Third party advertisement</div> <div style="padding-top: 10px" id="mobile-div-gpt-ad-storelocator_<%= cid %>"></div> <div style="padding-top: 10px; margin-left: 15px" id="mobile-div-gpt-ad-storelocator_<%= cid1 %>"></div> <% if(typeof isDesktop != \'undefined\') { %> <div style="padding-top: 10px; margin-left: 15px" id="mobile-div-gpt-ad-storelocator_<%= cid2 %>"></div> <% } %> </div> <% } %> </div> </div> <%= _.renderPartial(commonTpls[\'common/overlay\']) %> <div id="locationConfirmation" class="is-hidden" aria-hidden="true"> <div class="h-standardSpacingBottom" id="confirmContent">Location services may be disabled or un-available on your device. Select "search" to enter your ZIP code or city & state to find a Target store near you.</div> </div>',this.UIModTpl["storelocator/storeSearchResult"]='<ul class="l-row l-row-equal"> <% _.each(storedetails.storeListArray,function(storeListObj, key){ %> <% if(inListDvm && key === 3) { %> <li> <div role="main" style="margin: 0px 10px 10px 20px"> <div id="mobile-div-gpt-ad-storelocator_<%= cid2%>"></div> </div> </li> <% } %> <li class="l-col-xs-12 l-col-sm-6 l-col-md-6 l-col-lg-4 l-col-halfpadding h-standardSpacingBottom"> <div class="card card-store h-overflow-hidden <%if(storeListObj.isSelectedMyStore){%>is-active<% } %>" id="store-<%= storeListObj.ID %>"> <h3 class="js-listtitleSection h-text-normal h-text-xl" data-store-id="<%= storeListObj.ID %>" data-store-name="<%= storeListObj.fname %>"> <%= storeListObj.fname%> <span class="h-tinySpacingLeft badge badge-green js-myStore">my store</span> </h3> <hr> <div class="h-tightSpacingBottom"> <%if(storeListObj.Address){%> <a class="link link-grayDarkest link-underline" href="http://maps.apple.com/?q=<%= storeListObj.Address.FormattedAddress %>"><%= storeListObj.Address.AddressLine1 %>&nbsp; <%= storeListObj.Address.City %>, <%= storeListObj.Address.Subdivision %> <%= storeListObj.Address.PostalCode %></a> <%}%> <% if(storeListObj.isStoreOpen) { %> <p class="h-text-greenDark">open today: <%= storeListObj.enhanceHours || storeListObj.todayHours %></p> <%} else {%> <p class="h-text-greenDark">closed today</p> <%}%> <%if(storeListObj.contactPhone !== undefined){%> <a href="<%= storeListObj.contactPhoneFormatted %>" class="link link-grayDarkest link-underline"><%= storeListObj.contactPhone %></a> <%}%> <% if(storeListObj.AlternateOperatingHours) { %> <p class="h-text-orangeDark h-text-overflow-ellipsis h-tinySpacingTop">*<%= storeListObj.AlternateOperatingHours.Hours.TextMessage.substring(0, 50) %>...</p> <%}%> </div> <button data-behavior="redirectStoreDetails" id="storeinfo_<%= storeListObj.ID %>" data-store-id="<%= storeListObj.ID %>" data-store-name="<%= storeListObj.fname %>" class="btn btn-default btn-sm"> store info <span class="h-sr-only">for <%= storeListObj.fname%></span> </button> <%if(!storeListObj.isSelectedMyStore){%> <button data-behavior="setMyStoreList" data-store-name="<%= storeListObj.fname %>" data-store-id="<%= storeListObj.ID %>" class="btn btn-primary btn-sm"> make it <span class="h-sr-only"><%= storeListObj.fname%></span> my store </button> <%}%> </div> </li> <% }); %> </ul>',this.UIModTpl}),define("views/models/storelocator/storelocator.view.model",["underscore"],function(e){return{formatStoreHours:function(e){if(!e)return"";var t=e.split(":"),n=parseInt(t[0],10),r=parseInt(t[1],10),i="am";return e==="23:59:59"||e==="00:00:00"?"12:00 am":(n>11&&(i="pm"),n>12&&(n-=12),n===0&&(n=12),r=r<10?"0"+r:r.toString(),n+":"+r+" "+i)},getEnhancedWeeklyStoreHours:function(e,t){var n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=(new Date).toDateString().split(" ")[0],i=e.EnhancedOperatingHours.Weeks.map(function(e){return e.Days.reduce(function(e,n){var r=n.DayName.slice(0,3),i=t.formatStoreHours(n.Hours.BeginTime),s=t.formatStoreHours(n.Hours.EndTime);return i&&i===s?e[r]="open 24 hours":i&&s&&(e[r]=i+" &ndash; "+s),e},{})}),s=i[1]?1:0;return n=n.map(function(e){var t={day:e,classHours:""};return e===r&&(s=0,t.classHours="h-text-greenDark"),t.hoursSummary=i[s][e]||"closed",t.week=s?"future":"current",t}),n.push(n.shift()),n},getEnhancementHours:function(e,t){var n="closed",r=!1,i=(new Date).toDateString().split(" ")[0];return e.EnhancedOperatingHours.Weeks[0].Days.forEach(function(e){var s=e.DayName.slice(0,3),o=t.formatStoreHours(e.Hours.BeginTime),u=t.formatStoreHours(e.Hours.EndTime);s===i&&(o&&o===u?(r=!0,n="open 24 hours"):o&&u&&(r=!0,n=o+" &ndash; "+u))}),{enhanceHours:n,isStoreOpen:r}},showStoreDetail:function(t){var n=t.storedatamain;n.storedetails.contactPhone!==undefined?n.storedetails.contactPhoneFormatted="tel:+1"+n.storedetails.contactPhone.replace(/[\(\)\.\-\ ]/g,""):n.storedetails.contactPhone="",n.storedetails.Address&&(n.storedetails.Address.PostalCode=n.storedetails.Address.PostalCode.substr(0,5)),n.hasweeklyAdImgPath=e.isDefined(n.weeklyAdImgPath)&&n.weeklyAdImgPath!=="",n.test="trying",n.storePickupCateogries=[],n.storePickupCateogries.push({title:"Groceries & Essentials",url:"/c/grocery-essentials/-/N-5xt1a",img:"http://scene7.targetimg1.com/is/image/Target/17314067?wid=150&amp;hei=150&amp;qlt=80"}),n.storePickupCateogries.push({title:"Baby",url:"c/baby/-/N-5xtly",img:"http://target.scene7.com/is/image/Target/14216717?wid=150&amp;hei=150&amp;qlt=80"}),n.storePickupCateogries.push({title:"Home Decor",url:"/c/home-decor/-/N-5xtub",img:"http://scene7.targetimg1.com/is/image/Target/17163659?wid=150&amp;hei=150&amp;qlt=80"}),n.storePickupCateogries.push({title:"Bedding",url:"/c/bedding-home/-/N-5xtv4",img:"http://scene7.targetimg1.com/is/image/Target/14163532?wid=150&amp;hei=150&amp;qlt=80"}),n.storePickupCateogries.push({title:"Bath",url:"/c/bath-home/-/N-5xtvc",img:"http://scene7.targetimg1.com/is/image/Target/14174648?wid=150&amp;hei=150&amp;qlt=80"}),n.storePickupCateogries.push({title:"Dining & Entertaining",url:"/c/dining-entertaining-home/-/N-557t7",img:"http://scene7.targetimg1.com/is/image/Target/14159635?wid=150&amp;hei=150&amp;qlt=80"}),e.each(n.storedetails.Capability,function(t){t.CapabilityName=t.CapabilityName.toLowerCase(),t.hasAddlDetails=!!t.contactPhone||!!t.storeHours,t.contactPhone?t.contactPhoneFormatted="tel:+1"+t.contactPhone.replace(/[\(\)\.\-\ ]/g,""):t.contactPhone="",t.hasStoreHours=!!t.storeHours,e.each(t.storeHours,function(e){e.day===n.storedetails.currentWeekDay?n.storedetails.isStoreOpen?e.classHours="h-text-greenDark":e.classHours="h-text-red":e.classHours=""})}),e.each(n.storedetails.storeHours,function(e){e.classHours=e.day===n.storedetails.currentWeekDay?"h-text-greenDark":""}),n.storedetails.currentDayClass=n.storedetails.isStoreOpen?"h-text-greenDark":"h-text-red";if(n.storedetails.EnhancedOperatingHours&&n.storedetails.EnhancedOperatingHours.Weeks){var r=t.viewModelInstance.getEnhancedWeeklyStoreHours(n.storedetails,t.viewModelInstance);n.storedetails.enhancedWeeklyStoreHours=r}return e.each(n.storedetails.storeListArray,function(e){if(e.EnhancedOperatingHours&&e.EnhancedOperatingHours.Weeks){var n=t.viewModelInstance.getEnhancementHours(e,t.viewModelInstance);e.enhanceHours=n.enhanceHours,e.isStoreOpen=n.isStoreOpen}}),t.storedatamain=n,{storedatadetails:t}},showSearchResult:function(t){return e.each(t.storedetails.storeListArray,function(e){var n=e.Name.split("With");e.fname=n[0],n[1]&&(e.lname=n[1]),e.Address&&(e.Address.PostalCode=e.Address.PostalCode.substr(0,5)),e.contactPhone?e.contactPhoneFormatted="tel:+1"+e.contactPhone.replace(/[\(\)\.\-\ ]/g,""):e.contactPhone="";if(e.EnhancedOperatingHours&&e.EnhancedOperatingHours.Weeks){var r=t.viewModelInstance.getEnhancementHours(e,t.viewModelInstance);e.enhanceHours=r.enhanceHours,e.isStoreOpen=r.isStoreOpen}}),t},showStoreFinderPage:function(t){var n={};return t.storedetails&&e.findWhere(t.storedetails.capabilityList,t.storedetails.capabilityList.flushot)&&delete t.storedetails.capabilityList.flushot,e.each(t.storedetails.capabilityList,function(e,r){t.storedetails.services.indexOf(r)==-1?n[r]=!1:n[r]=!0}),t.storedetails.displayCapability=n,t}}}),define("views/mixins/storelocator/storelocator-mx",["Target","backbone","serviceAdapter"],function(t,n,r){var s=function(s){return{addToObj:{events:{"click [data-behavior=toggle]":"onClickToggle",'click [type="checkbox"]':"populateCheckBoxArray","click .js-filterSubmit":"applyFilters","click #preciseLocation":"watchForUserLocation","submit form#storelocatornew":"routeSearchResults","click #privacyPolicy":"showPrivacyPolicy","click #puisBtn":"navigateToCartPage","click #productTitleLink":"navigateToPdpPage","click .stores-narrow-wrapper a":"getStoresinArea","click [data-behavior=redirectStoreDetails]":"redirectStoreDetails","click .js-listtitleSection":"redirectStoreDetails","click [data-behavior=setMyStoreDetails]":"setMyStoreDetails","click [data-behavior=setMyStoreList]":"setMyStoreList","click [data-behavior=setMyStoreNearBy]":"setMyStoreNearBy","click [data-behavior=removeFilter]":"removeFilter","click #js-filterToggle":"refineSearch","change #pickupCategories":"navigateToCategoryPage","click .menuActionDetails a":"tagClickEvent","click #js-searchToggle":"setInputField","click [data-dismiss=modal]":"setSearchZipFocus","click .weeklyAdd,.storeMap,.cartWheel,.searchDiffStore":"taggingClick"}},setDefaults:{bindBackboneEvents:function(){this.listenTo(n.Events,"c:sl:storedetails",this.renderStoreDetails),this.listenTo(n.Events,"c:sl:storeresults",this.renderStoreResults),this.listenTo(n.Events,"c:sl:storefinder",this.renderStoreFinder),this.listenTo(n.Events,"c:sl:emptyllatlongstores",this.buildErrorString),this.listenTo(n.Events,"c:sl:setModel",this.setModel),this.listenTo(n.Events,"c:sl:addPuisBtn",this.addPuisBtn),this.listenTo(n.Events,"modal:fiats:showStoresList",this.showStoresList),this.listenTo(n.Events,"flyout:searchStoreList",this.routeSearchResults),this.listenTo(this.addItem,"atc:failure",this.atcFailure),this.listenTo(this,"v:var:alert",this.showCartWarning)},patlab:{},locationAttempts:0,addItem:s.addItem,css:["/css/patlab/gam.css"],conceptQueryString:"",conceptServiceString:"",searchFromText:!1,fromBrowser:!1,currentTarget:null,fromEvent:!1,time:31536e6,searchtext:"",showError:!1,lat:"",lang:"",storeFinderSearch:!1,myStoreSearchText:"",storeDetailsPage:!1,setStoreAsMyStore:!1,myStoreDetails:!1,detailPageFromFiats:!1,servicesList:[],fromPageLoad:!1,detailstimeStamp:"",detailstimeStamp1:"",listtimeStamp:"",listtimeStamp1:"",isOperationFiltered:!1,onClickToggle:function(e){if(e.target!==e.currentTarget&&$(e.target).parents(".accordion--content").length)return;var t=e.currentTarget;e.preventDefault();var n=$(t).data(),r=$(n.target).add(e.currentTarget);this.patlab.toggler.toggle(t,n)},showStoresList:function(){var t={errorPage:"fiats"};n.Events.trigger("fiats:showSearch",this.model.get("searchText"))},navigateToCartPage:function(e){this.stopAll(e);var n=t.getParameterByName("tcin"),r=t.getParameterByName("espWarrantyId"),i=encodeURIComponent(decodeURI(window.location.protocol=="http:"?window.location.href.replace(domain,""):window.location.href.replace(secure_domain,""))),s=$(e.target).attr("data-catentryid"),o=$(e.target).attr("data-partNumber"),u=$(e.target).attr("data-islto"),a=$(e.target).attr("data-store-id"),f={products:[{partnumber:o,quantity:"1",type:"PICKUP",storeId:a}]},l=[],c={product:n,units:"1",ffType:"flexible"};l.push(c);var h={products:l,addToCartLocation:"store details",ffType:"flexible",units:"1"},p=this.model.attributes.itemPDPData.Offers&&this.model.attributes.itemPDPData.Offers[0]&&this.model.attributes.itemPDPData.Offers[0].OfferPrice&&_.findWhere(this.model.attributes.itemPDPData.Offers[0].OfferPrice,{currencyCode:"USD"});p.formattedPriceValue&&(h.revenue=this.model.attributes.itemPDPData.Offers[0].OfferPrice[0].formattedPriceValue,h.products[0].revenue=this.model.attributes.itemPDPData.Offers[0].OfferPrice[0].formattedPriceValue),f.cartBsdlObj=h;if(isNaN(t.getDefaultStoreId())){var d=$(e.target).attr("data-store-id"),v=this.model.get("storedetails").Address.PostalCode,m=this.model.get("storedetails").Name,g={storeId:d,storeName:m,storeZip:v};this.trackingEventHandler("make this mystore");var y=t.domainName();d!=""&&(t.Set.TCookie("myStoreId",d),t.Set.TCookie("myStoreName",m),t.setFiatsCookie(g,"fiatsCookie"),Tgt_Common_Helper.setMyStoreChangedByUser(!0),document.location.href.indexOf("target.com")==-1&&(t.Set.TCookie("myStoreId",d),t.Set.TCookie("myStoreName",m)),this.model.set("myStore",!0),this.setStoreAsMyStore=!0,this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking())}if(this.pageQueryString&&this.pageQueryString.oi){var b={shipmode:[{cartItemId:this.pageQueryString.oi.toString(),storeId:a,type:"PICKUP"}]};this.updateShipMethod(b,f)}else u=="true"&&(f.isLTO=!0),r&&r!=""&&(f.products[0].childItemType="ESP",f.products[0].childPartNumber=r),this.pageQueryString&&_.isDefined(this.pageQueryString.registryId)&&this.checkRegistry(f),this.addItem.addToCart(f,"noBackground","storedetail")},showPrivacyPolicy:function(e){e.preventDefault();var t=$(e.currentTarget).attr("href"),r=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");n.history.navigate(r.slice(0,r.lastIndexOf("/"))+t,{trigger:!0,refresh:!1})},atcFailure:function(e){var t=this,n=_.getVal(e,"[0].errorKey");if(n==="UN_AUTHORISED"&&this.retryATC){this.retryATC=!1,this.initiateAddToCart($(this.el).find(".replacedButtonClass"));return}this.retryATC=!0,this.$("#block-ATC").is(":visible")&&this.$("#block-ATC").modal("hide"),n?this.showAlert(n,$(".puisBtnCnt").find(".replacedButtonClass"),!1,e.guestMessage?e.guestMessage:_.getVal(e,"[0].errorMessage")):this.showAlert("SBC_ATC_GLOBAL_ERROR",$(".puisBtnCnt").find(".replacedButtonClass"),!0)},showAlert:function(e,t,n,r){this.trigger("v:var:alert",e,t,n,r)},showCartWarning:function(e,n,r,i){var s=t.labels.get(e);e==="_ERR_AVL_PARTIAL_INVENTORY"?e=t.labels.get(e,{limitValue:i||""}):e==="SBC_ERR_AVL_INVENTORY"||e==="_ERR_AVL_INVENTORY"?e=t.labels.get("_ERR_AVL_INVENTORY"):s.indexOf("_ERR")==="0"||e==="SBC_ATC_GLOBAL_ERROR"?e=t.labels.get("ADD_TO_CART_FAIL"):e=t.labels.get(e),r?this.showGlobalError(e):this.showFadeAwayModal("popover-alert",e,n,e)},showGlobalError:function(e){var t=this.templates.globalErrorTpl({message:e,linkText:""}),n=this,r=function(){i&&window.clearTimeout(i),n.$(".sbc-gerror").slideUp("slow",function(){$(this).remove()})};this.$(".sbc-gerror").remove(),this.$el.prepend(t);var i=window.setTimeout(r,2800)},routeSearchResults:function(e){var r=this,i,s,o,u,a=$("#js-searchCancel"),f=a.data();r.stopAll(e),e&&e.currentTarget?(s=$(e.currentTarget).find("#location"),i=s.val()):i=e;var l="&capabilities="+t.getParameterByName("capabilities"),c="store-locator/find-stores?address="+i+l,h=t.Template.bridgeData.feature.EVENT_TYPE;$(".errorMessage").remove(),$("#location").removeClass("error"),r.hideLoader();if(!this.validateInput(e))return!1;r.showLoader(),t.getParameterByName("event")===h&&(c=c+"&event="+h),u=$("input:checkbox[name=concept]:checked").map(function(){return this.value}).get(),u&&(o="&concept="+u.join(",")),t.getParameterByName("capabilities")&&(o="&concept="+t.getParameterByName("capabilities"),u=t.getParameterByName("capabilities").split(",")),c=o?c+o:c;var p=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");n.history.navigate(p.slice(0,p.lastIndexOf("/"))+c,{trigger:!1,replace:!1}),this.model.set("services",u),this.model.set("searchText",i),this.model.set("showPreciseLocation",i!==""),this.storeFinderSearch=!0,this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking(),this.storeFinderSearch=!1,r.routeFromFinder(),this.patlab.toggler.toggle(a[0],f)},overlayDisplay:function(e,t,n,r){this.stopAll(e);var i=$("#overlayModal");i.find("#myModalLabel").html(t),i.find("#myModalSubTitle").html(n),$("#overlayContent").empty().append(r),i.modal(),setTimeout(function(){$("#myModalLabel").attr("tabindex","-1").focus()},1500)},setModel:function(e){!this.model&&e&&(this.model=e)},checkRegistry:function(e){if(this.pageQueryString.regMode!=="REG"){var t=this.pageQueryString.registryId;if(t){var n={},r=this.pageQueryString.registryType;r!=="L"&&(r="R"),n.type=r&&r=="R"?"Registry":"List",n.affiliateId=t,n.sequenceNumber=this.pageQueryString.itemLineNum,e.products[0].affiliate=n}}},makeAjaxCall:function(e,t,n){var r=this,i=n||"json",s=n=="jsonp"?"targetCallback":undefined;$.ajax({url:e,dataType:i,async:!0,type:"GET",jsonpCallback:s,success:function(e){$("a.headSetFocus").focus(),t.call(r,e)},error:function(){}})},tagClickEvent:function(e){e!==undefined&&$(e.currentTarget).length>0&&($(e.currentTarget).hasClass("weeklyAdd")?this.trackingEventHandler("weekly ad link"):this.trackingEventHandler("store map link"))},taggingClick:function(e){e!==undefined&&$(e.currentTarget).length>0&&($(e.currentTarget).hasClass("weeklyAdd")?this.trackingEventHandler("weekly ad link"):$(e.currentTarget).hasClass("storeMap")?this.trackingEventHandler("store map link"):$(e.currentTarget).hasClass("cartWheel")?this.trackingEventHandler("cart wheel link"):$(e.currentTarget).hasClass("searchDiffStore")&&this.trackingEventHandler("search different store link"))},trackingEventHandler:function(e){var n="";this.model.toJSON().storedetails&&(n=this.model.toJSON().storedetails.ID);try{this.eventType="clickInteraction",this.eventBsdlObj={pageName:"store details",events:"event66",action:e,loginStatus:t.User.isAnonymous?"Anonymous":"Authenticated",location:"mobile: store locator: store details",store:n},this.bootstrapEventTracking()}catch(r){}},refineSearch:function(){var e=this.conceptServiceString.split(","),t=this;_.each($("input:checkbox.js-checkbox"),function(t){$.inArray($(t).val(),e)!==-1?($(t).attr("checked","checked"),$(t).parent().find("[data-action~=checkbox]").attr("aria-checked","true")):($(t).removeAttr("checked"),$(t).parent().find("[data-action~=checkbox]").attr("aria-checked","false"))}),t.$el.find("#accordion-store-filter").attr("tabindex","-1").focus()},applyFilters:function(e){var r=[];if(e=="filter"){var i=t.getParameterByName("concept"),s=t.getParameterByName("address");if(i!=""){var o="store-locator/find-stores?address="+s,u=$("input:checkbox.js-checkbox:checked").map(function(){return this.value}).get(),a;this.conceptServiceString="",u!=""&&(a="&concept="+u.join(","),this.conceptServiceString=u.join(",")),o=a?o+a:o;var f=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");n.history.navigate(f.slice(0,f.lastIndexOf("/"))+o,{trigger:!1,replace:!1}),this.fromBrowser=!0,this.model.set("searchText",s),this.model.set("showPreciseLocation",s!==""),this.model.set("hasServices",this.conceptServiceString&&this.conceptServiceString.length>0),this.model.set("services",this.conceptServiceString.split(",")),this.showLoader(),this.renderStoreFinder()}}else{var i=t.getParameterByName("address");i==""&&(i=this.model.get("searchText"));var o="store-locator/find-stores?address="+i,l=t.Template.bridgeData.feature.EVENT_TYPE;t.getParameterByName("event")===l&&(o=o+"&event="+l);var u=$("input:checkbox.js-checkbox:checked").map(function(){return r.push(this.value),this.value}).get(),a;this.conceptServiceString="",u!=""&&(a="&concept="+u.join(","),this.conceptServiceString=u.join(",")),o=a?o+a:o;var f=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");n.history.navigate(f.slice(0,f.lastIndexOf("/"))+o,{trigger:!1,replace:!1}),this.fromBrowser=!0,this.eventType="clickInteraction";var c="";_.isArray(r)&&!_.isEmpty(r)&&(c=r.toString()),this.eventBsdlObj={pageName:"store finder: filter",events:"event66",action:"filter by: "+c,loginStatus:t.User.isAnonymous?"Anonymous":"Authenticated",location:"store finder: filter"},this.bootstrapEventTracking(),this.model.set("searchText",i),this.model.set("showPreciseLocation",i!==""),this.model.set("hasServices",this.conceptServiceString&&this.conceptServiceString.length>0),this.model.set("services",this.conceptServiceString.split(",")),this.showLoader(),this.renderStoreFinder(!1)}},populateCheckBoxArray:function(e){var t=$(e.currentTarget),n=t.parent().find("[data-action~=checkbox]"),r=t.is(":checked");r?(n.attr("aria-checked","true"),t.attr("checked","checked")):(n.attr("aria-checked","false"),t.removeAttr("checked")),this.isOperationFiltered=!0},removeFilter:function(e){var r=$(e.currentTarget).attr("data-value"),i=this,s=i.model.get("services"),o=[],u="";_.each(s,function(e){e!=r&&o.push(e)});var a=t.getParameterByName("address"),f="store-locator/find-stores?address="+a;t.getParameterByName("event")===t.Template.bridgeData.feature.EVENT_TYPE&&(f=f+"&event="+t.Template.bridgeData.feature.EVENT_TYPE),this.conceptServiceString="",o!=""&&(u="&concept="+o.join(","),this.conceptServiceString=o.join(",")),f=u?f+u:f;var l=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");n.history.navigate(l.slice(0,l.lastIndexOf("/"))+f,{trigger:!1,replace:!1}),this.fromBrowser=!0,this.model.set("searchText",a),this.model.set("showPreciseLocation",a!==""),this.model.set("hasServices",this.conceptServiceString&&this.conceptServiceString.length>0),this.model.set("services",this.conceptServiceString.split(",")),this.showLoader(),this.renderStoreFinder()},setInputField:function(){this.trackingEventHandler("search by zip"),$("#location").val()&&$("#location").removeAttr("data-empty"),setTimeout(function(){$("#storelocatornew").find("h2").attr("tabindex","-1").focus()},200)},setSearchZipFocus:function(){this.$("#storelocatornew h2").attr("tabindex",-1).focus()},watchForUserLocation:function(){this.model.get("lat")?this.fetchStoreForLocation():(this.listenTo(this,"gotuserlocation",this.fetchStoreForLocation),this.getCurrentPosition())},fetchStoreForLocation:function(){n.Events.trigger("v:sl:storesbylatlong",this.model.get("lat"),this.model.get("long"),100),this.stopWatchForLocation()},stopWatchForLocation:function(){this.stopListening(this,"gotuserlocation")},getCurrentPosition:function(){var t=this;this.locationAttempts++,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){e.coords.latitude>11&&e.coords.latitude<13&&e.coords.longitude>75&&e.coords.longitude<78?t.model.set({lat:e.coords.latitude,"long":e.coords.longitude}):t.model.set({lat:e.coords.latitude,"long":e.coords.longitude}),t.trigger("gotuserlocation")},function(e){t.renderError(e)}):(this.locationAttempts++,t.renderError(e))},setQueryString:function(){var e=window.location.href;e=e.search(/\?/)==-1?"":e.split("?")[1];var t=e.split("&"),n={};_.each(t,function(e){n[e.split("=")[0]]=e.split("=")[1]}),this.pageQueryString=n},validateInput:function(){var e=$("#location").val(),t=/^([a-zA-Z0-9&,.\\\-\/\s]){3,}$/,n=/^([a-zA-Z]){2}$/;$("a.errorMessage").remove(),$("#location").removeClass("error");if(!e)this.buildErrorString("enter valid ZIP or city, state.");else if(!isNaN(e)){if(!(e.length!==5||parseInt(e,10)<100))return this.removeErrorString(),!0;this.buildErrorString("please enter a valid zip code.")}else{e=e.split(" ");if(e.length>=2){var r="";for(i=0;i<e.length-1;i++)r+=e[i]+" ";var s=r.trim(),o=e[e.length-1];if(o.length!==2)this.buildErrorString("please enter both city and state.");else{var u=t.exec($.trim(s)),a=n.exec($.trim(o));if(u!=""&&a!="")return this.removeErrorString(),!0}}this.buildErrorString("please enter both city and state.")}return!1},getStoresinArea:function(e){this.stopAll(e);var t=this,r=$(e.currentTarget).attr("href");try{var i=r.substr(r.lastIndexOf("=")+1)}catch(e){}this.storesCall(i);var s=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");n.history.navigate(s.slice(0,s.lastIndexOf("/"))+"/store-locator/state-results?stateCode="+i,{trigger:!0,refresh:!1})},setMyStoreList:function(e){var r=this,i=$(e.currentTarget).attr("data-store-id"),s=r.model.get("storeListArray"),o=$(e.currentTarget).parent().find(".card--title"),u=t.Get.TCookie("myStoreName");$(e.currentTarget).parent().find("label.make_"+i).remove(),$(e.currentTarget).parent().find("h3").focus(),_.each(s,function(n){if(n.ID==i){r.model.set("storedetails",n),r.setClearMyStoreCookie(e);var s=$(".card-store.is-active"),a=s.attr("id");a!==undefined&&(a=a.replace("store-",""),s.append('<button id="make_'+a+'" data-behavior="setMyStoreList" '+'data-store-name="'+u+'" data-store-id="'+a+'" '+'class="btn btn-primary btn-sm">make it <span class="h-sr-only">'+u+"</span> "+"my store</button>"),s.removeClass("is-active")),$(e.currentTarget).parent().addClass("is-active"),$(o).focus(),$(e.currentTarget).remove(),Tgt_Common_Helper.setMyStoreChangedByUser(!0),t.saveDefaultStoreToUserAccount(i)}}),n.Events.trigger("vi:headerview:changeStore")},setMyStoreNearBy:function(e){var r=this,i=$(e.currentTarget).attr("data-store-id"),s=t.Get.TCookie("myStoreName"),o=$(e.currentTarget).parent().find(".card--title");$(e.currentTarget).parent().find("label.make_"+i).remove(),r.setClearMyStoreCookie(e);var u=$(".card-store.is-active"),a=u.attr("id");a!==undefined&&(a=a.replace("store-",""),u.append('<button id="make_'+a+'" data-behavior="setMyStoreNearBy" '+'data-store-name="'+s+'" data-store-id="'+a+'" '+'class="btn btn-primary btn-sm">make it <span class="h-sr-only">'+s+"</span> "+'my store</button>"'),u.removeClass("is-active")),$(e.currentTarget).parent().find(".badge-green").length||$(e.currentTarget).parent().find(".card--title").after('<span class="badge badge-green js-myStore" style="margin-left:5px;">my store</span>'),$(e.currentTarget).parent().addClass("is-active"),$(o).focus(),$(e.currentTarget).remove(),Tgt_Common_Helper.setMyStoreChangedByUser(!0),t.saveDefaultStoreToUserAccount(i),n.Events.trigger("vi:headerview:changeStore")},getLocationLink:function(){var e=document.location.href;t.getParameterByName("searchType")==="mytarget"&&(e=e.replace("?searchType=mytarget",""));var n=e.split("/");n=n[n.length-1],locationLink=e.replace(window.location.protocol+"//"+window.location.host,""),t.getParameterByName("searchType")==="mytarget"&&(locationLink=locationLink.replace("?searchType=mytarget",""));switch(n){case"state-list":locationLink=locationLink.replace(n,""),locationLink+="search-results?";break;default:}if(this.searchFromText)if(window.location.href.indexOf("address=")==-1)var r=locationLink+"address="+this.model.get("searchText")+this.conceptQueryString;else var r=locationLink+this.model.get("searchText")+this.conceptQueryString;else var r=locationLink+"searchType=mytarget&loc=on";return r},setMyStoreDetails:function(e){var r=this,i=$(e.currentTarget).attr("data-store-id"),s=t.Get.TCookie("myStoreName"),o=$(e.currentTarget).parent().find(".card--title");$(e.currentTarget).parent().find("label.make_"+i).remove(),r.setClearMyStoreCookie(e);var u=$(".card-store.is-active"),a=u.attr("id");a!==undefined&&(u.append('<button id="make_'+a+'" data-behavior="setMyStoreNearBy" '+'data-store-name="'+s+'" data-store-id="'+a+'" '+'class="btn btn-primary btn-sm">make it <span class="h-sr-only">'+s+"</span> "+"my store</button>"),$(".card--title .badge-green").remove(),u.removeClass("is-active")),$(e.currentTarget).parent().addClass("is-active"),$(o).focus(),Tgt_Common_Helper.setMyStoreChangedByUser(!0),t.saveDefaultStoreToUserAccount(i),n.Events.trigger("vi:headerview:changeStore"),$(e.currentTarget).remove(),r.trackingEventHandler("make this mystore")},setClearMyStoreCookie:function(e){this.stopAll(e);var n=$(e.currentTarget),r=$(e.currentTarget).attr("data-store-id"),i=this.model.get("storedetails").Address.PostalCode,s=$(e.currentTarget).attr("data-store-name"),o={storeId:r,storeName:s,storeZip:i};this.trackingEventHandler("make this mystore");var u=t.domainName();r!=""&&(t.Set.TCookie("myStoreId",r),t.Set.TCookie("myStoreName",s),t.setFiatsCookie(o,"fiatsCookie"),Tgt_Common_Helper.setMyStoreChangedByUser(!0),document.location.href.indexOf("target.com")==-1&&(t.Set.TCookie("myStoreId",r),t.Set.TCookie("myStoreName",s)),t.Set.removeTCookie("MKT",{name:"cpref",delimiter:"|",domain:u,splitter:"="}),t.initiateGeoMarketSegement(),this.model.set("myStore",!0),this.setStoreAsMyStore=!0,this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.mPulseTracking())},fetchWeeklyAd:function(e){var t=this,n="",r="";e.stores!==undefined&&$.isArray(e.stores)&&e.stores.length>0?n=e.stores[0].slug:t.model.set("weeklyAdImgPath","http://weeklyad.target.com/assets/fallbacks/homepage_story/image/default.gif")},updateWeeklyAdImage:function(e){var t=this,n="";_.isDefined(e.scrubbed_image_url)&&e.scrubbed_image_url!==""?n=e.scrubbed_image_url:n="http://weeklyad.target.com/assets/fallbacks/homepage_story/image/default.gif",t.model.set("weeklyAdImgPath",n),$("[data-service-content=weeklyad]").find("img").attr("src",n).removeClass("tileLoading").addClass("smallerImage")},buildErrorString:function(e){$(".TGTloading").removeSpacedLoader(),this.$("#location--longInstruction").html(e),this.$("#storelocatornew").find("label").html('zip or city, state<span class="h-sr-only">: '+e+"</span>"),this.$("#resultSection .error.error-page").remove(),$("#location").addClass("is-invalid").focus()},removeErrorString:function(){$("#location--longInstruction").html(""),$("#storelocatornew").find("label").html("zip or city, state"),$("#location").removeClass("is-invalid")},showErrorResult:function(){var e=this,n=t.getParameterByName("address"),r=e.conceptServiceString.split(","),i,s,o;e.conceptServiceString!==""&&r.length>0?(o="near "+e.model.get("searchText"),e.$el.find("#storeSearchText").html(o),i="Sorry, there are no stores near you that match your search.",s='<p class="error error-page h-tightSpacingTop">'+i+"</p>"):(i="We couldn't find any stores near "+n+". Start a new search.",s='<p class="error error-page h-tightSpacingTop">'+i+"</p>"),e.$el.find("#resultSection").html(s).addClass("l-align-center"),e.$("#storelocatornew").find("label").html('zip or city, state<span class="h-sr-only">'+i+"</span>"),e.hideLoader(),$(".error").attr("tabindex","-1").focus(),$(".error").css("outline","0").focus()},renderError:function(e,t){var n=this,r=$(n.$el.find("#locationConfirmation").clone());r.removeClass("is-hidden").removeAttr("aria-hidden"),$(".TGTloading").removeSpacedLoader(),n.$(".storeFinder--header #js-searchToggle").trigger("click"),n.overlayDisplay({},"location unavailable","",r)},navigateToCategoryPage:function(e){this.stopAll(e);var t;try{t=$("#pickupCategories option:selected").text()+" category",this.trackingEventHandler(t),this.goTo(this.$(e.currentTarget).val())}catch(e){}},routeFromFinder:function(){var e,t;$("input#location").val(this.model.get("searchText"));if(this.validateInput()){t=this.model.get("searchText");if(t){e=this.model.get("searchText").split(" ");if(e.length>=2){var r=this.model.get("searchText").lastIndexOf(" "),i=this.model.get("searchText").substring(0,r).replace(",",""),s=this.model.get("searchText").substring(r);t=i+","+s}}n.Events.trigger("v:sl:storelist",t,this.model.get("services").join(","))}else $(".TGTloading").removeSpacedLoader()},redirectStoreDetails:function(e){if(!$(e.target).hasClass("geoAddress")&&!$(e.target).hasClass("storePhone")){$(e.currentTarget).addClass("tapped");var r=$(e.currentTarget).attr("data-store-id"),i=$(e.currentTarget).attr("data-store-name").replace(/\s+/g,"-").toLowerCase(),s=domainUrl.replace(window.location.protocol+"//"+window.location.host,"");t.Template.bridgeData.feature.STORE_LOCATOR_SEO_URL==="true"?n.history.navigate(s.slice(0,s.lastIndexOf("/"))+"/sl/"+i+"/"+r+"?dvm=true&lnk=store",{trigger:!0,refresh:!1}):n.history.navigate(s.slice(0,s.lastIndexOf("/"))+"/store-locator/store-details?storeNumber="+r+"&dvm=true&lnk=store",{trigger:!0,refresh:!1})}},goToCart:function(e){var t=encodeURIComponent(decodeURI(window.location.href));e?this.goTo("co-cart?redirectUrl="+t+e,!0):this.goTo("co-cart?redirectUrl="+t,!0)},navigateToPdpPage:function(e){this.stopAll(e);try{var t=$("#header").find(".fiatHeader");_.isDefined(t[0])?window.location=domain+"/"+this.$(e.currentTarget).attr("href"):this.goTo(this.$(e.currentTarget).attr("href"))}catch(e){}},checkPuisDetails:function(){var e=this,n=window.location.href,r=Tgt_Common_Helper.getQueryString("tcin",n),i=Tgt_Common_Helper.getQueryString("storeNumber",n);i?this.storeId=i:/\/sl\/.*\/\d*/.test(window.location.pathname)&&(this.storeId=parseInt(window.location.pathname.split("/").pop(),10));if(typeof r!="undefined")if(typeof pdpDetailsResponseObj!="undefined")this.updatePuisDetails(pdpDetailsResponseObj);else{e.showLoader();var n=t.Config.browseUrlRedsky+r+"?excludes=bulk_ship,product_v3"+",promotion,rating_and_review_reviews,rating_and_review_statistics,available_to_promise_store";this.makeAjaxCall(n,this.updatePuisDetails)}},updatePuisDetails:function(e){e=this.makeItemData(e,"CatalogEntryView");var t=e.CatalogEntryView[0];this.setProperPriceSection(t,this);if(typeof t.parentPartNumber!="undefined"){var r=t.buy_url,i=t.parentPartNumber,s=t.tcin;r=r.replace(s,i),t.dynamicKitURL=r}var o=t.dpci;this.model.set("itemPDPData",t);var u=t.available_to_promise_network||{},a=!!_.findWhere(_.getVal(u,"multichannel_options"),"HOLD")&&["0","1"].indexOf(_.getVal(t,"price.channelAvailability"))!==-1;a?n.Events.trigger("v:sl:addPuisBtn",this.addPuisBtn):$(".TGTloading").removeSpacedLoader()},addPuisBtn:function(e,n){var r=this;if(t.Template.bridgeData.feature.PEAK_HOURS_FLAG!="true"&&_.isDefined(e)&&_.isDefined(e.products)){var i=isMutltiChannelOptionHOLD="",s;e.products&&e.products[0]&&e.products[0].products&&e.products[0].products[0]&&e.products[0].products[0].locations&&e.products[0].products[0].locations[0]&&(s=e.products[0].products[0].locations[0]),s&&(s.availability_status=="IN_STOCK"&&(i="In Stock"),isMutltiChannelOptionHOLD=Array.isArray(s.multichannel_options)&&(s.multichannel_options.indexOf("hold")!=-1||s.multichannel_options.indexOf("HOLD")!=-1));if(i=="In Stock"&&isMutltiChannelOptionHOLD){var o=!1,e=this.model.get("itemPDPData");if(e&&_.getVal(e,"ItemAttributes[0].Attribute")){var u=_.find(_.getVal(e,"ItemAttributes[0].Attribute"),function(e){return e.description==="IS_LTO_ITEM"});u&&_.isArray(u.value)&&u.value[0]==="Y"&&(o=!0)}var a=e.available_to_promise_network||{},f=!!_.findWhere(_.getVal(a,"multichannel_options"),"HOLD")&&["0","1"].indexOf(_.getVal(e,"price.channelAvailability"))!==-1;f&&r.$(".puisBtnCnt").html('<button type="button" style="width: 100%;" class="btn btn-primary btn-la replacedButtonClass" id="puisBtn" data-store-id="'+r.storeId+'" aria-hidden="false" data-islto="'+o+'" '+'data-catentryid="'+e.catEntryId+'"'+'data-partNumber="'+e.tcin+'">pick up here</button>'),r.$("#setClearMyStore").parent().remove(),r.addItem.initATC(r)}}r.hideLoader()},updateShipMethod:function(e,t){var n=this,i={};n.serviceAdapter=r,n.serviceAdapter("AddShippingInfo").doPut(e,i).done(function(e,r){n.updateShipMethodCallback(e,r,t)}).error(function(e,t){n.updateShipMethodCallback(e,t)})},updateShipMethodCallback:function(e,n,r){var i=this,s,o;if(r&&r.cartBsdlObj){try{i.cartItem=r.cartBsdlObj;if(i.cartItem.products.length>0){var u=i.cartItem.products[0].product;i.eventBsdlObj={products:u,revenue:i.cartItem.products[0].revenue,units:""+i.cartItem.products[0].units,ffType:i.cartItem.products[0].fftype,method:i.cartItem.addToCartLocation,preorder:i.cartItem.preorder,partNums:u,advanceOrderProduct:i.cartItem.products[0].advanceOrderProduct},i.eventType="cartAdd";if(i.cartItem.frequencyUOM&&i.cartItem.frequencyInterval){var a=i.cartItem.frequencyInterval;i.cartItem.frequencyUOM==="WEEK"&&(a+=" weeks"),i.eventBsdlObj.frequency=a,i.eventBsdlObj.subscribe=!0}i.cartItem.isSubscriptionItem?i.eventBsdlObj.subscription="subscription eligible":i.eventBsdlObj.subscription="subscription not eligible"}delete r.cartBsdlObj}catch(f){}i.modalTagging=!0,i.staticTrackLogPage(),i.bootstrapEventTracking()}if(e&&e.responseJSON&&e.responseJSON.errors&&e.responseJSON.errors.length&&e.responseJSON.errors[0].errorKey){o=e.responseJSON.errors[0].errorKey,s=t.labels.get(e.responseJSON.errors[0].errorKey);if(o=="SHOP_INVENTORY_EQUAL_FOR_STORE"||o==="_ERR_AVL_INVENTORY"||o=="_ERR_MAX_PURCHASE_LIMIT_EXCEEDED")s=t.labels.get("SHOP_INVENTORY_EQUAL_FOR_STORE_FIATS");s==o&&(s=e.responseJSON.errors[0].errorMessage),s||(s=t.labels.get("CC_SOMETHING"))}else if(!e||e.responseJSON&&e.responseJSON.errors||n==="error"||n==="timeout")s=t.labels.get("CC_SOMETHING");if(s){var l="co-cart?errorMsg="+s;i.goTo(l,!isSecure)}else i.goTo("co-cart",!0)}}}};return s}),define("views/tablet/storelocator/storelocator.view",["jquery","underscore","page","Target","models/storelocator/storelocator.model","contextMappings","addToCart","templates/tablet/precompiled/store","templates/tablet/precompiled/common","views/models/storelocator/storelocator.view.model","views/mixins/storelocator/storelocator-mx","views/mixins/common/dvm-banner-mx","text!templates/tablet/common/selectOptionOverlay.html","patlab.toggler","firefly!storelocator/storelocator","views/mixins/browse/ff-mx","patlab.modal","patlab.forms"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=n.extend({constructor:function(){n.prototype.constructor.apply(this,arguments)},dvmConfigData:{premium:{pos:"atf",mapping:4,slots:[[728,90]],adaptive:!0},secondary:{pos:"btf",mapping:4,slots:[[728,90]],adaptive:!0},siteskin:{pos:"ss",mapping:1,slots:[[300,50]],adaptive:!0,siteskin:!0,category:"homepage",page:"home",id:"siteskin_home"}},events:{},initializeView:function(){this.bindBackboneEvents(),this.setQueryString(),e(window).on("orientationchange",this.onOrientationChange)},onOrientationChange:function(){this.listtimeStamp2&&window.matchMedia("(orientation: portrait)").matches?e("#mobile-div-gpt-ad-storelocator_"+this.listtimeStamp2).hide():this.listtimeStamp2&&window.matchMedia("(orientation: landscape)").matches&&e("#mobile-div-gpt-ad-storelocator_"+this.listtimeStamp2).show()},initializePatLab:function(){this.patlab.toggler=new p(this.el,{})},initializeDVMRow:function(t,n,r,i){var s=t==""?t:"/"+t,o={as:"onlinestorelocator"+i,pos:i};if(formFactor=="tablet")var u=[[300,250]];else var u=[[300,75]];if(formFactor=="tablet")var a={elementId:"mobile-div-gpt-ad-storelocator_"+r,dvmAddName:"storelocator"+s,dvmSize:u,targeting:{adp:"1",pt:"onlinestorelocator"},customTargeting:o};else var a={elementId:"mobile-div-gpt-ad-storelocator_"+r,dvmAddName:"storelocator"+s,dvmSize:u,targeting:{pos:i,as:"onlinestorelocator"+i},customTargeting:o};this.initializeDvmBanner(a),e("[id*=ad-storelocator]").not(".sd-dvm-footer").css("margin-top","25px")},storeFinderTagging:function(){try{var e=this.getDynamicBsdlObj();return e.todaysDate=this.setTimeBsdlObj(),e.pageName="account: find a store",e.channel="account",e.server="www.target.com",e.pageType="account",e.levelTwo="account: find a store",e.levelThree="account: find a store",e.levelFour="account: find a store",e.loginStatus=r.User.isAnonymous?"not logged in and not registered":"logged in",e.myStoreSetting="yes",e.storeFinder=!0,e.storeSearchValue="",this.conceptServiceString!=""&&(e.storeSearchFilter=this.conceptServiceString),e.operatingSystemVersion=r.deviceAtlas.os(),e}catch(t){}},storeFinderSearchTagging:function(){try{var e={occurrences:!0,storeFinderStoreSearch:!0},t=this.getDynamicBsdlObj();return t.todaysDate=this.setTimeBsdlObj(),t.myStoreSetting="yes",t.siteEvents=e,t.storeSearchValue=this.myStoreSearchText,t.storeFinder=!1,t.pageName="mobile: store finder: search",t.channel="mobile: store finder",t.server="m.target.com",t.pageType="store finder",t.levelTwo="mobile: store finder: search",t.levelThree="mobile: store finder: search",t.levelFour="mobile: store finder: search",t.globalPage="store finder: search",t.loginStatus=r.User.isAnonymous?"not logged in and not registered":"logged in",t.operatingSystemVersion=r.deviceAtlas.os(),this.conceptServiceString!=""&&(t.storeSearchFilter=this.conceptServiceString),t}catch(n){}},storeDetailsTagging:function(){try{var e={occurrences:!0,fiatsDetails:!0},t=this.getDynamicBsdlObj();return t.todaysDate=this.setTimeBsdlObj(),t.myStoreSetting="yes",t.siteEvents=e,t.pageName="account: find a store: store detail",t.channel="account",t.server="www.target.com",t.pageType="account",t.levelTwo="account: find a store",t.levelThree="account: find a store: store detail",t.levelFour="account: find a store: store detail",this.model.toJSON().storedetails?t.storeId=this.model.toJSON().storedetails.ID:t.storeId=window.location.search?window.location.search.split("tcin=")[1]:"NA",t.loginStatus=r.User.isAnonymous?"not logged in and not registered":"logged in",t.operatingSystemVersion=r.deviceAtlas.os(),this.conceptServiceString!=""&&(t.storeSearchFilter=this.conceptServiceString),t}catch(n){}},setStoreAsMyStoreTagging:function(){try{var e={occurrences:!0,StoreFinderSetStore:!0},t=this.storeDetailsTagging();return t.storeSearchFilter&&delete t.storeSearchFilter,t.storeSetLocation="store finder",t.previousStore=r.Get.TCookie("myStoreId")==""?"none":r.Get.TCookie("myStoreId"),t.siteEvents=e,t}catch(n){}},getDynamicData:function(){try{if(this.storeFinderSearch)return this.storeFinderSearch=!1,this.storeFinderSearchTagging();if(this.storeDetailsPage)return this.storeDetailsPage=!1,this.storeDetailsTagging();if(this.setStoreAsMyStore)this.setStoreAsMyStore=!1,this.setStoreAsMyStoreTagging();else{if(!this.detailPageFromFiats)return this.storeFinderTagging();this.detailPageFromFiats=!1,this.storeDetailsTagging()}}catch(e){}},renderStoreFinder:function(n){var i=this,s,o,l,c=!1,h=(new Date).getTime(),p="storelocator/storeLocator";i.locationAttempts=0,i.listtimeStamp=h,i.listtimeStamp1=h+1,i.listtimeStamp2=h+2;if(window.matchMedia("(orientation: landscape)").matches||r.deviceAtlas.isDesktop())c=!0;var d=r.getParameterByName("capabilities")==="pharmacy";d&&(this.pharmacyFinder=!0,p="storelocator/pharmacyLocator"),i.model.get("searchText")!==""&&(s=i.listtimeStamp,o=i.listtimeStamp1,l=i.listtimeStamp2,i.conceptServiceString=i.model.get("services").join(",")),i.compiledTemplate=t.renderPartial(u[p],t.assignContext(f.showStoreFinderPage,{storedetails:i.model.toJSON(),cid:s,cid1:o,cid2:l,commonTpls:a,isDesktop:c})),i.$el.html(i.compiledTemplate),n&&(i.staticTrackLogPage(),i.dynamicTrackLogPage(),i.mPulseTracking()),i.model.get("searchText")?i.routeFromFinder():(e(".TGTloading").removeSpacedLoader(),i.$(".storeFinder--header #js-searchToggle").trigger("click"))},renderStoreResults:function(){var n=this;if(n.model.get("storeListArray").length==0){setTimeout(function(){n.showErrorResult()},500);return}var i=t.renderPartial(u["storelocator/storeSearchResult"],t.assignContext(f.showSearchResult,{storedetails:n.model.toJSON(),cid:n.listtimeStamp,cid1:n.listtimeStamp1,inListDvm:!1,viewModelInstance:f}));n.$el.find("#resultSection").html(i);var s='near <a id="zipCodeLink" href="#" data-target="#fiatsOverlay" data-behavior="modal" class="link-grayDark link-underline">'+n.model.get("searchText")+"</a>";n.$el.find("#storeSearchText").html(s),n.hideLoader(),e("h1").focus(),n.listtimeStamp&&!e("#mobile-div-gpt-ad-storelocator_"+n.listtimeStamp).hasClass("sl-dvm")&&(this.renderDVM(n.listtimeStamp,"btf"),e("#mobile-div-gpt-ad-storelocator_"+n.listtimeStamp).addClass("sl-dvm")),n.listtimeStamp1&&!e("#mobile-div-gpt-ad-storelocator_"+n.listtimeStamp1).hasClass("sl-dvm")&&(this.renderDVM(n.listtimeStamp1,"btf"),e("#mobile-div-gpt-ad-storelocator_"+n.listtimeStamp1).addClass("sl-dvm")),n.listtimeStamp2&&(r.deviceAtlas.isDesktop()||window.matchMedia("(orientation: landscape)").matches)&&!e("#mobile-div-gpt-ad-storelocator_"+n.listtimeStamp2).hasClass("sl-dvm")&&(this.renderDVM(n.listtimeStamp2,"btf"),e("#mobile-div-gpt-ad-storelocator_"+n.listtimeStamp2).addClass("sl-dvm")),this.isOperationFiltered=!1,e(".TGTloading").removeSpacedLoader(),e("#resultSection .l-row").length>0&&window.location.href.indexOf("address=")!=-1?this.$el.find(".card-store:first h3").attr("tabindex","-1").focus():e(".header--topPromo a").focus(),this.trackStoreFinderResultsPageLoad(this)},renderStoreDetails:function(n){e("[data-page-container=mystore]").appendTo(".js-myStoreTiles > .accordion--content").show(),e(".js-myStoreTiles").hasClass("is-active")||(t.each(e(".is-active"),function(t){e(t).removeClass("is-active")}),e(".a11y-text-toggle").text("shows more content"),e(".js-myStoreTiles .a11y-text-toggle").text("hides content"),e(".js-myStoreTiles").addClass("is-active")),this.storeDetailsPage=!0,this.storeDetailsPage&&(this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.trackStoreDetailsPageLoad(this)),this.detailstimeStamp=(new Date).getTime(),this.detailstimeStamp1=(new Date).getTime()+1,this.detailstimeStamp2=(new Date).getTime()+2;var r=t.renderPartial(u["storelocator/storeDetails"],t.assignContext(f.showStoreDetail,{storedatamain:this.model.toJSON(),cid:this.detailstimeStamp,cid1:this.detailstimeStamp1,cid2:this.detailstimeStamp2,isGAMDash:n,viewModelInstance:f}));this.$el.html(""),this.$el.html(r);var i=this.model.get("storedetails"),s="";i.Address.City&&(s=i.Address.City+", "),i.Address.Subdivision&&(s=s+i.Address.Subdivision+", "),s=s+i.fname+" Target",s&&(document.title=s),this.hideLoader(),this.checkPuisDetails(),this.detailstimeStamp&&this.renderDVM(this.detailstimeStamp,"btf","store-details"),this.detailstimeStamp1&&this.renderDVM(this.detailstimeStamp1,"btf","store-details"),this.detailstimeStamp2&&this.renderDVM(this.detailstimeStamp2,"btf","store-details"),this.$(".puisDetailsBackBtn h2 span").length>0?this.$(".puisDetailsBackBtn h2 span").focus():e(".header--topPromo a").hasClass("is-hidden")?this.$(".store-details-header h1").focus():e(".header--topPromo a").focus()},renderStoreList:function(n){var i=this;e(".errortxt").addClass("hide"),e("#resultHeadSection .actions").show(),this.location=this.getLocationLink();var s=this.conceptServiceString.split(","),o="";s.length>0&&this.conceptServiceString!==""&&(t.each(this.servicesList,function(n,r){t.each(n,function(t,n){e.inArray(n,s)!==-1&&(o+=t+", ")})}),o=o.slice(0,-2)),this.model.set("services",o),this.model.set("myStoreEligible",this.findMyStore),this.setStoreListModelData(n,this.findMyStore);var a=r.getParameterByName("address");a&&(this.model.set("searchText",a),e("#location").val(a),e("#location").removeAttr("data-empty"));var l=t.renderPartial(u["storelocator/storeSearchResult"],t.assignContext(f.showSearchResult,{storedetails:this.model.toJSON()}));this.$el.find("#resultSection").html(l),this.model.set("showStoreListError",!1),i.hideLoader(),this.delegateEvents();var c=e(".dvmSlot").length,h="store_results",p=this.listtimeStamp;for(var d=1;d<=c;d++){var v="mobile-div-gpt-ad-storelocator_"+p,m=d===1?"block1":"block2";this.initializeDvmBanner(v,h,m),p=this.listtimeStamp1}e("#resultList").length>0?e("#resultHeadSection h2").attr("tabindex","-1").focus():e("h1").attr("tabindex","-1").focus(),this.storeFinderSearch=!0,this.staticTrackLogPage(),this.dynamicTrackLogPage(),this.storeFinderSearch=!1,n.Locations["@count"]==0&&setTimeout(function(){i.showErrorResult()},500),window.scrollTo(0,0)},showFadeAwayModal:function(n,r,i,s){"use strict";var o=this,u,a,f,l,c;s=s||r,l=t.template(h,{message:r,cssClass:n,selectOptionReaderMessage:s}),c=e(l),i.before(c);var p=function(){c.off("click",p),c.off("mousedown",p),c.off("touchstart",p);var e=c;c=null,e&&e.remove(),u&&window.clearTimeout(u),a&&window.clearTimeout(a),f&&window.clearTimeout(f)};c.mousedown(p),c.on("touchstart",p),c.on("click",p),r.indexOf("tap to zoom")==-1&&e("#popover-content-link").focus(),u=window.setTimeout(function(){c&&i.find(".select-option-reader-message").focus()},200),a=window.setTimeout(function(){c&&(c.addClass("fadeOut"),r.indexOf("tap to zoom")==-1&&window.setTimeout(function(){e(".puisBtnCnt").attr("aria-hidden","false").attr("tabindex","-1"),e(".puisBtnCnt").focus(),window.setTimeout(function(){e(".puisBtnCnt").removeAttr("aria-hidden").removeAttr("tabindex"),e(".puisBtnCnt .popover").css("display","none")},1e3)},1e3))},2e3),f=window.setTimeout(p,2800)},renderDVM:function(e,n,r){if(googletag)try{var i=t.isDefined(r)?r:"",s="";this.initializeDVMRow(i,s,e,n)}catch(o){}},renderView:function(n,i,s){var o=this;r.TimeToFirstPaint(),o.showLoader(),e("h1").focus();if(t.isDefined(r.Get.TCookie("myStoreId"))&&r.Get.TCookie("myStoreId").length==0){var u=r.Get.geoLocationDetails();u[["DSI"]]&&u.DSN&&(r.Set.TCookie("myStoreId",u.DSI),r.Set.TCookie("myStoreName",u.DSN))}window.location.pathname.indexOf("store-details")!=-1&&(this.detailPageFromFiats=!0),n&&this.renderDVM(n,"block1",s),i&&this.renderDVM(i,"block2",s),this.initializePatLab()}}).mixin([l,c,d,v],{viewType:d.VIEW_TYPE_TABLET,addItem:o});return m}),define("collections/common/feed.collection",["jquery","backbone","collection"],function(e,t,n){var r="persia",i="persiamvp",s=t.Model.extend({idAttribute:"productId",constructor:function(e){e=this.frontFaceKeys(e),s.__super__.constructor.call(this,e)},frontFaceKeys:function(e){var t="lnk=rec|crsh|"+r+"|"+i;return e.tcin=e.productId,e.nonSellable=!0,e.viewInPdp=!0,e.lovedAtPrice=null,e.articleLink=e.productLink&&e.productLink.substring(e.productLink.indexOf("/p")),e.articleLink&&e.articleLink.indexOf("?")>-1?e.articleLink=e.articleLink+"&"+t:e.articleLink=e.articleLink+"?"+t,e.img=Target.Get.Config("scene7URL")+e.productId+"?wid=320&amp;hei=320&amp;qlt=70&amp;fmt=pjpeg",e.title=e.productTitle,e.atcText="view details",e.callOuts=e.calloutMessage,e.itemType="partnumber",e.relationshipType=="COP"&&(e.articleLink=e.articleLink,e.atcText="shop collection",e.itemType="collection"),e.salePriceMin&&e.salePriceMax&&e.salePriceMin==e.salePriceMax?e.price="$"+e.salePriceMin:e.salePriceMin?e.price="$"+e.salePriceMin+" - $"+e.salePriceMax:e.price="$"+e.salePrice,e}}),o=n.extend({model:s,url:function(){return Target.Get.Config("crushURL")().targetCrushFeed+Target.Crush.getUser().userid+"&context=placementId,persiamvp"},sync:function(e,n,r){return r.timeout=Target.Config.crushGETServiceTimeout(),r.dataType="jsonp",r.processData=!0,r.async=!0,r.type="GET",r.headers=Target.Crush.getHeader(),r.jsonpCallback="targetCallback",r.cache=!0,r.error=function(){TL.err(64,"feed page load error")},t.sync(e,n,r)},parse:function(e){return r=e&&e.strategyName,i=e&&e.strategyId,this.rawResponse=e,this.rawRecommendations=e&&_.map(e.recommendations,_.clone),e&&e.recommendations}});return o}),define("collections/common/starterlist.collection",["jquery","backbone","collection","Target"],function(e,t,n,r){var i=r.Get.Config("crushURL")().stlistUrl,s=t.Model.extend({idAttribute:"productId",constructor:function(e){e=this.frontFaceKeys(e),s.__super__.constructor.call(this,e)},frontFaceKeys:function(e){e.tcin=e.productId+"";if(e.type=="brand"){e.articleLink=e.productLink;var t=e.productId;t=t.replace("&trade;",""),e.img=i+"/com/mobile/images/crush/"+t+".jpg",e.atcText="shop brand"}else e.type=="collection"?(e.articleLink=e.productLink&&e.productLink.substring(e.productLink.indexOf("/p")),e.img=r.Get.Config("scene7URL")+e.productId+"?wid=320&amp;hei=320&amp;qlt=70&amp;fmt=pjpeg",e.atcText="shop collection"):(e.articleLink=e.productLink&&e.productLink.substring(e.productLink.indexOf("/p")),e.img=r.Get.Config("scene7URL")+e.productId+"?wid=320&amp;hei=320&amp;qlt=70&amp;fmt=pjpeg",e.atcText="view details");return e.itemType=e.type,e.type==="product"&&(e.itemType="partnumber"),e.title=e.productTitle,e.callOuts=e.calloutMessage,e}}),o=n.extend({model:s,url:r.Get.Config("crushURL")().targetStarterList,sync:function(e,n,r){return r.timeout=1e4,r.dataType="jsonp",r.processData=!0,r.async=!0,r.type="GET",r.jsonpCallback="targetCallback",r.cache=!0,r.error=function(){TL.err(62,"starter page load error")},t.sync(e,n,r)},parse:function(e){return e.map(function(e){e.type=="brand"&&(e.productId=e.mfbrand)}),e},shuffle:function(e){var t=e.length,n,r;while(t!==0)r=Math.floor(Math.random()*t),t-=1,n=e[t],e[t]=e[r],e[r]=n;return e}});return o}),define("collections/common/brandlist.collection",["Target","jquery","backbone","collection"],function(e,t,n,r){var i=e.Get.Config("crushURL")().stlistUrl,s=n.Model.extend({idAttribute:"productId",constructor:function(e){e=this.frontFaceKeys(e),s.__super__.constructor.call(this,e)},frontFaceKeys:function(e){e.tcin=e.productId+"",e.articleLink=e.productLink;var t=e.productId;return t=t.replace("&trade;",""),e.img=i+"/com/mobile/images/crush/"+t+".jpg",e.atcText="shop brand",e.title=e.productTitle,e.callOuts=e.calloutMessage,e}}),o=r.extend({model:s,url:function(){return e.Get.Config("crushURL")().targetCrushBrandList},name:"brandList",sync:function(t,r,i){return i.timeout=e.Config.crushGETServiceTimeout(),i.processData=!0,i.async=!0,i.type="GET",i.jsonpCallback="targetCallback1",i.cache=!0,n.sync(t,r,i)},parse:function(e){return e.map(function(e){e.type=="brand"&&(e.productId=e.mfbrand)}),e}});return o}),define("models/common/stlist.banner.model",["Target","jquery","backbone"],function(e,t,n){var r=n.Model.extend({parse:function(t){var n=t||{},r=e.Get.Config("crushURL")().stlistUrl;return n.contents.image.image_path=r+n.contents.image.image_path,n},url:e.Get.Config("crushURL")().targetStarterListBanner,sync:function(e,t,r){var i=r||{};return i.timeout=5e3,i.dataType="jsonp",i.cache=!0,i.jsonpCallback="targetCallback1",n.sync(e,t,i)}});return r}),define("controllers/crush/crush.controller",["jquery","underscore","backbone","controllers/common/base.controller","Target","collections/common/feed.collection","collections/common/love.collection","collections/common/starterlist.collection","collections/common/popular.collection","collections/common/mostLoved.collection","collections/common/brandlist.collection","models/common/stlist.banner.model","controllers/mixins/tgtcrush-parallel-c-mx","controllers/mixins/tgtcrush-c-mx","controllers/mixins/variation-c-mx","controllers/mixins/recommendation-c-mx"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=r.extend({setPageMetaData:function(e){var t=this;t.pagePath=e,m.__super__.setPageMetaData.call(t,e)},pageSize:24,loveCollection:null,collections:{popularCollection:a,mostLovedCollection:f,brandListCollection:l,stlistCollection:u},crushCollections:[],process:function(){var r=this,u=null,a={stlist:61,feed:63,popular:65,love:67};TL.s(a[r.pagePath]),r.rmvListener(),r.timedOutPageRefresh(),r.spinnerTimeout=setTimeout(function(){e(".TGTloading").show()},500),r.pagePath==="feed"&&(r.loveCollection||(r.loveCollection=new o),r.loveCollection.fetch(),r.signInFromStlist&&r.loveCollection.on("sync",function(e){i.Crush.updateUserLoves(e.length)}),r.feedCollectionCall=5,r.feedCollection?(u=r.feedCollection.rawResponse.recommendations=r.getCurrentPageData(r.feedCollection.rawRecommendations).items,n.Events.trigger("c:collection:rawData",u),r.crushItems(r.feedCollection)):(r.feedCollection=new s,r.listenTo(r.feedCollection,"sync",e.proxy(function(){i.Crush.getLoves(!0).hasLoves&&!r.feedCollection.length&&r.feedCollectionCall?(r.feedCollectionCall--,setTimeout(function(){r.feedCollection.fetch({complete:r.collectionSyncComplete})},3e3)):(r.feedCollection.length>2&&r.feedCollection.add({feedCuration:!0,productId:"curation"},{at:3}),u=r.feedCollection.rawResponse.recommendations=r.getCurrentPageData(r.feedCollection.rawRecommendations).items,n.Events.trigger("c:collection:rawData",u),r.crushItems(r.feedCollection))},r)),r.feedCollection.fetch({complete:r.collectionSyncComplete}))),r.pagePath==="love"&&(r.feedCollection=null,r.loveCollection=new o,r.listenTo(r.loveCollection,"sync",r.crushItems),r.loveCollection.fetch({complete:r.collectionSyncComplete})),r.pagePath==="popular"&&(r.feedCollection=r.loveCollection=null,n.Events.trigger("c:tgtcrsh:firstload",{pageName:r.pagePath}),t.each(["popularCollection","mostLovedCollection","brandListCollection"],function(e){r.fetchCollection(e)}),TL.e(65));if(this.pagePath==="stlist"){r.addListener(),r.loveCollection=this.feedCollection=null;var f=i.Crush.getUser();f.loggedIn&&r.checkNoOfLoves(),r.fetchCollection("stlistCollection"),r.bannerModel?r.processBanner():(r.bannerModel=new c,r.listenTo(r.bannerModel,"sync",r.processBanner),r.bannerModel.fetch())}r.pagePath!=="stlist"&&n.Events.trigger("c:tgtcrsh:removebanner"),r.listenTo(n.Events,"v:tgtcrush:elremove",r.clearCollection),r.listenTo(n.Events,"v:tgtcrsh:unLovedOnLove",function(e){t.each(r.crushCollections,function(t,n){var r=t.get(e.model.id);r&&r.set("alreadyLoved",e.alreadyLoved)})})},fetchCollection:function(e){var t=this;!t[e]||t[e]&&!t[e].length?(t[e]=new t.collections[e],t.crushCollections.push(t[e]),t.listenTo(t[e],"sync",t.crushItems),t[e].fetch()):t.crushItems(t[e])},processBanner:function(){var e=this;n.Events.trigger("c:tgtcrsh:banner",e.bannerModel)},collectionSyncComplete:function(){var t=this;e(".TGTloading").hide(),t.spinnerTimeout&&clearTimeout(t.spinnerTimeout)},crushItems:function(t){var r=this,i,s=[];clearTimeout(r.spinnerTimeout),e(".TGTloading").hide();if(r.pagePath==="popular"&&t.name==="mostLoved"||["love","feed","stlist"].indexOf(r.pagePath)!==-1)i=r.getCurrentPageData(t),s=i.items.map(function(e){return e.id}),r.parallelCall(s,t.name);if(r.pagePath==="popular"){n.Events.trigger("c:tgtcrsh:itemsCarousal",{pageData:t.models,pageName:r.pagePath,carousalName:t.name});return}n.Events.trigger("c:tgtcrsh:items",{pageData:i,pageName:r.pagePath,signInFromStlist:r.signInFromStlist}),r.signInFromStlist=!1},getCurrentPageData:function(e){var t=this,n,r,s,o,u=Math.ceil(e.length/t.pageSize)-1,a=i.getParameterByName("pg");return n=a?Number(a):0,r=n*t.pageSize,s=r+t.pageSize,o={items:e.slice(r,s),meta:{totalPages:u,currentPage:n,totalItems:e.length}},o},clearCollection:function(e){var t=this;e.page&&t[e.page+"Collection"].remove(e.id)},rmvListener:function(){var e=this,r=["tgt:hlpr:getLoves","m:tgtcrsh:totlove","v:tgtcrsh:lovedbyanonymous","v:tgtcrush:unlovedbyanonymous","tgt:hlpr:loggedout","tgt:hlpr:loggedin","v:tgtcrsh:lovedonstlist","v:tgtcrsh:unLovedOnLove"];t.each(r,function(t){e.stopListening(n.Events,t)})},addListener:function(){var e=this;e.listenTo(n.Events,"tgt:hlpr:getLoves",function(t){e.checkNoOfLoves(t.number)}),e.listenTo(n.Events,"m:tgtcrsh:totlove",function(t){e.checkNoOfLoves(t)}),e.listenTo(n.Events,"v:tgtcrsh:lovedbyanonymous",e.storeLovesByAnonymous),e.listenTo(n.Events,"v:tgtcrsh:unlovedbyanonymous",e.removeLovesByAnonymous),e.listenTo(n.Events,"tgt:hlpr:loggedin",e.setLovesForUser),e.listenTo(n.Events,"v:tgtcrsh:checkNumLoves",e.checkNoOfLoves)},checkNoOfLoves:function(e){var n=this,r=i.Crush.getLoves(!0);if(r.number>=3||e>=3){i.util.isPrivateBrowse()||i.Crush.removeSavedScrollPosition(),n.signInFromStlist=!0;if(t.isEnabled("SECURE_LOGIN")){if(!i.util.isPrivateBrowse()){var s=JSON.parse(localStorage.getItem("lovedByAnonymous"));if(!s||s&&!s.length)localStorage.removeItem("lovedByAnonymous"),n.navigate("/target-crush/feed")}}else n.navigate("/target-crush/feed")}}}).mixin([h,p,d,v]);return m}),define("models/brand/plp.model",["jquery","underscore","backbone","Target","models/mixins/lp.model-mx","backboneAdvice"],function(e,t,n,r,i){var s=n.Model.extend({defaults:function(){return{products:[],facets:[],sortOptions:{},selected:{},searchState:{keyword:"",sort_by:"",offset:0,responseGroup:"Reviews,MiniVariationSummary,PromotionSummary,Offers,ItemAttributes,MobileItems",total_results:null,currentPage:1,startResult:0,count:24,totalPages:0}}},initialize:function(e){e&&e.apiUrl&&(this.hlApiUrl=e.apiUrl),this.on("change:selected",this.setQueryParams);var t=r.getBrandServiceData();this.searchUrl=t.searchUrl,this.facetDelimiter=t.facetDelimiter,this.dataDelimiter=t.urlDelimiter,this.facetQueryParam=t.facetQueryParam,this.zone=t.zone},queryParams:function(){return{brand:"",count:24,offset:0}}(),registryParams:["search_interface","reg_type"],url:function(){var t,n=this.searchUrl;return this.hlApiUrl?this.hlApiUrl:(t=""+e.param(this.queryParams),n+t)},sync:function(e,t,i){n.Events.trigger("browse-search:service-start");var s=this;return i.timeout=r.Get.Config("searchTimeoutIntervel")||5e3,i.dataType="json",i.processData=!0,i.async=!0,i.type="GET",i.url=this.url(),i.jsonpCallback="targetCallback",i.cache=!0,n.sync(e,t,i)},noResult:function(e){try{}catch(t){}},parse:function(e,i){n.Events.trigger("browse-search:service-end");var s={},o=t.getVal(e,"search_response.items.Item"),u=t.getVal(e,"search_response.metaData"),a=t.getVal(e,"search_response.breadbox_list"),f=t.getVal(e,"search_response.facet_list"),l=t.getVal(e,"search_response.sort_options"),c=t.getVal(e,"search_response.facet_list"),h=this.buildFacetLookup(f),p=t.getVal(e,"search_response.searchMetaData.merchandizingContainer.slots"),d=t.getVal(e,"search_response.searchMetaData"),v=t.getVal(e,"search_response.breadCrumb_list[0]");c&&c.length?s.refineCategories=c:[],o&&o.length&&t.each(o,function(e){e.truncatedTitle=r.stringTruncate(e.title)}),o?s.products=o:null,u?s.searchState=this.buildSearchOptions(u):null,f?s.facets=f:null,l?s.sortOptions=l:null,h?s.facetLookup=h:null,d?s.searchMetaData=d:null,s.breadBox=a,s.breadCrumb=v,p&&p.length?s.brandMobileBanner=p:[],this.set(s)},buildFacetLookup:function(e){"use strict";var n={};return t.each(e,function(e){t.each(e.details,function(t){t.facet=e,n[t.nid]=t})}),n},buildSearchOptions:function(e){var n={};try{t.each(e,function(e,t){var r=e.name;Object.keys(e).length>2?(delete e.name,n[r]=e):n[r]=e.value})}catch(r){}return n.startResult=parseInt(n.offset,10)+1,n.keyword=n.brandSearchTerm,n},setQueryParams:function(e,n){var i=this,s=this.queryParams,o=e.get("searchState").count,u=window.location.pathname.substr(window.location.pathname.lastIndexOf("/")+1);u=u&&u.replace(/\+/g," "),s.brand=decodeURIComponent(u);var a=r.getParameterByName("kwr")==="y";a?s.kwr="y":delete s.kwr,n.sortBy?s.sort_by=n.sortBy:delete s.sort_by,n.category?s.category=n.category:delete s.category,s.offset=n.Nao&&!t.isNaN(Number(n.Nao))?Math.floor(Number(n.Nao)/o)*o:0,this.getFacetParams(n.facetedValue,n.ratingFacetVal,s),this.updateRegistryParams(s),this.updatePriceRangeParams(s,n)}}).mixin([i]);return s}),define("controllers/brand/brand.controller",["jquery","underscore","controllers/common/base.controller","Target","collections/brand/brand.collection","models/brand/plp.model","controllers/mixins/variation-c-mx","controllers/mixins/recommendation-c-mx","controllers/mixins/crush-recommendation-c-mx","controllers/mixins/tgtcrush-c-mx","controllers/mixins/obgb-list-c-mx","controllers/mixins/registry-c-mx","views/mixins/common/queryparam-helper"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=n.extend({css:["/css/patlab/browse.css"],queryString:null,pageResultsCache:function(){return{}}(),pageResultQueue:function(){return[]}(),alreadyAppliedFilters:{},initiate:function(){},constructor:function(){n.prototype.constructor.apply(this,arguments)},setPageMetaData:function(e){delete r.LPTaggingError,this.queryString=e;var t=this.model=new s;t.registryObj=this.model.registryObj=this.registryObj,TL.s(1),t.set("selected",this.setqueyHash(this.queryString)),this.processFromCache(t.url())||(this.model&&this.model.off(),this.listenForLoadEvents(t),this.brandPromise=t.fetch()),p.__super__.setPageMetaData.call(this,e)},listenForLoadEvents:function(e){"use strict";var t=this;t.stopListening(e),this.listenTo(e,"sync",t.setData),this.listenToOnce(e,"error",function(n,i){var s=i&&i.statusText||"";s.toLowerCase().indexOf("time")>-1?r.LPTaggingError="ERR-TO":(i||{}).status&&(r.LPTaggingError="ERR-"+i.status),TL.err(2,"brand : "+e.url()),t.listenTo(e,"error",t.setData),e.fetch()})},displayLoadingSpinnerInListContent:function(){"use strict";var t=window.innerHeight-e("#viewport").height();this.Shell.subViews["views/brand/plp.view"].$el.css("height",t),e(".TGTloading").showSpacedLoader()},removeLoadingSpinnerInListContent:function(){"use strict";this.Shell.subViews["views/brand/plp.view"].$el.css("height",""),e(".TGTloading").removeSpacedLoader()},processFromCache:function(e){"use strict";var t=this.pageResultsCache[e];return t?(this.model=t.model,this.listenForLoadEvents(t.model),this.setData(t.model),!0):!1},process:function(){"use strict";this.displayLoadingSpinnerInListContent();var t=this;e.when.apply(e,[this.pageMetaPromise,this.brandPromise]).done(function(){t.afterCompleteMetaAndAPIResponse()}).fail(function(e,n,r){t.afterCompleteMetaAndAPIResponse()}),this.listenTo(Backbone.Events,"block:content:onfacetapply",function(e){t.freezeFacet=e}),this.listenTo(Backbone.Events,"route:topage",this.routeToPage)},afterCompleteMetaAndAPIResponse:function(){var n=this;e(".TGTloading").hide();var i=n.model;i.get("searchState").errorCode&&(r.LPTaggingError="ERR-"+i.get("searchState").errorCode);var s=i.get("searchState").keywordRedirectURL;if(!s||location.search.indexOf("kwr=y")>-1){var a=(new Date).getTime(),f=n.Shell.subViews["views/brand/plp.view"];f.freezeFacet=this.freezeFacet;if(!f)return;f.plpModel=i,f.serviceURL=i.url();var l=f.collection;l.serviceURL=i.url(),l.reset(i.get("products").slice(0),{silent:!1}),l.metaData=t.clone(i.get("searchState")),l.searchMetaData=t.clone(i.get("searchMetaData")),TL.e(6),n.renderPlpView(a);var c=i.get("searchState");r.delayRendering(function(){n.loadFacetAndAdsenseViews(i,c,a)}),r.delayRendering(function(){"use strict";n.Shell.subViews["views/brand/adsense.view"].model.set(t.clone(c)),n.Shell.subViews["views/brand/adsense.view"].model.set("isNullSearchPage",c.total_results==="0")},10)}else{var o=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),u=n.constructRedirectURL(s);u&&(o+=u,TL.err(14,o),Backbone.history.navigate(o,{trigger:!0,replace:!0}))}TL.e(0)},loadFacetAndAdsenseViews:function(e,n,r){var i=this;(e.get("facets").length||!this.freezeFacet)&&i.Shell.subViews["views/brand/facet.view"].model.unset("metaData",{silent:!0}),i.Shell.subViews["views/brand/adsense.view"].model.set({breadCrumbtaggingValue:null,currentPage:null},{silent:!0}),i.Shell.subViews["views/brand/adsense.view"].model.set(t.clone(e.get("searchState"))),(e.get("facets").length||!this.freezeFacet)&&i.Shell.subViews["views/brand/facet.view"].model.set({breadBox:t.clone(e.get("breadBox")),facets:t.clone(e.get("facets")),sortOptions:t.clone(e.get("sortOptions")),metaData:t.clone(n),breadcrumbs:t.clone(e.get("breadCrumb"))}),this.freezeFacet=!1,this.alreadyAppliedFilters=this.Shell.subViews["views/brand/facet.view"].model.alreadyAppliedFilters,Backbone.Events.trigger("c:filter:affix",{override:!0}),i.Shell.subViews["views/brand/facet.view"].timeStamp=r,i.fetchOBGBMessage(e)},deepDataClone:function(e){return JSON.parse(JSON.stringify(e))},fetchNextPage:function(e){"use strict";TL.s(11);var t,n=this,r=new s;r.registryObj=this.registryObj,r.queryParams=this.deepDataClone(e.queryParams),r.queryParams.offset+=r.queryParams.count,e.get("searchState").currentPage==1&&(r.queryParams.sort_by=e.get("searchState").sort_by),t=r.url();if(this.pageResultsCache[t])return;r.once("sync",function(e){TL.e(11),n.cacheModel(e)}),r.once("error",function(){TL.err(12,"brand:"+r.url())}),r.fetch()},cacheModel:function(e){"use strict";var n,r,i,s=e.url();if(!(e.get("products")||[]).length)return;this.queryString&&this.pageResultsCache[s]?(i=this.pageResultsCache[s],r=t.indexOf(this.pageResultQueue,this.pageResultsCache[s]),r>-1&&this.pageResultQueue.splice(r,1)):(i={model:e,key:s},this.pageResultsCache[s]=i),this.pageResultQueue.unshift(i);while(this.pageResultQueue.length>5)n=this.pageResultQueue.pop(),delete this.pageResultsCache[n.key]},setData:function(e){TL.e(1),TL.s(6);var t=this;this.cacheModel(e),e.get("searchState").keywordRedirectURL||Number(e.get("searchState").currentPage)<Number(e.get("searchState").totalPages)&&window.setTimeout(function(){t.fetchNextPage(e)},1e3)},renderPlpView:function(e){TL.s(13),this.Shell.subViews["views/brand/plp.view"].showPage(e);var t=this;r.delayRendering(function(){t.removeLoadingSpinnerInListContent(),Backbone.Events.trigger("lp:c:getalreadyviewed"),Backbone.Events.trigger("lp:c:markViewedLP");var e=r.Get.TCookie("viewType");t.Shell.subViews["views/brand/facet.view"].doOrientationChange()}),TL.e(13)},registerSeoCallback:function(){var e=this;seoHttpRequestPromise.then(function(n){var i={seo_data:{seo_title:e.queryString+" at Target",seo_keywords:e.queryString,seo_description:"Shop for "+e.queryString+" online on Target.com. Find "+e.queryString+" at Target.",canonical_url:window.location.pathname}};n=t.extend(n,i),Backbone.Events.trigger("updateSeoTag",n),isSapphireEnabled&&n.seo_data&&n.seo_data.page_id&&(r.currentPageId=n.seo_data.page_id),Taxo.breadCrumb=t.getBreadCrumb(n),Taxo.breadCrumbNids=t.getBreadCrumbNidString(n),Taxo.isL1orL2=n.breadcrumbs&&n.breadcrumbs[0]&&n.breadcrumbs[0].length<3,typeof slingShotContentXHR!="undefined"&&!r.isNodeEnabledForRoute()&&Backbone.Events.trigger("c:slingshot:fetchSlingshotContent")}).catch(function(e){Backbone.Events.trigger("renderFallbackContent")})},constructRedirectURL:function(e){var t=!1,n,i,s;if(e.indexOf("/c/")>-1||e.indexOf("/s/")>-1||e.indexOf("/s?")>-1||e.indexOf("/sb/")>-1)t=!0;return t?e.indexOf("/c/")>-1?(n=e.split(/\/c\/|#/),n.length>2?"c/"+n[1]:""):e.indexOf("/sb/")>-1?(n=e.split(/\/sb\/|#/),n.length>2?"sb/"+n[1]:""):(i=r.getParameterByName("searchTerm",e),s=r.getParameterByName("category",e),"s?category="+s+"&searchTerm="+i+"&Nao=0&kwr=y"):(e.indexOf("/np/")>-1?e=e.replace("/np/","/c/"):e.indexOf("/sb/")>-1&&(e=e.replace("/sb/","/c/"),e=e.replace(/(#\?|\?).*/,"")),window.location.assign(e),!1)},setqueyHash:function(e){e=e.split("&");var n={},r=!1,i=this;return t.each(e,function(e,r){var i=e.split("=");n[i[0]]?t.isArray(n[i[0]])?n[i[0]].push(decodeURIComponent(i[1])):n[i[0]]=[n[i[0]],decodeURIComponent(i[1])]:n[i[0]]=decodeURIComponent(i[1])}),this.cartwheelCheck(n),n.isDLP=n.hasOwnProperty("isDLP"),n},cartwheelCheck:function(e){if(location.pathname.search("search/offers")>-1){var t=r.Get.Cookie("promoCode");t!==""&&(e.promo_code=t)}},rerenderSubViewIfNeeded:function(e,t,n,r){n==="slp-facet-wrap"&&Backbone.Events.trigger("slp:emptyView")},routeToPage:function(e){var n=e.url,r=this;if(e.addRegistry!=0){var i=[],s=e.url&&e.url.split("?")[1],o=e.url&&e.url.split("?")[0],u=s?"?"+s:"";t.each(this.registryObj,function(e,t){u=r.replaceOrAddQueryParam(u,t,t+"="+e)}),n=o+u}Backbone.history.navigate(n,{trigger:!0,replace:!1})}}).mixin([f,o,u,a,l,c,h]);return p}),define("models/thematic/thematic.model",["jquery","underscore","backbone"],function(e,t,n){var r=n.Model.extend({constructor:function(e){e=this.frontFaceKeys(e),r.__super__.constructor.call(this,e)},frontFaceKeys:function(e){var n=t.getVal(e,"large_image_id")||"",r=t.getVal(e,"sale_price_str")||"",i=t.getVal(e,"price_str")||"";return e={title:t.getVal(e,"title"),partNumber:t.getVal(e,"pid"),tcin:t.getVal(e,"pid"),itemType:"Stand Alone",catEntryID:t.getVal(e,"pid"),itemAttributes:{productDescription:t.getVal(e,"description")},productMfgBrand:"Write Dudes",brand:t.getVal(e,"brand"),truncatedTitle:Target.stringTruncate(t.getVal(e,"title")),swatchImgArr:[],flagFlippable:"flip-active clearfix flip-plp-cart-btn",listStoreEligible:!1,atcText:"view details",viewInPdp:!0,showRedPrice:!1,swatchCountPLP:4,backOderMessage:null,isinStock:!1,img:n,imgClass:"product",priceClass:"price low-price",priceText:"$"+r,subscriptionItems:!1,mmbv:"",rating:t.getVal(e,"reviews")||"",totalReviews:t.getVal(e,"reviews_count")||"",topReviews:[],promotions:"",shipsFreeItem:"",callOuts:"",eyeBrow:null,articleLink:(t.getVal(e,"url")||"").split("target.com")[1],ppunitText:"",saveStory:r!=i?"$"+i:""},e}});return r}),define("collections/thematic/thematic.collection",["jquery","backbone","collection","models/thematic/thematic.model"],function(e,t,n,r){var i=n.extend({model:r,initialize:function(){this.metaData={}},queryParams:{rows:24,start:0,account_id:5057,domain_key:"target_com",request_id:1,url:"xx",fl:"large_image_id,pid,title,brand,price,sale_price,promotions,thumb_image,sku_thumb_images,sku_swatch_images,sku_color_group,url,price_range,sale_price_range,description,reviews,reviews_count",sc2_mode:!0,request_type:"thematic",q:""},url:function(){return this.queryParams.start=parseInt(Target.getParameterByName("start"),10)||0,Target.Get.Config("thematicUrl")+e.param(this.queryParams)},sync:function(e,n,r){return r.timeout=1e4,r.dataType="jsonp",r.processData=!0,r.async=!0,r.type="GET",r.jsonpCallback="targetCallback",r.cache=!0,t.sync(e,n,r)},parse:function(e){this.rawResponse=e;var t=this.rawResponse.response,n=this.rawResponse.page_header;try{this.helpfulLinks=JSON.parse(n.left_nav)}catch(r){this.helpfulLinks=null}var i=this.queryParams.start=parseInt(Target.getParameterByName("start"),10)||0,s=this.queryParams.rows,o=Math.ceil(t.numFound/s);return _.extend(this.metaData,{queryParam:this.queryParams.q,currentPage:i/s+1,keyword:n.h1,seoPageHeader:n,offset:i,responseGroup:"Items, VariationSummary",count:s,ruleId:"451977",ruleType:"PageControls",sortBy:"relevance",startResult:i+1,totalPages:o,total_results:t.numFound,viewType:"Large"}),t.docs}});return i}),define("controllers/thematic/thematic.controller",["jquery","underscore","backbone","controllers/common/base.controller","Target","collections/thematic/thematic.collection","controllers/mixins/tgtcrush-c-mx"],function(e,t,n,r,i,s,o){var u=r.extend({constructor:function(){r.prototype.constructor.apply(this,arguments)},queryString:null,setPageMetaData:function(e){this.queryString=e.split("?")[0].replace(/\+/g," "),u.__super__.setPageMetaData.call(this,e)},process:function(){e(".TGTloading").show(),this.rmvListener(),this.collection=new s,this.collection.queryParams.q=this.queryString,this.listenTo(this.collection,"sync",e.proxy(function(){n.Events.trigger("c:tgtTlp:items",this.collection),n.Events.trigger("plp:pageTagging"),n.Events.trigger("lp:c:getalreadyviewed"),n.Events.trigger("lp:c:markViewedLP")})),this.listenTo(this.collection,"error",e.proxy(function(){n.Events.trigger("c:tgtTlp:items",this.collection),n.Events.trigger("plp:pageTagging")})),this.collection.fetch()},rmvListener:function(){},addListener:function(){}}).mixin([o]);return u}),define("models/promo/plp.model",["jquery","underscore","backbone","Target","models/mixins/lp.model-mx","backboneAdvice"],function(e,t,n,r,i){var s=n.Model.extend({defaults:function(){return{products:[],facets:[],sortOptions:{},selected:{},searchState:{keyword:"",sort_by:"",offset:0,responseGroup:"Reviews,MiniVariationSummary,PromotionSummary,Offers,ItemAttributes,MobileItems",total_results:null,currentPage:1,startResult:0,count:24,totalPages:0}}},initialize:function(e){e&&e.apiUrl&&(this.hlApiUrl=e.apiUrl),this.on("change:selected",this.setQueryParams);var t=r.getLPServiceData();this.searchUrl=t.searchUrl},queryParams:function(){return{promo:"",count:24,offset:0}}(),registryParams:["search_interface","reg_type"],url:function(){var t,n=r.Get.Cookie("LPURL")||this.searchUrl;return this.hlApiUrl?this.hlApiUrl:(t=""+e.param(this.queryParams),n+t)},sync:function(e,t,i){n.Events.trigger("browse-search:service-start");var s=this;return i.timeout=r.Get.Config("searchTimeoutIntervel")||5e3,i.dataType="json",i.processData=!0,i.async=!0,i.type="GET",i.url=this.url(),i.jsonpCallback="targetCallback",i.cache=!0,n.sync(e,t,i)},noResult:function(e){try{}catch(t){}},parse:function(e,i){n.Events.trigger("browse-search:service-end");var s={},o=t.getVal(e,"search_response.items.Item"),u=t.getVal(e,"search_response.metaData"),a=t.getVal(e,"search_response.breadbox_list"),f=t.getVal(e,"search_response.facet_list"),l=t.getVal(e,"search_response.sort_options"),c=t.getVal(e,"search_response.facet_list"),h=t.getVal(e,"search_response.breadCrumb_list[0]"),p=this.buildFacetLookup(f);s.promo=t.getVal(e,"search_response.promo"),c&&c.length?s.refineCategories=c:[],o&&o.length&&t.each(o,function(e){e.truncatedTitle=r.stringTruncate(e.title),e.tcin=e.tcin||e.partNumber}),o?s.products=o:null,u?s.searchState=this.buildSearchOptions(u):null,f?s.facets=f:null,l?s.sortOptions=l:null,p?s.facetLookup=p:null,s.breadBox=a,s.breadCrumb=h,this.set(s)},buildFacetLookup:function(e){"use strict";var n={};return t.each(e,function(e){t.each(e.details,function(t){t.facet=e,n[t.nid]=t})}),n},buildSearchOptions:function(e){var n={};try{t.each(e,function(e,t){var r=e.name;Object.keys(e).length>2?(delete e.name,n[r]=e):n[r]=e.value})}catch(r){}return n.startResult=parseInt(n.offset,10)+1,n.keyword=n.promo_id,n},setQueryParams:function(e,n){var r=this,i=this.queryParams,s=e.get("searchState").count,o=n.promoId;o=o&&o.replace(/\+/g," "),i.promo=decodeURIComponent(o),n.sortBy?i.sort_by=n.sortBy:delete i.sort_by,n.category?i.category=n.category:delete i.category,n.limit&&(i.count=Number(n.limit)),i.offset=n.Nao&&!t.isNaN(Number(n.Nao))?Math.floor(Number(n.Nao)/s)*s:0,this.getFacetParams(n.facetedValue,n.ratingFacetVal,i),this.updateRegistryParams(i),this.updatePriceRangeParams(i,n)}}).mixin([i]);return s}),define("controllers/promo/promo.controller",["jquery","underscore","controllers/common/base.controller","Target","collections/promo/promo.collection","models/promo/plp.model","controllers/mixins/variation-c-mx","controllers/mixins/recommendation-c-mx","controllers/mixins/crush-recommendation-c-mx","controllers/mixins/tgtcrush-c-mx","controllers/mixins/obgb-list-c-mx","controllers/mixins/registry-c-mx","controllers/common/slingshot.controller-mx","views/mixins/common/queryparam-helper"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=n.extend({css:["/css/patlab/browse.css"],queryString:null,blockSlingShot:!1,pageResultsCache:function(){return{}}(),pageResultQueue:function(){return[]}(),alreadyAppliedFilters:{},forPage:"promotion",initiate:function(){},constructor:function(){n.prototype.constructor.apply(this,arguments)},setPageMetaData:function(e){delete r.LPTaggingError,this.queryString=e;var t=this.model=new s;t.registryObj=this.model.registryObj=this.registryObj,TL.s(1),t.set("selected",this.setqueyHash(this.queryString)),this.processFromCache(t.url())||(this.model&&this.model.off(),this.listenForLoadEvents(t),this.promoPromise=t.fetch()),d.__super__.setPageMetaData.call(this,e)},listenForLoadEvents:function(e){"use strict";var t=this;t.stopListening(e),this.listenTo(e,"sync",t.setData),this.listenToOnce(e,"error",function(n,i){var s=i&&i.statusText||"";s.toLowerCase().indexOf("time")>-1?r.LPTaggingError="ERR-TO":(i||{}).status&&(r.LPTaggingError="ERR-"+i.status),TL.err(2,"promo : "+e.url()),t.listenTo(e,"error",t.setData),e.fetch()})},registerSeoCallback:function(){var e=this;seoHttpRequestPromise.then(function(n){Backbone.Events.trigger("updateSeoTag",n),isSapphireEnabled&&n.seo_data&&n.seo_data.page_id&&(Taxo.seo_data=n.seo_data,r.currentPageId=n.seo_data.page_id),Taxo.breadCrumb=t.getBreadCrumb(n),Taxo.breadCrumbNids=t.getBreadCrumbNidString(n),Taxo.isL1orL2=n.breadcrumbs&&n.breadcrumbs[0]&&n.breadcrumbs[0].length<3,n.template&&!r.isNodeEnabledForRoute()&&(e.blockSlingShot?e.paintOldContent=!0:e.fetchSlingshotContent(n.template),e.blockSlingShot=!1)}).catch(function(e){Backbone.Events.trigger("lp:redoak:fallback")})},registerContentCallback:function(){var e=this;seoHttpRequestPromise.then(function(n){var i=n.metadata;n.seo_data=i,i.seo_data=i,Backbone.Events.trigger("updateSeoTag",i),Taxo.children=i.children||[],Taxo.seo_data=i||{},Taxo.typeOfPage=i.type||"",Taxo.breadCrumb=function(e){var n,r,i="",s=[],o={};return t.each(e.breadcrumbs,function(e,o){n=e.page_id,n&&(r=n.split("/")[2]);var u={categoryId:r,index:o,label:e.seo_h1||"Target",nid:r,url:e.canonical_url};i+=i?":"+t.unescape(e.seo_h1):t.unescape(e.seo_h1),s.push(u)}),i+=":"+e.seo_h1,o={breadCrumbFull:s,breadCrumb:i},o}(i),Taxo.breadCrumbNids=function(e,n){var r="";return t.each(e,function(e,t){e.nid!=="root"&&(r+="/"+e.nid),n.uri&&(r+="/"+n.uri.split("/")[2])}),r}(Taxo.breadCrumb.breadCrumbFull,i),Taxo.isL1orL2=i.breadcrumbs&&i.breadcrumbs.length<3;if(r.isNodeEnabledForRoute())return;TL.e(103);var s=n;r.getParameterByName("type")=="products"&&(s=e.buryContentSlots(n)),e.blockSlingShot||(Backbone.Events.trigger("ct:slingshot:clear:process",e.forPage),e.fetchSlingshotContentSuccess(s)),e.blockSlingShot=!1}).catch(function(e){Backbone.Events.trigger("lp:redoak:fallback","fallbackTitle")})},displayLoadingSpinnerInListContent:function(){"use strict";var t=window.innerHeight-e("#viewport").height();this.Shell.subViews["views/promo/plp.view"].$el.css("height",t),e(".TGTloading").showSpacedLoader()},removeLoadingSpinnerInListContent:function(){"use strict";this.Shell.subViews["views/promo/plp.view"].$el.css("height",""),e(".TGTloading").removeSpacedLoader()},processFromCache:function(e){"use strict";var t=this.pageResultsCache[e];return t?(this.model=t.model,this.listenForLoadEvents(t.model),this.setData(t.model),!0):!1},process:function(){"use strict";this.displayLoadingSpinnerInListContent();var t=this;e.when.apply(e,[this.pageMetaPromise,this.promoPromise]).done(function(){t.afterCompleteMetaAndAPIResponse()}).fail(function(e,n,r){t.afterCompleteMetaAndAPIResponse()}),this.listenTo(Backbone.Events,"block:content:onfacetapply",function(e){t.blockSlingShot=e,t.freezeFacet=e}),this.listenTo(Backbone.Events,"route:topage",this.routeToPage)},afterCompleteMetaAndAPIResponse:function(){var n=this;e(".TGTloading").hide();var i=n.model;i.get("searchState").errorCode&&(r.LPTaggingError="ERR-"+i.get("searchState").errorCode);var s=(new Date).getTime(),o=n.Shell.subViews["views/promo/plp.view"];o.freezeFacet=this.freezeFacet;if(!o)return;o.plpModel=i,o.serviceURL=i.url();var u=o.collection;u.serviceURL=i.url(),u.reset(i.get("products").slice(0),{silent:!1}),u.metaData=t.clone(i.get("searchState")),u.promo=i.get("promo"),TL.e(6),n.renderPlpView(s);var a=i.get("searchState");r.delayRendering(function(){n.loadFacetAndAdsenseViews(i,a,s)}),r.delayRendering(function(){"use strict";n.Shell.subViews["views/promo/adsense.view"].model.set(t.clone(a)),n.Shell.subViews["views/promo/adsense.view"].model.set("isNullSearchPage",a.total_results==="0")},10),TL.e(0)},loadFacetAndAdsenseViews:function(e,n,r){var i=this;(e.get("facets").length||!this.freezeFacet)&&i.Shell.subViews["views/promo/facet.view"].model.unset("metaData",{silent:!0}),i.Shell.subViews["views/promo/adsense.view"].model.set({breadCrumbtaggingValue:null,currentPage:null},{silent:!0}),i.Shell.subViews["views/promo/adsense.view"].model.set(t.clone(e.get("searchState")));if(e.get("facets").length||!this.freezeFacet)i.Shell.subViews["views/promo/facet.view"].model.set({breadBox:t.clone(e.get("breadBox")),facets:t.clone(e.get("facets")),sortOptions:t.clone(e.get("sortOptions")),metaData:t.clone(n),breadcrumbs:t.clone(e.get("breadCrumb"))}),formFactor==="tablet"&&i.Shell.subViews["views/promo/promotedFacet.view"].model.set({breadBox:t.clone(e.get("breadBox")),facets:t.clone(e.get("facets")),sortOptions:t.clone(e.get("sortOptions")),metaData:t.clone(n),breadcrumbs:t.clone(e.get("breadCrumb"))});this.freezeFacet=!1,this.alreadyAppliedFilters=this.Shell.subViews["views/promo/facet.view"].model.alreadyAppliedFilters,Backbone.Events.trigger("c:filter:affix",{override:!0}),i.Shell.subViews["views/promo/facet.view"].timeStamp=r,i.fetchOBGBMessage(e)},deepDataClone:function(e){return JSON.parse(JSON.stringify(e))},fetchNextPage:function(e){"use strict";TL.s(11);var t,n=this,r=new s;r.registryObj=this.registryObj,r.queryParams=this.deepDataClone(e.queryParams),r.queryParams.offset+=r.queryParams.count,e.get("searchState").currentPage==1&&(r.queryParams.sort_by=e.get("searchState").sort_by),t=r.url();if(this.pageResultsCache[t])return;r.once("sync",function(e){TL.e(11),n.cacheModel(e)}),r.once("error",function(){TL.err(12,"promo:"+r.url())}),r.fetch()},cacheModel:function(e){"use strict";var n,r,i,s=e.url();if(!(e.get("products")||[]).length)return;this.queryString&&this.pageResultsCache[s]?(i=this.pageResultsCache[s],r=t.indexOf(this.pageResultQueue,this.pageResultsCache[s]),r>-1&&this.pageResultQueue.splice(r,1)):(i={model:e,key:s},this.pageResultsCache[s]=i),this.pageResultQueue.unshift(i);while(this.pageResultQueue.length>5)n=this.pageResultQueue.pop(),delete this.pageResultsCache[n.key]},setData:function(e){TL.e(1),TL.s(6);var t=this;this.cacheModel(e),e.get("searchState").keywordRedirectURL||Number(e.get("searchState").currentPage)<Number(e.get("searchState").totalPages)&&window.setTimeout(function(){t.fetchNextPage(e)},1e3)},renderPlpView:function(e){TL.s(13),this.Shell.subViews["views/promo/plp.view"].showPage(e);var t=this;r.delayRendering(function(){t.removeLoadingSpinnerInListContent(),Backbone.Events.trigger("lp:c:getalreadyviewed"),Backbone.Events.trigger("lp:c:markViewedLP");var e=r.Get.TCookie("viewType");t.Shell.subViews["views/promo/facet.view"].doOrientationChange()}),TL.e(13)},setqueyHash:function(e){e=e.split("&");var n={},r=!1,i=this;return t.each(e,function(e,r){var i=e.split("=");n[i[0]]?t.isArray(n[i[0]])?n[i[0]].push(decodeURIComponent(i[1])):n[i[0]]=[n[i[0]],decodeURIComponent(i[1])]:n[i[0]]=decodeURIComponent(i[1])}),n},rerenderSubViewIfNeeded:function(e,t,n,r){n==="slp-facet-wrap"&&Backbone.Events.trigger("slp:emptyView")},routeToPage:function(e){var n=e.url,r=this;if(e.addRegistry!=0){var i=[],s=e.url&&e.url.split("?")[1],o=e.url&&e.url.split("?")[0],u=s?"?"+s:"";t.each(this.registryObj,function(e,t){u=r.replaceOrAddQueryParam(u,t,t+"="+e)}),n=o+u}Backbone.history.navigate(n,{trigger:!0,replace:!1})}}).mixin([f,o,u,a,l,c,h,p]);return d}),define("controllers/storelocator/storelocator.controller",["underscore","backbone","controllers/common/base.controller","Target","models/storelocator/storelocator.model","contextMappings","controllers/mixins/storelocator-c-mx"],function(e,t,n,r,i,s,o){var u=n.extend({queryString:null,initiate:function(){},storeModel:new i,setPageMetaData:function(e){u.__super__.setPageMetaData.call(this,e),this.queryString=e},process:function(){var e=this;t.Events.trigger("c:sl:setModel",e.storeModel),r.initiateGeoLocationService(),e.listenTo(t.Events,"v:sl:storelist",e.fetchStoresNearBy),e.listenTo(t.Events,"v:sl:storesbylatlong",e.storesFromCurrentLocation),e.listenTo(t.Events,"v:sl:addPuisBtn",e.addPuisBtn),e.listenTo(t.Events,"v:sl:renderAgain",e.setStoreCookie),e.storeModel.updateCookieValue(),e.routeToSpecifiedPage()},routeToSpecifiedPage:function(){var n=window.location.href,r=n.indexOf("find-stores?searchType=mytarget")!==-1,i;/\/sl\/.*\/\d*/.test(window.location.pathname)&&!e.isEnabled("STORE_LOCATOR_SEO_URL")&&(i=parseInt(window.location.pathname.split("/").pop(),10),n=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),t.history.navigate(n.slice(0,n.lastIndexOf("/"))+"/store-locator/store-details?storeNumber="+i+"&dvm=true&lnk=store",{trigger:!0,refresh:!1})),this.queryString==="store-details"||r?this.fetchStoreDetials(r):this.getStoreResult()},getStoreResult:function(){var e,n,i=r.getParameterByName("address"),s=r.Get.Cookie("fiatsCookie"),o=r.getParameterByName("concept")||r.getParameterByName("capabilities");o=o?o.split(","):[];if(i==="")try{s&&(n=s.split("|"),n.length>1&&(e=n[2].split("_")[1],e!==""&&e!=="false"&&(i=e)))}catch(u){}this.storeModel.set("searchText",i),this.storeModel.set("showPreciseLocation",i!==""),this.storeModel.set("hasServices",o&&o.length>0),this.storeModel.set("services",o),t.Events.trigger("c:sl:setModel",this.storeModel),t.Events.trigger("c:sl:storefinder")},storesFromCurrentLocation:function(e,t){var n=r.Config.getApiUrl("nearbyStores").replace("{nearby}",e+","+t).replace("{resultStoresLimit}",STORE_RESULT_LIMIT!==undefined&&parseInt(STORE_RESULT_LIMIT,10)>0?parseInt(STORE_RESULT_LIMIT,10):5);this.makeAjaxCall(n,this.redirectCurrentLocation)},rerenderSubViewIfNeeded:function(e,t,n,r){var i=r||"";i=i.replace("/"+this.formFactor,""),n==="header"&&this.Shell.subViews[i].preRender()},redirectCurrentLocation:function(e){var n,r;try{e.Locations.Location.length>0?(n=e.Locations.Location[0].Address.PostalCode.substring(0,5),r=domainUrl.replace(window.location.protocol+"//"+window.location.host,""),this.storeModel.set("searchText",n),t.history.navigate(r.slice(0,r.lastIndexOf("/"))+"/store-locator/find-stores?address="+n,{trigger:!1,refresh:!1}),this.setStoreListModelData(e)):t.Events.trigger("c:sl:emptyllatlongstores","No stores near your location try search below")}catch(i){t.Events.trigger("c:sl:emptyllatlongstores","No stores near your location try search below")}},fetchStoresNearBy:function(e,t){var n="";t&&t!==""?n=r.Config.getApiUrl("nearbyStores2").replace("{nearby}",e).replace("{capabilities}",t).replace("{resultStoresLimit}",STORE_RESULT_LIMIT!==undefined&&parseInt(STORE_RESULT_LIMIT,10)>0?parseInt(STORE_RESULT_LIMIT,10):5):n=r.Config.getApiUrl("nearbyStores").replace("{nearby}",e).replace("{resultStoresLimit}",STORE_RESULT_LIMIT!==undefined&&parseInt(STORE_RESULT_LIMIT,10)>0?parseInt(STORE_RESULT_LIMIT,10):5),this.makeAjaxCall(n,this.setStoreListModelData,function(){})},setStoreListModelData:function(n,i){var s=this,o=[],u=r.Get.TCookie("myStoreId"),a=-1;s.storeListArray=[],s.storeListObject={},e.isArray(n.Locations.Location)?e.each(n.Locations.Location,function(e){s.storeListArray.push(s.processStoreObject(e)),e.ID===Number(u)&&(a=s.storeListArray.length-1)}):e.isDefined(n.Locations.Location)&&s.storeListArray.push(s.processStoreObject(n.Locations.Location)),a>0&&(o=s.storeListArray.splice(a,1),s.storeListArray.unshift(o[0])),i?s.storeModel.set("storeListArray",o):s.storeModel.set("storeListArray",s.storeListArray),t.Events.trigger("c:sl:storeresults")},parseStoreResultsReponse:function(n){var r=[],i,s,o,u,a,f,l,c,h;for(o=0;o<n.Locations.Location.length;o++){i={},i.Name=n.Locations.Location[o].Name;if(n.Locations.Location[o].SubTypeDescription)i.Name=n.Locations.Location[o].Name+" "+n.Locations.Location[o].SubTypeDescription;else if(!n.Locations.Location[o].SubTypeDescription&&n.Locations.Location[o].Capability)for(u=0;u<n.Locations.Location[o].Capability.length;u++)n.Locations.Location[o].Capability[u].CapabilityName==="Fresh Grocery"&&(i.Name=n.Locations.Location[o].Name+" With "+n.Locations.Location[o].Capability[u].CapabilityName);a=n.Locations.Location[o].Address.AddressLine1,f=n.Locations.Location[o].Address.FormattedAddress,l=f.charAt(a.length),c=n.Locations.Location[o].Address.City,h=n.Locations.Location[o].Address.Subdivision,f=f.replace(l,"<br/>"),i.Address=f,i.cityState=c+","+h,i.ID=n.Locations.Location[o].ID,r.push(i)}s=e.sortBy(r,function(e){return e.Name}),this.storeModel.set("storeList",s),t.Events.trigger("c:sl:storeresults")},checkMyStoreCookie:function(e){var t=r.Get.TCookie("myStoreId"),n,i,s;if(t!==""&&t===e)this.model.set("myStore",!0),this.model.set("howsetstore",!1);else{this.model.set("myStore",!1),n=r.Get.geoLocationDetails();if(n!=="GEO_LOCATION_OFF")try{i=r.Get.Cookie("fiatsCookie"),i&&(s=i.split("|"),s.length>1&&(e===s[0].split("_")[1]?this.model.set("howsetstore",!0):this.model.set("howsetstore",!1)))}catch(o){}}},addPuisBtn:function(){var n=this,i;e.isEnabled("PEAK_HOURS_FLAG")?$(".TGTloading").removeSpacedLoader():(Tgt_Auth.changeTimeout(r.Get.Config("globalATPServiceTimeout")||1e4),Tgt_Auth.postRequest("atpAggregator",{request_type:"availability"},n.getATPAggregatorPayLoad(),function(e,n){t.Events.trigger("c:sl:addPuisBtn",e,n)}))},getATPAggregatorPayLoad:function(){var e={products:[]},t={request_line_id:1,product:{product_id:this.storeModel.get("itemPDPData").tcin,location_ids:this.storeModel.get("storedetails").ID,multichannel_option:"none",inventory_type:"stores",requested_quantity:1,field_groups:"location_summary"}};return e.products.push(t),e}}).mixin([o]);return u}),define("views/tablet/promo/promotedFacet.view",["jquery","underscore","page","Target","text!templates/common/browse/promotedFacet.html","models/promo/facet.model","views/mixins/common/promotedFacet-mx","views/mixins/common/queryparam-helper","views/tablet/promo/wrapper.shell.view"],function(e,t,n,r,i,s,o,u){var a=n.extend({constructor:function(){n.prototype.constructor.apply(this,arguments)},model:new s,ute:"",templates:{promotedFacetTpl:i},events:{},pageType:"prlp",initializeView:function(){}}).mixin([o,u]);return a}),define("non-plp.mod",function(){});