define(["jquery","version!fly/managers/debug","version!fly/managers/components","managers/third-party/facebook","managers/page-vars","managers/promotionals.desktop","managers/user","version!fly/components/base","components/modal-async.desktop"],function(e,o,n,t,s,a,i){o=o.init("flyoutPromo"),e.widget("cnet.flyoutPromo",e.fly.base,{options:{url:"/promotional/flyout-promo/"},_create:function(){var o=this;this._super(),e.ajax({dataType:"html",url:this.options.url}).done(function(a){o.$element=e(a),t.init({onInit:function(){t.isLoggedIn(function(t){e("body").append(o.$element),i.setupButtonEvents(o.$element),n.process(o.$element),o._setupEvents(),t&&!s.auto&&o.$element.addClass("facebookPromo")})}})})},_setupEvents:function(){var o=this;e('[data-close="flyout-promo"]',this.$element).on("click",function(e){o.$element.hide(),a.suppress("flyoutPromo")}),e("[data-user-social]",this.$element).on("click",function(e){a.suppress("flyoutPromo")})}})});