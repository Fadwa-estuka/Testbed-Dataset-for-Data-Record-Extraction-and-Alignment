function adKit(a){this.win=a,this.Views=[],this.activeViews=[],this.testing=!1;var b;this.initAd=function(a){var c=Math.round((new Date).getTime()/1e3);document.write('<div id="container_'+c+'"></div>'),b=document.getElementById("container_"+c),this.testLog("initAd",b,"anchor built");var d=this.win.document,e=frameElement?frameElement.parentNode:b.parentNode,f=frameElement||null;this.testLog("initAd",d,"document set"),this.testLog("initAd",e,"parent set"),this.testLog("initAd",f,"I'm in an iframe!");var g=function(a,b){var c=null;return a&&a.id?c=a.id:b.id&&(c=b.id),c?c.indexOf("/8264")!=-1?"8264":c.indexOf("/7336")!=-1?"7336":"test":"test"}(f,e),h=function(b,c,d){return c&&c.id&&"test"!=b?c.id.substring(c.id.indexOf("/"+b),c.id.lastIndexOf("_")):d.id&&"test"!=b?d.id.substring(d.id.indexOf("/"+b),d.id.lastIndexOf("_")):a.test_network}(g,f,e);this.testLog("initAd",h,"Ad unit is "+h),this.testLog("initAd",a.type,"Ad type is "+a.type);for(var i=!1,j=0;j<this.Views.length;j++)a.type===this.Views[j].name&&(this.activeViews.push(this.Views[j].buildView(a.type,a.pos,a.targeting,d,e,f,this.util,a.stylesheet)),i=!0);this.testLog("initAd",i,"Ad View has been built");var k=this.util.getActiveView(a.type,a.pos,a.targeting,this.activeViews);if(this.testLog("initAd",k,"Ad View located"),k.initRender(b),a.seat_overides)for(var l=0;l<a.seat_overides.length;l++)a.seat_overides[l].adUnit===h&&(a.max_seats=a.seat_overides[l].seats,this.testLog("initAd",!0,"Max Seats reset to "+a.seat_overides[l].seats));this.testLog("buildSubcreatives",this.testSubs,"Test Subcreatives turned on"),this.testLog("buildSubcreatives",!this.testSubs,"DFP Subcreatives turned on"),this.testSubs?this.util.buildTestSubcreatives(a.subcreative_size,a.max_seats,a.type,a.pos,a.targeting,h):this.util.buildSubcreatives(a.subcreative_size,a.max_seats,a.type,a.pos,a.targeting,h)},this.subcreativeCallback=function(a,b,c,d){var e=this.util.getActiveView(b,c,d,this.activeViews);this.testLog("subcreativeCallback",b,"Ad Type is "+b),this.testLog("subcreativeCallback",c,"Ad pos is "+c),this.testLog("subcreativeCallback",e,"Subcreative View Found"),e.ad_built||e.ad_building?e.ad_building?e.callback_array.push(a):e.ad_built&&!e.ad_building?e.subcreativeRender(a):this.testLog("subcreativeCallback",!0,"ERROR: failure with subcreative callback"):(e.ad_building=!0,e.callback_array.push(a),e.containerRender())},this.testSetup=function(){this.testing=!0,this.util.loadCSS("http://i.i.cbsi.com/cnwk.1d/Ads/common/js_common/dfp/adkit/cbsAdKit_test.css");var a=this.util.addEl("div",this.win.document.body,{id:"testWrap",style:"left:600px; top:0px"});this.util.addEl("header",a,{},"CBS AdKit Testing"),this.util.addEl("section",a,{id:"testWrapLists"})},this.testLog=function(a,b,c){this.testing&&this.util.testStatement(a,b,c)},this.util={getActiveView:function(a,b,c,d){for(var e=0;e<d.length;e++)if(b){if(d[e].type==a&&d[e].pos==b)return d[e];console.log("error: couldn't find the active view")}else{if(d[e].type==a)return d[e];console.log("error: couldn't find the active view")}},addEl:function(a){return function(b,c,d,e,f){var g=a.document.createElement(b);for(var h in d)d.hasOwnProperty(h)&&g.setAttribute(h,d[h]);return f&&(g.innerHTML=f),e&&g.appendChild(a.document.createTextNode(e)),c.appendChild(g),g}}(this.win),loadCSS:function(a){return function(b){var c=a.document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",b),a.document.getElementsByTagName("head")[0].appendChild(c)}}(this.win),loadJS:function(a){return function(b){var c=a.document.createElement("script");c.setAttribute("type","text/javascript"),c.setAttribute("src",b),a.document.getElementsByTagName("head")[0].appendChild(c)}}(this.win),testStatement:function(a){return function(b,c,d){for(var e=this.addEl,f=a.document.getElementById("testWrapLists").getElementsByTagName("ul"),g=0,h=null;g<f.length;g++)f[g].id===b&&(h=a.document.getElementById(f[g].id));h=h||e("ul",a.document.getElementById("testWrapLists"),{id:b});var i=h.getElementsByClassName("test-group-title")||null;0===i.length&&(i=e("li",h,{class:"test-group-title"},b)),c?e("li",h,{class:"test-success"},d):e("li",h,{class:"test-failure"},d)}}(this.win),buildTestSubcreatives:function(a,b,c,d,e,f){var g=null;window.cbsAds?g=window.cbsAds:window.parent&&window.parent.cbsAds?g=window.parent.cbsAds:window.top&&window.top.cbsAds&&(g=window.top.cbsAds),g?(g.testLog("buildTestSubcreatives",a,"size is "+a),g.testLog("buildTestSubcreatives",b,"max seats: "+b),g.testLog("buildTestSubcreatives",c,"type is "+c),g.testLog("buildTestSubcreatives",d,"position is "+d),g.testLog("buildTestSubcreatives",f,"ad_unit is "+f)):this.testStatement("buildTestSubcreatives",!0,"Error: Could not find Reference"),g.testSubcreativeObject=g.testSubcreativeObject||{name:"subcreative test"};for(var h=0;h<b;h++)setTimeout(function(){g.subcreativeCallback(g.testSubcreativeObject,c,d,e)},500*h)},buildSubcreatives:function(a,c,d,e,f,g){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){var a=document.createElement("script");a.async=!0,a.type="text/javascript";var b="https:"==document.location.protocol;a.src=(b?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,c)}();for(var h,i=0;i<c;i++){h=d+"_"+e+"_"+i;var j=document.createElement("div");j.setAttribute("id",h),b.appendChild(j)}googletag.cmd.push(function(){for(var b=0;b<c;b++){h=d+"_"+e+"_"+b;var i=googletag.defineSlot(g,a,h).addService(googletag.pubads()).setCollapseEmptyDiv(!0,!0).setTargeting("pos",e);for(var j in f)i.setTargeting(j,f[j])}googletag.pubads().enableAsyncRendering(),googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices()}),googletag.cmd.push(function(){for(var a=0;a<c;a++)h=d+"_"+e+"_"+a,googletag.display(h)})}}}function logger(a){try{console.log(a)}catch(a){}}