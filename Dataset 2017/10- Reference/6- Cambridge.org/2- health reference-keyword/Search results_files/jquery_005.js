;if(window.jQuery)(function($){if($.browser.msie)try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}
$.fn.rating=function(options){if(this.length==0)return this;if(typeof arguments[0]=='string'){if(this.length>1){var args=arguments;return this.each(function(){$.fn.rating.apply($(this),args);});};$.fn.rating[arguments[0]].apply(this,$.makeArray(arguments).slice(1)||[]);return this;};var options=$.extend({},$.fn.rating.options,options||{});this.each(function(){var eid=(this.name||'unnamed-rating').replace(/\[|\]+/g,"_");var context=$(this.form||document.body);var raters=context.data('rating')||{count:0};var rater=raters[eid];var control;if(rater){control=rater.data('rating');control.count++;}
else{control=$.extend({},options||{},($.metadata?$(this).metadata():($.meta?$(this).data():null))||{},{count:0,stars:[]});control.serial=raters.count++;rater=$('<input type="text" class="rating-star-control" name="'+ this.name+'" id="'+ eid+'" value="" size="2"/>');$(this).before(rater.hide());rater.addClass('rating-to-be-drawn');if($(this).attr('disabled'))control.readOnly=true;$(this).before(control.cancel=$('<div class="rating-cancel"><a title="'+ control.cancel+'">'+ control.cancelValue+'</a></div>').mouseover(function(){$(this).rating('drain');$(this).addClass('rating-star-hover');}).mouseout(function(){$(this).rating('draw');$(this).removeClass('rating-star-hover');}).click(function(){$(this).rating('select');}).data('rating',control));};var star=$('<div class="rating-star rater-'+ control.serial+'"><a title="'+(this.title||this.value)+'">'+ this.value+'</a></div>');$(this).after(star);if(this.id)star.attr('id',this.id);if(this.className)star.addClass(this.className);if(control.half)control.split=2;if(typeof control.split=='number'&&control.split>0){var stw=($.fn.width?star.width():0)||control.starWidth;var spi=(control.count%control.split),spw=Math.floor(stw/control.split);star.width(spw).find('a').css({'margin-left':'-'+(spi*spw)+'px'})};if(control.readOnly)
star.addClass('rating-star-readonly');else
star.addClass('rating-star-live').mouseover(function(){$(this).rating('fill');}).mouseout(function(){$(this).rating('draw');}).click(function(){$(this).rating('select');});if(this.checked)control.current=star;$(this).remove();control.stars[control.stars.length]=star;control.element=raters[eid]=rater;control.context=context;control.raters=raters;rater.data('rating',control);star.data('rating',control);context.data('rating',raters);});$('.rating-to-be-drawn').rating('draw').removeClass('rating-to-be-drawn');return this;};$.extend($.fn.rating,{fill:function(){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;this.rating('drain');this.prevAll().andSelf().filter('.rater-'+ control.serial).addClass('rating-star-hover');if(control.focus)control.focus.apply(control.element,[this.text(),$('a',this)[0]]);},drain:function(){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;control.element.siblings().filter('.rater-'+ control.serial).removeClass('rating-star-on').removeClass('rating-star-hover');},draw:function(){var control=this.data('rating');if(!control)return this;this.rating('drain');if(control.current){control.element.val(control.current.text());control.current.prevAll().andSelf().filter('.rater-'+ control.serial).addClass('rating-star-on');}
else
control.element.val('');control.cancel[control.readOnly||control.required?'hide':'show']();this.siblings()[control.readOnly?'addClass':'removeClass']('rating-star-readonly');if(control.blur)control.blur.apply(control.element,[this.text(),$('a',this)[0]]);},select:function(value){var control=this.data('rating');if(!control)return this;if(control.readOnly)return;control.current=null;if(typeof value!='undefined'){if(typeof value=='number')
return control.stars[value].rating('select');if(typeof value=='string')
return $(control.stars).each(function(){if(this.text()==value)this.rating('select');});}
else if(this.is('.rater-'+ control.serial))
control.current=this;this.data('rating',control);this.rating('draw');if(control.callback)control.callback.apply(control.element,control.current?[control.current.text(),$('a',control.current)[0]]:['']);},readOnly:function(toggle,disable){var control=this.data('rating');if(!control)return this;control.readOnly=toggle?true:false;if(disable)control.element.attr("disabled","disabled");else control.element.removeAttr("disabled");this.data('rating',control);this.rating('draw');},disable:function(){this.rating('readOnly',true,true);},enable:function(){this.rating('readOnly',false,false);}});$.fn.rating.options={cancel:'Cancel Rating',cancelValue:'',split:0,starWidth:16};$(function(){$('input[type=radio].star').rating();});})(jQuery);