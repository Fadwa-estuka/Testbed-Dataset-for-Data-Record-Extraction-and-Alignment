!function e(t,r,s){function n(a,i){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,s)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ShelvedBookOrigin={BROWSE_SPOTLIGHT:"browse_spotlight",RECS_WIDGET:"recs_widget"}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.URLTrackingParams={FROM_SEARCH_PARAM:"from_search=true",BOOK_SHOW_INTERACTION_PARAM:"ac=1",DISCUSSIONS_PANE_ALL_DISCUSSIONS:"nav_bar_discussions_pane_all_discussions",DISCUSSIONS_PANE_GROUP:"nav_bar_discussions_pane_group",DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS:"nav_bar_discussions_pane_group_all_unread_posts",DISCUSSIONS_PANE_DISCUSSION:"nav_bar_discussions_pane_discussion",DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES:"nav_bar_discussions_sparse_reading_challenge",DISCUSSIONS_PANE_SPARSE_ALL:"nav_bar_discussions_sparse_all",DISCUSSIONS_PANE_SPARSE_POPULAR:"nav_bar_discussions_sparse_popular"}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRACKED_CLASSES={author_link:{dfp:!0,pmet:{click_type:"author_name"}},full_content_link:{dfp:!0,pmet:{click_type:"body_click"}},book_image:{dfp:!0,pmet:{click_type:"book_image"}},book_title:{dfp:!0,pmet:{click_type:"book_title"}},user_rating_star:{dfp:!0,pmet:{click_type:"rating"}},user_profile:{dfp:!0,pmet:{click_type:"social"}},want_to_read_button:{dfp:!0,pmet:{click_type:"wtr_button"}},preview_book:{dfp:!0,pmet:{click_type:"preview"}},newsfeed_caret:{dfp:!1,pmet:{click_type:"open_dropdown"}},newsfeed_caret_help:{dfp:!1,pmet:{click_type:"help_link"}},newsfeed_caret_not_interested:{dfp:!1,pmet:{click_type:"not_interested"}},sponsored_update_body_image:{dfp:!0,pmet:{click_type:"sponsored_image"}},sponsored_update_body_title_link:{dfp:!0,pmet:{click_type:"sponsored_title"}},microsite_link:{dfp:!0,pmet:{click_type:"sponsored_button_cta"}},sponsored_footer_actions:{dfp:!0,pmet:{click_type:"sponsored_by"}}},r.TRACKED_CLASSES_AUDIBLE={AEP_Desktop_Browse_Image:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Image"}},AEP_Desktop_Browse_Title:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_Title"}},AEP_Desktop_Browse_ExploreButton:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_ExploreButton"}},AEP_Desktop_Browse_SponsoredBy:{dfp:!0,pmet:{pmet_click_tid:"AEP_Desktop_Browse_SponsoredBy"}},AEP_Desktop_Video_ExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Video_ExternalLink",no_redirect:!0}},AEP_Desktop_Sponsored_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookImage",no_redirect:!0}},AEP_Desktop_Sponsored_BookTitle:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookTitle",no_redirect:!0}},AEP_Desktop_Sponsored_AuthorLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_AuthorLink",no_redirect:!0}},AEP_Desktop_Sponsored_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_WantToRead",no_redirect:!0}},AEP_Desktop_Sponsored_Stars:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_Stars",no_redirect:!0}},AEP_Desktop_Sponsored_BookDescription:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookDescription",no_redirect:!0}},AEP_Desktop_Sponsored_BookExternalLink:{pmet:{pmet_click_tid:"AEP_Desktop_Sponsored_BookExternalLink",no_redirect:!0}},AEP_Desktop_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_BookImage",no_redirect:!0}},AEP_Desktop_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Desktop_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookImage:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookImage",no_redirect:!0}},AEP_Mobile_Carousel_WantToRead:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_WantToRead",no_redirect:!0}},AEP_Mobile_Carousel_BookTitle:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_BookTitle",no_redirect:!0}},AEP_Mobile_Carousel_Author:{pmet:{pmet_click_tid:"AEP_Mobile_Carousel_Author",no_redirect:!0}}}},{}],4:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,s,n,o){var a=arguments.length<=6||void 0===arguments[6]?null:arguments[6],i=arguments.length<=7||void 0===arguments[7]?!1:arguments[7];window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){c(e,t,r,s,n,o,a,i),u["default"].hasRequestedCreativeForSlot(e)})}function o(e,t,r){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var s=window.googletag,n=s.defineSlot(t,d[r],e);n.addService(s.pubads())})}function a(){window.googletag&&window.googletag.cmd&&window.googletag.cmd.push(function(){var e=window.googletag;e.enableServices()})}Object.defineProperty(r,"__esModule",{value:!0}),r.requestCreativeForAdSlot=n,r.defineSlot=o,r.enableServices=a;var i=e("../../react_stores/google_ads_store"),l=e("../../react_actions/google_ads_actions"),u=s(l),d={"300x250":[300,250],"970x66":[970,66],"160x600":[160,600],"300x140":[300,140],"728x90":[728,90],"625x210":[625,210],"640x480":[640,480],"300x225":[300,225],"300x175":[300,175],"320x50":[320,50],"400x300":[400,300]},c=function(e,t,r,s,n,o){var a=arguments.length<=6||void 0===arguments[6]?null:arguments[6],l=arguments.length<=7||void 0===arguments[7]?!1:arguments[7],d=window.googletag;d.pubads().addEventListener("slotRenderEnded",function(s){if(s.slot.getSlotId().getDomId()==e)if(s.isEmpty)u["default"].removeAdSlot(e),u["default"].trackImpression(e,i.ImpressionCode.empty);else{u["default"].displayCreativeForSlot(e);var d=$j(t).find('iframe[id^="google_ads_iframe_"]'),c=d.contents().find(r);if(o){var f=c.data("id"),p=c.data("url");f&&p?u["default"].attachServedNativeAdAttributesAndTracking(e,s.lineItemId,c,f,i.ImpressionCode.success,c.data("url")):u["default"].trackImpression(e,i.ImpressionCode.dfpError)}else l?!function(){var t={id:c.data("id"),line_item_id:s.lineItemId,ad_unit:s.slot.getName().split("/",3)[2],ad_device_type:a},r=d.closest("td");$j.each(["offset","index"],function(e,s){t[s]=r.attr(s)}),u["default"].populateHomepagePollAndTracking(e,s.lineItemId,c,t)}():u["default"].attachServedBannerAdAttributesAndTracking(e,s.lineItemId,c,i.ImpressionCode.success);"160x600"===n&&$j(".mainContentContainer").addClass("adSkinEnabled")}}),d.display(e)}},{"../../react_actions/google_ads_actions":26,"../../react_stores/google_ads_store":136}],5:[function(e,t,r){"use strict";function s(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t=(0,i.merge)({},t,{type:t.method}),t=(0,i.omit)(t,"method");var r=$j.Deferred(),s=$j.ajax(e,t);return s.done(r.resolve),s.fail(function(e,t,s){(0,a.redirectOnAuthFailure)(e)||r.reject(e,t,s)}),r.promise()}function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s(e,(0,i.merge)({},t,{method:"POST"}))}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return s(e,(0,i.merge)({},t,{method:"DELETE"}))}Object.defineProperty(r,"__esModule",{value:!0}),r.httpRequest=s,r.httpPost=n,r.httpDelete=o;var a=e("./default_auth_failure_handler"),i=e("lodash")},{"./default_auth_failure_handler":6,lodash:"lodash"}],6:[function(e,t,r){"use strict";function s(e){if(e&&403===e.status){var t=e.responseJSON;if(t.redirect)return(0,n.setLocationUrl)(t.redirect),!0}return!1}Object.defineProperty(r,"__esModule",{value:!0}),r.redirectOnAuthFailure=s;var n=e("../env_utils")},{"../env_utils":11}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.BOOK_ORIGINS={CURRENTLY_READING_WIDGET:"currently-reading-widget",UPDATE_READING_PROGRESS:"hp_status_editor"}},{}],8:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=e.target,r=e.currentTarget,s=!1;if(t===r)s=i(t);else for(;r.contains(t)&&!(s=i(t));)t=t.parentNode;s&&a["default"].trackClickEvent(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.handleDataTracking=n;var o=e("../../react_actions/data_tracking/data_tracking_actions"),a=s(o),i=function(e){return"true"===e.getAttribute("data-tracking-enabletracking")}},{"../../react_actions/data_tracking/data_tracking_actions":20}],9:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e){var t=arguments.length<=1||void 0===arguments[1]?(0,u["default"])():arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];t.locale("en-abbreviated"),e=null!==r?r:(0,u["default"])(e).locale("en-abbreviated");var s=t.diff(e,"days"),n=t.diff(e,"months");return i["default"].inRange(n,1,13)?t.subtract(s,"days").format("DD MMM"):n>12?t.subtract(s,"days").format("DD MMM YY"):i["default"].inRange(s,7,28)?Math.ceil(s/7)+"w":e.fromNow()}function o(e){var t=arguments.length<=1||void 0===arguments[1]?"YYYY-MM-DD":arguments[1];if(e){var r=(0,u["default"])(e);return r.format(t)}return""}Object.defineProperty(r,"__esModule",{value:!0}),r.fromNow=n,r.getFormattedDate=o;var a=e("lodash"),i=s(a),l=e("moment"),u=s(l);u["default"].relativeTimeThreshold("s",60),u["default"].relativeTimeThreshold("m",60),u["default"].relativeTimeThreshold("h",24),u["default"].relativeTimeThreshold("d",25),u["default"].relativeTimeThreshold("M",10),u["default"].locale("en-abbreviated",{relativeTime:{future:"in %s",past:"%s",s:"Just now",m:"1m",mm:"%dm",h:"1h",hh:"%dh",d:"1d",dd:"%dd",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}}),u["default"].locale("en")},{lodash:"lodash",moment:"moment"}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.DEFAULT_SHELVES={READ:{name:"read",displayName:"Read"},CURRENTLY_READING:{name:"currently-reading",displayName:"Currently Reading"},WANT_TO_READ:{name:"to-read",displayName:"Want to Read"}}},{}],11:[function(e,t,r){"use strict";t.exports={PRODUCTION:"production",DEVELOPMENT:"development",TEST:"test",hasDom:function(){return!!window.document},domUnavailable:function(){return!this.hasDom()},isDevelopment:function(){return"production"===this.DEVELOPMENT},getCurrentPath:function(){return window?window.encodeURIComponent(window.location.pathname+window.location.search):void 0},setLocationUrl:function(e){window&&(window.location.href=e)},getLocationUrl:function(){return window&&window.location?window.location.href:void 0}}},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e("lodash");r["default"]={notifyException:function(e,t){e?(window&&window.Bugsnag&&(0,s.isFunction)(window.Bugsnag.notifyException)&&window.Bugsnag.notifyException(e,t),window.console&&(0,s.isFunction)(window.console.error)&&window.console.error(t,e.stack)):window.console&&(0,s.isFunction)(window.console.warn)&&window.console.warn("Attempted to notifyException without providing error,\n                           message: "+t)},notifyUser:function(e){window&&(0,s.isFunction)(window.alert)&&window.alert(e)}}},{lodash:"lodash"}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={enter:13,escape:27,space:32,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};r["default"]={isEnter:function(e){return e===s.enter},isEscape:function(e){return e===s.escape},isSpace:function(e){return e===s.space},isArrowLeft:function(e){return e===s.leftArrow},isArrowUp:function(e){return e===s.upArrow},isArrowRight:function(e){return e===s.rightArrow},isArrowDown:function(e){return e===s.downArrow},isDropdownOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)||this.isArrowDown(e)},isDefaultOpenerKey:function(e){return this.isEnter(e)||this.isSpace(e)},isDefaultCloserKey:function(e){return this.isEscape(e)},KEYCODES:s}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ICON_SIZES={SMALL:"small",MEDIUM:"medium",LARGE:"large"},r.ICON_SHAPES={CIRCLE:"circular",ROUND_SQUARE:"roundSquare"}},{}],15:[function(e,t,r){"use strict";function s(){return window.GrImageRegistry||{}}Object.defineProperty(r,"__esModule",{value:!0}),r.getImages=s},{}],16:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=s(o);r["default"]={toSentence:function(e){var t=arguments.length<=1||void 0===arguments[1]?"and":arguments[1],r=[],s=e.length;switch(s){case 0:return"";case 1:r.push(e[0]);break;case 2:r.push(e[0]),r.push(" "+t+" "),r.push(e[1]);break;default:a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(", ")}),r.push(t+" "),r.push(e[s-1])}return n("span",{},void 0,r)},sentenceJoin:function(e){var t=arguments.length<=1||void 0===arguments[1]?", ":arguments[1],r=[];return a["default"].each(e.slice(0,-1),function(e){r.push(e),r.push(t)}),r.push(e[e.length-1]),n("span",{},void 0,r)}}},{lodash:"lodash"}],17:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(){return o["default"].createActions(["selectSpecificResult","selectNextResult","selectPreviousResult","search","searchResultsFound","setShowResultsContainer"])};var n=e("reflux"),o=s(n)},{reflux:"reflux"}],18:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions({addNewComment:{},commentEntered:{sync:!0},deleteComment:{},showCommentsForPage:{},showSeeMoreLoadingSpinner:{},textareaFocused:{},textareaFocusRequested:{},textareaUnfocused:{}})},{reflux:"reflux"}],19:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["updatePreference"])},{reflux:"reflux"}],20:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["trackClickEvent"])},{reflux:"reflux"}],21:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["openPane"])},{reflux:"reflux"}],22:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["enablePublishPermission","togglePublishPermission"])},{reflux:"reflux"}],23:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["changeFavoriteGenres"])},{reflux:"reflux"}],24:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["selectFavoriteGenre","deselectFavoriteGenre","submitSelectedGenres"])},{reflux:"reflux"}],25:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["displayError","requestFeaturedBooks"])},{reflux:"reflux"}],26:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["hasRequestedCreativeForSlot","displayCreativeForSlot","removeAdSlot","trackImpression","attachServedNativeAdAttributesAndTracking","attachServedBannerAdAttributesAndTracking","populateHomepagePollAndTracking","pollAnswerChanged"])},{reflux:"reflux"}],27:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["like","unLike"])},{reflux:"reflux"}],28:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["openModal","closeModal"])},{reflux:"reflux"}],29:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions({loadMoreUpdates:{},newsfeedItemsLoaded:{sync:!0},updateNativeAdSlot:{},userNotInterested:{},undoUserNotInterested:{},hideStory:{},previewBook:{},setUpdatesFeedPreferences:{}})},{reflux:"reflux"}],30:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["loadError","loadNotifications","requestNotifications"])},{reflux:"reflux"}],31:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["updateProgress","closeUpdateProgressForm","openUpdateProgressForm","refreshReadingSessions","shelveBookSuccess","loadAllReadingSessions"])},{reflux:"reflux"}],32:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions({addShelvings:{},bookShelved:{},bookUnshelved:{},shelveBook:{},toggleNonExclusiveShelving:{},rateBook:{children:["newBook","failed"]},unshelveBook:{}})},{reflux:"reflux"}],33:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["selectTab"])},{reflux:"reflux"}],34:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["userAgentGainsTouch","userAgentLosesTouch"])},{reflux:"reflux"}],35:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["addNonExclusiveShelf","removeNonExclusiveShelf"])},{reflux:"reflux"}],36:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n);r["default"]=o["default"].createActions(["openAddShelfTextbox","updateShelfNameFilter","updateShelves"])},{reflux:"reflux"}],37:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}e("./_polyfills");var n=e("./_dom_ready_initializers"),o=s(n),a=e("./_public_actions"),i=s(a);window.ReactActions=i["default"],o["default"].initializeModernizrTouchCheck()},{"./_dom_ready_initializers":38,"./_polyfills":39,"./_public_actions":40}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={initializeModernizrTouchCheck:function(){$j(function(){Modernizr&&Modernizr.touchevents?window.ReactActions.UserAgentCapabilitiesActions.userAgentGainsTouch():window.ReactActions.UserAgentCapabilitiesActions.userAgentLosesTouch()})}}},{}],39:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=e("object-assign"),o=s(n);window.Object.assign=o["default"]},{"object-assign":"object-assign"}],40:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("../react_actions/user_agent_capabilities_actions"),o=s(n);r["default"]={UserAgentCapabilitiesActions:o["default"]}},{"../react_actions/user_agent_capabilities_actions":34}],41:[function(e,t,r){"use strict";e("./_common");var s=e("../react_isomorphic/site_header"),n=e("../react_isomorphic/experiments"),o=e("lodash");window.ReactComponents=(0,o.merge)({},s.HeaderComponents,n.ExperimentComponents),window.ReactStores=(0,o.merge)({},s.HeaderStores,n.ExperimentStores)},{"../react_isomorphic/experiments":119,"../react_isomorphic/site_header":122,"./_common":37,lodash:"lodash"}],42:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),o=s(n),a=e("../gr_component_factory"),i=s(a),l=e("../../react_stores/google_ads_store"),u=s(l),d=e("reflux"),c=s(d),f=e("classnames"),p=s(f),m=e("../../modules/ads/google_ad_helper"),_="googleBannerAd";r["default"]=i["default"].createClass({displayName:"GoogleBannerAd",mixins:[c["default"].connectFilter(u["default"],function(e){return e.ads[this.props.adId]})],propTypes:{adId:o["default"].PropTypes.string.isRequired},componentDidMount:function(){(0,m.requestCreativeForAdSlot)(this.props.adId,this.refs.googleHook,this.state.creativeSelector,this.state.path,this.state.dimensions,this.state.isNativeAd)},render:function(){var e=(0,p["default"])(this.state.className,_,{"googleBannerAd--970x66":"970x66"===this.state.dimensions,"googleBannerAd--300x250 u-bottomGrayBorder":this.state.path.match(/goodr.home.cb/)||this.state.path.match(/goodr.home/)&&"300x250"===this.state.dimensions,"googleBannerAd--left_skin":this.state.path.match(/left.160x600/)||this.state.path.match(/left.out.160x600/),"googleBannerAd--right_skin":this.state.path.match(/right.160x600/)||this.state.path.match(/right.out.160x600/)});return this.state?o["default"].createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}):null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":136,"../gr_component_factory":63,classnames:"classnames",react:"react",reflux:"reflux"}],43:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/google_ads_store"),d=s(u),c=e("../../modules/ads/google_ad_helper"),f=e("classnames"),p=s(f),m="googleNativeNewsfeedAd";r["default"]=l["default"].createClass({displayName:"GoogleNativeNavAd",mixins:[a["default"].connectFilter(d["default"],function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired},componentDidMount:function(){this.state.hasCreative||(0,c.requestCreativeForAdSlot)(this.props.adId,this.refs.googleHook,this.state.creativeSelector,this.state.path,this.state.dimensions,this.state.isNativeAd)},render:function(){if(this.state){var e=(0,p["default"])(m,this.state.className);return n("div",{},void 0,React.createElement("div",{className:e,id:this.props.adId,ref:"googleHook"}))}return null}})},{"../../modules/ads/google_ad_helper":4,"../../react_stores/google_ads_store":136,"../gr_component_factory":63,classnames:"classnames",reflux:"reflux"}],44:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/google_ads_store"),d=s(u),c=e("../click_tracking_wrapper"),f=s(c),p=e("../user_content/expandable_html"),m=s(p),_=e("../../modules/ads/click_tracking_helper");r["default"]=l["default"].createClass({displayName:"GoogleNativeNavCreative",mixins:[a["default"].connectFilter(d["default"],function(e){return e.nativeAds[this.props.adId]})],propTypes:{adId:React.PropTypes.string.isRequired,genre:React.PropTypes.string,trackingOptions:React.PropTypes.shape({enableTracking:React.PropTypes.bool,adId:React.PropTypes.string}).isRequired},getDefaultProps:function(){return{audibleUrl:"https://www.goodreads.com/audible"}},renderImage:function(){var e=n("a",{href:this.props.audibleUrl},void 0,n("img",{alt:this.state.creative.title,src:this.state.creative.image}));return n(f["default"],{trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Image,children:e})},renderExploreButton:function(){var e=n("a",{href:this.props.audibleUrl,className:"gr-button u-marginTopSmall gr-microsite-link"},void 0,"Browse ",this.props.genre);return n(f["default"],{trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_ExploreButton,children:e})},renderBody:function(){var e=n("div",{className:"gr-book__titleLink gr-book__title gr-book__titleLink--large"},void 0,n("a",{href:this.props.audibleUrl,className:"gr-hyperlink gr-hyperlink--naked"},void 0,this.state.creative.title));return n("div",{},void 0,this.renderImage(),n("div",{className:"u-marginTopXSmall"},void 0,n(f["default"],{trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_Title,children:e})),n("div",{className:"u-marginTopXSmall"},void 0,React.createElement(m["default"],this.state.creative.description)),this.renderExploreButton())},renderCreative:function(){if(this.state.creative){var e=n("a",{href:this.props.audibleUrl,className:"gr-hyperlink featuredGenres__sponsoredLink"},void 0,this.state.creative.sponsoredBy),t=n("div",{className:"featuredGenres__sponsoredFooter"},void 0,n("span",{className:"gr-newsfeedItem__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),n("span",{className:"featuredGenres__sponsoredLabel"},void 0,"Sponsored by "),n(f["default"],{children:e,trackingOptions:_.TRACKED_CLASSES_AUDIBLE.AEP_Desktop_Browse_SponsoredBy}));return n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Discover Audiobooks through Audible"),n("div",{className:"u-marginTopSmall"},void 0,this.renderBody(),t))}return null},render:function(){return this.state?n("div",{},void 0,this.renderCreative()):null}})},{"../../modules/ads/click_tracking_helper":3,"../../react_stores/google_ads_store":136,"../click_tracking_wrapper":47,"../gr_component_factory":63,"../user_content/expandable_html":109,reflux:"reflux"}],45:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o),i=e("react"),l=n("span",{className:"gr-icon gr-icon--authorBadge",title:"Goodreads Author"});r["default"]=a["default"].createClass({displayName:"AuthorBadge",propTypes:{isGoodreadsAuthor:i.PropTypes.bool.isRequired},render:function(){return this.props.isGoodreadsAuthor?l:null}})},{"../gr_component_factory":63,react:"react"}],46:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.VALID_BOOK_SIZES=void 0;var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("./shared/gr_prop_types"),f=s(c),p=e("./click_tracking_wrapper"),m=s(p),_=e("../modules/ads/click_tracking_helper"),h=e("classnames"),g=s(h),v=e("./author/author_badge"),y=s(v),b=r.VALID_BOOK_SIZES={MEDIUM:"medium",LARGE:"large"};r["default"]=d["default"].createClass({displayName:"Book",propTypes:{imageUrl:a["default"].PropTypes.string.isRequired,bookUrl:a["default"].PropTypes.string.isRequired,title:a["default"].PropTypes.string.isRequired,size:a["default"].PropTypes.oneOf(l["default"].values(b)),author:f["default"].author(),mediaBoxModifier:a["default"].PropTypes.string,className:a["default"].PropTypes.string,sponsored:a["default"].PropTypes.bool,bookImageTrackingData:a["default"].PropTypes.object,bookTitleTrackingData:a["default"].PropTypes.object,authorLinkTrackingData:a["default"].PropTypes.object,label:a["default"].PropTypes.element},getDefaultProps:function(){return{size:b.MEDIUM,bookImageTrackingData:_.TRACKED_CLASSES.book_image,bookTitleTrackingData:_.TRACKED_CLASSES.book_title,authorLinkTrackingData:_.TRACKED_CLASSES.author_link}},render:function(){var e=(0,g["default"])("gr-mediaBox","gr-book--"+this.props.size,this.withBemModifiers("gr-book"),this.props.className),t=(0,g["default"])("gr-mediaBox__media",this.withBemModifiers("gr-book__image"),{"gr-book__image--large":this.props.size===b.LARGE}),r=(0,g["default"])(this.withBemModifiers("gr-book__titleLink"),{"gr-book__titleLink--large":this.props.size===b.LARGE},"gr-hyperlink gr-hyperlink--naked"),s=(0,g["default"])(this.withBemModifiers("gr-book__title")),o=this.withBemModifiers("gr-mediaBox__desc",this.props.mediaBoxModifier),a=n("img",{alt:this.props.title,className:t,src:this.props.imageUrl}),i=n("a",{href:this.props.bookUrl,className:r},void 0,this.props.title);return n("div",{className:e},void 0,n("a",{href:this.props.bookUrl},void 0,n(m["default"],{children:a,trackingOptions:this.props.bookImageTrackingData})),n("div",{className:o},void 0,this.props.label,n("div",{className:s},void 0,n(m["default"],{children:i,trackingOptions:this.props.bookTitleTrackingData})),this.renderAuthorLink(),n("div",{className:"gr-book__additionalContent"},void 0,this.props.children)))},renderAuthorLink:function(){var e=(0,g["default"])(this.withBemModifiers("gr-book__author"),{"gr-book__author--large":this.props.size===b.LARGE});if(this.props.author){var t=n("a",{href:this.props.author.profileUrl,className:"gr-book__authorLink gr-hyperlink gr-hyperlink--naked"},void 0,this.props.author.name);return n("div",{className:e},void 0,"by ",n(m["default"],{children:t,trackingOptions:this.props.authorLinkTrackingData}),a["default"].createElement(y["default"],this.props.author))}return n("div",{className:e},void 0,"by deleted author")}})},{"../modules/ads/click_tracking_helper":3,"./author/author_badge":45,"./click_tracking_wrapper":47,"./gr_component_factory":63,"./shared/gr_prop_types":96,classnames:"classnames",lodash:"lodash",react:"react"}],47:[function(e,t,r){"use strict";
function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),o=s(n),a=e("./gr_component_factory"),i=s(a);r["default"]=i["default"].createClass({displayName:"ClickTrackingWrapper",propTypes:{trackingOptions:o["default"].PropTypes.shape({dfp:o["default"].PropTypes.bool,pmet:o["default"].PropTypes.object.isRequired}).isRequired,children:o["default"].PropTypes.element.isRequired},render:function(){return this.props.children}})},{"./gr_component_factory":63,react:"react"}],48:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i),u=e("../modules/shared/image_registry"),d=e("classnames"),c=s(d);r["default"]=l["default"].createClass({displayName:"CloseButton",propTypes:{action:a["default"].PropTypes.func.isRequired},render:function(){var e=(0,c["default"])("gr-iconButton",this.props.className);return n("button",{className:e,onClick:this.props.action},void 0,n("img",{alt:"Dismiss",src:(0,u.getImages)().closeIcon}))}})},{"../modules/shared/image_registry":15,"./gr_component_factory":63,classnames:"classnames",react:"react"}],49:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../user_content/expandable_html"),c=s(d),f=e("../user_content/hidden_html"),p=s(f),m=e("../shared/gr_prop_types"),_=s(m),h=e("../user/user_profile_link"),g=s(h),v=e("../user/user_icon"),y=s(v),b=e("./right_side_information"),k=s(b);r["default"]=u["default"].createClass({displayName:"Comment",propTypes:{body:i["default"].PropTypes.shape(_["default"].expandableHtml()),createdAt:_["default"].date.isRequired,authorUser:_["default"].user().isRequired,subjectKey:i["default"].PropTypes.string.isRequired,subject:_["default"].commentSubject(),deletableByCurrentUser:i["default"].PropTypes.bool.isRequired,blockedByCurrentUser:i["default"].PropTypes.bool,showTimestamp:i["default"].PropTypes.bool,uri:i["default"].PropTypes.string.isRequired,flagForAbuseUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{blockedByCurrentUser:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},renderBody:function(){if(this.props.blockedByCurrentUser){var e="unhide comment";return o(p["default"],{unhideText:e},void 0,i["default"].createElement(c["default"],this.props.body))}return i["default"].createElement(c["default"],this.props.body)},render:function(){var e=this;return o("div",{className:"gr-comment gr-mediaBox",onMouseEnter:function(){e.setState({isHoveringOnComment:!0})},onMouseLeave:function(){e.setState({isHoveringOnComment:!1})}},void 0,o("div",{className:"gr-mediaBox__media"},void 0,o(y["default"],{user:this.props.authorUser})),o("div",{className:"gr-mediaBox__desc\n                              gr-mediaBox__desc--clearfixOverflow"},void 0,i["default"].createElement(k["default"],n({isHoveringOnComment:this.state.isHoveringOnComment},this.props)),o(g["default"],{user:this.props.authorUser}),this.props.blockedByCurrentUser?o("strong",{},void 0," (blocked)"):null,o("div",{className:"gr-comment__body"},void 0,this.renderBody())))}})},{"../gr_component_factory":63,"../shared/gr_prop_types":96,"../user/user_icon":107,"../user/user_profile_link":108,"../user_content/expandable_html":109,"../user_content/hidden_html":110,"./right_side_information":52,react:"react"}],50:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../shared/gr_prop_types"),f=s(c),p=e("../../react_actions/comment_actions"),m=s(p),_=e("../../react_stores/comments_store"),h=s(_),g=e("../user/user_icon"),v=s(g),y=e("../../react_mixins/gr_reflux"),b=e("classnames"),k=s(b);r["default"]=d["default"].createClass({displayName:"CommentForm",propTypes:{authorUser:f["default"].user().isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},mixins:[(0,y.connectToLazyStore)(h["default"],"subjectKey")],addNewComment:function(e){this.isCommentEmpty()||m["default"].addNewComment({subjectKey:this.props.subjectKey,subject:this.props.subject,body:this.state.unsavedComment,authorUser:this.props.authorUser}),e.preventDefault()},isCommentEmpty:function(){return l["default"].isEmpty(l["default"].trim(this.state.unsavedComment))},onTextChange:function(e){m["default"].commentEntered(this.props.subjectKey,e.target.value)},onFocus:function(){m["default"].textareaFocused(this.props.subjectKey)},onBlur:function(){m["default"].textareaUnfocused(this.props.subjectKey)},componentDidUpdate:function(){this.state.textareaFocusRequested===!0&&this.refs.commentBodyTextarea.focus()},render:function(){var e=(0,k["default"])(this.withBemModifiers("gr-commentForm"),"gr-mediaBox");return n("div",{className:e},void 0,n("div",{className:"gr-mediaBox__media u-noLineHeight"},void 0,n(v["default"],{user:this.props.authorUser})),n("form",{className:"gr-mediaBox__desc",method:"post",action:"/comment"},void 0,n("input",{type:"hidden",name:"id",value:this.props.subject.id}),n("input",{type:"hidden",name:"type",value:this.props.subject.type}),a["default"].createElement("textarea",{className:"gr-textarea gr-commentForm__textarea",name:"comment[body_usertext]",disabled:this.state.saveInProgress,onChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,rows:this.state.textareaRows,value:this.state.unsavedComment,ref:"commentBodyTextarea",placeholder:"Write a comment…","aria-label":"Write a comment…"}),this.state.showCommentButton?n("button",{className:"gr-commentForm__submitButton gr-button gr-button--small",disabled:this.state.saveInProgress||this.isCommentEmpty(),onClick:this.addNewComment,type:"submit"},void 0,"Comment"):null))}})},{"../../react_actions/comment_actions":18,"../../react_mixins/gr_reflux":126,"../../react_stores/comments_store":130,"../gr_component_factory":63,"../shared/gr_prop_types":96,"../user/user_icon":107,classnames:"classnames",lodash:"lodash",react:"react"}],51:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../shared/gr_prop_types"),p=s(f),m=e("./comment"),_=s(m),h=e("../pagination_links"),g=s(h),v=e("../../react_stores/comments_store"),y=s(v),b=e("../../react_actions/comment_actions"),k=s(b),S=e("../spinner"),T=s(S),P=e("../../react_mixins/gr_reflux"),N=e("classnames"),w=s(N),x=3,C=1;r["default"]=c["default"].createClass({displayName:"Comments",propTypes:{subjectKey:i["default"].PropTypes.string.isRequired,subject:p["default"].commentSubject(),subjectUrl:i["default"].PropTypes.string,showTimestamp:i["default"].PropTypes.bool},getDefaultProps:function(){return{showTimestamp:!0}},mixins:[(0,P.connectToLazyStore)(y["default"],"subjectKey")],seeMoreCommentsText:function(){return 1==this.state.numComments?"See 1 comment":"See all "+this.state.numComments+" comments"},showCommentsForPage:function(e){k["default"].showCommentsForPage({subjectKey:this.props.subjectKey,subject:this.props.subject,page:e})},showMoreClicked:function(e){k["default"].showSeeMoreLoadingSpinner(this.props.subjectKey),this.showCommentsForPage(C),e.preventDefault()},renderSeeMoreComments:function(){var e=this.state.numComments;return e>x||e>this.state.comments.length?o("div",{className:"gr-comments__seeAllLinkBox"},void 0,this.state.showSeeMoreLoadingSpinner?o("span",{},void 0,o("span",{className:"gr-hyperlink gr-hyperlink--bold"},void 0,this.seeMoreCommentsText()),o("span",{id:"showMoreSpinner",className:"u-marginLeftTiny"},void 0,o(T["default"],{}))):o("a",{href:this.props.subjectUrl,className:"gr-hyperlink gr-hyperlink--bold",onClick:this.showMoreClicked},void 0,this.seeMoreCommentsText())):null},renderComments:function(){var e=this,t=this.state.showPagination?this.state.comments:u["default"].takeRight(this.state.comments,x);return u["default"].map(t,function(t){return i["default"].createElement(_["default"],n({key:t.uri,subjectKey:e.props.subjectKey,subject:e.props.subject,showTimestamp:e.props.showTimestamp},t))})},render:function(){var e=(0,w["default"])(this.withBemModifiers("gr-comments"),"gr-box","gr-box--hiddenOverflow","u-defaultType");return this.state.numComments>0?o("div",{className:e},void 0,this.state.showPagination?null:this.renderSeeMoreComments(),this.renderComments(),this.state.showPagination?o("div",{className:"u-topGrayBorder"},void 0,o(g["default"],{subjectKey:this.props.subjectKey,totalSize:this.state.numComments,currentPageNumber:this.state.currentPage,perPage:10,changePageAction:this.showCommentsForPage,className:"gr-paginationLinks__links"})):null):null}})},{"../../react_actions/comment_actions":18,"../../react_mixins/gr_reflux":126,"../../react_stores/comments_store":130,"../gr_component_factory":63,"../pagination_links":90,"../shared/gr_prop_types":96,"../spinner":103,"./comment":49,classnames:"classnames",lodash:"lodash",react:"react"}],52:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("reflux"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../shared/gr_prop_types"),f=s(c),p=e("../spinner"),m=s(p),_=e("../flagged_resources/flag_for_abuse_link"),h=s(_),g=e("../time/relative_time"),v=s(g),y=e("../dot_separated_elements"),b=s(y),k=e("../../react_actions/comment_actions"),S=s(k),T=e("../../react_stores/user_agent_capabilities_store"),P=s(T),N=e("../../modules/env_utils"),w=s(N);r["default"]=d["default"].createClass({displayName:"CommentRightSideInformation",mixins:[l["default"].connect(P["default"],"userAgentCapabilities")],propTypes:{showTimestamp:a["default"].PropTypes.bool,isHoveringOnComment:a["default"].PropTypes.bool,deletableByCurrentUser:a["default"].PropTypes.bool.isRequired,subject:f["default"].commentSubject().isRequired,uri:a["default"].PropTypes.string.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,createdAt:f["default"].date.isRequired,flagForAbuseUrl:a["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{showTimestamp:!0,isHoveringOnComment:!1}},getInitialState:function(){return{showCommentDeletingSpinner:!1}},deleteComment:function(){var e={subject:this.props.subject,subjectKey:this.props.subjectKey};window.confirm("Are you sure you want to delete this comment?")&&(this.setState({showCommentDeletingSpinner:!0}),S["default"].deleteComment(this.props.subjectKey,this.props.uri,e))},getDeleteLink:function(){return this.props.deletableByCurrentUser?this.state.showCommentDeletingSpinner?a["default"].createElement(m["default"],{ref:"spinner"}):a["default"].createElement("a",{className:"gr-comment__deleteLink gr-hyperlink--naked gr-hyperlink",ref:"deleteLink",onClick:this.deleteComment,"aria-label":"Delete comment"},"Delete"):void 0},getFlag:function(){var e=this.props.flagForAbuseUrl+"&return_url="+encodeURIComponent(w["default"].getLocationUrl());return n(h["default"],{flagForAbuseUrl:e})},getTimestamp:function(){return this.props.showTimestamp?n("small",{className:"gr-comment__timestamp"},void 0,n(v["default"],{time:this.props.createdAt})):void 0},getRightSideElements:function(){var e=[];return this.state.userAgentCapabilities.touch?(e.push(this.getDeleteLink()),e.push(this.getFlag()),e.push(this.getTimestamp())):this.props.isHoveringOnComment?(e.push(this.getDeleteLink()),e.push(this.getFlag())):e.push(this.getTimestamp()),e},render:function(){return n("div",{className:"gr-comment__rightSideInformation"},void 0,n(b["default"],{elements:this.getRightSideElements()}))}})},{"../../modules/env_utils":11,"../../react_actions/comment_actions":18,"../../react_stores/user_agent_capabilities_store":144,"../dot_separated_elements":54,"../flagged_resources/flag_for_abuse_link":60,"../gr_component_factory":63,"../shared/gr_prop_types":96,"../spinner":103,"../time/relative_time":106,react:"react",reflux:"reflux"}],53:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i),u=e("classnames"),d=s(u),c={SMALL:"small",MEDIUM:"medium",LARGE:"large"},f=5;r["default"]=l["default"].createClass({displayName:"CommunityRating",statics:{ICON_SIZES:c},propTypes:{rating:a["default"].PropTypes.number.isRequired,displayAvg:a["default"].PropTypes.bool,className:a["default"].PropTypes.string,size:a["default"].PropTypes.oneOf([c.SMALL,c.MEDIUM,c.LARGE])},getDefaultProps:function(){return{displayAvg:!1,size:c.SMALL}},wrapperClasses:function(){return(0,d["default"])("communityRating__starsWrapper",{"communityRating__starsWrapper--small":this.props.size===c.SMALL,"communityRating__starsWrapper--medium":this.props.size===c.MEDIUM,"communityRating__starsWrapper--large":this.props.size===c.LARGE})},starClasses:function(){return(0,d["default"])("communityRating__stars",{"communityRating__stars--small":this.props.size===c.SMALL,"communityRating__stars--medium":this.props.size===c.MEDIUM,"communityRating__stars--large":this.props.size===c.LARGE})},getRoundedRating:function(e){var t=Math.floor(e);return e===t?e:.5>e-t?t+.45:t+.6},render:function(){var e=this.getRoundedRating(this.props.rating),t={width:e/f*100+"%"},r=(0,d["default"])("communityRating",this.props.className),s="Rated "+this.props.rating.toFixed(2)+" of "+f;return n("div",{className:r,"aria-label":s},void 0,n("div",{className:this.wrapperClasses()},void 0,n("div",{className:this.starClasses(),style:t,"aria-label":s})),this.props.displayAvg?n("span",{className:"gr-metaText"},void 0,this.props.rating.toFixed(2)," avg. rating"):null)}})},{"./gr_component_factory":63,classnames:"classnames",react:"react"}],54:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=e("./gr_component_factory"),u=s(l);r["default"]=u["default"].createClass({displayName:"DotSeparatedElements",propTypes:{elements:a["default"].PropTypes.arrayOf(a["default"].PropTypes.oneOfType([a["default"].PropTypes.element,a["default"].PropTypes.string])).isRequired,separator:a["default"].PropTypes.element},getDefaultProps:function(){return{separator:n("span",{},void 0," · ")}},joinElementsWithSeparator:function(){var e=this,t=(0,i.compact)(this.props.elements);return(0,i.transform)(t,function(r,s,n){r.push(s),n+1!==t.length&&r.push(e.props.separator)})},render:function(){return n("span",{className:this.props.className},void 0,(0,i.map)(this.joinElementsWithSeparator(),function(e,t){return n("span",{},t,e)}))}})},{"./gr_component_factory":63,lodash:"lodash",react:"react"}],55:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"DropDownList",propTypes:{showMoreLink:a["default"].PropTypes.bool,moreLinkURL:a["default"].PropTypes.string,moreLinkText:a["default"].PropTypes.string},getDefaultProps:function(){return{showMoreLink:!1,moreLinkURL:null,moreLinkText:"…More"}},render:function(){return n("div",{},void 0,this.props.children,this.props.showMoreLink&&null!==this.props.moreLinkURL?n("a",{className:"dropDownList__listItem--moreLink",href:this.props.moreLinkURL},void 0,this.props.moreLinkText):null)}})},{"./gr_component_factory":63,react:"react"}],56:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("reflux"),d=s(u),c=e("./gr_component_factory"),f=s(c),p=e("../react_mixins/hover_intent"),m=s(p),_=e("classnames"),h=s(_),g=e("react-onclickoutside"),v=s(g),y=e("../modules/keys"),b=s(y),k=e("../react_stores/user_agent_capabilities_store"),S=s(k),T={HOVER:"hover",CLICK:"click"},P={LEFT:"left",RIGHT:"right"},N=100,w=N;r["default"]=f["default"].createClass({displayName:"Dropdown",mixins:[m["default"],v["default"],d["default"].connect(S["default"],"userAgentCapabilities")],propTypes:{alignment:a["default"].PropTypes.oneOf(l["default"].values(P)),fallbackUrl:a["default"].PropTypes.string,hoverTriggerClickUrl:a["default"].PropTypes.string,isInSiteHeader:a["default"].PropTypes.bool,onShowCallback:a["default"].PropTypes.func,tooltipText:a["default"].PropTypes.string,trigger:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element]).isRequired,triggerEventType:a["default"].PropTypes.oneOf(l["default"].values(T))},statics:{TriggerEventTypes:T},getTriggerEventType:function(){return this.state.userAgentCapabilities.touch?T.CLICK:this.props.triggerEventType},getInitialState:function(){return{dropdownOpen:!1}},getDefaultProps:function(){return{triggerEventType:T.CLICK,alignment:P.LEFT}},hide:function(){this.setState({dropdownOpen:!1})},show:function(){this.setState({dropdownOpen:!0}),this.props.onShowCallback&&this.props.onShowCallback()},toggle:function(e){this.props.children&&e.preventDefault(),this.state.dropdownOpen?this.hide():this.show()},openList:function(e){b["default"].isDropdownOpenerKey(e.keyCode)?(e.preventDefault(),b["default"].isArrowDown(e.keyCode)?this.show():this.toggle(e)):b["default"].isDefaultCloserKey(e.keyCode)&&(e.preventDefault(),this.hide())},handleClickOutside:function(){this.state.userAgentCapabilities.touch||this.hide()},handleMouseEnter:function(){this.onEnterIntent(this.show,N)},handleMouseLeave:function(){this.onLeaveIntent(this.hide,w)},handleTriggerClick:function(e){return this.state.dropdownOpen&&this.props.triggerEventType===T.HOVER&&this.state.userAgentCapabilities.touch!==!0?void(this.props.hoverTriggerClickUrl||e.preventDefault()):void this.toggle(e)},triggerClasses:function(){return(0,h["default"])(this.withBemModifiers(["dropdown__trigger"]),{"dropdown__trigger--buttonReset":l["default"].isUndefined(this.props.fallbackUrl)},{"dropdown__trigger--triggerEventTypeHover":this.props.triggerEventType===T.HOVER},{"dropdown__trigger--personalNav":"true"===this.props.isInPersonalNav},{"dropdown__trigger--active":this.state.dropdownOpen},{"dropdown__trigger--personalNavActive":"true"===this.props.isInPersonalNav&&this.state.dropdownOpen},{"dropdown__trigger--activeSiteHeader":this.state.dropdownOpen&&this.props.isInSiteHeader})},renderTriggerButton:function(){return n("button",{className:this.triggerClasses(),"aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,onClick:this.handleTriggerClick,onKeyDown:this.openList,title:this.props.tooltipText},void 0,this.props.trigger)},renderTriggerLink:function(){return n("a",{className:this.triggerClasses(),href:this.props.fallbackUrl,onClick:this.handleTriggerClick,onKeyDown:this.openList,role:"button","aria-haspopup":"true","aria-expanded":this.state.dropdownOpen,title:this.props.tooltipText},void 0,this.props.trigger)},render:function(){var e=(0,h["default"])(this.withBemModifiers("dropdown")),t=(0,h["default"])(this.withBemModifiers("dropdown__menu"),"gr-box gr-box--withShadowLarge",{"dropdown__menu--show":this.state.dropdownOpen}),r=l["default"].isUndefined(this.props.fallbackUrl)?this.renderTriggerButton():this.renderTriggerLink(),s=n("div",{className:t,role:"menu"},void 0,this.props.children);switch(this.getTriggerEventType()){case T.HOVER:return n("div",{className:e,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},void 0,r,s);case T.CLICK:return n("div",{className:e},void 0,r,s)}}})},{"../modules/keys":13,"../react_mixins/hover_intent":127,"../react_stores/user_agent_capabilities_store":144,"./gr_component_factory":63,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],57:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o);r["default"]=a["default"].createClass({displayName:"error_message.js",propTypes:{componentName:a["default"].PropTypes.string.isRequired},render:function(){return n("div",{className:"gr-errorMessage"},void 0,"There was an issue rendering ",this.props.componentName)}})},{react:"react"}],58:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=e("reflux"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../../react_stores/facebook_store"),p=s(f),m=e("../../react_actions/facebook_actions"),_=s(m),h=e("classnames"),g=s(h),v="Post to your facebook timeline";r["default"]=c["default"].createClass({mixins:[u["default"].connect(p["default"])],displayName:"facebookTimelinePublishToggle",propTypes:{cogAction:a["default"].PropTypes.oneOf((0,i.values)(p["default"].COG_ACTIONS)),additionalText:a["default"].PropTypes.string},statics:{COG_ACTIONS:p["default"].COG_ACTIONS},enablePublishing:function(){_["default"].enablePublishPermission()},renderCheckbox:function(){var e=this;return n("input",{className:"facebookTimelinePublishToggle__checkBox",type:"checkbox",value:"1",checked:this.state.cog[this.props.cogAction],onChange:function(){_["default"].togglePublishPermission(e.props.cogAction)}})},renderFacebookIcon:function(){var e=this.state.cog[this.props.cogAction]?"Enabled":"Disabled";return n("img",{className:"facebookTimelinePublishToggle__icon",src:this.state.cog.enabled?this.state.images.fbIconUrl:this.state.images.fbIconDisabledUrl,alt:e+" Facebook timeline posting permission"})},renderPublishingEnabledState:function(){return n("label",{"aria-label":v},void 0,this.renderCheckbox(),this.renderFacebookIcon())},renderPublishingDisabledState:function(){return n("button",{className:"gr-iconButton",onClick:this.enablePublishing,"aria-label":v},void 0,this.renderFacebookIcon())},render:function(){var e=(0,g["default"])(this.withBemModifiers("facebookTimelinePublishToggle"));return this.state.isUserConnected?n("div",{className:e},void 0,(0,i.isEmpty)(this.props.additionalText)?null:n("span",{className:"u-marginRightTiny"},void 0,this.props.additionalText),this.state.cog.enabled?this.renderPublishingEnabledState():this.renderPublishingDisabledState()):null}})},{"../../react_actions/facebook_actions":22,"../../react_stores/facebook_store":132,"../gr_component_factory":63,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],59:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("reflux"),f=s(c),p=e("./genre_checkbox"),m=s(p),_=e("./../react_actions/modal_actions"),h=s(_),g=e("../react_actions/favorite_genres_form_actions"),v=s(g),y=e("../react_stores/favorite_genres_form_store"),b=s(y);r["default"]=d["default"].createClass({displayName:"FavoriteGenresForm",mixins:[f["default"].connect(b["default"])],propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},getDefaultProps:function(){return{favoriteGenres:[]}},onSubmit:function(e){v["default"].submitSelectedGenres(),h["default"].closeModal(),e.preventDefault()},renderGenreCheckboxes:function(){var e=this;return n("div",{className:"gr-genresForm__checkBoxes"},void 0,l["default"].map(this.props.genres,function(t){return n(m["default"],{genre:t.name,isFavorited:l["default"].includes(e.state.selectedGenres,t.name)},t.name)}))},render:function(){return n("div",{className:"gr-genresForm"},void 0,n("div",{className:"gr-genresForm__title"},void 0,"Follow Your Favorite Genres"),n("div",{className:"gr-genresForm__description"},void 0,"We use your favorite genres to make better book recommendations and tailor what you see in your Updates feed."),n("form",{action:"/user/edit_fav_genres","data-remote":"true",method:"post"},void 0,this.renderGenreCheckboxes(),n("button",{type:"submit",onClick:this.onSubmit,className:"gr-button gr-button--large"},void 0,"Save")))}})},{"../react_actions/favorite_genres_form_actions":24,"../react_stores/favorite_genres_form_store":133,"./../react_actions/modal_actions":28,"./genre_checkbox":62,"./gr_component_factory":63,lodash:"lodash",react:"react",reflux:"reflux"}],60:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("classnames"),d=s(u);r["default"]=l["default"].createClass({displayName:"FlagForAbuseLink",propTypes:{flagForAbuseUrl:a["default"].PropTypes.string.isRequired},render:function(){var e=(0,d["default"])("gr-metaText","gr-hyperlink--naked","gr-hyperlink","gr-flag");return n("a",{href:this.props.flagForAbuseUrl,className:e},void 0,"Flag")}})},{"../gr_component_factory":63,classnames:"classnames",react:"react"}],61:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=e("classnames"),u=s(l),d=e("./close_button"),c=s(d),f={
ERROR:"error",INFO:"info",NOTICE_DEPRECATED:"notice",SUCCESS:"success",WARNING:"warning"};r["default"]=a["default"].createClass({displayName:"FlashMessage",propTypes:{category:a["default"].PropTypes.oneOf((0,i.values)(f)),message:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{isVisible:!0}},hideMessage:function(){this.setState({isVisible:!1})},flashMessageMarkup:function(){return{__html:this.props.message}},render:function(){if((0,i.isEmpty)(this.props.message))return null;var e=(0,u["default"])("gr-flashMessage",{"gr-flashMessage--dismissed":!this.state.isVisible,"gr-flashMessage--error":this.props.category===f.ERROR,"gr-flashMessage--info":this.props.category===f.INFO,"gr-flashMessage--warning":this.props.category===f.WARNING,"gr-flashMessage--success":this.props.category===f.SUCCESS});return n("div",{className:e,role:"alert"},void 0,n(c["default"],{action:this.hideMessage,className:"gr-flashMessage__dismissButton"}),n("span",{dangerouslySetInnerHTML:this.flashMessageMarkup()}))}})},{"./close_button":48,classnames:"classnames",lodash:"lodash",react:"react"}],62:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i),u=e("classnames"),d=s(u),c=e("../react_actions/favorite_genres_form_actions"),f=s(c);r["default"]=l["default"].createClass({displayName:"GenreCheckbox",propTypes:{genre:a["default"].PropTypes.string,isFavorited:a["default"].PropTypes.bool.isRequired},onCheckboxChange:function(){this.props.isFavorited?f["default"].deselectFavoriteGenre(this.props.genre):f["default"].selectFavoriteGenre(this.props.genre)},render:function(){var e=(0,d["default"])("gr-genresForm__genreLabel",{"gr-genresForm__genreLabel--selected":this.props.isFavorited});return n("label",{className:e},void 0,n("input",{name:"favorites["+this.props.genre+"]",type:"hidden",value:"false"}),a["default"].createElement("input",{name:"favorites["+this.props.genre+"]",type:"checkbox",value:"true","data-genre":this.props.genre,ref:"checkbox",defaultChecked:this.props.isFavorited,onChange:this.onCheckboxChange}),n("span",{className:"u-verticalAlignMiddle u-marginLeftTiny"},void 0,this.props.genre))}})},{"../react_actions/favorite_genres_form_actions":24,"./gr_component_factory":63,classnames:"classnames",react:"react"}],63:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=e("react"),i=s(a),l=e("../react_mixins/bem_modifiers"),u=s(l),d=e("../react_mixins/deploy_service"),c=s(d),f=e("react-addons-pure-render-mixin"),p=s(f),m=e("../react_mixins/tracking_data_attributes_mixin"),_=s(m),h=e("./error_message"),g=s(h),v=e("../modules/env_utils"),y=s(v),b=e("../modules/gr_error_reporting"),k=s(b),S=[p["default"],u["default"],c["default"],_["default"]],T={showErrorMessage:"production"===y["default"].DEVELOPMENT},P=function(e,t){var r=e.render;t=(0,o.merge)({},T,t),e.render=function(){try{return r.apply(this,arguments)}catch(s){return k["default"].notifyException(s,"Failed to render "+e.displayName),t.showErrorMessage?n(g["default"],{componentName:e.displayName}):null}}},N=function(e){if((0,o.isEmpty)(e))throw new Error("GrError: Missing component name. Please make sure `displayName` attribute is defined while creating a React class using GrComponentFactory.createClass.")},w=function(e){var t=e.mixins||[];e.mixins=t.concat(S)},x=function(e,t){return w(e),"production"!==y["default"].TEST&&P(e,t),e};r["default"]={createClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return N(e.displayName),i["default"].createClass(x(e,t))}}},{"../modules/env_utils":11,"../modules/gr_error_reporting":12,"../react_mixins/bem_modifiers":123,"../react_mixins/deploy_service":124,"../react_mixins/tracking_data_attributes_mixin":128,"./error_message":57,lodash:"lodash",react:"react","react-addons-pure-render-mixin":"react-addons-pure-render-mixin"}],64:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../shape_icon"),d=s(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"GroupIcon",propTypes:{group:a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!1,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.group;return n(d["default"],{imageUrl:e.iconUrl,imageAlt:e.name,linkUrl:e.url,shape:c.ICON_SHAPES.ROUND_SQUARE,size:this.props.size,includeLink:this.props.includeLink})}})},{"../../modules/shape_icon_values":14,"../gr_component_factory":63,"../shape_icon":95,react:"react"}],65:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../dropdown"),f=s(c),p=e("./favorite_genres_pane"),m=s(p),_=e("./featured_genres"),h=s(_),g=e("./genre_list"),v=s(g),y=e("../menu_link"),b=s(y),k=e("../../react_actions/featured_genres_actions"),S=s(k);r["default"]=d["default"].createClass({displayName:"BrowseMenu",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string.isRequired,choiceAwardsUrl:a["default"].PropTypes.string.isRequired,editorsPicksUrl:a["default"].PropTypes.string.isRequired,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string.isRequired,listUrl:a["default"].PropTypes.string.isRequired,newReleasesUrl:a["default"].PropTypes.string.isRequired,recommendationsUrl:a["default"].PropTypes.string.isRequired,blogUrl:a["default"].PropTypes.string.isRequired,signedIn:a["default"].PropTypes.bool},render:function(){var e=function(){S["default"].requestFeaturedBooks()},t=n("span",{},void 0,"Browse ▾");return n(f["default"],{trigger:t,triggerEventType:f["default"].TriggerEventTypes.HOVER,fallbackUrl:this.props.browseUrl,bemModifiers:"siteHeader",isInSiteHeader:!0,onShowCallback:e},void 0,n("div",{className:"siteHeader__browseMenuDropdown"},void 0,n("ul",{className:"siteHeader__subNav"},void 0,n(b["default"],{href:this.props.recommendationsUrl,linkText:"Recommendations",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.choiceAwardsUrl,linkText:"Choice Awards",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.giveawayUrl,linkText:"Giveaways",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.newReleasesUrl,linkText:"New Releases",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.listUrl,linkText:"Lists",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.editorsPicksUrl,linkText:"News & Interviews",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.browseUrl,linkText:"Explore",linkClass:"siteHeader__subNavLink"}),n(b["default"],{href:this.props.blogUrl,linkText:"Blog",linkClass:"siteHeader__subNavLink"}),n("div",{className:"siteHeader__sponsoredFillSpace"}),n(b["default"],{href:"https://www.goodreads.com/track/daily_click?pmet_click_tid=AEP_Desktop_Header_BrowseEntrypoint&tid=AEP_Desktop_Header_BrowseEntrypoint&url=https://www.goodreads.com/audible",linkText:n("div",{},void 0,n("div",{className:"siteHeader__navDivider"}),n("span",{},void 0,"Listen with Audible")),linkClass:"siteHeader__sponsoredNavLink"}),n("div",{className:"siteHeader__sponsoredLabel"},void 0,n("span",{className:"siteHeader__sponsoredIcon gr-newsfeedItem__sponsoredBadgeIcon featuredGenres__sponsoredIcon"}),n("span",{className:"featuredGenres__sponsoredLabel siteHeader__sponsoredText"},void 0,"Sponsored"))),this.renderSpotlight()))},classesWithModifier:function(e){return"siteHeader__spotlight siteHeader__spotlight--"+e},renderGenreList:function(){return n("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,n(v["default"],{genres:this.props.genres}))},renderFeaturedGenres:function(){return n("div",{className:this.classesWithModifier("browseMenu")},void 0,n(h["default"],{favoriteGenres:this.props.favoriteGenres,sponsoredGenres:this.props.sponsoredGenres,adId:this.props.adId}))},renderFavoriteGenresPane:function(){return n("div",{className:this.classesWithModifier("withoutSubMenu")},void 0,n(m["default"],{genres:this.props.genres}))},renderSpotlight:function(){return this.props.signedIn?l["default"].isEmpty(this.props.favoriteGenres)?this.renderFavoriteGenresPane():this.renderFeaturedGenres():this.renderGenreList()}})},{"../../react_actions/featured_genres_actions":25,"../dropdown":56,"../gr_component_factory":63,"../menu_link":87,"./favorite_genres_pane":70,"./featured_genres":71,"./genre_list":74,lodash:"lodash",react:"react"}],66:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("reflux"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../dropdown"),f=s(c),p=e("../menu_link"),m=s(p),_=e("../ads/google_banner_ad"),h=s(_),g=e("../../react_stores/google_ads_store"),v=s(g);r["default"]=d["default"].createClass({displayName:"CommunityMenu",mixins:[l["default"].connect(v["default"],"googleAdStore")],propTypes:{communityUrl:a["default"].PropTypes.string.isRequired,eventUrl:a["default"].PropTypes.string.isRequired,featuredAskAuthorUrl:a["default"].PropTypes.string.isRequired,groupsUrl:a["default"].PropTypes.string.isRequired,discussionsUrl:a["default"].PropTypes.string.isRequired,peopleUrl:a["default"].PropTypes.string.isRequired,quizzesUrl:a["default"].PropTypes.string.isRequired,quotesUrl:a["default"].PropTypes.string.isRequired,storiesUrl:a["default"].PropTypes.string.isRequired,triviaUrl:a["default"].PropTypes.string.isRequired},renderSpotlightAd:function(){if(this.isFeatureEnabled("ads_uxo_nav_spotlight")){var e=v["default"].findAd(/goodr.nav.browse.300x250/);if(e)return n("div",{className:"siteHeader__spotlight--withoutSubMenu siteHeader__spotlight--withSpotlightAd googleAd"},void 0,n("div",{className:"spotlightAd"},void 0,n("div",{className:"featuredGenres__book"},void 0,n("div",{className:"u-marginTopTiny"},void 0,n(h["default"],{adId:e.id})))))}},render:function(){var e=n("span",{},void 0,"Community ▾");return n(f["default"],{trigger:e,triggerEventType:f["default"].TriggerEventTypes.HOVER,bemModifiers:["siteHeader"],fallbackUrl:this.props.communityUrl,isInSiteHeader:!0},void 0,n("ul",{className:"siteHeader__subNav"},void 0,n(m["default"],{href:this.props.groupsUrl,linkText:"Groups",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.discussionsUrl,linkText:"Discussions",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.quotesUrl,linkText:"Quotes",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.featuredAskAuthorUrl,linkText:"Ask the Author",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.triviaUrl,linkText:"Trivia",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.quizzesUrl,linkText:"Quizzes",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.storiesUrl,linkText:"Creative Writing",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.peopleUrl,linkText:"People",linkClass:"siteHeader__subNavLink"}),n(m["default"],{href:this.props.eventUrl,linkText:"Events",linkClass:"siteHeader__subNavLink"})),this.renderSpotlightAd())}})},{"../../react_stores/google_ads_store":136,"../ads/google_banner_ad":42,"../dropdown":56,"../gr_component_factory":63,"../menu_link":87,react:"react",reflux:"reflux"}],67:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../gr_component_factory"),a=s(o),i=e("../../shared/gr_prop_types"),l=s(i),u=e("append-query"),d=s(u),c=e("../../../modules/shape_icon_values"),f=e("../../time/relative_time"),p=s(f),m=e("../../group/group_icon"),_=s(m),h=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsGroupBanner",propTypes:{group:l["default"].group()},render:function(){var e=this.props.group;return n("a",{href:(0,d["default"])(e.url,{ref:h.URLTrackingParams.DISCUSSIONS_PANE_GROUP}),"aria-label":"Visit your group "+this.props.group.name,className:"gr-hyperlink\n                          gr-hyperlink--naked\n                          gr-hyperlink--noUnderline"},void 0,n("div",{className:"gr-mediaFlexbox\n                              gr-mediaFlexbox--alignItemsCenter\n                              gr-headerDiscussions__groupBanner"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,n(_["default"],{group:e,size:c.ICON_SIZES.SMALL})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__groupTitle"},void 0,e.name),n("small",{},void 0,"Active ",n(p["default"],{time:e.lastActiveAt,longFormat:!0})))))}})},{"../../../analytics/url_tracking_params":2,"../../../modules/shape_icon_values":14,"../../gr_component_factory":63,"../../group/group_icon":64,"../../shared/gr_prop_types":96,"../../time/relative_time":106,"append-query":"append-query"}],68:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../gr_component_factory"),a=s(o),i=e("../../shared/gr_prop_types"),l=s(i),u=e("append-query"),d=s(u),c=e("moment"),f=s(c),p=e("../../time/relative_time"),m=s(p),_=e("../../dot_separated_elements"),h=s(_),g=e("../../../analytics/url_tracking_params");r["default"]=a["default"].createClass({displayName:"DiscussionsTopic",propTypes:{topic:l["default"].topic()},getTitleAriaLabel:function(){var e=void 0;return e=this.props.topic.newPosts?"New comments in topic "+this.props.topic.title:"Topic "+this.props.topic.title,e+=this.props.topic.folder?" in folder "+this.props.topic.folder.name+".":".",e+=" "+(0,f["default"])(this.props.topic.updatedAt).fromNow()+".",this.props.topic.newPosts&&(e+=" "+this.props.topic.newPosts+"."),e},getTopicUrl:function(){var e=this.props.topic.newCommentsUrl?this.props.topic.newCommentsUrl:this.props.topic.url;return(0,d["default"])(e,{ref:g.URLTrackingParams.DISCUSSIONS_PANE_DISCUSSION})},renderFolder:function(){return this.props.topic.folder?n("span",{className:"gr-headerDiscussions__topicFolderTitle"},void 0,"in ",this.props.topic.folder.name):null},renderPosts:function(){return this.props.topic.newPosts?n("div",{className:"gr-smallAlert"},void 0,this.props.topic.newPosts):n("small",{},void 0,this.props.topic.totalPosts)},render:function(){var e=this.props.topic,t=[this.renderPosts(),n("small",{},void 0,n(m["default"],{time:e.updatedAt,longFormat:!0}))];return n("a",{className:"gr-headerDiscussions__topic\n                         gr-hyperlink\n                         gr-hyperlink--noUnderline",href:this.getTopicUrl(),"aria-label":this.getTitleAriaLabel()},void 0,n("span",{className:"gr-headerDiscussions__topicTitle"},void 0,e.title)," ",this.renderFolder(),n("div",{className:"gr-headerDiscussions__posts"},void 0,n(h["default"],{elements:t,separator:n("small",{className:"u-marginLeftTiny u-marginRightTiny"},void 0,"·")})))}})},{"../../../analytics/url_tracking_params":2,"../../dot_separated_elements":54,"../../gr_component_factory":63,"../../shared/gr_prop_types":96,"../../time/relative_time":106,"append-query":"append-query",moment:"moment"}],69:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("reflux"),a=s(o),i=e("lodash"),l=e("append-query"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../dropdown"),p=s(f),m=e("../../react_actions/discussions_pane_actions"),_=s(m),h=e("../../react_actions/current_user_actions"),g=s(h),v=e("../../react_stores/group_store"),y=s(v),b=e("../../react_stores/current_user_store"),k=e("./discussions/group_banner"),S=s(k),T=e("./discussions/topic"),P=s(T),N=e("../spinner"),w=s(N),x=e("../shape_icon"),C=s(x),A=e("../../analytics/url_tracking_params"),R=e("../shared/popover/popover"),E=s(R);r["default"]=c["default"].createClass({mixins:[a["default"].connect(y["default"])],displayName:"DiscussionsPane",propTypes:{preferences:React.PropTypes.object.isRequired},getInitialState:function(){return{showJit:this.props.preferences[b.USER_PREFERENCES.SHOW_DISCUSSIONS_PANE_JIT]}},openPane:function(){this.state.showJit===!0&&this.closeJit(),_["default"].openPane()},closeJit:function(){g["default"].updatePreference(b.USER_PREFERENCES.SHOW_DISCUSSIONS_PANE_JIT,!1),this.setState({showJit:!1})},renderAllUnreadPostsLink:function(e){var t="All unread posts in group "+e.name;return n("a",{className:"gr-headerDiscussions__moreDiscussionsLink gr-hyperlink u-textAlignCenter","aria-label":t,href:(0,u["default"])(e.allUnreadPostsUrl,{ref:A.URLTrackingParams.DISCUSSIONS_PANE_GROUP_ALL_UNREAD_POSTS})},void 0,"All unread posts")},renderDiscussionsList:function(){var e=this;return(0,i.map)(this.state.groups,function(t){return n("div",{},"discussionsGroup"+t.group.id,n(S["default"],{group:t.group}),(0,i.map)(t.topics,function(e){return n(P["default"],{topic:e},"discussionsTopic"+e.id)}),e.renderAllUnreadPostsLink(t.group))})},renderSparseState:function(){var e=this.state.sparse;return n("div",{className:"gr-headerDiscussions u-defaultType"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeading"},void 0,"Group Discussions"),n("div",{},void 0,n("div",{className:"gr-headerDiscussions__sparseBody"},void 0,n("div",{className:"gr-headerDiscussions__groupsExplanation"},void 0,"Want to connect with readers who love the same books as you? Goodreads has a group for almost any interest."),n("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,n(C["default"],{imageUrl:e.groupModeratorImageUrl,imageAlt:"Moderator of a book group"})),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"I\'ve been reading more since I became involved with groups. I especially love reading challenges…"'),n("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Moderator of a book group"),n("a",{className:"gr-hyperlink",href:(0,u["default"])(e.groupsWithReadingChallengesUrl,{ref:A.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_READING_CHALLENGES})},void 0,"See groups with reading challenges"))),n("div",{className:"gr-mediaFlexbox gr-headerDiscussions__testimonial"},void 0,n(C["default"],{className:"gr-mediaFlexbox__media",imageUrl:e.groupMemberImageUrl,imageAlt:"Member of a group"}),n("div",{className:"gr-mediaFlexbox__desc"},void 0,n("div",{className:"gr-headerDiscussions__testimonialQuote"},void 0,'"When I first joined a group, I finally felt like I had friends interested in the same books as me."'),n("div",{className:"gr-headerDiscussions__testimonialQuoteAttribution"},void 0,"—Member of a group"),n("a",{className:"gr-hyperlink",href:(0,u["default"])(e.popularGroupsUrl,{ref:A.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_POPULAR})},void 0,"See popular groups"))))),n("div",{className:"u-topGrayBorder gr-headerDiscussions__moreDiscussionsLink u-textAlignCenter u-marginTopSmall"},void 0,n("a",{className:"gr-hyperlink",href:(0,u["default"])(e.allGroupsUrl,{ref:A.URLTrackingParams.DISCUSSIONS_PANE_SPARSE_ALL})},void 0,"View all groups")))},renderPaneContents:function(){return this.state.errorMessage?n("div",{className:"gr-headerDiscussions u-paddingTopBottomXSmall u-textAlignCenter"},void 0,this.state.errorMessage):this.state.sparse?this.renderSparseState():(0,i.isEmpty)(this.state.groups)?n("div",{className:"gr-headerDiscussions u-paddingTopBottomXSmall u-textAlignCenter"},void 0,n(w["default"],{})):n("section",{},void 0,n("a",{className:"u-displayBlock gr-hyperlink gr-hyperlink--noUnderline",href:(0,u["default"])("/topic",{discussion_filter:"groups",ref:A.URLTrackingParams.DISCUSSIONS_PANE_ALL_DISCUSSIONS})},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Group Discussions"),n("span",{},void 0,"View all group discussions"))),n("div",{className:"gr-headerDiscussions gr-box gr-box--forceScrollBar"},void 0,this.renderDiscussionsList()))},render:function(){var e=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--discussions","aria-label":"My group discussions"});return n("div",{},void 0,n(p["default"],{trigger:e,triggerEventType:p["default"].TriggerEventTypes.CLICK,tooltipText:"My group discussions",bemModifiers:"discussions",isInPersonalNav:"true",onShowCallback:this.openPane},void 0,this.renderPaneContents()),n(E["default"],{className:"gr-headerDiscussions__popover",headingText:"New! See your group discussions",bemModifiers:["small","discussionsPane"],isOpen:this.state.showJit,showArrow:!0,onClose:this.closeJit,body:n("span",{},void 0,"This is where you can see new comments in discussions you’re following")}))}})},{"../../analytics/url_tracking_params":2,"../../react_actions/current_user_actions":19,"../../react_actions/discussions_pane_actions":21,"../../react_stores/current_user_store":131,"../../react_stores/group_store":137,"../dropdown":56,"../gr_component_factory":63,"../shape_icon":95,"../shared/popover/popover":98,"../spinner":103,"./discussions/group_banner":67,"./discussions/topic":68,"append-query":"append-query",lodash:"lodash",reflux:"reflux"}],70:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../modal_trigger"),d=s(u);r["default"]=l["default"].createClass({displayName:"FavoriteGenresPane",propTypes:{favoriteGenres:a["default"].PropTypes.array,genres:a["default"].PropTypes.array.isRequired},render:function(){return n("div",{className:"favoriteGenresPane"},void 0,n("div",{className:"favoriteGenresPane__title"},void 0,"What do you like to read?"),n("div",{className:"favoriteGenresPane__description"},void 0,"Choose your favorite genres to get personalized book recommendations."),n("div",{className:"favoriteGenresPane__buttonContainer"},void 0,n(d["default"],{id:"favGenres"},void 0,n("button",{className:"gr-button gr-button--dark"},void 0,"Choose Favorite Genres"))),n("a",{href:"/genres",className:"favoriteGenresPane__browseGenres"},void 0,"Browse Genres"))}})},{"../gr_component_factory":63,"../modal_trigger":89,react:"react"}],71:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=s(a),l=e("reflux"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("./featured_genres_book"),p=s(f),m=e("./featured_genres_list"),_=s(m),h=e("../spinner"),g=s(h),v=e("../../react_stores/featured_genres_store"),y=s(v),b=e("../../react_stores/user_agent_capabilities_store"),k=s(b),S=e("../../react_stores/google_ads_store"),T=s(S),P=e("../ads/google_native_nav_ad"),N=s(P),w=e("../ads/google_native_nav_creative"),x=s(w),C=e("./../tab_content"),A=s(C),R=/goodr.nav.browse.400x300/;r["default"]=c["default"].createClass({displayName:"FeaturedGenres",propTypes:{sponsoredGenres:React.PropTypes.array,adId:React.PropTypes.string},getDefaultProps:function(){return{sponsoredGenres:[]}},mixins:[u["default"].connect(y["default"],"featuredGenres"),u["default"].connect(k["default"],"userAgentCapabilities"),u["default"].connect(T["default"],"googleAdStore")],renderBooks:function(){if(this.state.userAgentCapabilities.touch===!0){var e=this.state.featuredGenres.featuredGenreBookInfo[0];return o("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,o(p["default"],{book:e.book,genre:e.genre,alwaysShown:!0}))}return i["default"].map(this.state.featuredGenres.featuredGenreBookInfo,function(e){return o("div",{className:"featuredGenres__genreSpotlight"},e.genre.name,o(p["default"],{book:e.book,genre:e.genre}))})},renderSponsoredSpotlight:function(e){var t=this;if(e){var r=function(){var e={enableTracking:!0,adId:t.props.adId};return{v:i["default"].map(t.props.sponsoredGenres,function(r){var s=o(x["default"],{adId:t.props.adId,genre:r.name,trackingOptions:e});return o("div",{className:"featuredGenres__genreSpotlight"},r.name,o(A["default"],{group:"featuredGenres",name:"featuredGenre-"+r.name},void 0,s))})}}();if("object"===("undefined"==typeof r?"undefined":n(r)))return r.v}},render:function(){var e=T["default"].findAd(R);return this.state.featuredGenres.featuredGenreBookInfo?e&&!this.state.googleAdStore.nativeAds[this.props.adId].hasCreative?o("div",{className:"featuredGenres featuredGenres--sparse"},void 0,o(g["default"],{}),o(N["default"],{adId:this.props.adId})):o("div",{className:"featuredGenres"},void 0,o("span",{className:"featuredGenres__genreList"},void 0,o(_["default"],{genres:i["default"].pluck(this.state.featuredGenres.featuredGenreBookInfo,"genre"),sponsoredGenres:this.props.sponsoredGenres,showSponsoredGenres:this.state.googleAdStore.nativeAds[this.props.adId]&&!this.state.googleAdStore.nativeAds[this.props.adId].empty})),this.renderSponsoredSpotlight(e),this.renderBooks()):this.state.featuredGenres.errorMessage?o("span",{},void 0,this.state.featuredGenres.errorMessage):o("div",{className:"featuredGenres featuredGenres--sparse"},void 0,o(g["default"],{}))}})},{"../../react_stores/featured_genres_store":135,"../../react_stores/google_ads_store":136,"../../react_stores/user_agent_capabilities_store":144,"../ads/google_native_nav_ad":43,"../ads/google_native_nav_creative":44,"../gr_component_factory":63,"../spinner":103,"./../tab_content":105,"./featured_genres_book":72,"./featured_genres_list":73,lodash:"lodash",reflux:"reflux"}],72:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../shared/gr_prop_types"),c=s(d),f=e("./../book"),p=s(f),m=e("./../community_rating"),_=s(m),h=e("./../tab_content"),g=s(h),v=e("./../user_content/truncated_html"),y=s(v),b=e("../want_to_read/want_to_read_button"),k=s(b),S=e("lodash"),T=e("../../analytics/origins");r["default"]=u["default"].createClass({displayName:"FeaturedGenresBook",propTypes:{alwaysShown:i["default"].PropTypes.bool,genre:i["default"].PropTypes.shape({
name:i["default"].PropTypes.string.isRequired,url:i["default"].PropTypes.string.isRequired}).isRequired,book:c["default"].book().isRequired},renderBookDescription:function(){return(0,S.isUndefined)(this.props.book.description)?null:o("div",{className:"featuredGenres__bookDescription"},void 0,i["default"].createElement(y["default"],this.props.book.description))},renderBook:function(){var e=this.props.genre;return o("div",{className:"featuredGenres__book"},void 0,o("div",{className:"siteHeader__heading siteHeader__title siteHeader__title--secondary"},void 0,"Among Most Read This Week in "+e.name),o("div",{className:"u-marginTopSmall"},void 0,i["default"].createElement(p["default"],n({},this.props.book,{key:this.props.book.bookId,size:f.VALID_BOOK_SIZES.LARGE}),o(_["default"],{rating:parseFloat(this.props.book.avgRating),displayAvg:!0}),o("div",{className:"featuredGenres__bookWantToReadButton"},void 0,o(k["default"],{bookTitle:this.props.book.title,uniqueId:(0,S.random)(1e6).toString(),bookId:this.props.book.bookId,origin:T.ShelvedBookOrigin.BROWSE_SPOTLIGHT,showMenu:!1})),this.renderBookDescription())),o("a",{href:e.url,className:"u-defaultType gr-hyperlink"},void 0,"More in "+e.name))},render:function(){return this.props.alwaysShown===!0?this.renderBook():o(g["default"],{group:"featuredGenres",name:"featuredGenre-"+this.props.genre.name},void 0,this.renderBook())}})},{"../../analytics/origins":1,"../gr_component_factory":63,"../shared/gr_prop_types":96,"../want_to_read/want_to_read_button":114,"./../book":46,"./../community_rating":53,"./../tab_content":105,"./../user_content/truncated_html":112,lodash:"lodash",react:"react"}],73:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("classnames"),a=s(o),i=e("reflux"),l=s(i),u=e("react"),d=s(u),c=e("lodash"),f=e("../dropdown"),p=s(f),m=e("../gr_component_factory"),_=s(m),h=e("./../tab"),g=s(h),v=e("../../react_stores/user_agent_capabilities_store"),y=s(v),b=8,k=1;r["default"]=_["default"].createClass({displayName:"FeaturedGenresList",mixins:[l["default"].connect(y["default"],"userAgentCapabilities")],propTypes:{adId:d["default"].PropTypes.string,genres:d["default"].PropTypes.array.isRequired,sponsoredGenres:d["default"].PropTypes.array,showSponsoredGenres:d["default"].PropTypes.bool},onClick:function(e){e.preventDefault()},allGenresLink:function(){return n("li",{role:"menuitem",className:"genreList__genre"},"allGenres",n("a",{href:"/genres",className:"siteHeader__subNavLink genreList__genreLink--more"},void 0,"All Genres"))},renderGenreLink:function(e,t){var r=(0,a["default"])(["genreList__genreLink","gr-hyperlink","gr-hyperlink--naked"]),s=n("a",{href:e.url,className:r},void 0,e.name);return this.state.userAgentCapabilities.touch===!0?s:n(g["default"],{group:"featuredGenres",name:"featuredGenre-"+e.name,triggerEventType:p["default"].TriggerEventTypes.HOVER,initiallySelected:t},void 0,s)},renderSponsoredGenresList:function(){var e=this;return this.props.showSponsoredGenres?n("div",{className:"featuredGenres__list genreList genreList--featuredSidebar"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Featured Genres")),n("ul",{},void 0,(0,c.map)((0,c.take)(this.props.sponsoredGenres,k),function(t){return n("li",{role:"menuitem",className:"genreList__genre"},t.name,e.renderGenreLink(t,!0))}))):null},renderFavoritesList:function(){var e=this,t=(0,c.random)(0,this.props.genres.length-1),r=this.props.showSponsoredGenres?b-2:b;return n("div",{className:"featuredGenres__list genreList genreList--sidebar"},void 0,n("div",{className:"siteHeader__title siteHeader__heading"},void 0,n("span",{className:"featuredGenres__listTitle"},void 0,"Favorite Genres")),n("ul",{},void 0,(0,c.map)((0,c.take)(this.props.genres,r),function(r,s){return n("li",{role:"menuitem",className:"genreList__genre"},r.name,e.renderGenreLink(r,e.props.showSponsoredGenres?!1:s===t))}),this.allGenresLink()))},render:function(){return n("div",{},void 0,this.renderSponsoredGenresList(),this.renderFavoritesList())}})},{"../../react_stores/user_agent_capabilities_store":144,"../dropdown":56,"../gr_component_factory":63,"./../tab":104,classnames:"classnames",lodash:"lodash",react:"react",reflux:"reflux"}],74:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=s(o),i=e("../gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"GenreList",render:function(){for(var e=10,t=[],r=this.props.genres.slice(0);t.length*e<this.props.genres.length;)t.push(r.splice(0,e));return n("div",{className:"genreListContainer"},void 0,n("div",{className:"siteHeader__heading siteHeader__title"},void 0,"Genres"),a["default"].map(t,function(e,t){return n("ul",{className:"genreList"},"genreList"+t,a["default"].map(e,function(e){return n("li",{role:"menuitem",className:"genreList__genre"},e.name,n("a",{href:e.url,className:"genreList__genreLink"},void 0,e.name))}))}))}})},{"../gr_component_factory":63,lodash:"lodash"}],75:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../search/book_search"),c=s(d),f=e("../favorite_genres_form"),p=s(f),m=e("../modal"),_=s(m),h=e("./personal_nav"),g=s(h),v=e("./primary_nav_menus"),y=s(v),b=e("./header_logo"),k=s(b),S=e("../../analytics/url_tracking_params"),T=e("../../modules/env_utils"),P=s(T);r["default"]=u["default"].createClass({displayName:"Header",propTypes:{adId:i["default"].PropTypes.string,autocomleteUrl:i["default"].PropTypes.string,browseUrl:i["default"].PropTypes.string,choiceAwardsUrl:i["default"].PropTypes.string,communityUrl:i["default"].PropTypes.string,editorsPicksUrl:i["default"].PropTypes.string,eventUrl:i["default"].PropTypes.string,discussionsUrl:i["default"].PropTypes.string,favoriteGenres:i["default"].PropTypes.array,sponsoredGenres:i["default"].PropTypes.array,friendIconUrl:i["default"].PropTypes.string,genres:i["default"].PropTypes.array.isRequired,giveawayUrl:i["default"].PropTypes.string,groupsUrl:i["default"].PropTypes.string,featuredAskAuthorUrl:i["default"].PropTypes.string,helpUrl:i["default"].PropTypes.string,listUrl:i["default"].PropTypes.string,messageIconUrl:i["default"].PropTypes.string,myBooksUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myGroupsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,myRecsUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,newReleasesUrl:i["default"].PropTypes.string,notificationIconUrl:i["default"].PropTypes.string,peopleUrl:i["default"].PropTypes.string,preferences:i["default"].PropTypes.object,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,quizzesUrl:i["default"].PropTypes.string,quotesUrl:i["default"].PropTypes.string,recommendationsUrl:i["default"].PropTypes.string,signedIn:i["default"].PropTypes.bool,searchPath:i["default"].PropTypes.string,signInUrl:i["default"].PropTypes.string,signUpUrl:i["default"].PropTypes.string,storiesUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number,triviaUrl:i["default"].PropTypes.string,logoUrl:i["default"].PropTypes.string,signInWithReturnUrl:i["default"].PropTypes.bool},render:function(){return o("div",{},void 0,o("header",{className:"siteHeader__contents"},void 0,i["default"].createElement(k["default"],this.props),i["default"].createElement(y["default"],this.props),this.renderSearchForm(),this.props.signedIn?this.renderPersonalNav():this.renderLoginLinks(),this.renderModals()))},renderPersonalNav:function(){return i["default"].createElement(g["default"],this.props)},getSignInUrl:function(){var e=P["default"].getCurrentPath();return this.props.signInUrl+"?returnurl="+e},signIn:function(e){e.preventDefault(),P["default"].setLocationUrl(this.getSignInUrl())},renderLoginLinks:function(){var e={};return this.props.signInWithReturnUrl&&(e.onClick=this.signIn),o("ul",{className:"siteHeader__personal"},void 0,o("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,i["default"].createElement("a",n({href:this.props.signInUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},e),"Sign In")),o("li",{className:"siteHeader__topLevelItem siteHeader__topLevelItem--signedOut"},void 0,o("a",{href:this.props.signUpUrl,rel:"nofollow",className:"siteHeader__topLevelLink"},void 0,"Join")))},onSearchSelection:function(e){var t=e.bookUrl+"?"+S.URLTrackingParams.BOOK_SHOW_INTERACTION_PARAM+"&"+S.URLTrackingParams.FROM_SEARCH_PARAM;P["default"].setLocationUrl(t)},renderSearchForm:function(){return o(c["default"],{bemModifiers:"navbar",searchPath:this.props.searchPath,autocompleteUrl:this.props.autocompleteUrl,onChooseResult:this.onSearchSelection})},renderModals:function(){return this.props.signedIn?o(_["default"],{id:"favGenres"},void 0,o(p["default"],{favoriteGenres:this.props.favoriteGenres,genres:this.props.genres})):null}})},{"../../analytics/url_tracking_params":2,"../../modules/env_utils":11,"../favorite_genres_form":59,"../gr_component_factory":63,"../modal":88,"../search/book_search":92,"./header_logo":76,"./personal_nav":80,"./primary_nav_menus":81,react:"react"}],76:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o);r["default"]=a["default"].createClass({displayName:"HeaderLogo",render:function(){return n("a",{href:this.props.logoActionUrl,className:this.isFeatureEnabled("logo_doodle")?"siteHeader__logo siteHeader__logo--doodle":"siteHeader__logo",title:this.props.logoAltText})}})},{"../gr_component_factory":63}],77:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("../gr_component_factory"),i=s(a),l=e("reflux"),u=s(l),d=e("./header"),c=s(d),f=e("../../react_stores/current_user_store"),p=s(f),m=e("../../react_stores/favorite_genres_store"),_=s(m);r["default"]=i["default"].createClass({displayName:"HeaderStoreConnector",mixins:[u["default"].connect(p["default"],"currentUser"),u["default"].connect(_["default"],"favoriteGenres")],render:function(){var e=this.state.currentUser.currentUser,t=!o["default"].isNull(e),r={adId:this.state.favoriteGenres.adId,signedIn:t,genres:this.state.favoriteGenres.allGenres,favoriteGenres:this.state.favoriteGenres.favoriteGenres,sponsoredGenres:this.state.favoriteGenres.sponsoredGenres};return t&&o["default"].merge(r,e),o["default"].merge(r,this.props),React.createElement(c["default"],r)}})},{"../../react_stores/current_user_store":131,"../../react_stores/favorite_genres_store":134,"../gr_component_factory":63,"./header":75,lodash:"lodash",reflux:"reflux"}],78:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o),i=e("lodash"),l=e("../../modules/shared/image_registry"),u=e("../../modules/to_sentence"),d=s(u),c=e("../user/user_icon"),f=s(c),p=e("../time/relative_time"),m=s(p),_=e("../shape_icon"),h=s(_);r["default"]=a["default"].createClass({displayName:"Notification",mixins:[d["default"]],propTypes:{notification:React.PropTypes.object.isRequired},userLink:function(e){return n("a",{href:e.profileUrl,className:"u-defaultType"},e.profileUrl,n("b",{},void 0,e.viewableName))},userLinks:function g(e){var t=this,g=(0,i.map)(e.actors,function(e){return t.userLink(e)});return e.moreActors?this.sentenceJoin(g):this.toSentence(g)},renderActorIcon:function(e){return e.actor?n(f["default"],{user:e.actor}):n(h["default"],{imageUrl:(0,l.getImages)().notificationFromGRIcon||"",imageAlt:"Goodreads Notification"})},renderNewNotificationFlag:function(e){return e.viewed?void 0:n("small",{className:"gr-smallAlert u-marginRightTiny"},void 0,"New")},render:function(){var e=this.props.notification;return e.error?null:n("div",{className:"gr-mediaBox gr-notification"},void 0,n("div",{className:"gr-mediaBox__media u-marginRightMedium"},void 0,this.renderActorIcon(e)),n("div",{className:"gr-mediaBox__desc u-defaultType"},void 0,this.userLinks(e),!e.actor||e.moreActors?"":e.directlyAddressed?", ":" ",e.body+" ",e.resource?n("a",{className:"gr-hyperlink",href:e.resource.url},void 0,e.resource.text):null,n("div",{},void 0,this.renderNewNotificationFlag(e),n("small",{},void 0,n(m["default"],{time:e.createdAt,longFormat:!0})))))}})},{"../../modules/shared/image_registry":15,"../../modules/to_sentence":16,"../gr_component_factory":63,"../shape_icon":95,"../time/relative_time":106,"../user/user_icon":107,lodash:"lodash"}],79:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("reflux"),f=s(c),p=e("../spinner"),m=s(p),_=e("../dropdown"),h=s(_),g=e("../../react_stores/notifications_store"),v=s(g),y=e("../../react_actions/notifications_actions"),b=s(y),k=e("./notification"),S=s(k);r["default"]=d["default"].createClass({displayName:"Notifications",mixins:[f["default"].connect(v["default"])],propTypes:{notificationIconUrl:a["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{triggerEventType:h["default"].TriggerEventTypes.HOVER}},generateKey:function(e){return e.actor?""+e.actor.profileUrl+e.createdAt:e.resource?""+e.resource.url+e.createdAt:""+e.body+e.createdAt},notificationsCountString:function(){return this.state.unreadCount+(this.state.unreadCountMore?"+":"")},renderNotificationList:function(){var e=this,t=this.state.notifications;return this.state.errorOccurred?n("div",{className:"gr-notifications gr-notifications--sparse"},void 0,n("span",{},void 0,"An error occurred loading your notifications")):l["default"].isUndefined(t)?n("div",{className:"gr-notifications gr-notifications--sparse"},void 0,n(m["default"],{})):l["default"].isEmpty(t)?n("div",{className:"gr-notifications gr-notifications--sparse"},void 0,n("span",{},void 0,"No notifications")):n("section",{},void 0,n("a",{className:"u-displayBlock gr-hyperlink gr-hyperlink--noUnderline",href:"/notifications"},void 0,n("div",{className:"siteHeader__dropdownHeading"},void 0,n("h3",{className:"siteHeader__heading siteHeader__dropdownHeader"},void 0,"Notifications"),n("span",{},void 0,"View all notifications"))),n("div",{className:"gr-notifications gr-box gr-box--forceScrollBar"},void 0,l["default"].map(t,function(t){return n(S["default"],{notification:t},e.generateKey(t))})))},render:function(){var e=n("span",{className:"headerPersonalNav__icon\n                       headerPersonalNav__icon--notifications","aria-label":"Notifications"},void 0,this.state.unreadCount>0?n("span",{className:"headerPersonalNav__flag"},void 0,this.notificationsCountString()):null),t=function(){b["default"].requestNotifications()};return n(h["default"],{trigger:e,triggerEventType:this.props.triggerEventType,hoverTriggerClickUrl:this.props.notificationIconUrl,fallbackUrl:this.props.notificationIconUrl,tooltipText:"Notifications",onShowCallback:t,bemModifiers:"notifications",isInPersonalNav:"true"},void 0,this.renderNotificationList())}})},{"../../react_actions/notifications_actions":30,"../../react_stores/notifications_store":140,"../dropdown":56,"../gr_component_factory":63,"../spinner":103,"./notification":78,lodash:"lodash",react:"react",reflux:"reflux"}],80:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("../dropdown"),p=s(f),m=e("./notifications"),_=s(m),h=e("./profile_menu"),g=s(h),v=e("../user/user_icon"),y=s(v),b=e("./discussions_pane"),k=s(b);r["default"]=c["default"].createClass({displayName:"PersonalNav",propTypes:{author:i["default"].PropTypes.shape({id:i["default"].PropTypes.number,editProfileUrl:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,dashboardUrl:i["default"].PropTypes.string}),commentsUrl:i["default"].PropTypes.string,editFavGenresUrl:i["default"].PropTypes.string,groupInvitesCount:i["default"].PropTypes.number,messageIconUrl:i["default"].PropTypes.string,myFriendsUrl:i["default"].PropTypes.string,myQuotesUrl:i["default"].PropTypes.string,myReadingChallengeUrl:i["default"].PropTypes.string,name:i["default"].PropTypes.string,pendingRecsCount:i["default"].PropTypes.number,preferences:i["default"].PropTypes.object,profileEditUrl:i["default"].PropTypes.string,profileImage:i["default"].PropTypes.string,profileUrl:i["default"].PropTypes.string,signOutUrl:i["default"].PropTypes.string,tempFriendRequestCount:i["default"].PropTypes.number,tempUnreadMessageCount:i["default"].PropTypes.number,personalNavShouldUseClickToOpen:i["default"].PropTypes.bool},getTriggerEventType:function(){return this.props.personalNavShouldUseClickToOpen?p["default"].TriggerEventTypes.CLICK:p["default"].TriggerEventTypes.HOVER},render:function(){var e={viewableName:this.props.name,profileImage:this.props.profileImage,profileUrl:this.props.profileUrl},t=o("span",{className:"headerPersonalNav"},void 0,o("span",{id:"navBarUserProfileIcon",className:"headerPersonalNav__icon\n                         headerPersonalNav__icon--profile"},void 0,o(y["default"],{user:e,includeLink:!1}))),r=o("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--inbox","aria-label":"Inbox"},void 0,this.props.tempUnreadMessageCount>0?o("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempUnreadMessageCount):null),s=o("span",{className:"headerPersonalNav__icon headerPersonalNav__icon--friendRequests","aria-label":"Friend Requests"},void 0,this.props.tempFriendRequestCount>0?o("span",{className:"headerPersonalNav__flag"},void 0,this.props.tempFriendRequestCount):null),a=0===u["default"].size(this.props.author)?this.props.profileUrl:this.props.author.profileUrl;return o("ul",{className:"siteHeader__personal"},void 0,o("li",{},void 0,o(_["default"],{triggerEventType:this.getTriggerEventType(),notificationIconUrl:this.props.notificationIconUrl})),this.isFeatureEnabled("nav_bar_discussions_pane")?o("li",{},void 0,o(k["default"],{preferences:this.props.preferences})):null,o("li",{},void 0,o("a",{href:this.props.messageIconUrl,title:"Messages",className:"headerPersonalNav"},void 0,r)),o("li",{},void 0,o("a",{href:this.props.friendIconUrl,title:"Friends",className:"headerPersonalNav"},void 0,s)),o("li",{},void 0,o(p["default"],{trigger:t,triggerEventType:this.getTriggerEventType(),hoverTriggerClickUrl:a,fallbackUrl:a,bemModifiers:"profileMenu",isInPersonalNav:"true"},void 0,i["default"].createElement(g["default"],n({},this.props,{profileUrl:a})))))}})},{"../dropdown":56,"../gr_component_factory":63,"../user/user_icon":107,"./discussions_pane":69,"./notifications":79,"./profile_menu":82,lodash:"lodash",react:"react"}],81:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("./community_menu"),d=s(u),c=e("./browse_menu"),f=s(c);r["default"]=l["default"].createClass({displayName:"PrimaryNavMenus",propTypes:{adId:a["default"].PropTypes.string,browseUrl:a["default"].PropTypes.string,choiceAwardsUrl:a["default"].PropTypes.string,communityUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editorsPicksUrl:a["default"].PropTypes.string,eventUrl:a["default"].PropTypes.string,favoriteGenres:a["default"].PropTypes.array,sponsoredGenres:a["default"].PropTypes.array,featuredAskAuthorUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array.isRequired,giveawayUrl:a["default"].PropTypes.string,groupsUrl:a["default"].PropTypes.string,homeUrl:a["default"].PropTypes.string,listUrl:a["default"].PropTypes.string,myBooksUrl:a["default"].PropTypes.string,newReleasesUrl:a["default"].PropTypes.string,peopleUrl:a["default"].PropTypes.string,quizzesUrl:a["default"].PropTypes.string,quotesUrl:a["default"].PropTypes.string,recommendationsUrl:a["default"].PropTypes.string,signedIn:a["default"].PropTypes.bool,storiesUrl:a["default"].PropTypes.string,triviaUrl:a["default"].PropTypes.string},render:function(){return n("nav",{className:"primaryNav"},void 0,n("ul",{role:"menu"},void 0,n("li",{className:"siteHeader__topLevelItem"},void 0,n("a",{href:this.props.homeUrl,className:"siteHeader__topLevelLink"},void 0,"Home")),n("li",{className:"siteHeader__topLevelItem"},void 0,n("a",{href:this.props.myBooksUrl,className:"siteHeader__topLevelLink"},void 0,"My Books")),n("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(f["default"],this.props)),n("li",{className:"siteHeader__topLevelItem"},void 0,a["default"].createElement(d["default"],this.props))))}})},{"../gr_component_factory":63,"./browse_menu":65,"./community_menu":66,react:"react"}],82:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../menu_link"),f=s(c);r["default"]=d["default"].createClass({displayName:"ProfileMenu",propTypes:{author:a["default"].PropTypes.shape({id:a["default"].PropTypes.number,editProfileUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,dashboardUrl:a["default"].PropTypes.string}),commentsUrl:a["default"].PropTypes.string,discussionsUrl:a["default"].PropTypes.string,editFavGenresUrl:a["default"].PropTypes.string,groupInvitesCount:a["default"].PropTypes.number,helpUrl:a["default"].PropTypes.string,myFriendsUrl:a["default"].PropTypes.string,myGroupsUrl:a["default"].PropTypes.string,myQuotesUrl:a["default"].PropTypes.string,myReadingChallengeUrl:a["default"].PropTypes.string,myRecsUrl:a["default"].PropTypes.string,pendingRecsCount:a["default"].PropTypes.number,profileEditUrl:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string,signOutUrl:a["default"].PropTypes.string},isAuthor:function(){return!l["default"].isUndefined(this.props.author)},groupInvitesMessage:function(){var e=this.props.groupInvitesCount;return 0===e?"No invitations":1===e?"1 invitation":e+" invitations"},renderGroupInvites:function(){return this.props.groupInvitesCount>0?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.groupInvitesMessage()):void 0},renderPendingRecs:function(){return this.props.pendingRecsCount>0?n("span",{className:"gr-smallAlert u-marginLeftXSmall"},void 0,this.props.pendingRecsCount+" new"):void 0},renderAuthorDashboardLink:function(){return this.isAuthor()?n(f["default"],{href:this.props.author.dashboardUrl,linkText:"Author Dashboard",linkClass:"siteHeader__subNavLink"}):void 0},render:function(){var e=this.isAuthor()?this.props.author.editProfileUrl:this.props.profileEditUrl;return n("ul",{className:"siteHeader__subNav siteHeader__subNav--profile gr-box gr-box--withShadowLarge"},void 0,n(f["default"],{},void 0,n("a",{href:this.props.profileUrl,className:"siteHeader__subNavLink"},void 0,"View Profile")),this.renderAuthorDashboardLink(),n(f["default"],{href:this.props.myFriendsUrl,linkText:"Friends",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.myQuotesUrl,linkText:"My Quotes",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.commentsUrl,linkText:"My Comments",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.discussionsUrl,linkText:"My Discussions",linkClass:"siteHeader__subNavLink"}),n(f["default"],{},void 0,n("a",{href:this.props.myGroupsUrl,className:"siteHeader__subNavLink"},void 0,"My Groups",this.renderGroupInvites())),n(f["default"],{href:this.props.myReadingChallengeUrl,linkText:"My Reading Challenge",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.editFavGenresUrl,linkText:"My Favorite Genres",linkClass:"siteHeader__subNavLink"}),n(f["default"],{},void 0,n("a",{href:this.props.myRecsUrl,className:"siteHeader__subNavLink"},void 0,"Friends’ Recommendations",this.renderPendingRecs())),n(f["default"],{href:e,linkText:"Account Settings",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.helpUrl,linkText:"Help",linkClass:"siteHeader__subNavLink"}),n(f["default"],{href:this.props.signOutUrl,linkText:"Sign Out",linkClass:"siteHeader__subNavLink",method:"POST"}))}})},{"../gr_component_factory":63,"../menu_link":87,lodash:"lodash",react:"react"}],83:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_mixins/gr_reflux"),d=e("../../react_actions/like_actions"),c=s(d),f=e("../../react_stores/like_store"),p=s(f),m=e("../spinner"),_=s(m),h=e("classnames"),g=s(h);r["default"]=l["default"].createClass({displayName:"LikeButton",mixins:[(0,u.connectToLazyStore)(p["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,showAsLink:a["default"].PropTypes.bool},getDefaultProps:function(){return{showAsLink:!0}},componentDidUpdate:function(){this.likeFocused&&!this.state.showLoadingSpinner&&(this.refs.likeButton.focus(),this.likeFocused=!1)},buttonClicked:function(){this.state.isLiked?c["default"].unLike(this.props.resourceKey):c["default"].like(this.props.resourceKey)},render:function(){var e=this,t=this.state.isLiked?"Unlike":"Like",r=(0,g["default"])({"gr-buttonAsLink":this.props.showAsLink},{"gr-button gr-button--small":!this.props.showAsLink});return n("span",{"aria-live":"polite"},void 0,this.state.showLoadingSpinner?n(_["default"],{}):a["default"].createElement("button",{"aria-label":t+" "+this.props.resourceLabel,ref:"likeButton",className:r,onClick:this.buttonClicked,onFocus:function(){e.likeFocused=!0}},t))}})},{"../../react_actions/like_actions":27,"../../react_mixins/gr_reflux":126,"../../react_stores/like_store":138,"../gr_component_factory":63,"../spinner":103,classnames:"classnames",react:"react"}],84:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_stores/like_store"),d=s(u),c=e("../../react_mixins/gr_reflux");
r["default"]=l["default"].createClass({displayName:"LikeCount",mixins:[(0,c.connectToLazyStore)(d["default"],"resourceKey")],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getPluralLike:function(e){return 1===e?"like":"likes"},render:function(){return this.state.likeCount>0?n("span",{},void 0,n("a",{className:"gr-hyperlink",href:this.state.likersListUrl},void 0,this.state.likeCount," ",this.getPluralLike(this.state.likeCount))," · "):null}})},{"../../react_mixins/gr_reflux":126,"../../react_stores/like_store":138,"../gr_component_factory":63,react:"react"}],85:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("reflux"),f=s(c),p=e("../../react_stores/like_store"),m=s(p);r["default"]=d["default"].createClass({displayName:"LikeInformation",mixins:[f["default"].connectFilter(m["default"],function(e){return e[this.props.resourceKey]})],propTypes:{resourceKey:a["default"].PropTypes.string.isRequired},getNameLink:function(){var e=l["default"].isUndefined(this.state.likedBy.friends)?this.state.likedBy.others[0]:this.state.likedBy.friends[0];return n("a",{href:e.profile_url,className:"gr-hyperlink gr-hyperlink--bold likeInformation__name"},void 0,e.name)},getPluralPerson:function(e){return e>1?"people":"person"},getYouLikeMessage:function(){return n("span",{className:"likeInformation__name"},void 0,"You")},getYouAndAnotherPersonLikeMessage:function(){return n("span",{},void 0,this.getYouLikeMessage()," and ",this.getNameLink())},getYouAndManyPeopleLikeMessage:function(){var e=this.state.likeCount-2;return n("span",{},void 0,this.getYouLikeMessage(),", ",this.getNameLink(),","," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:this.state.likersListUrl},void 0,e," other ",this.getPluralPerson(e)))},getSomeoneLikeMessage:function(){return n("span",{},void 0,this.getNameLink())},getManyPeopleLikeMessage:function(){var e=this.state.likeCount-1;return n("span",{},void 0,this.getNameLink()," and ",n("a",{className:"gr-hyperlink gr-hyperlink--bold",href:this.state.likersListUrl},void 0,e," other ",this.getPluralPerson(e)))},getLikeMessage:function(){if(this.state.isLiked)switch(this.state.likeCount){case 1:return this.getYouLikeMessage();case 2:return this.getYouAndAnotherPersonLikeMessage();default:return this.getYouAndManyPeopleLikeMessage()}else switch(this.state.likeCount){case 1:return this.getSomeoneLikeMessage();default:return this.getManyPeopleLikeMessage()}},render:function(){return!this.state.isLiked&&l["default"].isEmpty(this.state.likedBy)?null:n("div",{className:"likeInformation u-defaultType"},void 0,this.getLikeMessage()," liked this")}})},{"../../react_stores/like_store":138,"../gr_component_factory":63,lodash:"lodash",react:"react",reflux:"reflux"}],86:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("./like_count"),d=s(u),c=e("./like_button"),f=s(c);r["default"]=l["default"].createClass({displayName:"LikeSimpleFooter",propTypes:{resourceKey:a["default"].PropTypes.string.isRequired,resourceLabel:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired,showAsLink:a["default"].PropTypes.bool},render:function(){return n("span",{},void 0,n(d["default"],{resourceKey:this.props.resourceKey}),this.props.isLikeable?n(f["default"],{resourceKey:this.props.resourceKey,resourceLabel:this.props.resourceLabel,showAsLink:this.props.showAsLink}):null)}})},{"../gr_component_factory":63,"./like_button":83,"./like_count":84,react:"react"}],87:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"MenuLink",propTypes:{href:a["default"].PropTypes.string,linkText:a["default"].PropTypes.any,linkClass:a["default"].PropTypes.string,method:a["default"].PropTypes.oneOf(["POST","PUT","DELETE"])},render:function(){return n("li",{role:"menuitem",className:"menuLink"},void 0,this.props.children?n("span",{},void 0,this.props.children):n("a",{href:this.props.href,className:this.props.linkClass,"data-method":this.props.method},void 0,this.props.linkText))}})},{"./gr_component_factory":63,react:"react"}],88:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i),u=e("reflux"),d=s(u),c=e("classnames"),f=s(c),p=e("../react_stores/modal_store"),m=s(p),_=e("../react_actions/modal_actions"),h=s(_),g=e("./close_button"),v=s(g),y=e("../modules/keys"),b=s(y);r["default"]=l["default"].createClass({displayName:"Modal",mixins:[d["default"].connect(m["default"])],propTypes:{id:a["default"].PropTypes.string.isRequired},hide:function(){h["default"].closeModal()},isActive:function(){return this.state.currentActiveModal===this.props.id},hideOnOverlayClick:function(e){e.target.className.indexOf("modal--overlay")>-1&&this.hide()},hideOnEscape:function(e){b["default"].isDefaultCloserKey(e.keyCode)&&this.hide()},render:function(){var e=(0,f["default"])("modal","modal--overlay",{"modal--show":this.isActive()});return a["default"].createElement("div",{className:e,ref:"modalContent",tabIndex:"0",onClick:this.hideOnOverlayClick,onKeyDown:this.hideOnEscape},n("div",{className:this.withBemModifiers("modal__content")},void 0,n("div",{className:"modal__close"},void 0,n(v["default"],{action:this.hide})),this.props.children))}})},{"../modules/keys":13,"../react_actions/modal_actions":28,"../react_stores/modal_store":139,"./close_button":48,"./gr_component_factory":63,classnames:"classnames",react:"react",reflux:"reflux"}],89:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i),u=e("../react_actions/modal_actions"),d=s(u);r["default"]=l["default"].createClass({displayName:"ModalTrigger",propTypes:{id:a["default"].PropTypes.string.isRequired},openModal:function(){d["default"].openModal(this.props.id)},render:function(){return n("a",{className:"modalTrigger",onClick:this.openModal},void 0,this.props.children)}})},{"../react_actions/modal_actions":28,"./gr_component_factory":63,react:"react"}],90:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("./pagination_single_page_link"),f=s(c),p=e("./shared/gr_prop_types"),m=s(p);r["default"]=d["default"].createClass({displayName:"PaginationLinks",propTypes:{totalSize:m["default"].naturalNumber.isRequired,currentPageNumber:a["default"].PropTypes.number.isRequired,className:a["default"].PropTypes.string,perPage:m["default"].naturalNumber.isRequired,changePageAction:a["default"].PropTypes.func.isRequired},maxPageNumber:function(){return Math.ceil(this.props.totalSize/this.props.perPage)},renderPageLinks:function(){var e=this,t=this.maxPageNumber();return 1!==t?l["default"].times(t,function(t){return n(f["default"],{pageNumber:t+1,currentPageNumber:e.props.currentPageNumber,changePageAction:e.props.changePageAction},t+1)}):void 0},renderPrevLink:function(){return 1===this.maxPageNumber()?null:n("button",{className:"gr-paginationLinks__previousLink gr-buttonAsLink gr-buttonAsLink--black",onClick:this.moveToPrevPage,disabled:1===this.props.currentPageNumber},void 0,"← Previous")},renderNextLink:function(){return 1===this.maxPageNumber()?null:n("button",{className:"gr-paginationLinks__nextLink gr-buttonAsLink gr-buttonAsLink--black",onClick:this.moveToNextPage,disabled:this.props.currentPageNumber===this.maxPageNumber()},void 0,"Next →")},moveToNextPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber+1)},moveToPrevPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.currentPageNumber-1)},render:function(){return n("div",{className:"gr-paginationLinks "+(this.props.className||"")},void 0,this.renderPrevLink(),this.renderPageLinks(),this.renderNextLink())}})},{"./gr_component_factory":63,"./pagination_single_page_link":91,"./shared/gr_prop_types":96,lodash:"lodash",react:"react"}],91:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"PaginationSinglePageLink",propTypes:{pageNumber:a["default"].PropTypes.number,currentPageNumber:a["default"].PropTypes.number,changePageAction:a["default"].PropTypes.func.isRequired},render:function(){return this.props.pageNumber===this.props.currentPageNumber?n("span",{className:"gr-paginationLinks__pageNumLink\n                         gr-paginationLinks__pageNumLink--selected"},void 0,this.props.pageNumber):n("button",{className:"gr-buttonAsLink\n                           gr-buttonAsLink--black\n                           gr-paginationLinks__pageNumLink",onClick:this.jumpToPage},void 0,this.props.pageNumber)},jumpToPage:function(e){e.preventDefault(),this.props.changePageAction(this.props.pageNumber)}})},{"./gr_component_factory":63,react:"react"}],92:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("lodash"),u=s(l),d=e("../gr_component_factory"),c=s(d),f=e("reflux"),p=s(f),m=e("react-onclickoutside"),_=s(m),h=e("classnames"),g=s(h),v=e("../../modules/keys"),y=s(v),b=e("../../react_stores/book_search_store_factory"),k=s(b),S=e("./book_search_results"),T=s(S),P=e("../spinner"),N=s(P),w=e("../../react_mixins/factory_store_mixin"),x=s(w),C=300;r["default"]=c["default"].createClass({displayName:"BookSearch",mixins:[_["default"],p["default"].ListenerMixin,(0,x["default"])(k["default"])],propTypes:{onChooseResult:i["default"].PropTypes.func.isRequired,maxResults:i["default"].PropTypes.number,shelfName:i["default"].PropTypes.string,searchPath:i["default"].PropTypes.string.isRequired,closeAfterResultChosen:i["default"].PropTypes.bool,autocompleteUrl:i["default"].PropTypes.string.isRequired},getDefaultProps:function(){return{maxResults:5,closeAfterResultChosen:!1}},componentDidMount:function(){var e=this;this.delayedSearch=u["default"].debounce(function(t){e.actions.search(t.target.value,e.props.autocompleteUrl)},C)},hide:function(){this.actions.setShowResultsContainer(!1)},handleClickOutside:function(){this.hide()},handleSearch:function(e){u["default"].isEmpty(e.target.value)?this.hide():(e.persist(),this.delayedSearch(e))},handleClick:function(e){u["default"].isEmpty(this.state.query)||this.handleSearch(e)},handleChoice:function(e){this.props.onChooseResult(e),this.props.closeAfterResultChosen&&this.hide()},handleKeyPress:function(e){var t=Math.min(this.props.maxResults,this.state.results.length);y["default"].isEnter(e.keyCode)&&null!==this.state.activeResult?(this.handleChoice(this.state.activeResult),e.preventDefault()):y["default"].isArrowDown(e.keyCode)?this.actions.selectNextResult(t):y["default"].isArrowUp(e.keyCode)?this.actions.selectPreviousResult(t):y["default"].isEscape(e.keyCode)&&this.hide()},renderInputIcon:function(){var e=(0,g["default"])("searchBox__icon",{"searchBox__icon--loadingSpinner":this.state.showLoadingSpinner,"searchBox__icon--magnifyingGlass gr-iconButton":!this.state.showLoadingSpinner});return this.state.showLoadingSpinner?o("span",{className:e},void 0,o(N["default"],{})):o("button",{type:"submit",className:e,"aria-label":"Search"})},render:function(){var e=(0,g["default"])(this.withBemModifiers("searchBox")),t=(0,g["default"])(this.withBemModifiers("searchBox__input"));return o("div",{acceptCharset:"UTF-8",className:e,onKeyDown:this.handleKeyPress},void 0,o("form",{autoComplete:"off",action:this.props.searchPath,role:"search","aria-label":"Search for books to add to your shelves"},void 0,o("input",{className:t,autoComplete:"off",name:"q",type:"text",placeholder:"Search books","aria-label":"Search books",onClick:this.handleClick,onChange:this.handleSearch,"aria-controls":"searchResults"}),this.renderInputIcon(),this.state.showResultsContainer?i["default"].createElement(T["default"],n({},this.props,this.state,{onChooseResult:this.handleChoice,mouseoverAction:this.actions.selectSpecificResult})):null))}})},{"../../modules/keys":13,"../../react_mixins/factory_store_mixin":125,"../../react_stores/book_search_store_factory":129,"../gr_component_factory":63,"../spinner":103,"./book_search_results":94,classnames:"classnames",lodash:"lodash",react:"react","react-onclickoutside":"react-onclickoutside",reflux:"reflux"}],93:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../shared/gr_prop_types"),d=s(u),c=e("classnames"),f=s(c),p=e("../author/author_badge"),m=s(p);r["default"]=l["default"].createClass({displayName:"BookSearchResult",propTypes:{book:d["default"].book().isRequired,onChooseResult:a["default"].PropTypes.func.isRequired},render:function(){var e=this,t=(0,f["default"])("gr-mediaBox","gr-book--navbar","gr-hyperlink","gr-hyperlink--naked","gr-hyperlink--noUnderline","searchResults__result");return n("a",{className:t,href:"#","aria-label":"Search result",onClick:function(){e.props.onChooseResult(e.props.book)}},void 0,n("img",{className:"gr-mediaBox__media",src:this.props.book.imageUrl,alt:""}),n("div",{className:"gr-mediaBox__desc"},void 0,n("div",{className:"gr-book__title gr-book__title--navbar u-defaultType"},void 0,this.props.book.title),n("div",{className:"gr-book__author gr-book__author--navbar"},void 0,"by ",this.props.book.author.name,a["default"].createElement(m["default"],this.props.book.author))))}})},{"../author/author_badge":45,"../gr_component_factory":63,"../shared/gr_prop_types":96,classnames:"classnames",react:"react"}],94:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("classnames"),d=s(u),c=e("../drop_down_list"),f=s(c),p=e("./book_search_result"),m=s(p),_=e("../gr_component_factory"),h=s(_);r["default"]=h["default"].createClass({displayName:"BookSearchResults",propTypes:{maxResults:a["default"].PropTypes.number.isRequired,query:a["default"].PropTypes.string,results:a["default"].PropTypes.array.isRequired,shelfName:a["default"].PropTypes.string,searchPath:a["default"].PropTypes.string,onChooseResult:a["default"].PropTypes.func.isRequired,mouseoverAction:a["default"].PropTypes.func.isRequired,activeResult:a["default"].PropTypes.shape({title:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired})},renderLastSearchResultItem:function(e){var t=(0,d["default"])("gr-buttonAsLink","searchResults__lastItem",this.withBemElement("searchResults","lastItem"));return n("button",{className:t,type:"submit"},void 0,e)},render:function(){var e=this,t=(0,d["default"])(this.withBemModifiers("searchResults"),"gr-box","gr-box--withShadow");return n("div",{className:t,id:"bookSearchResults"+this.props.query+this.props.results.length,"aria-live":"polite","aria-label":"Book search results"},void 0,n(f["default"],{maxListItems:this.props.maxResults},void 0,this.props.results.length>0?l["default"].map(l["default"].slice(this.props.results,0,this.props.maxResults),function(t){return n("div",{className:(0,d["default"])("searchResults__item",{"searchResults__item--active":t===e.props.activeResult}),onMouseOver:function(){e.props.mouseoverAction(t.bookId)}},t.bookId,n(m["default"],{book:t,onChooseResult:e.props.onChooseResult}))}):this.renderLastSearchResultItem('Search for "'+this.props.query+'"…'),this.props.results.length>0?this.renderLastSearchResultItem('See all results for "'+this.props.query+'"'):null))}})},{"../drop_down_list":55,"../gr_component_factory":63,"./book_search_result":93,classnames:"classnames",lodash:"lodash",react:"react"}],95:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("react"),i=s(a),l=e("./gr_component_factory"),u=s(l),d=e("classnames"),c=s(d),f=e("../modules/shape_icon_values"),p=e("lodash");r["default"]=u["default"].createClass({displayName:"ShapeIcon",propTypes:{imageUrl:i["default"].PropTypes.string.isRequired,imageAlt:i["default"].PropTypes.string.isRequired,includeLink:i["default"].PropTypes.bool,linkUrl:i["default"].PropTypes.string,size:i["default"].PropTypes.oneOf((0,p.values)(f.ICON_SIZES)),shape:i["default"].PropTypes.oneOf((0,p.values)(f.ICON_SHAPES)),border:i["default"].PropTypes.bool},getShapeClass:function(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0],t=this.props.shape+"Icon";return e&&(t+="--"+e),t},getDefaultProps:function(){return{includeLink:!1,size:f.ICON_SIZES.SMALL,shape:f.ICON_SHAPES.CIRCLE,border:!1}},render:function(){var e,t=(0,c["default"])(this.props.className,(e={},n(e,""+this.getShapeClass(),!0),n(e,""+this.getShapeClass("medium"),this.props.size===f.ICON_SIZES.MEDIUM),n(e,""+this.getShapeClass("large"),this.props.size===f.ICON_SIZES.LARGE),n(e,""+this.getShapeClass("border"),this.props.border),e));return this.props.includeLink&&this.props.linkUrl?o("a",{href:this.props.linkUrl},void 0,o("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})):o("img",{className:t,src:this.props.imageUrl,alt:this.props.imageAlt})}})},{"../modules/shape_icon_values":14,"./gr_component_factory":63,classnames:"classnames",lodash:"lodash",react:"react"}],96:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e){function t(t,r,s,n){return n||(n="<<anonymous>>"),l["default"].isNull(r[s])||l["default"].isUndefined(r[s])?t?new Error("Required property `"+s+"` was not specified in "+("`"+n+"`.")):null:e(r,s,n)}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=function(e,t,r){var s=e[t],n=l["default"].isString(s)?new Date(s):s;return!l["default"].isDate(n)||l["default"].isNaN(n.getTime())?new Error("Property '"+t+"' must be a Date. "+r+" was supplied: '"+s+"'."):void 0},d=function(e,t,r){var s=e[t];return 0>=s?new Error("Property '"+t+"' must be > 0. "+r+" was supplied: '"+s+"'."):void 0},c=function(e,t){return l["default"].merge({},e,t)},f=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string,informalName:a["default"].PropTypes.string};return a["default"].PropTypes.shape(c(t,e))},p=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={bookId:a["default"].PropTypes.string,workId:a["default"].PropTypes.string,bookUrl:a["default"].PropTypes.string,authorName:a["default"].PropTypes.string,title:a["default"].PropTypes.string,imageUrl:a["default"].PropTypes.string,numPages:a["default"].PropTypes.number};return a["default"].PropTypes.shape(c(t,e))},m=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=g();return a["default"].PropTypes.shape(c(t,e))},_=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,name:a["default"].PropTypes.string.isRequired,isGoodreadsAuthor:a["default"].PropTypes.bool,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string.isRequired})},h=function(){return{html:a["default"].PropTypes.string.isRequired,truncatedHtml:a["default"].PropTypes.string}},g=function(){return{html:a["default"].PropTypes.string,fullContentUrl:a["default"].PropTypes.string,fullContentText:a["default"].PropTypes.string,truncated:a["default"].PropTypes.bool.isRequired,className:a["default"].PropTypes.string,bookDescriptionTargetingData:a["default"].PropTypes.object}},v=function(){return a["default"].PropTypes.shape({user:f().isRequired,friendUser:f().isRequired,isMyFriend:a["default"].PropTypes.bool.isRequired,addFriendUrl:a["default"].PropTypes.string,compareBooksUrl:a["default"].PropTypes.string,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},y=function(){return a["default"].PropTypes.shape({user:f().isRequired,followingUser:f().isRequired,ratingDetailsText:a["default"].PropTypes.string,currentlyReadingBook:p()})},b=function(){return a["default"].PropTypes.shape({type:a["default"].PropTypes.string,id:a["default"].PropTypes.number,uri:a["default"].PropTypes.string})},k=function(){return a["default"].PropTypes.shape({canComment:a["default"].PropTypes.bool.isRequired,commentable:a["default"].PropTypes.bool.isRequired,subjectKey:a["default"].PropTypes.string.isRequired,subject:b(),subjectUrl:a["default"].PropTypes.string})},S=function(){return a["default"].PropTypes.shape({key:a["default"].PropTypes.string.isRequired,label:a["default"].PropTypes.string.isRequired,isLikeable:a["default"].PropTypes.bool.isRequired})},T=function(){return a["default"].PropTypes.shape({author:_().isRequred,title:a["default"].PropTypes.string,url:a["default"].PropTypes.string})},P=function(){return a["default"].PropTypes.shape({user:f().isRequired,author:_().isRequred,userAuthorFollowingsUrl:a["default"].PropTypes.string})},N=function(){return a["default"].PropTypes.shape({author:_().isRequired,message:a["default"].PropTypes.string,url:a["default"].PropTypes.string.isRequired})},w=function(){return a["default"].PropTypes.shape({author:_().isRequired,body:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,quotesAuthorUrl:a["default"].PropTypes.string.isRequired})},x=function(){return a["default"].PropTypes.shape({name:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,iconUrl:a["default"].PropTypes.string.isRequired,id:a["default"].PropTypes.number.isRequired,lastActiveAt:n(u)})},C=function(){return a["default"].PropTypes.shape({id:a["default"].PropTypes.number.isRequired,title:a["default"].PropTypes.string.isRequired,url:a["default"].PropTypes.string.isRequired,totalPosts:a["default"].PropTypes.string.isRequired,newPosts:a["default"].PropTypes.string,newCommentsUrl:a["default"].PropTypes.string,updatedAt:n(u),folder:a["default"].PropTypes.shape({name:a["default"].PropTypes.string,url:a["default"].PropTypes.string})})},A={user:f().isRequired,pollName:a["default"].PropTypes.string.isRequired,answer:a["default"].PropTypes.object.isRequired,url:a["default"].PropTypes.string.isRequired,imageUrl:a["default"].PropTypes.string.isRequired,isGroupPoll:a["default"].PropTypes.bool.isRequired,isChoicePoll:a["default"].PropTypes.bool.isRequired,groupName:a["default"].PropTypes.string,groupUrl:a["default"].PropTypes.string},R=function(){return a["default"].PropTypes.shape(A)},E=function(){return a["default"].PropTypes.shape(c(A,{choiceYear:a["default"].PropTypes.string.isRequired,choiceUrl:a["default"].PropTypes.string.isRequired,badgeUrl:a["default"].PropTypes.string.isRequired,votedBook:p().isRequired}))},M=function(){return{category:a["default"].PropTypes.number.isRequired,questionText:a["default"].PropTypes.string.isRequired,isSpoiler:a["default"].PropTypes.bool.isRequired,questionUrl:a["default"].PropTypes.string.isRequired,user:f().isRequired,authorQuestionsUrl:a["default"].PropTypes.string,book:p()}},L=function(){return{user:f().isRequired,answerText:a["default"].PropTypes.shape(g()),isSpoiler:a["default"].PropTypes.bool.isRequired,communityQuestion:a["default"].PropTypes.shape(M()).isRequired}},U=function(){return a["default"].PropTypes.shape({book:p(),customText:a["default"].PropTypes.object,helpLink:a["default"].PropTypes.string,defaultIcon:a["default"].PropTypes.string,numAdditionalFriends:a["default"].PropTypes.number,friendActionText:a["default"].PropTypes.string,firstFriend:f(),customTextReview:a["default"].PropTypes.object,similarBook:p(),similarBookShelf:a["default"].PropTypes.string,similarBookShelfUrl:a["default"].PropTypes.string,genres:a["default"].PropTypes.array})},I=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={actor:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string,profileImage:a["default"].PropTypes.string,profileUrl:a["default"].PropTypes.string}),actors:a["default"].PropTypes.array,createdAt:a["default"].PropTypes.string,body:a["default"].PropTypes.string,resource:a["default"].PropTypes.shape({text:a["default"].PropTypes.string,url:a["default"].PropTypes.string}),viewed:a["default"].PropTypes["boolean"],moreActors:a["default"].PropTypes["boolean"]};return a["default"].PropTypes.shape(c(t,e))};r["default"]={user:f,author:_,book:p,bookDescription:m,quote:w,commentSubject:b,comment:k,like:S,group:x,topic:C,authorBlogPostNewsfeedResource:T,authorFollowNewsfeedResource:P,authorQaSettingNewsfeedResource:N,communityQuestion:M,communityAnswer:L,friendNewsfeedResource:v,userFollowingNewsfeedResource:y,pollVoteNewsfeedResource:R,expandableHtml:h,truncatedHtml:g,choicePollVoteNewsfeedResource:E,date:n(u),naturalNumber:n(d),creative:U,notification:I}},{lodash:"lodash",react:"react"}],97:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),o=s(n),a=e("react-dom"),i=s(a),l=e("lodash"),u=s(l),d=e("../user_content/spoiler"),c=s(d);r["default"]={replaceSpoilerHTMLWithReactComponents:function(e,t){var r=t||window.$j,s=r(".jsShowSpoiler",e);u["default"].each(s,function(e){var t=r(e),s=t.next(".spoilerContainer");if(s){var n=s.text().replace("(hide spoiler)",""),a=o["default"].createElement(c["default"],{html:n}),l=r("<span></span>");t.replaceWith(l),i["default"].render(a,r(l)[0])}})}}},{"../user_content/spoiler":111,lodash:"lodash",react:"react","react-dom":"react-dom"}],98:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,
_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0}),r.POPOVER_ARROW_POSITIONS=void 0;var o=e("react"),a=s(o),i=e("react-dom"),l=s(i),u=e("../../gr_component_factory"),d=s(u),c=e("../../close_button"),f=s(c),p=e("classnames"),m=s(p),_=e("lodash"),h=r.POPOVER_ARROW_POSITIONS={TOP_RIGHT:"topRight"},g=12,v="popoverTarget",y="gr-popover";r["default"]=d["default"].createClass({displayName:"Popover",propTypes:{body:a["default"].PropTypes.element.isRequired,onClose:a["default"].PropTypes.func.isRequired,popoverTarget:a["default"].PropTypes.element,headingText:a["default"].PropTypes.string,isOpen:a["default"].PropTypes.bool,showCloseButton:a["default"].PropTypes.bool,showArrow:a["default"].PropTypes.bool},getDefaultProps:function(){return{isOpen:!1,isCloseOnOutsideClick:!0,showArrow:!0,showCloseButton:!0}},getInitialState:function(){return{popoverPosition:null}},componentDidUpdate:function(){if(this.props.popoverTarget){var e=this.state.popoverPosition,t=this.getPopoverPosition();(0,_.isEqual)(e,t)||this.resetPopoverPosition()}},componentDidMount:function(){if(this.props.popoverTarget){this.resetPopoverPosition();var e=(0,_.throttle)(this.resetPopoverPosition,10);window.addEventListener("resize",e)}},hasTopArrow:function(){return this.props.showArrow&&(0,_.includes)([h.TOP_LEFT],this.props.arrowPosition)},getPopoverTargetBoundingClientRect:function(){var e=l["default"].findDOMNode(this.refs[v]);return e?e.getBoundingClientRect():void 0},getPopoverPositionTop:function(){var e=this.getPopoverTargetBoundingClientRect();return e?this.hasTopArrow()?e.height+g:e.height:this.hasTopArrow()?g:0},getPopoverPosition:function(){var e=this.getPopoverTargetBoundingClientRect();return e?{right:0,top:this.getPopoverPositionTop()}:null},resetPopoverPosition:function(){this.setState({popoverPosition:this.getPopoverPosition()})},onClose:function(){this.props.onClose()},renderCloseAction:function(){return this.props.showCloseButton?n("div",{className:"u-floatRight"},void 0,n(f["default"],{action:this.onClose})):void 0},renderHeader:function(){var e=this.props.headingText;return e?n("h3",{className:"u-noTopMargin"},void 0,e):void 0},renderArrow:function(){if(this.props.showArrow){var e=y+"__arrow--"+h.TOP_RIGHT,t=(0,m["default"])(y+"__arrow",e);return n("div",{className:t})}},renderPopover:function(){if(this.props.isOpen){var e={};return this.state.popoverPosition&&(e.top=this.state.popoverPosition.top,e.right=this.state.popoverPosition.right),n("div",{style:e,className:this.withBemModifiers(y)},void 0,this.renderArrow(),this.renderCloseAction(),this.renderHeader(),this.props.body)}},renderPopoverTarget:function(){return this.props.popoverTarget?a["default"].cloneElement(this.props.popoverTarget,{ref:v}):void 0},render:function(){return n("div",{className:"u-positionRelative"},void 0,this.renderPopoverTarget(),this.renderPopover())}})},{"../../close_button":48,"../../gr_component_factory":63,classnames:"classnames",lodash:"lodash",react:"react","react-dom":"react-dom"}],99:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o),i=e("lodash"),l=s(i),u=e("classnames"),d=s(u);r["default"]=a["default"].createClass({displayName:"ChoiceSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string,totalVotes:React.PropTypes.number.isRequired},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!l["default"].isEmpty(this.props.targetUrl)},renderAnnouncementTitle:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__title";return e?n("a",{className:(0,d["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:t},void 0,this.props.announcementText)},render:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl},void 0,n("img",{src:this.props.imageUrl,alt:this.props.imageAlt})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,this.renderAnnouncementTitle(),n("div",{className:"siteAnnouncement__description"},void 0,"See the Nominees"),n("div",{className:"siteAnnouncement__choiceVoteCount"},void 0,this.props.totalVotes.toLocaleString()," votes")))}})},{"../gr_component_factory":63,classnames:"classnames",lodash:"lodash"}],100:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o),i=e("../shape_icon"),l=s(i),u=e("../../modules/shape_icon_values"),d=e("lodash"),c=s(d),f=e("classnames"),p=s(f),m="u-defaultType u-noTopMargin u-noBottomMargin siteAnnouncement__simpleHeader";r["default"]=a["default"].createClass({displayName:"SimpleSiteAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired,announcementText:React.PropTypes.string.isRequired,targetUrl:React.PropTypes.string},getAriaLabel:function(){return"Read more "+this.props.announcementText},hasTargetUrl:function(){return!c["default"].isEmpty(this.props.targetUrl)},renderIcon:function(){return n(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Site Announcement",border:!0})},renderAnnouncementText:function(){var e=this.hasTargetUrl(),t="siteAnnouncement__simpleText";return e?n("a",{className:(0,p["default"])(t,"gr-hyperlink"),"aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,this.props.announcementText):n("span",{className:t},void 0,this.props.announcementText)},renderSecondaryLinkSection:function(){return this.hasTargetUrl()?n("span",{className:"siteAnnouncement__simpleSecondaryLinkSection"},void 0,n("a",{className:"gr-button gr-button--quiet","aria-label":this.getAriaLabel(),href:this.props.targetUrl},void 0,"Read more")):null},render:function(){return n("div",{className:"siteAnnouncement\n                      siteAnnouncement--simple\n                      gr-mediaFlexbox\n                      gr-mediaFlexbox--alignItemsCenter"},void 0,n("div",{className:"gr-mediaFlexbox__media"},void 0,this.renderIcon()),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__simpleBody"},void 0,n("h5",{className:m},void 0,"Goodreads News"),this.renderAnnouncementText()),this.renderSecondaryLinkSection())}})},{"../../modules/shape_icon_values":14,"../gr_component_factory":63,"../shape_icon":95,classnames:"classnames",lodash:"lodash"}],101:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=e("../gr_component_factory"),i=s(a),l=e("./simple_site_announcement"),u=s(l);r["default"]=i["default"].createClass({displayName:"SiteAnnouncement",propTypes:{title:o.PropTypes.string.isRequired,targetUrl:o.PropTypes.string,displayData:o.PropTypes.shape({description:o.PropTypes.string,mastheadUrl:o.PropTypes.string,imageUrl:o.PropTypes.string}).isRequired},shouldRenderLargeAnnouncement:function(){var e=this.props.displayData;return e&&e.description&&e.mastheadUrl},renderLargeAnnouncement:function(){return n("div",{className:"siteAnnouncement gr-mediaFlexbox gr-mediaFlexbox--columnDirection"},void 0,n("a",{className:"gr-mediaFlexbox__media siteAnnouncement__masthead",href:this.props.targetUrl,"aria-label":this.props.title},void 0,n("img",{src:this.props.displayData.mastheadUrl,alt:this.props.title})),n("div",{className:"gr-mediaFlexbox__desc siteAnnouncement__body"},void 0,n("a",{className:"siteAnnouncement__title gr-hyperlink",href:this.props.targetUrl},void 0,this.props.title),n("div",{className:"siteAnnouncement__description"},void 0,this.props.displayData.description)))},render:function(){return this.shouldRenderLargeAnnouncement()?this.renderLargeAnnouncement():n(u["default"],{imageUrl:this.props.displayData.imageUrl,announcementText:this.props.title,targetUrl:this.props.targetUrl})}})},{"../gr_component_factory":63,"./simple_site_announcement":100,react:"react"}],102:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o),i=e("../shape_icon"),l=s(i),u=e("../../modules/shape_icon_values");r["default"]=a["default"].createClass({displayName:"WelcomeAnnouncement",propTypes:{imageUrl:React.PropTypes.string.isRequired},renderIcon:function(){return n(l["default"],{imageUrl:this.props.imageUrl,size:u.ICON_SIZES.MEDIUM,imageAlt:"Welcome to Goodreads",border:!0})},render:function(){return n("div",{className:"siteAnnouncement siteAnnouncement--welcome"},void 0,n("div",{className:"siteAnnouncement__welcomeIcon"},void 0,this.renderIcon()),n("div",{className:"siteAnnouncement__welcomeBody"},void 0,n("h5",{className:"siteAnnouncement__announcementText"},void 0,"Welcome to Goodreads"),n("span",{},void 0,"Meet your favorite book, find your reading community, and manage your reading life.")))}})},{"../../modules/shape_icon_values":14,"../gr_component_factory":63,"../shape_icon":95}],103:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("./gr_component_factory"),a=s(o),i=e("classnames"),l=s(i);r["default"]=a["default"].createClass({displayName:"Spinner",propTypes:{isSmall:React.PropTypes.bool},getDefaultProps:function(){return{isSmall:!1}},render:function(){var e=(0,l["default"])("spinnerContainer",this.props.className),t=this.props.isSmall?"small":null;return n("div",{className:e},void 0,n("div",{className:this.withBemModifiers("spinner",t)},void 0,n("div",{className:this.withBemModifiers("spinner__mask",t)},void 0,n("div",{className:this.withBemModifiers("spinner__maskedCircle",t)},void 0))),n("div",{className:"spinnerFallbackText"},void 0,"Loading…"))}})},{"./gr_component_factory":63,classnames:"classnames"}],104:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),o=s(n),a=e("./gr_component_factory"),i=s(a),l=e("../react_actions/tab_actions"),u=s(l),d={CLICK:"click",HOVER:"hover"};r["default"]=i["default"].createClass({displayName:"Tab",propTypes:{group:o["default"].PropTypes.string.isRequired,name:o["default"].PropTypes.string.isRequired,initiallySelected:o["default"].PropTypes.bool,triggerEventType:o["default"].PropTypes.string},getDefaultProps:function(){return{initiallySelected:!1,triggerEventType:d.CLICK}},componentDidMount:function(){this.props.initiallySelected&&this.selectTab()},selectTab:function(){u["default"].selectTab(this.props.name,this.props.group)},render:function(){var e={};switch(this.props.triggerEventType){case d.CLICK:e.onClick=this.selectTab;break;case d.HOVER:e.onMouseOver=this.selectTab}return o["default"].createElement("span",e,this.props.children)}})},{"../react_actions/tab_actions":33,"./gr_component_factory":63,react:"react"}],105:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("./gr_component_factory"),l=s(i),u=e("reflux"),d=s(u),c=e("../react_stores/tabs_store"),f=s(c);r["default"]=l["default"].createClass({displayName:"TabContent",mixins:[d["default"].connect(f["default"])],propTypes:{group:a["default"].PropTypes.string.isRequired,name:a["default"].PropTypes.string.isRequired},isActive:function(){return this.props.name===this.state[this.props.group]},render:function(){return n("div",{},void 0,this.isActive()?this.props.children:null)}})},{"../react_stores/tabs_store":143,"./gr_component_factory":63,react:"react",reflux:"reflux"}],106:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../shared/gr_prop_types"),d=s(u),c=e("moment"),f=s(c),p=e("../../modules/date_utils");r["default"]=l["default"].createClass({displayName:"RelativeTime",propTypes:{time:d["default"].date.isRequired,longFormat:a["default"].PropTypes.bool},getDefaultProps:function(){return{longFormat:!1}},getRelativeTime:function(){return this.props.longFormat?(0,f["default"])(new Date(this.props.time)).fromNow():(0,p.fromNow)(this.props.time)},render:function(){return n("time",{dateTime:this.props.time,"aria-label":(0,f["default"])(new Date(this.props.time)).fromNow()},void 0,this.getRelativeTime())}})},{"../../modules/date_utils":9,"../gr_component_factory":63,"../shared/gr_prop_types":96,moment:"moment",react:"react"}],107:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e};Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../shape_icon"),d=s(u),c=e("../../modules/shape_icon_values");r["default"]=l["default"].createClass({displayName:"UserIcon",propTypes:{user:a["default"].PropTypes.shape({viewableName:a["default"].PropTypes.string.isRequired,profileImage:a["default"].PropTypes.string.isRequired,profileUrl:a["default"].PropTypes.string}).isRequired,includeLink:a["default"].PropTypes.bool,size:a["default"].PropTypes.oneOf([c.ICON_SIZES.SMALL,c.ICON_SIZES.MEDIUM,c.ICON_SIZES.LARGE])},getDefaultProps:function(){return{includeLink:!0,size:c.ICON_SIZES.SMALL}},render:function(){var e=this.props.user;return a["default"].createElement(d["default"],n({imageUrl:e.profileImage,imageAlt:e.viewableName,linkUrl:e.profileUrl},this.props))}})},{"../../modules/shape_icon_values":14,"../gr_component_factory":63,"../shape_icon":95,react:"react"}],108:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("classnames"),l=s(i),u=e("../gr_component_factory"),d=s(u),c=e("../shared/gr_prop_types"),f=s(c),p=e("../click_tracking_wrapper"),m=s(p),_=e("../../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserProfileLink",propTypes:{user:f["default"].user().isRequired,className:a["default"].PropTypes.string},render:function(){var e=(0,l["default"])("gr-hyperlink","gr-hyperlink--bold","gr-user__profileLink",this.props.className),t=n("a",{className:e,href:this.props.user.profileUrl},void 0,this.props.user.viewableName);return this.props.user.profileUrl?n(m["default"],{children:t,trackingOptions:_.TRACKED_CLASSES.user_profile}):n("b",{},void 0,this.props.user.viewableName)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":47,"../gr_component_factory":63,"../shared/gr_prop_types":96,classnames:"classnames",react:"react"}],109:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("lodash"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../shared/gr_prop_types"),d=s(u),c=e("../shared/gr_spoiler_handler"),f=s(c),p=e("classnames"),m=s(p);r["default"]=l["default"].createClass({displayName:"ExpandableHtml",propTypes:d["default"].expandableHtml(),getInitialState:function(){return{expanded:!1}},collapse:function(){this.setState({expanded:!1})},expand:function(){this.setState({expanded:!0})},expandable:function(){return!a["default"].isEmpty(this.props.truncatedHtml)},visibleHtml:function(){return this.expandable()&&this.state.expanded!==!0?this.props.truncatedHtml:this.props.html},renderToggleButton:function(){if(!this.expandable())return null;var e=this.state.expanded?this.collapse:this.expand,t=this.state.expanded?"Less":"More",r=(0,m["default"])("gr-buttonAsLink","u-marginLeftTiny");return n("button",{className:r,onClick:e},void 0,t)},componentDidMount:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},componentDidUpdate:function(){this.refs.rootNode&&f["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){if(a["default"].isEmpty(this.props.html))return null;var e=(0,m["default"])("expandableHtml",this.props.className);return React.createElement("div",{className:e,ref:"rootNode"},n("span",{dangerouslySetInnerHTML:{__html:this.visibleHtml()}}),this.renderToggleButton())}})},{"../gr_component_factory":63,"../shared/gr_prop_types":96,"../shared/gr_spoiler_handler":97,classnames:"classnames",lodash:"lodash"}],110:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o);r["default"]=a["default"].createClass({displayName:"HiddenHtml",propTypes:{unhideText:React.PropTypes.string},getDefaultProps:function(){return{unhideText:"unhide"}},getInitialState:function(){return{expanded:!1}},expand:function(){this.setState({expanded:!0})},renderUnhideButton:function(){return n("button",{className:"gr-buttonAsLink",onClick:this.expand},void 0,this.props.unhideText)},renderContent:function(){return this.state.expanded?this.props.children:n("span",{},void 0,this.renderUnhideButton())},render:function(){return n("div",{},void 0,this.renderContent())}})},{"../gr_component_factory":63}],111:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i);r["default"]=l["default"].createClass({displayName:"Spoiler",propTypes:{html:a["default"].PropTypes.string,spoilerWarning:a["default"].PropTypes.oneOfType([a["default"].PropTypes.string,a["default"].PropTypes.element])},componentWillMount:function(){if(null===this.props.html&&null===this.props.children)throw new Error("props.children and props.html cannot both be null")},getDefaultProps:function(){return{html:null,spoilerWarning:null}},getInitialState:function(){return{showSpoiler:!1}},onClickShowSpoiler:function(){this.setState({showSpoiler:!0})},onClickHideSpoiler:function(){this.setState({showSpoiler:!1})},getSpoilerHtml:function(){return{__html:this.props.html}},renderSpoiler:function(){return this.props.html?n("span",{className:"spoiler__text u-marginRightTiny",dangerouslySetInnerHTML:this.getSpoilerHtml()}):this.props.children},render:function(){return n("span",{},void 0,this.state.showSpoiler?n("span",{className:"spoiler__textContainer"},void 0,this.renderSpoiler(),n("button",{className:"gr-buttonAsLink",onClick:this.onClickHideSpoiler},void 0,"(hide spoiler)")):n("span",{},void 0,this.props.spoilerWarning,n("button",{className:"gr-buttonAsLink",onClick:this.onClickShowSpoiler},void 0,"(view spoiler)")))}})},{"../gr_component_factory":63,react:"react"}],112:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("../gr_component_factory"),a=s(o),i=e("../shared/gr_prop_types"),l=s(i),u=e("../shared/gr_spoiler_handler"),d=s(u),c=e("../click_tracking_wrapper"),f=s(c),p=e("../../modules/ads/click_tracking_helper");r["default"]=a["default"].createClass({displayName:"TruncatedHtml",propTypes:l["default"].truncatedHtml(),getDefaultProps:function(){return{fullContentText:"More",bookDescriptionTargetingData:p.TRACKED_CLASSES.full_content_link}},componentDidMount:function(){d["default"].replaceSpoilerHTMLWithReactComponents(this.refs.rootNode)},render:function(){var e=n("a",{className:"u-marginLeftTiny fullContentLink",href:this.props.fullContentUrl},void 0,this.props.fullContentText);return React.createElement("div",{ref:"rootNode",className:this.props.className},n("span",{dangerouslySetInnerHTML:{__html:this.props.html}}),this.props.truncated?n(f["default"],{children:e,trackingOptions:this.props.bookDescriptionTargetingData}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../click_tracking_wrapper":47,"../gr_component_factory":63,"../shared/gr_prop_types":96,"../shared/gr_spoiler_handler":97}],113:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("lodash"),l=s(i),u=e("./gr_component_factory"),d=s(u),c=e("classnames"),f=s(c),p=e("../react_actions/shelvings_actions"),m=s(p),_=e("../react_stores/shelvings_store"),h=s(_),g=e("./click_tracking_wrapper"),v=s(g),y=e("../react_mixins/gr_reflux"),b=e("../modules/ads/click_tracking_helper");r["default"]=d["default"].createClass({displayName:"UserRating",mixins:[(0,y.connectToLazyStore)(h["default"],"bookId")],propTypes:{bookId:a["default"].PropTypes.string,bookTitle:a["default"].PropTypes.string,starsTrackingOptions:a["default"].PropTypes.object},getDefaultProps:function(){return{starsTrackingOptions:b.TRACKED_CLASSES.user_rating_star}},setHoverRating:function(e){this.setState({hoverRating:e})},removeHoverRating:function(){this.setState({hoverRating:null})},isShelved:function(){return null!==this.state.exclusiveShelfName},updateRating:function(e,t){t.preventDefault(),this.isShelved()?m["default"].rateBook(this.state.book.bookId,e,this.state.book.title):m["default"].rateBook(this.props.bookId,e,this.props.bookTitle),this.refs.ratingContainer.focus()},starLabel:function k(e){var k=void 0;return k=null!==this.state.exclusiveShelfName&&this.state.rating>0?"Change rating from "+this.state.rating+" to "+e+" ":"Rate "+e+" ",k+=1==e?"star":"stars"},renderStar:function(e){var t=e+1,r=null!==this.state.exclusiveShelfName?this.state.rating:0,s=this.state.hoverRating?this.state.hoverRating:r,o=(0,f["default"])({userRating__star:!0,"userRating__star--selected":s>=t}),a=n("button",{className:o,title:this.starLabel(t),onClick:this.updateRating.bind(this,t),onMouseEnter:this.setHoverRating.bind(this,t)},void 0);return n(v["default"],{children:a,trackingOptions:this.props.starsTrackingOptions},t)},renderTextLabel:function(){return n("small",{className:"userRating__label"},void 0,null!==this.state.exclusiveShelfName&&this.state.rating>0?"My rating:":"Rate it:")},render:function(){return n("div",{className:"userRating"},void 0,this.renderTextLabel(),a["default"].createElement("div",{className:"userRating__starsWrapper",tabIndex:"0",ref:"ratingContainer",role:"group",onMouseLeave:this.removeHoverRating},l["default"].times(5,function(e){return this.renderStar(e)},this)))}})},{"../modules/ads/click_tracking_helper":3,"../react_actions/shelvings_actions":32,"../react_mixins/gr_reflux":126,"../react_stores/shelvings_store":142,"./click_tracking_wrapper":47,"./gr_component_factory":63,classnames:"classnames",lodash:"lodash",react:"react"}],114:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("reflux"),d=s(u),c=e("../../react_mixins/gr_reflux"),f=e("../../modules/ads/click_tracking_helper"),p=e("classnames"),m=s(p),_=e("../../react_stores/shelvings_store"),h=s(_),g=e("../../react_stores/user_shelves_store"),v=s(g),y=e("../../react_stores/user_agent_capabilities_store"),b=s(y),k=e("../../react_actions/shelvings_actions"),S=s(k),T=e("../dropdown"),P=s(T),N=e("../want_to_read/want_to_read_menu"),w=s(N),x=e("../user_rating"),C=s(x),A="Saving…";r["default"]=l["default"].createClass({displayName:"WantToReadButton",propTypes:{bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,showStars:a["default"].PropTypes.bool,showMenu:a["default"].PropTypes.bool,origin:a["default"].PropTypes.string,trackingOptions:a["default"].PropTypes.object,starsTrackingOptions:a["default"].PropTypes.object},mixins:[(0,c.connectToLazyStore)(h["default"],"bookId",{stateKey:"shelvings"}),d["default"].connect(v["default"],"userShelves"),d["default"].connect(b["default"],"userAgentCapabilities")],getDefaultProps:function(){return{showStars:!1,showMenu:!0,trackingOptions:f.TRACKED_CLASSES.want_to_read_button}},shelveBook:function(){S["default"].shelveBook(this.props.bookId,v["default"].defaultShelves().WANT_TO_READ,this.props.origin)},unshelveBook:function(){window.confirm("Removing a book deletes your rating, review, etc. Remove this book from all your shelves?")&&S["default"].unshelveBook(this.state.shelvings.book.bookId)},focusButton:function(e){e&&this.restoreFocusOnUpdate&&!this.state.isShelvingInProgress&&(this.forgetFocus(),e.focus())},rememberFocus:function(){this.restoreFocusOnUpdate=!0},forgetFocus:function(){this.restoreFocusOnUpdate=!1},checkmarkClass:function(){var e="wantToReadButton__checkIcon--",t=v["default"].defaultShelves(),r=(0,m["default"])({toRead:this.state.shelvings.exclusiveShelfName==t.WANT_TO_READ.name,currentlyReading:this.state.shelvings.exclusiveShelfName==t.CURRENTLY_READING.name,read:this.state.shelvings.exclusiveShelfName==t.READ.name,other:!this.unshelved()});return e+r},unshelved:function(){return null===this.state.shelvings.exclusiveShelfName},renderWantToReadLeftUnshelved:function(){var e=this.state.shelvings.isShelvingInProgress?A:"Want to Read",t=(0,m["default"])("wantToReadButton__leftUnshelvedButton",{"wantToReadButton__leftUnshelvedButton--noOutline":this.state.shelvings.isShelvingInProgress}),r="Add "+this.props.bookTitle+" to your want to read shelf";return a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,className:t,onClick:this.shelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus},e)},renderWantToReadLeftShelved:function(){var e=(0,m["default"])("wantToReadButton__leftShelvedButton"),t=(0,
m["default"])({wantToReadButton__checkIcon:!this.state.shelvings.isShelvingInProgress},this.checkmarkClass()),r="Remove "+this.state.shelvings.book.title+" from my shelves",s=this.state.shelvings.isShelvingInProgress?A:this.state.shelvings.exclusiveShelfDisplayName;return this.state.userAgentCapabilities.touch?a["default"].createElement("button",{"aria-label":r,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,ref:this.focusButton,className:e},n("span",{className:t+" u-inlineBlock"}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,s)):n("span",{},void 0,a["default"].createElement("button",{"aria-label":r,ref:this.focusButton,onClick:this.unshelveBook,onFocus:this.rememberFocus,onBlur:this.forgetFocus,className:e+" "+t}),n("div",{className:"wantToReadButton__shelvedButtonText"},void 0,s))},renderWantToReadRight:function(){var e=this.unshelved()?this.props.bookId:this.state.shelvings.book.bookId,t=this.unshelved()?this.props.bookTitle:this.state.shelvings.book.title;return this.props.showMenu?n(P["default"],{trigger:this.renderWantToReadRightButtonContents(),triggerEventType:P["default"].TriggerEventTypes.HOVER,bemModifiers:"wantToReadMenu"},void 0,n(w["default"],{uniqueId:this.props.uniqueId,bookId:e,bookTitle:t,userShelves:this.state.userShelves,shelvings:this.state.shelvings})):null},renderWantToReadRightButtonContents:function(){return n("div",{className:"wantToReadButton__right"},void 0,n("span",{className:"u-visuallyHidden"},void 0,"Shelving menu"))},render:function(){var e="",t=(0,m["default"])("wantToReadButton__left",{"wantToReadButton__left--standalone":!this.props.showMenu},{wantToReadButton__leftUnshelved:this.unshelved()},{wantToReadButton__leftShelved:!this.unshelved()});return e=this.unshelved()?this.renderWantToReadLeftUnshelved():this.renderWantToReadLeftShelved(),n("div",{},void 0,n("div",{className:"wantToReadButton"},void 0,n("div",{className:t},void 0,e),this.renderWantToReadRight()),this.props.showStars?n(C["default"],{bookId:this.props.bookId,starsTrackingOptions:this.props.starsTrackingOptions}):null)}})},{"../../modules/ads/click_tracking_helper":3,"../../react_actions/shelvings_actions":32,"../../react_mixins/gr_reflux":126,"../../react_stores/shelvings_store":142,"../../react_stores/user_agent_capabilities_store":144,"../../react_stores/user_shelves_store":145,"../dropdown":56,"../gr_component_factory":63,"../user_rating":113,"../want_to_read/want_to_read_menu":115,classnames:"classnames",react:"react",reflux:"reflux"}],115:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var a=e("lodash"),i=s(a),l=e("../gr_component_factory"),u=s(l),d=e("../../react_mixins/gr_reflux"),c=e("../../react_stores/want_to_read_menu_store"),f=s(c),p=e("./want_to_read_menu_filter"),m=s(p),_=e("../../react_actions/shelvings_actions"),h=s(_),g=e("./want_to_read_menu_shelf_creator"),v=s(g),y=7;r["default"]=u["default"].createClass({displayName:"WantToReadMenu",mixins:[(0,d.connectToLazyStore)(f["default"],"uniqueId")],propTypes:{bookId:React.PropTypes.string.isRequired,bookTitle:React.PropTypes.string.isRequired,uniqueId:React.PropTypes.string.isRequired,userShelves:React.PropTypes.object.isRequired,shelvings:React.PropTypes.object.isRequired},shelveBook:function(e){h["default"].shelveBook(this.props.bookId,e)},toggleNonExclusiveShelving:function(e){h["default"].toggleNonExclusiveShelving(this.props.bookId,e,!1,this.props.bookTitle)},renderFilter:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves),t=e.length>=y;return t?o(m["default"],{bookId:this.props.bookId,uniqueId:this.props.uniqueId,shelvings:this.props.shelvings,wantToReadMenu:this.state}):void 0},renderEmptyMessage:function(){var e=this.state.displayableExclusiveShelves,t=this.state.displayableNonExclusiveShelves,r=t.concat(e).length;return 0===r?o("li",{className:"wantToReadMenu__genericItem"},void 0,"No Matching Shelves"):void 0},renderExclusiveShelves:function(){var e=this,t=this.state.displayableExclusiveShelves;return null!==this.props.shelvings.exclusiveShelfName&&(t=i["default"].reject(t,function(t){return t.name===e.props.shelvings.exclusiveShelfName})),i["default"].map(t,function(t){var r=t.displayName,s="Shelve "+e.props.bookTitle+" as "+r;return o("li",{className:"wantToReadMenu__shelfItem"},r,o("button",{className:"wantToReadMenu__exclusiveShelf","aria-label":s,onClick:function(){e.shelveBook(t)}},void 0,r))})},renderNonExclusiveShelves:function(){var e=this,t=this.state.displayableNonExclusiveShelves;return i["default"].map(t,function(t){var r=!1;null!==e.props.shelvings.exclusiveShelfName&&i["default"].includes(e.props.shelvings.nonExclusiveShelfNames,t.name)&&(r=!0);var s=t.displayName,n="Shelve "+e.props.bookTitle+" as "+s;return o("li",{className:"wantToReadMenu__shelfItem"},s,o("label",{className:"wantToReadMenu__nonExclusiveShelf"},void 0,o("input",{className:"wantToReadMenu__shelfCheckbox",checked:r,type:"checkbox",name:"shelf["+t.name+"]","aria-label":n,onChange:function(){e.toggleNonExclusiveShelving(t)}}),s))})},renderAddNewShelfButton:function(){var e=this.props.userShelves.customExclusiveShelves.concat(this.props.userShelves.nonExclusiveShelves).concat(this.props.userShelves.defaultShelves),t=i["default"].map(e,function(e){return e.name}),r=!i["default"].includes(t,this.state.shelfNameFilter);return o("li",{className:"wantToReadMenu__newShelfButtonContainer"},void 0,React.createElement(v["default"],n({shelfNameFilter:this.state.shelfNameFilter,userCanAddShelf:r,uniqueId:this.props.uniqueId,bookId:this.props.bookId,bookTitle:this.props.bookTitle},this.state)))},render:function(){return o("div",{},void 0,o("div",{className:"wantToReadMenu__scrollableContainer"},void 0,this.renderFilter(),this.renderEmptyMessage(),this.renderExclusiveShelves(),this.renderNonExclusiveShelves()),this.renderAddNewShelfButton())}})},{"../../react_actions/shelvings_actions":32,"../../react_mixins/gr_reflux":126,"../../react_stores/want_to_read_menu_store":146,"../gr_component_factory":63,"./want_to_read_menu_filter":116,"./want_to_read_menu_shelf_creator":117,lodash:"lodash"}],116:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_actions/want_to_read_menu_actions"),d=s(u);r["default"]=l["default"].createClass({displayName:"WantToReadMenuFilter",propTypes:{bookId:a["default"].PropTypes.string.isRequired,uniqueId:a["default"].PropTypes.string.isRequired,shelvings:a["default"].PropTypes.object.isRequired,wantToReadMenu:a["default"].PropTypes.object.isRequired},handleKeyPress:function(e){var t=null;null!==this.props.shelvings.exclusiveShelfName&&(t=this.props.shelvings.exclusiveShelfName),d["default"].updateShelfNameFilter(e.target.value,this.props.uniqueId,t)},render:function(){return n("form",{className:"wantToReadMenuFilter"},void 0,n("input",{className:"gr-textInput\n                               gr-textInput--small\n                               gr-textInput--fullWidth\n                               wantToReadMenuFilter--textInput",type:"text",placeholder:"Filter Shelves","aria-label":"Filter Shelf Names",value:this.props.wantToReadMenu.shelfNameFilter,onChange:this.handleKeyPress}))}})},{"../../react_actions/want_to_read_menu_actions":36,"../gr_component_factory":63,react:"react"}],117:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var n=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,r,s,n){var o=t&&t.defaultProps,a=arguments.length-3;if(r||0===a||(r={}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=Array(a),u=0;a>u;u++)l[u]=arguments[u+3];r.children=l}return{$$typeof:e,type:t,key:void 0===s?null:""+s,ref:null,props:r,_owner:null}}}();Object.defineProperty(r,"__esModule",{value:!0});var o=e("react"),a=s(o),i=e("../gr_component_factory"),l=s(i),u=e("../../react_actions/want_to_read_menu_actions"),d=s(u),c=e("../../react_actions/shelvings_actions"),f=s(c),p=e("../facebook/timeline_publish_toggle"),m=s(p),_=e("lodash"),h=s(_);r["default"]=l["default"].createClass({displayName:"WantToReadMenuShelfCreator",propTypes:{userCanAddShelf:a["default"].PropTypes.bool.isRequired,shelfNameFilter:a["default"].PropTypes.string,uniqueId:a["default"].PropTypes.string.isRequired,bookId:a["default"].PropTypes.string.isRequired,bookTitle:a["default"].PropTypes.string.isRequired},getInitialState:function(){return{unsavedShelfName:""}},openAddShelfTextbox:function(){d["default"].openAddShelfTextbox(this.props.uniqueId)},checkIfCommentIsEmpty:function(e){this.setState({unsavedShelfName:e.target.value})},shelveAsNewShelfName:function(e,t){t.preventDefault(),d["default"].updateShelfNameFilter("",this.props.uniqueId),f["default"].toggleNonExclusiveShelving(this.props.bookId,{name:e},!0,this.props.bookTitle)},render:function(){var e=this;return""!==this.props.shelfNameFilter&&this.props.userCanAddShelf?n("span",{className:"wantToReadShelfCreator"},void 0,n("button",{className:"wantToReadShelfCreator__addNamedShelfButton","aria-label":"Add new "+this.props.shelfNameFilter+" shelf",onClick:function(t){e.shelveAsNewShelfName(e.props.shelfNameFilter,t)}},void 0,"Add new “",n("span",{className:"wantToReadShelfCreator__addShelfButtonShelfName"},void 0,this.props.shelfNameFilter),"” shelf")):this.props.showAddShelfTextbox?n("form",{className:"wantToReadShelfCreator",onSubmit:function(t){e.shelveAsNewShelfName(e.state.unsavedShelfName,t)}},void 0,n("input",{className:"gr-textInput\n                                  gr-textInput--small\n                                  wantToReadShelfCreator__textInput",type:"text",placeholder:"New Shelf Name","aria-label":"Add new shelf name",onChange:this.checkIfCommentIsEmpty}),n("input",{type:"submit",className:"gr-button\n                                  gr-button--small\n                                  wantToReadShelfCreator__addShelfButton",disabled:h["default"].isEmpty(h["default"].trim(this.state.unsavedShelfName)),value:"Add"})):this.props.userCanAddShelf?n("span",{className:"wantToReadShelfCreator"},void 0,n("button",{className:"wantToReadShelfCreator__showAddShelfTextboxButton","aria-label":"Add new shelf",onClick:this.openAddShelfTextbox},void 0,"Add New Shelf"),n(m["default"],{cogAction:m["default"].COG_ACTIONS.READ,bemModifiers:"wtrMenu"})):null}})},{"../../react_actions/shelvings_actions":32,"../../react_actions/want_to_read_menu_actions":36,"../facebook/timeline_publish_toggle":58,"../gr_component_factory":63,lodash:"lodash",react:"react"}],118:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ConversationsStores=r.ConversationsComponents=void 0;var n=e("../../react_stores/like_store"),o=s(n),a=e("../../react_stores/comments_store"),i=s(a),l=e("../../react_components/comment/comment_form"),u=s(l),d=e("../../react_components/comment/comments"),c=s(d),f=e("../../react_components/like/like_button"),p=s(f),m=e("../../react_components/like/like_information"),_=s(m);r.ConversationsComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:_["default"]},r.ConversationsStores={CommentsStore:i["default"],LikeStore:o["default"]}},{"../../react_components/comment/comment_form":50,"../../react_components/comment/comments":51,"../../react_components/like/like_button":83,"../../react_components/like/like_information":85,"../../react_stores/comments_store":130,"../../react_stores/like_store":138}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ExperimentStores=r.ExperimentComponents=void 0;var s=e("./conversations"),n=e("./old_homepage"),o=e("./review_show"),a=e("lodash");r.ExperimentComponents=(0,a.merge)({},s.ConversationsComponents,n.OldHomepageComponents,o.ReviewShowComponents),r.ExperimentStores=(0,a.merge)({},s.ConversationsStores,n.OldHomepageStores,o.ReviewShowStores)},{"./conversations":118,"./old_homepage":120,"./review_show":121,lodash:"lodash"}],120:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.OldHomepageStores=r.OldHomepageComponents=void 0;var n=e("../../react_stores/like_store"),o=s(n),a=e("../../react_stores/comments_store"),i=s(a),l=e("../../react_components/comment/comment_form"),u=s(l),d=e("../../react_components/comment/comments"),c=s(d),f=e("../../react_components/like/like_button"),p=s(f),m=e("../../react_components/like/like_information"),_=s(m),h=e("../../react_components/like/like_simple_footer"),g=s(h);r.OldHomepageComponents={CommentForm:u["default"],Comments:c["default"],LikeButton:p["default"],LikeInformation:_["default"],LikeSimpleFooter:g["default"]},r.OldHomepageStores={CommentsStore:i["default"],LikeStore:o["default"]}},{"../../react_components/comment/comment_form":50,"../../react_components/comment/comments":51,"../../react_components/like/like_button":83,"../../react_components/like/like_information":85,"../../react_components/like/like_simple_footer":86,"../../react_stores/comments_store":130,"../../react_stores/like_store":138}],121:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ReviewShowStores=r.ReviewShowComponents=void 0;var n=e("../../react_stores/like_store"),o=s(n),a=e("../../react_components/like/like_simple_footer"),i=s(a);r.ReviewShowComponents={LikeSimpleFooter:i["default"]},r.ReviewShowStores={LikeStore:o["default"]}},{"../../react_components/like/like_simple_footer":86,"../../react_stores/like_store":138}],122:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HeaderComponents=r.HeaderStores=void 0;var n=e("../react_stores/favorite_genres_store"),o=s(n),a=e("../react_stores/notifications_store"),i=s(a),l=e("../react_stores/tabs_store"),u=s(l),d=e("../react_stores/current_user_store"),c=s(d),f=e("../react_stores/google_ads_store"),p=s(f),m=e("../react_components/flash_message"),_=s(m),h=e("../react_components/ads/google_banner_ad"),g=s(h),v=e("../react_components/header/header_store_connector"),y=s(v),b=e("../react_components/site_announcement/site_announcement"),k=s(b),S=e("../react_components/site_announcement/choice_site_announcement"),T=s(S),P=e("../react_components/site_announcement/welcome_announcement"),N=s(P);r.HeaderStores={FavoriteGenresStore:o["default"],NotificationsStore:i["default"],TabsStore:u["default"],GoogleAdsStore:p["default"],CurrentUserStore:c["default"]},r.HeaderComponents={FlashMessage:_["default"],HeaderStoreConnector:y["default"],GoogleBannerAd:g["default"],SiteAnnouncement:k["default"],ChoiceSiteAnnouncement:T["default"],WelcomeAnnouncement:N["default"]}},{"../react_components/ads/google_banner_ad":42,"../react_components/flash_message":61,"../react_components/header/header_store_connector":77,"../react_components/site_announcement/choice_site_announcement":99,"../react_components/site_announcement/site_announcement":101,"../react_components/site_announcement/welcome_announcement":102,"../react_stores/current_user_store":131,"../react_stores/favorite_genres_store":134,"../react_stores/google_ads_store":136,"../react_stores/notifications_store":140,"../react_stores/tabs_store":143}],123:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),o=s(n),a=e("lodash"),i=s(a),l=e("classnames"),u=s(l);r["default"]={propTypes:{bemModifiers:o["default"].PropTypes.oneOfType([o["default"].PropTypes.string,o["default"].PropTypes.arrayOf(o["default"].PropTypes.string)])},withBemModifiers:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(null===t&&(t=this.props.bemModifiers),!t)return e;if(i["default"].isString(t))return e+" "+e+"--"+t;if(i["default"].isArray(t)){var r=(0,u["default"])(e,i["default"].map(t,function(t){return e+"--"+t}));return r}},withBemElement:function(e,t){return this.props.bemModifiers?i["default"].isString(this.props.bemModifiers)?e+"--"+this.props.bemModifiers+"__"+t:i["default"].isArray(this.props.bemModifiers)?(0,u["default"])(i["default"].map(this.props.bemModifiers,function(r){return e+"--"+r+"__"+t})):void 0:e+"__"+t}}},{classnames:"classnames",lodash:"lodash",react:"react"}],124:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react"),o=s(n),a=e("lodash"),i=s(a);r["default"]={propTypes:{deployServices:o["default"].PropTypes.arrayOf(o["default"].PropTypes.string)},isFeatureEnabled:function(e){return i["default"].indexOf(this.deployServices(),e)>=0},deployServices:function(){if(void 0===this.props.deployServices)throw"trying to access Deploy Services from component, but component does not contain deployServices prop ("+this.constructor.displayName+")";return this.props.deployServices}}},{lodash:"lodash",react:"react"}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=function(e){return{getInitialState:function(){return this.store=e(),this.store.getInitialState()},componentWillMount:function(){this.actions=this.store.actions,this.unsubscribe=this.store.listen(this.onStoreChange)},componentWillUnmount:function(){this.unsubscribe()},onStoreChange:function(e){this.setState(e)}}}},{}],126:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=r.stateKey,o=void 0===s?null:s,a=r.filterValue,l=void 0===a?null:a;return{getInitialState:function(){var r=e.getInitialState(i["default"].get(this.props,t));return l&&(r=r[l]),i["default"].isNull(o)||(r=n({},o,r)),r},componentDidMount:function(){var r=this;u["default"].utils.extend(this,u["default"].ListenerMethods),this.listenTo(e,function(e){var s=e[i["default"].get(r.props,t)];l&&(s=s[l]),i["default"].isNull(o)||(s=n({},o,s)),r.setState(s)})},componentWillUnmount:u["default"].ListenerMixin.componentWillUnmount}}Object.defineProperty(r,"__esModule",{value:!0}),r.connectToLazyStore=o;var a=e("lodash"),i=s(a),l=e("reflux"),u=s(l)},{lodash:"lodash",reflux:"reflux"}],127:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=250;r["default"]={onEnterIntent:function(e,t){t||(t=a);try{clearTimeout(this.leaveTimeout)}catch(r){}this.hoverTimeout=o["default"].delay(e,t)},onLeaveIntent:function(e,t){t||(t=a);try{clearTimeout(this.hoverTimeout)}catch(r){}this.leaveTimeout=o["default"].delay(e,t)}}},{lodash:"lodash"}],128:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("react-dom"),o=s(n),a=e("lodash"),i=e("../modules/data_tracking/data_tracking_helper");r["default"]={componentDidMount:function(){var e=this,t=this.props.trackingOptions;t&&!function(){var r=o["default"].findDOMNode(e);r&&((0,a.each)((0,a.keys)(t),function(e){var s=t[e];(0,a.isUndefined)(s)||r.setAttribute("data-tracking-"+e,JSON.stringify(s))}),t.enableTracking===!0&&r.addEventListener("click",i.handleDataTracking))}()}}},{"../modules/data_tracking/data_tracking_helper":8,lodash:"lodash","react-dom":"react-dom"}],129:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/book_search_actions_factory"),c=s(d),f=function(){var e=new u["default"]({showLoadingSpinner:!1,showResultsContainer:!1,results:[],query:"",activeResult:null}),t=(0,c["default"])(),r=function(t){var r=e.get();r.results.reset(t)},s=i["default"].createStore({listenables:t,getInitialState:e.get,getState:e.get,actions:t,initializeWith:function(t){e.get().set("showLoadingSpinner",t.showLoadingSpinner).set("showResultsContainer",t.showResultsContainer).set("query",t.query).set("activeResult",t.activeResult).results.reset(t.results)},reset:function(){e.get().reset({})},setValue:function(t,r){var s=e.get();s.set(t,r)},onSelectSpecificResult:function(e){var t=o["default"].find(this.getState().results,function(t){return t.bookId===e});this.setValue("activeResult",t),this.trigger(this.getState())},onSetShowResultsContainer:function(e){this.setValue("showResultsContainer",e),this.trigger(this.getState())},onSelectNextResult:function(e){var t=this.getState().results,r=o["default"].indexOf(t,this.getState().activeResult);this.setValue("activeResult",t[(r+1)%e]),this.trigger(this.getState())},onSelectPreviousResult:function(e){var t=this.getState().results,r=this.getState().activeResult,s=o["default"].indexOf(t,r);0===s||null===r?this.setValue("activeResult",t[e-1]):this.setValue("activeResult",t[(s-1)%e]),this.trigger(this.getState())},onSearchResultsFound:function(e,t){r(t),this.setValue("query",e),this.setValue("showLoadingSpinner",!1),this.setValue("activeResult",null),this.setValue("showResultsContainer",!0),this.trigger(this.getState())},onSearch:function(e,r){this.setValue("showLoadingSpinner",!0),this.trigger(this.getState()),$j.ajax({url:r,data:{format:"json",q:e},success:function(r){t.searchResultsFound(e,r)}})}});return s};r["default"]=f},{"../react_actions/book_search_actions_factory":17,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],130:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../modules/gr_error_reporting"),c=s(d),f=e("../react_actions/comment_actions"),p=s(f),m=e("./shared/newsfeed_updates_mixin"),_=s(m),h={},g=new u["default"](h),v=2,y=10,b=function(){return g.get()},k=function(e){b().reset(o["default"].merge({},h,e))},S=function(e){return o["default"].has(b(),e)||b().set(e,{numComments:0,unsavedComment:"",comments:[],saveInProgress:!1,showCommentButton:!1,textareaRows:1,showPagination:!1,currentPage:1,showSeeMoreLoadingSpinner:!1}),b()[e]},T=function(e,t){S(e).set(t)};r["default"]=i["default"].createStore({listenables:p["default"],mixins:[(0,_["default"])(m.NEWSFEED_DEPENDENT_STORE_KEYS.COMMENTS)],initializeWith:function(e){k(e)},updateWith:function(e){var t=o["default"].transform(e,function(e,t,r){e[r]={numComments:t.numComments||0,unsavedComment:t.unsavedComment||"",comments:t.comments||[],showCommentButton:!1,saveInProgress:!1,textareaRows:1,deletableByCurrentUser:t.deletableByCurrentUser,blockedByCurrentUser:t.blockedByCurrentUser||!1}});b().set(t)},onTextareaFocusRequested:function(e){T(e,{textareaFocusRequested:!0}),this.notifyListeners()},onTextareaFocused:function(e){T(e,{textareaRows:v,textareaFocusRequested:!1,showCommentButton:!0}),this.notifyListeners()},onTextareaUnfocused:function(e){var t=S(e).unsavedComment;o["default"].isEmpty(o["default"].trim(t))&&T(e,{textareaRows:1}),this.notifyListeners()},onShowSeeMoreLoadingSpinner:function(e){T(e,{showSeeMoreLoadingSpinner:!0}),this.notifyListeners()},onDeleteComment:function(e,t,r){var s=this,n=S(e),a=n.numComments-1,i=o["default"].findIndex(n.comments,function(e){return e.uri===t});i>=0&&(n.set("numComments",a),n.comments.splice(i,1),n.showPagination||this.notifyListeners(),$j.post("/comment/destroy?comment_uri="+t).done(function(){n.showPagination&&(0===S(e).comments.length&&n.currentPage>1?(r.page=n.currentPage-1,p["default"].showCommentsForPage(r)):n.currentPage<Math.ceil(a/y)?(r.page=n.currentPage,p["default"].showCommentsForPage(r)):s.notifyListeners())}))},onAddNewComment:function(e){var t=this,r={body:S(e.subjectKey).unsavedComment,authorUser:e.authorUser,updatedAtMessage:"Just now"};T(e.subjectKey,{saveInProgress:!0}),this.notifyListeners(),$j.post("/comment.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,comment:{body_usertext:r.body},digest_default:!0,respect_update_feed_preference:!0}).done(function(r){var s=S(e.subjectKey),n=s.numComments+1;if(s.set({unsavedComment:"",saveInProgress:!1,numComments:n,showCommentButton:!1}),s.comments.length<y){var o=r;s.comments.push({createdAt:new Date,body:o.body,deletableByCurrentUser:o.deletableByCurrentUser,blockedByCurrentUser:o.blockedByCurrentUser,authorUser:e.authorUser,updatedAtMessage:"Just now",uri:o.uri,flagForAbuseUrl:o.flagForAbuseUrl})}else e.page=Math.ceil(n/y),p["default"].showCommentsForPage(e);t.onTextareaUnfocused(e.subjectKey)}).fail(function(t){var r=null;422===t.status?r="Sorry, your comment cannot be posted because it is too long (must be under 12000 characters). Please try again.":404===t.status?r="Sorry, this post has been deleted.":(r="Sorry, your comment cannot be posted. ",t.responseJSON&&t.responseJSON.errors&&(r+=t.responseJSON.errors.join(", "))),r&&c["default"].notifyUser(r),T(e.subjectKey,{saveInProgress:!1,showCommentButton:!1}),p["default"].textareaUnfocused(e.subjectKey)})},onShowCommentsForPage:function(e){var t=this,r=e.page>0?e.page:1;$j.get("/comment/index.json",{type:e.subject.type,id:e.subject.id,resource_uri:e.subject.uri,page:r,per_page:y,reverse:!0}).done(function(s){T(e.subjectKey,{comments:s.comments,showPagination:!0,currentPage:r,showSeeMoreLoadingSpinner:!1}),t.notifyListeners()})},onCommentEntered:function(e,t){T(e,{unsavedComment:t}),this.notifyListeners()},getState:b,getInitialState:function(e){return o["default"].isUndefined(e)?b():S(e)},getInitialStateForKey:S,reset:function(){k({})},notifyListeners:function(){this.trigger(b())}})},{"../modules/gr_error_reporting":12,"../react_actions/comment_actions":18,"./shared/newsfeed_updates_mixin":141,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],131:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(r,"__esModule",{value:!0}),r.USER_PREFERENCES=void 0;var o=e("lodash"),a=s(o),i=e("reflux"),l=s(i),u=e("freezer-js"),d=s(u),c=e("../react_actions/current_user_actions"),f=s(c),p={currentUser:{}},m=new d["default"](p),_=function(){return m.get()},h=function(e){_().reset(a["default"].merge({},p,e))};r.USER_PREFERENCES={SHOW_DISCUSSIONS_PANE_JIT:"show_discussions_pane_jit"};r["default"]=l["default"].createStore({listenables:[f["default"]],initializeWith:function(e){a["default"].each(a["default"].keys(e),function(e){if(!a["default"].has(p,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+" Expected one of "+a["default"].keys(p))}),h(e)},getState:_,getInitialState:_,onUpdatePreference:function(e,t){$j.post("/user/update_preferences",{user:n({},e,t)})},reset:function(){h({})}})},{"../react_actions/current_user_actions":19,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],132:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/facebook_actions"),c=s(d),f={isUserConnected:!1,cog:{},images:{}},p={STATUS:"status",READ:"read",TO_READ:"toRead",AUTO_ADD_FRIENDS:"autoAdd",LIKE:"like"},m=new u["default"](f),_=function(){return m.get()};r["default"]=i["default"].createStore({listenables:c["default"],getState:_,getInitialState:_,COG_ACTIONS:p,getCogValue:function(e){var t=_().cog;return t&&t[e]?1:0},getCogRead:function(){return this.getCogValue(p.READ)},getCogStatus:function(){return this.getCogValue(p.STATUS)},initializeWith:function(e){_().reset(e)},reset:function(){_().reset({})},updateWith:function(e){_().set({isUserConnected:e.isUserConnected,cog:e.cog,images:e.images})},onEnablePublishPermission:function(){var e=this;$grfb.ensurePublishPermission().done(function(){var t=o["default"].transform(_().cog,function(e,t,r){e[r]=!0});_().set("cog",t),e.trigger(_())})},onTogglePublishPermission:function(e){var t=this,r=_(),s=r.cog[e];s?(r.cog.set(e,!s),this.trigger(_())):$grfb.ensurePublishPermission().done(function(){r.cog.set("enabled",!0).set(e,!0),t.trigger(_())})}})},{"../react_actions/facebook_actions":22,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],133:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/favorite_genres_actions"),c=s(d),f=e("../react_actions/favorite_genres_form_actions"),p=s(f),m=new u["default"]({selectedGenres:[]}),_=function(){return m.get()},h=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];_().selectedGenres.reset(e)},g=i["default"].createStore({listenables:p["default"],getInitialState:_,getState:_,initializeWith:function(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];h(t)},onSubmitSelectedGenres:function(){c["default"].changeFavoriteGenres(_().selectedGenres)},onSelectFavoriteGenre:function(e){o["default"].includes(_().selectedGenres,e)||(_().selectedGenres.push(e),this.notifyListeners())},onDeselectFavoriteGenre:function(e){_().selectedGenres.shift(e),this.notifyListeners()},notifyListeners:function(){this.trigger(_())},reset:function(){h()}});r["default"]=g},{"../react_actions/favorite_genres_actions":23,"../react_actions/favorite_genres_form_actions":24,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],134:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/favorite_genres_actions"),c=s(d),f={allGenres:[],favoriteGenres:[],sponsoredGenres:[]},p=new u["default"](f),m=function(){return p.get()},_=function(e){m().reset(o["default"].merge({},f,e))},h=function(e){return o["default"].inject(m().allGenres,function(t,r){var s=r.name;return t.favorites[s]=o["default"].includes(e,s),t},{favorites:{}})};r["default"]=i["default"].createStore({listenables:[c["default"]],initializeWith:function(e){o["default"].each(o["default"].keys(e),function(e){if(!o["default"].has(f,e))throw new Error("Unexpected key passed to initializeWith. Received "+e+". Expected one of "+o["default"].keys(f))}),_(e)},updateWith:function(e){m().set(e)},getState:m,getInitialState:m,reset:function(){_()},notifyListeners:function(){
this.trigger(m())},onChangeFavoriteGenres:function(e){var t=this,r=function(){m().favoriteGenres.reset(e),t.notifyListeners()};$j.post("/user/edit_fav_genres",h(e),r)}})},{"../react_actions/favorite_genres_actions":23,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],135:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/featured_genres_actions"),c=s(d),f=e("../react_actions/shelvings_actions"),p=s(f),m=e("../react_stores/favorite_genres_store"),_=s(m),h=new u["default"]({}),g=function(){return h.get()},v=i["default"].createStore({listenables:c["default"],init:function(){_["default"].listen(function(){c["default"].requestFeaturedBooks()})},initializeWith:function(e){h.get().reset({featuredGenreBookInfo:e})},getInitialState:g,getState:g,onRequestFeaturedBooks:function(){var e=this;return o["default"].isEmpty(_["default"].getState().favoriteGenres)?void this.saveNewFeaturedBooks([]):void(g().requestedFeaturedBooksBefore||($j.get("/genres/featured_books").done(function(t){e.saveNewFeaturedBooks(t.genres),p["default"].addShelvings(t.shelvings)}).fail(function(e){c["default"].displayError(e)}),g().set("requestedFeaturedBooksBefore",!0)))},saveNewFeaturedBooks:function(e){g().set("featuredGenreBookInfo",e),this.notifyListeners()},onDisplayError:function(){g().set("errorMessage","Error loading featured books in genre."),this.notifyListeners()},notifyListeners:function(){this.trigger(g())},reset:function(){g().reset({})}});r["default"]=v},{"../react_actions/featured_genres_actions":25,"../react_actions/shelvings_actions":32,"../react_stores/favorite_genres_store":134,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],136:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ImpressionCode=void 0;var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/data_tracking/data_tracking_actions"),c=s(d),f=e("../react_actions/google_ads_actions"),p=s(f),m=e("../react_actions/newsfeed_actions"),_=s(m),h=e("../modules/ads/google_ad_helper"),g=e("./shared/newsfeed_updates_mixin"),v=s(g),y=e("../modules/env_utils"),b=s(y),k={targeting:{},ads:{},nativeAds:{},polls:{},device_type:null},S=new u["default"](k),T=r.ImpressionCode={success:"0",dfpError:"1",monolithError:"2",empty:"3"},P=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];N().reset(o["default"].merge({},k,e))},N=function(){return S.get()},w=function(e){if(!o["default"].has(N().ads,e)){if(!o["default"].has(N().nativeAds,e)){if(!o["default"].has(N().polls,e))throw new ReferenceError("No such product existing for key "+e);return N().polls[e]}return N().nativeAds[e]}return N().ads[e]},x=function(e,t){w(e).set(t)},C=function(e){return e.path.split("/",3)[2]},A=function(e){return{ad_unit:C(e),line_item_id:e.lineItemId,ad_device_type:e.adDeviceType}},R=function(e,t,r){var s=o["default"].merge(A(t),r);$j.ajax({url:e,type:"GET",data:s})},E=function(e){R(e.pmetClickTrackUrl,e,{click_type:"click"})},M=function(e){x(e,{hasCreative:!0})};r["default"]=i["default"].createStore({listenables:[p["default"],{trackClickEvent:c["default"].trackClickEvent}],mixins:[(0,v["default"])(g.NEWSFEED_DEPENDENT_STORE_KEYS.NATIVE_ADS)],initializeWith:function(e){if(P(e),b["default"].hasDom()){var t=o["default"].merge({},this.getState().ads,this.getState().nativeAds);o["default"].map(o["default"].merge({},t,this.getState().polls),function(e,t){(0,h.defineSlot)(t,e.path,e.dimensions)}),(0,h.enableServices)()}},initializeWithoutDFPIntegrationWithData:function(e){P(e)},updateWith:function(e){N().set(o["default"].merge({},N(),e))},onTrackClickEvent:function(e,t){var r=e.target,s=void 0,n=void 0,a=void 0,i=void 0,l=/news/,u=JSON.parse(t.getAttribute("data-tracking-adId"));if(u=u?u:o["default"].findKey(N().nativeAds,function(e){return e.path.match(l)}))for(;r!==t;)r.getAttribute("data-tracking-dfp")&&!s&&(s=r.getAttribute("data-tracking-dfp"),a=JSON.parse(s),a&&this.trackDfpClick(u)),r.getAttribute("data-tracking-pmet")&&!n&&(n=r.getAttribute("data-tracking-pmet"),i=JSON.parse(n),this.trackPmetClick(u,i)),r=r.parentNode},mergeWith:function(e){N().set(o["default"].merge({},N(),e))},onHasRequestedCreativeForSlot:function(e){x(e,{hasRequestedCreative:!0})},onDisplayCreativeForSlot:function(e){M(e)},onRemoveAdSlot:function(e){x(e,{hasCreative:!1,hasRequestedCreative:!0,empty:!0}),this.notifyListeners()},onTrackImpression:function(e,t){var r=w(e);R(r.pmetImpressionTrackUrl,r,{impression_output:t})},findAd:function(e){var t=o["default"].findKey(o["default"].merge({},N().ads,N().nativeAds),function(t){return t.path.match(e)}),r=t?N().ads[t]:null;return r=r?r:N().nativeAds[t],!r||r.hasRequestedCreative&&r.empty?null:{id:t,ad:r}},onAttachServedBannerAdAttributesAndTracking:function(e,t,r,s){x(e,{lineItemId:t,creative:r});var n=w(e);return r?(R(n.pmetImpressionTrackUrl,n,{impression_output:s}),void n.creative.on("click","a",function(){E(n)})):void R(n.pmetImpressionTrackUrl,n,{impression_output:T.dfpError})},onPollAnswerChanged:function(e,t){var r=this;$j.post("/poll/homepage_vote",{answer:e,id:t.creative.pollId}).done(function(e){e.showStats=!0,x(t.id,e),r.trigger(N())}),x(t.id,{answer:Number(e)}),this.trigger(N())},onPopulateHomepagePollAndTracking:function(e,t,r,s){var n=this,o=w(e);return r?(x(e,{creative:r}),$j.get("/poll/index_ajax_homepage_poll/",s).done(function(t){"answer"in t&&(t.showStats=!0),x(e,t),n.trigger(N())}),void R(o.pmetImpressionTrackUrl,o,{impression_output:T.success})):void R(o.pmetImpressionTrackUrl,o,{impression_output:T.dfpError})},onAttachServedNativeAdAttributesAndTracking:function(e,t,r,s,n,o){var a=this,i=w(e);return x(e,{lineItemId:t,url:o}),r?void $j.ajax({type:"GET",url:"/home/index_ajax_newsfeed_ad",data:{format:"json",id:s,line_item_id:t,ad_unit:"goodr.home.news.625x210",ad_device_type:"desktop",uxo:!0}}).done(function(t){t.ok?(M(e),x(e,t),_["default"].updateNativeAdSlot(w(e).id,w(e)),a.notifyListeners(N()),R(i.pmetImpressionTrackUrl,w(e),{impression_output:n})):R(i.pmetImpressionTrackUrl,w(e),{impression_output:T.monolithError})}):void R(i.pmetImpressionTrackUrl,w(e),{impression_output:T.dfpError})},trackDfpClick:function(e){var t=w(e),r=t.url,s=o["default"].merge(A(t),{click_type:"click"}),n=encodeURIComponent("?"+$j.param(s));$j.ajax({type:"GET",url:r+t.pmetClickTrackUrl+n})},trackPmetClick:function(e,t){var r=w(e),s=o["default"].merge(A(r),t);$j.ajax({type:"GET",url:r.pmetClickTrackUrl,data:s})},getInitialState:function(e){return o["default"].isUndefined(e)?N():w(e)},getInitialStateForKey:w,getState:N,reset:P,notifyListeners:function(){this.trigger(N())}})},{"../modules/ads/google_ad_helper":4,"../modules/env_utils":11,"../react_actions/data_tracking/data_tracking_actions":20,"../react_actions/google_ads_actions":26,"../react_actions/newsfeed_actions":29,"./shared/newsfeed_updates_mixin":141,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],137:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=e("reflux"),a=s(o),i=e("freezer-js"),l=s(i),u=e("../react_actions/discussions_pane_actions"),d=s(u),c={groups:[]},f=new l["default"](c),p=function(){return f.get()},m=function(e){p().reset((0,n.merge)({},c,e))};r["default"]=a["default"].createStore({listenables:[d["default"]],getState:p,getInitialState:p,onOpenPane:function(){var e=this;$j.post("/track/track_click",{feature:"NavBarDiscussionsPaneOpenedGem"}),(0,n.isEmpty)(p().groups)&&(this.trigger(p()),$j.get("/group/navbar_discussions",{format:"json"}).done(function(t){e.updateWith(t)}).fail(function(){p().set("errorMessage","There was an error loading your groups."),e.trigger(p())}))},updateWith:function(e){e.sparse?p().set("sparse",e.sparse):(0,n.each)(e.groups,function(e){var t=e.group;p().groups.push({group:{name:t.name,iconUrl:t.iconUrl,url:t.url,lastActiveAt:t.lastActiveAt,id:t.id,allUnreadPostsUrl:t.allUnreadPostsUrl},topics:e.topics})}),this.trigger(p())},reset:function(){m({})}})},{"../react_actions/discussions_pane_actions":21,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],138:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/like_actions"),c=s(d),f=e("./shared/newsfeed_updates_mixin"),p=s(f),m=e("../modules/gr_error_reporting"),_=s(m),h=e("../modules/ajax/ajax_helper"),g=new u["default"]({}),v=function(){return g.get()},y=function(e){return o["default"].has(v(),e)||v().set(e,{likeCount:0,isLiked:!1,showLoadingSpinner:!1}),v()[e]},b=function(e,t,r){v()[e].set(t,r)},k=function(e,t){return v()[e][t]},S=function(e){var t=k(e,"likeCount"),r=k(e,"isLiked");b(e,"isLiked",!r),b(e,"likeCount",k(e,"isLiked")?t+1:t-1)},T=i["default"].createStore({listenables:c["default"],mixins:[(0,p["default"])(f.NEWSFEED_DEPENDENT_STORE_KEYS.LIKES)],getState:v,getInitialState:function(e){return o["default"].isUndefined(e)?v():y(e)},getInitialStateForKey:y,reset:function(){g.get().reset({})},initializeWith:function(e){o["default"].each(o["default"].keys(e),function(t){var r=e[t];r.likedBy=r.likedBy||!1,r.likeCount=r.likeCount||0,r.showLoadingSpinner=!1,v().set(t,r)})},updateWith:function(e){this.initializeWith(e)},triggerLoadingSpinner:function(e){var t=k(e,"showLoadingSpinner");b(e,"showLoadingSpinner",!t)},onLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState()),(0,h.httpPost)("/rating",{format:"json",data:{rating:{resource_type:k(e,"resourceType"),resource_id:k(e,"resourceId"),resource_uri:k(e,"resourceUri"),rating:1}}}).done(function(r){S(e),b(e,"ratingId",r.rating_id),t.trigger(v())}).fail(function(e){var t=e.responseText;t&&_["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})},onUnLike:function(e){var t=this;this.triggerLoadingSpinner(e),this.trigger(this.getState());var r=k(e,"ratingId"),s="",n={};r?(s="/rating/"+r,n={format:"json"}):(s="/rating/",n={format:"json",resource_uri:k(e,"resourceUri")}),(0,h.httpDelete)(s,{data:n}).done(function(){S(e),t.trigger(v())}).fail(function(e){var t="Unable to unlike.";404==e.status?t+=" You may have already unliked.":e.responseText&&(t+=e.responseText),t+=" Please refresh the page and try again.",_["default"].notifyUser(t)}).always(function(){t.triggerLoadingSpinner(e),t.trigger(v())})}});r["default"]=T},{"../modules/ajax/ajax_helper":5,"../modules/gr_error_reporting":12,"../react_actions/like_actions":27,"./shared/newsfeed_updates_mixin":141,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],139:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n),a=e("freezer-js"),i=s(a),l=e("../react_actions/modal_actions"),u=s(l),d=new i["default"]({}),c=function(){return d.get()},f=o["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},onOpenModal:function(e){d.get().set("currentActiveModal",e),this.notifyListeners()},onCloseModal:function(){d.get().set("currentActiveModal",null),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/modal_actions":28,"freezer-js":"freezer-js",reflux:"reflux"}],140:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n),a=e("freezer-js"),i=s(a),l=e("../react_actions/notifications_actions"),u=s(l),d=new i["default"]({}),c=function(){return d.get()},f=o["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){this.initializeWith(e)},onLoadNotifications:function(e){d.get().set("notifications",e),d.get().set("unreadCount",0),d.get().set("unreadCountMore",!1),this.notifyListeners()},onLoadError:function(){d.get().set("errorOccurred",!0),this.notifyListeners()},onRequestNotifications:function(){d.get().hasRequestedBefore||$j.ajax({url:"/notifications/",type:"GET",success:function(e){u["default"].loadNotifications(e)},error:function(){u["default"].loadError()}}),d.get().set("hasRequestedBefore",!0)},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/notifications_actions":30,"freezer-js":"freezer-js",reflux:"reflux"}],141:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.NEWSFEED_DEPENDENT_STORE_KEYS=void 0;var n=e("../../react_actions/newsfeed_actions"),o=s(n),a=e("lodash"),i=function(e){var t={init:function(){(0,a.includes)((0,a.values)(l),e)&&this.listenTo(o["default"].newsfeedItemsLoaded,this.onNewsfeedItemsLoaded)},onNewsfeedItemsLoaded:function(t){e&&t[e]&&(this.updateWith(t[e]),this.trigger(this.getState()))}};return t};r["default"]=i;var l=r.NEWSFEED_DEPENDENT_STORE_KEYS={COMMENTS:"comments",LIKES:"likes",SHELVINGS:"shelvings",AUTHOR_FOLLOWS:"authorFollows",NATIVE_ADS:"ads"}},{"../../react_actions/newsfeed_actions":29,lodash:"lodash"}],142:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/shelvings_actions"),c=s(d),f=e("../react_actions/reading_session_actions"),p=s(f),m=e("../react_actions/user_shelves_actions"),_=s(m),h=e("../react_stores/facebook_store"),g=s(h),v=e("./shared/newsfeed_updates_mixin"),y=s(v),b=e("../modules/default_shelves"),k=e("../modules/book_origins"),S=new u["default"]({}),T={DEFAULT:"defaultShelves",CUSTOM_EXCLUSIVE:"customExclusiveShelves",NONEXCLUSIVE:"nonExclusiveShelves"},P=function(e){return e===b.DEFAULT_SHELVES.READ.name||e===b.DEFAULT_SHELVES.CURRENTLY_READING.name||e===b.DEFAULT_SHELVES.WANT_TO_READ.name?T.DEFAULT:T.CUSTOM_EXCLUSIVE},N=function(){return S.get()},w=function(e){return o["default"].has(N(),e)||N().set(e,{exclusiveShelfName:null,nonExclusiveShelfNames:null,exclusiveShelfDisplayName:null,isShelvingInProgress:!1}),N()[e]},x=function(e,t){w(e).set(t),o["default"].each(N(),function(r,s){r.book&&r.book.bookId===e&&w(s).set(t)})},C=function(e,t,r){x(e,{exclusiveShelfName:t.name,exclusiveShelfDisplayName:t.displayName}),"undefined"!=typeof r&&x(e,{book:r.book,updatedAt:Date.parse(r.updatedAt)}),t.name===b.DEFAULT_SHELVES.CURRENTLY_READING.name&&p["default"].refreshReadingSessions()},A=function(e,t,r){x(e,{exclusiveShelfName:null,exclusiveShelfDisplayName:null,rating:0,nonExclusiveShelfNames:null}),r&&_["default"].removeNonExclusiveShelf(t.name)},R=function(e){x(e,{rating:0})},E=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];U(e,r),x(e,{rating:t})},M=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?null:arguments[2],s=w(e),n=o["default"].clone(s.nonExclusiveShelfNames)||[];n.push(t.name),x(e,{nonExclusiveShelfNames:n}),U(e,r),_["default"].addNonExclusiveShelf(t.name)},L=function(e,t,r){var s=w(e),n=o["default"].clone(s.nonExclusiveShelfNames);n=o["default"].without(n,t.name),r&&_["default"].removeNonExclusiveShelf(t.name),x(e,{nonExclusiveShelfNames:n})},U=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=w(e);null===r.exclusiveShelfName&&C(e,b.DEFAULT_SHELVES.READ,t)},I=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=e;return t&&(r=o["default"].merge({},e,{book_origin:t})),r=o["default"].merge({},r,{v:2}),$j.post("/shelf/add_to_shelf.json",r)};r["default"]=i["default"].createStore({listenables:c["default"],mixins:[(0,y["default"])(v.NEWSFEED_DEPENDENT_STORE_KEYS.SHELVINGS)],getState:N,getInitialState:function(e){return o["default"].isUndefined(e)?N():w(e)},initializeWith:function(e){S.get().reset(e),this.notifyListeners()},reset:function(){S.get().reset({})},notifyListeners:function(){this.trigger(N())},updateWith:function(e){var t=o["default"].transform(e,function(e,t,r){return e[r].isShelvingInProgress=!1,e[r].updatedAt=Date.parse(t.updatedAt),e},e);this.getState().set(t),this.notifyListeners()},onShelveBook:function(e,t){var r=this,s=arguments.length<=2||void 0===arguments[2]?null:arguments[2],n=w(e).exclusiveShelfName;x(e,{isShelvingInProgress:!0});var o={book_id:e,name:t.name};t.name===b.DEFAULT_SHELVES.READ.name&&(s===k.BOOK_ORIGINS.UPDATE_READING_PROGRESS?o.explicit=g["default"].getCogStatus():o.explicit=g["default"].getCogRead()),this.notifyListeners(),I(o,s).done(function(r){if(C(e,t,r),r=r||{},r.shelves={},r.shelves[P(t.name)]=[t.name],c["default"].bookShelved(r),n){var o={};o[P(n)]=[n],c["default"].bookUnshelved({shelves:o})}s===k.BOOK_ORIGINS.CURRENTLY_READING_WIDGET&&p["default"].shelveBookSuccess()}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again.")}).always(function(){x(e,{isShelvingInProgress:!1}),r.notifyListeners()})},onUnshelveBook:function(e){var t=this;x(e,{isShelvingInProgress:!0}),this.notifyListeners(),$j.post("/review/destroy",{id:e}).done(function(){var t={};t[P(w(e).exclusiveShelfName)]=[w(e).exclusiveShelfName],t[T.NONEXCLUSIVE]=w(e).nonExclusiveShelfNames||[],c["default"].bookUnshelved({shelves:t}),A(e)}).fail(function(){window.alert("There was an error removing the book from your shelves, please try again.")}).always(function(){x(e,{isShelvingInProgress:!1}),t.notifyListeners()})},onToggleNonExclusiveShelving:function(e,t,r,s){var n=this,a=w(e).exclusiveShelfName,i=w(e).nonExclusiveShelfNames,l=!o["default"].includes(i,t.name),u=N()[e]&&null!==w(e).exclusiveShelfName,d={book:{bookId:e,title:s}};l?(U(e,d),M(e,t,d)):L(e,t,!1),this.notifyListeners();var f={book_id:e,name:t.name,a:l?"":"remove",explicit:g["default"].getCogRead()};I(f).done(function(){var e={};l?(e[T.DEFAULT]=a?[]:[b.DEFAULT_SHELVES.READ.name],e[T.NONEXCLUSIVE]=[t.name],c["default"].bookShelved({shelves:e})):(e[T.NONEXCLUSIVE]=[t.name],c["default"].bookUnshelved({shelves:e}))}).fail(function(){window.alert("There was an error adding the book to your shelf, please try again."),u?l?L(e,t,r):M(e,t,d):A(e,t,r),n.notifyListeners()})},onRateBook:function(e,t,r){var s=this,n=0,o=!1,a={book:{bookId:e,title:r}};N()[e]&&(n=w(e).rating,o=null!==w(e).exclusiveShelfName,0===n&&c["default"].rateBook.newBook()),E(e,t,a),this.notifyListeners(),$j.post("/review/rate",{format:"json",stars_click:!0,id:e,rating:t}).fail(function(){window.alert("There was an error saving your rating, please try again."),n>0?E(e,n,a):o?(R(e),c["default"].rateBook.failed()):(A(e,null,!1),c["default"].rateBook.failed()),s.notifyListeners()})},onAddShelvings:function(e){this.updateWith(e),this.notifyListeners()}})},{"../modules/book_origins":7,"../modules/default_shelves":10,"../react_actions/reading_session_actions":31,"../react_actions/shelvings_actions":32,"../react_actions/user_shelves_actions":35,"../react_stores/facebook_store":132,"./shared/newsfeed_updates_mixin":141,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],143:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n),a=e("freezer-js"),i=s(a),l=e("../react_actions/tab_actions"),u=s(l),d=new i["default"]({}),c=function(){return d.get()},f=o["default"].createStore({listenables:u["default"],getInitialState:c,getState:c,initializeWith:function(e){d.get().reset(e)},updateWith:function(e){c().set(e)},onSelectTab:function(e,t){d.get().set(t,e),this.notifyListeners()},notifyListeners:function(){this.trigger(c())},reset:function(){d.get().reset({})}});r["default"]=f},{"../react_actions/tab_actions":33,"freezer-js":"freezer-js",reflux:"reflux"}],144:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("reflux"),o=s(n),a=e("freezer-js"),i=s(a),l=e("../react_actions/user_agent_capabilities_actions"),u=s(l),d={touch:!1},c=new i["default"](d);r["default"]=o["default"].createStore({listenables:[u["default"]],initializeWith:function(e){c.get().reset(e)},reset:function(){c.get().reset(d)},getInitialState:function(){return c.get()},onUserAgentGainsTouch:function(){c.get().set("touch",!0),this.trigger(c.get())},onUserAgentLosesTouch:function(){c.get().set("touch",!1),this.trigger(c.get())}})},{"../react_actions/user_agent_capabilities_actions":34,"freezer-js":"freezer-js",reflux:"reflux"}],145:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/shelvings_actions"),c=s(d),f=e("../react_actions/user_shelves_actions"),p=s(f),m=e("../react_actions/want_to_read_menu_actions"),_=s(m),h=e("../modules/default_shelves"),g={defaultShelves:[],customExclusiveShelves:[],nonExclusiveShelves:[]},v=new u["default"](g),y=function(){return v.get()},b=function(e,t,r){var s=o["default"].find(y()[t],{name:e});s&&s.set("bookCount",s.bookCount+r)};r["default"]=i["default"].createStore({listenables:[p["default"],{bookShelved:c["default"].bookShelved,bookUnshelved:c["default"].bookUnshelved}],getInitialState:v.get,getState:y,defaultShelves:function(){var e=y().defaultShelves;return 0===e.length?h.DEFAULT_SHELVES:{READ:o["default"].find(e,"name","read"),CURRENTLY_READING:o["default"].find(e,"name","currently-reading"),WANT_TO_READ:o["default"].find(e,"name","to-read")}},initializeWith:function(e){v.get().reset(e)},reset:function(){v.get().reset(g)},updateWith:function(e){v.get().reset(e)},onAddNonExclusiveShelf:function(e){var t=o["default"].clone(v.get().nonExclusiveShelves)||[],r=o["default"].map(t,function(e){return e.name});o["default"].includes(r,e)||(t.unshift({name:e,url:"",displayName:e,bookCount:0}),v.get().set("nonExclusiveShelves",t),_["default"].updateShelves(),this.trigger(y()))},onRemoveNonExclusiveShelf:function(e){var t=o["default"].clone(v.get().nonExclusiveShelves)||[],r=o["default"].map(t,function(e){return e.name});o["default"].includes(r,e)&&(o["default"].remove(t,function(t){return t.name===e}),v.get().set("nonExclusiveShelves",t),_["default"].updateShelves(),this.trigger(y()))},onBookShelved:function(e){var t=e.shelves||{};o["default"].each(t,function(e,t){o["default"].each(e,function(e){b(e,t,1)})}),this.trigger(y())},onBookUnshelved:function(e){var t=e.shelves||{};o["default"].each(t,function(e,t){o["default"].each(e,function(e){b(e,t,-1)})}),this.trigger(y())}})},{"../modules/default_shelves":10,"../react_actions/shelvings_actions":32,"../react_actions/user_shelves_actions":35,"../react_actions/want_to_read_menu_actions":36,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}],146:[function(e,t,r){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("lodash"),o=s(n),a=e("reflux"),i=s(a),l=e("freezer-js"),u=s(l),d=e("../react_actions/want_to_read_menu_actions"),c=s(d),f=e("./user_shelves_store"),p=s(f),m={},_=new u["default"](m),h=function(){return _.get()},g=function(e,t){var r=[],s=t.defaultShelves.concat(t.customExclusiveShelves||[]);return r=o["default"].isEmpty(e)?s:o["default"].filter(s,function(t){return t.name.match(new RegExp(e,"i"))})},v=function(e,t){var r=[];return r=o["default"].isEmpty(e)?t.nonExclusiveShelves:o["default"].filter(t.nonExclusiveShelves,function(t){return t.name.match(new RegExp(e,"i"))})},y=function(e){var t=p["default"].getState(),r=g(e,t),s=v(e,t);return{displayableExclusiveShelves:r,displayableNonExclusiveShelves:s,shelfNameFilter:e}},b=function(e,t){h().set(t,y(e))},k=function(e){var t=h()[e].shelfNameFilter;h().set(e,y(t))},S=function(e){return o["default"].has(h(),e)||b("",e),h()[e]},T=function(e){h().reset(o["default"].merge({},m,e))};r["default"]=i["default"].createStore({listenables:[c["default"]],getInitialState:function(e){return o["default"].isUndefined(e)?h():S(e)},getState:h,initializeWith:function(e){T(e)},reset:function(){T(m)},updateWith:function(e){o["default"].each(o["default"].keys(e),function(t){h().set(t,e[t])}),this.notifyListeners()},notifyListeners:function(){this.trigger(h())},onUpdateShelfNameFilter:function(e,t){b(e,t),S(t).set("showAddShelfTextbox",!1),this.notifyListeners()},onOpenAddShelfTextbox:function(e){S(e).set("showAddShelfTextbox",!0),this.notifyListeners()},onUpdateShelves:function(){o["default"].each(o["default"].keys(h()),function(e){k(e)}),this.notifyListeners()}})},{"../react_actions/want_to_read_menu_actions":36,"./user_shelves_store":145,"freezer-js":"freezer-js",lodash:"lodash",reflux:"reflux"}]},{},[41]);
//# sourceMappingURL=../react_client_side/site_header-cd933f8327.js.map