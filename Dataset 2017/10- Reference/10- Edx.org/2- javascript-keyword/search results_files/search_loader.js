/*!
 * enquire.js v2.1.2 - Awesome Media Queries in JavaScript
 * Copyright (c) 2014 Nick Williams - http://wicky.nillia.ms/enquire.js
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/* Chosen v1.1.0 | (c) 2011-2013 by Harvest | MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md */

/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(e,t,i){var a=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=i(a):"function"==typeof define&&define.amd?define("enquire",[],function(){return t[e]=i(a)}):t[e]=i(a)}("enquire",this,function(e){function t(e,t){var i,a=0,s=e.length;for(a;s>a&&(i=t(e[a],a),i!==!1);a++);}function i(e){return"[object Array]"===Object.prototype.toString.apply(e)}function a(e){return"function"==typeof e}function s(e){this.options=e,!e.deferSetup&&this.setup()}function n(t,i){this.query=t,this.isUnconditional=i,this.handlers=[],this.mql=e(t);var a=this;this.listener=function(e){a.mql=e,a.assess()},this.mql.addListener(this.listener)}function r(){if(!e)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!e("only all").matches}return s.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},n.prototype={addHandler:function(e){var t=new s(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(e){var i=this.handlers;t(i,function(t,a){return t.equals(e)?(t.destroy(),!i.splice(a,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){t(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var e=this.matches()?"on":"off";t(this.handlers,function(t){t[e]()})}},r.prototype={register:function(e,s,r){var o=this.queries,l=r&&this.browserIsIncapable;return o[e]||(o[e]=new n(e,l)),a(s)&&(s={match:s}),i(s)||(s=[s]),t(s,function(t){a(t)&&(t={match:t}),o[e].addHandler(t)}),this},unregister:function(e,t){var i=this.queries[e];return i&&(t?i.removeHandler(t):(i.clear(),delete this.queries[e])),this}},new r}),function(){function e(e,t){e&&(this.el=e,this.container=t&&t.container,this.reRender=t&&t.reRender)}function t(t){t.style.display="none",e.r=t.offsetTop,t.style.display=""}function i(e,t){if(e)for(var i=t&&t.display,a=e.parentNode.children,s=h.call(a,e),n=s+1,r=a.length;r>n;n++)a[n].style.display=i}function a(e,t){var i=e.getClientRects(),a=0;return u(i,function(e){a+=s(e.height,t)}),a}function s(e,t){return Math.floor(e/t)}function n(){var e=document.createElement("test"),t={},i={Webkit:["WebkitColumnCount","WebkitColumnGap"],Moz:["MozColumnCount","MozColumnGap"],ms:["msColumnCount","msColumnGap"],"":["columnCount","columnGap"]};for(var a in i)i[a][0]in e.style&&(t.columnCount=i[a][0],t.columnGap=i[a][1],t[a.toLowerCase()]=!0);return t}function r(e){return parseInt(e[g.columnCount],10)||1}function o(e){return parseInt(e[g.columnGap],10)||0}function l(e){var t=parseInt(e.lineHeight,10);if(!t)throw Error(p[0]);return t}function c(e){return[e.offsetWidth,e.offsetHeight]}function u(e,t){for(var i=0,a=e.length;a>i&&!t(e[i]);i++);}var h=Array.prototype.indexOf,d=window.getComputedStyle,f="ellipsis-overflowing-child",m="ellipsis-set",p=["The ellipsis container must have line-height set on it"],g=n();e.prototype.calc=function(){if(!this.el)return this;var e=d(this.el),t=c(this.el);return this.columnHeight=t[1],this.columnCount=r(e),this.columnGap=o(e),this.columnWidth=t[0]/this.columnCount,this.lineHeight=l(e),this.deltaHeight=t[1]%this.lineHeight,this.linesPerColumn=Math.floor(this.columnHeight/this.lineHeight),this.totalLines=this.linesPerColumn*this.columnCount,!this.deltaHeight&&this.columnCount>1&&(this.el.style.height=this.columnHeight+"px"),this.child=this.getOverflowingChild(),this},e.prototype.set=function(){return this.el&&this.child?(this.clampChild(),i(this.child.el,{display:"none"}),this.markContainer(),this):this},e.prototype.unset=function(){return this.el&&this.child?(this.el.style.height="",this.unclampChild(this.child),i(this.child.el,{display:""}),this.unmarkContainer(),this.child=null,this):this},e.prototype.destroy=function(){return this.el=this.child=this.container=null,this},e.prototype.getOverflowingChild=function(){var e=this,t={},i=0;return u(this.el.children,function(a){var s,n,r,o=Math.floor(i/e.linesPerColumn)||0;return i+=s=e.getLineCount(a),i>=e.totalLines?(n=i-e.totalLines,r=s-n,t.el=a,t.clampedLines=r,t.clampedHeight=t.clampedLines*e.lineHeight,t.visibleColumnSpan=e.columnCount-o,t.gutterSpan=t.visibleColumnSpan-1,t.applyTopMargin=e.shouldApplyTopMargin(t),g.webkit&&t.clampedLines>1&&(t.clampedHeight+=t.gutterSpan*e.deltaHeight),t):void 0}),t},e.prototype.getLineCount=function(e){return e.offsetWidth>this.columnWidth?a(e,this.lineHeight):s(e.clientHeight,this.lineHeight)},e.prototype.markContainer=function(){this.container&&(this.container.classList.add(m),this.reRender&&t(this.container))},e.prototype.unmarkContainer=function(){this.container&&(this.container.classList.remove(m),this.reRender&&t(this.container))},e.prototype.shouldApplyTopMargin=function(e){var t=e.el;return!g.webkit||1===this.columnCount||3>=this.deltaHeight||!t.previousElementSibling?void 0:0===t.offsetTop||t.offsetTop===this.columnHeight},e.prototype.clampChild=function(){var e=this.child;e&&e.el&&(e.el.style.height=e.clampedHeight+"px",g.webkit&&(e.el.style.webkitLineClamp=e.clampedLines,e.el.style.display="-webkit-box",e.el.style.webkitBoxOrient="vertical"),this.shouldHideOverflow()&&(e.el.style.overflow="hidden"),e.applyTopMargin&&(e.el.style.marginTop="2em"),e.el.classList.add(f),g.webkit||(e.el.style.position="relative",e.helper=e.el.appendChild(this.helperElement())))},e.prototype.unclampChild=function(e){e&&e.el&&(e.el.style.display="",e.el.style.height="",e.el.style.webkitLineClamp="",e.el.style.webkitBoxOrient="",e.el.style.marginTop="",e.el.style.overflow="",e.el.classList.remove(f),e.helper&&e.helper.parentNode.removeChild(e.helper))},e.prototype.helperElement=function(){var e,t,i=document.createElement("span"),a=this.child.visibleColumnSpan-1;return i.className="ellipsis-helper",i.style.display="block",i.style.height=this.lineHeight+"px",i.style.width="5em",i.style.position="absolute",i.style.bottom=0,i.style.right=0,g.moz&&a&&(e=-(100*a),t=-(a*this.columnGap),i.style.right=e+"%",i.style.marginRight=t+"px",i.style.marginBottom=this.deltaHeight+"px"),i},e.prototype.shouldHideOverflow=function(){var e=this.columnCount>1;return this.columnHeight<this.lineHeight?!0:!e},"object"==typeof exports?(module.exports=function(t,i){return new e(t,i)},module.exports.Ellipsis=e):"function"==typeof define&&define.amd?define("ftellipsis",[],function(){return e}):window.Ellipsis=e}();var utils=function(){var e={browser:{isSupportedByChosen:function(){return/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},isIE:function(){return-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0?!0:!1}}};return{browser:{isSupportedByChosen:e.browser.isSupportedByChosen,isIE:e.browser.isIE}}}();define("utils",function(e){return function(){var t;return t||e.utils}}(this)),define("text",["module"],function(e){var t,i,a,s,n,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),h=c&&location.hostname,d=c&&(location.port||void 0),f={},m=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=r[t];try{e=new ActiveXObject(i)}catch(a){}if(e){r=[i];break}}return e},parseName:function(e){var t,i,a,s=!1,n=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==n&&(!r||n>1)?(t=e.substring(0,n),i=e.substring(n+1,e.length)):t=e,a=i||t,n=a.indexOf("!"),-1!==n&&(s="strip"===a.substring(n+1),a=a.substring(0,n),i?i=a:t=a),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,a,s){var n,r,o,l=t.xdRegExp.exec(e);return l?(n=l[2],r=l[3],r=r.split(":"),o=r[1],r=r[0],!(n&&n!==i||r&&r.toLowerCase()!==a.toLowerCase()||(o||r)&&o!==s)):!0},finishLoad:function(e,i,a,s){a=i?t.strip(a):a,m.isBuild&&(f[e]=a),s(a)},load:function(e,i,a,s){if(s&&s.isBuild&&!s.inlineText)return void a();m.isBuild=s&&s.isBuild;var n=t.parseName(e),r=n.moduleName+(n.ext?"."+n.ext:""),o=i.toUrl(r),l=m.useXhr||t.useXhr;return 0===o.indexOf("empty:")?void a():void(!c||l(o,u,h,d)?t.get(o,function(i){t.finishLoad(e,n.strip,i,a)},function(e){a.error&&a.error(e)}):i([r],function(e){t.finishLoad(n.moduleName+"."+n.ext,n.strip,e,a)}))},write:function(e,i,a){if(f.hasOwnProperty(i)){var s=t.jsEscape(f[i]);a.asModule(e+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,i,a,s,n){var r=t.parseName(i),o=r.ext?"."+r.ext:"",l=r.moduleName+o,c=a.toUrl(r.moduleName+o)+".js";t.load(l,a,function(){var i=function(e){return s(c,e)};i.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,l,i,n)},n)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,a){try{var s=i.readFileSync(e,"utf8");0===s.indexOf("ï»¿")&&(s=s.substring(1)),t(s)}catch(n){a&&a(n)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,i,a,s){var n,r=t.createXhr();if(r.open("GET",e,!0),s)for(n in s)s.hasOwnProperty(n)&&r.setRequestHeader(n.toLowerCase(),s[n]);m.onXhr&&m.onXhr(r,e),r.onreadystatechange=function(){var t,s;4===r.readyState&&(t=r.status||0,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=r,a&&a(s)):i(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,e))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,a,s="utf-8",n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),s)),l="";try{for(i=new java.lang.StringBuffer,a=o.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&i.append(a);null!==(a=o.readLine());)i.append(r),i.append(a);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),n="@mozilla.org/windows-registry-key;1"in a,t.get=function(e,t){var i,r,o,l={};n&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{i=a["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(o,1,0,!1),r=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),t(l.value)}catch(c){throw new Error((o&&o.path||"")+": "+c)}}),t}),define("text!templates/discovery-card-course.underscore",[],function(){return'<div class="discovery-card-inner-wrapper" role="group" aria-label="<%- title %>">\n    <div class="title ellipsis-multi-line" <% if ( typeof lang !== \'undefined\' ) { %> lang="<%- lang %>" <% } %>>\n      <% if ( title ) { %>\n        <h3 class="title-heading"><%= title %></h3>\n      <% } %>\n    </div>\n    <div class="label">\n        <% if ( organizations.length ) { %>\n            <span class="sr">Schools and Partners: </span><%- _.pluck(organizations, \'display_name\').join(\', \') %>\n        <% } %>\n    </div>\n    <div class="course-start-info<% if (typeof logo !== \'undefined\' && logo) {%> micromasters-start-info<% } %>">\n        <div class="availability">\n            <% if ( attributes.availability ) { %>\n                <span class="sr">Availability: </span><%- attributes.availability %>\n            <% } %>\n        </div>\n        <%\n        // Hide "Starts:" label if Self-Paced as label doesn\'t make sense\n        %>\n        <% if (attributes.start_display_date === "Self-Paced") { %>\n            <div class="date" itemprop="startDate" content="<%- gettext(\'Self-Paced\') %>"  data-timestamp="<%- attributes.start_timestamp %>">Self-Paced</div>\n        <% } else if (typeof pacing_type !== \'undefined\' && pacing_type === \'self_paced\') { %>\n            <div class="date" itemprop="startDate" content="<%- gettext(\'Self-Paced\') %>"  data-timestamp="<%- attributes.start_timestamp %>"><%- attributes.start_display_date %></div>\n        <% } else { %>\n            <div class="date" itemprop="startDate" content="<%- attributes.start_display_date %>"  data-timestamp="<%- attributes.start_timestamp %>">Starts: <%- attributes.start_display_date %></div>\n        <% } %>\n    </div>\n    <% if (typeof logo === \'string\' && logo) { %>\n      <div class="program-logo"><%= logo %></div>\n    <% } %>\n    <a href="<%- url %>" class="course-link">\n        <div class="img-wrapper">\n            <img src="<%- image %>" alt="Learn more about <%- title %>" />\n            <span class="learn-more" aria-hidden="true"><span>\n        </div>\n      <% if ( attributes.course_type === \'credit\' ) { %>\n        <div class="banner"><%- attributes.course_type %>-eligible</div>\n      <% } else if ( attributes.course_type === \'professional\' ) { %>\n        <div class="banner"><%- attributes.course_type %> Education</div>\n      <% } else if ( attributes.course_type === \'verified\' ) { %>\n        <div class="banner"><%- attributes.course_type %></div>\n      <% } %>\n    </a>\n</div>\n'}),define("text!templates/discovery-card-program.underscore",[],function(){return'\n<% if ( title ) { %>\n  <div class="title ellipsis-multi-line" <% if ( typeof lang !== \'undefined\' ) { %> lang="<%- lang %>" <% } %>>\n    <h3 class="title-heading"><%= title %></h3>\n  </div>\n<% } %>\n<% if ( subtitle && subtitle.short ) { %>\n  <!-- Wrapped in a p element so we can apply ellipsis -->\n  <div class="subtitle ellipsis-multi-line"><p><%= subtitle.short %></p></div>\n<% } %>\n<div class="banner"><%- bannerText %></div>\n<% if ( organizations.length ) { %>\n  <div class="label">\n    <span class="sr">Schools and Partners: </span><%- _.pluck(organizations, \'display_name\').join(\', \') %>\n  </div>\n<% } %>\n<% if ( attributes.availability ) { %>\n  <div class="availability"><span class="sr">Availability: </span><%- attributes.availability %></div>\n<% } %>\n<% if (typeof logo === \'string\' && logo) { %>\n  <div class="program-logo"><%= logo %></div>\n<% } %>\n<a href="<%- url %>" class="course-link">\n    <div class="img-wrapper">\n        <img src="<%- image %>" alt="Learn more about <%- title %>" />\n        <span class="learn-more" aria-hidden="true"><span>\n    </div>\n</a>'}),!function(){var e,t,i,a,s,n={}.hasOwnProperty,r=function(e,t){function i(){this.constructor=e}for(var a in t)n.call(t,a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};a=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,i,a,s,n,r;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),n=e.childNodes,r=[],a=0,s=n.length;s>a;a++)i=n[a],r.push(this.add_option(i,t,e.disabled));return r},e.prototype.add_option=function(e,t,i){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:i===!0?i:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,i;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(i,function(e){return t[e]||"&amp;"})):e},e}(),a.select_to_array=function(e){var t,i,s,n,r;for(i=new a,r=e.childNodes,s=0,n=r.length;n>s;s++)t=r[s],i.add_node(t);return i.parsed},t=function(){function e(t,i){this.form_field=t,this.options=null!=i?i:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,i,a,s,n;for(t="",n=this.results_data,a=0,s=n.length;s>a;a++)i=n[a],t+=i.group?this.result_add_group(i):this.result_add_option(i),(null!=e?e.first:void 0)&&(i.selected&&this.is_multiple?this.choice_build(i):i.selected&&!this.is_multiple&&this.single_set_selected_text(i.text));return t},e.prototype.result_add_option=function(e){var t,i;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),i=document.createElement("li"),i.className=t.join(" "),i.style.cssText=e.style,i.setAttribute("data-option-array-index",e.array_index),i.innerHTML=e.search_text,this.outerHTML(i)):""},e.prototype.result_add_group=function(e){var t;return(e.search_match||e.group_match)&&e.active_options>0?(t=document.createElement("li"),t.className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,i,a,s;for(a=this.results_data,s=[],t=0,i=a.length;i>t;t++)e=a[t],s.push(e.selected?e.selected=!1:void 0);return s},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,i,a,s,n,r,o,l,c,u,h,d;for(this.no_results_clear(),s=0,r=this.get_search_text(),e=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=this.search_contains?"":"^",i=new RegExp(a+e,"i"),c=new RegExp(e,"i"),d=this.results_data,u=0,h=d.length;h>u;u++)t=d[u],t.search_match=!1,n=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(n=this.results_data[t.group_array_index],0===n.active_options&&n.search_match&&(s+=1),n.active_options+=1),(!t.group||this.group_search)&&(t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,i),t.search_match&&!t.group&&(s+=1),t.search_match?(r.length&&(o=t.search_text.search(c),l=t.search_text.substr(0,o+r.length)+"</em>"+t.search_text.substr(o+r.length),t.search_text=l.substr(0,o)+"<em>"+l.substr(o)),null!=n&&(n.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>s&&r.length?(this.update_results_content(""),this.no_results(r)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var i,a,s,n;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(a=e.replace(/\[|\]/g,"").split(" "),a.length))for(s=0,n=a.length;n>s;s++)if(i=a[s],t.test(i))return!0},e.prototype.choices_count=function(){var e,t,i,a;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,a=this.form_field.options,t=0,i=a.length;i>t;t++)e=a[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(a){return t.browser_is_supported()?this.each(function(){var t,s;t=e(this),s=t.data("chosen"),"destroy"===a&&s?s.destroy():s||t.data("chosen",new i(this,a))}):this}}),i=function(t){function i(){return s=i.__super__.constructor.apply(this,arguments)}return r(i,t),i.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},i.prototype.set_up_html=function(){var t,i;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),i={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(i.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",i),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},i.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},i.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},i.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},i.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},i.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},i.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},i.prototype.test_active_click=function(t){var i;return i=e(t.target).closest(".chosen-container"),i.length&&this.container[0]===i[0]?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=a.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1
},i.prototype.result_do_highlight=function(e){var t,i,a,s,n;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),a=parseInt(this.search_results.css("maxHeight"),10),n=this.search_results.scrollTop(),s=a+n,i=this.result_highlight.position().top+this.search_results.scrollTop(),t=i+this.result_highlight.outerHeight(),t>=s)return this.search_results.scrollTop(t-a>0?t-a:0);if(n>i)return this.search_results.scrollTop(i)}},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(e){return this.search_results.html(e)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},i.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},i.prototype.search_results_mouseup=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i.length?(this.result_highlight=i,this.result_select(t),this.search_field.focus()):void 0},i.prototype.search_results_mouseover=function(t){var i;return i=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),i?this.result_do_highlight(i):void 0},i.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},i.prototype.choice_build=function(t){var i,a,s=this;return i=e("<li />",{"class":"search-choice"}).html("<span>"+t.html+"</span>"),t.disabled?i.addClass("search-choice-disabled"):(a=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),a.bind("click.chosen",function(e){return s.choice_destroy_link_click(e)}),i.append(a)),this.search_container.before(i)},i.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},i.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},i.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},i.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},i.prototype.result_select=function(e){var t,i;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),i=this.results_data[t[0].getAttribute("data-option-array-index")],i.selected=!0,this.form_field.options[i.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(i):this.single_set_selected_text(i.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[i.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},i.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(e)},i.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},i.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":e("<div/>").text(e.trim(this.search_field.val())).html()},i.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},i.prototype.no_results=function(t){var i;return i=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),i.find("span").first().html(t),this.search_results.append(i),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},i.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,i;switch(t=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var t,i,a,s,n,r,o,l,c;if(this.is_multiple){for(a=0,o=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=r.length;c>l;l++)s=r[l],n+=s+":"+this.search_field.css(s)+";";return t=e("<div />",{style:n}),t.text(this.search_field.val()),e("body").append(t),o=t.width()+25,t.remove(),i=this.container.outerWidth(),o>i-10&&(o=i-10),this.search_field.css({width:o+"px"})}},i}(t)}.call(this),define("chosen",["jquery"],function(e){return function(){var t;return t||e.chosen}}(this));var Drupal=Drupal||{t:function(e){return e},formatPlural:function(e,t,i){return 1===e?t:i}},gettext=function(e){return Drupal.t(e)},ungettext=function(e,t,i,a){var s=a?txtUtils.update.replacements(a):{},n=txtUtils.update.strVars(e),r=txtUtils.update.strVars(t);return Drupal.formatPlural(i,n,r,s)},sprintf=function(e,t){var e=txtUtils.update.strVars(e),i=txtUtils.update.replacements(t),a="";return a=Drupal.t(e,i),_.unescape(a)},txtUtils={update:{strVars:function(e){var t,i,a=e.split(" "),s=a.length;for(t=0;s>t;t++)i=a[t],"%("===i.substr(0,2)&&")s"===i.substr(i.length-2)&&(a[t]="@"+i.substr(2,i.length-4));return a.join(" ")},replacements:function(e){var t={};for(var i in e)t["@"+i]=e[i];return t}}};define("gettext",function(){}),define("course_search/views/course_search_results_view",["enquire","ftellipsis","jquery","underscore","utils","text!templates/discovery-card-course.underscore","text!templates/discovery-card-program.underscore","chosen","gettext"],function(e,t,i,a,s,n,r){return function(){var o={run:function(){var o,l,c=c||{},u=window.location.host.substring(0,window.location.host.indexOf(":")),h=Drupal.settings||!1,d=function(){var o={$el:{init:function(){o.$el.courses.container=i(".search-results"),o.$el.courses.count=i(".result-count"),o.$el.courses.featured=i(".search-results .view-featured-courses-on-search"),o.$el.courses.filtered=i(".search-results .filtered"),o.$el.courses.loading=i(".search-results .loading"),o.$el.facet.container=i(".search-facets"),o.$el.facet.ul=i(".facet-list"),o.$el.facet.toggle=i(".search-header .facet-toggle"),o.$el.filters.active=i(".filters .active-filters"),o.$el.filters.container=i(".filters"),o.$el.modal.link=i("#course-video .direct-link"),o.$el.modal.video=i("#course-video"),o.$el.noresults.container=i(".search-results .no-results"),o.$el.noresults.query=i(".search-results .no-results .query-str"),o.$el.reset=i(".search-header .clear-filters"),o.$el.searchbar=i(".search-header .course-list-search-bar input[name=search_query]")},courses:{container:{},count:{},featured:{},filtered:{}},facet:{container:{},li:{},toggle:{}},filters:{active:{},container:{}},modal:{link:{},video:{}},noresults:{container:{},query:{}},reset:{},searchbar:{}},init:function(e){var t,i,a=e.cards,s=e.flags,n=e.search.query.length>0&&e.search.found,r=e.search.results.length,l=e.xseries||!1,c=!1,u=5;o.courses.total=r,o.filter.webview=e.webview||!1,i=o.filter.onLoad.apply(e.filters),o.courses.all=!1,o.tpl.init(),o.$el.init(),o.filter.init(a,e.search),o.search.set.searchValue(e),o.filter.webview||localStorage.getItem("search_facet")&&(JSON.parse(localStorage.getItem("search_facet")).length>0&&u>o.facets.select.getLastFacetTimeDifference()?c=!0:(localStorage.removeItem("search_facet"),localStorage.removeItem("facet_time"))),i||o.filter.query.active||n||c?o.facets.toggle.header(!0):o.courses.showAll(),t=o.facets.init(e.facets,e.filters),s.xseries_in_search&&!o.filter.webview&&o.xseries.init(l,i),i&&(t=o.filter.onLoad.get.facets(t,e.filters)),n?o.filter.searchQuery.setFacet(e.search):i||e.search.found||o.search.noResults(e.search.query),o.scroll.init(a,r),c||o.courses.init(a,r),o.utils.truncate(o.$el.courses.featured.find(".course-card .title")),o.facets.eventHandlers.update(),o.facets.loaded=!0,o.courses.getAll(e.search,i)},tpl:{init:function(){o.tpl.facet.section=o.tpl.array.facet.section(),o.tpl.facet.item.header=o.tpl.array.facet.item.header(),o.tpl.facet.item.sidebar=o.tpl.array.facet.item.sidebar(),o.tpl.facet.select=o.tpl.array.facet.select(),o.tpl.facet.option=o.tpl.array.facet.option(),o.tpl.courseCard=o.tpl.array.courseCard(),o.tpl.xseriesCard=o.tpl.array.xseriesCard()},array:{facet:{item:{header:function(){return['<li data-facet="<%= facet %>"" data-parent-element="header" class="selected">','<a href="#" class="facet-option" data-value="<%- value %>">','<span class="element-invisible">Clear filter </span>','<%= text %> <i class="fa fa-times" aria-hidden="true"></i>',"</a>","</li>"].join("")},sidebar:function(){return['<li class="<%= classList %>" data-facet="<%= facet %>" data-parent-element="sidebar">','<a href="#" class="facet-option" data-value="<%- value %>" tabindex="<%= tabindex %>">',"<%= text %>",'<span class="count">',"<%= count %>","</span>","</a>","</li>"].join("")}},section:function(){return['<section data-facet="<%= facet %>">',"<% if (heading !== false) { %>","<h3><%= heading %></h3>","<% } %>","<%= list %>","<% if (more === true) { %>",'<div class="toggle <%= classList %>">','<a href="#" class="show-more" tabindex="-1" aria-hidden="true">MORE...</a>','<a href="#" class="show-less hidden" tabindex="-1" aria-hidden="true">LESS...</a>',"</div>","<% } %>","</section>"].join("")},select:function(){return['<section data-facet="<%= facet %>" <% if ( hidden ) {%> class="shrink"<% } %>>',"<h3><%= heading %></h3>",'<div class="<%= facet %>-search<% if ( selected ) {%> school-selected<% } %>">','<select class="select-<%= facet %>" aria-label="Choose a School" data-facet="<%= facet %>" <% if (supportedBrowser) { %>multiple <% } %>data-placeholder="Choose a School...">',"<%= options %>","</select>","</div>","</section>"].join("")},option:function(){return['<option value="<%= name %>" ','<% if ( classList && classList === "selected") { %>',"<%= classList %>","<% } %>",">","<%= name %>","</option>"].join("")}},courseCard:function(){return['<div class="course-card discovery-card shadow<% if ( attributes.course_type ) { %> <%= attributes.course_type %><% } %>">',n,"</div>"].join("")},xseriesCard:function(){return['<div class="course-card discovery-card program xseries shadow">',r,"</div>"].join("")}},facet:{list:'<ul class="facet-list collapse" data-facet="<%= facet %>"><%= list %></ul>',item:{sidebar:""},section:"",select:""},formatCourseCardData:function(e){var t,i=e.schools.length,a=[];for(t=0;i>t;t++)a[t]={display_name:e.schools[t],id:e.schools[t]};return{card_type:"course",organizations:a,title:e.l,url:e.url,image:e.image.src,attributes:{availability:e.availability||!1,self_paced:e.pace||!1,course_org:e.schools?e.schools.join(", "):!1,course_number:e.code||!1,course_type:e.course_type||!1,start_display_date:e.start||!1,start_timestamp:e.start_time||!1,subjects:e.subjects||!1}}},courseCard:""},xseries:{active:!1,data:[],all:[],current:[],init:function(e){o.xseries.active=!0,o.xseries.all=e.all,o.xseries.current=o.xseries.sort(e.all,e.results),o.xseries.data=o.xseries.sort(e.all,e.results)},draw:{list:function(){var e,t=o.xseries.current,i=[],a=t.length;if(o.xseries.active)for(e=0;a>e;e++)i.push(o.xseries.draw.card(t[e]));return i},card:function(e){return a.template(o.tpl.xseriesCard,e)}},filter:{show:function(e,t){var i=[];return a.each(t,function(t,s){i.push("all"===t||"schools"===s&&a.pluck(e.organizations,"id").indexOf(t)>-1||"availability"===s&&e.attributes[s]===t||"subjects"===s&&a.pluck(e.attributes[s],"id").indexOf(t.toLowerCase())>-1||"types"===s&&e.card_type===t)}),a.isEqual(a.uniq(i),[!0])},id:function(e,t){return a.filter(e,function(e){return e.attributes.xseries_id===t?e:!1})}},sort:function(e,t){var i,a,s=[],n=t.length;for(i=0;n>i;i++)a=o.xseries.filter.id(e,t[i]),a&&s.push(a[0]);return s},showAll:function(){o.xseries.current=o.xseries.all}},courses:{all:[],current:[],init:function(e,t){e&&(o.courses.total=t||e.length,o.courses.current=e,o.courses.draw.list(e),o.courses.count(o.courses.total))},count:function(e){var t=[e," result"];1!==e&&t.push("s"),o.search.empty?t.unshift("all "):t.push(" matching"),o.$el.courses.count.html(t.join(""))},draw:{list:function(e,t){var i=[],a=o.xseries.draw.list(),s=o.scroll.get.start(),n=o.scroll.get.end(e);for(s;n>s;s++)i.push(o.courses.draw.courseCard(e[s]));t?o.$el.courses.filtered.append(i.join("")):o.$el.courses.filtered.html(a.concat(i).join("")),o.utils.truncate(o.$el.courses.filtered.find(".course-card .title"))},courseCard:function(e){var t="";return o.courses.hasType(e.types,"profed")?t="professional":o.courses.hasType(e.types,"credit")?t="credit":o.courses.hasType(e.types,"verified")&&(t="verified"),e.course_type=t,o.filter.webview&&(e.url=o.courses.getWebviewUrl(e.url)),a.template(o.tpl.courseCard,o.tpl.formatCourseCardData(e))}},featured:{hide:function(){o.$el.courses.featured.addClass("collapsed").attr("aria-hidden",!0).find(".course-card a").attr("tabindex","-1")},show:function(){o.$el.courses.featured.removeClass("collapsed").attr("aria-hidden",!1).find(".course-card a").attr("tabindex","0")},toggle:function(){var e=o.filter.count();1===e?(o.courses.featured.hide(),o.facets.toggle.header(!0)):0!==e||o.filter.query.active||o.courses.showAll()}},getAll:function(e,t){i.ajax({url:"/search/api/all",type:"GET",dataType:"json",success:function(i){o.courses.setAll(e,t,i)}})},getWebviewUrl:function(e){var t,i=e,a=e;return e.indexOf("course_info?path_id")<0&&(t=e.indexOf("course/"),t>-1&&(i=e.substr(t)),a="edxapp://course_info?path_id="+i),a},hasType:function(e,t){return e.indexOf(t)>-1},setAll:function(e,t,i){var a;o.courses.all=i,a=o.filter.searchQuery.getData(i,e),o.filter.setData(a),t&&(a=o.filter.courses(a,o.filter.display)),o.courses.current=a,o.queue.active&&o.queue.run(),o.filter.webview||localStorage.getItem("search_facet")&&JSON.parse(localStorage.getItem("search_facet")).length>0&&(o.courses.init(i,i.length),o.facets.select.triggerFacet())},showAll:function(){o.search.empty=!0,o.courses.featured.show(),o.facets.toggle.header(!1)},update:function(e){o.courses.current=e,o.scroll.reset(e),o.courses.draw.list(e),o.courses.count(e.length)}},facets:{all:{},loaded:!1,preSelected:!1,titles:{init:function(){o.facets.titles.i18n(o.facets.titles.sections),o.facets.titles.i18n(o.facets.titles.types)},i18n:function(e){a.each(e,function(e,t,i){i[t]=gettext(e)})},sections:{availability:"Availability",level:"Level",languages:"Language",subjects:"Subjects",schools:"Schools & Partners",types:"Courses & Programs"},types:{verified:"Verified Courses",xseries:"XSeries Programs",profed:"Professional Education",highschool:"High School",credit:"Credit",mobile:"Mobile-friendly"}},init:function(e,t){return o.facets.titles.init(),a.keys(t).length>0&&(o.facets.preSelected=t),o.facets.all=e,o.facets.draw.sidebar(e),e},add:function(e,t){var i=t.toLowerCase();return o.filter.display[i]="all",o.facets.getList(e,i)},collapse:function(e){var t=i(e.currentTarget),a=t.siblings(".show-more"),s=t.parent("div").siblings("ul");e.preventDefault(),s.css("max-height","").addClass("collapse"),t.addClass("hidden"),a.removeClass("hidden")},deselect:{dropdown:function(e){e.click(),o.$el.searchbar.focus()},handler:function(e){var t=i(e.currentTarget),a=t.closest("li"),s=a.data("parent-element"),n=a.data("facet"),r=a.find("a").data("value");e.preventDefault(),o.courses.all?(o.filter.clear(n),"header"===s?(o.facets.deselect.header(a),"query"===n?(o.filter.query.active=!1,o.filter.run({courses:o.courses.all,xseries:o.xseries.all},o.filter.display)):o.facets.deselect.sidebar(o.$el.facet.container.find('ul[data-facet="'+n+'"] .selected'))):"sidebar"===s&&(o.facets.deselect.header(o.$el.filters.active.find('a[data-value="'+r+'"]').parent("li")),o.facets.deselect.sidebar(a)),"query"===n?o.analytics.remove.query(r):o.analytics.remove.facet(n,r)):(o.queue.event=e,o.queue.set("removeFacet",!0))},header:function(e){e.detach()},sidebar:function(e){e.hasClass("selected")&&(e.removeClass("selected"),e.children("a").attr("tabindex","0"),e.parent("ul").siblings(".toggle").removeClass("hidden"))}},draw:{sidebar:function(e){var t=[],i={availability:[],languages:[],level:[],schools:[],subjects:[],types:[]};a.each(e,function(e,t){var a=t.toLowerCase(),s="schools"===a?"dropdown":"section";(!o.filter.webview||o.filter.webview&&"types"!==t)&&i[a].push(o.facets.draw[s](e,t))}),t=["<h2>Refine your search</h2>",i.availability.join(""),i.subjects.join(""),i.types.join(""),i.schools.join(""),i.level.join(""),i.languages.join(""),'<a href="#" class="hide-list show-phone flt-right">COLLAPSE FILTERS <i class="fa fa-chevron-up"></i></a>'],o.$el.facet.container.html(t.join("")),1===o.courses.total&&(o.$el.facet.container.addClass("hidden"),o.$el.facet.toggle.addClass("hidden")),o.$el.init(),o.facets.eventHandlers.init(),o.facets.hasSelection("schools")&&o.$el.facet.container.find(".schools-search").addClass("school-selected")},section:function(e,t){var i=a.where(e,{classList:"selected"}).length>0,s=o.facets.loaded?o.facets.draw.list.reset:o.facets.draw.list.initial;return a.template(o.tpl.facet.section,{heading:o.facets.getTitle(t),facet:t.toLowerCase(),list:s(e,t),more:"subjects"===t,classList:i||o.facets.hideMore(e)||o.facets.hasSelection(t)?"hidden":""})},list:{initial:function(e,t){var i,s=a.keys(e),n=[],r={},l=s.length,c="",u=0,h=o.facets.hasSelection(t);for("availability"===t?s=o.facets.format.availability(s):"subjects"===t&&(s=s.sort()),i=0;l>i;i++)c=s[i],c.length>0&&(u=e[c],r={name:c,count:u,classList:u>0?"":"shrink "},h&&(o.facets.isSelected(t,c)?r.classList="selected":u>0&&(r.classList="shrink")),("types"!==t||void 0!==o.facets.titles.types[c])&&n.push(o.facets.draw.item(r,t)));return a.template(o.tpl.facet.list,{facet:t.toLowerCase(),list:n.join("")})},reset:function(e,t){var s,n,r=o.facets.getList(o.courses.all,t),l=[],c=r.length,u={},h="";for(o.filter.webview||(localStorage.removeItem("search_facet"),localStorage.removeItem("facet_time")),s=0;c>s;s++)n=r[s].name,u=a.find(e,{name:n}),u?i.extend(r[s],u):(h=r[s].classList||"",i.extend(r[s],{classList:h+" shrink",count:0})),("types"!==t||void 0!==o.facets.titles.types[r[s].name])&&l.push(o.facets.draw.item(r[s],t));return a.template(o.tpl.facet.list,{facet:t.toLowerCase(),list:l.join("")})}},item:function(e,t){return a.template(o.tpl.facet.item.sidebar,{facet:t,value:e.value?e.value:e.name,text:"types"===t?o.facets.titles.types[e.name]:e.name,count:e.count,classList:e.classList?e.classList:"",selected:o.facets.hasClass(e.classList,"selected"),tabindex:o.facets.hasClass(e.classList,"shrink")?-1:0})},dropdown:function(e,t){return a.template(o.tpl.facet.select,{facet:t.toLowerCase(),heading:o.facets.getTitle(t),hidden:e.length<=1,list:e,options:o.facets.draw.options.handler(e,t),selected:a.where(e,{classList:"selected"}).length>0,supportedBrowser:s.browser.isSupportedByChosen()})},options:{handler:function(e,t){var i="",a=o.facets.draw.options;return i=o.facets.loaded?a.fromObject(e):a.fromArray(o.facets.format.schools(e),t)},fromObject:function(e){var t=[],i=o.tpl.facet.option;return a.each(e,function(e){e.classList=e.classList||"",t.push(a.template(i,e))}),t.join("")},fromArray:function(e,t){var i,s=[],n=o.tpl.facet.option,r=e.length,l=o.facets.hasSelection(t);for(i=0;r>i;i++)s.push(a.template(n,{name:e[i],classList:l&&o.facets.isSelected(t,e[i])?"selected":""}));return s.join("")}}},editDropdown:function(e,t){var a=i(e.currentTarget),s=a.parent(".schools-search"),n=a.siblings(".chosen-container-active").find(".search-choice"),r=a.data("facet"),l=o.facets.getDropdownValue(a),c=o.filter.display[r]||"all";o.courses.all?"all"===l?(o.filter.clear(r),o.facets.deselect.header(o.$el.filters.active.find('a[data-value="'+t.deselected+'"]').parent("li")),s.removeClass("school-selected"),n.find("span").attr("tabindex","0"),n.find("a").attr("tabindex","-1")):("all"!==c?(o.filter.clear(r),o.facets.deselect.header(o.$el.filters.active.find('a[data-value="'+c+'"]').parent("li"))):(n.find("span").attr("tabindex","-1"),n.find("a").attr("tabindex","0")),o.filter.add(r,l),o.facets.select.header(r,l),s.addClass("school-selected"),o.analytics.select.facet(r,l),o.facets.hideList(e)):(o.queue.event=e,o.queue.params=t,o.queue.set("editDropdown",!0))},expand:function(e){var t=i(e.currentTarget),a=t.parent("div").siblings("ul"),s=a.find("li").length,n=34;e.preventDefault(),t.addClass("hidden"),a.removeClass("collapse").css("max-height",s*n+"px"),t.siblings(".show-less").removeClass("hidden")},eventHandlers:{init:function(){o.facets.eventHandlers.update(),o.$el.filters.active.off("click"),o.$el.facet.toggle.off("click"),o.$el.facet.toggle.on("click",o.facets.toggle.menu),o.facets.eventHandlers.keypress()},update:function(){o.facets.eventHandlers.click(),o.facets.eventHandlers.select()},click:function(){var e=o.$el.facet.ul,t=o.$el.facet.container;e.off("click"),t.off("click"),e.on("click","li .facet-option",o.facets.select.handler),t.on("click",".show-more",o.facets.expand),t.on("click",".show-less",o.facets.collapse),t.on("click",".hide-list",o.facets.hideList),t.on("click",".search-choice",function(){o.facets.deselect.dropdown(i(this).find(".search-choice-close"))})},keypress:function(){o.$el.filters.active.on("keydown",".close",function(e){13===e.keyCode&&(o.facets.deselect.handler(e),o.$el.searchbar.focus())}),o.$el.facet.container.on("keydown",".search-choice-close",function(e){e.preventDefault(),13===e.keyCode&&o.facets.deselect.dropdown(i(this))}),o.$el.facet.ul.on("keydown","li a",function(e){13===e.keyCode&&(o.facets.select.handler(e),o.$el.searchbar.focus())})},select:function(){var e=o.$el.facet.container.find("select");e.off("change"),e.chosen({max_selected_options:1}),i("#search-filter-section").find("section .schools-search .chosen-container .chosen-choices .search-field input").attr("aria-label","Choose a School"),e.on("change",o.facets.editDropdown)}},format:{availability:function(e){var t=e.sort(),i=t.shift(),s=t[1];return t[1]=!1,t.push(s),t.push(i),a.compact(t)},schools:function(e){return a.values(e).sort()}},getDropdownValue:function(e){var t=e.val();return e.attr("multiple")?t?t[0]:"all":t||"all"},getList:function(e,t){var i,s=a.pluck(e,t),n=[],r=0,l=0,c=[],u=[];for(s=a.flatten(s),r=s.length,n=o.facets.sort.handler(a.uniq(s),t),n=a.compact(n),l=n.length,i=0;l>i;i++)c.push({name:n[i],count:r-a.without(s,n[i]).length});return"availability"===t&&(u=a.pluck(e,"pace"),u=a.compact(u),c.splice(c.length-1,0,{name:"Self-Paced",count:u.length})),c},getTitle:function(e){return o.facets.titles.sections[e]||e},hasClass:function(e,t){return e&&e.indexOf(t)>-1},hasSelection:function(e){return!!o.facets.preSelected&&a.keys(o.facets.preSelected)[0]===e.toLowerCase()},hideList:function(e){o.facets.toggle.menu(e),o.$el.facet.toggle.removeClass("active")},hideMore:function(e){var t=0;return e?(e[0]?a.each(e,function(e){e.count>0&&t++}):a.each(e,function(e){e>0&&t++}),10>=t):!1},isSelected:function(e,t){return!!o.facets.preSelected&&o.facets.preSelected[e]&&o.facets.preSelected[e][0]===t},render:function(e,t){var i={availability:o.facets.add(e,"Availability"),level:o.facets.add(e,"level"),languages:o.facets.add(e,"languages"),subjects:o.facets.add(e,"Subjects"),schools:o.facets.add(e,"Schools"),types:o.facets.add(e,"types")};return o.facets.all=i,t&&t===!0&&o.facets.draw.sidebar(i),i},select:{handler:function(e){var t=i(e.currentTarget),a=t.closest("li"),s=a.data("facet"),n=t.data("value");e.preventDefault(),o.filter.webview||o.facets.select.updateFacet(n,a.hasClass("selected")),o.courses.all?a.hasClass("selected")?o.facets.deselect.handler(e):(o.filter.add(s,n),o.facets.select.header(s,n),o.facets.select.sidebar(a),o.analytics.select.facet(s,n),t.blur(),o.facets.hideList(e)):(o.queue.event=e,o.queue.set("addFacet",!0))},header:function(e,t){var i=t,s=e.toLowerCase();o.$el.filters.active.length>-1&&("types"===s?i=o.facets.titles.types[t]:"query"===s&&(i='"'+t+'"'),o.$el.filters.active.append(a.template(o.tpl.facet.item.header,{facet:e,text:i,value:t})))},sidebar:function(e){e.addClass("selected"),e.siblings("li").addClass("shrink").children("a").attr("tabindex","-1"),e.parent("ul").siblings(".toggle").addClass("hidden")},updateFacet:function(e,t){var a,s=[],n={name:e},r=!1,o=new Date;null===localStorage.getItem("facet_time")&&localStorage.setItem("facet_time",JSON.stringify({timestamp:o.toString()})),localStorage.getItem("search_facet")&&(s=JSON.parse(localStorage.getItem("search_facet"))),t?(a=s.length+1,i.each(s,function(t,i){i.name===e&&(a=t)}),s.splice(a,1)):(i.each(s,function(t,i){i.name===e&&(r=!0)}),r||s.push(n));try{localStorage.setItem("search_facet",JSON.stringify(s))}catch(l){return!1}},getLastFacetTimeDifference:function(){var e,t=new Date,i=0;return localStorage.getItem("facet_time")&&(e=new Date(JSON.parse(localStorage.getItem("facet_time")).timestamp),i=o.utils.getMinutesFromMiliSec(t-e)),i},triggerFacet:function(){var e,t,a=[],s={};if(localStorage.getItem("search_facet"))for(a=JSON.parse(localStorage.getItem("search_facet")),e=a.length,t=0;e>t;t++)s=a[t],i('li .facet-option[data-value="'+s.name+'"]').trigger("click")}},setClasses:function(e,t){var i,a=e.length;for(i=0;a>i;i++)e[i].classList=e[i].name===t?"selected":"shrink";return e},sort:{availability:function(e){var t=o.utils.sort.alpha(e),i=t.shift();return"Archived"===i?t.push(i):t.unshift(i),t},handler:function(e,t){var i=[];return i="availability"===t?o.facets.sort.availability(e):"types"===t?o.facets.sort.types(e):o.utils.sort.alpha(e)},types:function(e){var t=o.utils.sort.alpha(e),i=t.shift(),a=t.shift();return t.push(i,a),t}},toggle:{menu:function(e){var t=i(e.currentTarget),a=o.$el.facet.container,s=a.hasClass("phone-menu");e.preventDefault(),s?(t.addClass("active"),a.removeClass("phone-menu")):(t.removeClass("active"),a.addClass("phone-menu"))},header:function(e){var t=e?"removeClass":"addClass";o.$el.filters.container[t]("collapsed")}},update:{list:function(e,t){var s=o.$el.facet.container.find("section[data-facet="+t+"] ul"),n=s.parent("section"),r=o.facets.getList(e,t),l=s.find("li").length;s.find("li").each(function(e,t){var s=i(t),n=s.find("a").data("value"),o=a.where(r,{name:n});0===o.length||0===o[0].count?(s.addClass("shrink"),s.find("a").attr("tabindex","-1")):(s.find(".count").html(o[0].count),s.removeClass("shrink"),s.find("a").attr("tabindex","0"))}),r.length<=10?s.siblings(".toggle").addClass("hidden"):s.siblings(".toggle").removeClass("hidden"),l<=s.find(".shrink").length+1||1===e.length?n.addClass("shrink"):n.hasClass("shrink")&&n.removeClass("shrink")},dropdown:function(e,t){var i=o.$el.facet.container.find("section[data-facet="+t+"]"),a=o.facets.getList(e,t),s=o.facets.draw.dropdown(a,t);i.replaceWith(s)}}},filter:{active:[],data:[],display:{availability:"all",level:"all",languages:"all",subjects:"all",schools:"all",types:"all"},query:{active:!1,data:[],str:""},search:{},webview:!1,init:function(e,t){o.filter.setData(e),o.filter.search=t,o.filter.eventHandlers.init()},eventHandlers:{init:function(){o.filter.eventHandlers.click()},click:function(){o.$el.reset.on("click",o.filter.reset)}},add:function(e,t){"self-paced"===t.toLowerCase()&&(t="pace"),o.filter.active.push(t),o.search.empty&&o.search.clear(),o.filter.display[e]=t,o.filter.run({courses:o.filter.data,xseries:o.xseries.current},o.filter.display)},clear:function(e){var t={courses:o.filter.query.active?o.filter.query.data:o.courses.all,xseries:o.filter.query.active?o.xseries.data:o.xseries.all};a.pull(o.filter.active,e),o.filter.display[e]="all",o.filter.run(t,o.filter.display),o.$el.facet.container.removeClass("hidden"),o.$el.facet.toggle.removeClass("hidden")
},count:function(){var e=a.values(o.filter.display);return e=a.uniq(e),a.without(e,"all").length},courses:function(e,t){var i,a=e.length,s=[];for(i=0;a>i;i++)o.filter.show(e[i],t)&&s.push(e[i]);return s},discoveryCard:function(e,t){var i,a=e.length,s=[];for(i=0;a>i;i++)o.xseries.filter.show(e[i],t)&&s.push(e[i]);return s},isActive:function(e){return a.indexOf(o.filter.active,e)>-1},onLoad:{apply:function(e){var t=a.flatten(a.values(e)),i=a.compact(t).length>0;return i&&(o.filter.display=o.filter.onLoad.get.filters(e)),i},get:{facets:function(e,t){return a.each(t,function(t,i){var s=a.compact(t).length>0?t[0]:"all";e[i]=o.facets.setClasses(e[i],s),o.filter.display[i]="availability"===i&&"self-paced"===s.toLowerCase()?"pace":s,(!o.filter.webview||o.filter.webview&&"types"!==i||o.filter.webview&&"types"===i&&"mobile"!==t[0])&&o.facets.select.header(i,s)}),e},filters:function(e){var t=o.filter.display;return a.each(e,function(e,i){a.compact(e).length>0&&("self-paced"===e[0].toLowerCase()&&(e=["pace"]),t[i]=a.unescape(e[0]))}),t}}},reset:function(e){var t=o.courses.all;e&&e.preventDefault(),t?(o.filter.data=t,o.filter.active=[],o.filter.query.active=!1,o.$el.filters.active.html(""),o.xseries.showAll(),o.courses.showAll(),o.courses.update(t),o.facets.render(t,!0),o.$el.searchbar.val(""),o.$el.facet.container.find(".schools-search").removeClass("school-selected"),o.$el.facet.container.find(".toggle").removeClass("hidden"),o.analytics.remove.allFacets(),o.$el.facet.container.removeClass("hidden"),o.$el.facet.toggle.removeClass("hidden")):o.queue.set("reset",!0)},run:function(e,t){var i=o.filter.courses(e.courses,t),s=!1;o.filter.data=i,o.xseries.current=o.filter.discoveryCard(e.xseries,t),a.each(t,function(e,t){var a="schools"===t.toLowerCase()?"dropdown":"list";"all"===e&&(o.facets.update[a](i,t),s=!0)}),s&&(o.$el.init(),o.facets.eventHandlers.update()),o.courses.featured.toggle(),o.courses.update(i)},searchQuery:{getData:function(e,t){var i,s,n=[],r=t.results,l=t.query,c=r.length;if(l&&l.length>0)if(c>0&&t.found){for(i=0;c>i;i++)s=a.find(e,{guid:r[i]}),s&&n.push(s);o.filter.query={active:!0,str:l,data:n}}else n=e,o.search.noResults(l),o.search.empty=!0;else n=e;return n},setFacet:function(e){var t=e.query,i=e.results;t&&t.length>0&&i.length>0&&o.facets.select.header("query",t)}},setData:function(e){o.filter.data=e},show:function(e,t){var i=[];return a.each(t,function(t,s){i.push("all"===t||a.indexOf(e[s],t)>-1||e[s]===t||e[t]===!0)}),a.isEqual(a.uniq(i),[!0])}},queue:{active:!1,event:{},params:{},run:function(){var e=o.queue.active;"reset"===e?o.filter.reset():"scroll"===e?o.scroll.add():"addFacet"===e?(o.facets.select.handler(o.queue.event),o.queue.event={}):"removeFacet"===e?(o.facets.deselect.handler(o.queue.event),o.queue.event={}):"editDropdown"===e&&(o.facets.editDropdown(o.queue.event,o.queue.params),o.queue.event={},o.queue.params={}),o.queue.active=!1},set:function(e,t){o.filter.queue||(t&&(o.$el.courses.loading.removeClass("hidden"),o.$el.courses.filtered.html("")),o.queue.active=e)}},search:{empty:!1,clear:function(){o.search.empty=!1,o.$el.noresults.container.addClass("hidden"),o.$el.searchbar.val("")},noResults:function(e){o.$el.noresults.query.html(e),o.$el.noresults.container.removeClass("hidden"),o.search.empty=!0,o.utils.eggs.search(e)},set:{searchValue:function(e){var t=e.filters.schools?e.filters.schools[0]:!1,i=e.filters.subjects?e.filters.subjects[0]:!1,s=i||t;s===!1&&e.search.found&&(s=e.search.query||null),s&&o.$el.searchbar.val(a.unescape(s))}}},scroll:{current:1,total:1,perPage:8,init:function(t,i){e.register("screen and (min-width: 980px)",function(){o.scroll.perPage=9}),o.scroll.load(t,i),o.scroll.eventHandlers.init()},eventHandlers:{init:function(){o.scroll.eventHandlers.scroll()},scroll:function(){var e=i(window);e.off("scroll"),e.on("scroll",function(){var t=o.$el.courses.filtered.find(".course-card").last();o.scroll.onScreen(t)&&(e.off("scroll"),o.scroll.add())})}},add:function(){var e;o.courses.all?(e=o.scroll.current+1,o.scroll.set.current(e,!0)):o.queue.set("scroll")},get:{start:function(){return o.scroll.current*o.scroll.perPage-o.scroll.perPage},end:function(e){var t=e?e.length:0,i=o.scroll.current*o.scroll.perPage;return i>t?t:i}},load:function(e,t){var i=e?Math.ceil(t/o.scroll.perPage):1;i>1&&o.$el.courses.loading.removeClass("hidden"),o.scroll.total=i,o.scroll.set.current(1)},onScreen:function(e){var t,a=i(window).height(),s=window.pageYOffset?window.pageYOffset:i(window).scrollTop(),n=e.offset().top,r=e.height(),l=o.$el.courses.loading.offset().top;return t=n-160,a+s>t&&(t>s-r||l>s-r)},reset:function(e){var t=e?Math.ceil(e.length/o.scroll.perPage):1;t>1&&o.$el.courses.loading.removeClass("hidden"),o.scroll.total=t,o.scroll.set.current(1)},set:{current:function(e,t){var i=!0;o.scroll.current=e,t&&t===!0&&o.courses.draw.list(o.courses.current,i),o.scroll.current<o.scroll.total?o.scroll.eventHandlers.init():o.$el.courses.loading.addClass("hidden")}}},analytics:{remove:{allFacets:function(){window.analytics.track("edx.bi.user.facets.cleared",{category:"search"})},facet:function(e,t){window.analytics.track("edx.bi.user."+e+".removed",{category:"search",label:t})},query:function(e){window.analytics.track("edx.bi.user.query.removed",{category:"search",label:e})}},select:{facet:function(e,t){window.analytics.track("edx.bi.user."+e+".filtered",{category:"search",label:t})}}},utils:{sort:{alpha:function(e){return e.sort(o.utils.sort.ignoreCase)},ignoreCase:function(e,t){var i=0;return"string"==typeof e&&"string"==typeof t&&(i=e.toLowerCase().localeCompare(t.toLowerCase())),i}},truncate:function(e){a.each(e,function(e){var i=new t(e);i.calc(),i.set()})},getMinutesFromMiliSec:function(e){return e/1e3/60},eggs:{on:!0,search:function(e){var t=["comic sans","comic sans ms","papyrus"];t.indexOf(e)>-1&&("comic sans"===e&&(e+=" ms"),o.utils.eggs.font.set(e))},font:{set:function(e){i(":visible").not(".form-submit").css("font-family",e)}}}}};return{init:o.init,test:{facets:{getList:o.facets.getList,setClasses:o.facets.setClasses,sortAvailability:o.facets.sort.availability},filter:{courses:o.filter.courses,onLoad:{apply:o.filter.onLoad.apply},reset:function(){o.filter.display={availability:"all",level:"all",languages:"all",subjects:"all",schools:"all",types:"all"}},show:o.filter.show},utils:{sortAlphabetically:o.utils.sort.alpha}}}}();return c.search={},o=h.edx_search,l=o?i.parseJSON(o.filters):[],o&&d.init({flags:h.ft_enabled_features||[],cards:i.parseJSON(o.cards),facets:i.parseJSON(o.facets),filters:l&&l.facets?l.facets:[],search:{found:o.found,query:l&&l.query?a.unescape(l.query):"",results:i.parseJSON(o.results)},webview:h.edx_webview,xseries:{results:i.parseJSON(o.xseries_result)||[],all:i.parseJSON(o.xseries_all)||[]}}),u.indexOf("localhost")>-1?(c.search.test=d.test,c):void 0}};return{init:o.run}}()}),define("models/date_utils",["backbone"],function(e){return e.Model.extend({month:["January","February","March","April","May","June","July","August","September","October","November","December"],formatDateString:function(e){var t=new Date(e);return this.month[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()}})}),define("models/course_catalog_discovery_card_model",["backbone","jquery","underscore","models/date_utils"],function(e,t,i,a){return e.Model.extend({initialize:function(){this.utils||(this.utils=new a)},parse:function(e){var i={};switch(this.utils||this.initialize(),e.content_type){case"courserun":i={attributes:{availability:e.availability,course_number:e.number,course_type:e.type,start_display_date:this.utils.formatDateString(e.start)},image:e.image_url||"",organizations:[{display_name:e.org}],title:e.title||"",url:e.marketing_url};break;case"program":i={attributes:{availability:"active"===e.status?"Current":"Archived"},image:e.card_image_url||"",organizations:this.formatOrgs(e),title:e.title||"",url:e.marketing_url,subtitle:{"short":e.subtitle}};break;default:console.warn("Encountered unknown content type: "+e.content_type)}return t.extend(e,i)},formatOrgs:function(e){var t=[];return t=e.authoring_organizations?i.map(e.authoring_organizations,function(e){return{display_name:e.key}}):i.map(e.organizations,function(e){return{display_name:e.split(":")[0]}})}})}),define("models/course_catalog_discovery_card_collection",["backbone","models/course_catalog_discovery_card_model"],function(e,t){return e.Collection.extend({model:t,initialize:function(e,t){t.sortList&&(this.sortList=t.sortList,this.comparator=this.collectionComparator)},collectionComparator:function(e){var t=e.get("content_type");return"program"===t?this.sortList.indexOf(e.get("uuid")):"courserun"===t?this.sortList.indexOf(e.get("key")):void 0},parse:function(e){var t=e.objects||e;return this.count=t.count,this.next=t.next,t.results},nextPage:function(){this.next&&(this.url=this.next,this.fetch())}})}),define("search/models/facet_display_name_model",["backbone","jquery","underscore"],function(e,t,i){return e.Model.extend({defaults:{displayFacets:[{displayName:"Archived",facet:"availability_archived"},{displayName:"Current",facet:"availability_current"},{displayName:"Starting Soon",facet:"availability_starting_soon"},{displayName:"Upcoming",facet:"availability_upcoming"},{displayName:"All Courses",facet:"courserun"},{displayName:"Credit-Eligible",facet:"credit"},{displayName:"Professional Education",facet:"professional"},{displayName:"All Programs",facet:"program"},{displayName:"Self-Paced",facet:"self_paced"},{displayName:"Verified",facet:"verified"}]},getDisplayName:function(e){var t=i.findWhere(this.get("displayFacets"),{facet:e.text});return t&&(e.text=t.displayName),e},getFacetName:function(e){var t=i.findWhere(this.get("displayFacets"),{displayName:e.text});return t&&(e.text=t.facet),e},mapDisplayNames:function(e){return i.each(e,function(e){e=this.getDisplayName(e)},this),e}})}),define("models/search_results_model",["backbone","jquery","underscore","search/models/facet_display_name_model"],function(e,t,i,a){return e.Model.extend({apiRoot:"/api/v1/catalog/search",urlRoot:function(){return this.apiRoot+this.getQueryParams()},initialize:function(e,t){this.query=t.query,this.facets=t.facets,this.featuredCourseIDs=t.featuredCourseIDs,this.displayNameModel=new a,this.featuredProgramIDs=t.featuredProgramIDs,this.customParams=t.customParams,this.mobileAvailable=t.mobileAvailable},addFacet:function(e,t){var i={},a="_exact";e.indexOf("selected_query_facet")>=0&&(a=""),i[e+a]=t,this.facets||(this.facets=[]),this.facets.push(i),this.fetch(),this.fireFacetEvent(e,t,!1)},clearFacets:function(){this.facets=[],this.query=!1,this.fetch(),this.fireRemoveAllFacetEvent()},fireFacetEvent:function(e,t,i){var a=i?".removed":".filtered";e.indexOf("selected_query_facet")>=0&&t.indexOf("_")>=0&&(e=t.split("_")[0],t=t.split("_")[1]),window.analytics.track("edx.bi.user."+e+a,{category:"search",label:t})},fireRemoveAllFacetEvent:function(){window.analytics.track("edx.bi.user.facets.cleared",{category:"search"})},fireRemoveQueryEvent:function(e){window.analytics.track("edx.bi.user.query.removed",{category:"search",label:e})},formatFacetsForAPI:function(){var e=[],t="";return i.map(this.facets,function(t){var a,s=i.keys(t).join(""),n=s.indexOf("selected_query_facet")>=0;return a=n?i.keys(t)+"s[]="+encodeURIComponent(i.values(t)):"selected_facets[]="+s+"%3A"+encodeURIComponent(i.values(t)),e.push(a),t}),t+=e.join("&")},formatFacetsForUrl:function(){var e=[],t="";return i.map(this.facets,function(t){var a=i.keys(t).join(""),s=i.values(t).join("");switch(a){case"pacing_type_exact":"self_paced"===s&&(a="availability",s="Self-Paced");break;case"selected_query_facet":a="availability",s=this.getAvailabilityValue(s);break;case"subjects_exact":a="subject";break;case"seat_types_exact":a="type";break;case"content_type_exact":a="courserun"===s?"course":s,s="all";break;case"type_exact":a="micromasters"===s.toLowerCase()?"program":"type";break;case"organizations_exact":a="school";break;default:a=a.slice(0,a.indexOf("_"))}return e.push(a+"="+encodeURIComponent(s)),t}.bind(this)),t+=e.join("&")},getAvailabilityValue:function(e){var t="availability_";return encodeURIComponent(e.slice(t.length))},getFacetListString:function(){var e=[];return this.query&&e.push('"'+this.query+'"'),this.facets&&i.each(this.facets,function(t){var a=i.values(t)[0],s=this.displayNameModel.getDisplayName({text:a});e.push(s.text)}.bind(this)),e.join(", ")},getQueryParams:function(){var e="",t=[];return this.query&&t.push("query="+this.query),this.facets&&t.push(this.formatFacetsForAPI()),this.featuredCourseIDs&&this.featuredCourseIDs.length>0&&t.push("featured_course_ids="+this.featuredCourseIDs.join(",")),this.featuredProgramIDs&&this.featuredProgramIDs.length>0&&t.push("featured_programs_uuids="+this.featuredProgramIDs.join(",")),this.customParams&&t.push(this.customParams),this.mobileAvailable&&t.push("selected_facets[]=mobile_available_exact%3Atrue"),t.length>0&&(e="?"+t.join("&")),e},getUrl:function(){var e=[];return this.mobileAvailable&&e.push("type=mobile"),this.query&&e.push("search_query="+this.query),this.facets&&this.facets.length>0&&e.push(this.formatFacetsForUrl()),"?"+e.join("&")},removeFacet:function(e,t){var a=this.displayNameModel.getDisplayName({text:t});this.facets=i.filter(this.facets,function(i){return i[e+"_exact"]!==t&&i[e]!==t&&i[e+"_exact"]!==a.text&&i[e]!==a.text}),this.fetch(),this.fireFacetEvent(e,t,!0)},removeQueryString:function(e){this.fireRemoveQueryEvent(this.query),e=void 0===e?!0:e,this.query=!1,e&&this.fetch()}})}),define("search/models/ui_state_model",["backbone"],function(e){return e.Model.extend({defaults:{facetMenuIsOpen:!1,isWebview:!1}})}),define("search/router",["backbone"],function(e){return e.Router.extend({routes:{"":"loadPage"},loadPage:function(){document.location.reload()}})}),define("models/analytics_discovery_card_model",["backbone"],function(e){return e.Model.extend({defaults:{category:"",featured:!1,index:"",label:""},trackCard:function(e){e.index=e.index.toString(),this.set(e),window.analytics.track("edx.bi.user.discovery.card.click",this.toJSON())}})}),define("text!svg/logos/micromasters.svg",[],function(){return'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 896.6 290.67" role="img" aria-label="MicroMasters">\n  <title class="svg-title">MicroMasters</title>\n  <g>\n    <g>\n      <path class="mm-logo-fill" d="M57.12,295.69l-34.84-91H21.72q1,10.82,1,25.71v65.33h-11V193h18l32.52,84.72h0.56L95.55,193h17.84v102.7H101.45V229.52q0-11.38,1-24.73h-0.56l-35.12,90.9H57.12Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M127.31,197.83q0-4,2-5.87a7.28,7.28,0,0,1,9.76,0q2,1.9,2,5.83t-2,5.87a6.8,6.8,0,0,1-4.85,1.93,6.73,6.73,0,0,1-4.92-1.93Q127.31,201.77,127.31,197.83ZM140,295.69H128.29v-77H140v77Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M186.82,297.09q-16.72,0-25.89-10.29t-9.17-29.12q0-19.32,9.31-29.86t26.52-10.54a52.67,52.67,0,0,1,11.1,1.19,36.66,36.66,0,0,1,8.71,2.81l-3.58,9.9a55.07,55.07,0,0,0-8.43-2.56,37.73,37.73,0,0,0-8.08-1q-23.46,0-23.46,29.93,0,14.19,5.73,21.78t17,7.59a51.85,51.85,0,0,0,19.74-4.14v10.33Q198.55,297.09,186.82,297.09Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M253.91,217.29a45.64,45.64,0,0,1,9.2.84L261.5,229a39.74,39.74,0,0,0-8.43-1.05q-9.34,0-16,7.59t-6.64,18.9v41.31H218.79v-77h9.62L229.75,233h0.56a33.83,33.83,0,0,1,10.33-11.59A23.25,23.25,0,0,1,253.91,217.29Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M333.9,257.12q0,18.83-9.48,29.4t-26.2,10.57a34.7,34.7,0,0,1-18.33-4.85,32,32,0,0,1-12.36-13.91q-4.36-9.06-4.36-21.21,0-18.82,9.41-29.33t26.13-10.5q16.16,0,25.68,10.75T333.9,257.12Zm-58.66,0q0,14.75,5.9,22.48t17.35,7.73q11.45,0,17.39-7.69t5.94-22.51q0-14.68-5.94-22.3t-17.53-7.62q-11.45,0-17.28,7.52T275.24,257.12Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M391.19,295.69l-24.73-80.57h-0.63q1.33,24.59,1.33,32.81v47.77H347.71V193h29.64l24.31,78.54h0.42L427.86,193h29.64v102.7H437.2V247.08q0-3.44.11-7.94t0.95-23.88h-0.63l-26.48,80.43h-20Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M522.92,295.69L518.77,285h-0.56q-5.41,6.81-11.13,9.45t-14.93,2.63q-11.31,0-17.81-6.46t-6.5-18.4q0-12.5,8.75-18.44T503,247.22l13.63-.42v-3.44q0-11.94-12.22-11.94-9.41,0-22.13,5.69l-7.1-14.47a63.85,63.85,0,0,1,30.07-7.1q15.81,0,24.24,6.88t8.43,20.93v52.33h-15Zm-6.32-36.39-8.29.28q-9.34.28-13.91,3.37t-4.57,9.41q0,9.06,10.4,9.06,7.44,0,11.91-4.29t4.46-11.38V259.3Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M607.54,272.37q0,12.08-8.39,18.4T574,297.09a78.87,78.87,0,0,1-14.61-1.16,55.17,55.17,0,0,1-11.31-3.41v-17.7a74.61,74.61,0,0,0,13.45,4.71,54.47,54.47,0,0,0,13.17,1.9q11.66,0,11.66-6.74a5.63,5.63,0,0,0-1.55-4.11,22.42,22.42,0,0,0-5.34-3.58q-3.79-2-10.12-4.67-9.06-3.79-13.31-7a19.74,19.74,0,0,1-6.18-7.41A24.44,24.44,0,0,1,548,237.59q0-10.47,8.11-16.19t23-5.73a65.33,65.33,0,0,1,27.61,6.18l-6.46,15.45q-5.9-2.53-11-4.14a34.66,34.66,0,0,0-10.47-1.62q-9.48,0-9.48,5.13,0,2.88,3.06,5t13.38,6.25q9.2,3.72,13.49,7a20.6,20.6,0,0,1,6.32,7.45A22.89,22.89,0,0,1,607.54,272.37Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M656.62,280a46.41,46.41,0,0,0,13.49-2.46v15.95q-8,3.58-19.67,3.58-12.86,0-18.72-6.5t-5.87-19.49V233.24H615.6v-9.06L627.4,217l6.18-16.58h13.7v16.72h22v16.09h-22V271.1q0,4.57,2.56,6.74A10.11,10.11,0,0,0,656.62,280Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M717.21,297.09q-19,0-29.64-10.47T676.89,257q0-19.74,9.87-30.52t27.29-10.78q16.65,0,25.92,9.48t9.27,26.2v10.4H698.6q0.35,9.13,5.41,14.26t14.19,5.13a58.91,58.91,0,0,0,13.42-1.48A67.12,67.12,0,0,0,744.82,275v16.58a50.32,50.32,0,0,1-12,4.18A75.75,75.75,0,0,1,717.21,297.09Zm-3-66.17q-6.81,0-10.68,4.32t-4.43,12.26h30.07Q729,239.56,725,235.24T714.19,230.92Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M803.31,215.68a34.56,34.56,0,0,1,7.24.63l-1.62,20.09a24.6,24.6,0,0,0-6.32-.7q-10.26,0-16,5.27t-5.73,14.75v40H759.48V217.15H775.7l3.16,13.21h1.05a29.53,29.53,0,0,1,9.87-10.64A24.34,24.34,0,0,1,803.31,215.68Z" transform="translate(-9.93 -6.42)"/>\n      <path class="mm-logo-fill" d="M876.72,272.37q0,12.08-8.39,18.4t-25.11,6.32a78.87,78.87,0,0,1-14.61-1.16,55.17,55.17,0,0,1-11.31-3.41v-17.7a74.61,74.61,0,0,0,13.45,4.71,54.47,54.47,0,0,0,13.17,1.9q11.66,0,11.66-6.74a5.63,5.63,0,0,0-1.55-4.11,22.42,22.42,0,0,0-5.34-3.58q-3.79-2-10.12-4.67-9.06-3.79-13.31-7a19.74,19.74,0,0,1-6.18-7.41,24.44,24.44,0,0,1-1.93-10.29q0-10.47,8.11-16.19t23-5.73a65.33,65.33,0,0,1,27.61,6.18l-6.46,15.45q-5.9-2.53-11-4.14a34.66,34.66,0,0,0-10.47-1.62q-9.48,0-9.48,5.13,0,2.88,3.06,5t13.38,6.25q9.2,3.72,13.49,7a20.6,20.6,0,0,1,6.32,7.45A22.89,22.89,0,0,1,876.72,272.37Z" transform="translate(-9.93 -6.42)"/>\n    </g>\n    <path class="mm-logo-fill" d="M889.15,225.06h-1.51V213.76h-3.81v-1.37H893v1.37h-3.85v11.29Zm10.54,0-3.88-10.7H895.7l0.07,3.53v7.17h-1.44V212.39h2.2L900.4,223l3.93-10.64h2.2v12.66H905v-7l0.07-3.64H905l-4,10.62h-1.3Z" transform="translate(-9.93 -6.42)"/>\n    <rect class="mm-logo-fill" x="9.94" y="153.97" width="323.42" height="8.59" transform="translate(-10.18 -6.16) rotate(-0.09)"/>\n    <path class="mm-logo-fill" d="M22.7,130.59a152.9,152.9,0,0,1,28.13-56,320,320,0,0,0,31.88,8,148.52,148.52,0,0,0-17.94,48.06h9.8A139.44,139.44,0,0,1,92.73,84.42a458.27,458.27,0,0,0,75.51,6.78v39.4h9.6V91.17a461.8,461.8,0,0,0,75.82-7.25A138.83,138.83,0,0,1,272,130.59h9.8A147.91,147.91,0,0,0,263.68,82q15.46-3.14,31.49-7.6a152.87,152.87,0,0,1,28.26,56.18h10C315.17,57.48,249.24,6.42,173.07,6.42S31,57.47,12.74,130.59h10ZM288.28,66.36q-15.29,4.1-30.06,7c-19.06-27.94-44.56-45.7-62.54-55.65A155.67,155.67,0,0,1,288.28,66.36ZM177.84,19.43c14.19,6.34,46.49,23.44,69.95,55.79a452.28,452.28,0,0,1-69.95,6.37V19.43Zm-9.6,62.19a448.85,448.85,0,0,1-69.65-5.92c23.26-32.23,55.26-49.52,69.65-56.07v62ZM151.16,17.56c-18,10-43.79,28-63,56.28C74.39,71.2,64,68.45,57.63,66.59A155.62,155.62,0,0,1,151.16,17.56Z" transform="translate(-9.93 -6.42)"/>\n  </g>\n</svg>\n'});var languageUtils=function(){var e={isoLangs:[{code:"ab",name:"Abkhaz",nativeName:"Ð°Ò§ÑÑÐ°"},{code:"aa",name:"Afar",nativeName:"Afaraf"},{code:"af",name:"Afrikaans",nativeName:"Afrikaans"},{code:"ak",name:"Akan",nativeName:"Akan"},{code:"sq",name:"Albanian",nativeName:"Shqip"},{code:"am",name:"Amharic",nativeName:"á áá­á"},{code:"ar",name:"Arabic",nativeName:"Ø§ÙØ¹Ø±Ø¨ÙØ©"},{code:"an",name:"Aragonese",nativeName:"AragonÃ©s"},{code:"hy",name:"Armenian",nativeName:"ÕÕ¡ÕµÕ¥ÖÕ¥Õ¶"},{code:"as",name:"Assamese",nativeName:"à¦à¦¸à¦®à§à¦¯à¦¼à¦¾"},{code:"av",name:"Avaric",nativeName:"Ð°Ð²Ð°Ñ Ð¼Ð°ÑÓ, Ð¼Ð°Ð³ÓÐ°ÑÑÐ» Ð¼Ð°ÑÓ"},{code:"ae",name:"Avestan",nativeName:"avesta"},{code:"ay",name:"Aymara",nativeName:"aymar aru"},{code:"az",name:"Azerbaijani",nativeName:"azÉrbaycan dili"},{code:"bm",name:"Bambara",nativeName:"bamanankan"},{code:"ba",name:"Bashkir",nativeName:"Ð±Ð°ÑÒ¡Ð¾ÑÑ ÑÐµÐ»Ðµ"},{code:"eu",name:"Basque",nativeName:"euskara, euskera"},{code:"be",name:"Belarusian",nativeName:"ÐÐµÐ»Ð°ÑÑÑÐºÐ°Ñ"},{code:"bn",name:"Bengali",nativeName:"à¦¬à¦¾à¦à¦²à¦¾"},{code:"bh",name:"Bihari",nativeName:"à¤­à¥à¤à¤ªà¥à¤°à¥"},{code:"bi",name:"Bislama",nativeName:"Bislama"},{code:"bs",name:"Bosnian",nativeName:"bosanski jezik"},{code:"br",name:"Breton",nativeName:"brezhoneg"},{code:"bg",name:"Bulgarian",nativeName:"Ð±ÑÐ»Ð³Ð°ÑÑÐºÐ¸ ÐµÐ·Ð¸Ðº"},{code:"my",name:"Burmese",nativeName:"ááá¬áá¬"},{code:"ca",name:"Catalan; Valencian",nativeName:"CatalÃ "},{code:"ch",name:"Chamorro",nativeName:"Chamoru"},{code:"ce",name:"Chechen",nativeName:"Ð½Ð¾ÑÑÐ¸Ð¹Ð½ Ð¼Ð¾ÑÑ"},{code:"ny",name:"Chichewa; Chewa; Nyanja",nativeName:"chiCheÅµa, chinyanja"},{code:"zh",name:"Chinese",nativeName:"ä¸­æ (ZhÅngwÃ©n), æ±è¯­, æ¼¢èª"},{code:"cv",name:"Chuvash",nativeName:"ÑÓÐ²Ð°Ñ ÑÓÐ»ÑÐ¸"},{code:"kw",name:"Cornish",nativeName:"Kernewek"},{code:"co",name:"Corsican",nativeName:"corsu, lingua corsa"},{code:"cr",name:"Cree",nativeName:"áá¦áá­ááá£"},{code:"hr",name:"Croatian",nativeName:"hrvatski"},{code:"cs",name:"Czech",nativeName:"Äesky, ÄeÅ¡tina"},{code:"da",name:"Danish",nativeName:"dansk"},{code:"dv",name:"Divehi; Dhivehi; Maldivian;",nativeName:"ÞÞ¨ÞÞ¬ÞÞ¨"},{code:"nl",name:"Dutch",nativeName:"Nederlands, Vlaams"},{code:"en",name:"English",nativeName:"English"},{code:"eo",name:"Esperanto",nativeName:"Esperanto"},{code:"et",name:"Estonian",nativeName:"eesti, eesti keel"},{code:"ee",name:"Ewe",nativeName:"EÊegbe"},{code:"fo",name:"Faroese",nativeName:"fÃ¸royskt"},{code:"fj",name:"Fijian",nativeName:"vosa Vakaviti"},{code:"fi",name:"Finnish",nativeName:"suomi, suomen kieli"},{code:"fr",name:"French",nativeName:"franÃ§ais, langue franÃ§aise"},{code:"ff",name:"Fula; Fulah; Pulaar; Pular",nativeName:"Fulfulde, Pulaar, Pular"},{code:"gl",name:"Galician",nativeName:"Galego"},{code:"ka",name:"Georgian",nativeName:"á¥áá áá£áá"},{code:"de",name:"German",nativeName:"Deutsch"},{code:"el",name:"Greek, Modern",nativeName:"ÎÎ»Î»Î·Î½Î¹ÎºÎ¬"},{code:"gn",name:"GuaranÃ­",nativeName:"AvaÃ±eáº½"},{code:"gu",name:"Gujarati",nativeName:"àªà«àªàª°àª¾àª¤à«"},{code:"ht",name:"Haitian; Haitian Creole",nativeName:"KreyÃ²l ayisyen"},{code:"ha",name:"Hausa",nativeName:"Hausa, ÙÙÙÙØ³Ù"},{code:"he",name:"Hebrew (modern)",nativeName:"×¢××¨××ª"},{code:"hz",name:"Herero",nativeName:"Otjiherero"},{code:"hi",name:"Hindi",nativeName:"à¤¹à¤¿à¤¨à¥à¤¦à¥, à¤¹à¤¿à¤à¤¦à¥"},{code:"ho",name:"Hiri Motu",nativeName:"Hiri Motu"},{code:"hu",name:"Hungarian",nativeName:"Magyar"},{code:"ia",name:"Interlingua",nativeName:"Interlingua"},{code:"id",name:"Indonesian",nativeName:"Bahasa Indonesia"},{code:"ie",name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},{code:"ga",name:"Irish",nativeName:"Gaeilge"},{code:"ig",name:"Igbo",nativeName:"Asá»¥sá»¥ Igbo"},{code:"ik",name:"Inupiaq",nativeName:"IÃ±upiaq, IÃ±upiatun"},{code:"io",name:"Ido",nativeName:"Ido"},{code:"is",name:"Icelandic",nativeName:"Ãslenska"},{code:"it",name:"Italian",nativeName:"Italiano"},{code:"iu",name:"Inuktitut",nativeName:"áááááá¦"},{code:"ja",name:"Japanese",nativeName:"æ¥æ¬èª (ã«ã»ããï¼ã«ã£ã½ãã)"},{code:"jv",name:"Javanese",nativeName:"basa Jawa"},{code:"kl",name:"Kalaallisut, Greenlandic",nativeName:"kalaallisut, kalaallit oqaasii"},{code:"kn",name:"Kannada",nativeName:"à²à²¨à³à²¨à²¡"},{code:"kr",name:"Kanuri",nativeName:"Kanuri"},{code:"ks",name:"Kashmiri",nativeName:"à¤à¤¶à¥à¤®à¥à¤°à¥, ÙØ´ÙÙØ±Ùâ"},{code:"kk",name:"Kazakh",nativeName:"ÒÐ°Ð·Ð°Ò ÑÑÐ»Ñ"},{code:"km",name:"Khmer",nativeName:"áá¶áá¶ááááá"},{code:"ki",name:"Kikuyu, Gikuyu",nativeName:"GÄ©kÅ©yÅ©"},{code:"rw",name:"Kinyarwanda",nativeName:"Ikinyarwanda"},{code:"ky",name:"Kirghiz, Kyrgyz",nativeName:"ÐºÑÑÐ³ÑÐ· ÑÐ¸Ð»Ð¸"},{code:"kv",name:"Komi",nativeName:"ÐºÐ¾Ð¼Ð¸ ÐºÑÐ²"},{code:"kg",name:"Kongo",nativeName:"KiKongo"},{code:"ko",name:"Korean",nativeName:"íêµ­ì´ (éåèª), ì¡°ì ë§ (æé®®èª)"},{code:"ku",name:"Kurdish",nativeName:"KurdÃ®, ÙÙØ±Ø¯Ûâ"},{code:"kj",name:"Kwanyama, Kuanyama",nativeName:"Kuanyama"},{code:"la",name:"Latin",nativeName:"latine, lingua latina"},{code:"lb",name:"Luxembourgish, Letzeburgesch",nativeName:"LÃ«tzebuergesch"},{code:"lg",name:"Luganda",nativeName:"Luganda"},{code:"li",name:"Limburgish, Limburgan, Limburger",nativeName:"Limburgs"},{code:"ln",name:"Lingala",nativeName:"LingÃ¡la"},{code:"lo",name:"Lao",nativeName:"àºàº²àºªàº²àº¥àº²àº§"},{code:"lt",name:"Lithuanian",nativeName:"lietuviÅ³ kalba"},{code:"lu",name:"Luba-Katanga",nativeName:""},{code:"lv",name:"Latvian",nativeName:"latvieÅ¡u valoda"},{code:"gv",name:"Manx",nativeName:"Gaelg, Gailck"},{code:"mk",name:"Macedonian",nativeName:"Ð¼Ð°ÐºÐµÐ´Ð¾Ð½ÑÐºÐ¸ ÑÐ°Ð·Ð¸Ðº"},{code:"mg",name:"Malagasy",nativeName:"Malagasy fiteny"},{code:"ms",name:"Malay",nativeName:"bahasa Melayu, Ø¨ÙØ§Ø³ ÙÙØ§ÙÙâ"},{code:"ml",name:"Malayalam",nativeName:"à´®à´²à´¯à´¾à´³à´"},{code:"mt",name:"Maltese",nativeName:"Malti"},{code:"mi",name:"MÄori",nativeName:"te reo MÄori"},{code:"mr",name:"Marathi (MarÄá¹­hÄ«)",nativeName:"à¤®à¤°à¤¾à¤ à¥"},{code:"mh",name:"Marshallese",nativeName:"Kajin MÌ§ajeÄ¼"},{code:"mn",name:"Mongolian",nativeName:"Ð¼Ð¾Ð½Ð³Ð¾Ð»"},{code:"na",name:"Nauru",nativeName:"EkakairÅ© Naoero"},{code:"nv",name:"Navajo, Navaho",nativeName:"DinÃ© bizaad, DinÃ©kÊ¼ehÇ°Ã­"},{code:"nb",name:"Norwegian BokmÃ¥l",nativeName:"Norsk bokmÃ¥l"},{code:"nd",name:"North Ndebele",nativeName:"isiNdebele"},{code:"ne",name:"Nepali",nativeName:"à¤¨à¥à¤ªà¤¾à¤²à¥"},{code:"ng",name:"Ndonga",nativeName:"Owambo"},{code:"nn",name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},{code:"no",name:"Norwegian",nativeName:"Norsk"},{code:"ii",name:"Nuosu",nativeName:"êê ê¿ Nuosuhxop"},{code:"nr",name:"South Ndebele",nativeName:"isiNdebele"},{code:"oc",name:"Occitan",nativeName:"Occitan"},{code:"oj",name:"Ojibwe, Ojibwa",nativeName:"ááááá¯á§áá"},{code:"cu",name:"Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic",nativeName:"Ñ©Ð·ÑÐºÑ ÑÐ»Ð¾Ð²Ñ£Ð½ÑÑÐºÑ"},{code:"om",name:"Oromo",nativeName:"Afaan Oromoo"},{code:"or",name:"Oriya",nativeName:"à¬à¬¡à¬¼à¬¿à¬"},{code:"os",name:"Ossetian, Ossetic",nativeName:"Ð¸ÑÐ¾Ð½ Ã¦Ð²Ð·Ð°Ð³"},{code:"pa",name:"Panjabi, Punjabi",nativeName:"à¨ªà©°à¨à¨¾à¨¬à©, Ù¾ÙØ¬Ø§Ø¨Ûâ"},{code:"pi",name:"PÄli",nativeName:"à¤ªà¤¾à¤´à¤¿"},{code:"fa",name:"Persian",nativeName:"ÙØ§Ø±Ø³Û"},{code:"pl",name:"Polish",nativeName:"polski"},{code:"ps",name:"Pashto, Pushto",nativeName:"Ù¾ÚØªÙ"},{code:"pt",name:"Portuguese",nativeName:"PortuguÃªs"},{code:"qu",name:"Quechua",nativeName:"Runa Simi, Kichwa"},{code:"rm",name:"Romansh",nativeName:"rumantsch grischun"},{code:"rn",name:"Kirundi",nativeName:"kiRundi"},{code:"ro",name:"Romanian, Moldavian, Moldovan",nativeName:"romÃ¢nÄ"},{code:"ru",name:"Russian",nativeName:"ÑÑÑÑÐºÐ¸Ð¹ ÑÐ·ÑÐº"},{code:"sa",name:"Sanskrit (Saá¹ská¹ta)",nativeName:"à¤¸à¤à¤¸à¥à¤à¥à¤¤à¤®à¥"},{code:"sc",name:"Sardinian",nativeName:"sardu"},{code:"sd",name:"Sindhi",nativeName:"à¤¸à¤¿à¤¨à¥à¤§à¥, Ø³ÙÚÙØ Ø³ÙØ¯Ú¾Ûâ"},{code:"se",name:"Northern Sami",nativeName:"DavvisÃ¡megiella"},{code:"sm",name:"Samoan",nativeName:"gagana faa Samoa"},{code:"sg",name:"Sango",nativeName:"yÃ¢ngÃ¢ tÃ® sÃ¤ngÃ¶"},{code:"sr",name:"Serbian",nativeName:"ÑÑÐ¿ÑÐºÐ¸ ÑÐµÐ·Ð¸Ðº"},{code:"gd",name:"Scottish Gaelic; Gaelic",nativeName:"GÃ idhlig"},{code:"sn",name:"Shona",nativeName:"chiShona"},{code:"si",name:"Sinhala, Sinhalese",nativeName:"à·à·à¶à·à¶½"},{code:"sk",name:"Slovak",nativeName:"slovenÄina"},{code:"sl",name:"Slovene",nativeName:"slovenÅ¡Äina"},{code:"so",name:"Somali",nativeName:"Soomaaliga, af Soomaali"},{code:"st",name:"Southern Sotho",nativeName:"Sesotho"},{code:"es",name:"Spanish; Castilian",nativeName:"espaÃ±ol, castellano"},{code:"su",name:"Sundanese",nativeName:"Basa Sunda"},{code:"sw",name:"Swahili",nativeName:"Kiswahili"},{code:"ss",name:"Swati",nativeName:"SiSwati"},{code:"sv",name:"Swedish",nativeName:"svenska"},{code:"ta",name:"Tamil",nativeName:"à®¤à®®à®¿à®´à¯"},{code:"te",name:"Telugu",nativeName:"à°¤à±à°²à±à°à±"},{code:"tg",name:"Tajik",nativeName:"ÑÐ¾Ò·Ð¸ÐºÓ£, toÄikÄ«, ØªØ§Ø¬ÛÚ©Ûâ"},{code:"th",name:"Thai",nativeName:"à¹à¸à¸¢"},{code:"ti",name:"Tigrinya",nativeName:"áµáá­á"},{code:"bo",name:"Tibetan Standard, Tibetan, Central",nativeName:"à½à½¼à½à¼à½¡à½²à½"},{code:"tk",name:"Turkmen",nativeName:"TÃ¼rkmen, Ð¢Ò¯ÑÐºÐ¼ÐµÐ½"},{code:"tl",name:"Tagalog",nativeName:"Wikang Tagalog, ááááá áááááá"},{code:"tn",name:"Tswana",nativeName:"Setswana"},{code:"to",name:"Tonga (Tonga Islands)",nativeName:"faka Tonga"},{code:"tr",name:"Turkish",nativeName:"TÃ¼rkÃ§e"},{code:"ts",name:"Tsonga",nativeName:"Xitsonga"},{code:"tt",name:"Tatar",nativeName:"ÑÐ°ÑÐ°ÑÑÐ°, tatarÃ§a, ØªØ§ØªØ§Ø±ÚØ§â"},{code:"tw",name:"Twi",nativeName:"Twi"},{code:"ty",name:"Tahitian",nativeName:"Reo Tahiti"},{code:"ug",name:"Uighur, Uyghur",nativeName:"UyÆ£urqÉ, Ø¦ÛÙØºÛØ±ÚÛâ"},{code:"uk",name:"Ukrainian",nativeName:"ÑÐºÑÐ°ÑÐ½ÑÑÐºÐ°"},{code:"ur",name:"Urdu",nativeName:"ÙØ¯Ø±Ø§"},{code:"uz",name:"Uzbek",nativeName:"zbek, ÐÐ·Ð±ÐµÐº, Ø£ÛØ²Ø¨ÛÙâ"},{code:"ve",name:"Venda",nativeName:"Tshivená¸a"},{code:"vi",name:"Vietnamese",nativeName:"Tiáº¿ng Viá»t"},{code:"vo",name:"VolapÃ¼k",nativeName:"VolapÃ¼k"},{code:"wa",name:"Walloon",nativeName:"Walon"},{code:"cy",name:"Welsh",nativeName:"Cymraeg"},{code:"wo",name:"Wolof",nativeName:"Wollof"},{code:"fy",name:"Western Frisian",nativeName:"Frysk"},{code:"xh",name:"Xhosa",nativeName:"isiXhosa"},{code:"yi",name:"Yiddish",nativeName:"××Ö´×××©"},{code:"yo",name:"Yoruba",nativeName:"YorÃ¹bÃ¡"},{code:"za",name:"Zhuang, Chuang",nativeName:"SaÉ¯ cueÅÆ, Saw cuengh"}],getLanguageCode:function(t){var i="",a=e.isoLangs.filter(function(e){return e.nativeName.toLowerCase().indexOf(t.toLowerCase())>=0});return i=0===a.length?"en":a[0].code},codeToEnglish:function(e){var t={ab:"Abkhazian",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",nb:"Norwegian BokmÃ¥l",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",es:"Spanish",ca:"Valencian",km:"Central Khmer",ch:"Chamorro",ce:"Chechen",ny:"Nyanja",zh:"Chinese",za:"Zhuang",cu:"Old Slavonic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Maldivian",nl:"Flemish",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fulah",gd:"Scottish Gaelic",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",ki:"Kikuyu",el:"Greek, Modern (1453-)",kl:"Kalaallisut",gn:"Guarani",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",is:"Icelandic",io:"Ido",ig:"Igbo",id:"Indonesian",ia:"Interlingua (International Auxiliary Language Association)",ie:"Occidental",iu:"Inuktitut",ik:"Inupiaq",ga:"Irish",it:"Italian",ja:"Japanese",jv:"Javanese",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",rw:"Kinyarwanda",ky:"Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kwanyama",ku:"Kurdish",lo:"Lao",la:"Latin",lv:"Latvian",lb:"Luxembourgish",li:"Limburgish",ln:"Lingala",lt:"Lithuanian",lu:"Luba-Katanga",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",gv:"Manx",mi:"Maori",mr:"Marathi",mh:"Marshallese",ro:"Romanian",mn:"Mongolian",na:"Nauru",nv:"Navajo",nd:"North Ndebele",nr:"South Ndebele",ng:"Ndonga",ne:"Nepali",se:"Northern Sami",no:"Norwegian",nn:"Nynorsk, Norwegian",ii:"Sichuan Yi",oc:"Occitan (post 1500)",oj:"Ojibwa",or:"Oriya",om:"Oromo",os:"Ossetic",pi:"Pali",pa:"Punjabi",ps:"Pushto",fa:"Persian",pl:"Polish",pt:"Portuguese",qu:"Quechua",rm:"Romansh",rn:"Rundi",ru:"Russian",sm:"Samoan",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sr:"Serbian",sn:"Shona",sd:"Sindhi",si:"Sinhalese",sk:"Slovak",sl:"Slovenian",so:"Somali",st:"Sotho, Southern",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",tl:"Tagalog",ty:"Tahitian",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga (Tonga Islands)",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uyghur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"VolapÃ¼k",wa:"Walloon",cy:"Welsh",fy:"Western Frisian",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"},i={abk:"Abkhazian",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe",aar:"Afar",afh:"Afrihili",afr:"Afrikaans",afa:"Afro-Asiatic languages",ain:"Ainu",aka:"Akan",akk:"Akkadian",alb:"Albanian",sqi:"Albanian",gsw:"Swiss German",ale:"Aleut",alg:"Algonquian languages",tut:"Altaic languages",amh:"Amharic",anp:"Angika",apa:"Apache languages",ara:"Arabic",arg:"Aragonese",arp:"Arapaho",arw:"Arawak",arm:"Armenian",hye:"Armenian",rup:"Macedo-Romanian",art:"Artificial languages",asm:"Assamese",ast:"Leonese",ath:"Athapascan languages",aus:"Australian languages",map:"Austronesian languages",ava:"Avaric",ave:"Avestan",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",ban:"Balinese",bat:"Baltic languages",bal:"Baluchi",bam:"Bambara",bai:"Bamileke languages",bad:"Banda languages",bnt:"Bantu languages",bas:"Basa",bak:"Bashkir",baq:"Basque",eus:"Basque",btk:"Batak languages",bej:"Beja",bel:"Belarusian",bem:"Bemba",ben:"Bengali",ber:"Berber languages",bho:"Bhojpuri",bih:"Bihari languages",bik:"Bikol",byn:"Blin",bin:"Edo",bis:"Bislama",zbl:"Blissymbols",nob:"Norwegian BokmÃ¥l",bos:"Bosnian",bra:"Braj",bre:"Breton",bug:"Buginese",bul:"Bulgarian",bua:"Buriat",bur:"Burmese",mya:"Burmese",cad:"Caddo",spa:"Spanish",cat:"Valencian",cau:"Caucasian languages",ceb:"Cebuano",cel:"Celtic languages",cai:"Central American Indian languages",khm:"Central Khmer",chg:"Chagatai",cmc:"Chamic languages",cha:"Chamorro",che:"Chechen",chr:"Cherokee",nya:"Nyanja",chy:"Cheyenne",chb:"Chibcha",chi:"Chinese",zho:"Chinese",chn:"Chinook jargon",chp:"Dene Suline",cho:"Choctaw",zha:"Zhuang",chu:"Old Slavonic",chk:"Chuukese",chv:"Chuvash",nwc:"Old Newari",syc:"Classical Syriac",rar:"Rarotongan",cop:"Coptic",cor:"Cornish",cos:"Corsican",cre:"Cree",mus:"Creek",crp:"Creoles and pidgins",cpe:"Creoles and pidgins, English based",cpf:"Creoles and pidgins, French-based",cpp:"Creoles and pidgins, Portuguese-based",crh:"Crimean Turkish",hrv:"Croatian",cus:"Cushitic languages",cze:"Czech",ces:"Czech",dak:"Dakota",dan:"Danish",dar:"Dargwa",del:"Delaware",div:"Maldivian",zza:"Zazaki",din:"Dinka",doi:"Dogri",dgr:"Dogrib",dra:"Dravidian languages",dua:"Duala",dut:"Flemish",nld:"Flemish",dum:"Dutch, Middle (ca.1050-1350)",dyu:"Dyula",dzo:"Dzongkha",frs:"Eastern Frisian",efi:"Efik",egy:"Egyptian (Ancient)",eka:"Ekajuk",elx:"Elamite",eng:"English",enm:"English, Middle (1100-1500)",ang:"English, Old (ca.450-1100)",myv:"Erzya",epo:"Esperanto",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fat:"Fanti",fao:"Faroese",fij:"Fijian",fil:"Pilipino",fin:"Finnish",fiu:"Finno-Ugrian languages",fon:"Fon",fre:"French",fra:"French",frm:"French, Middle (ca.1400-1600)",fro:"French, Old (842-ca.1400)",fur:"Friulian",ful:"Fulah",gaa:"Ga",gla:"Scottish Gaelic",car:"Galibi Carib",glg:"Galician",lug:"Ganda",gay:"Gayo",gba:"Gbaya",gez:"Geez",geo:"Georgian",kat:"Georgian",ger:"German",deu:"German",nds:"Saxon, Low",gmh:"German, Middle High (ca.1050-1500)",goh:"German, Old High (ca.750-1050)",gem:"Germanic languages",kik:"Kikuyu",gil:"Gilbertese",gon:"Gondi",gor:"Gorontalo",got:"Gothic",grb:"Grebo",grc:"Greek, Ancient (to 1453)",gre:"Greek, Modern (1453-)",ell:"Greek, Modern (1453-)",kal:"Kalaallisut",grn:"Guarani",guj:"Gujarati",gwi:"Gwich'in",hai:"Haida",hat:"Haitian Creole",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",him:"Western Pahari languages",hin:"Hindi",hmo:"Hiri Motu",hit:"Hittite",hmn:"Mong",hun:"Hungarian",hup:"Hupa",iba:"Iban",ice:"Icelandic",isl:"Icelandic",ido:"Ido",ibo:"Igbo",ijo:"Ijo languages",ilo:"Iloko",arc:"Official Aramaic (700-300 BCE)",smn:"Inari Sami",inc:"Indic languages",ine:"Indo-European languages",ind:"Indonesian",inh:"Ingush",ina:"Interlingua (International Auxiliary Language Association)",ile:"Occidental",iku:"Inuktitut",ipk:"Inupiaq",ira:"Iranian languages",gle:"Irish",mga:"Irish, Middle (900-1200)",sga:"Irish, Old (to 900)",iro:"Iroquoian languages",ita:"Italian",jpn:"Japanese",jav:"Javanese",kac:"Kachin",jrb:"Judeo-Arabic",jpr:"Judeo-Persian",kbd:"Kabardian",kab:"Kabyle",xal:"Oirat",kam:"Kamba",kan:"Kannada",kau:"Kanuri",pam:"Pampanga",kaa:"Kara-Kalpak",krc:"Karachay-Balkar",krl:"Karelian",kar:"Karen languages",kas:"Kashmiri",csb:"Kashubian",kaw:"Kawi",kaz:"Kazakh",kha:"Khasi",khi:"Khoisan languages",kho:"Sakan",kmb:"Kimbundu",kin:"Kinyarwanda",kir:"Kyrgyz",tlh:"tlhIngan-Hol",kom:"Komi",kon:"Kongo",kok:"Konkani",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",kro:"Kru languages",kua:"Kwanyama",kum:"Kumyk",kur:"Kurdish",kru:"Kurukh",kut:"Kutenai",lad:"Ladino",lah:"Lahnda",lam:"Lamba",day:"Land Dayak languages",lao:"Lao",lat:"Latin",lav:"Latvian",ltz:"Luxembourgish",lez:"Lezghian",lim:"Limburgish",lin:"Lingala",lit:"Lithuanian",jbo:"Lojban",dsb:"Lower Sorbian",loz:"Lozi",lub:"Luba-Katanga",lua:"Luba-Lulua",lui:"Luiseno",smj:"Lule Sami",lun:"Lunda",luo:"Luo (Kenya and Tanzania)",lus:"Lushai",mac:"Macedonian",mkd:"Macedonian",mad:"Madurese",mag:"Magahi",mai:"Maithili",mak:"Makasar",mlg:"Malagasy",may:"Malay",msa:"Malay",mal:"Malayalam",mlt:"Maltese",mnc:"Manchu",mdr:"Mandar",man:"Mandingo",mni:"Manipuri",mno:"Manobo languages",glv:"Manx",mao:"Maori",mri:"Maori",arn:"Mapudungun",mar:"Marathi",chm:"Mari",mah:"Marshallese",mwr:"Marwari",mas:"Masai",myn:"Mayan languages",men:"Mende",mic:"Micmac",min:"Minangkabau",mwl:"Mirandese",moh:"Mohawk",mdf:"Moksha",rum:"Romanian",ron:"Romanian",mkh:"Mon-Khmer languages",lol:"Mongo",mon:"Mongolian",mos:"Mossi",mul:"Multiple languages",mun:"Munda languages",nqo:"N'Ko",nah:"Nahuatl languages",nau:"Nauru",nav:"Navajo",nde:"North Ndebele",nbl:"South Ndebele",ndo:"Ndonga",nap:"Neapolitan","new":"Newari",nep:"Nepali",nia:"Nias",nic:"Niger-Kordofanian languages",ssa:"Nilo-Saharan languages",niu:"Niuean",zxx:"Not applicable",nog:"Nogai",non:"Norse, Old",nai:"North American Indian languages",frr:"Northern Frisian",sme:"Northern Sami",nso:"Sotho, Northern",nor:"Norwegian",nno:"Nynorsk, Norwegian",nub:"Nubian languages",iii:"Sichuan Yi",nym:"Nyamwezi",nyn:"Nyankole",nyo:"Nyoro",nzi:"Nzima",oci:"Occitan (post 1500)",pro:"ProvenÃ§al, Old (to 1500)",oji:"Ojibwa",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetic",oto:"Otomian languages",pal:"Pahlavi",pau:"Palauan",pli:"Pali",pag:"Pangasinan",pan:"Punjabi",pap:"Papiamento",paa:"Papuan languages",pus:"Pushto",per:"Persian",fas:"Persian",peo:"Persian, Old (ca.600-400 B.C.)",phi:"Philippine languages",phn:"Phoenician",pon:"Pohnpeian",pol:"Polish",por:"Portuguese",pra:"Prakrit languages",que:"Quechua",raj:"Rajasthani",rap:"Rapanui","qaa-qtz":"Reserved for local use",roa:"Romance languages",roh:"Romansh",rom:"Romany",run:"Rundi",rus:"Russian",sal:"Salishan languages",sam:"Samaritan Aramaic",smi:"Sami languages",smo:"Samoan",sad:"Sandawe",sag:"Sango",san:"Sanskrit",sat:"Santali",srd:"Sardinian",sas:"Sasak",sco:"Scots",sel:"Selkup",sem:"Semitic languages",srp:"Serbian",srr:"Serer",shn:"Shan",sna:"Shona",scn:"Sicilian",sid:"Sidamo",sgn:"Sign Languages",bla:"Siksika",snd:"Sindhi",sin:"Sinhalese",sit:"Sino-Tibetan languages",sio:"Siouan languages",sms:"Skolt Sami",den:"Slave (Athapascan)",sla:"Slavic languages",slo:"Slovak",slk:"Slovak",slv:"Slovenian",sog:"Sogdian",som:"Somali",son:"Songhai languages",snk:"Soninke",wen:"Sorbian languages",sot:"Sotho, Southern",sai:"South American Indian languages",alt:"Southern Altai",sma:"Southern Sami",srn:"Sranan Tongo",suk:"Sukuma",sux:"Sumerian",sun:"Sundanese",sus:"Susu",swa:"Swahili",ssw:"Swati",swe:"Swedish",syr:"Syriac",tgl:"Tagalog",tah:"Tahitian",tai:"Tai languages",tgk:"Tajik",tmh:"Tamashek",tam:"Tamil",tat:"Tatar",tel:"Telugu",ter:"Tereno",tet:"Tetum",tha:"Thai",tib:"Tibetan",bod:"Tibetan",tig:"Tigre",tir:"Tigrinya",tem:"Timne",tiv:"Tiv",tli:"Tlingit",tpi:"Tok Pisin",tkl:"Tokelau",tog:"Tonga (Nyasa)",ton:"Tonga (Tonga Islands)",tsi:"Tsimshian",tso:"Tsonga",tsn:"Tswana",tum:"Tumbuka",tup:"Tupi languages",tur:"Turkish",ota:"Turkish, Ottoman (1500-1928)",tuk:"Turkmen",tvl:"Tuvalu",tyv:"Tuvinian",twi:"Twi",udm:"Udmurt",uga:"Ugaritic",uig:"Uyghur",ukr:"Ukrainian",umb:"Umbundu",mis:"Uncoded languages",und:"Undetermined",hsb:"Upper Sorbian",urd:"Urdu",uzb:"Uzbek",vai:"Vai",ven:"Venda",vie:"Vietnamese",vol:"VolapÃ¼k",vot:"Votic",wak:"Wakashan languages",wln:"Walloon",war:"Waray",was:"Washo",wel:"Welsh",cym:"Welsh",fry:"Western Frisian",wal:"Wolaytta",wol:"Wolof",xho:"Xhosa",sah:"Yakut",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",ypk:"Yupik languages",znd:"Zande languages",zap:"Zapotec",zen:"Zenaga",zul:"Zulu",zun:"Zuni"},a=e.split("-")[0];
return t[a]||i[a]||a},englishToCode:function(e){var t={Estonian:"et",Telugu:"te",Kyrgyz:"ky","Sichuan Yi":"ii",Bulgarian:"bg",Norwegian:"no",Yoruba:"yo",Bambara:"bm",French:"fr",Fijian:"fj",Bengali:"bn",Tsonga:"ts",Tamil:"ta",Kalaallisut:"kl",Kanuri:"kr",Samoan:"sm",Uyghur:"ug",Nepali:"ne",Finnish:"fi",Manx:"gv",Sundanese:"su",Albanian:"sq",Occidental:"ie",Ojibwa:"oj","Haitian Creole":"ht",Navajo:"nv",Tagalog:"tl",Serbian:"sr",Malayalam:"ml",Aragonese:"an",Italian:"it",Walloon:"wa","Greek, Modern (1453-)":"el",Hebrew:"he",Chamorro:"ch",Bislama:"bi",Kongo:"kg","Sotho, Southern":"st",Galician:"gl",German:"de",Slovak:"sk",Yiddish:"yi","Tonga (Tonga Islands)":"to",Polish:"pl",Xhosa:"xh",Marshallese:"mh",Marathi:"mr","VolapÃÂ¼k":"vo",Ossetic:"os",Ewe:"ee",Fulah:"ff",Valencian:"ca",Azerbaijani:"az",Faroese:"fo",Nauru:"na",Cree:"cr",Danish:"da",Indonesian:"id",Latin:"la",Zulu:"zu",Georgian:"ka",Tigrinya:"ti",Ganda:"lg",Sinhalese:"si",Komi:"kv",Tajik:"tg",Thai:"th",Afrikaans:"af",Tibetan:"bo",Turkmen:"tk","Central Khmer":"km",Kikuyu:"ki",Avaric:"av",Guarani:"gn",Cornish:"kw",Uzbek:"uz",Punjabi:"pa",Herero:"hz",Urdu:"ur",Burmese:"my",Maori:"mi",Latvian:"lv",English:"en","Bihari languages":"bh",Lingala:"ln","North Ndebele":"nd",Chinese:"zh",Flemish:"nl",Inuktitut:"iu",Tatar:"tt",Pali:"pi",Spanish:"es",Arabic:"ar",Venda:"ve",Breton:"br",Swahili:"sw",Swedish:"sv","Interlingua (International Auxiliary Language Association)":"ia",Icelandic:"is","Nynorsk, Norwegian":"nn","Scottish Gaelic":"gd",Turkish:"tr",Twi:"tw",Inupiaq:"ik",Gujarati:"gu",Hindi:"hi",Sindhi:"sd",Korean:"ko",Malagasy:"mg",Chuvash:"cv","Occitan (post 1500)":"oc",Hungarian:"hu",Wolof:"wo",Igbo:"ig",Lithuanian:"lt",Malay:"ms",Nyanja:"ny",Luxembourgish:"lb",Russian:"ru",Croatian:"hr",Kazakh:"kk",Amharic:"am",Armenian:"hy",Maldivian:"dv","Hiri Motu":"ho",Slovenian:"sl",Romansh:"rm",Javanese:"jv",Oriya:"or",Afar:"aa",Hausa:"ha",Irish:"ga",Czech:"cs",Belarusian:"be",Kannada:"kn",Macedonian:"mk",Persian:"fa",Mongolian:"mn",Dzongkha:"dz",Basque:"eu",Aymara:"ay","Northern Sami":"se",Kashmiri:"ks",Vietnamese:"vi",Romanian:"ro",Shona:"sn",Sardinian:"sc","Western Frisian":"fy",Corsican:"co",Swati:"ss",Chechen:"ce",Somali:"so",Sanskrit:"sa",Kwanyama:"kj",Bosnian:"bs",Akan:"ak",Lao:"lo",Limburgish:"li",Ukrainian:"uk",Welsh:"cy","Norwegian BokmÃÂ¥l":"nb",Tahitian:"ty",Pushto:"ps",Maltese:"mt",Assamese:"as","Old Slavonic":"cu",Kurdish:"ku",Bashkir:"ba","Luba-Katanga":"lu",Quechua:"qu",Tswana:"tn",Ido:"io",Sango:"sg",Oromo:"om",Rundi:"rn",Portuguese:"pt",Abkhazian:"ab","South Ndebele":"nr",Ndonga:"ng",Japanese:"ja",Kinyarwanda:"rw",Avestan:"ae",Zhuang:"za",Esperanto:"eo"},i={Vai:"vai",Kosraean:"kos",Palauan:"pau",Kyrgyz:"kir",Niuean:"niu",Fanti:"fat","Artificial languages":"art",Masai:"mas",Bambara:"bam",Santali:"sat",Duala:"dua",Votic:"vot","Karachay-Balkar":"krc",Tsonga:"tso",Kanuri:"kau",Umbundu:"umb",Lahnda:"lah",Hiligaynon:"hil",Kachin:"kac",Pangasinan:"pag",Yiddish:"yid",Ga:"gaa",Mossi:"mos","Munda languages":"mun","Zande languages":"znd","Swiss German":"gsw","Southern Sami":"sma",Kawi:"kaw",Konkani:"kok",Nauru:"nau",Sasak:"sas",Latin:"lat",Zulu:"zul",Georgian:"kat",Tigrinya:"tir","Baltic languages":"bat",Tibetan:"tib","Khoisan languages":"khi","Central Khmer":"khm",Ingush:"inh",Dzongkha:"dzo",Guarani:"grn","German, Middle High (ca.1050-1500)":"gmh","Kru languages":"kro","Persian, Old (ca.600-400 B.C.)":"peo","French, Old (842-ca.1400)":"fro",Kurukh:"kru",Herero:"her",Latvian:"lav",English:"eng",Croatian:"hrv",Chinese:"zho","Celtic languages":"cel",Inuktitut:"iku",Tatar:"tat",Pali:"pli","Philippine languages":"phi",Yapese:"yap",Arabic:"ara",Venda:"ven","Proven\\u00e7al, Old (to 1500)":"pro",Erzya:"myv",Oriya:"ori",Inupiaq:"ipk",Lojban:"jbo",Hindi:"hin",Ewondo:"ewo","Eastern Frisian":"frs","Tonga (Nyasa)":"tog",Oirat:"xal",Hungarian:"hun",Wolof:"wol",Bosnian:"bos",Mandar:"mdr",Afrihili:"afh",Manchu:"mnc",Russian:"rus",Romany:"rom",Gbaya:"gba",Kazakh:"kaz",Tiv:"tiv",Undetermined:"und","Hiri Motu":"hmo",Angika:"anp","Apache languages":"apa",Braj:"bra","Sino-Tibetan languages":"sit",Mirandese:"mwl",German:"ger",Lezghian:"lez",Basque:"baq",Tumbuka:"tum",Adyghe:"ady","Creoles and pidgins":"crp",Vietnamese:"vie","Iranian languages":"ira","Sranan Tongo":"srn",Chechen:"che",Nzima:"nzi","Northern Sami":"sme",Sanskrit:"san",Ekajuk:"eka",Grebo:"grb","Skolt Sami":"sms",Welsh:"cym","Ijo languages":"ijo",Gondi:"gon",Makasar:"mak",Kamba:"kam","Reserved for local use":"qaa-qtz",Lushai:"lus",Edo:"bin",Kinyarwanda:"kin","German, Old High (ca.750-1050)":"goh",Hebrew:"heb",Esperanto:"epo",Nyamwezi:"nym",Telugu:"tel","Indic languages":"inc","Macedo-Romanian":"rup",Newari:"new","Old Newari":"nwc","Nubian languages":"nub",Armenian:"arm",Sandawe:"sad","South American Indian languages":"sai",Tamil:"tam","Australian languages":"aus",Kalaallisut:"kal",Pushto:"pus",Dinka:"din","Dutch, Middle (ca.1050-1350)":"dum","Siouan languages":"sio",Lamba:"lam",Micmac:"mic","Sotho, Southern":"sot",Galician:"glg","Upper Sorbian":"hsb",Madurese:"mad",Chamorro:"cha",Khasi:"kha",Mandingo:"man",Marshallese:"mah",Marathi:"mar",Slovenian:"slv","Salishan languages":"sal","Crimean Turkish":"crh",Sindhi:"snd",Elamite:"elx",Bashkir:"bak",Norwegian:"nor",Ganda:"lug",Komi:"kom",Aragonese:"arg",Hittite:"hit",Turkmen:"tuk",Sukuma:"suk","Karen languages":"kar","Tonga (Tonga Islands)":"ton","Indo-European languages":"ine","Bihari languages":"bih","Yupik languages":"ypk","North Ndebele":"nde",Flemish:"dut",Tokelau:"tkl","Cushitic languages":"cus",Beja:"bej",Kabyle:"kab",Sakan:"kho",Gothic:"got",Tamashek:"tmh","Kara-Kalpak":"kaa",Swahili:"swa","Samaritan Aramaic":"sam","Bantu languages":"bnt","Creoles and pidgins, English based":"cpe",Cherokee:"chr","Greek, Modern (1453-)":"gre",Yao:"yao",Dyula:"dyu","Turkish, Ottoman (1500-1928)":"ota",Magahi:"mag",Malagasy:"mlg",Tlingit:"tli",Maori:"mri","Occitan (post 1500)":"oci","Bamileke languages":"bai",Igbo:"ibo",Ladino:"lad","Papuan languages":"paa",Luxembourgish:"ltz",Serer:"srr",Phoenician:"phn","Sorbian languages":"wen",Selkup:"sel",Baluchi:"bal",Ossetic:"oss","Banda languages":"bad",Rajasthani:"raj",Zazaki:"zza","Central American Indian languages":"cai",Hausa:"hau","Dene Suline":"chp",Kumyk:"kum","Romance languages":"roa",Avaric:"ava",Chuukese:"chk",Mapudungun:"arn","Niger-Kordofanian languages":"nic",Kashmiri:"kas",Maithili:"mai","Tok Pisin":"tpi",Japanese:"jpn","Sotho, Northern":"nso",Swati:"ssw","Semitic languages":"sem","Dravidian languages":"dra",Balinese:"ban",Dogri:"doi","Athapascan languages":"ath",Limburgish:"lim",Ukrainian:"ukr",Tuvinian:"tyv",Rarotongan:"rar",Maltese:"mlt",Assamese:"asm",Tswana:"tsn",Coptic:"cop",Afrikaans:"afr","Mayan languages":"myn",Portuguese:"por",Achinese:"ace","South Ndebele":"nbl",Tereno:"ter",Avestan:"ave",Minangkabau:"min","Uncoded languages":"mis","Sichuan Yi":"iii","Sami languages":"smi",Pampanga:"pam",Cornish:"cor",Bulgarian:"bul",Moksha:"mdf",Yoruba:"yor",Arawak:"arw",Nyankole:"nyn",French:"fre",Karelian:"krl",Bengali:"ben",Basa:"bas",Uyghur:"uig",Nepali:"nep",Finnish:"fin",Sundanese:"sun",Albanian:"sqi",Irish:"gle",Tagalog:"tgl",Serbian:"srp",Italian:"ita",Luiseno:"lui",Chibcha:"chb",Walloon:"wln","Manobo languages":"mno",Kimbundu:"kmb","Luba-Lulua":"lua","Wakashan languages":"wak",Amharic:"amh",Tajik:"tgk",Rapanui:"rap",Urdu:"urd",Lozi:"loz",Gorontalo:"gor",Chagatai:"chg","Volap\\u00fck":"vol",Waray:"war",Nias:"nia",Kutenai:"kut",Fulah:"ful",Buginese:"bug",Cheyenne:"chy",Fon:"fon",Awadhi:"awa",Cree:"cre","Otomian languages":"oto",Indonesian:"ind",Hawaiian:"haw",Sidamo:"sid","Nilo-Saharan languages":"ssa",Sinhalese:"sin",Adangme:"ada",Thai:"tha",Navajo:"nav","Afro-Asiatic languages":"afa",Ugaritic:"uga",Uzbek:"uzb",Zenaga:"zen",Burmese:"bur",Aleut:"ale","Egyptian (Ancient)":"egy",Lingala:"lin","tlhIngan-Hol":"tlh","Finno-Ugrian languages":"fiu",Kwanyama:"kua","Galibi Carib":"car","Greek, Ancient (to 1453)":"grc",Friulian:"fur",Nyoro:"nyo",Breton:"bre","Nynorsk, Norwegian":"nno","Scottish Gaelic":"gla",Turkish:"tur",Samoan:"smo",Soninke:"snk",Zapotec:"zap",Pilipino:"fil",Chuvash:"chv","Algonquian languages":"alg","Germanic languages":"gem",Lithuanian:"lit","Western Pahari languages":"him",Malay:"may","N'Ko":"nqo",Zuni:"zun",Iban:"iba",Cebuano:"ceb",Iloko:"ilo",Mohawk:"moh",Dogrib:"dgr",Romansh:"roh","Gwich'in":"gwi","French, Middle (ca.1400-1600)":"frm",Javanese:"jav",Kannada:"kan",Persian:"fas",Mongolian:"mon",Choctaw:"cho","Batak languages":"btk",Aymara:"aym",Leonese:"ast",Shona:"sna","Western Frisian":"fry",Corsican:"cos",Kpelle:"kpe",Somali:"som",Blissymbols:"zbl",Arapaho:"arp","Judeo-Persian":"jpr","Chinook jargon":"chn",Akan:"aka","Land Dayak languages":"day",Syriac:"syr","Sign Languages":"sgn","Norwegian Bokm\\u00e5l":"nob",Tahitian:"tah",Siksika:"bla",Dargwa:"dar","Old Slavonic":"chu",Sogdian:"sog","Prakrit languages":"pra",Gayo:"gay","Slavic languages":"sla",Sango:"sag","Judeo-Arabic":"jrb",Oromo:"orm",Neapolitan:"nap",Bemba:"bem",Blin:"byn",Quechua:"que","Lower Sorbian":"dsb",Estonian:"est",Fang:"fan","Inari Sami":"smn","Irish, Middle (900-1200)":"mga",Fijian:"fij",Pohnpeian:"pon",Mong:"hmn",Delaware:"del","Mon-Khmer languages":"mkh",Manx:"glv","Norse, Old":"non","Songhai languages":"son",Occidental:"ile","Haitian Creole":"hat","Irish, Old (to 900)":"sga",Malayalam:"mal",Efik:"efi",Creek:"mus","Creoles and pidgins, Portuguese-based":"cpp",Mongo:"lol","Lule Sami":"smj",Bislama:"bis",Kongo:"kon",Acoli:"ach",Timne:"tem",Papiamento:"pap",Slovak:"slk",Dakota:"dak",Polish:"pol",Xhosa:"xho",Swedish:"swe",Ainu:"ain","Altaic languages":"tut",Mari:"chm",Ewe:"ewe","Tupi languages":"tup",Valencian:"cat",Faroese:"fao",Geez:"gez",Tetum:"tet",Pahlavi:"pal",Marwari:"mwr","Not applicable":"zxx","Berber languages":"ber",Gilbertese:"gil",Kikuyu:"kik",Punjabi:"pan",Tigre:"tig","Multiple languages":"mul",Bhojpuri:"bho",Tsimshian:"tsi","Chamic languages":"cmc",Nogai:"nog","English, Middle (1100-1500)":"enm",Yakut:"sah",Sumerian:"sux",Bikol:"bik",Manipuri:"mni",Buriat:"bua",Hupa:"hup","North American Indian languages":"nai","Interlingua (International Auxiliary Language Association)":"ina",Icelandic:"ice",Twi:"twi",Gujarati:"guj","Tai languages":"tai",Akkadian:"akk",Kashubian:"csb",Korean:"kor",Shan:"shn","Caucasian languages":"cau","Nahuatl languages":"nah","Saxon, Low":"nds","Northern Frisian":"frr",Nyanja:"nya",Caddo:"cad",Maldivian:"div",Haida:"hai","Iroquoian languages":"iro",Afar:"aar",Wolaytta:"wal",Udmurt:"udm",Osage:"osa","Creoles and pidgins, French-based":"cpf",Sicilian:"scn",Czech:"ces","Luo (Kenya and Tanzania)":"luo",Kabardian:"kbd",Belarusian:"bel",Macedonian:"mkd",Lunda:"lun",Romanian:"rum",Azerbaijani:"aze",Sardinian:"srd","Austronesian languages":"map",Lao:"lao","Slave (Athapascan)":"den",Mende:"men",Ojibwa:"oji",Kurdish:"kur","Classical Syriac":"syc",Danish:"dan","Luba-Katanga":"lub",Spanish:"spa",Ido:"ido",Tuvalu:"tvl",Rundi:"run",Abkhazian:"abk","Official Aramaic (700-300 BCE)":"arc","Southern Altai":"alt",Ndonga:"ndo",Scots:"sco",Susu:"sus",Washo:"was",Zhuang:"zha","English, Old (ca.450-1100)":"ang"};return t[e]||i[e]||null}};return{codeToEnglish:e.codeToEnglish,englishToCode:e.englishToCode,getLanguageCode:e.getLanguageCode}}();define("utils/language_utils",function(e){return function(){var t;return t||e.utils}}(this)),define("views/discovery_card_view",["backbone","jquery","underscore","models/analytics_discovery_card_model","text!../templates/discovery-card-course.underscore","text!../svg/logos/micromasters.svg","utils/language_utils","gettext"],function(e,t,i,a,s,n){return e.View.extend({tpl:i.template(s),events:{click:"trackClick"},initialize:function(e){this.flags=this.getFlags(),this.isWebview=e.isWebview||!1,this.setLogo(),this.setUrl(),this.render(),this.analytics=e.analytics||{},this.analyticsModel=new a},formatStartDate:function(){var e=this.model.get("attributes").start_display_date,t="Starts: ",i=" - Self-Paced";"self_paced"===this.model.get("pacing_type")&&("current"===this.model.get("availability").toLowerCase()?e="Self-Paced":0!==e.indexOf(t)&&-1===e.indexOf(i)&&(e=t+e+i)),this.model.get("attributes").start_display_date=e},formatLang:function(){var e=this.model.get("language");this.model.set("lang",languageUtils.englishToCode(e))},render:function(){return this.formatLang(),this.formatStartDate(),this.$el.html(this.tpl(this.model.toJSON())),this},className:function(){var e=["discovery-card course-card","shadow"],t=this.model.get("attributes").course_type;return t&&e.push(t),e.join(" ")},getFlags:function(){var e=[];return Drupal&&Drupal.settings&&Drupal.settings.ft_enabled_features&&(e=Drupal.settings.ft_enabled_features),e},getWebviewUrl:function(e){var t,i=e,a=e;return e.indexOf("course_info?path_id")<0&&(t=e.indexOf("course/"),t>-1&&(i=e.substr(t)),a="edxapp://course_info?path_id="+i),a},setLogo:function(){var e=null,t=!1;t=i.contains(this.model.get("program_types"),"MicroMasters"),t=t||i.where(this.model.get("programs"),{type:"MicroMasters"}).length,this.flags.show_micromasters_logo&&t&&(e=n),this.model.set({logo:e})},setUrl:function(){var e;this.isWebview&&(e=this.model.get("url"),this.model.set({url:this.getWebviewUrl(e)}))},trackClick:function(){var e=t.extend({},this.analytics,{category:"course",label:this.model.get("key")});this.analyticsModel.trackCard(e)}})}),define("views/discovery_card_program_view",["backbone","ftellipsis","jquery","underscore","models/analytics_discovery_card_model","text!../svg/logos/micromasters.svg","text!../templates/discovery-card-program.underscore","gettext","utils/language_utils"],function(e,t,i,a,s,n,r){return e.View.extend({tpl:"",events:{click:"trackClick"},attributes:function(){return{role:"group","aria-label":this.model.get("title")}},className:function(){var e=["course-card","discovery-card","program","shadow"],t=this.getProgramType(),i=t.toLowerCase();return e.push(i.replace(/\s/g,"-")),this.programType=i,e.join(" ")},initialize:function(e){this.isWebview=e.isWebview||!1,this.setTemplate(),this.setLogo(),this.setUrl(),this.render(),this.analytics=e.analytics||{},this.analyticsModel=new s},render:function(){this.updateModel(),this.$el.html(this.tpl(this.model.toJSON()))},getBannerText:function(){var e=this.getProgramType(),t=e;return"undefined"!==e&&"xseries"!==e.toLowerCase()?t+=gettext(" Program"):t="XSeries Program",t},getProgramType:function(){return this.model.get("type")||this.model.get("card_type")},getWebviewUrl:function(e){var t,i=e,a=e;return e.indexOf("course_info?path_id")<0&&(t=e.indexOf("course/"),t>-1&&(i=e.substr(t)),a="edxapp://course_info?path_id="+i),a},setLogo:function(){var e=!1;"micromasters"===this.programType&&(e=n),this.model.set({logo:e})},setTemplate:function(){this.tpl=a.template(r)},setUrl:function(){var e;this.isWebview&&(e=this.model.get("url"),this.model.set({url:this.getWebviewUrl(e)}))},trackClick:function(){var e=i.extend({},this.analytics,{category:"program",label:this.model.get("title")+" ["+this.model.get("uuid")+"]"});this.analyticsModel.trackCard(e)},updateModel:function(){var e=this.model.get("language");this.model.set({bannerText:this.getBannerText(),lang:languageUtils.englishToCode(e)})}})}),define("views/schema_update",["backbone","jquery","underscore"],function(e,t,i){return e.View.extend({scriptTag:".js-schema",initialize:function(e){var i;this.graph=e.graph||!1,this.$scriptTag=t(this.scriptTag),i=this.$scriptTag.html(),this.schemaJSON=i?JSON.parse(i):!1,this.newItem=e.newItem||this.createItem(),this.schemaJSON&&this.updateSchema(this.graph)},createItem:function(){return!1},formatData:function(){return{}},updateSchema:function(){var e,a=this.schemaJSON["@graph"],s=i.findIndex(a,{"@type":this.graph});s>-1?(e=t.extend(!0,a[s],this.formatData(a[s])),a[s]=e,this.schemaJSON["@graph"]=a,this.$scriptTag.html(JSON.stringify(this.schemaJSON))):this.newItem&&(this.schemaJSON["@graph"].push(this.newItem),this.$scriptTag.html(JSON.stringify(this.schemaJSON)))}})}),define("text!templates/discovery-card-list.underscore",[],function(){return'<div class="js-card-list filtered <%- classList %>"></div>\n<div class="loading">\n    <span class="fa fa-refresh fa-spin" aria-hidden="true"></span>\n    <span class="sr">Your search results are </span>Loading...\n</div>\n'}),define("views/course_catalog_discovery_card_list_view",["backbone","ftellipsis","jquery","underscore","views/discovery_card_view","views/discovery_card_program_view","views/schema_update","text!templates/discovery-card-list.underscore","gettext"],function(e,t,i,a,s,n,r,o){return e.View.extend({pagesLoaded:0,tpl:a.template(o),initialize:function(e){this.classList=e.classList||"",this.analytics=e.analytics||{},this.uiStateModel=e.uiStateModel||{},this.collection.on("reset",function(){this.loadMore("reset")},this),this.model.on("loading",this.loadingResults,this),this.render()},render:function(){var e={classList:this.classList};this.$el.html(this.tpl(e)),this.postRender()},postRender:function(){this.loadCards()},addCard:function(){var e=i(document.createDocumentFragment()),t=!a.isEmpty(this.uiStateModel)&&this.uiStateModel.get("isWebview");return this.collection.each(function(a,r){var o=this.getTrueIndex(r),l="courserun"===a.get("content_type"),c=l?s:n;this["discovery-card-"+o]=new c({model:a,isWebview:t,analytics:i.extend({},this.analytics,{index:o})}),e.append(this["discovery-card-"+o].$el)},this),e},elementOnScreen:function(e){var t,a=i(window).height(),s=window.pageYOffset?window.pageYOffset:i(window).scrollTop(),n=e.offset().top,r=e.height(),o=this.$loading.offset().top;return t=n-160,a+s>t&&(t>s-r||o>s-r)},getTrueIndex:function(e){var t=this.collection.length*this.pagesLoaded;return t+e},loadingResults:function(){this.$el.addClass("waiting"),this.$el.attr("aria-busy",!0)},loadCards:function(){this.$listWrapper=this.$(".js-card-list"),this.$listWrapper.prepend(this.addCard()),this.$loading=this.$(".loading"),this.$el.removeClass("waiting"),this.$el.attr("aria-busy",!1),this.truncateText(this.$(".discovery-card .ellipsis-multi-line")),this.collection.next?this.setListeners():this.$loading.addClass("hidden")},loadMore:function(e){e&&"reset"===e?(this.pagesLoaded=0,this.$listWrapper.html(this.addCard()),this.$el.removeClass("waiting"),this.$loading.removeClass("hidden"),this.setListeners()):(this.pagesLoaded++,this.$listWrapper.append(this.addCard()),this.scrollListener()),this.updateSchema(),this.$el.attr("aria-busy",!1),this.truncateText(this.$(".discovery-card .ellipsis-multi-line")),this.collection.next||this.$loading.addClass("hidden")},setListeners:function(){this.collection.off("sync"),this.collection.on("sync",this.loadMore,this),this.scrollListener()},scrollListener:function(){var e=i(window);e.off("scroll"),e.on("scroll",a.bind(function(){var t=this.$(".discovery-card").last();this.elementOnScreen(t)&&(e.off("scroll"),this.collection.nextPage())},this))},truncateText:function(e){a.each(e,function(e){var i=new t(e);i.calc(),i.set()})},updateSchema:function(){var e={"@type":"ItemList",itemListElement:[]};this.collection.each(function(t,i){var a=this.getTrueIndex(i);e.itemListElement.push({"@type":"ListItem",position:a,url:t.get("url")})},this),this.itemListSchemaUpdate=new r({newItem:e})}})}),define("text!templates/search-results-card-list.underscore",[],function(){return'<div class="js-featured-results"></div>\n<div class="js-card-list filtered"></div>\n<div class="loading">\n    <span class="fa fa-refresh fa-spin" aria-hidden="true"></span>\n    <span class="sr">Your search results are </span>Loading...\n</div>\n'}),define("search/views/card_list_view",["ftellipsis","jquery","underscore","views/course_catalog_discovery_card_list_view","text!templates/search-results-card-list.underscore","gettext"],function(e,t,i,a,s){return a.extend({tpl:i.template(s)})}),define("text!templates/search-results-featured.underscore",[],function(){return'<div class="view-featured-courses-on-search">\n    <div class="no-results">\n        <h3>We couldn\'t find any results for "<span class="query-str"><%- query %></span>".</h3>\n        <ul>\n            <li>Try searching for a related term.</li>\n            <li>Browse all of our courses, using filters to refine your options.</li>\n        </ul>\n    </div>\n    <div class="header search-featured-courses">\n        <h3>Featured Courses</h3>\n    </div>\n    <div class="content search-featured-courses"></div>\n    <div class="header search-featured-programs">\n        <h3>Featured Programs</h3>\n    </div>\n    <div class="content search-featured-programs"></div>\n</div>\n'}),define("search/views/featured_results_view",["backbone","ftellipsis","jquery","underscore","views/discovery_card_view","views/discovery_card_program_view","utils","text!templates/search-results-featured.underscore","gettext","chosen"],function(e,t,i,a,s,n,r,o){return e.View.extend({el:".js-featured-results",tpl:a.template(o),initialize:function(e){var t=this.hideBasedOnFacets();this.flags=e.flags?e.flags:this.getFlags(),this.uiStateModel=e.uiStateModel||{},this.courseRunCollection=this.collection.courseRunCollection,this.programCollection=this.collection.programCollection,this.model.on("change",this.onChange,this),t||this.render()},render:function(){this.$el.html(this.tpl(this.model)),this.postRender()},postRender:function(){this.testFeaturedPresent(),this.testQuery()},getFlags:function(){var e=[];return Drupal&&Drupal.settings&&Drupal.settings.ft_enabled_features&&(e=Drupal.settings.ft_enabled_features),e},testFeaturedPresent:function(){var e,t,i,a,s=this.model.get("featured_course_runs"),n=s&&s.objects.count>0;this.flags.search_featured_programs&&(e=this.model.get("featured_programs")),t=e&&e.objects.count>0,n||t?(this.$el.removeClass("hidden"),i=this.testFeaturedContent(s,this.$(".search-featured-courses")),a=this.testFeaturedContent(e,this.$(".search-featured-programs")),i&&this.addCourses(),a&&this.addPrograms()):this.$el.addClass("hidden")},testFeaturedContent:function(e,t){return e&&e.objects.count>0?(t.removeClass("hidden"),!0):(t.addClass("hidden"),!1)},testQuery:function(){var e=this.model.query,t=this.model.get("no_matches");e&&t?(this.$(".no-results").removeClass("hidden"),this.model.removeQueryString(!1)):this.$(".no-results").addClass("hidden")},onChange:function(){var e=this.model.get("no_matches"),t=!this.model.query,i=this.hideBasedOnFacets();this.courseRunCollection&&this.model.hasChanged("featured_course_runs")&&0===this.courseRunCollection.length&&this.courseRunCollection.reset(this.model.get("featured_course_runs"),{parse:!0}),this.programCollection&&this.model.hasChanged("featured_programs")&&0===this.programCollection.length&&this.programCollection.reset(this.model.get("featured_programs"),{parse:!0}),!e&&!t||i?this.$el.addClass("hidden"):this.render()},addCourses:function(){var e=this.getCardList(this.courseRunCollection,s,"course");this.$(".content.search-featured-courses").html(e),this.truncateText(this.$(".discovery-card .ellipsis-multi-line"))},addPrograms:function(){var e=this.getCardList(this.programCollection,n,"program");this.$(".content.search-featured-programs").html(e)},getCardList:function(e,t,s){var n=i(document.createDocumentFragment()),r=!a.isEmpty(this.uiStateModel)&&this.uiStateModel.get("isWebview");return e.sort(),e.each(function(e,i){var a="discovery-card-"+s+"-"+i;this[a]=new t({model:e,isWebview:r,analytics:{index:i,featured:!0}}),n.append(this[a].$el)},this),n},hideBasedOnFacets:function(){var e,t,i=this.model.facets||[],a=i.length>0;return 1===i.length&&(e=this.model.facets[0],t=e.content_type_exact,("courserun"===t||"program"===t)&&(a=!1)),a},truncateText:function(e){a.each(e,function(e){var i=new t(e);i.calc(),i.set()})}})}),define("text!templates/search-results-facet-dropdown.underscore",[],function(){return'<h3><%- title %></h3>\n<div class="<%= facetType %>-search<% if ( isSelected ) {%> school-selected<% } %>">\n  <% if (facets.length === 1 && facets[0].selected) { %>\n    <ul class="facet-list collapse">\n        <li class="selected">\n            <button class="facet-option" data-value="<%- facets[0].text %>">\n                <%- facets[0].text %><span class="sr"> facet applied, click to remove</span>\n                <span class="count"><%- facets[0].count %></span>\n            </button>\n        </li>\n    </ul>                \n  <% } else { %>\n    <select class="facet-select select-<%= facetType %>" aria-labelledby="school-select-default">\n        <option id="school-select-default" value="">Filter by School/Partner</option>\n      <% _.each(facets, function(facet) { %>\n        <option value="<%- facet.value || facet.text %>"<% if (facet.selected) { %> selected<% } %>>\n            <%- facet.text %>\n        </option>\n      <% }) %>\n    </select>\n  <% } %>\n</div>\n'}),define("search/views/facets_section_dropdown_view",["backbone","jquery","underscore","utils","text!templates/search-results-facet-dropdown.underscore","gettext"],function(e,t,i,a,s){return e.View.extend({events:{"change select":"selectFacet","click .facet-option":"selectFacet"},eventsDisabled:!1,tpl:i.template(s),initialize:function(e){this.facetType=e.data.facetType,this.data=this.formatData(e.data),this.model.on("loading",this.loadingResults,this),this.render()},render:function(){this.$el.html(this.tpl(this.data)),this.postRender()},postRender:function(){this.$select=this.$("select"),this.eventsDisabled=!1},facetSelected:function(){var e=this.model.facets,t=this.facetType+"_exact",a=!1;return e&&e.length&&(a=i.pluck(e,t).join("")),a},formatData:function(e){var i,a="";return this.selectedFacet=this.facetSelected(),this.selectedFacet&&this.selectedFacet.length>0?(i=this.model.get("fields")[this.facetType],a=t.extend(e,{facets:[{text:this.truncateTitle(this.selectedFacet),count:i[0].count,selected:!0}],isSelected:!0})):(i=e.facets.sort(this.sortText),a=t.extend(e,{facets:this.formatTitle(i),isSelected:!1})),a},formatTitle:function(e){var t,i,a=e.length;for(t=0;a>t;t++)i=e[t].text,e[t].text=this.truncateTitle(i),e[t].value=i;return e},loadingResults:function(){this.eventsDisabled=!0},selectFacet:function(e){var t=this.$select.val();e.preventDefault(),this.eventsDisabled||(this.selectedFacet?(this.model.trigger("loading",'Removing "'+this.truncateTitle(this.selectedFacet)+'" facet'),this.model.removeFacet(this.facetType,this.selectedFacet)):t.length&&(this.model.trigger("loading",'Applying "'+this.truncateTitle(t)+'" facet'),this.model.addFacet(this.facetType,t)))},sortText:function(e,t){var i=e.text.toLowerCase(),a=t.text.toLowerCase(),s=0;return a>i?s=-1:i>a&&(s=1),s},truncateTitle:function(e){return e.slice(0,e.indexOf(":"))}})}),define("text!templates/search-results-facet-list.underscore",[],function(){return'<h3><%- title %></h3>\n<ul class="facet-list collapse">\n    <% _.each(facets, function(facet) {\n        if (facet.selected) { %>\n            <li class="selected">\n                <button class="facet-option" data-value="<%- facet.text %>" tabindex="0">\n                    <%- facet.text %><span class="sr"> facet applied, click to remove</span>\n                    <span class="count" aria-hidden="true"><%- facet.count %></span>\n                </button>\n            </li>\n        <% } else { %>\n            <li>\n                <button class="facet-option" data-value="<%- facet.text %>" tabindex="0">\n                    <%- facet.text %>\n                    <span class="count"><%- facet.count %><span class="sr"> result<% if (facet.count !== 1) { %>s<% } %></span></span>\n                </button>\n            </li>\n        <% }\n    }) %>\n</ul>\n\n<% if (enableToggle && facets.length > 10) { %>\n    <div class="toggle">\n        <button class="cta-text show-more" tabindex="-1" aria-hidden="true">More...</button>\n        <button class="cta-text show-less hidden" tabindex="-1" aria-hidden="true">Less...</button>\n    </div>\n<% } %>\n'}),define("search/views/facets_section_list_view",["backbone","jquery","underscore","text!templates/search-results-facet-list.underscore","gettext"],function(e,t,i,a){return e.View.extend({events:{"click .facet-option":"facetAction","click .show-more":"sectionExpand","click .show-less":"sectionCollapse"},eventsDisabled:!1,itemHeight:34,tpl:i.template(a),initialize:function(e){this.facetType=e.data.facetType||e.data.title.toLowerCase(),this.data=this.formatData(e.data),this.model.on("loading",this.loadingResults,this),this.render()},render:function(){this.data.facets.length?(this.$el.html(this.tpl(this.data)),this.postRender()):this.remove()},postRender:function(){this.$ul=this.$(".facet-list"),this.$more=this.$(".show-more"),this.$less=this.$(".show-less"),this.eventsDisabled=!1},facetAction:function(e){var i=t(e.currentTarget),a=i.parent("li").hasClass("selected")?"removeFacet":"addFacet",s=i.data("value"),n="removeFacet"===a?"Removing":"Applying";e.preventDefault(),n+=' "'+s+'" facet',this.eventsDisabled||(this.model.trigger("loading",n),this.model[a](this.facetType,s))},facetSelected:function(){var e=this.model.facets,t=this.facetType+"_exact",a=!1;return e&&e.length&&(a=i.pluck(e,t).join("")),a},formatData:function(e){var i="",a=this.facetSelected();return i=a.length>0?t.extend(e,{facets:this.getSelectedFacetObject(e,a)}):t.extend(e,{facets:this.sortData(e.facets)})},getSelectedFacetObject:function(e,t){var a=i.findWhere(e.facets,{text:t});return a.selected=!0,[a]},loadingResults:function(){this.eventsDisabled=!0},sectionCollapse:function(e){e.preventDefault(),this.$ul.css("max-height","").addClass("collapse"),this.$more.removeClass("hidden"),this.$less.addClass("hidden")},sectionExpand:function(e){var t=this.data.facets.length;e.preventDefault(),this.eventsDisabled||(this.$ul.removeClass("collapse").css("max-height",t*this.itemHeight+"px"),this.$less.removeClass("hidden"),this.$more.addClass("hidden"))},sortData:function(e){return i.sortBy(e,"text")}})}),define("search/views/facets_section_custom_list_view",["jquery","underscore","search/views/facets_section_list_view","search/models/facet_display_name_model","gettext"],function(e,t,i,a){return i.extend({validFacetTypes:[],initialize:function(e){var t,i=e.data.facets;this.displayNameModel=new a,t=this.getFacetList(i),this.facetType=e.data.title.toLowerCase(),this.data=this.formatData(e.data,t),this.model.on("loading",this.loadingResults,this),this.render()},facetAction:function(t){var i=e(t.currentTarget),a=i.parent("li").hasClass("selected")?"removeFacet":"addFacet",s=i.data("value"),n="removeFacet"===a?"Removing":"Applying",r=this.displayNameModel.getFacetName({text:s}),o=this.getFacetType(r);t.preventDefault(),this.eventsDisabled||(n+=' "'+s+'" facet',this.model.trigger("loading",n),this.model[a](o,r.text))},facetSelected:function(){var e,i=this.model.facets,a=!1,s=this.validFacetTypes.length;if(i&&i.length)for(e=0;s>e;e++)a=t.pluck(i,this.validFacetTypes[e]).join(""),a.length>0&&(e=s);return a},formatData:function(i,a){var s,n,r,o="",l=this.facetSelected();return a=t.compact(a),a=t.uniq(a),l.length>0?(a.length>0&&(n=this.displayNameModel.getDisplayName({text:l}),r=t.findWhere(a,{text:l})||t.findWhere(a,{text:n.text}),r.selected=!0),s=[r]):s=a,s=this.displayNameModel.mapDisplayNames(s),o=e.extend(i,{facets:this.sortData(s)})},getFacetIndex:function(e,t){return e.map(function(e){return e.text}).indexOf(t)},getFacetList:function(e){return this.displayNameModel.mapDisplayNames(e)},getFacetType:function(){return"type"},removeFacet:function(e,i){return t.reject(e,function(e){return e.text===i})},sortData:function(e){return e=t.compact(e),t.uniq(e)}})}),define("search/views/facets_section_availability_list_view",["jquery","underscore","search/views/facets_section_custom_list_view","search/models/facet_display_name_model","gettext"],function(e,t,i,a){return i.extend({validFacetTypes:["selected_query_facet","pacing_type_exact"],initialize:function(e){var t;this.displayNameModel=new a,t=this.getFacetList(),this.facetType=e.data.title.toLowerCase(),this.data=this.formatData(e.data,t),this.model.on("loading",this.loadingResults,this),this.render()
},getFacetList:function(){var e=t.map(this.model.get("queries")),i=this.model.get("fields"),a=this.displayNameModel.getDisplayName({text:"self_paced"}),s=t.findWhere(i.pacing_type,{text:"self_paced"})||t.findWhere(i.pacing_type,{text:a.text});return t.each(e,function(e){var t=e.query_string,i="=availability_",a=t.indexOf(i)+1;e.text=t.substring(a)}),s&&e.push(s),e},getSelectedFacetObject:function(e,i){var a=t.findWhere(e.facets,{text:i});return a.selected=!0,[a]},getFacetType:function(e){return"self_paced"===e.text?"pacing_type":"selected_query_facet"},sortData:function(e){var i,a;return e=t.compact(e),e=t.uniq(e),e=t.sortBy(e,"text"),e=e.reverse(),i=t.findWhere(e,{text:"Upcoming"}),i&&(a=this.getFacetIndex(e,"Starting Soon"),a&&(e=this.removeFacet(e,"Upcoming"),e.splice(a,0,i))),i=t.findWhere(e,{text:"Current"}),i&&(e=this.removeFacet(e,"Current"),e.unshift(i)),t.uniq(e)}})}),define("search/views/facets_section_types_list_view",["jquery","underscore","search/views/facets_section_custom_list_view","search/models/facet_display_name_model","gettext"],function(e,t,i){return i.extend({validFacetTypes:["type_exact","seat_types_exact","content_type_exact"],productTypes:["credit","micromasters","professional","xseries","professional certificate"],getFacetList:function(e){var i=["honor"],a=t.compact(e),a=t.reject(a,function(e){return t.contains(i,e.text)});return this.displayNameModel.mapDisplayNames(a)},getFacetType:function(e){var t="courserun"===e.text||"program"===e.text;return t?"content_type":this.productTypes.indexOf(e.text.toLowerCase())>-1?"type":"seat_types"},sortData:function(e){return e=t.compact(e),e=t.uniq(e),e=t.reject(e,function(e){return"audit"===e.text}),t.sortBy(e,"text")}})}),define("text!templates/search-results-facet-sidebar.underscore",[],function(){return'<h2>Refine your search</h2>\n\n<section class="js-availability"></section>\n\n<% if ( fields.subjects && fields.subjects.length ) { %>\n    <section class="js-subjects"></section>\n<% } %>\n\n<% if ( !isWebview && ((fields.type && fields.type.length) || (fields.content_type && fields.content_type.length)) ) { %>        \n    <section class="js-types"></section>\n<% } %>\n\n<% if ( fields.organizations && fields.organizations.length ) { %>\n    <section class="js-organizations"></section>\n<% } %>\n\n<% if ( fields.level_type && fields.level_type.length ) { %>\n    <section class="js-level"></section>\n<% } %>\n\n<% if ( fields.language && fields.language.length ) { %>\n    <section class="js-languages"></section>\n<% } %>\n\n<button class="js-hide-list cta-text hide-list show-phone flt-right">Collapse Filters <span class="fa fa-chevron-up" aria-hidden="true"></span></button>\n'}),define("search/views/facets_sidebar_view",["backbone","jquery","underscore","search/views/facets_section_dropdown_view","search/views/facets_section_availability_list_view","search/views/facets_section_list_view","search/views/facets_section_types_list_view","text!templates/search-results-facet-sidebar.underscore","gettext"],function(e,t,i,a,s,n,r,o){return e.View.extend({el:".js-search-facets",events:{"click .js-hide-list":"hideList"},tpl:i.template(o),subviews:[],initialize:function(e){this.settingsModel=e.settingsModel,this.uiStateModel=e.uiStateModel,this.availabilityFacets=this.getAvailabilityFacets(this.model.get("fields")),this.model.on("change",this.refresh,this),this.model.on("loading",this.loading,this),this.render()},render:function(){var e=t.extend({},this.settingsModel.toJSON(),this.model.toJSON(),this.availabilityFacets,this.uiStateModel.toJSON());this.$el.html(this.tpl(e)),this.postRender()},postRender:function(){var e=this.model.get("fields");this.subviews=[],this.renderAvailabilityListSection("Availability",".js-availability"),this.renderListSection(e.subjects,"Subjects",".js-subjects",{enableToggle:!0}),this.renderListSection(e.language,"Language",".js-languages",{enableToggle:!0}),this.renderListSection(e.level_type,"Level",".js-level",{facetType:"level_type"}),this.uiStateModel.get("isWebview")||this.renderTypesListSection(e,"Courses & Programs",".js-types"),this.renderDropdownSection(e.organizations,"Schools & Partners",".js-organizations","organizations"),this.$el.addClass("phone-menu").removeClass("waiting")},getAvailabilityFacets:function(e){var a=[],s=i.findWhere(e.pacing_type,{text:"self_paced"});return s&&a.push(t.extend(s,{text:"Self-Paced"})),{availability:a}},hideList:function(){this.uiStateModel.set({facetMenuIsOpen:!1})},loading:function(){this.$el.addClass("waiting")},refresh:function(){i.each(this.subviews,function(e){e.remove()}),this.render()},renderAvailabilityListSection:function(e,t){var a=i.map(this.model.get("queries")),n=this.model.get("fields").level_type,r=i.findWhere(n.pacing_type,{text:"self_paced"});a.push(r),a.length&&this.subviews.push(new s({el:t,model:this.model,data:{title:e,enableToggle:!1,isDropdown:!1}}))},renderTypesListSection:function(e,t,a){var s=e.type.slice(),n=i.findWhere(e.content_type,{text:"courserun"}),o=i.findWhere(e.content_type,{text:"program"});s.push(n,o),s.length&&this.subviews.push(new r({el:a,model:this.model,data:{title:t,facets:s,enableToggle:!1,isDropdown:!1}}))},renderDropdownSection:function(e,t,i,s){e&&e.length&&this.subviews.push(new a({el:i,model:this.model,data:{facets:e,title:t,facetType:s,isDropdown:!0}}))},renderListSection:function(e,t,i,a){var s=t+"Section";e&&e.length&&(this[s]=new n({el:i,model:this.model,data:{facets:e,title:t,facetType:a&&a.facetType?a.facetType:!1,enableToggle:a&&a.enableToggle?a.enableToggle:!1,isDropdown:!1}}),this.subviews.push(this[s]))}})}),define("models/search_bar_model",["backbone"],function(e){return e.Model.extend({defaults:{label:"Search",placeholder:"I want to learn about...",action_label:"Submit a course search",id:1},initialize:function(){this.setId()},getId:function(){var e=1,t=999999999;return Math.floor(Math.random()*(t-e))+e},setId:function(){this.set("id",this.getId())}})}),define("text!templates/search-results-applied-filters.underscore",[],function(){return'<% if (filters.length) { %>\n<ul class="active-filters facet-list">\n  <% _.each(filters, function(filter) { %>\n    <li class="selected">\n        <button class="facet-option js-clear" data-name="<%- filter.facet %>" data-value="<%- filter.text %>" data-display-name="<%- filter.displayName %>">\n            <span class="element-invisible">Clear filter </span>\n            <% if (!!filter.facet) { %>\n                <%- filter.displayName %>\n            <% } else { %>\n                "<%- filter.displayName %>"\n            <% } %>\n\n            <span class="fa fa-times" aria-hidden="true"></span>\n        </button>\n    </li>\n  <% }) %>\n</ul>\n<button class="js-clear-all clear-filters flt-right">Clear All</button>\n<% } %>\n'}),define("search/views/facets_applied_view",["backbone","jquery","underscore","search/models/facet_display_name_model","text!templates/search-results-applied-filters.underscore","gettext"],function(e,t,i,a,s){return e.View.extend({el:".js-applied-filters",events:{"click .js-clear":"removeFacet","click .js-clear-all":"clearAll"},tpl:i.template(s),initialize:function(){this.displayNameModel=new a,this.render(),this.model.on("change",function(){this.render()},this),this.model.on("loading",this.loading,this)},render:function(){var e={filters:this.formatFilters()};this.$el.html(this.tpl(e)),this.$el.removeClass("waiting")},clearAll:function(e){e.preventDefault(),this.model.trigger("loading","Removing all facets"),this.model.clearFacets()},formatFacetName:function(e){var t=e.indexOf("_exact");return t>0&&(e=e.slice(0,t)),e},formatFilters:function(){var e=this.model.query,t=this.model.facets,a=this.model.get("no_matches"),s=[];return e&&!a&&s.push({text:e,displayName:e,queryString:!0}),t&&i.each(t,function(e){var t=i.keys(e)[0],a=this.formatFacetName(t),n=i.values(e)[0],r=this.displayNameModel.getDisplayName({text:n}).text;s.push({displayName:this.formatName(r,a),facet:a,text:r})},this),s},formatName:function(e,t){return"organizations"===t&&(e=this.truncateOrgTitle(e)),e},loading:function(){this.$el.addClass("waiting")},removeFacet:function(e){var i,a=t(e.currentTarget),s=a.data("name"),n='Removing "'+a.data("display-name")+'" ';e.preventDefault(),s?(n+="facet",i=this.displayNameModel.getFacetName({text:a.data("value")}),this.model.removeFacet(s,i.text)):(n+="query",this.model.removeQueryString()),this.model.trigger("loading",n)},truncateOrgTitle:function(e){return e.slice(0,e.indexOf(":"))}})}),define("models/suggestion_engine_model",["backbone","underscore"],function(e,t){return e.Model.extend({initialize:function(e,t){var i="/api/v1/catalog/typeahead",a={local:t,remote:{url:i+"?query=%QUERY",filter:function(t){return t[e]}},dupDetector:this.dupDetector,datumTokenizer:Bloodhound.tokenizers.obj.whitespace("title"),queryTokenizer:Bloodhound.tokenizers.whitespace};this.set({engine:new Bloodhound(a)}),this.get("engine").initialize()},dupDetector:function(e,i){return t.has(e,"key")?e.key===i.key:e.uuid===i.uuid},ttAdapter:function(){return this.get("engine").ttAdapter()}})}),define("text!templates/course-search-bar.underscore",[],function(){return'<label for="edit-search-query-<%- id %>" class="search-bar-label"><%- label %>:</label>\n<div class="form form-item form-type-textfield form-item-search-query">\n  <input class="js-search-bar edit-search-query form-text" id="edit-search-query-<%- id %>" type="text" name="search_query" value="" size="60" maxlength="128">\n</div>\n<button class="btn btn-transparent edit-submit form-submit js-search-button" type="submit" id="edit-submit-<%- id %>">\n    <span class="sr"><%- action_label %></span>\n    <i class="icon fa fa-search" aria-hidden="true"></i>\n</button>\n'}),function(e){var t=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,i){function a(e,t){return i(t,e)}e.each(t,a)},map:e.map,filter:e.grep,every:function(t,i){var a=!0;return t?(e.each(t,function(e,s){return(a=i.call(null,s,e,t))?void 0:!1}),!!a):a},some:function(t,i){var a=!1;return t?(e.each(t,function(e,s){return(a=i.call(null,s,e,t))?!1:void 0}),!!a):a},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function i(){return String(t)}return e.isFunction(t)?t:i},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var a,s;return function(){var n,r,o=this,l=arguments;return n=function(){a=null,i||(s=e.apply(o,l))},r=i&&!a,clearTimeout(a),a=setTimeout(n,t),r&&(s=e.apply(o,l)),s}},throttle:function(e,t){var i,a,s,n,r,o;return r=0,o=function(){r=new Date,s=null,n=e.apply(i,a)},function(){var l=new Date,c=t-(l-r);return i=this,a=arguments,0>=c?(clearTimeout(s),s=null,r=l,n=e.apply(i,a)):s||(s=setTimeout(o,c)),n}},noop:function(){}}}(),i="0.10.5",a=function(){function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function i(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function a(e){return function(){var i=[].slice.call(arguments,0);return function(a){var s=[];return t.each(i,function(i){s=s.concat(e(t.toStr(a[i])))}),s}}}return{nonword:i,whitespace:e,obj:{nonword:a(i),whitespace:a(e)}}}(),s=function(){function i(i){this.maxSize=t.isNumber(i)?i:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function a(){this.head=this.tail=null}function s(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(i.prototype,{set:function(e,t){var i,a=this.list.tail;this.size>=this.maxSize&&(this.list.remove(a),delete this.hash[a.key]),(i=this.hash[e])?(i.val=t,this.list.moveToFront(i)):(i=new s(e,t),this.list.add(i),this.hash[e]=i,this.size++)},get:function(e){var t=this.hash[e];return t?(this.list.moveToFront(t),t.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new a}}),t.mixin(a.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),i}(),n=function(){function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function i(){return(new Date).getTime()}function a(e){return JSON.stringify(t.isUndefined(e)?null:e)}function s(e){return JSON.parse(e)}var n,r;try{n=window.localStorage,n.setItem("~~~","!"),n.removeItem("~~~")}catch(o){n=null}return r=n&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),s(n.getItem(this._prefix(e)))},set:function(e,s,r){return t.isNumber(r)?n.setItem(this._ttlKey(e),a(i()+r)):n.removeItem(this._ttlKey(e)),n.setItem(this._prefix(e),a(s))},remove:function(e){return n.removeItem(this._ttlKey(e)),n.removeItem(this._prefix(e)),this},clear:function(){var e,t,i=[],a=n.length;for(e=0;a>e;e++)(t=n.key(e)).match(this.keyMatcher)&&i.push(t.replace(this.keyMatcher,""));for(e=i.length;e--;)this.remove(i[e]);return this},isExpired:function(e){var a=s(n.getItem(this._ttlKey(e)));return t.isNumber(a)&&i()>a?!0:!1}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,r),e}(),r=function(){function i(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?a(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=t.cache===!1?new s(0):l}function a(i){return function(a,s){function n(e){t.defer(function(){o.resolve(e)})}function r(e){t.defer(function(){o.reject(e)})}var o=e.Deferred();return i(a,s,n,r),o}}var n=0,r={},o=6,l=new s(10);return i.setMaxPendingRequests=function(e){o=e},i.resetCache=function(){l.reset()},t.mixin(i.prototype,{_get:function(e,t,i){function a(t){i&&i(null,t),u._cache.set(e,t)}function s(){i&&i(!0)}function l(){n--,delete r[e],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)}var c,u=this;this.cancelled||e!==this.lastUrl||((c=r[e])?c.done(a).fail(s):o>n?(n++,r[e]=this._send(e,t).done(a).fail(s).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,i,a){var s;return t.isFunction(i)&&(a=i,i={}),this.cancelled=!1,this.lastUrl=e,(s=this._cache.get(e))?t.defer(function(){a&&a(null,s)}):this._get(e,i,a),!!s},cancel:function(){this.cancelled=!0}}),i}(),o=function(){function i(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function a(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function s(){return{ids:[],children:{}}}function n(e){for(var t={},i=[],a=0,s=e.length;s>a;a++)t[e[a]]||(t[e[a]]=!0,i.push(e[a]));return i}function r(e,t){function i(e,t){return e-t}var a=0,s=0,n=[];e=e.sort(i),t=t.sort(i);for(var r=e.length,o=t.length;r>a&&o>s;)e[a]<t[s]?a++:e[a]>t[s]?s++:(n.push(e[a]),a++,s++);return n}return t.mixin(i.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var i=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var n,r;n=i.datums.push(e)-1,r=a(i.datumTokenizer(e)),t.each(r,function(e){var t,a,r;for(t=i.trie,a=e.split("");r=a.shift();)t=t.children[r]||(t.children[r]=s()),t.ids.push(n)})})},get:function(e){var i,s,o=this;return i=a(this.queryTokenizer(e)),t.each(i,function(e){var t,i,a,n;if(s&&0===s.length)return!1;for(t=o.trie,i=e.split("");t&&(a=i.shift());)t=t.children[a];return t&&0===i.length?(n=t.ids.slice(0),void(s=s?r(s,n):n)):(s=[],!1)}),s?t.map(n(s),function(e){return o.datums[e]}):[]},reset:function(){this.datums=[],this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){function a(e){return e.local||null}function s(a){var s,n;return n={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(s=a.prefetch||null)&&(s=t.isString(s)?{url:s}:s,s=t.mixin(n,s),s.thumbprint=i+s.thumbprint,s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",!s.url&&e.error("prefetch requires url to be set")),s}function n(i){function a(e){return function(i){return t.debounce(i,e)}}function s(e){return function(i){return t.throttle(i,e)}}var n,r;return r={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(n=i.remote||null)&&(n=t.isString(n)?{url:n}:n,n=t.mixin(r,n),n.rateLimiter=/^throttle$/i.test(n.rateLimitBy)?s(n.rateLimitWait):a(n.rateLimitWait),n.ajax.type=n.ajax.type||"GET",n.ajax.dataType=n.ajax.dataType||"json",delete n.rateLimitBy,delete n.rateLimitWait,!n.url&&e.error("remote requires url to be set")),n}return{local:a,prefetch:s,remote:n}}();!function(i){function s(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=c(t.sorter),this.dupDetector=t.dupDetector||u,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new o({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new n(this.cacheKey):null}function c(e){function i(t){return t.sort(e)}function a(e){return e}return t.isFunction(e)?i:a}function u(){return!1}var h,d;return h=i.Bloodhound,d={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.Bloodhound=s,s.noConflict=function(){return i.Bloodhound=h,s},s.tokenizers=a,t.mixin(s.prototype,{_loadPrefetch:function(t){function i(e){n.clear(),n.add(t.filter?t.filter(e):e),n._saveToStorage(n.index.serialize(),t.thumbprint,t.ttl)}var a,s,n=this;return(a=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(a),s=e.Deferred().resolve()):s=e.ajax(t.url,t.ajax).done(i),s},_getFromRemote:function(e,t){function i(e,i){t(e?[]:n.remote.filter?n.remote.filter(i):i)}var a,s,n=this;if(this.transport)return e=e||"",s=encodeURIComponent(e),a=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,s),this.transport.get(a,this.remote.ajax,i)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,i){this.storage&&(this.storage.set(d.data,e,i),this.storage.set(d.protocol,location.protocol,i),this.storage.set(d.thumbprint,t,i))},_readFromStorage:function(e){var t,i={};return this.storage&&(i.data=this.storage.get(d.data),i.protocol=this.storage.get(d.protocol),i.thumbprint=this.storage.get(d.thumbprint)),t=i.thumbprint!==e||i.protocol!==location.protocol,i.data&&!t?i.data:null},_initialize:function(){function i(){s.add(t.isFunction(n)?n():n)}var a,s=this,n=this.local;return a=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),n&&a.done(i),this.transport=this.remote?new r(this.remote):null,this.initPromise=a.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,i){function a(e){var a=n.slice(0);t.each(e,function(e){var i;return i=t.some(a,function(t){return s.dupDetector(e,t)}),!i&&a.push(e),a.length<s.limit}),i&&i(s.sorter(a))}var s=this,n=[],r=!1;n=this.index.get(e),n=this.sorter(n).slice(0,this.limit),n.length<this.limit?r=this._getFromRemote(e,a):this._cancelLastRemoteRequest(),r||(n.length>0||!this.transport)&&i&&i(n)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&r.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),s}(this);var c=function(){return{wrapper:'<span class="twitter-typeahead" role="combobox" aria-autocomplete="inline" aria-expanded="false"></span>',dropdown:'<span class="tt-dropdown-menu" role="listbox" aria-label="Suggested courses and programs matching your search term"></span>',dataset:'<div class="tt-dataset-%CLASS%" role="group" aria-label="%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion" role="option"></div>'}}(),u=function(){var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),h=function(){function i(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var a="typeahead:";return t.mixin(i.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(a+e,t)}}),i}(),d=function(){function e(e,t,i,a){var s;if(!i)return this;for(t=t.split(l),i=a?o(i,a):i,this._callbacks=this._callbacks||{};s=t.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][e].push(i);return this}function t(t,i,a){return e.call(this,"async",t,i,a)}function i(t,i,a){return e.call(this,"sync",t,i,a)}function a(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function s(e){var t,i,a,s,r;if(!this._callbacks)return this;for(e=e.split(l),a=[].slice.call(arguments,1);(t=e.shift())&&(i=this._callbacks[t]);)s=n(i.sync,this,[t].concat(a)),r=n(i.async,this,[t].concat(a)),s()&&c(r);return this}function n(e,t,i){function a(){for(var a,s=0,n=e.length;!a&&n>s;s+=1)a=e[s].apply(t,i)===!1;return!a}return a}function r(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function o(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,c=r();return{onSync:i,onAsync:t,off:a,trigger:s}}(),f=function(e){function i(e,i,a){for(var s,n=[],r=0,o=e.length;o>r;r++)n.push(t.escapeRegExChars(e[r]));return s=a?"\\b("+n.join("|")+")\\b":"("+n.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var a={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function n(t){var i,a,n;return(i=o.exec(t.data))&&(n=e.createElement(s.tagName),s.className&&(n.className=s.className),a=t.splitText(i.index),a.splitText(i[0].length),n.appendChild(a.cloneNode(!0)),t.parentNode.replaceChild(n,a)),!!i}function r(e,t){for(var i,a=3,s=0;s<e.childNodes.length;s++)i=e.childNodes[s],i.nodeType===a?s+=t(i)?1:0:r(i,t)}var o;s=t.mixin({},a,s),s.node&&s.pattern&&(s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],o=i(s.pattern,s.caseSensitive,s.wordsOnly),r(s.node,n))}}(window.document),m=function(){function i(i){var s,n,o,l,c=this;i=i||{},i.input||e.error("input is missing"),s=t.bind(this._onBlur,this),n=t.bind(this._onFocus,this),o=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(i.hint),this.$input=e(i.input).on("blur.tt",s).on("focus.tt",n).on("keydown.tt",o),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){r[e.which||e.keyCode]||t.defer(t.bind(c._onInput,c,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=a(this.$input)}function a(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function n(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var r;return r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(i.prototype,d,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=r[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var i,a,s;switch(e){case"tab":a=this.getHint(),s=this.getInputValue(),i=a&&a!==s&&!n(t);break;case"up":case"down":i=!n(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function(e,t){var i;switch(e){case"tab":i=!n(t);break;default:i=!0}return i},_checkInputValue:function(){var e,t,i;e=this.getInputValue(),t=s(e,this.query),i=t?this.query.length!==e.length:!1,this.query=e,t?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,i,a;e=this.getInputValue(),t=this.getHint(),i=e!==t&&0===t.indexOf(e),a=""!==e&&i&&!this.hasOverflow(),!a&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,i,a;return e=this.$input.val().length,i=this.$input[0].selectionStart,t.isNumber(i)?i===e:document.selection?(a=document.selection.createRange(),a.moveStart("character",-e),e===a.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i}(),p=function(){function i(i){var r;i=i||{},i.templates=i.templates||{},i.source||e.error("missing source"),i.name&&!n(i.name)&&e.error("invalid dataset name: "+i.name),this.query=null,this.highlight=!!i.highlight,this.name=i.name||t.getUniqueId(),this.source=i.source,this.displayFn=a(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),r=this.name,"s-xseries"===this.name?r="program":"s-courses"===this.name&&(r="course"),this.$el=e(c.dataset.replace(/%CLASS%/gi,r))}function a(e){function i(t){return t[e]}return e=e||"value",t.isFunction(e)?e:i}function s(e,i){function a(e){return"<p>"+i(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||a}}function n(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var r="ttDataset",o="ttValue",l="ttDatum";return i.extractDatasetName=function(t){return e(t).data(r)},i.extractValue=function(t){return e(t).data(o)},i.extractDatum=function(t){return e(t).data(l)},t.mixin(i.prototype,d,{_render:function(i,a){function s(){return p.templates.empty({query:i,isEmpty:!0})}function n(){function s(t){var i;return i=e(c.suggestion).append(p.templates.suggestion(t)).data(r,p.name).data(o,p.displayFn(t)).data(l,t),i.children().each(function(){e(this).css(u.suggestionChild)}),i}var n,h;return n=e(c.suggestions).css(u.suggestions),h=t.map(a,s),n.append.apply(n,h),p.highlight&&f({className:"tt-highlight",node:n[0],pattern:i}),n}function h(){return p.templates.header({query:i,isEmpty:!m})}function d(){return p.templates.footer({query:i,isEmpty:!m})}if(this.$el){var m,p=this;this.$el.empty(),m=a&&a.length,!m&&this.templates.empty?this.$el.html(s()).prepend(p.templates.header?h():null).append(p.templates.footer?d():null):m&&this.$el.html(n()).prepend(p.templates.header?h():null).append(p.templates.footer?d():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){i.canceled||e!==i.query||i._render(e,t)}var i=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),g=function(){function i(i){var s,n,r,o=this;i=i||{},i.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(i.datasets,a),s=t.bind(this._onSuggestionClick,this),n=t.bind(this._onSuggestionMouseEnter,this),r=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(i.menu).on("click.tt",".tt-suggestion",s).on("mouseenter.tt",".tt-suggestion",n).on("mouseleave.tt",".tt-suggestion",r),t.each(this.datasets,function(e){o.$menu.append(e.getRoot()),e.onSync("rendered",o._onRendered,o)})}function a(e){return new p(e)}return t.mixin(i.prototype,d,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,i,a,s;if(this.isOpen){if(i=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),a=t.index(i)+e,a=(a+1)%(t.length+1)-1,-1===a)return void this.trigger("cursorRemoved");-1>a&&(a=t.length-1),this._setCursor(s=t.eq(a)),this._ensureVisible(s)}},_ensureVisible:function(e){var t,i,a,s;t=e.position().top,i=t+e.outerHeight(!0),a=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>t?this.$menu.scrollTop(a+t):i>s&&this.$menu.scrollTop(a+(i-s))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?u.ltr:u.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:p.extractDatum(e),value:p.extractValue(e),datasetName:p.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function i(t){t.update(e)}t.each(this.datasets,i)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0
},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),i}(),v=function(){function i(i){var s,n,r;i=i||{},i.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!i.autoselect,this.minLength=t.isNumber(i.minLength)?i.minLength:1,this.$node=a(i.input,i.withHint),s=this.$node.find(".tt-dropdown-menu"),n=this.$node.find(".tt-input"),r=this.$node.find(".tt-hint"),n.on("blur.tt",function(e){var i,a,r;i=document.activeElement,a=s.is(i),r=s.has(i).length>0,t.isMsie()&&(a||r)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){n.focus()}))}),s.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=i.eventBus||new h({el:n}),this.dropdown=new g({menu:s,datasets:i.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new m({input:n,hint:r}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function a(t,i){var a,n,o,l;a=e(t),n=e(c.wrapper).css(u.wrapper),o=e(c.dropdown).css(u.dropdown),l=a.clone().css(u.hint).css(s(a)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),a.data(r,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?u.input:u.inputWithNoHint);try{!a.attr("dir")&&a.attr("dir","auto")}catch(h){}return a.wrap(n).parent().prepend(i?l:null).append(o)}function s(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function n(e){var i=e.find(".tt-input");t.each(i.data(r),function(e,a){t.isUndefined(e)?i.removeAttr(a):i.attr(a,e)}),i.detach().removeData(r).removeClass("tt-input").insertAfter(e),e.remove()}var r="ttAttrs";return t.mixin(i.prototype,{_onSuggestionClicked:function(e,t){var i;(i=this.dropdown.getDatumForSuggestion(t))&&this._select(i)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed"),this.input.$input.parent(".twitter-typeahead").attr("aria-expanded",!1)},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var i,a;i=this.dropdown.getDatumForCursor(),a=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),t.preventDefault()):this.autoselect&&a&&(this._select(a),t.preventDefault())},_onTabKeyed:function(e,t){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,i,a,s,n,r,o;e=this.dropdown.getDatumForTopSuggestion(),o=this.input.$input.parent(".twitter-typeahead"),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(i=this.input.getInputValue(),a=m.normalizeQuery(i),s=t.escapeRegExChars(a),n=new RegExp("^(?:"+s+")(.+$)","i"),r=n.exec(e.value),r?this.input.setHint(i+r[1]):this.input.clearHint(),o.attr("aria-expanded",!0)):(this.input.clearHint(),o.attr("aria-expanded",!1))},_autocomplete:function(e){var t,i,a,s;t=this.input.getHint(),i=this.input.getQuery(),a=e||this.input.isCursorAtEnd(),t&&i!==t&&a&&(s=this.dropdown.getDatumForTopSuggestion(),s&&this.input.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.raw,s.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),n(this.$node),this.$node=null}}),i}();!function(){var i,a,s;i=e.fn.typeahead,a="ttTypeahead",s={initialize:function(i,s){function n(){var n,r,o=e(this);t.each(s,function(e){e.highlight=!!i.highlight}),r=new v({input:o,eventBus:n=new h({el:o}),withHint:t.isUndefined(i.hint)?!0:!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:s}),o.data(a,r)}return s=t.isArray(s)?s:[].slice.call(arguments,1),i=i||{},this.each(n)},open:function(){function t(){var t,i=e(this);(t=i.data(a))&&t.open()}return this.each(t)},close:function(){function t(){var t,i=e(this);(t=i.data(a))&&t.close()}return this.each(t)},val:function(t){function i(){var i,s=e(this);(i=s.data(a))&&i.setVal(t)}function s(e){var t,i;return(t=e.data(a))&&(i=t.getVal()),i}return arguments.length?this.each(i):s(this.first())},destroy:function(){function t(){var t,i=e(this);(t=i.data(a))&&(t.destroy(),i.removeData(a))}return this.each(t)}},e.fn.typeahead=function(t){var i;return s[t]&&"initialize"!==t?(i=this.filter(function(){return!!e(this).data(a)}),s[t].apply(i,[].slice.call(arguments,1))):s.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this}}()}(window.jQuery),define("typeahead",["jquery"],function(e){return function(){var t;return t||e.typeahead}}(this)),define("views/course_search_bar_view",["backbone","jquery","underscore","text!templates/course-search-bar.underscore","gettext","typeahead"],function(e,t,i,a){return e.View.extend({tpl:i.template(a),events:{"click .js-search-button":"search","click .tt-dropdown-menu .view-all":"search","keydown .js-search-bar":"handleKeypress"},key:{tab:9,enter:13,esc:27,up:38,down:40},minLength:2,resultsUrl:"/course",suggestionSelected:!1,initialize:function(){this.render()},render:function(){this.$el.html(this.tpl(this.model.toJSON())),this.postRender()},postRender:function(){this.$input=this.$el.find(".js-search-bar"),this.$submit=this.$el.find(".js-search-button"),this.typeaheadLoad(this.minLength)},analyticsAllSearch:function(){window.analytics.track("edx.bi.user.search.submitted",{category:"search"})},analyticsSearch:function(e){window.analytics.track("edx.bi.user.query.submitted",{category:"search",label:e}),this.analyticsAllSearch()},formatQuery:function(e){var t=e?encodeURIComponent(e):!1;return t?t.replace(/%20/g,"+"):""},getValue:function(e){return e.title||e.value},handleKeypress:function(e){var t=e.keyCode;t!==this.key.enter||this.suggestionSelected?t!==this.key.tab||e.shiftKey||(e.preventDefault(),this.$submit.focus()):this.search(e)},search:function(e){var t=this.$input.val(),i=this.formatQuery(t),a=this.resultsUrl;e.preventDefault(),i.length>0&&(a+="?search_query="),this.analyticsSearch(t),this.updateUrl(a+i)},typeaheadLoad:function(e){this.$input.typeahead({highlight:!0,hint:!1,minLength:e})},updateUrl:function(e){window.location.href=e}})}),define("views/typeahead_course_search_bar_view",["jquery","models/suggestion_engine_model","views/course_search_bar_view","gettext","typeahead"],function(e,t,i){return i.extend({events:{"click .js-search-button":"search","click .tt-dropdown-menu .view-all":"search","keydown .js-search-bar":"handleKeypress","typeahead:cursorchanged .js-search-bar":"highlightSuggestion","typeahead:selected .js-search-bar":"selectSuggestion"},sections:{courses:{},programs:{}},postRender:function(){this.$input=this.$el.find(".js-search-bar"),this.$submit=this.$el.find(".js-search-button"),this.initSuggestionEngine(),this.typeaheadLoad(this.minLength)},analyticsSelect:function(e,t){var i={category:"search",label:t.title,mobile:!1};"programs"===e&&(i.type=t.type),window.analytics.track("edx.bi.user."+e+".picked",i),this.analyticsAllSearch()},formatSuggestion:function(e){var t=e.title,i=e.orgs.join(", ");return t+=' <span class="alias">'+i+"</span>"},initSuggestionEngine:function(){var e=this.localCourses||[],i=this.localPrograms||[];this.sections={courses:new t("course_runs",e),programs:new t("programs",i)}},highlightSuggestion:function(e,t){this.$input.val(this.getValue(t))},selectSuggestion:function(e,t,i){this.suggestionSelected=!0,this.$input.typeahead("val",this.getValue(t)),this.setUrl(e,t,i)},setFooter:function(){return{name:"view-all",source:this.suggestionEngineEmpty,templates:{empty:'<a href="/course" class="view-all">SEE ALL RESULTS</a>'}}},setSection:function(e){var t=e.toLowerCase();return{name:"s-"+t,value:this.getValue,displayKey:this.formatSuggestion,source:this.sections[t].ttAdapter(),templates:{header:'<h3 class="league-name">'+e+"</h3>"}}},setUrl:function(e,t,i){this.analyticsSelect(i.substring(2),t),window.location.href=t.marketing_url},substringMatcher:function(t){return function(i,a){var s,n;s=[],n=new RegExp(i,"i"),e.each(t,function(e,t){var i=t.title;n.test(i)&&s.push(t)}),a(s)}},suggestionEngineEmpty:function(e,t){return t([])},typeaheadLoad:function(e){this.$input.typeahead({highlight:!0,hint:!1,minLength:e},this.setSection("Courses"),this.setSection("Programs"),this.setFooter())}})}),define("search/views/search_bar_view",["views/typeahead_course_search_bar_view"],function(e){return e.extend({analyticsAllSearch:function(){window.analytics.track("edx.bi.search-results.search.submitted",{category:"search",mobile:!1})},analyticsSearch:function(e){window.analytics.track("edx.bi.search-results.query.submitted",{category:"search",label:e,mobile:!1}),this.analyticsAllSearch()},analyticsSelect:function(e,t){var i={category:"search",label:t.title,mobile:!1};"programs"===e&&(i.type=t.type),window.analytics.track("edx.bi.search-results."+e+".picked",i),this.analyticsAllSearch()}})}),define("text!templates/search-results-header.underscore",[],function(){return'<h2 class="js-result-msg hide-phone">Viewing <span class="js-count result-count"><%- objects.count %> result<% if ( objects.count !== 1 ) {%>s<% } %> matching</span></h2>\n\n<div class="js-loading loading hidden" aria-live="assertive">\n    <span class="fa fa-refresh fa-spin" aria-hidden="true"></span>\n    <span class="js-loading-msg"></span>\n</div>\n<a href="#search-results-section" class="element-invisible element-focusable">Skip to results</a>\n<a href="#search-filter-section" class="element-invisible element-focusable">Refine your results</a>\n\n<div class="js-course-search-bar block block-customizable-search course-search-bar course-list-search-bar" role="search"></div>\n\n<% if (!isWebview) { %>\n<button class="js-facet-toggle facet-toggle show-phone" aria-expanded="false">\n    <span class="fa fa-filter" aria-hidden="true"></span>\n    <span class="sr">Show filter menu</span>\n</button>\n<% } %>\n\n<h2 class="js-result-msg mobile">Viewing <span class="js-count result-count"><%- objects.count %> result<% if ( objects.count !== 1 ) {%>s<% } %> matching</span></h2>\n\n<% if (isWebview) { %>\n<button class="js-facet-toggle facet-toggle webview-filter" aria-expanded="false">Filter Courses</button>\n<% } %>\n\n<div class="js-applied-filters filters"></div>\n'}),define("search/views/search_header_view",["backbone","jquery","underscore","models/search_bar_model","search/views/facets_applied_view","search/views/search_bar_view","text!templates/search-results-header.underscore","gettext"],function(e,t,i,a,s,n,r){return e.View.extend({el:".js-search-header",events:{"click .js-facet-toggle":"toggleMobileFacets"},tpl:i.template(r),initialize:function(e){this.settingsModel=e.settingsModel,this.uiStateModel=e.uiStateModel,this.$facetSidebar=e.facetSidebar,this.searchModel=new a,this.render(),this.model.on("change",this.setCount,this),this.model.on("loading",this.loading,this),this.uiStateModel.on("change",this.setUiState,this)},render:function(){var e=t.extend({},this.model.toJSON(),{isWebview:this.uiStateModel.get("isWebview")});this.$el.html(this.tpl(e)),this.postRender()},postRender:function(){this.$count=this.$(".js-count"),this.$resultMsg=this.$(".js-result-msg"),this.$loadingMsg=this.$(".js-loading-msg"),this.$loading=this.$(".js-loading"),this.$searchBar=this.$(".js-course-search-bar"),this.$mobileFilterBtn=this.$(".js-facet-toggle"),this.uiStateModel.get("isWebview")||(this.searchBar=new n({el:".js-course-search-bar",model:this.searchModel})),this.facetsView=new s({model:this.model,settingsModel:this.settingsModel}),this.$el.focus()},getCountString:function(e){var t=1===e?" result matching":" results matching";return e+t},loading:function(e){this.$resultMsg.addClass("hidden"),this.$searchBar.addClass("hidden"),this.$loadingMsg.html(e),this.$loading.removeClass("hidden"),this.$facetSidebar.addClass("phone-menu"),this.$mobileFilterBtn.removeClass("active")},setCount:function(){var e=this.model.get("objects").count,t=this.getCountString(e);this.$count.html(t),this.$resultMsg.removeClass("hidden"),this.$searchBar.removeClass("hidden"),this.$loading.addClass("hidden"),this.$el.focus()},setUiState:function(){var e=this.uiStateModel.get("facetMenuIsOpen");e?(this.$mobileFilterBtn.addClass("active"),this.$facetSidebar.removeClass("phone-menu")):(this.$mobileFilterBtn.removeClass("active"),this.$facetSidebar.addClass("phone-menu"))},toggleMobileFacets:function(){var e=!this.uiStateModel.get("facetMenuIsOpen");this.uiStateModel.set({facetMenuIsOpen:e}),this.$mobileFilterBtn.attr("aria-expanded",e),this.setUiState()}})}),define("text!templates/search-results.underscore",[],function(){return'<header class="js-search-header search-header<% if ( isWebview ) { %> webview<% } %>" tabindex="-1">Search Results</header>\n<section id="search-filter-section" class="js-search-facets search-facets phone-menu<% if ( edx_webview ) { %> webview<% } %>" aria-label="Refine your search" tabindex="-1" role="complementary"></section>\n<section id="search-results-section" class="js-search-results search-results" tabindex="-1" role="complementary" aria-label="Search Results" aria-busy="true">\n    <div class="loading" aria-live="assertive">\n        <span class="fa fa-refresh fa-spin" aria-hidden="true"></span>\n        <span class="sr">Your search results are </span>Loading...\n    </div>\n</section>\n'}),define("search/views/search_results_view",["backbone","jquery","underscore","models/course_catalog_discovery_card_collection","models/search_results_model","search/models/ui_state_model","search/router","search/views/card_list_view","search/views/featured_results_view","search/views/facets_sidebar_view","search/views/search_header_view","text!templates/search-results.underscore","gettext"],function(e,t,i,a,s,n,r,o,l,c,u,h){return e.View.extend({el:"#content",tpl:i.template(h),initialize:function(t){this.router=new r,e.history.start({pushState:!0,root:"/course",silent:"true"}),this.resultsModel=new s({},{query:this.model.get("query"),facets:this.model.get("facets"),featuredCourseIDs:this.model.get("featuredCourseIDs"),featuredProgramIDs:this.model.get("featuredProgramIDs"),mobileAvailable:this.model.get("mobileAvailable")}),this.uiStateModel=new n({isWebview:t.isWebview||!1}),this.resultsModel.fetch(),this.resultsModel.once("sync",this.render,this)},render:function(){var e=t.extend({},this.model.toJSON(),{isWebview:this.uiStateModel.get("isWebview")});this.$el.html(this.tpl(e)),this.postRender()},postRender:function(){this.collection=new a(this.resultsModel.toJSON(),{parse:!0}),this.resultsModel.on("sync",this.setCollection,this),this.HeaderView=new u({model:this.resultsModel,settingsModel:this.model,facetSidebar:this.$(".js-search-facets"),uiStateModel:this.uiStateModel}),this.cardList=new o({el:".js-search-results",model:this.resultsModel,collection:this.collection,uiStateModel:this.uiStateModel}),this.courseRunCollection=new a(this.resultsModel.get("featured_course_runs"),{parse:!0,sortList:this.resultsModel.featuredCourseIDs}),this.programCollection=new a(this.resultsModel.get("featured_programs"),{parse:!0,sortList:this.resultsModel.featuredProgramIDs}),this.featuredCardList=new l({model:this.resultsModel,collection:{courseRunCollection:this.courseRunCollection,programCollection:this.programCollection},uiStateModel:this.uiStateModel}),this.facetsSidebar=new c({model:this.resultsModel,settingsModel:this.model,uiStateModel:this.uiStateModel}),this.$el.addClass("search-app"),this.$pageTitle=t("title"),this.setPageTitle()},setCollection:function(){var e=this.resultsModel.getUrl();this.collection.reset(this.resultsModel.toJSON(),{parse:!0}),this.router.navigate(e,{trigger:!1}),this.setPageTitle()},setPageTitle:function(){var e=this.resultsModel.getFacetListString(),t="edX | Search ",i="My edX Search | "+this.collection.count+" search results for "+e,a=e.length?i:t;this.$pageTitle.html(a)}})}),define("main_menu/models/menu_item_model",["backbone","underscore"],function(e){return e.Model.extend({})}),define("main_menu/models/menu_item_collection",["backbone","underscore","main_menu/models/menu_item_model"],function(e,t,i){return e.Collection.extend({urlRoot:"/node/",model:i,params:".json?deep-load-refs=1",initialize:function(){this.lmsUrl=this.getLmsUrl()},parse:function(e){return e},getLmsUrl:function(){return Drupal&&Drupal.settings?Drupal.settings.lmsBaseUrl:"/"},getSample:function(){var e=[{id:"courses",title:"Courses",url:"/course",classList:"",html:['<header class="tab-header">',"<h2>Courses by Subject</h2>",'<a href="/courses" class="btn btn-blue">View All Courses</a>',"</header>",'<div class="tab-content">','<div class="item-list">','<ul class="col-ul">','<li class="col-li">','<a href="/course/subject/architecture">Architecture</a>',"</li>",'<li class="col-li">','<a href="/course/subject/art-culture">Art &amp; Culture</a>',"</li>",'<li class="col-li">','<a href="/course/subject/biology-life-sciences">Biology &amp; Life Sciences</a>',"</li>",'<li class="col-li">','<a href="/course/subject/business-management">Business &amp; Management</a>',"</li>",'<li class="col-li">','<a href="/course/subject/chemistry">Chemistry</a>',"</li>",'<li class="col-li">','<a href="/course/subject/communication">Communication</a>',"</li>",'<li class="col-li">','<a href="/course/subject/computer-science">Computer Science</a>',"</li>",'<li class="col-li">','<a href="/course/subject/data-analysis-statistics">Data Analysis &amp; Statistics</a>',"</li>",'<li class="col-li">','<a href="/course/subject/design">Design</a>',"</li>",'<li class="col-li">','<a href="/course/subject/economics-finance">Economics &amp; Finance</a>',"</li>",'<li class="col-li">','<a href="/course/subject/education">Education</a>',"</li>",'<li class="col-li">','<a href="/course/subject/electronics">Electronics</a>',"</li>",'<li class="col-li">','<a href="/course/subject/energy-earth-sciences">Energy &amp; Earth Sciences</a>',"</li>",'<li class="col-li">','<a href="/course/subject/engineering">Engineering</a>',"</li>",'<li class="col-li">','<a href="/course/subject/environmental-studies">Environmental Studies</a>',"</li>",'<li class="col-li">','<a href="/course/subject/ethics">Ethics</a>',"</li>",'<li class="col-li">','<a href="/course/subject/food-nutrition">Food &amp; Nutrition</a>',"</li>",'<li class="col-li">','<a href="/course/subject/health-safety">Health &amp; Safety</a>',"</li>",'<li class="col-li">','<a href="/course/subject/history">History</a>',"</li>",'<li class="col-li">','<a href="/course/subject/humanities">Humanities</a>',"</li>",'<li class="col-li">','<a href="/course/subject/language">Language</a>',"</li>",'<li class="col-li">','<a href="/course/subject/law">Law</a>',"</li>",'<li class="col-li">','<a href="/course/subject/literature">Literature</a>',"</li>",'<li class="col-li">','<a href="/course/subject/math">Math</a>',"</li>",'<li class="col-li">','<a href="/course/subject/medicine">Medicine</a>',"</li>",'<li class="col-li">','<a href="/course/subject/music">Music</a>',"</li>",'<li class="col-li">','<a href="/course/subject/philanthropy">Philanthropy</a>',"</li>",'<li class="col-li">','<a href="/course/subject/philosophy-ethics">Philosophy &amp; Ethics</a>',"</li>",'<li class="col-li">','<a href="/course/subject/physics">Physics</a>',"</li>",'<li class="col-li">','<a href="/course/subject/science">Science</a>',"</li>",'<li class="col-li">','<a href="/course/subject/social-sciences">Social Sciences</a>',"</li>","</ul>","</div>","</div>"].join("")},{id:"programs",title:"Programs",url:"/xseries",classList:"",html:['<header class="tab-header">',"<h2>Programs</h2>",'<a class="btn btn-blue" href="/xseries">View All Programs</a>',"</header>",'<div class="tab-content">','<div class="content-block col-12">','<h3 class="content-heading">XSeries</h3>',"<p>Created by world-renowned experts and top universities, XSeries are designed to provide a deep understanding of key subjects through a series of courses. Complete the series to earn a valuable XSeries Certificate that illustrates your achievement.</p>",'<a class="content-link" href="/xseries">','<span aria-hidden="true" class="link-icon xseries-icon">&nbsp;</span>',"Explore XSeries",'<span aria-hidden="true">&#187;</span>',"</a>","</div>","</div>"].join("")},{id:"schools-and-partners",title:"Schools & Partners",url:"/schools-partners",classList:"",html:""},{id:"about-edx",title:"About",url:"/about-us",classList:"",html:['<div class="tab-content">',"<h2>Offering the best in education to the world</h2>",'<div class="half-block left-half-block col-8">','<header class="tab-header">','<p class="copy">',"At edX, we take our mission of increasing global access to quality education seriously. We connect learners to the best universities and institutions from around the world. Join us!",'<a href="/about-us" class="link">More about edX &#187;</a>',"</p>","</header>","</div>",'<div class="half-block right-half-block col-last">','<ul class="list">','<li class="list-items"><a class="list-links" href="/professional-education">Advance Your Career &#187;</a></li>','<li class="list-items"><a class="list-links" href="/how-it-works">How It Works &#187;</a></li>','<li class="list-items"><a class="list-links" href="/credit">Earn University Credit &#187;</a></li>','<li class="list-items"><a class="list-links" href="/courses?availability=Self-paced">On Your Schedule &#187;</a></li>','<li class="list-items"><a class="list-links" href="/verified-certificate">Valuable Credentials &#187;</a></li>','<li class="list-items"><a class="list-links" href="http://blog.edx.org/learner-stories/">Global Community &#187;</a></li>','<li class="list-items"><a class="list-links" href="/high-school">Excel in High School &#187;</a></li>','<li class="list-items"><a class="list-links" href="/courses">Courses for Everyone &#187;</a></li>',"</ul>","</div>","</div>"].join("")}];this.set(e)}})}),define("main_menu/models/user_model",["backbone","jquery","underscore"],function(e,t,i){return e.Model.extend({initialize:function(e,t){var i;this.flags=t.flags,this.urlRoot=t.urlRoot+"/api/enrollment/v1/enrollment",this.isLoggedIn=document.cookie.indexOf("edxloggedin")>=0,this.getCookieNames(),i=this.getUserDetails(),this.set({cta:this.getCta(),enrollmentStatusHash:i.enrollmentStatusHash,isLoggedIn:this.isLoggedIn,userDetails:i}),this.flags.user_enrollment_local_storage&&(this.isLoggedIn?(this.on("sync",this.setLocalStorage,this),this.checkEnrollmentStatus()):window.localStorage.getItem("enrollments")&&window.localStorage.removeItem("enrollments")),this.auth=t?t.auth:!1},sync:function(t,i,a){return a=a||{},a.crossDomain=!0,a.xhrFields||(a.xhrFields={withCredentials:!0}),e.sync.apply(this,['"'+t+'"',i,a])},checkEnrollmentStatus:function(){var e=window.localStorage.getItem("enrollmentStatusHash");e&&e===this.get("enrollmentStatusHash")?this.set({enrollments:JSON.parse(window.localStorage.getItem("enrollments"))}):this.fetch()},getCookieAttr:function(e){var i=document.cookie,a=i.indexOf(e),s="",n=!1;a>-1&&(s=i.substr(i.indexOf(e)+e.length+1),n=s.substr(0,s.indexOf(";")),n=n.replace(/\\054/g,","));try{n=t.parseJSON(n)}catch(r){n=!1}return n},getCookieNames:function(){var e=window.location.host.indexOf("stage")>-1,t=e?"stage":"prod";this.userInfoCookie=t+"-edx-user-info",this.csrfCookieName=t+"-edx-csrftoken"},getCta:function(){var e=Drupal&&Drupal.settings?Drupal.settings.lmsBaseUrl:!1,t=[];return this.isLoggedIn?t.push({text:"Dashboard",url:e+"/dashboard",classList:"btn-blue"}):t.push({text:"Sign In",url:e+"/login"},{text:"Register",url:e+"/register",classList:"btn-blue"}),t},getUserDetails:function(){var e=this.getCookieAttr(this.userInfoCookie),i=e?t.parseJSON(e):!1;return!i||i.header_urls&&i.header_urls.account_settings||(i=!1),i},parse:function(e){var t=[];return i.each(e,function(e){t.push({id:e.course_details.course_id,mode:e.mode})}),{enrollments:t}},setLocalStorage:function(){window.localStorage.setItem("enrollmentStatusHash",this.get("enrollmentStatusHash")),window.localStorage.setItem("enrollments",JSON.stringify(this.get("enrollments")))}})}),define("main_menu/views/header_search_desktop_view",["views/typeahead_course_search_bar_view"],function(e){return e.extend({analyticsAllSearch:function(){window.analytics.track("edx.bi.header.search.submitted",{category:"search",mobile:!1})},analyticsSearch:function(e){window.analytics.track("edx.bi.header.query.submitted",{category:"search",label:e,mobile:!1}),this.analyticsAllSearch()},analyticsSelect:function(e,t){var i={category:"search",label:t.title,mobile:!1};"programs"===e&&(i.type=t.type),window.analytics.track("edx.bi.header."+e+".picked",i),this.analyticsAllSearch()}})}),define("main_menu/models/active_menu_model",["backbone"],function(e){return e.Model.extend({active:!1,mouseOverHeader:!1,mouseOverContent:!1})}),define("main_menu/views/header_search_mobile_view",["views/course_search_bar_view"],function(e){return e.extend({analyticsAllSearch:function(){window.analytics.track("edx.bi.header.search.submitted",{category:"search",mobile:!0})},analyticsSearch:function(e){window.analytics.track("edx.bi.header.query.submitted",{category:"search",label:e,mobile:!0}),this.analyticsAllSearch()}})}),define("text!templates/main-menu-tab.underscore",[],function(){return"<%= html %>\n"}),define("main_menu/views/menu_tab_view",["backbone","jquery","underscore","text!templates/main-menu-tab.underscore","gettext"],function(e,t,i,a){return e.View.extend({keys:{tab:9,enter:13,esc:27,up:38,down:40},mouse:{rightClick:3},rightClick:!1,tpl:i.template(a),events:{"click a":"analyticsLinkClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",keydown:"listenForKey",mousedown:"listenForRightClick"},initialize:function(e){this.html=e.html,this.$parent=e.parent,this.$link=e.link,this.activeModel=e.activeModel,this.activeModel.set({active:this.model.get("id")}),this.activeModel.on("closeAllTabs",this.hide,this),this.render()},render:function(){this.$el.html(this.tpl(this.model.toJSON())),this.$parent.after(this.$el),this.postRender()},postRender:function(){this.manageJustOpened(),this.$menuButton=this.$link.find(".menu-btn"),this.$menuButton.attr("aria-expanded",!0),this.$menuItem=this.$link.find(".menu-item"),this.$menuItem.addClass("is-open"),this.focusInView()},analyticsLinkClick:function(e){var i=t(e.target);window.analytics.track("edx.bi.link.header_navigation.clicked",{category:"navigation_secondary_"+this.model.get("id"),label:i.html().trim(),link:i.attr("href"),mobile:!1})},focusOnMenuToggle:function(){this.$menuButton.focus()},focusInView:function(){var e=this.$el.find(".js-focus-first");e.length>0&&e.focus()},hide:function(){this.$menuButton.attr("aria-expanded",!1),this.$menuItem.removeClass("is-open"),this.activeModel.set({active:!1}),setTimeout(function(){this.$el.addClass("hidden")}.bind(this),100)},listenForKey:function(e){var i=e.keyCode;i===this.keys.esc?(e.preventDefault(),this.focusOnMenuToggle(),this.hide()):i===this.keys.tab&&setTimeout(function(){0===t(document.activeElement).parents(".menu-link").length&&this.hide()}.bind(this),10)},listenForRightClick:function(e){var t=e.which;t===this.mouse.rightClick&&(this.rightClick=!0)},manageJustOpened:function(){this.$el.addClass("just-opened"),setTimeout(function(){this.$el.removeClass("just-opened")}.bind(this),110)},onMouseEnter:function(){this.activeModel.set({mouseOverContent:!0})},onMouseLeave:function(){this.rightClick?this.rightClick=!1:this.activeModel.set({mouseOverContent:!1})},show:function(){this.$el.removeClass("hidden"),this.manageJustOpened(),this.$menuButton.attr("aria-expanded",!0),this.$menuItem.addClass("is-open"),this.activeModel.set({active:this.model.get("id")})}})}),define("text!templates/main-menu-nav.underscore",[],function(){return'<nav class="main-menu-nav" aria-label="Main">\n    <button class="js-mobile-menu-button mobile-menu-button ai-hamburger-menu" aria-pressed="false" aria-expanded="false">\n        <span class="ai-line burger-top" aria-hidden="true"></span>\n        <span class="ai-line burger-middle x-backslash" aria-hidden="true"></span>\n        <span class="ai-line burger-middle x-forwardslash" aria-hidden="true"></span>\n        <span class="ai-line burger-bottom" aria-hidden="true"></span>\n        <span class="sr">Toggle mobile menu</span>\n    </button>\n    <ul class="menu primary-menu header-search clearfix">\n        <li class="js-focus-first sr-is-focusable sr" tabindex="-1"></li>\n        <li class="menu-link js-search-lite course-search-bar visible-mobile"></li>\n      <% if ( !user.isLoggedIn ) { %>\n        <li class="menu-link visible-mobile user-cta multiple">\n          <% _.each( user.cta, function( cta ) { %>\n            <a href="<%- cta.url %>" class="btn btn-blue"><%- cta.text %></a>\n          <% }); %>\n        </li>\n      <% } else { %>\n        <li class="menu-link visible-mobile user-cta"><a href="<%- user.cta[0].url %>" class="btn btn-blue"><%- user.cta[0].text %></a></li>\n      <% } %>\n\n      <% _.each( data, function( item ) { %>\n        <% if ( item.html.length ) { %>\n        <li class="menu-link menu-open<% if ( activeUrl === item.url ) {%> active<% } %>" data-id="<%- item.id %>">\n            <a href="<%- item.url %>" class="menu-item <%- item.classList %><% if ( activeUrl === item.url ) {%> active<% } %>">\n              <%- item.title %>\n            </a>\n            <div class="nav-bar-group" role="group" aria-label="<%- item.title %> menu">\n                <button class="menu-btn" aria-controls="main-nav-<%- item.id %>" aria-expanded="false" title="<%- item.button_title %>">\n                  <span class="sr"><%- item.title %> menu</span>\n                  <span class="icon fa fa-caret-down" aria-hidden="true"></span>\n                </button>\n            </div>\n        <% } else { %>\n        <li class="menu-link<% if ( activeUrl === item.url ) {%> active<% } %>">\n            <a href="<%- item.url %>" class="menu-item <%- item.classList %> <% if ( activeUrl === item.url ) {%> active<% } %>"><%- item.title %></a>\n        <% } %>\n        </li>\n      <% }); %>\n\n      <% if ( user.isLoggedIn ) { %>\n        <% _.each( user.dropdown.items, function( link, index ) { %>\n            <% if ( index > 0 ) { %>\n                <li class="menu-link visible-mobile"><a href="<%- link.url %>"  class="menu-item"><%- link.text %></a></li>\n            <% } %>\n        <% }); %>\n      <% } %>\n    </ul>\n</nav>\n<button class="js-mobile-search btn mobile-search-btn">\n    <span class="sr">Search for a course</span>\n    <span class="icon fa fa-search" aria-hidden="true"></span>\n</button>\n<div class="menu-overlay-background"></div>\n'
}),define("main_menu/views/nav_view",["backbone","enquire","jquery","underscore","main_menu/models/active_menu_model","main_menu/models/menu_item_collection","main_menu/views/header_search_mobile_view","main_menu/views/menu_tab_view","models/search_bar_model","text!templates/main-menu-nav.underscore","gettext"],function(e,t,i,a,s,n,r,o,l,c){return e.View.extend({el:"#primary-menu-bar",tpl:a.template(c),desktopEvents:{"mouseenter .menu-link.menu-open":"onMouseEnter","mouseleave .menu-link.menu-open":"clearMouseOverHeader","mouseleave .menu-open":"onMouseLeave","keydown .menu-btn":"keypressShowTab","click .menu-btn":"clickShowTab","click .primary-menu a":"analyticsLinkClick","focus .menu-item":"closeAllTabs"},mobileEvents:{"click .js-mobile-menu-button":"mobileMenuClick","click .menu-overlay-background":"mobileMenuClick","click .js-mobile-search":"openMobileSearch","click .primary-menu a":"analyticsLinkClick","keydown .js-mobile-menu-button":"mobileMenuButtonKeypress","keydown .primary-menu":"mobileMenuKeypress"},contentReady:!1,enterId:!1,activeUrl:!1,key:{tab:9,enter:13,space:32,esc:27,left:37,up:38,right:39,down:40},initialize:function(e){var t=i(".edx-header").data("menu-content");this.collection=new n,this.collection.on("sync",this.tabInit,this),this.collection.set(t),this.model=new s,this.model.on("change:mouseOverContent",this.onMouseLeave,this),this.userModel=e.userModel,this.dropdownModel=e.dropdownModel,this.getActiveTab(),this.enableMobileView(),this.toggleEventHandlers(),this.dropdownModel.on("change",this.tabInit,this)},render:function(){var e=a.extend({},this.userModel.toJSON());return e.dropdown=this.dropdownModel.toJSON(),this.$el.html(this.tpl({data:this.collection.toJSON(),activeUrl:this.activeUrl,user:e})),this.postRender(),this},postRender:function(){this.$menu=this.$el.find(".primary-menu"),this.$menuOverlayBackground=this.$el.find(".menu-overlay-background"),this.$menuButton=this.$el.find(".js-mobile-menu-button"),this.$mobileMenuFirst=this.$el.find(".js-focus-first"),this.$menuLastItem=this.$menu.find("li:last-of-type"),this.searchBar=new r({el:".js-search-lite",model:new l}),this.$search=this.searchBar.$el,this.analyticsLogoClickListener()},analyticsLinkClick:function(e){var t=i(e.target),a=this.$menu.hasClass("mobile-menu-show");window.analytics.track("edx.bi.link.header_navigation.clicked",{category:"navigation",label:t.html().trim(),link:t.attr("href"),mobile:a})},analyticsLogoClickListener:function(){i("#logo").on("click",function(e){var t=i(e.target).closest("a"),a="none"!==this.$menuButton.css("display");window.analytics.track("edx.bi.link.header_navigation.clicked",{category:"navigation",label:t.attr("title"),link:t.attr("href"),mobile:a})}.bind(this))},analyticsOpenTab:function(e){window.analytics.track("edx.bi.link.header_navigation.open",{category:"navigation_secondary",label:e})},clearMouseOverHeader:function(){this.model.set({mouseOverHeader:!1})},clickShowTab:function(e){var t=this.tabIsOpen(e);t?this.hideTab():this.showTab(e)},closeAllTabs:function(){this.model.trigger("closeAllTabs")},enableDesktopView:function(){this.delegateEvents(this.desktopEvents)},enableMobileView:function(){this.delegateEvents(this.mobileEvents)},getActiveTab:function(){var e=this.$el.find(".primary-menu"),t=e.find(".active");t.length>0&&(this.activeUrl=t.find("a").attr("href"))},getView:function(e){var t=i(e.target);return t.hasClass("menu-open")||(t=t.closest(".menu-open")),t.data("id")},getMenuLi:function(e){var t=i(e.target);return t.hasClass(".menu-link")||(t=t.closest(".menu-link")),t},hideOpenMenuItems:function(){this.$menu.find("li .menu-item").removeClass("is-open")},hideOpenTabs:function(){var e=this.$el.find(".menu-tab");e.length>0&&(e.addClass("hidden"),this.hideOpenMenuItems())},hideTab:function(){var e=this.model.get("active"),t=this.model.get("mouseOverContent"),i=this.model.get("mouseOverHeader")===e;!e||t||i||this[e].hide()},isLastMenuItem:function(e){var t=e.hasClass("js-focus-first")?e:e.closest("li");return this.$menuLastItem.html()===t.html()},keypressShowTab:function(e){var t=e.keyCode;t===this.key.esc&&this.hideTab()},loadTab:function(e,t){var i="menu-tab menu-open "+e;this.hideOpenTabs(),this[e]=new o({model:this.collection.get(e),parent:t.find(".menu-btn"),className:i,link:t,id:"main-nav-"+e,activeModel:this.model})},mobileMenuButtonKeypress:function(e){var t=e.keyCode,i=this.$menu.hasClass("mobile-menu-show");t===this.key.esc&&i?(e.preventDefault(),this.toggleMobileMenu(!1)):t===this.key.down&&i?(e.preventDefault(),this.nextMenuItem(this.$mobileMenuFirst)):t===this.key.up&&i&&(e.preventDefault(),this.$menuLastItem.find("a").focus())},mobileMenuClick:function(){var e=!this.$menuButton.hasClass("open");i("body").toggleClass("prevent-scroll"),e?(i("nav.main-menu-nav").siblings().attr("aria-hidden",!0),i(".edx-header").siblings().attr("aria-hidden",!0)):(i("nav.main-menu-nav").siblings().attr("aria-hidden",!1),i(".edx-header").siblings().attr("aria-hidden",!1)),this.toggleMobileMenu(e),e&&this.$mobileMenuFirst.focus()},mobileMenuKeypress:function(e){var t=e.keyCode,a=i(e.target);t===this.key.esc?(e.preventDefault(),this.toggleMobileMenu(!1)):t===this.key.down?(e.preventDefault(),this.nextMenuItem(a)):t===this.key.up?(e.preventDefault(),this.previousMenuItem(a)):t===this.key.tab&&this.isLastMenuItem(a)&&(e.preventDefault(),this.$menuButton.focus())},nextMenuItem:function(e){var t=e.hasClass("js-focus-first")?e:e.closest("li"),i=t.next("li"),a=this.$menuLastItem.html()===t.html();t.hasClass("multiple")&&t.find(".btn:last-of-type").html()!==e.html()?e.next(".btn").focus():i.hasClass("multiple")?i.find("a").first().focus():a?this.$menuButton.focus():i.hasClass("js-search-lite")?this.$search.find("input").focus():i.find("a").focus()},onMouseEnter:function(e){var t=this.getMenuLi(e),i=!1;this.enterId&&(window.clearTimeout(this.enterId),this.enterId=!1),t.on("mouseleave",function(){i=!0}),this.model.set({mouseOverHeader:t.data("id")}),this.enterId=window.setTimeout(function(){var a=this.model.get("active"),s=this.model.get("mouseOverHeader");(!a&&!i||s===a)&&this.showTab(e),t.off()}.bind(this),200)},onMouseLeave:function(){window.setTimeout(function(){this.hideTab()}.bind(this),150)},openMobileSearch:function(){this.$menu.hasClass("mobile-menu-show")||this.toggleMobileMenu(!0),this.$search.find("input").focus()},previousMenuItem:function(e){var t=e.closest("li"),i=t.prev("li"),a=this.$mobileMenuFirst.html()===i.html()||t.hasClass("js-focus-first");t.hasClass("multiple")&&t.find(".btn:first-of-type").html()!==e.html()?e.prev(".btn").focus():i.hasClass("multiple")?i.find("a").last().focus():a?this.$menuButton.focus():i.hasClass("js-search-lite")?this.$search.find("input").focus():i.find("a").focus()},showTab:function(e){var t,a;this.contentReady&&(t=this.getView(e),a=this[t]||!1,this.hideOpenTabs(),a?(a.show(),a.$el.find(".js-focus-first").focus()):this.loadTab(t,i(e.target).closest("li")),this.analyticsOpenTab(t))},tabInit:function(){this.contentReady=!0,this.render()},tabIsOpen:function(e){var t=this.getView(e),i=this[t],a=!1;return i&&t===this.model.get("active")&&(a=!0),a},toggleEventHandlers:function(){t.register("screen and (min-width: 980px)",{match:function(){this.enableDesktopView()}.bind(this),unmatch:function(){this.enableMobileView()}.bind(this)})},toggleMobileMenu:function(e){var t=e?"addClass":"removeClass";this.$menuOverlayBackground[t]("mobile-menu-show"),this.$menu[t]("mobile-menu-show"),this.$menuButton[t]("open").attr("aria-pressed",e).attr("aria-expanded",e),e||this.$menuButton.focus()}})}),define("models/dropdown_model",["backbone"],function(e){return e.Model.extend({})}),define("text!templates/dropdown.underscore",[],function(){return'<a href="<%- main.url %>" class="user-title">\n    <span class="sr"><%- main.screenreader_label %> </span><%- main.text %>\n</a>\n<button type="button" class="button button-more has-dropdown js-dropdown-button" aria-haspopup="true" aria-expanded="false" aria-controls="edx-user-menu">\n    <span class="sr"><%- button_label %></span>\n</button>\n<ul class="dropdown-menu is-hidden" id="edx-user-menu" tabindex="-1">\n    <% _.each(items, function(item, index) { %>\n        <li class="dropdown-item<% if (items.length-1 === index) { %> last<% } %>">\n            <a href="<%- item.url %>" class="action<% if (items.length-1 === index) { %> last<% } %>"><%- item.text %></a>\n        </li>\n    <% }); %>\n</ul>\n'}),define("views/dropdown_view",["backbone","jquery","underscore","text!../templates/dropdown.underscore","gettext"],function(e,t,i,a){return e.View.extend({tpl:i.template(a),events:{"click .js-dropdown-button":"clickOpenDropdown","click a":"analyticsLinkClick",keydown:"viewKeypress"},menu:".dropdown-menu",key:{tab:9,enter:13,esc:27,up:38,down:40},initialize:function(e){this.$parent=t(e.parent),this.render()},className:function(){return this.options.className},render:function(){return this.$el.html(this.tpl(this.model.toJSON())),this.$parent.replaceWith(this.$el),this.postRender(),this},postRender:function(){this.$menu=this.$el.find(".dropdown-menu"),this.$page=t(document),this.$dropdownButton=t(".js-dropdown-button"),this.listenForPageKeypress()},analyticsLinkClick:function(e){var i=t(e.target),a=i.hasClass("user-title")?"Dashboard":i.html().trim();window.analytics.track("edx.bi.link.header_navigation.clicked",{category:"navigation",label:a,link:i.attr("href"),mobile:!1})},clickCloseDropdown:function(e,i){var a=t(e.target);a.hasClass("button-more")||a.hasClass("has-dropdown")||i.closeDropdownMenus()},clickOpenDropdown:function(e){e.preventDefault(),this.openMenu(t(e.target))},closeDropdownMenus:function(e){var t;t=e?this.$page.find(this.menu):this.$page.find(this.menu).not(":focus"),t.removeClass("is-visible").addClass("is-hidden"),this.$dropdownButton.removeClass("is-active").attr("aria-expanded","false")},focusFirstItem:function(){this.$menu.find(".action").first().focus()},handlerIsAction:function(e,t){e===this.key.up?this.previousMenuItemLink(t):e===this.key.down&&this.nextMenuItemLink(t)},handlerIsButton:function(e){e===this.key.down&&this.focusFirstItem()},handlerIsMenu:function(e){e===this.key.down?this.focusFirstItem():e===this.key.up&&this.$dropdownButton.focus()},handlerPageClicks:function(e){this.$page.off("click.dropdown"),this.$page.on("click.dropdown",function(t){e.clickCloseDropdown(t,e)})},viewKeypress:function(e){var i=e.keyCode,a=t(e.target);(i==this.key.up||i==this.key.down)&&e.preventDefault(),i===this.key.tab&&a.hasClass("last")?(e.preventDefault(),this.$dropdownButton.focus()):i===this.key.esc?(this.closeDropdownMenus(),this.$dropdownButton.focus()):a.hasClass("action")?this.handlerIsAction(i,a):a.hasClass("dropdown-menu")?this.handlerIsMenu(i):a.hasClass("has-dropdown")&&this.handlerIsButton(i)},listenForPageKeypress:function(){this.$page.on("keydown",function(e){var t=e.keyCode;t===this.key.esc&&this.closeDropdownMenus(!0)}.bind(this))},nextMenuItemLink:function(e){var t=this.$el.find(".dropdown-menu").children(".dropdown-item").find(".action"),i=t.length-1,a=t.index(e),s=a+1;a===i?this.$dropdownButton.focus():t.eq(s).focus()},openMenu:function(e){var t=this.$menu;t.hasClass("is-visible")?this.closeDropdownMenus():(e.addClass("is-active").attr("aria-expanded","true"),t.removeClass("is-hidden").addClass("is-visible"),t.focus(),this.setOrientation(),this.handlerPageClicks(this))},previousMenuItemLink:function(e){var t=this.$el.find(".dropdown-menu").children(".dropdown-item").find(".action"),i=t.index(e),a=i-1;0===i?this.$dropdownButton.focus():t.eq(a).focus()},setOrientation:function(){var e=t(window).width()/2,i=this.$dropdownButton.offset().left>e?"align-right":"align-left";this.$menu.removeClass("align-left align-right").addClass(i)}})}),define("text!templates/main-menu-ctas.underscore",[],function(){return'<% _.each(cta, function(action) { %>\n    <a href="<%- action.url %>" class="btn <%- action.classList %>"><%- action.text %></a>\n<% }); %>\n'}),define("main_menu/views/user_cta_view",["backbone","jquery","underscore","models/dropdown_model","views/dropdown_view","text!templates/main-menu-ctas.underscore","gettext"],function(e,t,i,a,s,n){return e.View.extend({el:".js-user-cta",tpl:i.template(n),events:{"click a":"analyticsLinkClick"},initialize:function(e){this.dropdownModel=e.dropdownModel,this.model.get("isLoggedIn")&&this.model.get("userDetails")?(this.dropdownModel.on("change",this.loadUserMenu,this),this.setDropdown()):(this.dropdownModel.trigger("change"),this.render())},render:function(){this.$el.html(this.tpl(this.model.toJSON()))},analyticsLinkClick:function(e){var i=t(e.target);window.analytics.track("edx.bi.link.header_navigation.clicked",{category:"navigation",label:i.html().trim(),link:i.attr("href"),mobile:!1})},loadUserMenu:function(){this.userMenu=new s({className:"wrapper-more-actions user-menu logged-in",model:this.dropdownModel,parent:".js-user-cta"})},setDropdown:function(){var e=this.model.get("userDetails"),t=this.model.get("cta")[0];this.dropdownModel.set({main:{text:e.username,url:t.url,screenreader_label:"Dashboard for:"},button_label:"User options dropdown",items:[{text:t.text,url:t.url},{text:"Profile",url:e.header_urls.learner_profile},{text:"Account",url:e.header_urls.account_settings},{text:"Sign Out",url:e.header_urls.logout}]})}})}),define("text!templates/main-menu.underscore",[],function(){return'<% if (includeSearch) { %>\n<div class="js-course-search-bar course-search-bar" role="search"></div>\n<% } %>\n<nav class="js-user-cta user-cta" aria-label="Account"></nav>'}),define("main_menu/views/main_menu_view",["backbone","enquire","jquery","underscore","main_menu/models/menu_item_collection","main_menu/models/user_model","main_menu/views/header_search_desktop_view","main_menu/views/nav_view","main_menu/views/user_cta_view","models/dropdown_model","models/search_bar_model","text!templates/main-menu.underscore","gettext"],function(e,t,i,a,s,n,r,o,l,c,u,h){return e.View.extend({el:".js-edx-header-ui",tpl:a.template(h),initialize:function(e){this.flags=e?e.flags:{},this.userModel=new n({},{flags:this.flags,urlRoot:e.lmsUrlRoot}),this.dropdownModel=new c,this.searchBarModel=new u,this.render()},render:function(){var e=this.tpl({includeSearch:0===i(".page-course").length});this.$el.html(e),this.postRender()},postRender:function(){this.navView=new o({userModel:this.userModel,dropdownModel:this.dropdownModel}),this.ctaView=new l({model:this.userModel,dropdownModel:this.dropdownModel}),0===i(".page-course").length&&(this.searchBar=new r({el:".js-course-search-bar",model:this.searchBarModel}))}})}),function(){var e=document.cookie;(e.indexOf("utmcsr=edx.org")>-1||e.indexOf("utmcsr=courses.edx.org")>-1)&&(document.cookie="__utma=; domain=edx.org",document.cookie="__utmb=; domain=edx.org",document.cookie="__utmc=; domain=edx.org",document.cookie="__utmz=; domain=edx.org",document.cookie="__utmv=; domain=edx.org")}(jQuery),define("edx-cookies",function(){}),function(e){e.extend(e,{placeholder:{browser_supported:function(){return void 0!==this._supported?this._supported:this._supported=!!("placeholder"in e('<input type="text">')[0])},shim:function(t){var i={color:"#888",cls:"placeholder",selector:"input[placeholder], textarea[placeholder]"};return e.extend(i,t),!this.browser_supported()&&e(i.selector)._placeholder_shim(i)}}}),e.extend(e.fn,{_placeholder_shim:function(t){function i(t){var i=e(t).offsetParent().offset(),a=e(t).offset();return{top:a.top-i.top,left:a.left-i.left,width:e(t).width()}}function a(t){var s=t.data("target");"undefined"!=typeof s&&(t.css(i(s)),e(window).one("resize",function(){a(t)}))}return this.each(function(){var s=e(this);if(s.is(":visible")){if(s.data("placeholder")){var n=s.data("placeholder");return n.css(i(s)),!0}var r={};s.is("textarea")||"auto"==s.css("height")||(r={lineHeight:s.css("height"),whiteSpace:"nowrap"});var o="border-box"===s.css("box-sizing"),l=s.is("textarea"),c=e("<label />").text(s.attr("placeholder")).addClass(t.cls).css(e.extend({position:"absolute",display:"inline","float":"none",overflow:"hidden",textAlign:"left",color:t.color,cursor:"text",paddingTop:!l&&o?"0":s.css("padding-top"),paddingRight:s.css("padding-right"),paddingBottom:!l&&o?"0":s.css("padding-bottom"),paddingLeft:s.css("padding-left"),fontSize:s.css("font-size"),fontFamily:s.css("font-family"),fontStyle:s.css("font-style"),fontWeight:s.css("font-weight"),textTransform:s.css("text-transform"),backgroundColor:"transparent",zIndex:99},r)).css(i(this)).attr("for",this.id).data("target",s).click(function(){e(this).data("target").is(":disabled")||e(this).data("target").focus()}).insertBefore(this);s.data("placeholder",c).keydown(function(){c.hide()}).blur(function(){c[s.val().length?"hide":"show"]()}).triggerHandler("blur"),e(window).one("resize",function(){a(c)})}})}})}(jQuery),jQuery(document).add(window).bind("ready load",function(){jQuery.placeholder&&jQuery.placeholder.shim()}),define("jqueryPlaceholder",["jquery"],function(e){return function(){var t;return t||e.jqueryPlaceholder}}(this)),define("global_deps",["edx-cookies","jqueryPlaceholder"],function(){}),function(){var e={},t={};window.jQuery?define("jquery",[],function(){return window.jQuery}):e.jquery="../vendor/common/jquery-v1.11.2",window._?define("underscore",[],function(){return window._}):e.jquery="../vendor/common/underscore-min",window.Backbone?define("backbone",[],function(){return window.Backbone}):e.backbone="../vendor/common/backbone-min",t={paths:{async:"../async",backbone:"empty",enquire:"../vendor/enquire.min",gettext:"../shim/gettext",jquery:"../vendor/jquery-v1.11.2",jqueryCookie:"../vendor/jquery.cookie",lodash:"../vendor/lodash.min",picturefill:"../vendor/picturefill.min",text:"../text",typeahead:"../vendor/typeahead.bundle",underscore:"../vendor/underscore-min"},waitseconds:120,shim:{backbone:{deps:["underscore","jquery"],exports:"Backbone"},enquire:{exports:"enquire"},jqueryCookie:{deps:["jquery"],exports:"jqueryCookie"},lodash:{exports:"_"},picturefill:{exports:"picturefill"},typeahead:{deps:["jquery"],exports:"typeahead"},underscore:{exports:"_"}}};for(var i in e)({}).hasOwnProperty.call(e,i)&&(t.paths[i]=e[i]);require.config(t)}(),define("config",function(e){return function(){var t;return t||e.config}}(this)),function(){require(["main_menu/views/main_menu_view","global_deps","config"],function(e){new e({flags:Drupal.settings.ft_enabled_features||[],lmsUrlRoot:Drupal.settings.lmsBaseUrl})})}(),define("main_menu/main_menu",function(){}),function(){require(["backbone","course_search/views/course_search_results_view","search/views/search_results_view","main_menu/main_menu","config"],function(e,t,i){var a,s,n,r,o,l=Drupal.settings,c=l.ft_enabled_features,u=l.edx_webview;!u||u&&c.webview_search_2?(r=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},s=function(e,t){var i,a={},s=JSON.parse(e.filters),r=s.facets||!1,l=s.query||!1,c={},u=!1;if(e.featured_course_ids&&(a.featuredCourseIDs=e.featured_course_ids),e.featured_program_ids&&(a.featuredProgramIDs=e.featured_program_ids),r){a.facets=[];for(i in r)c={},1===r[i].length?o(i,r)?u=!0:c=n(i,r):c[i+"_exact"]=r[i][0],_.isEmpty(c)||a.facets.push(c)}return l&&(a.query=l),a.mobileAvailable=t&&u,a},o=function(e,t){return"types"===e&&"mobile"===t[e].join("")},n=function(e,t){var i={},a=t[e][0],s=a.toLowerCase();switch(e){case"availability":"self-paced"===s?i.pacing_type_exact="self_paced":("starting soon"===s&&(s="starting_soon"),i.selected_query_facet=e+"_"+s);break;case"languages":i.language_exact=r(a);break;case"level":i[e+"_type_exact"]=a;break;case"schools":i.organizations_exact=a;break;case"types":"xseries"===s&&(a="XSeries"),i.type_exact=a;break;default:i[e+"_exact"]=a}return i},a=function(t){var a=Drupal.settings||!1,n=new e.Model(a),r=s(n.get("edx_search"),t);n.set(r),this.searchResults=new i({model:n,isWebview:t})}(u)):t.init()})}(),define("search/search_loader",function(){});