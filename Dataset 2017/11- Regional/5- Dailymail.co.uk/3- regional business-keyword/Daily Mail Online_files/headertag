function cygnus_report_blanks(targets){if(typeof targets==="undefined"||targets.length<1){console.log("Error: Attempted to report blanks, but no blank targets specified!.");return}var url=window.location.protocol==="https:"?"https://as-sec.casalemedia.com":"http://as.casalemedia.com";url+="/headerstats?type=RT&s="+IndexArgs.siteID+"&u="+encodeURIComponent(location.href)+"&r="+_IndexRequestData.lastRequestID;var targetString="";var i;for(i=0;i<targets.length-1;i++){targetString+=targets[i]+","}targetString+=targets[i];var px_call=new Image;px_call.src=url+"&blank="+targetString}function cygnus_split_parts(str){var regex=/^([OP])_(?:T([0-9])_)?(.+)_([^_]+)$/i;var match=str.match(regex);return match.slice(1)}function cygnus_index_parse_res(response){console.time("cygnus parse");try{if(response){if(typeof _IndexRequestData!=="object"||typeof _IndexRequestData.impIDToSlotID!=="object"||typeof _IndexRequestData.impIDToSlotID[response.id]==="undefined"){return}var targetMode=0;var callbackFn;if(typeof _IndexRequestData.reqOptions==="object"&&typeof _IndexRequestData.reqOptions[response.id]==="object"){if(typeof _IndexRequestData.reqOptions[response.id].callback==="function"){callbackFn=_IndexRequestData.reqOptions[response.id].callback}if(typeof _IndexRequestData.reqOptions[response.id].targetMode==="number"){targetMode=_IndexRequestData.reqOptions[response.id].targetMode}}_IndexRequestData.lastRequestID=response.id;var allBids=[];var seatbidLength=typeof response.seatbid==="undefined"?0:response.seatbid.length;for(var i=0;i<seatbidLength;i++){for(var j=0;j<response.seatbid[i].bid.length;j++){var bid=response.seatbid[i].bid[j];if(typeof bid.ext!=="object"||typeof bid.ext.pricelevel!=="string"){continue}if(typeof _IndexRequestData.impIDToSlotID[response.id][bid.impid]==="undefined"){continue}var slotID=_IndexRequestData.impIDToSlotID[response.id][bid.impid];if(typeof index_slots==="undefined"){index_slots=[]}if(typeof _IndexRequestData.targetIDToBid==="undefined"){_IndexRequestData.targetIDToBid={}}var targetID;var targetPrefix;if(typeof bid.ext.dealid==="string"){if(targetMode===1){targetID=slotID+bid.ext.pricelevel}else{targetID=slotID+"_"+bid.ext.dealid}targetPrefix="P_"}else{targetID=slotID+bid.ext.pricelevel;targetPrefix="O_"}index_slots.push(targetPrefix+targetID);if(_IndexRequestData.targetIDToBid[targetID]===undefined){_IndexRequestData.targetIDToBid[targetID]=[bid.adm]}else{_IndexRequestData.targetIDToBid[targetID].push(bid.adm)}var impBid={};impBid.impressionID=bid.impid;if(typeof bid.ext.dealid!=="undefined"){impBid.dealID=bid.ext.dealid}impBid.bid=bid.price;impBid.slotID=slotID;impBid.priceLevel=bid.ext.pricelevel;impBid.target=targetPrefix+targetID;allBids.push(impBid)}}if(typeof callbackFn==="function"){if(allBids.length===0){callbackFn(response.id)}else{callbackFn(response.id,allBids)}}for(var i=0;i<index_slots.length;i++){var parts=cygnus_split_parts(index_slots[i]);if(parts[0]=="O"){var str="O_"+parts[2]+"_"+parts[3];index_slots_add.push(str);var obj={};obj[str]=index_slots[i];index_slots_render.push(obj)}else{index_slots_add.push(index_slots[i])}}index_slots=index_slots_add;index_slots_sort=[];for(var i=0;i<index_slots.length;i++){var parts=cygnus_split_parts(index_slots[i]);if(parts[0]=="O"){parts[3]=Number(parts[3]);if(typeof parts[3]==="undefined")parts[3]=0}index_slots_sort.push({RTM:parts[0],ID:parts[2],PX:parts[3],TIER:parts[1]})}function compare_px(b,a){if(a["PX"]>b["PX"]){return 1}else if(a["PX"]<b["PX"]){return-1}return 0}index_slots_sort.sort(compare_px);var dedupe={};dedupe["length"]=0;index_slots=[];for(var i=0;i<index_slots_sort.length;i++){if(typeof dedupe[index_slots_sort[i]["ID"]]==="undefined"){index_slots.push(index_slots_sort[i]["RTM"]+"_"+index_slots_sort[i]["ID"]+"_"+index_slots_sort[i]["PX"]);dedupe[index_slots_sort[i]["ID"]]=true;dedupe.length++}}for(var i=0;i<index_slots_sort.length;i++){}}}catch(e){}if(typeof index_slots==="undefined"){index_slots=[]}cygnus_index_ready_state()}function index_render(doc,targetID){console.info("IR test: "+targetID);for(var r=0;r<index_slots_render.length;r++){if(typeof index_slots_render[r]["O_"+targetID]==="string"){targetID=index_slots_render[r]["O_"+targetID];var parts=cygnus_split_parts(targetID);if(typeof parts[1]==="undefined")targetID=parts[2]+"_"+parts[3];else targetID=parts[1]+"_"+parts[2]+"_"+parts[3]}}console.info("index_render: "+targetID);try{var ad=_IndexRequestData.targetIDToBid[targetID].pop();if(ad!=null){doc.write(ad)}else{console.info("BLANK DETECTED: "+targetID);cygnus_report_blanks([targetID])}}catch(e){}}
;cygnus_index_parse_res({"seatbid":[{"bid":[{"crid":"1919290","adomain":["www.getyourtoyota.ca"],"adid":"1919290","impid":"8","cid":"650444","id":"1","ext":{"dspid":50,"pricelevel":"_120","advbrandid":52889,"advbrand":"Toyota Dealers"},"adm":"<iframe src=\"http://a762.casalemedia.com/ifnotify?c=1D493A&r=BEE5D017&t=589BF7FF&u=V0p2U3ZzQW9JTFVBQUhrNWkwMEFBQUZt&m=c0608a6a915b8967492db450aa0f6dc3&wp=96&aid=35972FC17D5014AE&tid=D2B7&s=26BBE&cp=1.50&n=www.dailymail.co.uk&pr=xx&sid=1be7-1cc1-23c8-257f&epr=473188929&fb=74424343\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\" style=\"display:none;\" marginheight=\"0\" marginwidth=\"0\"></iframe><script type=\"text/javascript\" src=\"http://p3.eyereturn.com/ed/3/?5530873&cid=98626&tid=5530873&oid=35972FC17D5014AE&vid=WJvSvsAoILUAAHk5i00AAAFm&iid=04842991-ee85-11e6-8f95-f764bf1346de&p=1.50&bd2=BIQpku6FEeaPlfdkvxNG3rRFLyWnA-1MiIZTRg&rnd=2790782483563877906&ex=ChAKC251bV9kZXZpY2VzEgEx\"></script>"},{"crid":"2482335","adomain":["www.getyourtoyota.ca"],"adid":"2482335","impid":"19","cid":"650444","id":"2","ext":{"dspid":50,"pricelevel":"_120","advbrandid":52889,"advbrand":"Toyota Dealers"},"adm":"<iframe src=\"http://a762.casalemedia.com/ifnotify?c=25E09F&r=BEE5D022&t=589BF7FF&u=V0p2U3ZzQW9JTFVBQUhrNWkwMEFBQUZt&m=08e56e99239aceb84815d9da9b594fdd&wp=96&aid=35972FC17D583B47&tid=D2B7&s=26BBE&cp=1.50&n=www.dailymail.co.uk&pr=xx&sid=1be7-1cc1-23c8-257f-2921-2d0f&epr=473188929&fb=74424343\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\" style=\"display:none;\" marginheight=\"0\" marginwidth=\"0\"></iframe><script type=\"text/javascript\" src=\"http://p3.eyereturn.com/ed/3/?5530903&cid=98650&tid=5530903&oid=35972FC17D583B47&vid=WJvSvsAoILUAAHk5i00AAAFm&iid=048477b5-ee85-11e6-8f95-f764bf1346de&p=1.50&bd2=BIR3tu6FEeaPlfdkvxNG3l0yXxxNahFDMtJDTA&rnd=7402398509731115537&ex=ChAKC251bV9kZXZpY2VzEgEx\"></script>"}],"seat":"664"}],"cur":"USD","id":473188929});