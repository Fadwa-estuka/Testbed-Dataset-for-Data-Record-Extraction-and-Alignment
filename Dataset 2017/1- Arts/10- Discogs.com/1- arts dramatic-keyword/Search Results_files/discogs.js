webpackJsonp([69],[function(e,t,n){var i,o,r,a;n(330),n(427),n(428),r=n(10),n(321),n(9),o=n(6),n(7),n(26),n(305),n(311),n(27),n(5),n(4),n(429),n(300),n(299),n(430),i=n(291),n(328),n(431),n(318),n(432),n(433),n(313),n(434),n(321),n(301),n(435),n(436),n(437),n(438),n(13),n(335),n(439),n(440),n(441),n(442),n(443),n(444),n(342),n(445),n(446),n(447),n(366),n(365),n(448),n(397),n(449),n(450),n(302),n(330),n(334),n(451),n(12),n(452),n(378),n(453),n(316),n(194),n(197),n(454),n(455),n(304),n(377),n(407),n(456),n(457),n(27),n(458),n(459),n(460),n(461),n(462),n(463),n(314),n(464),n(465),n(312),n(466),n(307),n(467),n(468),n(469),n(315),n(470),n(384),n(332),n(309),n(471),n(472),n(325),n(320),n(319),n(473),n(317),a=n(292),ds.define("app",function(e){var t,n,s,l;return l=e("$","ready","Promise"),t=l.$,s=l.ready,n=l.Promise,e("Backbone").$=t,e("features"),s(function(){var l,c,u;return u=e("util"),l=o.ga_pageview_page,c=o.ga_pageview_title,i.trackPageView(l,c),t("input, textarea").placeholder(),e.apply(null,["templates","alerts","raven","layout","broadcast","confirm","onNextVisit","headerNav","images","inputCounter","notes","card","tables","tooltip","youtubemodal","facets","rollover","discogsDialog","footer","shortcuts","analyticsEventCodes","appNexus","consent","googleTagManager"]),1===o.interactiveAdmin&&e("interactiveadmin"),o.username||e("historyListener"),r.getTranslations(),u.processQueue(ds.q||(ds.q=[])),s(function(){return a.__resolveInit(ds)}),n.resolve(ds)})})},,,,function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p,g,m,v,y,b;i=n(2),s=n(3),c=n(5),h=n(6),p=n(7),n(9),n(11),n(25),n(26),u=ds.require("content"),o=ds.require("Promise"),f=ds.require("jquery-deparam"),m=ds.require("features").hasHistoryAPI,b={},b.processQueue=function(e){var t,n,i,o;for(e.push===Array.prototype.push&&(e.push=function(e,t){return function(){var n;return n=t.apply(e,arguments),s.defer(b.processQueue,e),n}}(e,Array.prototype.push)),t=s.pluck(e,0),i=0,o=t.length;i<o;i++)n=t[i],n.call(window,ds.require);e.length=0},b.inUrl=function(e){return e.length>0&&s(window.location.href).includeString(e)},b.inPath=function(e){return e.length>0&&s(window.location.pathname).includeString(e)},b.matchesSegments=function(e){var t,n;if("object"!=typeof e)return!1;for(t in e)if(e.hasOwnProperty(t)&&(!s.isString(t)||!s.isString(e[t])))return!1;if(e[0]&&!s(window.location.hostname).includeString(e[0]))return!1;n=window.location.pathname.substring(1).split("/"),n.unshift(window.location.hostname);for(t in e)if(e.hasOwnProperty(t)&&n[t]!==e[t])return!1;return!0},b.redirect=function(e){return window.location.href=e,!1},b.requireLogin=function(){var e,t,n,i;return i=h.loginUrl,e=encodeURIComponent(location.pathname),t=encodeURIComponent(location.hash),n=h.loggedIn,n||b.redirect(i+"?nologin=1&return="+e+t),n},b.requireActivation=function(){var e,t;return e=h.userActivated,t=h.activationHelpUrl,e||b.redirect(t),e},b.getElementMetrics=function(e,t){var n,i;if(!(e.length<1))return n={},i=t?e.position():e.offset(),n.height=e.outerHeight(!1),n.width=e.outerWidth(!1),n.area=n.height*n.width,i&&(n.top=i.top,n.left=i.left,n.bottom=n.top+n.height,n.right=n.left+n.width),n},b.selectText=function(){var e,t;document.selection?(document.selection.empty(),e=document.body.createTextRange(),e.moveToElementText(this),e.select()):window.getSelection&&(t=window.getSelection(),e=document.createRange(),e.selectNode(this),t.removeAllRanges(),t.addRange(e))},b.toString=function(e){return(" "+e).substring(1)},b.scrollTo=function(e,t){var n,o,r;if(n=s.isString(e)?i("#"+e):e,!n.length&&(n=i("[name='"+e+"']"),!n.length))return!1;if(s.isNumber(n))r=n;else{if(o=n.offset(),!o)return!1;r=o.top,t&&(r-=window.innerHeight-n.height())}return!s.isUndefined(r)&&(i("html, body").animate({scrollTop:r},300),!0)},b.disableFieldButSendData=function(){var e,t,n;n=i(this),e=n.clone(),t=n.next(),e.attr({id:"",name:"",disabled:"disabled"}),t.length>0?t.before(e):n.parent().append(e),n.hide()},b.errorMessageFromXHR=function(e){var t;return"application/json"===e.getResponseHeader("content-type")&&(t=i.parseJSON(e.responseText),t.message)?t.message:u("An unknown error occurred (code %(status)s)")({status:e.status})},d={title:u("Confirm"),okayButtonText:u("Okay"),cancelButtonText:u("Cancel")},b.confirm=function(e,t){var n,i,r,a,l,c,f,h,g,m,v,y;return null==t&&(t={}),f=ds.require("reactDialogs").makeReactDialog,v=s.extend({},d,t),n=v.accept,r=v.decline,y=v.title,m=v.okayButtonText,i=v.cancelButtonText,h=void 0,g=!1,"function"==typeof y&&(y=y()),"function"==typeof m&&(m=m()),"function"==typeof i&&(i=i()),l=function(e){return g=e,a.then(function(){return p.trigger(h.CLOSE)})},a=f({title:y,content:e||u("Are you sure?")(),buttons:[{text:m,color:"green",className:"dialog-button-okay",click:s.partial(l,!0)},{text:i,className:"dialog-button-cancel",click:s.partial(l,!1)}]}),c=function(){return new o(function(e,t){var i;return i=function(){return p.off(h.REMOVE,i),g?(n&&n(),e()):(r&&r(),t())},p.on(h.REMOVE,i)})},a.then(function(){return h=ds.require("modalEvents"),c()})},b.registerDelegate=function(e,t){var n,o;if(s.isString(e)&&(e=i(e)),!e.length)return!1;for(n in t)if(t.hasOwnProperty(n))for(o in t[n])t[n].hasOwnProperty(o)&&e.on(n,o,t[n][o]);return!0},v=/#.+$/g,b.updateParams=function(e,t){var n,o,r,a,l,c;if(t&&(t.add||t.remove)){if(c=e.split("?"),n=e.match(v),n&&(c[0]=c[0].replace(v,"")),l=c[1]?f(c[1]):{},t.add)for(r in t.add)s.has(t.add,r)&&(l[r]=t.add[r]);for(s.isArray(t.remove)||(t.remove=[t.remove]),o=0,a=t.remove.length;o<a;)delete l[t.remove[o]],o++;e=(c[0]+"?"+i.param(l)).replace(/\?$/,""),n&&(e+=n[0])}return e},b.isFocused=function(){return i(document.activeElement).is("input, select, textarea")},b.hasSelectedText=function(){var e;return e=window.getSelection().toString(),e.split(" ").length>1},b.getDuration=function(e){return null==e&&(e=c),Math.round((new Date-e)/1e3)},b.bytesToHumanReadable=function(e){var t,n,i;return t=e/1e3,i="",t>=1e3?(n=t/1e3,i=n.toFixed(1)+"MB"):i=Math.round(t)+"KB",i},b.getImagesHost=function(){var e;return e=h.imagesHost.replace(/^http:\/\//,"//"),s(e).endsWith("/")&&(e=e.slice(0,-1)),e},b.getDefaultImage=function(e,t){var n;return null==e&&(e="release"),n=b.getImagesHost(),t=Boolean(t)?"-"+t:"",n+"/images/default-"+e+t+".png"},b.getDefaultReleaseImage=function(e){var t;return t={CD:"cd",CDr:"cd","CD-ROM":"cd",DVD:"cd",DVDr:"cd",Cassette:"cassette",File:"file",Vinyl:""},e=t[e],b.getDefaultImage("release",e)},b.deparam=function(e){return f(e||window.location.search.replace("?",""))},r=13,a=32,b.makeOnNextVisitHandler=function(e,t,n){return function(i){var o,s;if(s="mousedown"===i.type||"keydown"===i.type&&(i.which===r||i.which===a))return(o=b.makeOnNextVisitHandler.onNextVisit||ds.require("onNextVisit"))(e,t,n,void 0,b.getDuration())}},b.convertCurrency=function(e,t,n){var i;return i=h["m:currencyRates"],e*i[t]/i[n]},b.timeoutPromise=function(e,t,n){return new o(function(i,o){return s.delay(o,t,n),e.then(i,o)})},l=window.requestAnimationFrame||setTimeout,b.raf=function(e){return l(e,1e3/60)},b.centerOn=function(e){var t,n,o,r,a,s;return t=i(window),o=e.height(),r=e.offset().top,a=t.height(),n=(a-o)/2,s=r-n,b.raf(function(){return t.scrollTop(s)})},y={timeout:1e4,interval:2e3,maxInterval:15e3,decay:1.25,delay:0,decayDelay:3e4,now:s.now},b.poll=function(e,t){var n,i,r,a,l,c,u,d,f,h;return null==t&&(t={}),u=s.defaults(t,y),f=u.timeout,a=u.interval,l=u.maxInterval,n=u.decay,r=u.delay,i=u.decayDelay,c=u.now,d=c(),h=function(){return c()-d},new o(function(t,o){var s,c,u,d,p;if(c=null,p=function(){if(a=a>=l?l:h()>=i?a*n:a,clearTimeout(c),h()<f||!f)return c=setTimeout(u,a)},d=function(e){return t(e),clearTimeout(c)},u=function(){return e().then(d,p)},s=function(){return clearTimeout(c),o("Polling failed after "+f+"ms")},setTimeout(u,r),f)return setTimeout(s,f)})},g={params:null},b.getUrl=function(e,t){var n;return null==t&&(t=g),t!==g&&(t=s.defaults(t,g)),n=t.params,n&&(e=b.updateParams(e,{add:n})),h.locale!==h.defaultLocale&&e.split("/")[1]!==h.locale&&(e="/"+h.locale+e),e},b.historyPushUrl=function(e,t){var n;if(m)return n=b.getUrl(e,t),window.history.pushState(null,null,n),(null!=t?t.title:void 0)?document.title=t.title:void 0},b.classSet=function(e){var t;return t="",s.map(e,function(e,n){if(e)return t+=n+" "}),t},b.isElementInViewport=function(e){var t,n;return!!(e=i(e).get(0))&&(n=e.getBoundingClientRect(),t=n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth))},e.exports=b},function(e,t){var n;n=new Date,e.exports=n},function(e,t){e.exports=window.dsdata()},function(e,t,n){var i,o,r;o=n(3),i=n(8),r=o.extend({},i.Events),e.exports=r},,function(e,t,n){var i;i=n(10),ds.define("content",function(){var e,t;return e=function(n){return e[n]||t(n)},t=function(t){return e[t]=i.getText(t)},t("Are you sure?"),t("An unknown error occurred (code %(status)s)"),t("Okay"),t("Cancel"),t("Confirm"),t("Are you certain you would like to delete this review?"),t("Add to List"),t("Please select an existing list."),t("Please enter a title."),t("Are you sure you want to remove this item?"),t("Close"),t("Alert"),t("WARNING: You have unsaved changes."),t("Save"),t("More"),t("Less"),t("Audio not found"),t("Show Credits"),t("Hide Credits"),t("Move"),t("Remove"),t("You did not choose a rating."),t("You did not enter a comment."),t("Items added to your collection"),t("Make an Offer"),t("about"),t("Customize This Page"),t("Show more"),t("Show less"),t("Everything"),t("Releases"),t("Artists"),t("Labels"),t("all versions"),t("Advanced Search"),t("%(quantity)s from %(currency)s"),t("Find Your Version"),t("Add to Collection"),t("Remove from Collection"),t("Add to Wantlist"),t("Remove From Wantlist"),t("Add to List"),t("Sell This Item"),t("Edit %(type)s"),e})},function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p,g,m;a=n(6),o=n(3),i=n(11),n(12),u=ds.require("logError"),r=void 0,c="translate() type error: expected string",h={},h.templates=g={},p={evaluate:/\%\(([\s\S]+?)\)s/g,interpolate:/\%\(([\s\S]+?)\)s/g},r=a.defaultLocale,h.locale=a.locale||r,g[r]={},l={},d=function(e){var t;return t={},o.each(e,function(e,n){var i,r;if(e=e.toString())return r=t[n]||(t[n]=o.template(e,p)),(i=g[h.locale])[n]||(i[n]=r)}),t},s=function(e){var t;return g[h.locale][e]||(t=g[r])[e]||(t[e]=o.template(e,p))},f=function(e){if("string"!=typeof e)throw c;return l[e]||(l[e]=function(t){return s(e)(t)})},m=function(e,t){var n,i,o,r,a;return g[r=h.locale]||(g[r]={}),i=f(e),e&&t?(n=f(t),(o=g[h.locale])[a=e+t]||(o[a]=function(e,t){var o;return t||(t=e),o=e>1||0===parseInt(e),o?n(t):i(t)})):i},h.ngetText=function(e,t){return m(e,t)},h.getText=function(e){return m(e)},h.fetchTranslations=function(e){return new i(function(t,i){var o;try{return n(14)("./"+e).then(t)}catch(t){return o=new Error("Missing locale module: "+e),u(o),i(o)}})},h.getTranslations=function(e){return null==e&&(e=h.locale),g[e]||(g[e]={}),new i(function(t){return e===r?t(g[r]):h.fetchTranslations(e).then(function(e){return t(d(e))})})},e.exports=h},,function(e,t,n){n(13),ds.define("logError",function(e){var t,n,i,o;return t=e("Raven"),i=e("environment"),n=window.console,o=function(e){return i.isProduction()?t.captureException(e):null!=n&&"function"==typeof n.error?n.error(e.stack):void 0}})},function(e,t,n){var i;i=n(6),ds.define("environment",function(){var e;return e=function(){return i.appEnv},e.is=function(t){return t===e()},e.isProduction=function(){return e.is("production")},e.isDevelopment=function(){return e.is("development")},e.isTest=function(){return e.is("test")},e})},function(e,t,n){function i(e){return n(o(e))}function o(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var r={"./de":15,"./de.coffee":15,"./es":17,"./es.coffee":17,"./fr":19,"./fr.coffee":19,"./it":21,"./it.coffee":21,"./ja":23,"./ja.coffee":23};i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=14},function(e,t,n){e.exports=new Promise(function(e){return n.e(1,function(t){return e(n(16))})})},,function(e,t,n){e.exports=new Promise(function(e){return n.e(2,function(t){return e(n(18))})})},,function(e,t,n){e.exports=new Promise(function(e){return n.e(3,function(t){return e(n(20))})})},,function(e,t,n){e.exports=new Promise(function(e){return n.e(4,function(t){return e(n(22))})})},,function(e,t,n){e.exports=new Promise(function(e){return n.e(5,function(t){return e(n(24))})})},,,function(e,t,n){var i,o,r;i=n(2),o=n(3),r=n(6),n(27),ds.define("features",function(e){var t,n,a,s,l,c,u,d;return l=e("ready"),d=function(e,t){var n;return n=void 0,function(){return o.isUndefined(n)&&(n=t(),u(c(n,e))),n}},a={},n=function(){var e;return e={hasTouch:"ontouchstart"in window,inDevMode:r.assetBasePath.match("dev"),isMobile:i("html").hasClass("is_mobile"),hasFormData:!o.isUndefined(window.FormData),hasHistoryAPI:!(!window.history||!history.pushState),hasGetBoundingClientRect:function(){var e;return e=document.createElement("p"),document.body.insertBefore(e,null),a="undefined"!=typeof e.getBoundingClientRect,document.body.removeChild(e),a},has3d:function(){var e,t,n,i;e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},document.body.insertBefore(e,null);for(n in i)o.isUndefined(e.style[n])||(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e,null).getPropertyValue(i[n]));return document.body.removeChild(e),(null!=t?t.length:void 0)>0&&"none"!==t},hasLocalStorage:function(){try{return window.localStorage.setItem("discogsls","discogsls"),window.localStorage.removeItem("discogsls"),!0}catch(e){return!1}}},o.each(e,function(e,t){return o.isFunction(e)?a[t]=d(t,e):a[t]=e}),a},u=function(e){return i("html").addClass(e)},t=function(){var e,t,n;n=o.functions(a),n.push("initialized","init"),e=o.omit(a,n),t=o.map(e,c),u(t.join(" "))},c=function(e,t){var n;return n=e?"":"no_",n+t.toLowerCase()},s={},o.extend(s,n()),l(t),s})},function(e,t,n){n(12),ds.define("ready",function(e){var t,n,i,o,r,a,s,l;return l=e("$","Promise","_"),t=l.$,n=l.Promise,i=l._,a=e("logError"),o=new n(function(e){return"interactive"===document.readyState||"completed"===document.readyState?e(document):t(function(){return e(document)})}),r=function(e){return e instanceof Error&&a(e),n.reject(e)},s=function(e){return null==e&&(e=i.noop),s.__calls+=1,o.then(e).catch(r)},s.__calls=0,s})},function(e,t,n){var i,o,r;i=n(11),r=function(){return new i(function(e){return n.e(6,function(t){return e(n(186))})})},o=function(){return ds.require("load")("react-bundle").then(function(){return{React:n(29),ReactDOM:n(181),PureRenderMixin:n(182),Immutable:n(185)}})},e.exports={loadReactComponents:r,loadReactChunk:o}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,o,r,a;i=n(2),a={},a.currentName=void 0,o={},r={},a.load=function(e){return a.currentName=e,r[e]||(r[e]=i.ajax(window.location.pathname+"/page_config")),r[e].then(function(e){return o[a.currentName]=e}),r[e]},a.get=function(e){if(o[a.currentName])return o[a.currentName][e];throw new Error("Trying to access '"+e+"' on page config '"+a.currentName+"' that is not loaded yet.")},e.exports=a},,,function(e,t){e.exports={ROUTE_UPDATED:"page:routeUpdated",PAGE_UPDATED:"page:updated",PAGE_LOADING:"page:loading",PAGE_LOADING_FINISHED:"page:loadingFinished",PAGE_UPDATE_FAILED:"page:updateFailed",PAGE_MESSAGE:"page:message",REMOVE_PAGE_MESSAGE:"page:removeMessage",PAGE_NOT_FOUND:"page:notFound",PAGE_LOADER_MOUNTED:"pageLoader:mounted",PAGE_LOADER_UNMOUNTED:"pageLoader:unmounted",PAGE_LOADER_LOADED:"pageLoader:loaded"}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,o,r,a,s,l,c;i=n(2),a=n(3),r=n(8),s={},s=a.extend(s,r.Events),l=function(e,t){var n;null==t&&(t=".action_menu_toggler"),n=i(e),n=n||i(document.body),c(n),n.find(t).each(function(e,t){var n;return n=i(t),new o({el:n.next(".action_menu"),$toggleEl:n})}),i(document).one("pjax:end",function(){return l(n,t)})},c=function(e){var t,n,i;n=s._events&&s._events["action_menu:visible"],n&&(i=a.pluck(n,"context"),t=a.filter(i,function(t){var n;return n=t.$el.closest(e).length>0}),a.invoke(t,"teardown"))},o=r.View.extend({events:{"click a":"hideMenu"},initialize:function(e){var t;this.listenTo(s,"action_menu:visible",function(e){e!==this&&this.$el.hasClass("action_menu_visible")&&this.hideMenu()},this),this.boundToggleMenu=a.bind(this.toggleMenu,this),this.$toggleEl=e.$toggleEl,this.$toggleEl.onFastClick(this.boundToggleMenu),this.delegateEvents(),t=a.bind(function(e){this.$el.closest(e.target).length>0&&(this.teardown(),i(document).off("pjax:start",t))},this),i(document).on("pjax:start",t)},renderMenu:function(e){var t;this.$el.toggleClass("action_menu_visible",e),this.$toggleEl.toggleClass("action_menu_toggler_visible",e),this.boundHideMenu=this.boundHideMenu||a.bind(this.hideMenu,this),i("body").off("click",this.boundHideMenu),e&&(t=this.$el.find("li:visible a, li:visible button").first(),t.trigger("focus"),a.delay(function(e){i("body").on("click",e.boundHideMenu)},400,this),this.boundToggleArrowHighlight||(this.boundToggleArrowHighlight=a.bind(this.toggleArrowHighlight,this),t.on("mouseenter mouseleave",this.boundToggleArrowHighlight)),s.trigger("action_menu:visible",this))},teardown:function(){this.stopListening(),this.undelegateEvents(),this.$toggleEl.offFastClick(this.boundToggleMenu)},toggleArrowHighlight:function(){this.$el.toggleClass("ui-dialog-arrow-highlight")},hideMenu:function(){this.renderMenu(!1)},toggleMenu:function(e){var t;t=this.$el.hasClass("action_menu_visible"),this.renderMenu(!t),e.preventDefault(),e.stopPropagation()}}),s.teardown=c,s.ActionMenuView=o,s.setupActionMenuView=l,e.exports=s},,,,,,,,,,,,,,,,,,,,,function(e,t,n){var i,o,r,a,s;a=n(292),i=n(11),o=n(3),r=ds.require("consent"),s={TIMEOUT:3e4},s.sendEvent=function(e,t,n,o,l,c){return new i(function(u,d){return i.all([a,r]).then(function(){var i,r,a;return i=function(e){return clearTimeout(a),u(e)},r=function(){return d("analytics.track() timed out in "+s.TIMEOUT+"ms.")},a=setTimeout(r,s.TIMEOUT),ga(e,"event",{eventCategory:t,eventAction:n,eventLabel:o,eventValue:l,nonInteraction:c,hitCallback:i})})})},s.sendPageView=function(e,t,n){return new i(function(o,l){return i.all([a,r]).then(function(){var i,r,a;return i={hitCallback:function(e){return clearTimeout(a),o(e)}},t&&(i.page=t),n&&(i.title=n),r=function(){return l("analytics.trackPageView() timed out in "+s.TIMEOUT+"ms.")},a=setTimeout(r,s.TIMEOUT),ga(e,"pageview",i)})})},s.track=function(e,t,n,o,r){return i.all([s.sendEvent("send",e,t,n,o,r),s.sendEvent("labs.send",e,t,n,o,r)])},s.trackPageView=function(e,t){return setTimeout(function(){if(!o.isUndefined(e)&&!o.isString(e))throw new Error("analytics.trackPageView called with invalid page argument: "+JSON.stringify(e)+".");if(!o.isUndefined(t)&&!o.isString(t))throw new Error("analytics.trackPageView called with invalid title argument: "+JSON.stringify(t)+".")},0),i.all([s.sendPageView("send",e,t),s.sendPageView("labs.send",e,t)])},e.exports=s},function(e,t,n){var i;i=n(11),e.exports=function(){var e,t;return e=void 0,t=new i(function(t){return e=t}),t.__resolveInit=e,t}()},,,,,,,function(e,t){ds.define("alerts",function(e){var t,n,i,o,r,a,s,l;return l=e("$","content","_"),t=l.$,i=l.content,n=l._,a=e("reactDialogs").makeReactDialog,s={},s._alertInterior=function(e){var n,i;return i="discogs_alert_message_eCTGqP16sn",n=t("#"+i),n.length||(t("body").append("<div id='"+i+"' />"),n=t("#"+i)),n.html(e)},s.alert=function(e,n){var o;return o=[{text:i("Close")()}],n=t.extend(!0,{title:i("Alert")(),content:e,buttons:o},n),a(n)},o={id:null,title:"",content:"",actions:null},r=n.template("<div class='inline-error <% if (actions) { %>inline-error-with-actions<% } %>'<% if (id) { %> id='<%= id %>'<% } %>'> <div class='inline-error-message'> <h5><i class='icon icon-times-circle icon-red'></i> <%= title %></h5> <p><%= content %></p> </div> <% if (actions) { %> <div class='inline-error-actions'><%= actions %></div> <% } %> </div>"),s.inlineError=function(e,i){var a,s,l,c;return null==i&&(i={}),i=n.defaults(i,o),a=t("body"),s=t(r(i)),c=e.offset(),a.append(s),l=function(e){t(e.target).closest(".inline-error").length||(s.length&&s.remove(),a.off("click.inlineError").off("keydown.inlineError").off("blur.inlineError","input, textarea, select, button"))},n.delay(function(){return a.on("click.inlineError",l).on("keydown.inlineError",l).on("blur.inlineError","input, textarea, select, button",function(e){return n.delay(function(){return l(e)},250)})},250),s.css({top:c.top+e.outerHeight(),left:c.left,minWidth:e.outerWidth()})},s})},function(e,t,n){var i,o,r,a=function(e,t){return function(){return e.apply(t,arguments)}};i=n(2),o=n(3),r=n(4),n(301),n(27),ds.define("alertMessage",function(e){var t,n,s,l,c,u,d,f,h,p,g,m,v;return u=e("cookie"),m=e("ready"),h=r.classSet,s=300,t=1e4,l="am_",c="1",d={type:"info",id:void 0,cookie:void 0,showUntil:void 0,autoClose:!1,closable:!1,announcement:!1,position:"top",fullWidth:!1},p={error:"exclamation-triangle",info:"info-circle",warning:"exclamation-triangle",accept:"check-circle",lab:"flask",announcement:"bullhorn",news:"newspaper-o"},f=function(e){var t,o,r,a;return o=e.id,o&&null!=(r=i("#"+o).data("alertMessageView"))&&r.remove(),a=new n(e),a.isVisible()?(t=i(e.selector||".flash_messages"),t.append(a.$element)):a.remove(),a},v=/(.+)\s/,n=function(){function e(e){var t;this.model=null!=e?e:{},this.tryToAutoClose=a(this.tryToAutoClose,this),this.mouseHandler=a(this.mouseHandler,this),this.closeHandler=a(this.closeHandler,this),o.defaults(this.model,d),(null!=(t=this.model.showUntil)?t.indexOf(" "):void 0)>0&&(this.model.showUntil=this.model.showUntil.match(v)[1]),this.$element||(this.$element=this.make()),this.$element.data("alertMessageView",this),this.addHandlers(),this.model.autoClose&&this.scheduleClose()}return e.prototype.make=function(){return i(this.model.element?this.model.element:this.template(this.model))},e.prototype.remove=function(){return this.model.closable&&(this.$element.off("mouseenter.alertMessage mouseleave.alertMessage",this.mouseHandler),this.$element.off("click",".alert-message-close-icon",this.closeHandler)),this.$element.remove()},e.prototype.addHandlers=function(){if(this.model.closable)return this.$element.on("mouseenter.alertMessage mouseleave.alertMessage",this.mouseHandler),this.$element.on("click",".alert-message-close-icon",this.closeHandler)},e.prototype.template=function(e){var t,n,i,o,r,a,s,l,c,u,d,f,g;return c=e.message,f=e.type,l=e.id,a=e.cookie,d=e.showUntil,o=e.closable,n=e.autoClose,t=e.announcement,u=e.position,s=e.fullWidth,g="alert-message-"+f,i=h({"alert-message-closable":o,"alert-message-broadcast":t,"alert-message-top":"top"===u,"alert-message-bottom":"bottom"===u}),r=h({"alert-message-full-width":s}),"<div class='alert-message alert-message-js "+g+" "+i+"' "+(l?"id='"+l+"'":"")+" data-alert-message-closable='"+o+"' data-alert-message-auto-close='"+n+"' "+(a?"data-alert-message-cookie='"+a+"'":"")+" "+(d?"data-alert-message-show-until='"+d+"'":"")+" > <div class='alert-message-content "+r+"' float_fix> <i class='icon icon-"+p[f]+" alert-message-icon'></i> "+(o?"<a class='alert-message-close-icon'><i class='icon icon-times'></i></a>":"")+" <span class='alert-message-text'>"+c+"</span> <div> </div>"},e.prototype.close=function(){return clearTimeout(this.scheduledClose),this.$element.slideUp(s,function(e){return function(){return e.remove()}}(this))},e.prototype.cookieName=function(){return""+l+this.model.cookie},e.prototype.shouldRemember=function(){return null!=this.model.cookie},e.prototype.remember=function(){var e,t,n,i;return i=new Date,n=new Date,t=this.model.showUntil?Date.parse(this.model.showUntil):n.setDate(n.getDate()+14),e=Math.ceil((t-i.getTime())/1e3/60/60/24),e>0&&u(this.cookieName(),c,{expires:e})},e.prototype.forget=function(){if(this.shouldRemember())return u.removeCookie(this.cookieName())},e.prototype.isDismissed=function(){return u(this.cookieName())},e.prototype.isExpired=function(){return null!=this.model.showUntil&&new Date>new Date(this.model.showUntil)},e.prototype.isVisible=function(){return!(this.isExpired()||this.isDismissed())},e.prototype.closeHandler=function(e){var t,n;t=0===this.$element.find(e.target).length,n=1===i(e.target).closest(this.$element.find(".alert-message-close-icon")).length,(t||n)&&(this.close(),this.shouldRemember()&&this.remember())},e.prototype.mouseHandler=function(e){this.isCursorOverElement="mouseenter"===e.type},e.prototype.getOffset=function(){return null!=this.offset?this.offset:this.offset=this.$element.offset().top+this.$element.outerHeight()},e.prototype.isOkayToClose=function(){var e;return e=window.scrollY>this.getOffset(),!e&&!this.isCursorOverElement},e.prototype.tryToAutoClose=function(){return this.isOkayToClose()?this.close():this.scheduleClose()},e.prototype.scheduleClose=function(){return clearTimeout(this.scheduledClose),this.scheduledClose=setTimeout(this.tryToAutoClose,t)},e}(),g=function(e){var t,o,r;return t=i(e),o=t.data(),r={message:i.trim(t.find(".alert-message-content").html()),closable:o.alertMessageClosable,autoClose:o.alertMessageAutoClose,element:e,cookie:o.alertMessageCookie,showUntil:o.alertMessageShowUntil},new n(r)},m(function(){return i(".alert-message").each(function(){return g(this)})}),f})},function(e,t,n){var i;i=n(6),ds.define("cookie",function(e){var t,n,o,r,a;return a=e("$","_"),t=a.$,n=a._,r=n.memoize(function(){return{domain:i.cookieDomain,path:"/",expires:365}}),o=function(e,n,i){return arguments.length>1?t.cookie(e,n,t.extend({},r(),i)):t.cookie(e)},o.removeCookie=function(e,n){return t.removeCookie(e,t.extend({},r(),n))},o})},function(e,t,n){var i,o,r,a;i=n(2),o=n(3),a=n(292),r=n(291),n(303),n(304),n(26),n(27),ds.define("layout",function(e){var t,n,s,l,c,u;return t=e("Breakpoints"),l=e("persist"),s=e("features"),u=e("ready"),n=[{name:"mobile",value:600},{name:"desktop",value:800}],c={init:function(){return this.breakpoints=new t(n),a.then(function(){s.isMobile&&i(window).scrollTop()<=100&&scrollTo(0,0)}),this.breakpoints.measure(),i("#layout_buttons").on("click","a",this.changeLayout),i("#mobile_layout, #mobile_layout_top").on("click",this.changeMobileLayout),i("#footer_menu_link").onFastClick(this.toggleFooterMenu),i(".sticky_aside").stickyAside(14),i(document).on("pjax:end",c.setupBinding.bind(this)),this.setupBinding(),c},setupBinding:function(){var e,t;i("#layout_buttons a").click(c.savePageLayout),"mobile"===c.mode()&&(t=i(".open_filter"),t.length&&s.has3d(),t.onFastClick(function(e){var t,n,o;o=e||window.event,t=i(".aside_nav_wrap"),n=t.length>0?t:i("#page"),i(this).toggleClass("filters_active"),r.track("mobile","aside_toggle"),c.toggleElement(o,n,function(e){var t;return t=i(e.target),0===t.parents("#page_aside").length&&!t.closest(".off_canvas_nav").length})}),i("#tab_selection").onFastClick(function(e){var t,n;n=e||window.event,t=i(".tab_menu, .side_menu"),r.track("mobile","tabs_toggle"),c.toggleElement(n,t,function(e){return 0===i(e.target).parents(".tab_menu, side_menu").length})}),e=i(".side_menu, .tab_menu"),e.length>0&&(e.css("width",e[0].scrollWidth),this.scrollActiveTab(e)))},scrollActiveTab:function(e){var t,n,o;if(t=e.find(".current")[0])return n=t.offsetLeft+t.clientWidth,o=i(document).width(),n>o?i(".responsive_wrap").scrollLeft(n-.6*o):void 0},changeLayout:function(){var e,t;return e=this,t=function(){e===this?i(this).attr("disabled","disabled"):i(this).removeAttr("disabled")},o.defer(function(){i("#layout_buttons a").each(t)}),!0},selectLayout:function(e){return this.changeLayout.call(i("#layout_buttons a[data-size="+e+"]").get(0))},changeMobileLayout:function(){var e,t;t=l.get("wants_reduced_ui"),o.isUndefined(t)&&(t=!0),e=!t,l.set("wants_reduced_ui",e),r.track("mobile","switched_layout"),window.location.reload()},toggleFooterMenu:function(){return i(window).scrollTop(i("#site_footer_list").toggle().offset().top),i(this).toggleClass("expanded"),!1},toggleElement:function(e,t,n){n=n||function(){return!0},e.preventDefault(),e.stopPropagation(),t.toggleClass("open"),i("#page_content").off("click.mobile_menu"),setTimeout(function(){return i("#page_content").one("click.mobile_menu",function(e){n(e)&&(e.preventDefault(),c.closeElement(t),i(".open_filter").removeClass("filters_active"))})},500)},closeElement:function(e){e.removeClass("open")},savePageLayout:function(){var e,t;t=i(this).data("size"),e=i("#layout_buttons").data("section"),l.set(e+"_layout",t)},mode:function(){var e,t;return e=i("html"),(null!=(t=c.breakpoints)?t.get("<=mobile"):void 0)&&e.hasClass("needs_reduced_ui")&&e.hasClass("is_mobile")?"mobile":"desktop"}},c.ready=u(c.init.bind(c)),c})},,function(e,t){ds.define("persist",function(e){var t,n,i,o,r,a,s,l;return t=e("$"),o=e("cookie"),n=e("Backbone"),i=e("_"),s={},r="dsjspersist2",l=t.cookie(r),a=new n.Model(l?JSON.parse(l):{}),s.setCookie=function(){var e;e=JSON.stringify(a),o(r,e,{expires:3650})},a.on("change",function(){s.setCookie()}),i(["get","set","unset"]).each(function(e){return s[e]=function(){return a[e].apply(a,arguments)}}),s})},function(e,t,n){var i;i=n(6),ds.define("load",function(e){var t,n,o,r,a,s,l,c,u,d,f,h,p,g,m;return p=e("_","Promise","ready"),n=p._,t=p.Promise,h=p.ready,u={},f={},r=null,g=i.sha,a=i.assetBasePath,s=i.assetsHost,s||(s="/"),m=function(){return r||(r=new t(function(e){var n,i,o,r,a;for(r=document.getElementsByTagName("script"),n=0,i=r.length;n<i;n++)o=r[n],a=""+o.getAttribute("src"),"null"!==a&&a.match(""+s)&&(a=a.split("?")[0]+"?"+g,u[a]=t.resolve(a));return e()}))},h(m),d=function(){return""+s+a+"javascripts/"},l=".js",o=function(e){return new t(function(t){var n;return n=document.createElement("script"),n.src=e,n.onload=function(){return t(e)},n.setAttribute("async","async"),document.head.appendChild(n)})},c=function(e){var t;return t=""+f.load.path()+e+l+"?"+g,u[t]||(u[t]=o(t))},f.load=function(e){return e=n.isArray(e)?e:[e],m().then(function(){return t.all(e.map(c))})},f.load.path=d,f.load})},,function(e,t){ds.define("templates",function(e){var t,n,i,o,r;return r=e("$","_","ready"),t=r.$,n=r._,o=r.ready,i={init:function(){return n.extend(i,i.precompileTemplates())},precompileTemplates:function(){var e,i;return e={},i=/_template$/,t(".underscore_template").each(function(){var o,r;return o=n.str.camelize(this.id.replace(i,"")),r=n.template(t.trim(t(this).html())),e[o]=r}),e}},o(function(){return i.init()}),i})},,function(e,t){ds.define("youtubeIframeAPI",function(e){var t,n,i,o,r,a;return a=e("$","_","Promise"),t=a.$,i=a._,n=a.Promise,r={},o=void 0,r.load=function(){return o||(o=new n(function(e){var n;if("function"!=typeof window.onYouTubeIframeAPIReady)return window.onYouTubeIframeAPIReady=e,n=document.createElement("script"),n.async=1,n.src="https://www.youtube.com/iframe_api",t("head").append(n)}))},r.getPlayerState=function(e){var t;return t=void 0,i.find(YT.PlayerState,function(n,i){if(e.data===n)return t=i.toLowerCase(),!0}),t},r})},,function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p,g,m,v,y,b;p=n(6),i=n(2),u=n(3),o=n(8),d=n(291),y=n(4),n(312),v=ds.require("storage"),m={},g={"release collection":"release_id","release wantlist":"id","master release":"master_id","master shadowcat":"shadowcat"},r=o.Model.extend({initialize:function(e){var t,n,i,o,r,a;n=(null!=(o=e.collection)?o.length:void 0)>0,i=(null!=(r=e.wantlist)?r.length:void 0)>0,n&&(e.collection=e.collection.map(Number)),i&&(e.wantlist=e.wantlist.map(Number)),(this.is("release")||this.is("master release")||this.is("master shadowcat"))&&(n&&(t=h.add(u(e.collection).map(this.makeCollectionAttr()),{merge:!0,silent:!0}),this.set("collection",t,{silent:!0})),i&&(a=b.add(u(e.wantlist).map(this.makeWantlistAttr()),{merge:!0,silent:!0}),this.set("wantlist",a,{silent:!0
})),h.on("add destroy change remove",this.syncCollection,this),b.on("add destroy change remove",this.syncWantlist,this)),f.on("change:menuVisible",this.hideMenu,this)},defaults:{collection:[],wantlist:[],inventory:[]},addTo:function(e){var t,n,i,o,r,a,s,l;return p.loggedIn?(s=this.get("objectId"),a=this.get("masterId"),l=this.get("shadowcat"),o={},t=m[e],r=this.getRelatedKey(t),o[r]=s,a&&(o.master_id=a),l&&(o.shadowcat=l),i=t.create(o),n="collection"===e?"collection_add":"wantlist_add",d.track("release",n,p.endpoint),i):(v.set("add-to-later",{property:e,id:this.get("id")}),void y.requireLogin())},removeFrom:function(e,t){var n,i,o;if(y.requireLogin())return t=t||this.get("objectId"),n=m[e],o=n.get(t),i=o.destroy(),i&&i.then(function(){var t;return t="collection"===e?"collection_remove":"wantlist_remove",d.track("release",t,p.endpoint)}),i},getRelatedKey:function(e){var t,n;return n=this.get("objectType"),"release"===n&&(t=e===h?"collection":"wantlist",n=n+" "+t),g[n]},getRelatedModels:function(e){var t,n;return t=this.getRelatedKey(e),n={},n[t]=this.get("objectId"),e.where(n)},syncCollection:function(e){return this._setRelatedModels(e,"collection",h)},syncWantlist:function(e){return this._setRelatedModels(e,"wantlist",b)},_setRelatedModels:function(e,t,n){var i,o,r,a;if(o=this.get("objectId").toString(),i=this.getRelatedKey(n),a=null!=(r=e.get(i))?r.toString():void 0,a===o)return this.set(t,this.getRelatedModels(n))},makeCollectionAttr:function(){var e,t,n,i,o;return o=this.get("objectId"),i=this.get("masterId"),e=this.is("release"),t=this.getRelatedKey(h),n=function(n){var r;return r={id:n},r[t]=o,e&&i&&(r.master_id=i),r}},makeWantlistAttr:function(){var e,t,n,i,o;return i=this.get("objectId"),e=this.is("master release"),t=this.is("master shadowcat"),o=void 0,t&&(o=this.get("shadowcat")),n=function(n){var r;return r={id:n},e?r.master_id=i:t&&(r.shadowcat=o),r}},toggleAllWantlist:function(){var e,t,n;return y.requireLogin()&&(e=this.get("wantlist").length>0?"remove":"add",n=function(t){return function(n){var i;"remove"===e?(b.remove(b.filter(function(e){return u.include(n.ids,e.get("id"))})),i=[]):i=b.add(u(n.ids).map(t.makeWantlistAttr())),t.set("wantlist",i)}}(this),t=i.ajax({type:"POST",url:y.getUrl("/master/want_"+e),dataType:"json",data:{master_id:this.get("objectId")}}),t.then(n).then(function(){var t;t="add"===e?"wantlist_add_all":"wantlist_remove_all",d.track("release",t,p.endpoint)})),this},requestVersions:function(){return i.ajax({url:this.get("groupUrl")})},is:function(e){return this.get("objectType")===e}}),f=new(o.Collection.extend({model:r})),c=o.Model.extend({}),l=o.Collection.extend({model:c,url:y.getUrl("/_rest/wantlist")}),b=new l,s=o.Model.extend({}),a=o.Collection.extend({model:s,url:y.getUrl("/_rest/collection")}),h=new a,m.cards=f,m.wantlist=b,m.collection=h,m.CardModel=r,m.WantlistModel=c,m.CollectionModel=s,e.exports=m},function(e,t){ds.define("storage",function(e){var t,n,i,o,r,a,s;return o=e("features").hasLocalStorage,t=e("_"),i=o(),s=i?window.localStorage:{setItem:t.noop,getItem:t.noop,removeItem:t.noop,clear:t.noop,length:0,key:t.noop},r=function(e){return"string"==typeof e?e:JSON.stringify(e)},n=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},a={enabled:i,set:function(e,t){var n;try{return s.setItem(e,r(t))}catch(e){return null!=(n=window.console)&&"function"==typeof n.error?n.error("Local storage failed to save"):void 0}},get:function(e){return n(s.getItem(e))},remove:function(e){return s.removeItem(e)},clear:function(){return s.clear()},size:function(){return s.length},key:function(e){return s.key(e)},all:function(){var e;return e={},t.each(s,function(t,n){var i;return i=s.key(n),e[i]=a.get(i)}),e}},a.has=function(e){return e in s},a})},function(e,t,n){var i,o,r,a,s,l,c,u;i=n(2),s=n(3),a=n(11),r=n(8),c=n(6),u=n(311),o=n(270).ActionMenuView,l=n(291),n(291),n(27),n(314),n(315),n(26),ds.define("card",function(e){var t,n,d,f,h,p,g,m,v,y,b,w,_,k,C,x;return w=e("ready"),k=e("skittles"),C=e("tooltip"),g=e("features").isMobile,d=u.cards,x=[],p=function(){var e,t;t=void 0,e=i(window),e.off("pjax:end cards:updated",p),s(x).invoke("teardown"),x.length=0,v(h()),(t=c.pageObject)&&d.add(new d.model(t),{at:0}),e.on("pjax:end cards:updated",p)},f=".card, .r_tr",n=function(e,t,n){this.model[e](t),n.preventDefault()},h=function(e){var t;return null==e&&(e=document.body),t=i(e),t.find(f).not(".react-card")},_=function(e,t,n){var i,o;return o=s.keys(t.changed)[0],i=e.find(".skittle_"+o),k.updateSkittle(i,k._makeData(n.length,o)),e.toggleClass("card_in_"+o,!!n.length),"collection"===o&&e.toggleClass("card_multiple_in_collection",n.length>1),e},y=function(e){var t;return t=s.pick(e.data(),"id","objectType","objectId","collection","wantlist","inventory","masterId","shadowcat","groupUrl","parentGroupUrl")},m=function(e){var n;return n=d.get(e.data("id")),new t({el:e.get(0),model:n})},v=function(e,t){var n,o,r,a,l,c;return n=s(s(e.toArray()).map(i)),t?(l=d.indexOf(t.model),c=s.indexOf(x,t),o=[c,0],d.add(n.map(y),{index:l}),r=n.map(m),o.push.apply(o,r),x.splice.apply(x,o)):(d.reset(n.map(y)),r=n.map(m),x.push.apply(x,r)),a=t?t.model.get("objectId"):void 0,i(window).trigger("cards:initialized",a),r},t=r.View.extend({_events:{"click .add_to_collection":"addToCollection","click .add_to_wantlist":"addToWantlist","click .remove_from_wantlist":"removeFromWantlist","click .remove_from_collection":"removeFromCollection"},initialize:function(){this.listenTo(this.model,"change:wantlist change:collection change:inventory",this.render,this),this.model.get("groupUrl")&&this.$el.find(".mr_toggler").onFastClick(s.bind(this.toggleVersionsHandler,this)),g?this.delayedInit():this.$el.one("mouseenter",s.bind(this.delayedInit,this)).on("mouseenter",s.bind(this.setHover,this)),this.versionsVisible=!1},delayedInit:function(){this.menuView=new o({el:this.$el.find(".action_menu"),$toggleEl:this.$el.find(".action_menu_toggler")}),this.delegateEvents(this._events),g||this.$el.on("mouseleave",s.bind(this.unsetHover,this))},render:function(e,t){return _(this.$el,e,t),this},teardown:function(){this.stopListening(),this.undelegateEvents(),this.menuView&&this.menuView.teardown()},addToCollection:s.partial(n,"addTo","collection"),addToWantlist:s.partial(n,"addTo","wantlist"),removeFromWantlist:s.partial(n,"removeFrom","wantlist"),removeFromCollection:function(e){var t;t=this.model.get("collection"),1===t.length&&this.model.removeFrom("collection",t[0].get("id")),e.preventDefault()},renderHover:function(e){this.$el.toggleClass("card_hover",e)},unsetHover:function(){this.renderHover(!1)},setHover:function(){this.renderHover(!0)},toggleVersionsHandler:function(e){e.preventDefault(),this.toggleVersions()},toggleVersions:function(e){var t,n,i,o,r;return i=function(){t.removeClass("icon-spin icon-spinner").toggleClass("icon-caret-left",!e).toggleClass("icon-caret-down",e)},n=function(){t.removeClass("icon-caret-left icon-caret-down").addClass("icon-spinner icon-spin")},e=this.versionsVisible=s.isUndefined(e)?!this.versionsVisible:e,t=this.$el.find(".mr_toggler .icon"),i(),o=s.delay(n,500),r=this.getVersionCards().then(function(t){return i(),clearTimeout(o),s.first(t).$el.toggleClass("sub_first",e),s.last(t).$el.toggleClass("sub_last",e),s.invoke(t,"toggle",e),t}),r.then(function(){return l.track("master release","versions toggled",e?"open":"close")}),r},toggle:function(e){this.$el.toggleClass("hidden",!e)},getVersionCards:function(){var e,t,n,o,r,l;return t=function(t){var n;return n=h(i("<div />").html(t)),e.after(n),C.setup(n),v(n,l)},l=this,n=this.model,e=this.$el,o={parentGroupUrl:n.get("groupUrl")},u=s(d.where(o)).without(n),r=s.filter(x,function(e){return s.include(u,e.model)}),a.resolve(r.length?r:this.model.requestVersions().then(t))}}),b={views:x,CardView:t,renderCardModelState:_},s.extend(b,r.Events),w(p),b})},function(e,t){ds.define("skittles",function(e){var t,n,i,o;return o=e("$","_"),t=o.$,n=o._,i={},i.types=["collection","inventory","wantlist"],i.iconMap={collection:"collection",wantlist:"wantlist",inventory:"store"},i._makeData=function(e,t){var i,o;return i=n.isArray(e)?e.length:e,o=i+" in "+n.str.capitalize(t),{name:t,title:o,count:i}},i.makeData=function(e){return n(i.types).map(function(t){var n;return n=(null!=e?e[t]:void 0)||0,i._makeData(n,t)})},i.updateStatus=function(e,t){n(t).chain().pick(i.types).each(function(t,n){var o;return o=e.find(".skittle_"+n),i.updateSkittle(o,i._makeData(t,n))})},i.updateSkittle=function(e,t){var n;return e.attr("aria-label",t.title).attr("title",t.title),n=e.data("tooltip"),null!=n&&n.fixTitle(),e.toggle(!!t.count).find(".count").text(t.count),e},i.render=function(e){var t;return t="",t+=n(i.makeData(e)).map(i.skittleTemplate).join(""),t?"<span class='skittles'>"+t+"</span>":t},i.skittleTemplate=function(e){var t,n,o;return null==e&&(e={}),n="",o=e.name,t=e.count,o&&"number"==typeof t&&(n+="<span class='skittle skittle_"+o+" needs_delegated_tooltip' "+(0===t?" style='display: none;'":"")+" data-title='"+e.title+"' title='"+e.title+"' aria-label='"+e.title+"' ><i class='icon icon-"+i.iconMap[o]+"'></i><span class='count'>"+t+"</span></span>"),n},i.updateMasterRowSkittles=function(e){var n,o,r,a,s;o=e.closest("tr"),a=o.attr("class").match(/m(\d+)/),a&&(s=a[0],n=t(".master."+s),n.length&&(r=i.makeMasterSkittleData(s),i.updateStatus(n.find(".skittles"),r)))},i.makeMasterSkittleData=function(e){var o,r,a;return r={},a=function(e,i){return n.sum.apply(null,e.find(".skittle_"+i+" .count").map(function(){return 1*t(this).text()}))},o=t(".sub."+e),0===o.length&&(o=t(".version_"+e)),o.length&&n(i.types).each(function(e){return r[e]=a(o,e)}),r},i})},function(e,t,n){var i,o;o=n(292),i=n(7),ds.define("tooltip",function(e){var t,n,r,a,s,l,c,u,d,f,h,p,g,m,v;return h=e("$","_","features"),t=h.$,n=h._,a=h.features,p=".needs_tooltip",r=".needs_delegated_tooltip",l=function(e){var n;return e?(n=t(e),n.is(p)||(n=n.find(p))):n=t(p),n},v=function(e){var n,i,o;for(i=0,o=e.length;i<o;)n=t(e[i]),n.data("tooltip")&&(n.removeData("original-title"),n.removeAttr("data-original-title"),n.tooltip("destroy")),i++;return e},g=function(){var e,n,i;return e=t(this),n=t.trim(e.attr("aria-label")),i=e.data("original-title")||e.data("title")||e.attr("title"),!n&&i&&e.attr("aria-label",i),e},m=function(e){return e.each(g)},d=function(e){return a.isMobile||(e.tooltip(),s(e)),e},s=function(e){var i,o,r,a;a=void 0,o=void 0,r=function(){i.css({width:a,height:o})},i=e.filter(function(){var e,n;if(n=t(this),e=this.parentNode.className.match("tooltip_wrapper")&&n.closest("td.status"),e&&e.length)return void 0===o&&(o=e.height()),void 0===a&&(a=e.width()),n}),i.length&&(r(),t(window).off("resize.tooltip_handler").on("resize.tooltip_handler",n.throttle(r,500)))},c=function(){return t([p,r].join(", ")).toArray().forEach(function(e){var n;return null!=(n=t(e).data("tooltip"))?n.hide():void 0})},u=function(e){var t;return t=l(e),v(t),m(t),d(t),t},f={init:function(e){return o.then(function(){return t(document).off("pjax:end.tooltips").on("pjax:end.tooltips",function(e){u(e.target)}),a.isMobile||t(document.body).tooltip({selector:r}),i.on("tooltips:hide",c),u(e)})},setup:function(e){return u(e)}},f.init(),f})},function(e,t,n){var i,o;o=n(3),n(312),n(301),n(27),n(317),i=n(11),ds.define("onNextVisit",function(e){var t,n,r,a,s,l,c,u,d;return t=e("cookie"),c=e("ready"),u=e("storage"),r="onNextVisit",d=function(){return n.length?u.set(r,n):u.remove(r)},l=function(){u.enabled&&(n.push(o.toArray(arguments)),d())},a=l.pastMessages=[],n=l.futureMessages=[],s=function(){var n;return u.enabled&&u.has(r)&&(a.push.apply(a,u.get(r)),d()),t("on_next_visit")&&(a.push.apply(a,JSON.parse(t("on_next_visit"))),t.removeCookie("on_next_visit")),n=o.map(a,function(t){var n,i,o,r,a,s,l;for(a=t[0].split("."),n=t.slice(1),o=0,r=a.length;o<r;o++)s=a[o],l=l?l[s]:e(s);if(i=l)return c(function(){return i.apply(null,n)});throw new Error("Unable to process message: "+t.join(","))}),a.length=0,i.all(n)},l.process=s,s(),l})},function(e,t,n){var i,o;o=window.webpackRequire,i=window.webpackRequire=function(e){var t;if(t="function"==typeof o?o(e):void 0,"undefined"!=typeof t)return t;switch(e){case"buttons":return n(318);case"dsdata":return n(6);case"initialized":return n(292);case"start":return n(5);case"sections/subform/analytics":return n(319);case"util":return n(4);case"menu":return n(270);case"events":return n(7);case"analytics":return n(291);case"i18n":return n(10);case"models":return n(311);case"pageEvents":return n(197);default:return}},e.exports=i},function(e,t,n){var i,o,r,a,s,l;i=n(2),l=n(4),a=n(7),r="dropdown:closeAll",o=i(".dropdown-button"),s=function(){return o.removeClass("dropdown-button-open")},o.on("click",".dropdown-toggle",function(e){var t,n,o,s,c;if(e.preventDefault(),t=i(this).parent(".dropdown-button"),c=!t.hasClass("dropdown-button-open"),n=e.clientX>window.screen.width/2,o=e.clientY>.6*window.screen.height,s=l.classSet({"dropdown-button-open-left":n,"dropdown-button-open-top":o}),a.trigger(r),c&&t.toggleClass("dropdown-button-open"),t.find(".dropdown-button-options").toggleClass(s,c),c)return setTimeout(function(){return i("body").one("click",function(){return a.trigger(r)})},200)}),a.on(r,s)},function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k,C=[].slice;k=n(4),u=n(6),a=n(11),i=n(320),f=n(292),n(321),n(13),c=ds.require("consent"),h=ds.require("environment").isProduction,r="subform",o="UA-36965964-4",p=l=null,d=function(e){var t;return t=(null!=e?e:{}).status,l||(l=a.all([f,c]).then(function(){var e,n,a,l,c,d,f,g,m,v,y;return e=u.locale,l=u.userIsAdmin,m=u.userNumSubmissions,f=u.userNumOrders,g=u.userNumPurchases,c=u.userNumApps,y=u.userUsesOfficialApp,d=u.userNumCollection,v=u.userNumWantlist,a=u.userID,n=h()&&!l,p=new i(o,r,{sampleRate:n?100:0}),t||(t=s()),p.setDimensions([e,t]),u.loggedIn&&(p.set("&uid",a),p.setMetrics([m,f,g,c,y,d,v])),p}))},s=function(){return u["subform/view:mode"]},g=function(e,t,n,i){return d().then(function(o){return o.trackEvent(e,t,n,i)})},w=function(){var e,t;return e=s(),t=document.title.split(":")[0],d().then(function(n){return n.trackPageView(e,t)})},y=function(){return this.setState({startTime:(new Date).getTime()})},v=function(){var e,t,n;return t=k.getDuration(new Date(this.state.startTime)),e=this.props.dataPath.split("/"),n=e.filter(function(e){return!isFinite(e)}).join("-"),g("input focus time","focused",n,t)},b=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?C.call(arguments,1):[],e.unshift("sections/subform/analytics."+t),n=ds.require("onNextVisit"),n.apply(null,e)},m=function(e,t){return d({status:e}).then(function(e){return e.trackEvent("input","abandoned",t,k.getDuration())})},_=function(e){var t;return t=s(),b("trackAbandonment",t,e)},e.exports={init:d,track:g,trackUnload:_,trackAbandonment:m,trackPageView:w,trackFocusStart:y,trackFocus:v}},function(e,t,n){var i,o;o=n(291),i=function(){function e(e,t,n){this.id=e,this.name=t,this.options=n,ga("create",this.id,"auto",this.name,this.options),ga(this.name+".require","displayfeatures")}return e.prototype.set=function(e,t){return ga(this.name+".set",e,t)},e.prototype.setDimensions=function(e){return null==e&&(e=[]),e.forEach(function(e){return function(t,n){return e.set("dimension"+(n+1),t)}}(this))},e.prototype.setMetrics=function(e){return null==e&&(e=[]),e.forEach(function(e){return function(t,n){return e.set("metric"+(n+1),t)}}(this))},e.prototype.trackPageView=function(e,t){return o.sendPageView(this.name+".send",e,t)},e.prototype.trackEvent=function(e,t,n,i,r){return null==r&&(r=!1),o.sendEvent(this.name+".send",e,t,n,i,r)},e}(),e.exports=i},function(e,t,n){var i,o,r,a,s;i=n(2),o=n(11),r=n(6),s=n(4),a=n(10).getText,n(300),n(301),n(27),ds.define("consent",function(e){var t,n,l,c,u,d,f,h,p,g;return n=e("alertMessage"),t=e("cookie"),g=e("ready"),h=r.isEU,f=r.isDiscogsApp,u="cookie-consent-v1",c={},l=new o(function(e,t){return c.resolve=e,c.reject=t}),p=function(){var e,o,r,l;return l='<a href="'+s.getUrl("/help/doc/cookie-policy")+'">',o="</a>",r=a("This site uses cookies to offer you a better browsing experience.\nFind out more about our %(startTag)scookie policy%(endTag)s.\nWe also use third-party cookies to gather anonymous usage\nstatistics with your consent.")({startTag:l,endTag:o}),e=n({position:"bottom",closable:!0,id:"cookie-consent",message:r,type:"info"}),i("#cookie-consent .alert-message-close-icon").click(function(){return t(u,!0),e.remove(),c.resolve(!0)})},d=function(){var e;return e=t(u),"undefined"==typeof e?(t(u,!1),p()):"false"===e?(p(),c.resolve(!0)):c.resolve(!0)},h&&!f?g().then(d):c.resolve(),l})},,,,function(e,t,n){var i,o,r,a,s;s=n(28),r=s.loadReactChunk,a=s.loadReactComponents,o=n(7),i=null,ds.define("reactDialogs",function(e){var t,n,s,l,c,u,d,f,h,p,g,m,v;return m=e("_","loadCSS","ready"),n=m._,u=m.loadCSS,g=m.ready,d=e("logError"),t=p=null,l=["components/react-modal.css"],f=function(e){return new Promise(function(n){var r,a;return r=i.createClass({displayName:"Dialog",propTypes:{content:i.PropTypes.string,component:i.PropTypes.element,className:i.PropTypes.string,title:i.PropTypes.string,buttons:i.PropTypes.array,width:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.string]),height:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.string]),maxHeight:i.PropTypes.oneOfType([i.PropTypes.number,i.PropTypes.string])},render:function(){var e;return e={id:this.props.id||"",className:this.props.dialogClass||"",title:this.props.title,buttons:this.props.buttons,width:this.props.width,height:this.props.height,maxHeight:this.props.maxHeight},i.createElement(t,Object.assign({},e),this.props.content&&i.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}),this.props.component&&this.props.component)}}),a=i.createElement(r,Object.assign({},e)),e.open&&o.once(p.SHOW,e.open),e.close&&o.once(p.REMOVE,e.close),o.trigger(p.SHOW,{modal:a}),n(a)})},v=function(){return new Promise(function(i){return t=e("reactModals").Modal,p=e("modalEvents"),g(function(){return n.defer(i)})})},s=void 0,c=function(){return s||(s=function(){return u(l),r().then(function(e){return i=e.React,a().then(v)})}())},h=function(e){return c().then(function(){return f(e)}).catch(d)},{makeReactDialog:h}})},,,function(e,t,n){var i;i=n(292),ds.define("appNexus",function(e){var t,n,o,r,a;return t=e("$"),o=e("consent"),n=e("Promise"),r=n.all([i,o]),r.then(function(){var e;return e=t("<img src='https://b1img.com/78ab893f886b4d93b0a19595ae311122/uni_tag'>"),e.appendTo(document.body)}),a=function(e,n){return r.then(function(){var i;return i=t("<img src='https://b1img.com/78ab893f886b4d93b0a19595ae311122/con_tag?order_id="+e+"&value="+n+"'>"),i.appendTo(document.body)})},{trackConversion:a}})},,function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p;i=n(2),r=n(3),p=void 0,d=function(){return p=s({top:0,left:0,bottom:Math.max(document.documentElement.clientHeight,window.innerHeight,0),right:Math.max(document.documentElement.clientWidth,window.innerWidth,0)},200)},s=function(e,t){return{top:e.top-t,left:e.left-t,bottom:e.bottom+t,right:e.right+t}},l=function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top},a=function(e){return l(e.getBoundingClientRect(),p)},c=function(e){var t;if(e&&(t=i(e).data("src"),e.src!==t&&a(e)))return e.src=t},u=function(e){var t,n,i,o,r;for(null==e&&(e=document.body),i=e.querySelectorAll(".thumbnail-lazyload img"),r=[],t=0,o=i.length;t<o;t++)n=i[t],r.push(c(n));return r},h=function(){u()},d(),u(),f=1e3/15,o=i(window),o.on("resize orientationchange",r.throttle(d,f)),o.on("scroll resize pjax:end",r.throttle(h,f)),e.exports=u},,function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p,g,m,v;s=n(3),l=n(7),n(27),n(312),d=ds.require("ready"),p=ds.require("storage"),a="dsWatcherData",v=p.get(a)||[],r={START:"watcher:start",UPDATE:"watcher:update",REMOVE:"watcher:remove"},i={start:function(e){return l.trigger(r.START,e)},update:function(e){return l.trigger(r.UPDATE,e)},remove:function(e){return l.trigger(r.REMOVE,e)}},o=[],g=function(e){return v.push(e),p.set(a,v)},u=function(e){var t;return t=function(){switch(e.component){case"tutorial":return new Promise(function(e){return n.e(13,function(t){return e(n(333))})});default:return Promise.reject("No watched component of the name '"+e.component+"' is registered.")}}(),t.then(function(t){return o.push(e.component),t.init(e.data)})},h=function(e){if(e.triggerWhenPathMatches||(e.triggerWhenPathMatches=window.location.pathname),s.findWhere(v,{component:e.component})?m(e):g(e),o.indexOf(e.component)===-1)return u(e)},m=function(e){return v=s.reject(v,function(t){return t.component===e.component}),g(e)},f=function(e){return v=s.reject(v,function(t){return t.component===e}),o=s.pluck(v,"component"),p.set(a,v)},c=function(){return s.map(v,function(e){if(window.location.pathname.indexOf(e.triggerWhenPathMatches)>-1)return u(e)}),l.on(r.START,h),l.on(r.UPDATE,m),l.on(r.REMOVE,f)},d(c),e.exports=i},,function(e,t,n){var i,o,r,a;r=n(6),a=r.sha,i=r.assetBasePath,o=r.assetsHost,ds.define("loadCSS",function(e){var t,n,r,s,l;return n=e("Promise"),t=e("$"),l={},r=6e4,s=function(e){var i;return i=""+s.path()+e+"?"+a,l[i]||(l[i]=new n(function(e,n){var o,a;return a=function(){return e(o)},o=document.createElement("link"),o.type="text/css",o.rel="stylesheet",o.href=i,t(o).one("load",a),t("head").append(o),setTimeout(n,r),setTimeout(function(){var e,n;return e=t(document.createElement("img")),n=function(){return e.off("load error"),a()},e.one("load error",n),e.attr("src",i)},0)}))},s.path=function(){return""+o+i+"stylesheets/"},s})},function(e,t,n){var i,o;i=n(291),n(12),o={},ds.define("experiment",function(e){var t,n,r,a;return r=e("logError"),a={variations:o},t={},n=function(e){return e instanceof Error&&r(e),0},a.includeScript=function(e){return t[e]||(t[e]=new Promise(function(t,n){var i,r;return r="https://www.google-analytics.com/cx/api.js?experiment="+e,i=document.createElement("script"),i.src=r,i.onload=function(){return o[e]=cxApi.chooseVariation(),t(r)},i.onerror=n,setTimeout(n,3e3),i.setAttribute("async","async"),document.head.appendChild(i)}))},a.getVariation=function(e){return a.includeScript(e).then(function(){var t;return t=o[e],i.track("experiment",e+":viewed",t,void 0,!0),t},n).catch(n)},a})},,,,,,,function(e,t,n){var i;i=n(10).getText,ds.define("graphs",function(e){var t,n,o,r,a,s,l,c,u,d,f,h,p,g,m,v,y,b;return m=e("$","ready","_","load","Promise"),t=m.$,g=m.ready,o=m._,h=m.load,n=m.Promise,p={},l={},f=[],c=0,p.init=function(){var e,n;e=t(".discogs-chart"),n=h(["bower/chartist/dist/chartist","bower/matchmedia/matchMedia"]),n.then(function(){return e.not(".discogs-chart-initialized").each(v)})},v=function(){var e,o,s,l,c,u;return e=t(this),s=e.data(),c="#"+e.attr("id"),e.addClass("discogs-chart-initialized"),o=n.resolve(s.url?t.get(s.url):y()).then(function(e){var t,o,r;return t=(null!=(o=e.points)?o.length:void 0)>1||(null!=(r=e.points)?r[0].length:void 0)>0,t?e:n.reject(i("No data points to graph")())}),l=function(e){return a(e,c,s),r(c,s)},u=function(e){return t(c).html(e)},o.then(l,u)},d=function(e,t){var n,i;return"Line"===e.type?(b(t,e),n=-1,i={low:0,areaBase:0,lineSmooth:!1,height:e.height,axisY:{onlyInteger:!0},axisX:{labelInterpolationFnc:function(e){if(n++,n%c===0)return e}}}):"Bar"===e.type?i={centerBars:!1,height:e.height}:"Pie"===e.type&&(i={fullWidth:!0,height:e.height,labelInterpolationFnc:function(e){return e}}),i},y=function(){var e,n,i,r,a,s;return l={},i=null!=(r=t("#points").html())?r.split("|"):void 0,i=o.map(i,function(e){return e.replace(",","")}),e=null!=(a=t("#attributes").html())?a.split("|"):void 0,n=null!=(s=t("#labels").html())?s.split("|"):void 0,i&&(l.labels=n,l.points=[i],l.attributes=e),l},b=function(e,t){var n,i;return i=e.labels.length,n=t.maxLabels<i?t.maxLabels:0,c=n?(i/n).toFixed():1},a=function(e,n,i){var o,r;if(l={labels:e.labels,series:e.points,attributes:e.attributes},r=d(i,l),o=new Chartist[i.type](n,l,r),f.push(o),"Line"===i.type||"Bar"===i.type)return s(n,i.type),o.on("draw",function(e){var n,o,r;if(("point"===e.type||"bar"===e.type)&&(n=t(e.element._node),l.attributes&&(o=l.series,r=o[0].length>1?o[0][e.index]:o[e.index],n.attr("ct:value-nf",r),n.attr("ct:name",l.attributes[e.index]),i.tooltipLabel&&n.attr("ct:value-label",i.tooltipLabel),i.showLabel)))return n.attr("ct:label",l.labels[e.index])})},s=function(e,n){var i,o;return i=t(e),o=i.append('<div class="chart-tooltip"></div>').find(".chart-tooltip").hide(),i.on("mouseenter",".ct-point, .ct-bar",function(){var e,i,r,a,s,l;return e=t(this),s=e.attr("ct:value-nf"),l=e.attr("ct:value-label")?" "+e.attr("ct:value-label"):"",a=e.attr("ct:name")?"<span class='tooltip-name'>"+e.attr("ct:name")+"</span>":"",r=e.attr("ct:label")?"<span class='tooltip-label'>"+e.attr("ct:label")+"</span>":"","Line"===n&&e.animate({"stroke-width":"20px"},300,u),i=s+l+r+a,o.html(i).show()}),i.on("mouseleave",".ct-point, .ct-bar",function(){var e;return e=t(this),"Line"===n&&e.animate({"stroke-width":"12px"},300,u),o.hide()}),i.on("mousemove",function(e){return o.css({left:(e.offsetX||e.originalEvent.layerX)-o.width()/2-10,top:(e.offsetY||e.originalEvent.layerY)-o.height()-40})})},r=function(e,n){return t(e+"-dropdown").on("change",function(){var i,o,r;return o=t(this).val(),r=n.url+"?"+o,i=t(e),f.map(function(e){if(e.container===i[0])return t.get(r,function(t){return n=i.data(),l={labels:t.labels,series:t.points,attributes:t.attributes},b(l,n),e.update(l)})})})},u=function(e,t,n,i,o){return-i*(t/=o)*(t-2)+n},g(p.init),p})},,,,,,,,,,,,,,,,,,,,,,,function(e,t){ds.define("images",function(e){var t,n,i,o,r;return t=e("$"),r=e("ready"),o={},n={size:"small",orientation:"portrait"},o.make$thumbnail=function(e,o,r,a){var s,l;return s=t(document.createElement(o?"a":"div")),r=r||n.size,a=a||n.orientation,l=["thumbnail_link","thumbnail_size_"+r,"thumbnail_orientation_"+a],o&&s.attr("href",o),s.addClass(l.join(" ")).html("<span class='thumbnail_border'></span><span class='thumbnail_center'><img src='"+e+"' /></span></span>").find("img").on("load.set_orientation",i(s)),s},i=function(e){return function(){var n,i;n=t(this),i=n.width()>n.height(),e.toggleClass("thumbnail_orientation_portrait",!i).toggleClass("thumbnail_orientation_landscape",i),n.off("load.set_orientation")}},o.fixOrientation=function(e){var n;return n=e&&e.length?e.find(".thumbnail_orientation_auto"):t(".thumbnail_orientation_auto"),n.each(function(){return t(this).find("img").on("load.set_orientation",i(t(this)))})},o.init=function(){return o.fixOrientation()},r(function(){return o.init()}),o})},function(e,t,n){var i,o,r=function(e,t){return function(){return e.apply(t,arguments)}};o=n(7),i=n(291),ds.define("imageGallery",function(e){var t,n,a,s,l,c,u,d,f,h;return h=e("$","_","ready","layout","key"),t=h.$,s=h._,f=h.ready,u=h.layout,c=h.key,a=e("LoadQueue"),l=!1,d={},n=function(){function e(e){this.update=r(this.update,this),this.$gallery=e,this.imagesData=this.$gallery.data("images"),this.$gallery.length&&this.imagesData&&this.imagesData.length&&this.setup()}return e.prototype.setup=function(){var e;return e=location.hash.replace("#","").split("/"),e&&"images"===e[0]&&(e[1]&&s.where(this.imagesData,{id:e[1]}).length?l?this.scrollToSlide(e[1]):this.goToSlide(e[1]):this.open()),this.$gallery.data("updateImageData",this.update),this.$gallery.on("click",s.bind(this.clickGallery,this))},e.prototype.open=function(){return this.$modal||this.create(),i.track("imageGallery","open"),t("body").addClass("image_gallery_open"),this.$modal.show(),o.trigger("imageGallery:open"),c("right, left","imageGallery",s.bind(this.keyNav,this)),c("esc","imageGallery",s.bind(this.close,this)),c.setScope("imageGallery")},e.prototype.close=function(e){var n,r;if(r="img, .image_gallery_thumb, .image_gallery_nav, .images_edit, .image_zoom, .image_copy_permalink, .image_copy_permalink_text",!(null==this.$modal||e&&t(e.target).closest(r).length&&!l||t(e.target).closest("a").hasClass("images_edit")))return i.track("imageGallery","close"),n=function(){return t("body").removeClass("image_gallery_open")},setTimeout(n,50),this.$modal.hide(),o.trigger("imageGallery:close"),c.unbind("right","imageGallery"),c.unbind("left","imageGallery"),c.unbind("esc","imageGallery"),c.setScope("all"),e.preventDefault()},e.prototype.makeModal=function(){return this.$modal=t(s.template(t("#image_gallery_modal_tpl").html())({images:this.imagesData,editUrl:this.$gallery.data("edit-url")})),this.$modal.appendTo("body"),this.$modal.onFastClick(s.bind(this.close,this))},e.prototype.create=function(){return this.makeModal(),l?t(window).on("breakpoints>mobile",this.setupSlideshow):this.setupSlideshow()},e.prototype.update=function(e){var t;if(this.imagesData=e,null!=(t=this.$modal)?t.length:void 0)return this.$modal.remove(),this.$modal=null},e.prototype.setupSlideshow=function(){var e;return this.$slideWrapper=this.$modal.find(".image_gallery_slide_wrapper"),this.$galleryNav=this.$modal.find(".image_gallery_nav"),this.loadQueue=new a(this.$modal.find(".image_gallery_slide img").toArray()),this.loadQueue.loadNext(2),e=this.$modal.find(".image_gallery_thumb"),e.on("click",s.bind(this.clickThumb,this)),e.first().trigger("click"),this.$modal.find(".image_gallery_nav").on("click",s.bind(this.clickNav,this)),this.$modal.on("click",".image_gallery_slide img",s.bind(this.zoomImg,this)).on("click",".image_zoom",s.bind(this.zoomImg,this)).on("click",".image_copy_permalink",s.bind(this.clickPermalink,this)).on("click",".image_copy_permalink_text",s.bind(this.updatePermalink,this)),o.on(this.loadQueue.events.loaded,s.bind(this.imageDoneLoading,this)),o.on(this.loadQueue.events.failed,s.bind(this.imageFailedLoading,this)),o.on(this.loadQueue.events.allLoaded,function(e){return function(){return o.off(e.loadQueue.events.loaded,null,e),o.off(e.loadQueue.events.failed,null,e),o.off(e.loadQueue.events.allLoaded,null,e)}}(this))},e.prototype.goToSlide=function(e){var n,i,o,r,a,s;return null!=this.$modal&&this.$modal.is(":visible")||this.open(),n=this.$modal.find(".image_gallery_slide[data-id='"+e+"']"),this.$slideWrapper.css({left:100*-n.index()+"%"}),i=this.$modal.find(".image_gallery_thumb[data-id='"+e+"']"),a=i.position().left,s=156,i.addClass("current"),i.siblings(".current").removeClass("current"),(a>t(window).width()-s||a<0)&&i.parent().animate({scrollLeft:i.index()*s},250),this.$galleryNav.show(),o=null,i.is(":first-child")?o=1===this.imagesData.length?".image_gallery_prev, .image_gallery_next":".image_gallery_prev":i.is(":last-child")&&(o=".image_gallery_next"),o&&this.$galleryNav.filter(o).hide(),this.loadQueue.loadAtIndex(n.index()),this.loadQueue.loadAtIndex(null!=(r=n.next())?r.index():void 0)},e.prototype.scrollToSlide=function(e){return null!=this.$modal&&this.$modal.is(":visible")||this.open(),s.delay(function(t){return function(){return t.$modal.animate({scrollTop:t.$modal.find(".image_gallery_slide[data-id='"+e+"']").offset().top-14},200)}}(this),20)},e.prototype.imageDoneLoading=function(e){var n,i;return n=t(e),i=n.attr("data-src"),n.attr("src",i).removeAttr("style").addClass("loaded").removeClass("preview")},e.prototype.imageFailedLoading=function(){},e.prototype.clickGallery=function(e){return e.preventDefault(),this.open()},e.prototype.clickThumb=function(e){var n;return e.preventDefault(),n=t(e.target).closest(".image_gallery_thumb"),this.goToSlide(n.data("id"))},e.prototype.clickNav=function(e){var n;return e.preventDefault(),n=t(e.target).closest(".image_gallery_nav"),this.doNav(n.hasClass("image_gallery_next")?"next":"prev")},e.prototype.keyNav=function(){return this.doNav(c.isPressed("right")?"next":"prev")},e.prototype.doNav=function(e){var t;return t=this.$modal.find(".image_gallery_thumb.current")[e](),t.length||(t=this.$modal.find(".image_gallery_thumb")["next"===e?"first":"last"]()),t.trigger("click")},e.prototype.zoomImg=function(e){return e.preventDefault(),this.$modal.toggleClass("image_zoomed"),i.track("imageGallery","zoomImg")},
e.prototype.getPermalink=function(){return""+location.origin+(this.$gallery.data("permalink-url")||location.pathname)+"#images/"+this.$modal.find(".image_gallery_thumb.current").data("id")},e.prototype.clickPermalink=function(e){var n,o;return e.preventDefault(),o=this.getPermalink(),n=t(e.target).closest(".image_copy_permalink"),n.hide(),n.next(".image_copy_permalink_text").show().val(o).trigger("select"),i.track("imageGallery","clickPermalink")},e.prototype.updatePermalink=function(e){var n;return e.preventDefault(),n=this.getPermalink(),t(e.target).closest(".image_copy_permalink_text").val(n).trigger("select")},e.prototype.removeGallery=function(){if(this.$modal)return this.$modal.remove()},e}(),d.initGallery=function(e){var i;return i=t(e),new n(i)},d.init=function(){return l="mobile"===u.mode(),s.each(t(".image_gallery"),d.initGallery)},f(d.init),d})},,,,,,,,,,,function(e,t){ds.define("priceSuggester",function(e){var t,n;return t=e("_"),n={},n.create=function(e,n,i,o){var r,a,s;r=function(){var e;return e=i.val(),t.has(o,e)?o[e].toFixed(2):""},a=function(){var t,n;n=r(),t=e.find(".value"),e.toggle(!!n.length),t.html(n)},s=function(e){n.val(r()),e.preventDefault()},i.on("change",a),e.on("click",s)},n})},function(e,t,n){var i,o,r,a,s;r=n(7),o=n(6).endpoint,a=n(10).getText,i=n(291),s=n(197),ds.define("mediaConditionDescription",function(e){var t,n,l,c,u,d,f;return t=e("$"),f=e("ready"),n=e("_"),d={},d.init=function(){return c(),r.on(s.PAGE_LOADING_FINISHED,c),t(document).on("pjax:end",c)},u={Vinyl:{"Mint (M)":a("Absolutely perfect in every way. Certainly never been played. Should be used sparingly as a grade."),"Near Mint (NM or M-)":a("A nearly perfect record. The record should show no obvious signs of wear."),"Very Good Plus (VG+)":a("Will show some signs that it was played and otherwise handled by a previous owner who took good care of it."),"Very Good (VG)":a("Noticeable groove wear and light scratches. Surface noise will not overpower the music."),"Good (G)":a("Can play without skipping. Significant scratches, surface noise, and groove wear."),"Good Plus (G+)":a("Can play without skipping. Significant scratches, surface noise, and groove wear."),"Poor (P)":a("Record is cracked, badly warped, or won't play through without skipping or repeating."),"Fair (F)":a("Record is cracked, badly warped, or won't play through without skipping or repeating.")},CD:{"Mint (M)":a("The disc is in perfect condition. No scuffs or scratches, possibly still sealed."),"Near Mint (NM or M-)":a("A nearly perfect disc. It should show no obvious signs of wear."),"Very Good Plus (VG+)":a("Will show some signs that it was played and otherwise handled by a previous owner who took good care of it."),"Very Good (VG)":a("Noticeable light scuffs or scratches. Will play through without problems."),"Good (G)":a("Significant scuffs or scratches. Will play through without problems."),"Good Plus (G+)":a("Significant scuffs or scratches. Will play through without problems."),"Poor (P)":a("The disc may or may not play some or all of the tracks."),"Fair (F)":a("The disc may or may not play some or all of the tracks.")}},f(d.init),c=function(){return n.each(t(".media-condition-tooltip"),l)},l=function(e){var n,r,a,s,l;return n=t(e),r=n.data("condition"),a=n.data("format"),s=d.getMediaDescription(a,r),l='<div class="tooltip multi-line-tooltip" role="tooltip"> <div class="tooltip-arrow"></div> <div class="tooltip-inner"></div> </div>',n.data("bs.tooltip")||n.tooltip({title:s,template:l,delay:250}),n.one("shown.bs.tooltip",function(){return i.track("Marketplace","Viewed media condition tooltip",o)})},d.allowedFormats={Vinyl:"Vinyl",CD:"CD",DVD:"CD",CDr:"CD"},d.getMediaDescription=function(e,t){var n,i;return i=d.allowedFormats[e]||"Vinyl",n="0"!==t?u[i][t]():""},d})},,,,,,function(e,t,n){var i,o,r,a,s,l;i=n(2),r=n(3),o=n(11),l=n(4),a=n(7),s=n(197),n(189),ds.define("vimShortcuts",function(e){var t,n,c,u,d,f,h,p,g,m,v,y,b,w,_,k,C,x,T,S;return b=e("key"),y=-1,d=!1,w=!1,g=function(e){var t;return t=i(".shortcut_navigable:visible"),r.isUndefined(e)?t:e>-1?t.eq(e):i([])},k=function(e){return new o(function(t){var n,o,r;if(r=1===e?".pagination_next":".pagination_previous",n=i(r).eq(0),n.length&&!n.attr("disabled")&&!n.data("disable-autopage"))return w=!0,o=function(){w=!1,t()},a.once(s.PAGE_LOADING_FINISHED,o),n.get(0).click()})},v="shortcut_highlight",m=function(e){var t,n,o;y+=e,n=g(),y=Math.max(y,-1),y=Math.min(y,n.length),t=n.eq(y),l.raf(function(){return i("."+v).removeClass(v)}),o=e===-1&&-1===y,!o&&t.length?(l.raf(function(){return t.addClass(v).focus()}),l.centerOn(t)):k(e).then(function(){return 1===e?x():x(g().length),m(e)})},n=function(e){return e.click()},t=function(e){return e.get(0).click()},h=function(e,t){var n,i,o;return n=null!=(o=t.match(/\[data-(.+)\]/))?o[1]:void 0,i=e.data(n),i&&i!==!0&&(e=e.find(i)),e.eq(0)},c=function(e,t){var n;n=g(y).find(e),n=h(n,e),n.length&&t(n)},S=function(){return c("[data-checkable]",n)},p=function(){return c("[data-followable]",t)},C=function(e){var t,n;return null==e&&(e=!1),t=i("body"),n=!!e&&i(window).width()<t.width(),!d&&!n&&!t.hasClass("image_gallery_open")},_=function(e){var t,n;if(n="next"===e?".pagination_next":".pagination_previous",t=i(n).eq(0),t.length&&!t.attr("disabled"))return t.get(0).click()},x=function(e){return y="number"==typeof e?e:-1},T=function(){if(!w)return x()},f=function(){d=!1},u=function(){d=!0},a.on(s.PAGE_LOADING,u),a.on(s.PAGE_LOADING_FINISHED,T),a.on(s.PAGE_LOADING_FINISHED,f),b("j",function(){if(!d)return m(1)}),b("k",function(){if(!d)return m(-1)}),b("x",function(){if(!d)return S()}),b("o, enter",function(){if(!d)return p()}),b("left, h",function(){if(C(b.isPressed("left")))return _("prev")}),b("right, l",function(){if(C(b.isPressed("right")))return _("next")}),{enable:f,disable:u}})},,,,,,,,,,,,,function(e,t){ds.define("inputCounter",function(e){var t,n,i,o,r;return r=e("$","_","ready"),t=r.$,n=r._,o=r.ready,i={init:function(){var e;return e=t(".countable"),n.each(e,this.initInput,this)},initInput:function(e,i){var o,r;return r=t(e),!r.data("input-counter")&&(o=this.addCounterSpan(r,i),r.data("inputCounter",!0),r.on("keyup keydown",n.bind(this.renderCounter,this,r,o)),void this.renderCounter(r,o))},addCounterSpan:function(e,n){var i,o;return o="input_counter_"+(e.attr("id")||n),i=t('<span id="'+o+'" class="input_counter" style="margin: 5px 5px;" />'),e.after(i),i},getCounterText:function(e){var t,n;return t=e.attr("maxlength"),n=t?"/"+t:"",e.val().length+n},renderCounter:function(e,t){t.text(this.getCounterText(e))}},o(function(){return i.init()}),i})},,,,,,,,,,function(e,t,n){var i,o,r,a,s,l,c,u,d;a=n(6),i=n(2),o=n(3),d=n(4),u=n(10),l=u.getText,c=u.ngetText,s=n(7),r=n(291),n(302),n(27),ds.define("rating",function(e){var t,n,u;return t=e("layout"),u=e("ready"),n={init:function(){return this.DEFAULTS={min:1,max:5,resettable:!0,readOnly:!1,preset:0},this.rangeClass="rating_range",this.iconsClass="rating_icons",this.resetHtml="<i class='reset icon icon-times' tabindex='0' aria-label='"+l("Remove rating")()+"' data-value='0'></i>",i(".rating").each(o.bind(this.initRating,this))},initRating:function(e,t){var n;t=i(t),t.data("initialized")||(n=this.getOptions(t),t.data("options",n),t.data("initialized",!0),this.addIcons(t,n.max,n.resettable),n.readOnly||this.bindEvents(t,n),this.setValue(t,n.value,!0))},getOptions:function(e){return o.extend(o.clone(this.DEFAULTS),e.data())},addIcons:function(e,t,n){var i,r,a;e.append("<span class='"+this.iconsClass+"'></span>"),i=e.find("."+this.iconsClass),i.append("<span class='"+this.rangeClass+"'></span>"),r=function(e){return e=o.escape(e),"tabindex='0' aria-label='"+c("Rate this release %(n)s star.","Rate this release %(n)s stars.")(e,{n:e})+"'"},a=function(e){var t;t=e+1,this.append("<a class='star star"+t+" icon icon-star-o' "+(n?r(t):void 0)+" data-value='"+t+"'></a>"),this.append("<a class='star star"+t+" icon icon-star'  "+(n?r(t):void 0)+" data-value='"+t+"'></a>")},o.times(t,a,i.find("."+this.rangeClass)),n&&i.append(this.resetHtml)},setValue:function(e,t,n){t?e.data("value",t):(e.removeAttr("data-value"),e.removeData("value")),n&&this.fillValue(e),this.toggleReset(e)},toggleReset:function(e){var t;t=!e.data("value"),e.toggleClass("not_rated",t)},fill:function(e,t){var n,i,r;t=o.string.toNumber(t,2),"number"==typeof t&&(r=Math.round(t),n=e.find("."+this.rangeClass),i=o.times(e.data("options").max+1,function(e){return"fill"+e.toString()}).join(" "),n.removeClass(i),n.addClass("fill"+r.toString()))},fillValue:function(e){var t;t=e.data("value")||e.data("options").preset||"0",this.fill(e,t),this.updateAriaLabel(e,t)},updateAriaLabel:function(e,t){var n,i;return i=e.data().readOnly,t=o.escape(t),n=t>0||i?c("This release is rated %(value)s star","This release is rated %(value)s stars")(t,{value:t}):l("Rate this release")(),e.attr("aria-label",n)},fillHover:function(e,n){var o,r;"desktop"===t.mode()&&(o=i(n.target),r=o.data("value"),this.fill(e,r))},keyRating:function(e,t){var n,i;if(i=32,n=13,t.keyCode===i||t.keyCode===n)return this.selectRating(e,t),e.focus(),t.preventDefault()},selectRating:function(e,t){var n,l,c,u;d.requireLogin()&&(n=i(t.target),u=n.data("value"),l=e.data("value"),this.setValue(e,u,!0),c=e.data("options").postUrl,c&&i.post(c,{value:u}).done(o.bind(this.updateStats,this,e)).done(function(){r.track("release","rated",a.endpoint,u),s.trigger("release:rated",{endpoint:a.endpoint,value:u})}).fail(o.bind(this.setValue,this,e,l,!0)))},updateStats:function(e,t){t&&t.value&&t.count&&e.find(".rating_stats")&&(i(".rating_value").html(t.value),i(".rating_count").html(t.count))},bindEvents:function(e){var t,n,i;i=e.find(".star"),t=e.find("."+this.rangeClass),n=e.find(".reset"),i&&i.on("mousemove",o.bind(this.fillHover,this,e)),t.onFastClick(o.bind(this.selectRating,this,e)).on("keydown",o.bind(this.keyRating,this,e)).on("mouseleave",o.bind(this.fillValue,this,e)),n&&n.onFastClick(o.bind(this.selectRating,this,e)).on("keydown",o.bind(this.keyRating,this,e))}},u(function(){return n.init()}),n})},,,,,,,,,,,,,,,,,,,,function(e,t){!function(){return window.ds="function"==typeof window.ds?window.ds:function(){return(ds.q=ds.q||[]).push(arguments),ds}}()},function(e,t,n){var i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},o=[].slice;ds.define=function(){var e,t,n,r,a,s,l,c,u,d,f;e=window.webpackRequire("_");try{delete window._}catch(e){window._=void 0}return l={ds:ds},n=e.clone(l),s=[],f=[],u=[],r=function(t,o){var r,a;if("string"==typeof t){if(e.include(u,t))throw new Error("require error: Circular import detected in module "+t+": "+u.join(" > ")+" > "+t);return u.push(t),r=window.webpackRequire(t),e.has(l,t)||r?a=null!=n[t]?n[t]:n[t]=r||l[t](c):s.push(t),void 0===a&&i.call(s,t)<0&&f.push(t),o&&(o[t]=a),u.splice(u.length-1,1),a}throw new Error("require error: "+e.toString(t)+" is not a String")},c=function(){var e,t,n,i,l;if(i=1<=arguments.length?o.call(arguments,0):[],1===i.length)l=r(i[0]);else for(l={},e=0,t=i.length;e<t;e++)n=i[e],r(n,l);return s.length>0&&a(),f.length>0&&d(),l},a=function(){var e;return e=s.join(", "),"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("require error: Missing modules "+e),s=[]},d=function(){var e;return e=f.join(", "),"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("require warning: Modules have no return value "+e),f=[]},ds.require=function(){return c.apply(null,arguments)},t=function(e,t){if(l[e])throw new Error("A module named "+e+" is already defined.");return l[e]=function(){return t.call(window,c)}}}()},function(e,t,n){var i,o,r,a,s;i=n(2),r=n(3),o=n(11),s=n(4),a=n(291),n(299),n(9),n(27),ds.define("addtolist",function(e){var t,n,l,c,u;return t=e("alerts"),n=e("content"),u=e("ready"),l=s.getUrl,c={},c.init=function(){return this.$modal=!1,i("body").on("click",".add_to_list",c.listAddHandler).on("click",".remove_from_list",c.remove)},c.listAddHandler=function(e){var t;e.preventDefault(),t=i(this),s.requireLogin()&&s.requireActivation()&&c.add(t.data("list-add-url"),t.data("list-add-pos"))},c.toggleForm=function(){i(".listadd_new").toggle(i("#listpick_new").checked),i("#listadd_old").toggle(i("#listpick_old").checked)},c.add=function(e,t){var n,r;return r=function(){t&&a.track("list","opened modal",t)},!!e&&(c.modal||(c.modal=c.makeModal()),c.modal.then(function(e){e.dialog("close")}),n=i.get(l(e),{styleVersion:!0}),o.all([c.modal,n]).then(function(e){var t,n;t=e[0],n=e[1],c.insertAndShowModal(t,n),r()}),!0)},c.makeModal=function(){var e;return e=i("<div />").hide().appendTo("body").on("change","#listpick_old, #listpick_new",c.toggleForm).on("click",".lists_list_add_save",c.addSave).on("click",".lists_list_add_cancel",c.addCancel).on("click",".close_add_to_list",c.close),c.$modal=e,c.dialogConfig={width:i("html").hasClass("is_mobile")?i(window).width():440,title:n("Add to List")()},e.discogsDialog(c.dialogConfig).then(function(){return e})},c.insertAndShowModal=function(e,t){var n;n=i("#act"),n.hide(),e.html(t).show().dialog("open")},c.addSave=function(){var e,o,s,u,d,f,h;if(s=i("#list_comments").val(),h=i("#list_title").val(),u=i("#list_description").val(),d=i("#list_oldpick"),e={what:i("#list_what").val(),obid:i("#list_obid").val()},o=function(n){var o,a,s,l;n.success&&n.list_view_href&&n.my_lists_href&&n.close_button?(l=r.template(i("#list_success_message").html())(n),s=r.template(i("#list_new_list_tpl").html())(r.extend(e,n)),a=i("#lists"),o=a.find(".add_to_list"),c.$modal.html(l).show().dialog("open"),a.prepend(s),o.length&&o.appendTo(a.prev("h3"))):n.message&&t.alert(n.message)},s&&(s=i.trim(r.stripTags(s)),e.comments=s),i("#listpick_new").is(":checked")){if(!h)return void t.alert(n("Please enter a title.")());u&&(u=i.trim(r.stripTags(u)),e.description=u),e.list="new",e.title=h}else{if(f=d.val(),f===-1)return void t.alert(n("Please select an existing list.")());e.title=d.find("option:selected").html(),e.list=f}c.$modal.dialog("close"),i.ajax({type:"POST",url:l("/lists/addsave"),data:e,success:o}).then(function(){a.track("list","added",e.what)})},c.addCancel=function(){c.$modal.dialog("close")},c.remove=function(){var e,t,o;return t=function(){return i.ajax({type:"POST",url:l("/lists/update_item"),data:"list="+e.data("list-remove-id")+"&what="+o+"&obid="+e.data("list-remove-obid")+"&remove=1",success:e.remove()})},e=i(this).parent(),o=e.data("list-remove-what"),s.confirm(n("Are you sure you want to remove this item?")()).then(t).then(function(){a.track("list","removed",o)})},c.close=function(){var e,t;e=i(this),t=e.data("on-click"),"reload_page"===t?window.location.reload():"hide_list_panel"===t&&c.$modal.dialog("close")},u(function(){return c.init()}),c})},function(e,t,n){var i,o;o=n(4),i=n(291),ds.define("analyticsEventCodes",function(){var e,t,n,r,a,s,l,c;return e={sr:["Marketplace","Clicked marketplace tab in search results"],rb:["Marketplace","Release - X for sale, button"],ab:["Marketplace","Artist - X for sale, button"],lb:["Marketplace","Label - X for sale, button"],is:["Marketplace",'Clicked "Items For Sale" on release page (when none of this version are for sale)'],"item-vc":["Marketplace","View release details, from item page"],rr:["Marketplace","Clicked Recommended Release on Release Page"],drec:["Marketplace","Clicked Recommended Release in Dashboard Module"],idrec:["Marketplace","Clicked Recommended Release on Item Details"],crec:["Marketplace","Clicked Recommended Release on Cart"],bp_det:["Marketplace","Clicked details link on mp browse page"],atc_br:["Marketplace","Clicked Add to Cart on mp browse page"],atc_det:["Marketplace","Clicked Add to Cart on mp item details page"],mb:["Marketplace","clicked x for sale on MR page"],wh_new:["Marketplace","Clicked link in wantlist email - HTML format (Responsive)"],hxiiw:["Marketplace","Clicked Has X Items I Want"],rci:["Marketplace","Viewed product page from modified-cart items"],rce:["Marketplace","Viewed cart from removed item email"]},r=null!=(s=o.deparam())?s.ev:void 0,l=e[r]||["Unknown","event code: "+r],n=l[0],t=l[1],a=l[2],c=l[3],r&&i.track(n,t,a,c,!0),e})},function(e,t){ds.define("autosave",function(e){var t,n,i,o,r,a,s,l,c,u,d,f,h,p;return d=e("$","_","ready","storage"),t=d.$,n=d._,u=d.ready,h=d.storage,p="dsAutosaveData",c={data:h.get(p)||{}},s=[],c.init=function(){return c.$fields=t(".autosave"),o(),n.each(c.$fields,a),t(window).on("unload.dsAutosave",c.saveAll),t(".autosave-clear").on("click",r)},a=function(e){var n,i,o,r;if(n=t(e),i=n.data("autosave-key"),r=null!=(o=c.data[i])?o.value:void 0,s.push(i),null!=r?r.length:void 0)return n.val(r)},l=function(){if(h.enabled)return h.set(p,c.data)},c.saveAll=function(){return n.each(s,f),l()},f=function(e){var t,n;return t=c.$fields.filter("[data-autosave-key='"+e+"']"),n=t.val(),c.data[e]={timestamp:Date.now(),value:n}},c.clearAll=function(){return n.each(s,i),l()},i=function(e){return c.data=n.omit(c.data,e)},o=function(){var e,t;return t=864e5,e=Date.now(),c.data=n.omit(c.data,function(n){var i,o,r;return o=n.timestamp+t<e,i=!(null!=(r=n.value)?r.length:void 0),o||i}),l()},r=function(){return t(window).off("unload.dsAutosave"),c.clearAll()},u(c.init),c})},function(e,t){ds.define("broadcastTable",function(e){var t,n,i,o;return o=e("$","ready"),t=o.$,i=o.ready,n=e("broadcast").clickRemove,i(function(){return t(document.body).on("click",".broadcast_table .broadcast_remove",n)})})},function(e,t,n){var i,o,r,a,s,l,c,u;i=n(2),o=n(3),a=n(6),c=n(4),l=n(311),u=l.wantlist,r=l.collection,s=n(10).getText,n(299),n(27),ds.define("broadcast",function(e){var t,n,l,d,f,h,p,g;return l=e("alerts"),n=e("alertMessage"),h=e("ready"),d=c.getUrl,t={SHARE:"broadcast_actions_share",SHARING:"broadcast_actions_sharing",UNSHARING:"broadcast_actions_unsharing",SHARED:"broadcast_actions_shared"},f={},f.init=function(){return u.on("sync",this.render,this),r.on("sync",this.render,this),f},g=function(e){return l.alert(c.errorMessageFromXHR(e)),e},p=function(e,n){return function(i){return o.each(t,function(t){e.removeClass(t)}),e.addClass(n),i}},f.render=function(e,t){var i;t.broadcast&&(i=f.template(t.broadcast),n({message:i,type:"info",id:"cwBlockAdded",closable:!0}).$element.on("submit.broadcast",".broadcast_widget form",this.clickShare).on("click.broadcast",".broadcast_widget_undo",this.clickUndo).on("click.broadcast",".broadcast_remove",this.clickRemove))},f.clickShare=function(e){var n;n=i(this).find(".broadcast_actions"),p(n,t.SHARING)(),i.ajax({url:d("/broadcast/new"),type:"POST",data:i(this).serialize(),success:p(n,t.SHARED),error:p(n,t.SHARE)}).fail(g),e.preventDefault()},f.clickUndo=function(e){var n,o;n=i(this).parents("form"),o=n.find(".broadcast_actions"),p(o,t.UNSHARING)(),i.ajax({url:d("/broadcast/delete"),type:"POST",data:n.serialize(),success:p(o,t.SHARE),error:p(o,t.SHARE)}).fail(g),e.preventDefault()},f.clickRemove=function(e){var t,n;t=this,"remove"===i(this).data("action")?c.confirm(s("Are you sure you want to un-share this?")()).then(function(){f.remove.call(t)}):"unfollow"===i(this).data("action")&&(n="<strong>"+i(this).data("username")+"</strong>",c.confirm(s("Remove %(username)s from your friends list?")({username:n})).then(function(){f.unfollow.call(t)})),e.preventDefault()},f.remove=function(){var e,t,n,o;o=i(this).data("type"),t=i(this).data("object-id"),n=i(this).data("timestamp"),e=i(this).parents("tr"),i.ajax({url:d("/broadcast/delete"),type:"POST",data:{type:o,object_id:t,timestamp:n},success:function(){e.addClass("broadcast_removed")},error:g})},f.unfollow=function(){var e;e=i(this).data("uid"),i.ajax({url:d("/broadcast/unfollow"),type:"POST",data:{uid:e},success:function(){i(".broadcast_unfollowable.broadcast_from_u"+e).parents("tr").addClass("broadcast_removed")},error:g})},f.template=function(e){return e.templates={addedToYourCollection:s("Added %(title)s to your collection.")(e.preview),addedToYourWantlist:s("Added %(title)s to your wantlist.")(e.preview),share:s("Share")(),sharing:s("Sharing...")(),sharedOnYourProfile:s("Shared on your profile")(),undo:s("Undo")(),unsharing:s("Unsharing...")(),sharingSettings:s("Sharing Settings")()},e=o.extend(e,{userProfileUrl:d("/user/"+a.username),settingsPrivacyUrl:d("/settings/privacy")}),o.template('<div class="broadcast_widget" style="display: inline;"> <form method="post" style="display: inline;"> <input type="hidden" name="type" value="<%- type %>" /> <input type="hidden" name="object_id" value="<%- object_id %>" /> <input type="hidden" name="timestamp" value="<%- timestamp %>" /> <input type="hidden" name="signature" value="<%- signature %>" /> <% if (type === "add_collection") { %> <strong><%= templates.addedToYourCollection %></strong> <% } else if (type === "add_wantlist") { %> <strong><%= templates.addedToYourWantlist %></strong> <% } %> <span class="broadcast_actions broadcast_actions_share"> <button class="broadcast_actions_share button button_green button_small"><i class="icon icon-bullhorn"></i> <%= templates.share %></button> <span class="broadcast_actions_sharing"><button class="button button_small button_green" disabled="disabled"><i class="icon icon-spinner icon-spin"></i> <%= templates.sharing %></button></span> <span class="broadcast_actions_shared"><a class="button button_green button_small" href="<%- userProfileUrl %>"><%= templates.sharedOnYourProfile %></a> <a href="#" class="button button_small button_red broadcast_widget_undo"><i class="icon icon-rotate-left"></i> <%= templates.undo %></a></span> <span class="broadcast_actions_unsharing"><button class="button button_small button_green" disabled="disabled"><i class="icon icon-spinner icon-spin"></i> <%= templates.unsharing %></button></span> </span> <a class="button button_small needs_delegated_tooltip" href="<%- settingsPrivacyUrl %>" title="<%= templates.sharingSettings %>"><i class="icon icon-wrench"></i></a> </form> </div>')(e)},h(function(){return f.init()}),f})},function(e,t,n){var i,o,r;i=n(2),o=n(3),r=n(4),n(27),ds.define("confirm",function(e){var t,n,a,s;return s=e("ready"),t=function(e){var t,n;t=e.get(0),t.click?t.click():(n=e.attr("href")).length>1?window.location=n:e.click()},a=function(e){var n,a,s;return a=function(){n.data("confirmed",!0),o.delay(t,25,n)},n=i(e),s=n.data("confirm-message"),r.confirm(s).then(a)},n=function(){var e;return e=!!i(this).data("confirmed"),e||a(this),e},s(function(){return i("body").on("click",".confirm",n)})})},function(e,t,n){var i,o,r,a;i=n(2),r=n(6),a=n(4),o=n(291),ds.define("copyShortcut",function(){var e;return e=function(){var e;return e=function(){var e,t;e=i(".copy_shortcut_code",this).get(0),a.selectText.call(e),t=r.pageObject&&r.pageObject.objectType,t&&o.track(t,"Selected Discogs code")},i(".copy_shortcut").on("click",e)},i(e),{init:e}})},function(e,t,n){var i,o,r,a,s,l,c;l=n(6).interactiveAdmin,i=n(2),o=n(3),c=ds.require("ready"),s=["icon-spin","icon-green","icon-red","icon-discogs","icon-store","icon-italic","icon-bold","icon-quote-right","icon-list-ol","icon-header","icon-rotate-left","icon-level-up","icon-caret-up","icon-caret-left","icon-caret-right","icon-star-half","icon-star-half-empty","icon-bars","icon-collection","icon-wantlist","icon-vinyl","icon-cd","icon-label","icon-artist","icon-cassette","icon-digital","icon-music","icon-search","icon-envelope-o","icon-heart","icon-star","icon-star-o","icon-user","icon-users","icon-th-large","icon-th-list","icon-check","icon-close","icon-search-plus","icon-search-minus","icon-power-off","icon-cog","icon-gear","icon-cogs","icon-gears","icon-trash","icon-trash-o","icon-file-o","icon-clock-o","icon-road","icon-download","icon-repeat","icon-refresh","icon-list-alt","icon-lock","icon-flag","icon-tag","icon-tags","icon-print","icon-camera","icon-font","icon-align-justify","icon-list","icon-pencil","icon-edit","icon-pencil-square-o","icon-share-square-o","icon-arrows","icon-play","icon-pause","icon-chevron-left","icon-chevron-right","icon-plus-circle","icon-times","icon-times-circle","icon-check-circle","icon-question-circle","icon-info-circle","icon-check-circle-o","icon-ban","icon-arrow-left","icon-arrow-right","icon-arrow-up","icon-arrow-down","icon-mail-forward","icon-expand","icon-compress","icon-plus","icon-minus","icon-exclamation-circle","icon-eye","icon-eye-slash","icon-exclamation-triangle","icon-calendar","icon-comment","icon-magnet","icon-chevron-up","icon-chevron-down","icon-shopping-cart","icon-bar-chart","icon-facebook-square","icon-key","icon-comments","icon-thumbs-o-up","icon-thumbs-o-down","icon-thumb-tack","icon-external-link","icon-sign-in","icon-twitter","icon-facebook","icon-unlock","icon-feed","icon-hdd-o","icon-bullhorn","icon-hand-o-left","icon-arrow-circle-left","icon-arrow-circle-right","icon-arrow-circle-down","icon-globe","icon-wrench","icon-tasks","icon-group","icon-chain","icon-cloud","icon-flask","icon-copy","icon-files-o","icon-floppy-o","icon-list-ul","icon-magic","icon-truck","icon-google-plus","icon-money","icon-caret-down","icon-sort","icon-envelope","icon-gavel","icon-dashboard","icon-bolt","icon-cloud-upload","icon-file-text-o","icon-plus-square","icon-angle-double-right","icon-angle-left","icon-angle-right","icon-angle-up","icon-angle-down","icon-desktop","icon-mobile","icon-spinner","icon-mail-reply","icon-reply","icon-keyboard-o","icon-code","icon-mail-reply-all","icon-reply-all","icon-calendar-o","icon-ellipsis-h","icon-play-circle","icon-minus-square","icon-dollar","icon-file","icon-thumbs-up","icon-thumbs-down","icon-instagram","icon-tumblr-square","icon-long-arrow-left","icon-long-arrow-right","icon-archive","icon-soundcloud","icon-newspaper-o","icon-calculator","icon-line-chart","icon-mixcloud","icon-upload","icon-cc-paypal","icon-credit-card"],a=function(e){return e.className.split(" ").filter(function(e){return e.match(/^icon-/)})},r=function(){var e,t,n;return t=i(".icon").toArray().map(a),t=o.flatten(t),n=function(){var n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],o.contains(s,e)?r.push(void 0):r.push(e);return r}(),n=n.filter(Boolean),n=o.uniq(n),setTimeout(function(){if(!o.isEmpty(n))throw new Error("Icon classes not found in stylesheet: "+n.join(", "))}),n},e.exports=c(function(){return l?r():[]})},function(e,t){ds.define("discogsDialog",function(e){var t,n,i,o,r,a,s;return s=e("$","_","load","layout","content"),t=s.$,n=s._,a=s.load,r=s.layout,i=s.content,o={modal:!0,draggable:!1,resizable:!1,width:400},t.fn.discogsDialog=function(e){var i,s,l,c,u,d,f;return f=function(){t(".ui-dialog-titlebar-close",i.dialog("widget")).html("<i class='icon icon-times'></i>").blur()},l=function(){i.dialog("close")},d=function(i){f(),e.modal&&t("body").on("click.discogs_dialog",".ui-widget-overlay",l),n.isFunction(i)&&i()},c=function(i){e.modal&&t("body").off("click.discogs_dialog",".ui-widget-overlay",l),n.isFunction(i)&&i()},s=n.clone(o),u=a("jquery.ui"),i=t(this),r.ready.then(function(){var o;return"mobile"===r.mode()&&(s.width=t(window).width()),e=n.extend(s,e||{}),o=i.data("title"),o&&!e.title&&(e.title=o),e.open=n.isFunction(e.open)?n.wrap(e.open,d):d,e.close=n.isFunction(e.close)?n.wrap(e.close,c):c,u.then(function(){return i.dialog(e)})})},t.fn.saveDialog=function(e){var n,o,r;return n=t(this),r=e.saveClickHandler,delete e.saveClickHandler,o=function(){n.dialog("close")},e.buttons=[{text:i("Save")(),class:"button button_green",click:r},{text:i("Cancel")(),class:"button",click:o}],n.discogsDialog(e)},t.fn.discogsDialog})},function(e,t,n){var i,o,r;r=n(6).pageObject,o=n(10).getText,i=n(291),ds.define("discussionPost",function(e){var t,n,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k;return h=e("_","$","ready","templates"),n=h._,t=h.$,f=h.ready,b=h.templates,d=e("reactDialogs").makeReactDialog,a={postId:null,responseText:null},s=null,p=function(){var e;return s||(s=t('<div id="discussion_message_report" data-title="">'),e=t("#discussion_message_report_title").text(),s.attr("data-title",e),s.on("submit","form",m)),s.html(b.discussionMessageReport(a))},k=function(e){return a=n.extend(a,e),p()},y=function(){if(d({title:o("Report Post")(),content:s.html()}),r)return i.track(r.objectType,"Show Report Abuse Modal")},l=function(e){return t(e).closest(".thread_message")},c=function(e){return l(e).attr("id")},m=function(e){return e.preventDefault(),g(this)},v=function(e){return e.preventDefault(),k({postId:c(e.target),responseText:""}),y()},g=function(e){return t.ajax({url:t(e).attr("action"),method:"POST",data:t(e).serialize(),dataType:"text",success:function(n){var i;return k({responseText:n}),i=t("#"+t('input[name="obid"]',e).val()),i.addClass("thread-message-reported"),w(i,!0)},error:function(e){return k({responseText:e.responseText})}})},_=function(e){return e.preventDefault(),w(l(e.target),!1)},w=function(e,t){return e.toggleClass("thread-message-hidden",t)},u=function(){return t("body").on("click",".thread_message .thread_action_report",v),t("body").on("click",".thread_message .toggle-hidden-message",_)},f(u)})},function(e,t){ds.define("facets",function(e){var t,n,i,o,r;return t=e("$"),r=e("ready"),o=e("reactDialogs").makeReactDialog,n={FULL:540,SINGLE:180,MOBILE:"100%"},i=function(i){var r,a,s,l,c;return i.preventDefault(),a=t(this),r=t("#"+a.data("for")),s=r.find("ul.facets_nav"),c=r.data("title"),s.each(function(e,n){a=t(n),e+=1,e>1&&e%3===0&&a.addClass("last")}),l="mobile"===e("layout").mode(),o({content:r.html(),maxHeight:l?"100%":400,width:l?n.MOBILE:s.length>2?n.FULL:n.SINGLE,title:c,dialogClass:"more_facets_dialog"})},r(function(){var e;if(e=t(".more_facets_link"),e.length)return e.on("click",i)})})},function(e,t,n){var i,o,r;i=n(2),o=n(6),r=n(4),n(301),n(27),ds.define("footer",function(e){var t,n,a,s;return t=e("cookie"),s=e("ready"),n=r.getUrl,a={init:function(){var e;return e=i("#i18n_select"),e.on("change",this.updateLanguage)},updateLanguage:function(){var e;e=i(".language:checked").val(),t("language2",e),o.username?i.ajax({type:"POST",url:n("/settings/locale/update"),data:{locale:e}}).then(function(){return window.location.href=r.updateParams(window.location.href,{add:{lang_update:1}})}):window.location.href=r.updateParams(window.location.href,{add:{lang_update:1}})}},s(function(){return a.init()}),a})},function(e,t){ds.define("formFields",function(e){var t,n,i,o,r,a,s,l,c,u,d,f,h,p,g,m,v,y;return t=e("$"),g=e("ready"),s=e("_"),u=e("content"),n=e("Backbone"),p={},c=function(e,n,i){return function(){var o,r;r=t(this).data(n),o=t("."+e+"[data-"+n+"='"+r+"']").is(":checked"),i(t(r),o)}},m=c("form-field-enabler","form-field-enables",function(e,t){return e.prop("disabled",!t)}),v=c("form-field-toggler","form-field-toggles",function(e,t){return e.toggleClass("hidden",!t)}),l=function(){var e;if(e=d.findWhere({status:i.DIRTY}||d.findWhere({status:i.SAVING})))return u("WARNING: You have unsaved changes.")()},i={CLEAN:0,DIRTY:1,SAVING:2,INVALID:3},r=n.Model.extend({defaults:{status:i.CLEAN,message:"",isWarning:!1}}),o=n.Collection.extend({url:"/",model:r}),d=new o([]),y=[],a=n.View.extend({initialize:function(){return this.listenTo(this.model,"change",this.render),this.hasSubmitEnabler=this.$el.hasClass("form-component-submit-enabler")},alert:void 0,events:{change:"checkForm",keydown:"checkForm",keyup:"checkForm",submit:"submitForm"},checkForm:function(){var e;return this.model.set("message",""),e=this.$el.serialize()!==this.model.get("originalState"),e?this.setDirty():this.hasValue()?this.setClean():this.setInvalid()},submitForm:function(e){var t;return e.preventDefault(),null!=(t=this.alert)&&t.close(),this.saveForm()},saveForm:function(){var e;return this.setSaving(),e=this.$el.serializeArray(),t.ajax({dataType:"json",type:"POST",url:this.model.get("url"),data:e,success:s.bind(this.formSuccess,this),error:s.bind(this.formFail,this)})},formSuccess:function(e){var t;return this.setClean(),null!=e.warnings?(t=e.warnings,this.model.set("isWarning",!0),this.model.set("message",s.isArray(t[0])?t[0].join("<br />"):t)):this.model.set("message",e.message)},formFail:function(e){
var t;return this.setInvalid(),t=e.responseJSON.errors,this.model.set("message",s.isArray(t[0])?t[0].join("<br />"):t)},formAlert:function(){var t,n,o,r;return n=e("alertMessage"),o=this.model.get("status"),r=o===i.INVALID?"error":"accept",this.model.get("isWarning")&&(r="warning"),t=n({type:r,message:this.model.get("message"),closable:!0,selector:this.$el.data("form-component-alert-container-selector")||this.$el.find("legend.first"),autoClose:o===i.CLEAN}),this.alert=t},setClean:function(){this.model.set({originalState:this.$el.serialize(),status:i.CLEAN,isWarning:!1})},setSaving:function(){this.model.set("status",i.SAVING)},setDirty:function(){return this.model.set("status",i.DIRTY)},setInvalid:function(){this.model.set("status",i.INVALID)},hasValue:function(){var e,t;return e=this.$el.serializeArray(),t=s.any(e.slice(1),function(e){return e.value.length>0})},render:function(){var e,t;return t=this.model.get("status"),this.model.get("message")&&this.formAlert(),this.$el.toggleClass("form-component-status-clean",t===i.CLEAN).toggleClass("form-component-status-dirty",t===i.DIRTY).toggleClass("form-component-status-saving",t===i.SAVING).toggleClass("form-component-status-invalid",t===i.INVALID),this.hasSubmitEnabler&&(e=this.$el.find("button[type=submit]"),e.prop("disabled",t!==i.DIRTY)),this}}),h=function(e,n){var o,s,l,c;return o=t(n),s={formType:o.attr("id"),url:o.attr("action"),originalState:o.serialize()},o.hasClass("form-component-status-dirty")&&(s.status=i.DIRTY),l=new r(s),d.add(l),c=new a({el:n,model:l}),y.push(c)},f=function(){t(document.body).on("change",".form-field-enabler",m).on("change",".form-field-toggler",v),t(".form-component").each(h),t(".form-component-confirm-navigation").length>0&&t(window).on("beforeunload",l)},g(f),s.extend(p,{views:y,FORM_STATUSES:i,forms:d})})},function(e,t,n){var i,o,r;i=n(2),r=n(4),o=n(270),n(9),n(26),n(302),n(27),ds.define("fullWidthHeader",function(e){var t,n,a,s,l,c,u,d;return n=e("content"),a=e("features"),s=e("layout"),u=e("ready"),u(function(){return a.isMobile&&o.setupActionMenuView(i("#full-width-header")),i(".header-read-more").each(function(e,t){var n;if(n=i(t),n.height()<n[0].scrollHeight)return i("#full-width-header").addClass("header-can-expand"),l(n)}),i(".header-can-expand .column-content, .is_mobile .header-title").onFastClick(function(e){var n,o;e.target.href||e.preventDefault(),e.stopPropagation(),n=i("body"),o=n.hasClass("expand-header-content"),e.target.href||(n.off("click",t),o?t(e):(i("body").addClass("expand-header-content"),c(),setTimeout(function(){return n.on("click",t)},400)))}),i(".header-content-close").onFastClick(t)}),c=function(){var e;return e=i(document).height()-i("#full-width-header").height(),i(".full-width-header-cover").css("height",e),"mobile"===s.mode()&&r.scrollTo(i(".header-column-wrap")),d(!1)},t=function(e){var n;if(!r.hasSelectedText()&&!e.target.href)return n=i("body"),n.removeClass("expand-header-content"),n.off("click",t),i(".full-width-header-cover").css("height",0),"mobile"===s.mode()&&r.scrollTo(i("#full-width-header")),e.preventDefault(),d(!0)},d=function(e){var t;return t=20,i(".column-content .header-read-more").each(function(){var n;return e?i(this).removeAttr("style"):(n=this.scrollHeight+t,i(this).css("max-height",n))})},l=function(e){var t,o;return o="<a class='readmore_toggler'><span class='read-more-expand'>"+n("More")()+" <i class='icon icon-caret-down'></i></span><span class='read-more-collapse'>"+n("Less")()+" <i class='icon icon-caret-up'></i></span></a>",t=i(o),e.append(t).addClass("has-read-more-content")}})},function(e,t,n){var i;i=n(292),ds.define("googleTagManager",function(e){var t,n;return n=e("consent"),t=e("Promise"),t.all([n,i]).then(function(){return function(e,t,n,i,o){e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(n)[0],a=t.createElement(n),s="dataLayer"!=i?"&l="+i:"";a.async=!0,a.src="//www.googletagmanager.com/gtm.js?id="+o+s,r.parentNode.insertBefore(a,r)}(window,document,"script","dataLayer","GTM-NGJZRJ")}),!0})},function(e,t){ds.define("googleTagServices",function(e){var t;return t=e("consent"),t.then(function(){var e;return e=document.createElement("script"),e.src="https://www.googletagservices.com/tag/js/gpt.js",document.head.appendChild(e)}),!0})},function(e,t,n){var i,o,r,a,s;i=n(2),o=n(3),a=n(6),s=n(4),r=n(291),n(26),n(302),n(27),ds.define("headerNav",function(e){var t,n,l,c,u,d,f;return n=e("features"),c=e("layout"),f=e("ready"),l=s.getUrl,d={},d.navGroups=u={},d.init=function(){var e,a,l,d,f,h;f=function(){var t;i("html").hasClass("needs_reduced_ui")&&(t=i("#site_nav_submenu_account"),i("#activity_menu_placeholder").append(e,t),t.data("submenuMoved",!0),e.find(".button").removeClass("button button_green"),i("#site_navigation_placeholder").append(l))},d=function(){i("#site_search").after(l,e)},h=function(e){var t,n;return this.blur(),n=a.hasClass("visible"),t=function(e){return a.toggleClass("visible",e),e&&a.find("a:first").trigger("focus"),setTimeout(function(){return i("#site_header_wrap").toggleClass("mobile_nav_visible",e)},0)},o.defer(t,!n),document.activeElement!==document.body&&document.activeElement.blur(),e.preventDefault(),r.track("mobile","nav_toggle")},a=i("#mobile_site_navigation"),l=i("#site_navigation"),e=i("#activity_menu"),i(".site_nav_group").each(function(e,n){var i;return i=new t(n),u[i.id]=i}),n.isMobile&&("mobile"===c.mode()&&f(),i(window).on("breakpoint<=mobile",f).on("breakpoint>mobile",d),i("body").on("open.navgroup",function(e,t){var n,a,l;n=i("#"+t),a=n.offset().top+n.height()<i(document).scrollTop(),l=n.data("id"),r.track("mobile","nav_"+l+"_open"),a&&o.defer(s.scrollTo,n)})),i("#mobile_site_navigation_toggle").onFastClick(h)},t=function(e){var n,r,s,c;n=function(e){return function(t,n){e.opened&&n!==e.$group.attr("id")&&e.close()}}(this),this.$group=i(e),this.id=this.$group.data("id"),this.$link=this.$group.find(".nav_group_control"),this.opened=!1,this.namespace=o(t.eventType.split(" ")).map(function(t){return t+"."+e.id}).join(" "),s="#site_nav_tray_"+this.id+", #site_nav_submenu_"+this.id,r={locale:a.locale},a.loggedIn&&a.username&&(r.username=encodeURIComponent(a.username)),c=l("/nav_tray/"+this.id,{params:r}),this.lazy$submenu=i(s).lazy$element(c).each(function(e){return function(n,o){if(e.$link.off(t.lazyloadEventType),e.$submenu=i(o),e.$submenu.data("submenuMoved")!==!0)return e.$submenu.appendTo(e.$group)}}(this)),this.$link.on(t.lazyloadEventType,this.lazy$submenu.call).onFastClick(o.bind(this.toggle,this)).on("keydown",o.bind(this.toggleWithKey,this)),i("body").on("open.navgroup",n)},t.prototype={open:function(e){var t,n;return this.opened=!0,this.listenToOutside(),n=function(e){return function(t){return e.opened&&(i("body").trigger("open.navgroup",e.$group.attr("id")),t.find("a:visible:first").trigger("focus")),t}}(this),t=function(t){return function(){if(e&&t.opened)return t.followLink()}}(this),s.timeoutPromise(this.render(),2e3).then(n,t)},close:function(){return this.opened=!1,this.forgetOutside(),this.render()},render:function(){var e;return e=this.opened,i([this.$group.get(0),this.$link.get(0)]).toggleClass("opened",e),this.lazy$submenu.call().then(function(t){return t.toggleClass("opened",e)})},toggleWithKey:function(e){var t,n;if(t=13,n=32,e.keyCode===t||e.keyCode===n)return this.toggle(e)},toggle:function(e){return e.preventDefault(),this.opened?this.close():this.open(!0)},followLink:function(){var e;if(e=this.$link.attr("href"))return location.href=e},listenToOutside:function(){var e,t,r;e=function(e){var t,n;t=!i(e.target).closest(this.$group).length,n=!i(e.target).closest(this.$submenu).length,t&&n&&this.close()},t=this,n.isMobile||i("body").on(this.namespace,o.bind(e,this)),r=function(e){var n,o;o=i(e.target).closest(".nav_group_control")[0],o!==t.$link[0]&&(n=i(o).parent(".site_nav_group").data("id"),t.close(),u[n].open())},setTimeout(function(){return i(".site_nav_group").on("mouseenter.browsing","> .nav_group_control",r)},10)},forgetOutside:function(){i("body").off(this.namespace),i(".site_nav_group").off("mouseenter.browsing","> .nav_group_control")}},t.lazyloadEventType="mouseenter.navgroup_lazyload",t.eventType="click",n.hasTouch&&(t.eventType+=" touchend",t.lazyloadEventType+=" touchstart.navgroup_lazyload"),f(d.init),d})},function(e,t,n){var i,o,r,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k;i=n(2),o=n(8),r=n(3),l=n(6),k=n(4),h=n(189),n(302),n(305),n(316),n(314),n(365),n(27),n(9),p=ds.require("layout"),g=ds.require("load"),m=ds.require("onNextVisit"),_=ds.require("skittles"),f=ds.require("images"),b=ds.require("ready"),a=ds.require("content"),d=k.getUrl,u=1e3,c=3e5,v=void 0,s=0,y={init:function(){if(this.$fields=i(".autocomplete"),!(this.$fields.length<1))return this.requests=[],this.keyCodes={esc:27},h("/",r.bind(y.focusOnField,this)),i(document.body).on("keydown",r.bind(y.blurField,this)),y.$searchTypeTabs=i(y.searchTabsTemplate()),y.searchModel=new y.SearchModel,y.searchView=new y.SearchView({el:i("#site_search"),model:y.searchModel}),this.$fields.each(function(e,t){i(t).data("valueCache",[])}),this.$form=this.$fields.parents("form").eq(0),this.makeSpinner()}},y.SearchModel=o.Model.extend({isSearching:!1}),y.SearchView=o.View.extend({events:function(){return{"focus #search_q":"focusHandler","blur #search_q":"minimizeSearchBar","keyup #search_q":"listenToKeys","mousedown #do_site_search":"clickSearch",submit:"search"}},initialize:function(){return this.model.set("searchType","all"),this.setSearchValue(),this.listenTo(this.model,"change:searchType",this.updateSearchType),this.okayToClose=!0},search:function(e){e&&e.preventDefault(),this.model.get("isSearching")||(this.model.set("isSearching",!0),window.open(this.$el.attr("action")+"?"+this.$el.serialize(),i(".subform_table").length>0?"_blank":"_self"))},listenToKeys:function(e){var t;t=27===e.keyCode,t&&this.minimizeSearchBar(e)},setSearchValue:function(){return this.$search=this.$el.find("#search_q"),this.model.set("q",this.$search.val())},isFocused:function(){return document.activeElement===this.$search.get(0)},focusHandler:function(){var e;return e=200,this.expandSearchBar(),this.setSearchValue(),this.$search.select(),setTimeout(function(e){return function(){return y.openAutocomplete.call(e.$search.get(0))}}(this),e+25)},expandSearchBar:function(){return i("#site_header").addClass("search_focused",this.isFocused())},clickSearch:function(e){if(e.currentTarget===i("#do_site_search").get(0))return this.okayToClose=!1,this.search(),this.$search.focus()},minimizeSearchBar:function(){if(this.okayToClose)return i("#site_header").removeClass("search_focused")},updateSearchType:function(e,t){return i(".advanced_search_type").val(t),i("#search_q").autocomplete("search")}}),y.makeExpireCache=function(e,t){var n;return n=e.id,function(){var e,o;e=i("#"+n),o=e.data("valueCache"),e.data("valueCache",r(o).without(t))}},y.focusOnField=function(e){this.$fields.focus(),e.preventDefault()},y.blurField=function(e){this.$fields.is(":focus")&&this.keyCodes.esc===e.keyCode&&(this.$fields.blur(),e.preventDefault())},w=function(){var e,t,n,o,a,s,l,d;return e=i(this),l=e.val(),t=e.data("autocompleteCache")||{},s=!1,a=r.now(),n=r.has(t,l),o=r(t).chain().values().max().value()||0,d=u>a-o,y.searchModel.set("q",l),n?s=!0:d?(clearTimeout(v),v=r.delay(function(){return e.autocomplete("search")},u),s=!1):(s=!0,t[l]=a,e.data("autocompleteCache",t),r.delay(function(){var t;return t=e.data("autocompleteCache"),delete t[l]},c)),s},y.openAutocomplete=function(){var e;e=i(this),g("jquery.ui").then(function(){e.data("uiAutocomplete")||(e.autocomplete({minLength:2,delay:s,position:"mobile"===p.mode()?{my:"left top+7"}:void 0,focus:function(){return!1},select:y.fieldSelect,source:y.fieldSource,search:w}),e.data("uiAutocomplete")._renderMenu=function(e,t){var n;return n=this,e.append(y.$searchTypeTabs.onFastClick(y.updateActive)),i.each(t,function(t,i){return n._renderItem=y.fieldRenderItem(e,i)})}),e.autocomplete("search")})},y.updateActive=function(e){var t;return e.stopPropagation(),e.preventDefault(),t=i(e.target).siblings(".search_type"),t.prop("checked",!0),y.searchModel.set("searchType",t.val())},y.fieldSelect=function(e,t){var n,o,r,a;return n=i(this),n.val(t.item.name),a=t.item.type.toLowerCase(),o=t.item._position,m("analytics.track","search","autocomplete result selected",a,o),n.hasClass("ac_submit")&&window.open(t.item.uri,(null!=(r=l.endpoint)?r.match(/subform/):void 0)?"_blank":"_self"),!1},y.fieldSource=function(e,t){var n,o,r,a;n=i(this.element),r={url:l.autocompleteUrl,dataType:"json",data:y.searchModel.toJSON(),success:y.formatData(t,n),error:function(){t([])}},o=n.attr("class").match(/ac_type_(\w+)/),o&&(r.data.type=o[1]),a=i.ajax(r),y.searching(a),y.requests.push(a),a.done(y.finishedSearching(a))},y.formatData=function(e,t){return function(n){var i,o,a,s;if(n){for(i=a=0,s=n.length;a<s;i=++a)o=n[i],o.artist&&(o.artist=r.escape(o.artist)),o.title&&(o.title=r.escape(o.title)),o._position=i+1;t.hasClass("ac_submit")&&n.push({type:"_advanced_search"}),e(n)}}},y.fieldRenderItem=function(e,t){var n,o,r,s,l,c,u,h,p,g,m;return n=void 0,m=i(this.element).val(),u=void 0,g=void 0,"_advanced_search"===t.type?(t.uri=d("/search/advanced"),n=i(["<li class='advanced_search_link'>","<a href='"+t.uri+"'>","<i class='icon icon-search'></i>"," "+a("Advanced Search")(),"</a></li>"].join("")),n.data("ui-autocomplete-item",{name:m,type:"advanced",uri:t.uri}),n.appendTo(e),n):(l='<span class="format">('+a("all versions")()+")</span>",c='<span class="format">'+t.format+"</span>",h="Master Release"===t.type?l:"Release"===t.type?c:"",u='<span class="label with-sublabel">'+t.title+h+"</span>",g='<span class="sublabel">'+(t.type.match(/release/i)?t.artist:t.type)+"</span>",p="",t.marketplace&&t.marketplace.min&&(p="<span class='release_marketplace'> "+a("%(quantity)s from %(currency)s")({quantity:"<span class='release_marketplace_quantity'>"+t.marketplace.quantity+"</span>",currency:"<span class='release_marketplace_price'>"+t.marketplace.currency+t.marketplace.min.toFixed(2)+"</span>"})+" </span>"),s=_.render(t),r=f.make$thumbnail(t.thumb),o=i("<a href='"+t.uri+"''>"+s+u+g+p+"</a>"),o.prepend(r),s&&o.addClass("has_skittles"),i("<li />").data("ui-autocomplete-item",t).append(o).appendTo(e))},y.makeSpinner=function(){return this.$spinner=i('<i class="icon icon-spinner icon-spin" id="autocomplete_spinner"></i>'),this.$form.append(this.$spinner),this.$spinner},y.searching=function(e){var t;this.$spinner||this.makeSpinner(),t=this.$form,e.delayedNotification=setTimeout(function(){t.addClass("searching")},200)},y.finishedSearching=function(e){return r.bind(function(){clearTimeout(e.delayedNotification),r(this.requests).last()===e&&(this.$form.removeClass("searching"),this.requests.length=0)},y)},y.searchTabsTemplate=function(){return'<ol id="search_tabs" class="list_no_style float_fix">\n    <li>\n        <input type="radio" id="search_all" class="search_type" name="type" value="all" checked />\n        <label for="search_all">'+a("Everything")()+'</label>\n    </li>\n    <li>\n        <input type="radio" id="search_release" class="search_type" name="type" value="release" />\n        <label for="search_release">'+a("Releases")()+'</label>\n    </li>\n    <li>\n        <input type="radio" id="search_artist" class="search_type" name="type" value="artist" />\n        <label for="search_artist">'+a("Artists")()+'</label>\n    </li>\n    <li>\n        <input type="radio" id="label_search" class="search_type" name="type" value="label" />\n        <label for="label_search">'+a("Labels")()+"</label>\n    </li>\n</ol>"},b(function(){return y.init()}),e.exports=y},function(e,t,n){var i,o;i=n(2),o=n(4),n(27),ds.define("historyListener",function(e){var t,n,r;return r=e("ready"),t=window.history,n=function(){var e,n,r;return e=i("#log_in_link"),n=t.pushState,r=t.replaceState,t.pushState=function(e){return"function"==typeof t.onpushstate&&e&&t.onpushstate({state:e}),n.apply(t,arguments)},t.replaceState=function(e){return"function"==typeof t.onreplacestate&&t.onreplacestate({state:e}),r.apply(t,arguments)},window.onpopstate=t.onpushstate=t.onreplacestate=function(){var t,n,i;return t=e.attr("href"),i={return_to:decodeURIComponent(window.location.href)},n=o.updateParams(t,{add:i}),e.attr("href",n)}},r(n)})},function(e,t){var n=function(e,t){return function(){return e.apply(t,arguments)}};ds.define("immutableCache",function(){var e,t;return t=window.Immutable.Map,e=function(){function e(e,i){this.expires=null!=e?e:60,this.autoPurge=null==i||i,this.purge=n(this.purge,this),this.expires=1e3*this.expires,this.items=new t({}),this.autoPurge&&(this.interval=setInterval(this.purge,this.expires))}return e.prototype.get=function(e){var t;return t=this.items.get(this._hash(e)),null==t||this.isExpired(t)?(this.remove(e),null):t.get("result")},e.prototype.set=function(e,n,i){return null==i&&(i=this.expires),this.items=this.items.set(this._asImmutable(e).hashCode(),new t({expires:Date.now()+i,result:n})),n},e.prototype.size=function(){return this.items.size},e.prototype.remove=function(e){return this.items=this.items.delete(this._asImmutable(e).hashCode())},e.prototype.clear=function(){return this.items=this.items.clear()},e.prototype.purge=function(){return this.items=this.items.filterNot(function(e){return function(t){return e.isExpired(t)}}(this))},e.prototype.isExpired=function(e){return!t.isMap(e)||Date.now()>e.get("expires")},e.prototype._hash=function(e){return this._asImmutable(e).hashCode()},e.prototype._asImmutable=function(e){try{return new t({key:e})}catch(e){throw new TypeError("Invalid key type")}},e}()})},function(e,t,n){var i;i=n(10).getText,ds.define("interactiveadmin",function(e){var t,n,o,r,a,s;return s=e("$","ready"),t=s.$,a=s.ready,n=e("reactDialogs").makeReactDialog,r={},r.init=function(){return t(".admin-invoice-modal").on("click",this.openInvoiceModal)},o={Pay:"pay-invoice-modal",Extend:"extend-invoice-modal",Create:"new-invoice-modal",CreditUser:"admin-credit-user-modal"},r.openInvoiceModal=function(e){var r,a,s;return e.preventDefault(),s=t(this).data("type"),a=t(this).data("title")||s+" Invoice",r=t("#"+o[s]),n({content:r.html(),width:t("html").hasClass("is_mobile")?t(window).width():440,title:a,buttons:[{text:i("Create")(),icon:"check-circle",color:"green",click:function(e){return t(e.target).parents(".react-modal").find("form").submit()}},{text:i("Cancel")(),icon:"ban"}]})},a(function(){return r.init()}),r})},function(e,t){var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};ds.define("keyCode",function(){var e,t;return t={},e={"[":219,"]":221,a:65,c:67,v:86,x:88,backspace:8,comma:188,tab:9,shift:16,space:32,enter:13,escape:27,ctrl:[17,91,93],left:37,right:39,up:38,down:40},t.key=e,t.is=function(t,i){var o,r;return o=e[t],r=i.which,"object"==typeof o?n.call(o,r)>=0:r===o},t.contains=function(e,n){var i;return i=e.filter(function(e){return t.is(e,n)}),Boolean(i.length)},t.ctrlDown=function(e){return e.ctrlKey||e.metaKey},t.shiftDown=function(e){return Boolean(e.shiftKey)},t.altDown=function(e){return Boolean(e.altKey)},t})},function(e,t,n){var i;i=n(7),ds.define("LoadQueue",function(e){var t,n,o,r,a,s,l;return l=e("_","Promise"),r=l._,n=l.Promise,s={loaded:"loadQueue:resource:loaded",loading:"loadQueue:resource:loading",failed:"loadQueue:resource:failed",allLoaded:"loadQueue:resources:loaded"},a={loading:function(e){return i.trigger(s.loading,e.element)},loaded:function(e){return i.trigger(s.loaded,e.element)},failedLoading:function(e,t){return i.trigger(s.failed,e,t.element)},allLoaded:function(){return i.trigger(s.allLoaded)}},o=function(){function e(e){if(this.element=e,this.loading=this.loaded=this.error=!1,this.src=this.element.getAttribute("data-src"),null==this.src)throw new Error("Resource requires a source")}return e.prototype.load=function(){return new n(this.error?function(e){return function(t,n){return n(Error("Resource not loaded"),e)}}(this):this.loaded?function(e){return function(t){return t(e)}}(this):function(e){return function(t,n){var i;return i=new Image,i.onload=function(){return e.loaded=!0,e.loading=!1,t(e)},i.onerror=function(){return e.error=!0,e.loading=!1,n(Error("Resource not loaded"),e)},e.loading=!0,i.src=e.src}}(this))},e}(),t=function(){function e(e,t){this.options=t,this.events=s,this.queue=r.map(e,function(e){return new o(e)})}return e.prototype.isEmpty=function(){return!this.findNext()},e.prototype.findNext=function(){return r.find(this.queue,function(e){return!e.loaded})},e.prototype.loadNext=function(e){return null==e&&(e=1),e=Math.max(1,e),r.each(new Array(e-1),function(e){return function(){return e.handleResource(e.findNext())}}(this))},e.prototype.loadAtIndex=function(e){return this.handleResource(this.queue[e])},e.prototype.handleResource=function(e){var t;return!!e&&(t=function(e){return function(t){if(a.loaded(t),e.isEmpty())return a.allLoaded()}}(this),e.load().then(t,a.failedLoading))},e}()})},function(e,t){ds.define("markdownEditor",function(e){var t,n,i,o,r,a,s,l;return s=e("$","load","ready"),t=s.$,o=s.load,a=s.ready,l=function(){var e,n,i,o;e=t("#wmd-editor"),o=e.height(),i=t("#wmd-preview-wrapper"),n=i.find("#wmd-preview"),i.hasClass("in_aside")&&i.css({top:e.position().top,width:i.parent().width(),height:o}),i.fadeIn(500),n.css({height:o-i.find(".wmd-preview-flag").height()}),n.on("click",".iframe_placeholder",function(e){var n,i;return i=t(this),n=t(i.data("iframe")),i.replaceWith(n),e.preventDefault()})},r=function(e){var t,n;return n=new RegExp("^<iframe.+(\\n+)?(</iframe>(\\s+)?)$","gim"),(t=function(e){var t,i;return t=e.match(n),i="<a class='iframe_placeholder' data-iframe='"+t+"'>View Iframe</a>",e=e.replace(n,i)})(e)},i=function(){var e,n;return t(".wmd-input").attr("id","wmd-input"),e=new Markdown.Converter,n=new Markdown.Editor(e),e.hooks.chain("preConversion",r),n.run(),l()},n=o("bower/pagedown/Markdown.Converter").then(function(){return o("bower/pagedown/Markdown.Sanitizer").then(function(){return o("bower/pagedown/Markdown.Editor")})}),a(function(){return n.then(i)})})},function(e,t,n){var i,o,r,a,s,l;i=n(2),o=n(3),a=n(6),l=n(4),s=n(7),r=n(291),n(27),ds.define("notes",function(e){var t,n,c,u;return c=e("ready"),t=l.getUrl,n={},n.init=function(){var e;if(e=i(".notes_field"),e.length)return e.each(this.initField)},n.initField=function(){var e;e=i(this),e.data("notes-init")||e.on("click",".notes_show",o.bind(n.edit,e)).on("click","#notes_edit_save",o.bind(n.save,e)).on("change",".notes_select",o.bind(n.save,e)).on("click","#notes_edit_cancel",o.bind(n.edit,e)).data("notes-init",!0)},n.edit=function(){var e,t,r;e=this,e.hasClass("notes_list")?setTimeout(function(){i("body").on("click.notesSelectClose",o.partial(n.selectClose,e))},100):(t=null!=(r=e.find(".notes_text").data("content"))?r.toString().replace(/<br[ ]?[\/]?>/g,"\n"):void 0,setTimeout(function(){e.find("textarea").trigger("focus").val(t)},1)),e.toggleClass("notes_editing")},n.selectClose=function(e,t){var n;n=0===i(t.target).closest(e.find(".notes_select")).length,n&&(e.removeClass("notes_editing"),i("body").off("click.notesSelectClose"))},n.save=function(){var e,r,a,s,l,c,d;e=this,d="wantlist"===e.data("type"),a=t("/list/"+(d?"want_update":"coll_update")),s=e.find("select").val()||e.find("textarea").val(),l=e.data("field"),c="collection_folders"===l,s=c&&!s?1:s,r={release_id:e.data("id"),coll_id:e.data("coll-id"),field_id:c?null:l,folder_id:c?s:null,val:c?e.find("option:selected").text():s,notes:s},i.ajax({type:"POST",url:a,dataType:"json",data:r,success:o.bind(n.display,e)}).then(function(){return u(d,e.data("field-name"))})},n.display=function(e){var t,n;t=this,n=o.isBlank(e.html),t.removeClass("notes_editing").toggleClass("notes_edited",!n).toggleClass("notes_not_edited",n),t.find(".notes_text").html(e.html).data("content",e.content),i("body").off("click.notesSelectClose")},c(function(){return n.init()}),u=function(e,t){var n,i,o;return o=e?"Wantlist Item":"Collection Item",n=t+" field edited",i=a.endpoint,r.track(o,n,i),s.trigger("note-field:edited",{fieldName:t,type:o})},n})},function(e,t,n){var i,o,r,a,s,l,c;i=n(2),o=n(3),a=n(6),c=n(4),s=n(7),r=n(291),l=n(197),n(304),n(27),ds.define("pagination",function(e){var t,n,u,d;return t=e("persist"),u=e("ready"),e("vimShortcuts"),d=function(){var e,t;return e="strict"in c.deparam(),t=e?{remove:["strict"]}:{add:{strict:"true"}},location.href=c.updateParams(location.href,t)},n={init:function(){var e,t;return i("#pjax_container").length>0&&(e=i(document),t=i("#pjax_container"),t.attr("aria-live","polite"),e.on("pjax:end",function(){return r.trackPageView(a.ga_pageview_page,a.ga_pageview_title)}),e.on("pjax:end",o.bind(n.setupBinding,this)),e.on("pjax:send pjax:complete",this.toggleLoadIndicator),e.pjax(".pagination a","#pjax_container",{timeout:t.data("pjax-timeout")||4e3}),e.on("pjax:start",function(){return s.trigger(l.PAGE_LOADING)}),e.on("pjax:end",function(){return s.trigger(l.PAGE_LOADING_FINISHED)}),o.delay(n.setScrolled,1e3),i(window).on("scroll",o.throttle(n.setScrolled,1e3))),this.setupBinding()},restoreValue:function(e,t){var n;n=i("option[selected]",t).val(),n&&n!==t.value&&(t.value=n)},loadOnChange:function(){var e,n,o,r,a,s,l;n=i(this),e=n.closest("form"),e.data("persist-filters")&&(a=e.data("section"),r=n.attr("name"),l=n.val(),t.set(a+"_"+r,l)),o=c.deparam(e.serialize()),"limit"===n.attr("name")&&(o.page=1),s=c.updateParams(e.attr("action"),{add:o}),window.location=s},setupBinding:function(){i(".pagination select").each(this.restoreValue).on("change",this.loadOnChange),i(".strict_search_toggle").on("change",d)},toggleLoadIndicator:function(e){var t;t="pjax:send"===e.type,i(e.target).toggleClass("loading",t)},setScrolled:function(){var e,t,n;t=(null!=(n=i("#pjax_container").offset())?n.top:void 0)||0,e=window.scrollY>t,i("html").toggleClass("pjax_container_scrolled",e)}},u(function(){return n.init()}),n})},function(e,t,n){var i,o;o=n(4),i=n(7),n(26),n(27),ds.define("parallax",function(e){var t,n,r,a,s,l,c,u;return n=e("features"),l=e("ready"),s=null,a=null,u=function(){var e,t,n,i,o;for(o=window.scrollY,t=0,n=s.length;t<n;t++)i=s[t],o>=i.start&&o<=i.end&&(e=Math.floor((o-i.start)/(i.end-i.start)*200),c(i.el,e))},c=function(e,t){return o.raf(function(){var n;return n="translate3d(0, "+t+"px, 0)",e.style.transform=n,e.style.webkitTransform=n,e.style.msTransform=n})},t=function(){var e,t,n,i,o,r,l,c,u;for(s=[],c=[],t=n=0,i=a.length;n<i;t=++n)r=a[t],u=window.innerHeight,e=r.getBoundingClientRect(),o=e.top+window.pageYOffset,l={el:r,start:o-u>0?o-u:0,end:o+e.height},c.push(s[t]=l);return c},r=function(){if(a=document.getElementsByClassName("parallax-bg"),a.length&&!n.isMobile&&n.has3d()&&n.hasGetBoundingClientRect())return t(),window.addEventListener("scroll",u),window.addEventListener("resize",t),i.on("parallax:calculate",t)},l(r)})},function(e,t,n){var i,o,r,a,s,l,c,u,d;r=n(6),a=r.sentryKey,s=r.sha,l=r.shaDate,o=r.loggedIn,u=r.userID,d=r.username,i=r.logErrors,c=r.useSentry,ds.define("raven",function(e){var t,n,r,f,h,p,g;return g=/discogs.js|javascripts/,i&&c&&(t=e("Raven"),f=a,r=function(e){return e.filename.match(g)},n=function(e){var t;return t=e.stacktrace.frames,t.filter(r).length===t.length},p={sha:s,"sha-date":l},h={release:s,tags:p,shouldSendCallback:n},"function"==typeof t.config&&t.config(f,h).install(),o&&"function"==typeof t.setUser&&t.setUser({id:u,username:d})),c})},function(e,t,n){var i,o;i=n(2),o=n(4),n(9),n(26),n(27),ds.define("readmore",function(e){var t,n,r,a,s;return t=e("content"),n=e("features"),s=e("ready"),a=function(e){var t,n,i;return i=e.data("max-lines")?e.data("max-lines"):6,t=20,n=t*i,e.height()>=n},r=function(e){var r,a;return a="<a class='readmore_toggler'><span class='more'>"+t("More")()+" <i class='icon icon-caret-down'></i></span><span class='less'>"+t("Less")()+" <i class='icon icon-caret-up'></i></span></a>",r=i(a),e.append(r),r.on("click",function(t){return e.toggleClass("uncropped"),i(t.target).blur(),!e.hasClass("uncropped")&&n.isMobile&&o.scrollTo(e),!1}),r.toggleClass("touch",n.hasTouch),e.addClass("initialized")},s(function(){return i(".readmore").each(function(e,t){var n;return n=i(t),a(n)?r(n):n.addClass("uncropped")})})})},function(e,t,n){var i,o,r;r=n(6).pageObject,i=n(2),o=n(291),ds.define("reportAbuse",function(e){var t,n,a;return a=e("ready"),t=e("reactDialogs").makeReactDialog,n={},n.init=function(){return i(".report_abuse").on("click",n.showReportAbuseModal)},n.showReportAbuseModal=function(e){var n;n=i("#report_abuse_modal"),t({title:n.data("title"),content:n.html()}),r&&o.track(r.objectType,"Show Report Abuse Modal"),e.preventDefault()},n.reportAbuse=function(){return i(this).find("form").submit()},a(function(){return n.init()}),n})},function(e,t){ds.define("rollover",function(e){var t,n,i,o,r,a,s,l,c,u;return u=e("$","_","features","ready"),t=u.$,i=u._,o=u.features,c=u.ready,a=e("lazy$element"),l={},s=!1,n=function(e){var n,o;if(this.$rolloverLink=t(e),this.$rolloverLink.on("mouseout",i.bind(this.startTimeout,this)),n=this.$rolloverLink.attr("href")?this.$rolloverLink.attr("href"):this.$rolloverLink.data("link"))return o=n.replace("/artist/","/artist_rollover/").replace("/label/","/label_rollover/"),this.lazy$dialog=function(e){return function(){return a(o).call().then(i.bind(e.buildDialog,e))}}(this),this.mouseOver()},n.prototype={mouseOver:function(){s||(this.rolloverTimeout=setTimeout(function(e){return function(){return e.lazy$dialog().then(function(e){return e.dialog("open")})}}(this),750))},buildDialog:function(e){var n;return n=t("<div class='rollover_preview' />").append(e),n.discogsDialog({maxHeight:250,width:280,modal:!1,position:{my:"left+15 top-11",at:"right top",of:this.$rolloverLink,collision:"flip",using:function(e,n){var i,o,r;o=e.left>n.target.left?"left":"right",r=e.top<=n.target.top-10&&e.top>=n.target.top-13?"top":"bottom",i="ui-dialog-arrow-"+o+"-"+r,t(this).css({left:e.left,top:e.top}).attr("class",function(e,t){return t.replace(/\bui-dialog-arrow-\S+/g,"")}).addClass(i)}},title:n.find("#ro_thing_name").text(),dialogClass:"ui-dialog-arrow",open:function(e){return function(){return n.data("isDialogOpened",!0),e.scrollBug(n),n}}(this),create:i.bind(this.setupEvents,this,n)}).then(i.bind(function(e){return e.on("dialogbeforeclose",function(){var t;t=e.data("ui-dialog").opener,t.prop("disabled",!0),setTimeout(function(){return t.prop("disabled",!1)},50),e.data("isDialogOpened",!1),e.off("dialogbeforeclose")}),this.$dialog=e},this))},startTimeout:function(){var e;e=this.$dialog,this.endTimeout(),e&&(this.rolloverTimeout=setTimeout(function(){return e.data("isDialogOpened")&&("function"==typeof e.dialog?e.dialog("close"):void 0)},300))},endTimeout:function(){this.rolloverTimeout&&clearTimeout(this.rolloverTimeout)},setupEvents:function(e){e.closest(".ui-dialog").on("mouseover",i.bind(this.endTimeout,this)).on("mouseout",i.bind(this.startTimeout,this))},scrollBug:function(e){e.scrollTop(0)}},r=function(){if(!o.isMobile)return t(document.body).on("mouseover",".rollover_link",function(){var e;e=t(".rollover_preview"),e.length&&(e.data("isDialogOpened",!1),e.dialog("destroy")),new n(this)}),t(window).on("mousedown mouseup",function(){s=!s})},c(r),l})},function(e,t){ds.define("section_as_link",function(e){var t,n,i,o;return o=e("$","ready","key"),t=o.$,i=o.ready,n=o.key,i(function(){return t("body").on("click",".section_as_link",function(e){var i,o,r,a;i=t(e.target).is("a"),o=t(this).find(".section_link").attr("href"),r=n.ctrl||n.command,a=r?"_blank":"_self",!i&&o&&window.open(o,a)})})})},function(e,t,n){var i;i=n(291),ds.define("share",function(e){var t,n,o,r,a,s,l,c,u,d,f,h,p,g,m,v;return p=e("_","$","ready","Promise"),o=p._,t=p.$,h=p.ready,n=p.Promise,a=r=void 0,m=o.template('<div style="display:none; overflow: visible;" class="share_dialog" title="<%= dialogTitle %>">\n    <div style="height: 65px;">\n        <div class="fb-like"\n            data-href="<%= url %>"\n            data-send="false"\n            data-layout="box_count"\n            data-width="450"\n            data-show-faces="false"\n            style="float: left; height: 61px; width: 47px; margin-right: 5px;"\n        >\n        </div>\n        <a class="twitter_share_button" href="https://twitter.com/share"\n            data-url="<%= url %>"\n            data-text="<%= text %>"\n            data-via="discogs"\n            data-size=""\n            data-related=""\n            data-count="vertical"\n            data-hashtags=""\n        >\n        </a>\n        <div class="clear"></div>\n    </div>\n</div>'),
v=function(){return a||(a=new n(function(e){var t;return t=window.twttr||(window.twttr=function(e,t,n){var i,o,r;if(i=e.getElementsByTagName(t)[0],!e.getElementById(n))return o=e.createElement(t),o.id=n,o.async=!0,o.src="https://platform.twitter.com/widgets.js",i.parentNode.insertBefore(o,i),window.twttr||(r={_e:[],ready:function(e){r._e.push(e)}})}(document,"script","twitter-wjs")),t.ready(function(){e(t)})}))},l=function(){return r||(r=new n(function(e){return function(e,t,n){var i,o;i=e.getElementsByTagName(t)[0],e.getElementById(n)||(o=e.createElement(t),o.id=n,o.async=!0,o.src="//connect.facebook.net/en_US/all.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){window.FB.init({xfbml:!0}),window.FB.Event.subscribe("xfbml.render",function(){e(window.FB)})}}))},c=function(){return t("body").on("click",".share_link",g)},u=function(e){return t(m(e))},d=function(e,t){return e.XFBML.parse(t.get(0))},f=function(e,t){return t.html(""),e.widgets.createShareButton(location.href,t.get(0),t.data())},s=function(){return t(".share_dialog").each(function(){return t(this).dialog("close")}).remove()},g=function(e){var o,r,a,c,h;return e.preventDefault(),r=t(e.target).closest(".share_link"),h=v(),a=l(),c=n.all([h,a]),s(),o=u(r.data()),o.discogsDialog({width:150,modal:!1,position:{my:"right top+"+(t(this).outerHeight()+10),at:"right top",of:r.get(0)},dialogClass:"ui-dialog-arrow ui-dialog-arrow-top-right",open:function(){t("body").on("click.share_modal_close",function(e){if(!t(e.target).closest(".ui-dialog").length&&!r.length)return o.dialog("close")}),c.then(function(e){var t,n;return n=e[0],t=e[1],f(n,o.find(".twitter_share_button")),d(t,o.find("fb-like")),i.track("Social","Share modal opened")})},close:function(){t("body").off("click.share_modal_close")}})},h(c)})},function(e,t,n){var i,o,r,a;i=n(2),o=n(6),a=n(4),r=n(10).getText,n(189),n(325),ds.define("shortcuts",function(e){var t,n,s,l,c,u,d,f,h,p,g,m,v;return u=e("key"),d=e("reactDialogs").makeReactDialog,s=a.getUrl,m=500,c=/^http|\//,l=function(e){return e=s(e),function(){c.test(e)&&(window.location=e)}},n=function(e){return function(){var t;t=i(e),t.length>0&&t.get(0).click()}},f=function(e){var t;e.preventDefault(),t=function(e){return d({content:e.html(),title:"Discogs Admin",width:872,height:362}).then(function(){i("#userLookup").focus()})},i("#dialog").lazy$element(s("/_d1m3n_/menu")).call().then(t)},h=void 0,p=function(e){return u.setScope(e),h=void 0},g=function(e){return function(){if(!h)return h=u.getScope(),u.setScope(e),setTimeout(function(){return p(h)},m)}},u("g",g("navigate")),u("f",g("navigateForum")),u("a",g("action")),u("d","navigate",l("/my")),u("c","navigate",l("/mycollection")),u("w","navigate",l("/mywantlist")),u("s","navigate",l("/submissions")),u("p","navigate",l("/sell/purchases")),u("i","navigate",l("/sell/manage")),u("o","navigate",l("/sell/orders")),u("f","navigate",l("/forum/")),u("g","navigate",l("/groups/")),u("m","navigate",l("/messages/")),u("e","navigate",n("#edit_link")),u("u","navigate",n("#user_profile_link")),u("r","navigateForum",l("/forum/recent")),u("s","navigateForum",l("/forum/started")),u("p","navigateForum",l("/forum/posted")),u("w","navigateForum",l("/forum/watched")),u("v","navigateForum",l("/forum/saved")),o.interactiveAdmin&&u("d","navigateForum",l("/forum/deleted")),o.interactiveAdmin&&u("a","action",f),u("c","action",n(".collections_buttons .add_to_collection")),u("w","action",n(".collections_buttons .toggle_wantlist")),u("i","action",n(".inv_add_button")),u("l","action",n("#lists .add_to_list")),t=void 0,v=function(){var e;"all"===u.getScope()&&(e=t||(t=i("#keyboard_shortcuts_modal").lazy$element(s("/_keyboard_shortcuts_modal")).call()),e.then(function(e){return d({title:r("Keyboard Shortcuts")(),content:e.html(),width:600,id:"keyboard_shortcuts_modal",dialogClass:"keyboard_shortcuts_modal_"+o.endpoint.split(".")[0]})}))},i(".show_keyboard_shortcuts").on("click",function(e){return v(),e.preventDefault()}),u("shift+/",v),!0})},function(e,t,n){var i,o,r,a,s,l,c;r=n(6),i=n(2),n(13),l=ds.require("ready"),s=ds.require("experiment"),a=ds.require("environment"),o="pkrztbQFSvy7wKCsA3uJaQ",c=function(e){return null==e&&(e=0),i(document.body).addClass("show-skittles show-skittles-"+e).toggleClass("show-new-skittles",e>0)},e.exports=l(function(){if(r.loggedIn&&!a.isTest())return s.getVariation(o).then(c,c)})},function(e,t){ds.define("sortableTable",function(e){var t,n,i,o,r,a,s,l,c,u,d,f,h,p;return c=e("$","_","ready"),t=c.$,n=c._,l=c.ready,s={},a=[],i=void 0,f=!1,s.init=function(){return a=t(".table-sort-row").toArray(),t("#table-sort-dropdown").on("change",r),t(".table-sort-control").onFastClick(o)},r=function(e){var n;return n=t(e.currentTarget).val().split(","),f="desc"===n[1],h(n[0])},o=function(e){var n;return e.preventDefault(),n=t(e.currentTarget).data("sort"),f=i===n&&!f,h(n,f)},h=function(e){return i=e,p(i,f),u(i,f),d(i,f)},p=function(e,i){return a=n.sortBy(a,function(n){return t(n).data(e)}),i&&a.reverse(),t(".table-sort").prepend(a)},u=function(e,i){var o,r,a;return t(".table-sort-icon").remove(),r=i?"chevron-down":"chevron-up",a="<i class='icon icon-"+r+" table-sort-icon'></i>",o=n.filter(t(".table-sort-control"),function(n){if(t(n).data("sort")===e)return n}),t(o).append(a)},d=function(e,i){var o,r,a;return a=i?"desc":"asc",r=e+","+a,o=n.filter(t("#table-sort-dropdown option"),function(e){if(t(e).val()===r)return t(e).prop("selected",!0)})},l(function(){return s.init()}),s})},function(e,t,n){var i,o;o=n(6),i=n(291),ds.define("soundplayer",function(e){var t,n,r,a,s,l,c,u,d,f,h,p;return f=e("$","load","content","_","ready","Promise"),t=f.$,c=f.load,a=f.content,r=f._,d=f.ready,n=f.Promise,h=void 0,s=function(){var e;return e=t(".sound_preview").length>0,e&&t("body").on("click",".sound_preview",p),t(document).on("pjax:send",function(){var e;return null!=(e=window.soundManager)?e.pauseAll():void 0})},u=function(){return h||(h=c("bower/soundmanager2/script/soundmanager2-nodebug").then(function(){var e,i;return e=window.soundManager,i=o.imagesHost||"",new n(function(n){return e.setup({url:i+"embed/soundmanager2_flash_xdomain/",preferFlash:!1,useHTML5Audio:!0,debugMode:!1,onready:function(){n(e)}}),t(function(){return e.beginDelayedInit()})})}))},l=function(e){var t;return t=e&&1===e.playState&&!e.paused},p=function(e){var n,o,s,c,d;e.preventDefault(),n=t(this),d=n.attr("href"),c=n.data("soundmanager"),s=function(){var e;e=l(this),n.toggleClass("sound_preview_playing",e),n.find(".icon").toggleClass("icon-play",!e).toggleClass("icon-pause",e)},o=function(e){e||n.attr("disabled","disabled").html(a("Audio not found")())},u().then(function(e){var t;t=!!c,c||(c=e.createSound({url:d,onplay:function(){s.call(this),i.track("Marketplace","audio sample playing")},onstop:s,onpause:s,onresume:s,onfinish:function(){s.call(this),r.defer(function(e){return function(){return e.destruct(),n.removeData("soundmanager")}}(this))},onload:o}),n.data("soundmanager",c)),t&&l(c)?c.togglePause():(e.pauseAll(),c.play())})},d(s)})},function(e,t,n){var i;i=n(7),ds.define("tables",function(e){var t,n,o,r,a,s,l,c,u,d,f;return u=e("$","_","ready","key"),t=u.$,r=u._,c=u.ready,s=u.key,o="tables:checkbox:checked",l=void 0,n=void 0,a=function(e){return e.filter(":checked").length},d=function(e,t){var n;return n=a(t)===t.length,e.prop("checked",n)},f=function(e){var n,r,s;n=t(".reactive_control"),n.length>0&&(r=function(){return 0===a(e)},s=function(){return n.attr("disabled",r())},s(),e.on("change",s),i.on(o,s))},c(function(){var e;return t(".table_block").on("click","input[type=checkbox]",function(e){var r,a,c,u,d;if(r=t(".table_block input[type=checkbox]"),l&&s.shift&&(u=r.index(l),d=r.index(this),a=u<d?n.slice(u-1,d):n.slice(d-1,u),c=t(this).prop("checked"),a.each(function(e,n){return t(n).prop("checked",c).parents("tr").toggleClass("selected",c)})),l=this,!t(e.target).hasClass("check_all"))return i.trigger(o,{checkbox:e.target})}),e=t("input.check_all").each(function(){var e,a,s;return e=t(this),s=e.data("checkAllSelector"),n=t(s),a=function(){return n.prop("checked",e.prop("checked")),i.trigger(o,{$checkboxes:n})},e.on("click",a),i.on(o,r.partial(d,e,n)),d(e,n)}),n=t(e.data("checkAllSelector")),f(n),t(".table_toggle").onFastClick(function(){var e;return e=t(this).closest("tr"),e.toggleClass("table_open")})})})},function(e,t,n){var i,o,r;i=n(2),r=n(4),o=n(270),n(26),n(27),ds.define("thread",function(e){var t,n,a,s,l,c,u,d;return t=e("features"),c=e("ready"),s={},s.init=function(){return u(),i(document).on("pjax:end",u),o.setupActionMenuView(i("#pjax_container"))},u=function(){var e;e=i(".quote_user"),i("body").on("click",".guideline-tracker",d),t.isMobile?e.onFastClick(l):e.on("mousedown",l)},d=function(){var t;return t="forum-"+i(this).data("location"),e("onNextVisit")("analytics.track","discussion","guidelines",t)},l=function(){var e,t,o,s,l;return e=i("#text"),l=i(this).data("mess-username"),t=i(this).parents(".thread_message").attr("id"),s=n(t),o="[quote="+l+"]"+i.trim(s)+"[/quote]\n\n",a(e,o.toString()),e.focus(),r.scrollTo(e),!1},n=function(e){var t,n,o,r,a;return a=window.getSelection||document.getSelection,a?(t=a(),n=t.anchorNode):document.selection&&(t=document.selection.createRange(),n=t.parentElement(),t=t.text),o=i(n).parents(".thread_message").attr("id"),r=o===e?t:i("#"+e+" .width_limit").text()},a=function(e,t){var n,i,o;document.selection?(e.focus(),i=document.selection.createRange(),i.text=t):e.selectionStart||"0"===e.selectionStart||0===e.selectionStart?(o=e.selectionStart,n=e.selectionEnd,e.val([e.value.substring(0,o),t,e.value.substring(n,e.value.length)].join(""))):e.val(e.val()+t)},c(function(){return s.init()}),s})},function(e,t,n){var i,o;o=n(292),i=n(291),ds.define("toggleSection",function(e){var t,n,r,a,s,l,c,u,d,f,h,p;return d=e("$","persist","features","layout","_"),t=d.$,c=d.persist,a=d.features,s=d.layout,n=d._,u={},h=["expanded","collapsed"],r={control:"toggle_section_control",collapsed:"toggle_section_collapsed",remember:"toggle_section_remember"},p=function(e){var n,o,a;return o=t(e.target),!o.hasClass(r.control)&&!o.is("i")||(n=t(t(this).data("for")),a=n.hasClass(r.collapsed),f(n,!a),void i.track("toggle_section",a?"opened":"closed",n.data("toggle-section-id")))},f=function(e,n){var i,o;i=l(e),o=h[1*n],e.toggleClass(r.collapsed),e.hasClass(r.remember)&&c.set(i,n),t(window).trigger(i+":"+o)},l=function(e){return"toggle_section_"+e.data("toggle-section-id")},u.init=function(){var e;return e=t("."+r.control),a.isMobile&&o.then(function(){var i;i="mobile"===s.mode(),i&&e.each(function(){var e,i,o;e=t(t(this).data("for")),i=l(e),o=c.get(i),n.isUndefined(o)&&f(e,!0)})}),e.onFastClick(p)},t(function(){return u.init()}),u})},function(e,t){ds.define("toggledots",function(e){var t,n,i,o;return o=e("$","content"),t=o.$,n=o.content,i={init:function(){return t("body").on("click",".toggledots",this.handleClick)},handleClick:function(e){var i;return i=t(this),t(i.data("toggledotsSelector")).toggle(),i.data("toggledotsToggled")?(i.data("toggledotsToggled",!1),i.attr("title",n("Show more")())):(i.data("toggledotsToggled",!0),i.attr("title",n("Show less")())),e.preventDefault()}},t(function(){return i.init()}),i})},function(e,t,n){var i;i=n(291),ds.define("tracklist",function(e){var t,n,o,r,a,s;return s=e("$","persist","content","ready"),t=s.$,o=s.persist,n=s.content,a=s.ready,r={},r.init=function(){if(this.$tracklistCredits=t(".toggle_tracklist_credits"),this.$trackBlockquote=t(".track blockquote"),this.$tracklistCredits.length>0)return this.$tracklistCredits.click(this.toggleTracklistCredits)},r.toggleTracklistCredits=function(){var e,a,s;e=t(this),a=r,s=parseInt(o.get("hide_tracklist_credits"),10)?0:1,a.$trackBlockquote.slideToggle("fast"),o.set("hide_tracklist_credits",s),i.track("release",s?"hide_credits":"show_credits"),e.html(s?n("Show Credits")():n("Hide Credits")())},a(function(){return r.init()}),r})},function(e,t,n){var i,o,r,a,s,l,c;i=n(2),r=n(3),o=n(11),s=n(6),c=n(4),l=n(10).getText,a=n(291),n(302),n(309),n(27),n(8),ds.define("youtubeVideoPlayer",function(e){var t,n,u,d,f,h,p,g,m,v,y,b,w,_,k,C,x;return g=e("layout"),x=e("youtubeIframeAPI"),w=e("ready"),t=e("Backbone"),b={},v=121,k=s["videos/macro:playlist"].slice(0,+v+1||9e9),y=3,m=3,u=!1,_=1e4,C=l("Some mobile devices will not allow playback until you first activate the YouTube player by tapping on it. If the video is not loading, refresh the page, then tap on the player."),d=void 0,p=function(){return i("html").hasClass("needs_reduced_ui")&&"mobile"===g.mode()},f=function(e){var t,n;return e=Number(e),t=Math.floor(e/60),n=String(((e-60*t)/100).toFixed(2)).slice(2,4)||"00",t+":"+n},b.formatDuration=f,h=function(){var e,t;return e=i("#youtube_player_placeholder"),this.$player=e,t=new o(function(t){if(1===e.length&&k.length>0)return e.parents(".video.toggle_section").hasClass("toggle_section_collapsed")?i(window).on("toggle_section_video:expanded.video_section",function(){i(window).off("toggle_section_video:expanded.video_section"),t(b)}):t(b)}),t.then(n)},b.init=h,w(function(){return b.init()}),n=function(){var e,n,l,h,g,v,w,T,S,$,A,D,E;b.current=k[0],$=void 0,S=new o(function(e){return $=e}),n=t.Model.extend({initialize:function(){return this.set("duration",f(this.get("duration"))),b.$player.on(this.id+":changed",r.bind(this.control,this))},defaults:{playing:!1},play:function(){var e,t;return e=this.get("id"),t=r.indexOf(r.pluck(k,"id"),e),e!==b.current.id?(S.then(function(e){return e.playVideoAt(t)}),b.current=e):S.then(function(e){return e.playVideo()}),this.set("playing",!0),this},pause:function(){return S.then(function(e){return e.pauseVideo()}),this.set("playing",!1),this},togglePlay:function(){return this.get("playing")?this.pause():this.play()},control:function(e,t){return this.set("playing",t===YT.PlayerState.PLAYING),this}}),e=t.Collection.extend({model:n}),E=b.tracks=new e,w=function(e){return function(){var t,n;return n=e*b.$tracklist.height(),t=this.$el.position().top-b.$tracklist.position().top,n>=t&&t>=0}},l=t.View.extend({initialize:function(){var e;e=this.model.get("id"),this.hasContent=!1,this.render(),this.$el.data("id",e),this.model.on("change",this.render,this),this.model.on("nodata",this.destroy,this),this.$el.onFastClick(r.bind(this.togglePlay,this))},tagName:"div",className:"youtube_track",template:r.template("<img src='<%= thumbnail %>' /> <i class='icon icon-play'></i> <i class='icon icon-pause'></i> <strong><%= title %></strong> <br /> <span class='youtube_track_duration'><%= duration %></span>"),destroy:function(){this.remove(),b.trackViews.splice(r(b.trackViews).indexOf(this),1)},renderContent:function(){var e;return e=this.$el,e.html(this.template(this.model.toJSON())),this.hasContent=!0,this.model.trigger("content:rendered"),this},render:function(){var e,t,n;return t=this.model.get("playing"),this.$el.toggleClass("youtube_track_paused",!t).toggleClass("youtube_track_playing",t),e=1===this.$el.closest("body").length,e&&(n=b.$tracklist.scrollTop()+(this.$el.position().top-b.$tracklist.position().top)-b.$tracklist.height()/2+this.$el.height()/2,t&&b.$tracklist.stop().animate({scrollTop:n},200)),this.hasContent||this.$el.append("<div class='youtube_track_placeholder' />"),!this.hasContent&&e&&this.visible()&&this.renderContent(),this},visible:w(1),nearViewport:w(3),togglePlay:function(){var e;this.model.togglePlay(),e=this.model.get("playing"),!e||u||d||(d=r.delay(function(){if(!u)return c.confirm(C()).then(function(){return p()&&(location.hash="video"),location.reload()})},_))}}),T=function(e){var t,n,i;u||(u=e.data===YT.PlayerState.PLAYING),i="function"==typeof(t=b.player).getVideoData?t.getVideoData().video_id:void 0,i&&(n=E.find(function(e){return e.get("id")!==i&&e.get("playing")}),n&&n.set("playing",!1),b.$player.trigger(i+":changed",[e.data]),D(e))},D=function(e){var t,n,i;n=s.pageObject.objectType,i=x.getPlayerState(e),t="video"+i,"playing"===i&&a.track(n,t)},g=function(){var e;return this.player||(e=new YT.Player("youtube_player_placeholder",{host:"http://www.youtube-nocookie.com",height:"100%",width:"100%",playerVars:{playlist:r.pluck(k,"id").join(","),loop:!0},events:{onReady:function(e){$(e.target)},onStateChange:T}}),S.then(function(e){return e.cuePlaylist(r.pluck(k,"id"))}),this.player=e),this.player},v=function(){var e;return b.$tracklist||(b.$tracklist=e=i("<div id='youtube_tracklist' />"),b.trackViews=E.map(function(t){var n;return n=new l({model:t}),e.append(n.$el),n}),i("#youtube_player_wrapper").after(e),A("nearViewport"),e.on("scroll.lazyloading_video_tracks",r.throttle(r.partial(A,"nearViewport"),75,{leading:!1})),E.on("change:playing",function(e,t){if(t&&p())return c.scrollTo("video")}),E.on("content:rendered",function(){if(r.every(b.trackViews,function(e){return e.hasContent}))return e.off("scroll.lazyloading_video_tracks")})),b.$tracklist},A=function(e){return r(h(e)).invoke("renderContent")},h=function(e){var t,n,i,o;for(i=y*m,o=[],n=b.trackViews.length,t=0;t<n&&o.length<i;)b.trackViews[t][e]()&&o.push(b.trackViews[t]),t+=1;return o},E.reset(k),x.load().then(r(g).bind(b)).then(r(v).bind(b))},b})},function(e,t,n){var i;i=n(291),ds.define("youtubemodal",function(e){var t,n,o,r;return t=e("$"),r=e("ready"),n=e("reactDialogs").makeReactDialog,o={},o.init=function(){return t("body").on("click",".youtube_modal_trigger",this.show),this.contentClass="youtube_modal_content",this.template="<div class='"+this.contentClass+"'><iframe type='text/html' src='https://www.youtube-nocookie.com/embed/{{ youtubeID }}' frameborder='0' width='853' height='505'></iframe></div>"},o.show=function(e){var r,a,s;r=t(this),s=r.data("youtube-id"),a=o.template,a=a.replace("{{ youtubeID }}",s),n({content:a,width:850,height:500,title:r.data("title")}),i.track(r.data("ga"),"quicklist_manual"),e.preventDefault()},r(function(){return o.init()}),o})},function(e,t,n){var i,o,r;n(27),n(316),i=n(2),r=ds.require("ready"),o={},o.onNextVisit=ds.require("onNextVisit"),o.LINK_ATTRIBUTION_MAP={"collection-tab-link":["Link Attribution","Clicked 'Collection' in user tabs"],"collection-user-link":["Link Attribution","Clicked 'Collection' in user menu"],"collection-marketplace-link":["Link Attribution","Clicked 'Items I Have' in MP header"]},o.check=function(e){var t,n,i,r,a,s,l,c,u;if(a=e.currentTarget.className.split(" "),a.length>0)for(s=0,c=a.length;s<c;s++)if(r=a[s],n=r.length>0&&o.LINK_ATTRIBUTION_MAP[r]){i=n[0],t=n[1],l=n[2],u=n[3],o.onNextVisit("analytics.track",i,t,l,u,!0);break}},r(function(){return i(document.body).on("click","a",o.check)}),e.exports=o}]);
//# sourceMappingURL=discogs.js.map