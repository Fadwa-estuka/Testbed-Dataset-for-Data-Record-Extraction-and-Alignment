!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var parentJsonpFunction=window.webpackJsonp;window.webpackJsonp=function(chunkIds,moreModules){for(var moduleId,chunkId,i=0,callbacks=[];i<chunkIds.length;i++)chunkId=chunkIds[i],installedChunks[chunkId]&&callbacks.push.apply(callbacks,installedChunks[chunkId]),installedChunks[chunkId]=0;for(moduleId in moreModules)modules[moduleId]=moreModules[moduleId];for(parentJsonpFunction&&parentJsonpFunction(chunkIds,moreModules);callbacks.length;)callbacks.shift().call(null,__webpack_require__)};var installedModules={},installedChunks={3:0};return __webpack_require__.e=function(chunkId,callback){if(0===installedChunks[chunkId])return callback.call(null,__webpack_require__);if(void 0!==installedChunks[chunkId])installedChunks[chunkId].push(callback);else{installedChunks[chunkId]=[callback];var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.charset="utf-8",script.async=!0,script.src=__webpack_require__.p+""+({4:"draft_submit"}[chunkId]||chunkId)+".6b0748367ddaf3fce9b8.js",head.appendChild(script)}},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="//cdn.ustatik.com/public/js/",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}__webpack_require__(170);var _subscriptions=__webpack_require__(171),_subscriptions2=_interopRequireDefault(_subscriptions),_Feed=__webpack_require__(173),_Feed2=_interopRequireDefault(_Feed),_notification=__webpack_require__(175),_notification2=_interopRequireDefault(_notification),_riotObservable=__webpack_require__(99),_riotObservable2=_interopRequireDefault(_riotObservable),_ShowMoreView=__webpack_require__(177),_ShowMoreView2=_interopRequireDefault(_ShowMoreView),_ProposedCorrectionsView=__webpack_require__(178),_ProposedCorrectionsView2=_interopRequireDefault(_ProposedCorrectionsView),_ActivityFeedView=__webpack_require__(179),_ActivityFeedView2=_interopRequireDefault(_ActivityFeedView),_MainPageTabSwitcher=__webpack_require__(182),_MainPageTabSwitcher2=_interopRequireDefault(_MainPageTabSwitcher),_TabView=__webpack_require__(183),_TabView2=_interopRequireDefault(_TabView),_mainContributorBlockTrack=__webpack_require__(185),_dom=__webpack_require__(4),_pageTypes=__webpack_require__(186),pageTypes=_interopRequireWildcard(_pageTypes);__webpack_require__(187),__webpack_require__(188),(0,_riotObservable2["default"])(window.UGAPP),window.UGAPP.notification=new _notification2["default"];var el_show_more_trigger=(0,_dom.qsAll)(".js-show-more-trigger"),el__proposed_corrections_container=(0,_dom.qs)(".js-proposed-corrections"),el_activity_feed=(0,_dom.qs)(".js-activity-feed-container"),el_activity_feed_count_item=el_activity_feed&&el_activity_feed.getAttribute("data-count"),$$subscriptions=(0,_dom.qs)(".js-feed-subscriptions"),$$feed=(0,_dom.qs)(".js-main-feed-container"),$$mainPage=(0,_dom.qs)(".js-main-content"),$$mainPageTabSwitchers=(0,_dom.qsAll)(".js-main-tab-switcher"),$$draftForm=(0,_dom.qs)(".js-submit-article");el_show_more_trigger&&el_show_more_trigger.map(function(el){return new _ShowMoreView2["default"](el)}),el__proposed_corrections_container&&new _ProposedCorrectionsView2["default"](el__proposed_corrections_container),el_activity_feed&&new _ActivityFeedView2["default"](el_activity_feed,el_activity_feed_count_item),$$subscriptions&&(0,_subscriptions2["default"])($$subscriptions),$$feed&&new _Feed2["default"]($$feed,$$mainPage),$$mainPageTabSwitchers.map(function(el){return new _MainPageTabSwitcher2["default"](el)}),pageTypes.TAB===window.UGAPP.config.contoller_id&&new _TabView2["default"],(0,_mainContributorBlockTrack.mainContributorBlockTrack)(),$$draftForm&&__webpack_require__.e(4,function(){var DraftSubmit=__webpack_require__(189)["default"];new DraftSubmit($$draftForm)})},function(module,exports){!function(self){"use strict";function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return support.iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){return body.bodyUsed?Promise.reject(new TypeError("Already read")):void(body.bodyUsed=!0)}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){if(this._bodyInit=body,body)if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body))this._bodyText=body.toString();else if(support.arrayBuffer&&support.blob&&isDataView(body))this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!support.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(body)&&!isArrayBufferView(body))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=bufferClone(body)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if("string"==typeof input)this.url=input;else{if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}if(this.credentials=options.credentials||this.credentials||"omit",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=normalizeMethod(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function parseHeaders(rawHeaders){var headers=new Headers;return rawHeaders.split("\r\n").forEach(function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}}),headers}function Response(bodyInit,options){options||(options={}),this.type="default",this.status="status"in options?options.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}if(!self.fetch){var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)},isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var list=this.map[name];list||(list=[],this.map[name]=list),list.push(value)},Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null},Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]},Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)},Headers.prototype.keys=function(){var items=[];return this.forEach(function(value,name){items.push(name)}),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach(function(value){items.push(value)}),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach(function(value,name){items.push([name,value])}),iteratorFor(items)},support.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1)throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})},self.Headers=Headers,self.Request=Request,self.Response=Response,self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init),xhr=new XMLHttpRequest;xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.open(request.method,request.url,!0),"include"===request.credentials&&(xhr.withCredentials=!0),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)}),xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})},self.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},,,function(module,exports){"use strict";function qs(query){var container=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return container.querySelector(query)}function qsAll(query){var container=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return[].slice.call(container.querySelectorAll(query))}exports.__esModule=!0,exports.qs=qs,exports.qsAll=qsAll},,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _assign=__webpack_require__(8),_assign2=_interopRequireDefault(_assign);exports["default"]=_assign2["default"]||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(9),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(10),module.exports=__webpack_require__(13).Object.assign},function(module,exports,__webpack_require__){var $export=__webpack_require__(11);$export($export.S+$export.F,"Object",{assign:__webpack_require__(26)})},function(module,exports,__webpack_require__){var global=__webpack_require__(12),core=__webpack_require__(13),ctx=__webpack_require__(14),hide=__webpack_require__(16),PROTOTYPE="prototype",$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports[PROTOTYPE],target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{})[PROTOTYPE];IS_GLOBAL&&(source=name);for(key in source)own=!IS_FORCED&&target&&void 0!==target[key],own&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F[PROTOTYPE]=C[PROTOTYPE],F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports){var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(15);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports,__webpack_require__){var dP=__webpack_require__(17),createDesc=__webpack_require__(25);module.exports=__webpack_require__(21)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(18),IE8_DOM_DEFINE=__webpack_require__(20),toPrimitive=__webpack_require__(24),dP=Object.defineProperty;exports.f=__webpack_require__(21)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(19);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(21)&&!__webpack_require__(22)(function(){return 7!=Object.defineProperty(__webpack_require__(23)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(22)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(19),document=__webpack_require__(12).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(19);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){"use strict";var getKeys=__webpack_require__(27),gOPS=__webpack_require__(42),pIE=__webpack_require__(43),toObject=__webpack_require__(44),IObject=__webpack_require__(31),$assign=Object.assign;module.exports=!$assign||__webpack_require__(22)(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},function(module,exports,__webpack_require__){var $keys=__webpack_require__(28),enumBugKeys=__webpack_require__(41);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var has=__webpack_require__(29),toIObject=__webpack_require__(30),arrayIndexOf=__webpack_require__(34)(!1),IE_PROTO=__webpack_require__(38)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(31),defined=__webpack_require__(33);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(32);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(30),toLength=__webpack_require__(35),toIndex=__webpack_require__(37);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if(value=O[index++],value!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(36),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(36),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},function(module,exports,__webpack_require__){var shared=__webpack_require__(39)("keys"),uid=__webpack_require__(40);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports,__webpack_require__){var global=__webpack_require__(12),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports){exports.f={}.propertyIsEnumerable},function(module,exports,__webpack_require__){var defined=__webpack_require__(33);module.exports=function(it){return Object(defined(it))}},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _defineProperty=__webpack_require__(47),_defineProperty2=_interopRequireDefault(_defineProperty);exports["default"]=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),(0,_defineProperty2["default"])(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}()},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(48),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(49);var $Object=__webpack_require__(13).Object;module.exports=function(it,key,desc){return $Object.defineProperty(it,key,desc)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(11);$export($export.S+$export.F*!__webpack_require__(21),"Object",{defineProperty:__webpack_require__(17).f})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function generateUUID(){var d=Date.now();window.performance&&"function"==typeof window.performance.now&&(d+=performance.now());var uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"==c?r:3&r|8).toString(16)});return uuid}exports.__esModule=!0,exports.identifyUser=exports.userFollowsLink=exports.userCanSeeElement=void 0;var _jsCookie=__webpack_require__(51),_jsCookie2=_interopRequireDefault(_jsCookie);exports.userCanSeeElement=function($$element,callback){var required_visible_share=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,sl=function sl(){requestAnimationFrame(function(){var rect=$$element.getBoundingClientRect(),visible_rect={top:Math.min(window.innerHeight,Math.max(0,rect.top)),bottom:Math.min(window.innerHeight,Math.max(0,rect.bottom)),left:Math.min(window.innerWidth,Math.max(0,rect.left)),right:Math.min(window.innerWidth,Math.max(0,rect.right))},vis_share=(visible_rect.bottom-visible_rect.top)*(visible_rect.right-visible_rect.left)/((rect.bottom-rect.top)*(rect.right-rect.left));vis_share>=required_visible_share&&(window.removeEventListener("scroll",sl),callback($$element))})};window.addEventListener("scroll",sl)},exports.userFollowsLink=function($$link,callback){$$link.addEventListener("click",function(e){callback(e);var currentTarget=e.currentTarget;2!==e.which&&(e.preventDefault(),setTimeout(function(){location.href=currentTarget.href},100))})},exports.identifyUser=function(){var wsm_trc_uuid=_jsCookie2["default"].get("wsm_trc_uuid");return wsm_trc_uuid||(wsm_trc_uuid=generateUUID(),_jsCookie2["default"].set("wsm_trc_uuid",wsm_trc_uuid,{expires:365,path:"/forum/",domain:""})),wsm_trc_uuid}},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(factory){var registeredInModuleLoader=!1;if(__WEBPACK_AMD_DEFINE_FACTORY__=factory,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)),registeredInModuleLoader=!0,module.exports=factory(),registeredInModuleLoader=!0,!registeredInModuleLoader){var OldCookies=window.Cookies,api=window.Cookies=factory();api.noConflict=function(){return window.Cookies=OldCookies,api}}}(function(){function extend(){for(var i=0,result={};i<arguments.length;i++){var attributes=arguments[i];for(var key in attributes)result[key]=attributes[key]}return result}function init(converter){function api(key,value,attributes){var result;if("undefined"!=typeof document){if(arguments.length>1){if(attributes=extend({path:"/"},api.defaults,attributes),"number"==typeof attributes.expires){var expires=new Date;expires.setMilliseconds(expires.getMilliseconds()+864e5*attributes.expires),attributes.expires=expires}try{result=JSON.stringify(value),/^[\{\[]/.test(result)&&(value=result)}catch(e){}return value=converter.write?converter.write(value,key):encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),key=encodeURIComponent(String(key)),key=key.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),key=key.replace(/[\(\)]/g,escape),document.cookie=[key,"=",value,attributes.expires?"; expires="+attributes.expires.toUTCString():"",attributes.path?"; path="+attributes.path:"",attributes.domain?"; domain="+attributes.domain:"",attributes.secure?"; secure":""].join("")}key||(result={});for(var cookies=document.cookie?document.cookie.split("; "):[],rdecode=/(%[0-9A-Z]{2})+/g,i=0;i<cookies.length;i++){var parts=cookies[i].split("="),cookie=parts.slice(1).join("=");'"'===cookie.charAt(0)&&(cookie=cookie.slice(1,-1));try{var name=parts[0].replace(rdecode,decodeURIComponent);if(cookie=converter.read?converter.read(cookie,name):converter(cookie,name)||cookie.replace(rdecode,decodeURIComponent),this.json)try{cookie=JSON.parse(cookie)}catch(e){}if(key===name){result=cookie;break}key||(result[name]=cookie)}catch(e){}}return result}}return api.set=api,api.get=function(key){return api.call(api,key)},api.getJSON=function(){return api.apply({json:!0},[].slice.call(arguments))},api.defaults={},api.remove=function(key,attributes){api(key,"",extend(attributes,{expires:-1}))},api.withConverter=init,api}return init(function(){})})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports.wsm=exports.metrica=void 0;var _extends2=__webpack_require__(7),_extends3=_interopRequireDefault(_extends2),_queryString=__webpack_require__(53);exports.metrica=function metrica(event){var id=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UGAPP.config.metricaId;if("complete"==document.readyState)try{window["yaCounter"+id].reachGoal(event)}catch(e){}else window.addEventListener("load",function(){return metrica(event)})},exports.wsm=function(url){var queryParams=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ua=navigator.userAgent,device="desktop";ua.match(/Android/i)?device="android":navigator.userAgent.match(/iPhone|iPod/i)?device="iphone":navigator.userAgent.match(/iPad/i)&&(device="ipad");var query=(0,_queryString.toQueryString)((0,_extends3["default"])({},queryParams,{device:device})),tracking_url="https://track.ultimate-guitar.com/"+url+query;"sendBeacon"in navigator?navigator.sendBeacon(tracking_url,{}):(new Image).src=tracking_url}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports.toQueryString=exports.parseQueryString=void 0;var _keys=__webpack_require__(54),_keys2=_interopRequireDefault(_keys),_extends2=__webpack_require__(7),_extends3=_interopRequireDefault(_extends2),generateParam=function(key,value,delimiter){return encodeURIComponent(key)+"="+encodeURIComponent(value)+delimiter},decodeQueryStingChain=function(chain){var _ref,_chain$split=chain.split("="),key=_chain$split[0],value=_chain$split[1];return"undefined"!=typeof value&&(value=decodeURIComponent(value)),_ref={},_ref[decodeURIComponent(key)]=value,_ref};exports.parseQueryString=function(string){return"?"===string[0]&&(string=string.substring(1)),string.split("&").map(decodeQueryStingChain).reduce(function(result,chain){return(0,
_extends3["default"])({},result,chain)},{})},exports.toQueryString=function(data){var needPrefix=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],delimiter=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&",queryString="";return data&&(needPrefix&&(queryString+="?"),(0,_keys2["default"])(data).forEach(function(key){Array.isArray(data[key])?data[key].forEach(function(item){var reqKey="[]"==key.slice(-2)?key:key+"[]";queryString+=generateParam(reqKey,item,delimiter)}):queryString+=generateParam(key,data[key],delimiter)}),queryString=queryString.slice(0,-1)),queryString}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(55),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(56),module.exports=__webpack_require__(13).Object.keys},function(module,exports,__webpack_require__){var toObject=__webpack_require__(44),$keys=__webpack_require__(27);__webpack_require__(57)("keys",function(){return function(it){return $keys(toObject(it))}})},function(module,exports,__webpack_require__){var $export=__webpack_require__(11),core=__webpack_require__(13),fails=__webpack_require__(22);module.exports=function(KEY,exec){var fn=(core.Object||{})[KEY]||Object[KEY],exp={};exp[KEY]=exec(fn),$export($export.S+$export.F*fails(function(){fn(1)}),"Object",exp)}},,,,,function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(63)(!0);__webpack_require__(64)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(36),defined=__webpack_require__(33);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):(a-55296<<10)+(b-56320)+65536)}}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(65),$export=__webpack_require__(11),redefine=__webpack_require__(66),hide=__webpack_require__(16),has=__webpack_require__(29),Iterators=__webpack_require__(67),$iterCreate=__webpack_require__(68),setToStringTag=__webpack_require__(72),getPrototypeOf=__webpack_require__(74),ITERATOR=__webpack_require__(73)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case KEYS:return function(){return new Constructor(this,kind)};case VALUES:return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES=DEFAULT==VALUES,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto[FF_ITERATOR]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)),IteratorPrototype!==Object.prototype&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis))),DEF_VALUES&&$native&&$native.name!==VALUES&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod(VALUES),keys:IS_SET?$default:getMethod(KEYS),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports){module.exports=!0},function(module,exports,__webpack_require__){module.exports=__webpack_require__(16)},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(69),descriptor=__webpack_require__(25),setToStringTag=__webpack_require__(72),IteratorPrototype={};__webpack_require__(16)(IteratorPrototype,__webpack_require__(73)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(18),dPs=__webpack_require__(70),enumBugKeys=__webpack_require__(41),IE_PROTO=__webpack_require__(38)("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var iframeDocument,iframe=__webpack_require__(23)("iframe"),i=enumBugKeys.length,lt="<",gt=">";for(iframe.style.display="none",__webpack_require__(71).appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write(lt+"script"+gt+"document.F=Object"+lt+"/script"+gt),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict[PROTOTYPE][enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty[PROTOTYPE]=anObject(O),result=new Empty,Empty[PROTOTYPE]=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports,__webpack_require__){var dP=__webpack_require__(17),anObject=__webpack_require__(18),getKeys=__webpack_require__(27);module.exports=__webpack_require__(21)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(12).document&&document.documentElement},function(module,exports,__webpack_require__){var def=__webpack_require__(17).f,has=__webpack_require__(29),TAG=__webpack_require__(73)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports,__webpack_require__){var store=__webpack_require__(39)("wks"),uid=__webpack_require__(40),Symbol=__webpack_require__(12).Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))};$exports.store=store},function(module,exports,__webpack_require__){var has=__webpack_require__(29),toObject=__webpack_require__(44),IE_PROTO=__webpack_require__(38)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports,__webpack_require__){__webpack_require__(76);for(var global=__webpack_require__(12),hide=__webpack_require__(16),Iterators=__webpack_require__(67),TO_STRING_TAG=__webpack_require__(73)("toStringTag"),collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(77),step=__webpack_require__(78),Iterators=__webpack_require__(67),toIObject=__webpack_require__(30);module.exports=__webpack_require__(64)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){module.exports=function(){}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},,,,,,,,,,,,function(module,exports,__webpack_require__){var pIE=__webpack_require__(43),createDesc=__webpack_require__(25),toIObject=__webpack_require__(30),toPrimitive=__webpack_require__(24),has=__webpack_require__(29),IE8_DOM_DEFINE=__webpack_require__(20),gOPD=Object.getOwnPropertyDescriptor;exports.f=__webpack_require__(21)?gOPD:function(O,P){if(O=toIObject(O),P=toPrimitive(P,!0),IE8_DOM_DEFINE)try{return gOPD(O,P)}catch(e){}if(has(O,P))return createDesc(!pIE.f.call(O,P),O[P])}},function(module,exports){},,,,,function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(97),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(98);var $Object=__webpack_require__(13).Object;module.exports=function(it,key){return $Object.getOwnPropertyDescriptor(it,key)}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(30),$getOwnPropertyDescriptor=__webpack_require__(90).f;__webpack_require__(57)("getOwnPropertyDescriptor",function(){return function(it,key){return $getOwnPropertyDescriptor(toIObject(it),key)}})},function(module,exports,__webpack_require__){!function(window,undefined){var observable=function(el){el=el||{};var callbacks={},slice=Array.prototype.slice;return Object.defineProperties(el,{on:{value:function(event,fn){return"function"==typeof fn&&(callbacks[event]=callbacks[event]||[]).push(fn),el},enumerable:!1,writable:!1,configurable:!1},off:{value:function(event,fn){if("*"!=event||fn)if(fn)for(var cb,arr=callbacks[event],i=0;cb=arr&&arr[i];++i)cb==fn&&arr.splice(i--,1);else delete callbacks[event];else callbacks={};return el},enumerable:!1,writable:!1,configurable:!1},one:{value:function(event,fn){function on(){el.off(event,on),fn.apply(el,arguments)}return el.on(event,on)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(event){var fns,fn,i,arglen=arguments.length-1,args=new Array(arglen);for(i=0;i<arglen;i++)args[i]=arguments[i+1];for(fns=slice.call(callbacks[event]||[],0),i=0;fn=fns[i];++i)fn.apply(el,args);return callbacks["*"]&&"*"!=event&&el.trigger.apply(el,["*",event].concat(args)),el},enumerable:!1,writable:!1,configurable:!1}}),el};module.exports=observable}("undefined"!=typeof window?window:void 0)},function(module,exports){"use strict";function checkAuth(){var needRegister=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(target,key,descriptor){var method=descriptor.value;return descriptor.value=function(){for(var _this=this,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return window.UGAPP.config.user.id?method.apply(this,args):(args[0]&&"function"==typeof args[0].preventDefault&&args[0].preventDefault(),"function"==typeof show_auth_layer?needRegister?show_auth_layer_on_registration(function(){return method.apply(_this,args)}):show_auth_layer(function(){return method.apply(_this,args)}):$(document).trigger("ugauth:login")),this},descriptor}}exports.__esModule=!0,exports.checkAuth=checkAuth},,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _stringify=__webpack_require__(124),_stringify2=_interopRequireDefault(_stringify),_promise=__webpack_require__(126),_promise2=_interopRequireDefault(_promise),_classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(46),_createClass3=_interopRequireDefault(_createClass2),_index=__webpack_require__(142),request=_interopRequireWildcard(_index),_request=__webpack_require__(145),user=window.UGAPP.config.user,thread=window.UGAPP.store.thread,MentionService=function(){function MentionService(type,id){(0,_classCallCheck3["default"])(this,MentionService),this.MAX_LOCAL_STORAGE=1e3,this.nodeUsersAndFriends=null,this.type=type,this.id=id,thread&&"thread"==this.type&&(this.id=thread.id)}return MentionService.prototype.save=function(user){var localUsers=this.localUsers;localUsers.indexOf(user)!==-1&&localUsers.splice(localUsers.indexOf(user),1),localUsers.unshift(user),this.localUsers=localUsers.slice(0,this.MAX_LOCAL_STORAGE)},MentionService.prototype.search=function(query){return request.get(this.url,{query:query})},MentionService.prototype.filterByText=function(text,arr){return arr.filter(function(el){return 0==el.value.toLowerCase().indexOf(text.toLowerCase())})},MentionService.prototype.filterDuplicate=function(arr){return arr.filter(function(thing,index,self){return self.findIndex(function(t){return t.value===thing.value})===index})},MentionService.prototype.getAll=function(text){return fetch(this.url+("?q="+text),this.params).then(_request.checkStatus).then(function(res){var result=[];if(res.info.all){var response=res.info.all;result=response.map(function(value){return{value:value}})}return _promise2["default"].resolve(result)})["catch"](function(error){return _promise2["default"].reject(error)})},MentionService.prototype.getNodeUsersAndFriends=function(type){var _this=this;if(this.nodeUsersAndFriends)return _promise2["default"].resolve(this.nodeUsersAndFriends);var node_id=this.id?"?o="+this.type+":"+this.id:"";return fetch(this.url+node_id,this.params).then(_request.checkStatus).then(function(res){var result=[].concat(res.info.node,res.info.friends).map(function(value){return{value:value}});return _this.nodeUsersAndFriends=result,result})["catch"](function(error){return _promise2["default"].reject(error)})},(0,_createClass3["default"])(MentionService,[{key:"params",get:function(){return{method:"GET",credentials:"same-origin"}}},{key:"url",get:function(){return"/user/autocomplete/get/"}},{key:"localKey",get:function(){return"ug_mention_ver2_"+user.id}},{key:"localUsers",get:function(){return JSON.parse(window.localStorage.getItem(this.localKey))||[]},set:function(userData){window.localStorage.setItem(this.localKey,(0,_stringify2["default"])(userData))}},{key:"savedMentions",get:function(){return this.localUsers.map(function(value){return{value:value}})}}]),MentionService}();exports["default"]=MentionService}).call(exports,__webpack_require__(123))},function(module,exports){(function(global){(function(){!function(self){"use strict";function normalizeName(name){if("string"!=typeof name&&(name=String(name)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name))throw new TypeError("Invalid character in header field name");return name.toLowerCase()}function normalizeValue(value){return"string"!=typeof value&&(value=String(value)),value}function iteratorFor(items){var iterator={next:function(){var value=items.shift();return{done:void 0===value,value:value}}};return support.iterable&&(iterator[Symbol.iterator]=function(){return iterator}),iterator}function Headers(headers){this.map={},headers instanceof Headers?headers.forEach(function(value,name){this.append(name,value)},this):headers&&Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}function consumed(body){return body.bodyUsed?Promise.reject(new TypeError("Already read")):void(body.bodyUsed=!0)}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsArrayBuffer(blob),promise}function readBlobAsText(blob){var reader=new FileReader,promise=fileReaderReady(reader);return reader.readAsText(blob),promise}function readArrayBufferAsText(buf){for(var view=new Uint8Array(buf),chars=new Array(view.length),i=0;i<view.length;i++)chars[i]=String.fromCharCode(view[i]);return chars.join("")}function bufferClone(buf){if(buf.slice)return buf.slice(0);var view=new Uint8Array(buf.byteLength);return view.set(new Uint8Array(buf)),view.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(body){if(this._bodyInit=body,body)if("string"==typeof body)this._bodyText=body;else if(support.blob&&Blob.prototype.isPrototypeOf(body))this._bodyBlob=body;else if(support.formData&&FormData.prototype.isPrototypeOf(body))this._bodyFormData=body;else if(support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body))this._bodyText=body.toString();else if(support.arrayBuffer&&support.blob&&isDataView(body))this._bodyArrayBuffer=bufferClone(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!support.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(body)&&!isArrayBufferView(body))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=bufferClone(body)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?consumed(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var rejected=consumed(this);if(rejected)return rejected;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if("string"==typeof input)this.url=input;else{if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,options.headers||(this.headers=new Headers(input.headers)),this.method=input.method,this.mode=input.mode,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}if(this.credentials=options.credentials||this.credentials||"omit",!options.headers&&this.headers||(this.headers=new Headers(options.headers)),this.method=normalizeMethod(options.method||this.method||"GET"),this.mode=options.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function decode(body){var form=new FormData;return body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("="),name=split.shift().replace(/\+/g," "),value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}}),form}function parseHeaders(rawHeaders){var headers=new Headers;return rawHeaders.split("\r\n").forEach(function(line){var parts=line.split(":"),key=parts.shift().trim();if(key){var value=parts.join(":").trim();headers.append(key,value)}}),headers}function Response(bodyInit,options){options||(options={}),this.type="default",this.status="status"in options?options.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in options?options.statusText:"OK",this.headers=new Headers(options.headers),this.url=options.url||"",this._initBody(bodyInit)}if(!self.fetch){var support={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isDataView=function(obj){return obj&&DataView.prototype.isPrototypeOf(obj)},isArrayBufferView=ArrayBuffer.isView||function(obj){return obj&&viewClasses.indexOf(Object.prototype.toString.call(obj))>-1};Headers.prototype.append=function(name,value){name=normalizeName(name),value=normalizeValue(value);var list=this.map[name];list||(list=[],this.map[name]=list),list.push(value)},Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]},Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null},Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]},Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))},Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]},Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)},Headers.prototype.keys=function(){var items=[];return this.forEach(function(value,name){items.push(name)}),iteratorFor(items)},Headers.prototype.values=function(){var items=[];return this.forEach(function(value){items.push(value)}),iteratorFor(items)},Headers.prototype.entries=function(){var items=[];return this.forEach(function(value,name){items.push([name,value])}),iteratorFor(items)},support.iterable&&(Headers.prototype[Symbol.iterator]=Headers.prototype.entries);var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];Request.prototype.clone=function(){return new Request(this,{body:this._bodyInit})},Body.call(Request.prototype),Body.call(Response.prototype),Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},Response.error=function(){var response=new Response(null,{status:0,statusText:""});return response.type="error",response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1)throw new RangeError("Invalid status code");return new Response(null,{status:status,headers:{location:url}})},self.Headers=Headers,self.Request=Request,self.Response=Response,self.fetch=function(input,init){return new Promise(function(resolve,reject){var request=new Request(input,init),xhr=new XMLHttpRequest;xhr.onload=function(){var options={status:xhr.status,statusText:xhr.statusText,headers:parseHeaders(xhr.getAllResponseHeaders()||"")};options.url="responseURL"in xhr?xhr.responseURL:options.headers.get("X-Request-URL");var body="response"in xhr?xhr.response:xhr.responseText;resolve(new Response(body,options))},xhr.onerror=function(){reject(new TypeError("Network request failed"))},xhr.ontimeout=function(){reject(new TypeError("Network request failed"))},xhr.open(request.method,request.url,!0),"include"===request.credentials&&(xhr.withCredentials=!0),"responseType"in xhr&&support.blob&&(xhr.responseType="blob"),request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)}),xhr.send("undefined"==typeof request._bodyInit?null:request._bodyInit)})},self.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),module.exports=global.fetch}).call(global)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(125),__esModule:!0}},function(module,exports,__webpack_require__){var core=__webpack_require__(13),$JSON=core.JSON||(core.JSON={stringify:JSON.stringify});module.exports=function(it){return $JSON.stringify.apply($JSON,arguments)}},function(module,exports,__webpack_require__){module.exports={"default":__webpack_require__(127),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(91),__webpack_require__(62),__webpack_require__(75),__webpack_require__(128),module.exports=__webpack_require__(13).Promise},function(module,exports,__webpack_require__){"use strict";var Internal,GenericPromiseCapability,Wrapper,LIBRARY=__webpack_require__(65),global=__webpack_require__(12),ctx=__webpack_require__(14),classof=__webpack_require__(129),$export=__webpack_require__(11),isObject=__webpack_require__(19),aFunction=__webpack_require__(15),anInstance=__webpack_require__(130),forOf=__webpack_require__(131),speciesConstructor=__webpack_require__(135),task=__webpack_require__(136).set,microtask=__webpack_require__(138)(),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode="process"==classof(process),empty=function(){},USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[__webpack_require__(73)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),sameConstructor=function(a,b){return a===b||a===$Promise&&b===Wrapper},isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},newPromiseCapability=function(C){return sameConstructor($Promise,C)?new PromiseCapability(C):new GenericPromiseCapability(C)},PromiseCapability=GenericPromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)},perform=function(exec){try{exec()}catch(e){return{error:e}}},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0,run=function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),handler===!0?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}};chain.length>i;)run(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var abrupt,handler,console,value=promise._v;if(isUnhandled(promise)&&(abrupt=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,abrupt)throw abrupt.error})},isUnhandled=function(promise){if(1==promise._h)return!1;for(var reaction,chain=promise._a||promise._c,i=0;chain.length>i;)if(reaction=chain[i++],reaction.fail||!isUnhandled(reaction.promise))return!1;return!0},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,promise=promise._w||promise,promise._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,PROMISE,"_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=__webpack_require__(139)($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},"catch":function(onRejected){return this.then(void 0,onRejected)}}),PromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),__webpack_require__(72)($Promise,PROMISE),__webpack_require__(140)(PROMISE),Wrapper=__webpack_require__(13)[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function(r){var capability=newPromiseCapability(this),$$reject=capability.reject;return $$reject(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(x){if(x instanceof $Promise&&sameConstructor(x.constructor,this))return x;var capability=newPromiseCapability(this),$$resolve=capability.resolve;return $$resolve(x),capability.promise}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(141)(function(iter){$Promise.all(iter)["catch"](empty)})),PROMISE,{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,abrupt=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return abrupt&&reject(abrupt.error),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,abrupt=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return abrupt&&reject(abrupt.error),capability.promise}})},function(module,exports,__webpack_require__){var cof=__webpack_require__(32),TAG=__webpack_require__(73)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=tryGet(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports){
module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(14),call=__webpack_require__(132),isArrayIter=__webpack_require__(133),anObject=__webpack_require__(18),toLength=__webpack_require__(35),getIterFn=__webpack_require__(134),BREAK={},RETURN={},exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if(result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]),result===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if(result=call(iterator,f,step.value,entries),result===BREAK||result===RETURN)return result};exports.BREAK=BREAK,exports.RETURN=RETURN},function(module,exports,__webpack_require__){var anObject=__webpack_require__(18);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator["return"];throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(67),ITERATOR=__webpack_require__(73)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(129),ITERATOR=__webpack_require__(73)("iterator"),Iterators=__webpack_require__(67);module.exports=__webpack_require__(13).getIteratorMethod=function(it){if(void 0!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(18),aFunction=__webpack_require__(15),SPECIES=__webpack_require__(73)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(14),invoke=__webpack_require__(137),html=__webpack_require__(71),cel=__webpack_require__(23),global=__webpack_require__(12),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==__webpack_require__(32)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(id){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){var global=__webpack_require__(12),macrotask=__webpack_require__(136).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(32)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(Observer){var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}else if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},function(module,exports,__webpack_require__){var hide=__webpack_require__(16);module.exports=function(target,src,safe){for(var key in src)safe&&target[key]?target[key]=src[key]:hide(target,key,src[key]);return target}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(12),core=__webpack_require__(13),dP=__webpack_require__(17),DESCRIPTORS=__webpack_require__(21),SPECIES=__webpack_require__(73)("species");module.exports=function(KEY){var C="function"==typeof core[KEY]?core[KEY]:global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(73)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter["return"]=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function get(action,payload){return new _promise2["default"](function(resolve,reject){window.fetch(""+_actions2["default"]["get_"+action]+(0,_queryString.toQueryString)(payload),{method:"GET",credentials:"same-origin"}).then(checkStatus).then(function(data){processData(data,resolve,reject)})["catch"](function(error){return reject(error)})})}function post(action,payload){var query=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,params={method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}};return payload&&(params.body=createBody(payload)),new _promise2["default"](function(resolve,reject){window.fetch(""+_actions2["default"]["post_"+action]+(0,_queryString.toQueryString)(query),params).then(checkStatus).then(function(data){processData(data,resolve,reject)})["catch"](function(error){return reject(error)})})}exports.__esModule=!0;var _promise=__webpack_require__(126),_promise2=_interopRequireDefault(_promise);exports.get=get,exports.post=post,__webpack_require__(1);var _actions=__webpack_require__(143),_actions2=_interopRequireDefault(_actions),_queryString=__webpack_require__(144),createBody=function(payload){var is=payload instanceof FormData;if(!is){var body=new FormData;for(var key in payload)body.append(key,payload[key]);return body}return payload},checkStatus=function(res){return res.status>=200&&res.status<300?res.json():_promise2["default"].reject(res.statusText)},processData=function(data,resolve,reject){"ok"==data.result||"success"==data.result?resolve(data.info):reject(data.info)}},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]={get_post_content:"/forum/post/get",get_threads_updates:"/user/updates/forumThread",get_edit_form:"/forum/post/get-form",post_post_html:"/forum/post/render",post_edit_post:"/forum/post/edit",post_reply_post:"/forum/post/create",post_poll_vote:"/forum/poll/vote",post_create_thread:"/forum/thread/process",post_update_thread:"/forum/thread/update",post_stick_thread:"/forum/thread/stick",post_un_stick_thread:"/forum/thread/un-stick",get_subscribe_forum:"/forum/subscribe/subscribe-forum",get_unsubscribe_forum:"/forum/subscribe/unsubscribe-forum",get_subscribe_thread:"/forum/subscribe/subscribe-thread",get_unsubscribe_thread:"/forum/subscribe/unsubscribe-thread",post_post_like:"/forum/post/like",post_post_unlike:"/forum/post/dislike",post_thread_rec_vote:"/forum/thread/recommendation-vote",get_thread_user_stats:"/forum/thread/top-users",post_hidden_threads:"/forum/subscribe/get-hidden-threads",post_create_tab_request:"/tab/tab-request/create",post_update_tab_request:"/tab/tab-request/update",post_create_preset_request:"/tab/preset-request/create",post_update_preset_request:"/tab/preset-request/update",get_delete_tab_request:"/forum/post/delete"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports.toQueryString=exports.parseQueryString=void 0;var _keys=__webpack_require__(54),_keys2=_interopRequireDefault(_keys),_extends2=__webpack_require__(7),_extends3=_interopRequireDefault(_extends2),generateParam=function(key,value){return encodeURIComponent(key)+"="+encodeURIComponent(value)+"&"},decodeQueryStingChain=function(chain){var _ref,_chain$split=chain.split("="),key=_chain$split[0],value=_chain$split[1];return"undefined"!=typeof value&&(value=decodeURIComponent(value)),_ref={},_ref[decodeURIComponent(key)]=value,_ref};exports.parseQueryString=function(string){return"?"===string[0]&&(string=string.substring(1)),string.split("&").map(decodeQueryStingChain).reduce(function(result,chain){return(0,_extends3["default"])({},result,chain)},{})},exports.toQueryString=function(data){var queryString="";return data&&(queryString+="?",(0,_keys2["default"])(data).forEach(function(key){Array.isArray(data[key])?data[key].forEach(function(item){queryString+=generateParam(key,item)}):queryString+=generateParam(key,data[key])}),queryString=queryString.slice(0,-1)),queryString}},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function get(action){var payload=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return processRequest(""+action+(0,_queryString.toQueryString)(payload),{method:"GET",credentials:"include"})}function post(action){var payload=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},query=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return processRequest(""+action+(0,_queryString.toQueryString)(query),{method:"POST",credentials:"include",body:createBody(payload)})}exports.__esModule=!0,exports.fetchProgress=exports.processData=exports.checkStatus=exports.createBody=void 0;var _promise=__webpack_require__(126),_promise2=_interopRequireDefault(_promise);exports.get=get,exports.post=post,__webpack_require__(146);var _queryString=__webpack_require__(53),_toFormData=__webpack_require__(147),createBody=exports.createBody=function(payload){return payload instanceof window.FormData?payload:(0,_toFormData.toFormData)(payload)},checkStatus=exports.checkStatus=function(res){return res.status>=200&&res.status<300||0==res.status?res.json():_promise2["default"].reject(res)},processData=exports.processData=function(data){return"ok"==data.result||"success"==data.result?_promise2["default"].resolve(data.info):_promise2["default"].reject(data.info)},processRequest=(exports.fetchProgress=function(url){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},onProgress=arguments[2];return new _promise2["default"](function(resolve,reject){var xhr=new XMLHttpRequest;xhr.open(opts.method||"get",url);for(var k in opts.headers||{})xhr.setRequestHeader(k,opts.headers[k]);xhr.onreadystatechange=function(){4==xhr.readyState&&(200!=xhr.status?reject():resolve(xhr.responseText))},xhr.onerror=reject,xhr.upload&&onProgress&&(xhr.upload.onprogress=onProgress),xhr.send(opts.body)})},function(url,params){return fetch(url,params).then(checkStatus).then(processData)})}).call(exports,__webpack_require__(123))},function(module,exports){(function(global){"use strict";!function(w){function FormData(){this.fake=!0,this.boundary="--------FormData"+Math.random(),this._fields=[]}w.FormData||(FormData.prototype.append=function(key,value){this._fields.push([key,value])},FormData.prototype.toString=function(){var boundary=this.boundary,body="";return this._fields.forEach(function(field){if(body+="--"+boundary+"\r\n",field[1].name){var file=field[1];body+='Content-Disposition: form-data; name="'+field[0]+'"; filename="'+file.name+'"\r\n',body+="Content-Type: "+file.type+"\r\n\r\n",body+=file.getAsBinary()+"\r\n"}else body+='Content-Disposition: form-data; name="'+field[0]+'";\r\n\r\n',body+=field[1]+"\r\n"}),body+="--"+boundary+"--"},w.FormData=FormData)}(global)}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";function getType(any){return toString.call(any).slice(8,-1)}function toName(path){var array=map.call(path,function(value){return"["+value+"]"});return array[0]=path[0],array.join("")}function toFormData(object){if(!isSupported)throw new Error("toFormData does't supported");var form=new window.FormData,cb=function(node,value,key,path){var type=getType(value);switch(type){case"Array":break;case"Object":break;case"FileList":return forEach.call(value,function(item,index){form.append(toName(path.concat(index)),item)}),!0;case"File":return form.append(toName(path),value),!0;case"Blob":return form.append(toName(path),value,value.name),!0;default:return form.append(toName(path),value),!0}};return(0,_traverce.traverse)(object,cb,null,null,!0),form}exports.__esModule=!0,exports.toFormData=toFormData;var _traverce=__webpack_require__(148),_window=window,Blob=_window.Blob,File=_window.File,FileList=_window.FileList,FormData=_window.FormData,isSupported=Blob&&File&&FileList&&FormData,toString=Object.prototype.toString,_Array$prototype=Array.prototype,forEach=_Array$prototype.forEach,map=_Array$prototype.map},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function isObject(any){return any instanceof Object}function isNumber(any){return"number"==typeof any&&!isNaN(any)}function walk(object,cb,ctx,mode,ignore,max){var stack=[[],0,getKeys(object),object],cache=[];do{var node=stack.pop(),keys=stack.pop(),depth=stack.pop(),path=stack.pop();for(cache.push(node);keys[0];){var key=keys.shift(),value=node[key],way=path.concat(key),strategy=cb.call(ctx,node,value,key,way,depth);if(strategy!==!0){if(strategy===!1){stack.length=0;break}if(!(max<=depth)&&isObject(value)){if(cache.indexOf(value)!==-1){if(ignore)continue;throw new Error("Circular reference")}if(!mode){stack.push(path,depth,keys,node),stack.push(way,depth+1,getKeys(value),value);break}stack.unshift(way,depth+1,getKeys(value),value)}}}}while(stack[0]);return object}function traverse(object,callback,context,mode,ignoreCircularReferences,maxDepth){var cb=callback,ctx=context,_mode=1===mode,ignore=!!ignoreCircularReferences,max=isNumber(maxDepth)?maxDepth:MAX_DEPTH;return walk(object,cb,ctx,_mode,ignore,max)}exports.__esModule=!0;var _keys=__webpack_require__(54),_keys2=_interopRequireDefault(_keys);exports.traverse=traverse;var MAX_DEPTH=100,getKeys=_keys2["default"],isNaN=window.isNaN},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _promise=__webpack_require__(126),_promise2=_interopRequireDefault(_promise),_classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_bbCode=__webpack_require__(150),_bbCode2=_interopRequireDefault(_bbCode),_track=__webpack_require__(52),_metrica_event_list=__webpack_require__(151),_tributejs=__webpack_require__(152),_tributejs2=_interopRequireDefault(_tributejs),MentionComponent=function(){function MentionComponent($$input,$$slot,mentionService){(0,_classCallCheck3["default"])(this,MentionComponent),this.MIN_REMOTE_SEARCH_LENGTH=1,this.MAX_RESULTS=5,this.first=!0,this.noResults=!1,this.lastSearchLength=0,this.isActive=!1,this.results=[],this.$$input=$$input,this.$$slot=$$slot,this.mentionService=mentionService,this.init(),this.addEventListeners()}return MentionComponent.prototype.init=function(){var _this=this;this.autocomplete=new _tributejs2["default"]({menuContainer:this.$$slot,selectTemplate:function(item){return _this.onInsertUserBBCode(item.original.value)},values:this.onSearch.bind(this),lookup:"value",allowSpaces:!0}),this.autocomplete.attach(this.$$input)},MentionComponent.prototype.addEventListeners=function(){this.$$input.addEventListener("keydown",this.onKeyDown.bind(this))},MentionComponent.prototype.onKeyDown=function(e){27==e.keyCode&&this.isActive&&!this.autocomplete.isActive&&(0,_track.metrica)(_metrica_event_list.metrica_events.mention_ui_cancel),this.isActive=this.autocomplete.isActive},MentionComponent.prototype.onInsertUserBBCode=function(user){return(0,_track.metrica)(_metrica_event_list.metrica_events.mention_ui_select),this.first=!0,this.mentionService.save(user),_bbCode2["default"].wrap(user,"user")},MentionComponent.prototype.onSearch=function(search,cb){var _this2=this;this.search(search).then(function(users){return _this2.processUsersOnSearch(users,search)}).then(cb),this.isActive||!this.autocomplete.isActive||this.noResults||search||((0,_track.metrica)(_metrica_event_list.metrica_events.mention_ui_show),this.isActive=!0)},MentionComponent.prototype.processUsersOnSearch=function(users,search){var suggest=this.results;return search&&(suggest=this.mentionService.filterByText(search,suggest)),this.mentionService.filterDuplicate(suggest).slice(0,this.MAX_RESULTS)},MentionComponent.prototype.checkLastSearch=function(search){search?(search.length<this.lastSearchLength&&(this.noResults=!1),this.lastSearchLength=search.length):(this.lastSearchLength=0,this.noResults=!1)},MentionComponent.prototype.search=function(_search){return this.checkLastSearch(_search),_search?this.onNotEmptySearch(_search):this.onEmptySearch()},MentionComponent.prototype.onNotEmptySearch=function(search){var _this3=this;return this.noResults?_promise2["default"].resolve(this.results):this.mentionService.getAll(search).then(function(res){return res.length||(_this3.noResults=!0,(0,_track.metrica)(_metrica_event_list.metrica_events.mention_ui_not_found)),_this3.results=[].concat(_this3.results,res),_promise2["default"].resolve(_this3.results)})},MentionComponent.prototype.onEmptySearch=function(){var _this4=this;return this.first?(this.results=this.mentionService.savedMentions,this.first=!1,this.mentionService.getNodeUsersAndFriends(this.type).then(function(res){return _this4.results=[].concat(_this4.results,res),_promise2["default"].resolve(_this4.results)})):_promise2["default"].resolve(this.results)},MentionComponent}();exports["default"]=MentionComponent},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]={wrap:function(item,code){return"["+code.toUpperCase()+"]"+item+"[/"+code.toUpperCase()+"]"}}},function(module,exports){"use strict";exports.__esModule=!0;exports.metrica_events={mention_ui_select:"MENTION_UI_SELECT",mention_ui_cancel:"MENTION_UI_CANCEL",mention_ui_show:"MENTION_UI_SHOW",mention_ui_not_found:"MENTION_UI_NOT_FOUND",mention_ui_compact_click:"MENTION_UI_COMPACT_CLICK",mention_ui_advanced_click:"MENTION_UI_ADVANCED_CLICK"}},function(module,exports,__webpack_require__){var require,require;!function(f){module.exports=f()}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();require("./utils");var _TributeEvents=require("./TributeEvents"),_TributeEvents2=_interopRequireDefault(_TributeEvents),_TributeMenuEvents=require("./TributeMenuEvents"),_TributeMenuEvents2=_interopRequireDefault(_TributeMenuEvents),_TributeRange=require("./TributeRange"),_TributeRange2=_interopRequireDefault(_TributeRange),_TributeSearch=require("./TributeSearch"),_TributeSearch2=_interopRequireDefault(_TributeSearch),Tribute=function(){function Tribute(_ref){var _this=this,_ref$values=_ref.values,values=void 0===_ref$values?null:_ref$values,_ref$iframe=_ref.iframe,iframe=void 0===_ref$iframe?null:_ref$iframe,_ref$selectClass=_ref.selectClass,selectClass=void 0===_ref$selectClass?"highlight":_ref$selectClass,_ref$trigger=_ref.trigger,trigger=void 0===_ref$trigger?"@":_ref$trigger,_ref$selectTemplate=_ref.selectTemplate,selectTemplate=void 0===_ref$selectTemplate?null:_ref$selectTemplate,_ref$menuItemTemplate=_ref.menuItemTemplate,menuItemTemplate=void 0===_ref$menuItemTemplate?null:_ref$menuItemTemplate,_ref$lookup=_ref.lookup,lookup=void 0===_ref$lookup?"key":_ref$lookup,_ref$fillAttr=_ref.fillAttr,fillAttr=void 0===_ref$fillAttr?"value":_ref$fillAttr,_ref$collection=_ref.collection,collection=void 0===_ref$collection?null:_ref$collection,_ref$menuContainer=_ref.menuContainer,menuContainer=void 0===_ref$menuContainer?null:_ref$menuContainer,_ref$noMatchTemplate=_ref.noMatchTemplate,noMatchTemplate=void 0===_ref$noMatchTemplate?null:_ref$noMatchTemplate,_ref$requireLeadingSp=_ref.requireLeadingSpace,requireLeadingSpace=void 0===_ref$requireLeadingSp||_ref$requireLeadingSp,_ref$allowSpaces=_ref.allowSpaces,allowSpaces=void 0!==_ref$allowSpaces&&_ref$allowSpaces;if(_classCallCheck(this,Tribute),this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=menuContainer,this.allowSpaces=allowSpaces,values)this.collection=[{trigger:trigger,iframe:iframe,selectClass:selectClass,selectTemplate:(selectTemplate||Tribute.defaultSelectTemplate).bind(this),menuItemTemplate:(menuItemTemplate||Tribute.defaultMenuItemTemplate).bind(this),noMatchTemplate:function(t){return"function"==typeof t?t.bind(_this):null}(noMatchTemplate),lookup:lookup,fillAttr:fillAttr,values:values,requireLeadingSpace:requireLeadingSpace}];else{if(!collection)throw new Error("[Tribute] No collection specified.");this.collection=collection.map(function(item){return{trigger:item.trigger||trigger,iframe:item.iframe||iframe,selectClass:item.selectClass||selectClass,selectTemplate:(item.selectTemplate||Tribute.defaultSelectTemplate).bind(_this),menuItemTemplate:(item.menuItemTemplate||Tribute.defaultMenuItemTemplate).bind(_this),noMatchTemplate:function(t){return"function"==typeof t?t.bind(_this):null}(noMatchTemplate),lookup:item.lookup||lookup,fillAttr:item.fillAttr||fillAttr,values:item.values,requireLeadingSpace:item.requireLeadingSpace}})}new _TributeRange2["default"](this),new _TributeEvents2["default"](this),new _TributeMenuEvents2["default"](this),new _TributeSearch2["default"](this)}return _createClass(Tribute,[{key:"triggers",value:function(){return this.collection.map(function(config){return config.trigger})}},{key:"attach",value:function(el){if(!el)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if("undefined"!=typeof jQuery&&el instanceof jQuery&&(el=el.get()),el.constructor===NodeList||el.constructor===HTMLCollection||el.constructor===Array)for(var length=el.length,i=0;i<length;++i)this._attach(el[i]);else this._attach(el)}},{key:"_attach",value:function(el){el.hasAttribute("data-tribute"),this.ensureEditable(el),this.events.bind(el),el.setAttribute("data-tribute",!0)}},{key:"ensureEditable",value:function(element){if(Tribute.inputTypes().indexOf(element.nodeName)===-1){if(!element.contentEditable)throw new Error("[Tribute] Cannot bind to "+element.nodeName);element.contentEditable=!0}}},{key:"createMenu",value:function(){var wrapper=this.range.getDocument().createElement("div"),ul=this.range.getDocument().createElement("ul");return wrapper.className="tribute-container",wrapper.appendChild(ul),this.menuContainer?this.menuContainer.appendChild(wrapper):this.range.getDocument().body.appendChild(wrapper)}},{key:"showMenuFor",value:function(element,scrollTo){var _this2=this;if(!this.isActive||this.current.element!==element||this.current.mentionText!==this.currentMentionTextSnapshot){this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(),this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");var processValues=function(values){if(_this2.isActive){var items=_this2.search.filter(_this2.current.mentionText,values,{pre:"<span>",post:"</span>",extract:function(el){if("string"==typeof _this2.current.collection.lookup)return el[_this2.current.collection.lookup];if("function"==typeof _this2.current.collection.lookup)return _this2.current.collection.lookup(el);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});_this2.current.filteredItems=items;var ul=_this2.menu.querySelector("ul");if(!items.length){var noMatchEvent=new CustomEvent("tribute-no-match",{detail:_this2.menu});return _this2.current.element.dispatchEvent(noMatchEvent),void(_this2.current.collection.noMatchTemplate?ul.innerHTML=_this2.current.collection.noMatchTemplate():_this2.hideMenu())}ul.innerHTML="",items.forEach(function(item,index){var li=_this2.range.getDocument().createElement("li");li.setAttribute("data-index",index),li.addEventListener("mouseenter",function(e){var li=e.target,index=li.getAttribute("data-index");_this2.events.setActiveLi(index)}),_this2.menuSelected===index&&(li.className=_this2.current.collection.selectClass),li.innerHTML=_this2.current.collection.menuItemTemplate(item),ul.appendChild(li)}),_this2.range.positionMenuAtCaret(scrollTo)}};"function"==typeof this.current.collection.values?this.current.collection.values(this.current.mentionText,processValues):processValues(this.current.collection.values)}}},{key:"hideMenu",value:function(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}},{key:"selectItemAtIndex",value:function(index){if(index=parseInt(index),"number"==typeof index){var item=this.current.filteredItems[index],content=this.current.collection.selectTemplate(item);this.replaceText(content)}}},{key:"replaceText",value:function(content){this.range.replaceTriggerText(content,!0,!0)}},{key:"_append",value:function(collection,newValues,replace){if("function"==typeof collection.values)throw new Error("Unable to append to values, as it is a function.");replace?collection.values=newValues:collection.values=collection.values.concat(newValues)}},{key:"append",value:function(collectionIndex,newValues,replace){var index=parseInt(collectionIndex);if("number"!=typeof index)throw new Error("please provide an index for the collection to update.");var collection=this.collection[index];this._append(collection,newValues,replace)}},{key:"appendCurrent",value:function(newValues,replace){if(!this.isActive)throw new Error("No active state. Please use append instead and pass an index.");this._append(this.current.collection,newValues,replace)}}],[{key:"defaultSelectTemplate",value:function(item){return this.current.collection.trigger+item.original[this.current.collection.fillAttr]}},{key:"defaultMenuItemTemplate",value:function(matchItem){return matchItem.string}},{key:"inputTypes",value:function(){return["TEXTAREA","INPUT"]}}]),Tribute}();exports["default"]=Tribute,module.exports=exports["default"]},{"./TributeEvents":2,"./TributeMenuEvents":3,"./TributeRange":4,"./TributeSearch":5,"./utils":7}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TributeEvents=function(){function TributeEvents(tribute){_classCallCheck(this,TributeEvents),this.tribute=tribute,this.tribute.events=this}return _createClass(TributeEvents,[{key:"bind",value:function(element){element.addEventListener("keydown",this.keydown.bind(element,this),!1),element.addEventListener("keyup",this.keyup.bind(element,this),!1),element.addEventListener("input",this.input.bind(element,this),!1)}},{key:"keydown",value:function(instance,event){instance.shouldDeactivate(event)&&(instance.tribute.isActive=!1);var element=this;instance.commandEvent=!1,TributeEvents.keys().forEach(function(o){o.key===event.keyCode&&(instance.commandEvent=!0,instance.callbacks()[o.value.toLowerCase()](event,element))})}},{key:"input",value:function(instance,event){instance.inputEvent=!0,instance.keyup.call(this,instance,event)}},{key:"click",value:function(instance,event){var tribute=instance.tribute;if(tribute.menu&&tribute.menu.contains(event.target)){for(var li=event.target;"li"!==li.nodeName.toLowerCase();)if(li=li.parentNode,!li||li===tribute.menu)throw new Error("cannot find the <li> container for the click");tribute.selectItemAtIndex(li.getAttribute("data-index")),tribute.hideMenu()}else tribute.current.element&&tribute.hideMenu()}},{key:"keyup",value:function(instance,event){var _this=this;if(instance.inputEvent&&(instance.inputEvent=!1),instance.updateSelection(this),27!==event.keyCode){if(!instance.tribute.isActive){var _ret=function(){var keyCode=instance.getKeyCode(instance,_this,event);if(isNaN(keyCode))return{v:void 0};var trigger=instance.tribute.triggers().find(function(trigger){return trigger.charCodeAt(0)===keyCode});"undefined"!=typeof trigger&&instance.callbacks().triggerChar(event,_this,trigger)}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}(instance.tribute.current.trigger&&instance.commandEvent===!1||instance.tribute.isActive&&8===event.keyCode)&&instance.tribute.showMenuFor(this,!0);
}}},{key:"shouldDeactivate",value:function(event){if(!this.tribute.isActive)return!1;if(0===this.tribute.current.mentionText.length){var eventKeyPressed=!1;return TributeEvents.keys().forEach(function(o){event.keyCode===o.key&&(eventKeyPressed=!0)}),!eventKeyPressed}return!1}},{key:"getKeyCode",value:function(instance,el,event){var tribute=instance.tribute,info=tribute.range.getTriggerInfo(!1,!1,!0,tribute.allowSpaces);return!!info&&info.mentionTriggerChar.charCodeAt(0)}},{key:"updateSelection",value:function(el){this.tribute.current.element=el;var info=this.tribute.range.getTriggerInfo(!1,!1,!0,this.tribute.allowSpaces);info&&(this.tribute.current.selectedPath=info.mentionSelectedPath,this.tribute.current.mentionText=info.mentionText,this.tribute.current.selectedOffset=info.mentionSelectedOffset)}},{key:"callbacks",value:function(){var _this2=this;return{triggerChar:function(e,el,trigger){var tribute=_this2.tribute;tribute.current.trigger=trigger;var collectionItem=tribute.collection.find(function(item){return item.trigger===trigger});tribute.current.collection=collectionItem,tribute.inputEvent&&tribute.showMenuFor(el,!0)},enter:function(e,el){_this2.tribute.isActive&&(e.preventDefault(),setTimeout(function(){_this2.tribute.selectItemAtIndex(_this2.tribute.menuSelected),_this2.tribute.hideMenu()},0))},escape:function(e,el){_this2.tribute.isActive&&(e.preventDefault(),_this2.tribute.hideMenu())},tab:function(e,el){_this2.callbacks().enter(e,el)},up:function(e,el){if(_this2.tribute.isActive){e.preventDefault();var count=_this2.tribute.current.filteredItems.length,selected=_this2.tribute.menuSelected;count>selected&&selected>0&&(_this2.tribute.menuSelected--,_this2.setActiveLi())}},down:function(e,el){if(_this2.tribute.isActive){e.preventDefault();var count=_this2.tribute.current.filteredItems.length-1,selected=_this2.tribute.menuSelected;count>selected&&(_this2.tribute.menuSelected++,_this2.setActiveLi())}},"delete":function(e,el){_this2.tribute.isActive&&_this2.tribute.current.mentionText.length<1?_this2.tribute.hideMenu():_this2.tribute.isActive&&_this2.tribute.showMenuFor(el)}}}},{key:"setActiveLi",value:function(index){var lis=this.tribute.menu.querySelectorAll("li"),length=lis.length>>>0;index&&(this.tribute.menuSelected=index);for(var i=0;i<length;i++){var li=lis[i];i===this.tribute.menuSelected?li.className=this.tribute.current.collection.selectClass:li.className=""}}}],[{key:"keys",value:function(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}}]),TributeEvents}();exports["default"]=TributeEvents,module.exports=exports["default"]},{}],3:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TributeMenuEvents=function(){function TributeMenuEvents(tribute){_classCallCheck(this,TributeMenuEvents),this.tribute=tribute,this.tribute.menuEvents=this,this.menu=this.tribute.menu}return _createClass(TributeMenuEvents,[{key:"bind",value:function(menu){var _this=this;menu.addEventListener("keydown",this.tribute.events.keydown.bind(this.menu,this),!1),this.tribute.range.getDocument().addEventListener("click",this.tribute.events.click.bind(null,this),!1),window.addEventListener("resize",this.debounce(function(){_this.tribute.isActive&&_this.tribute.showMenuFor(_this.tribute.current.element,!0)},300,!1)),this.menuContainer?this.menuContainer.addEventListener("scroll",this.debounce(function(){_this.tribute.isActive&&_this.tribute.showMenuFor(_this.tribute.current.element,!1)},300,!1),!1):window.onscroll=this.debounce(function(){_this.tribute.isActive&&_this.tribute.showMenuFor(_this.tribute.current.element,!1)},300,!1)}},{key:"debounce",value:function(func,wait,immediate){var timeout,_this2=this,_arguments=arguments;return function(){var context=_this2,args=_arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}}}]),TributeMenuEvents}();exports["default"]=TributeMenuEvents,module.exports=exports["default"]},{}],4:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TributeRange=function(){function TributeRange(tribute){_classCallCheck(this,TributeRange),this.tribute=tribute,this.tribute.range=this}return _createClass(TributeRange,[{key:"getDocument",value:function(){var iframe=void 0;return this.tribute.current.collection&&(iframe=this.tribute.current.collection.iframe),iframe?iframe.contentWindow.document:document}},{key:"positionMenuAtCaret",value:function(scrollTo){var _this=this,context=this.tribute.current,coordinates=void 0,info=this.getTriggerInfo(!1,!1,!0,this.tribute.allowSpaces);void 0!==info?(coordinates=this.isContentEditable(context.element)?this.getContentEditableCaretPosition(info.mentionPosition):this.getTextAreaOrInputUnderlinePosition(this.getDocument().activeElement,info.mentionPosition),this.tribute.menu.style.cssText="top: "+coordinates.top+"px;\n                                       left: "+coordinates.left+"px;\n                                       position: absolute;\n                                       zIndex: 10000;\n                                       display: block;",setTimeout(function(){scrollTo&&_this.scrollIntoView(_this.getDocument().activeElement)},0)):this.tribute.menu.style.cssText="display: none"}},{key:"selectElement",value:function(targetElement,path,offset){var range=void 0,elem=targetElement;if(path)for(var i=0;i<path.length;i++){if(elem=elem.childNodes[path[i]],void 0===elem)return;for(;elem.length<offset;)offset-=elem.length,elem=elem.nextSibling;0!==elem.childNodes.length||elem.length||(elem=elem.previousSibling)}var sel=this.getWindowSelection();range=this.getDocument().createRange(),range.setStart(elem,offset),range.setEnd(elem,offset),range.collapse(!0);try{sel.removeAllRanges()}catch(error){}sel.addRange(range),targetElement.focus()}},{key:"resetSelection",value:function(targetElement,path,offset){this.isContentEditable(targetElement)?this.selectElement(targetElement,path,offset):targetElement!==this.getDocument().activeElement&&targetElement.focus()}},{key:"replaceTriggerText",value:function(text,requireLeadingSpace,hasTrailingSpace){var context=this.tribute.current;this.resetSelection(context.element,context.selectedPath,context.selectedOffset);var info=this.getTriggerInfo(!0,hasTrailingSpace,requireLeadingSpace,this.tribute.allowSpaces),replaceEvent=new CustomEvent("tribute-replaced",{detail:text});if(void 0!==info){if(this.isContentEditable(context.element))text+="",this.pasteHtml(text,info.mentionPosition,info.mentionPosition+info.mentionText.length+1);else{var myField=this.getDocument().activeElement;text+=" ";var startPos=info.mentionPosition,endPos=info.mentionPosition+info.mentionText.length+1;myField.value=myField.value.substring(0,startPos)+text+myField.value.substring(endPos,myField.value.length),myField.selectionStart=startPos+text.length,myField.selectionEnd=startPos+text.length}context.element.dispatchEvent(replaceEvent)}}},{key:"pasteHtml",value:function(html,startPos,endPos){var range=void 0,sel=void 0;sel=this.getWindowSelection(),range=this.getDocument().createRange(),range.setStart(sel.anchorNode,startPos),range.setEnd(sel.anchorNode,endPos),range.deleteContents();var el=this.getDocument().createElement("div");el.innerHTML=html;for(var frag=this.getDocument().createDocumentFragment(),node=void 0,lastNode=void 0;node=el.firstChild;)lastNode=frag.appendChild(node);range.insertNode(frag),lastNode&&(range=range.cloneRange(),range.setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))}},{key:"getWindowSelection",value:function(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}},{key:"getNodePositionInParent",value:function(element){if(null===element.parentNode)return 0;for(var i=0;i<element.parentNode.childNodes.length;i++){var node=element.parentNode.childNodes[i];if(node===element)return i}}},{key:"getContentEditableSelectedPath",value:function(){var sel=this.getWindowSelection(),selected=sel.anchorNode,path=[],offset=void 0;if(null!=selected){for(var i=void 0,ce=selected.contentEditable;null!==selected&&"true"!==ce;)i=this.getNodePositionInParent(selected),path.push(i),selected=selected.parentNode,null!==selected&&(ce=selected.contentEditable);return path.reverse(),offset=sel.getRangeAt(0).startOffset,{selected:selected,path:path,offset:offset}}}},{key:"getTextPrecedingCurrentSelection",value:function(){var context=this.tribute.current,text=void 0;if(this.isContentEditable(context.element)){var selectedElem=this.getWindowSelection().anchorNode;if(null!=selectedElem){var workingNodeContent=selectedElem.textContent,selectStartOffset=this.getWindowSelection().getRangeAt(0).startOffset;selectStartOffset>=0&&(text=workingNodeContent.substring(0,selectStartOffset))}}else{var textComponent=this.getDocument().activeElement,startPos=textComponent.selectionStart;text=textComponent.value.substring(0,startPos)}return text}},{key:"getTriggerInfo",value:function(menuAlreadyActive,hasTrailingSpace,requireLeadingSpace,allowSpaces){var _this2=this,ctx=this.tribute.current,selected=void 0,path=void 0,offset=void 0;if(this.isContentEditable(ctx.element)){var selectionInfo=this.getContentEditableSelectedPath();selectionInfo&&(selected=selectionInfo.selected,path=selectionInfo.path,offset=selectionInfo.offset)}else selected=this.getDocument().activeElement;var effectiveRange=this.getTextPrecedingCurrentSelection();if(void 0!==effectiveRange&&null!==effectiveRange){var _ret=function(){var mostRecentTriggerCharPos=-1,triggerChar=void 0;if(_this2.tribute.collection.forEach(function(config){var c=config.trigger,idx=effectiveRange.lastIndexOf(c);idx>mostRecentTriggerCharPos&&(mostRecentTriggerCharPos=idx,triggerChar=c,requireLeadingSpace=config.requireLeadingSpace)}),mostRecentTriggerCharPos>=0&&(0===mostRecentTriggerCharPos||!requireLeadingSpace||/[\xA0\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos-1,mostRecentTriggerCharPos)))){var currentTriggerSnippet=effectiveRange.substring(mostRecentTriggerCharPos+1,effectiveRange.length);triggerChar=effectiveRange.substring(mostRecentTriggerCharPos,mostRecentTriggerCharPos+1);var firstSnippetChar=currentTriggerSnippet.substring(0,1),leadingSpace=currentTriggerSnippet.length>0&&(" "===firstSnippetChar||""===firstSnippetChar);hasTrailingSpace&&(currentTriggerSnippet=currentTriggerSnippet.trim());var regex=allowSpaces?/[^\S ]/g:/[\xA0\s]/g;if(!leadingSpace&&(menuAlreadyActive||!regex.test(currentTriggerSnippet)))return{v:{mentionPosition:mostRecentTriggerCharPos,mentionText:currentTriggerSnippet,mentionSelectedElement:selected,mentionSelectedPath:path,mentionSelectedOffset:offset,mentionTriggerChar:triggerChar}}}}();if("object"===("undefined"==typeof _ret?"undefined":_typeof(_ret)))return _ret.v}}},{key:"isContentEditable",value:function(element){return"INPUT"!==element.nodeName&&"TEXTAREA"!==element.nodeName}},{key:"getTextAreaOrInputUnderlinePosition",value:function(element,position){var properties=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],isFirefox=null!==window.mozInnerScreenX,div=this.getDocument().createElement("div");div.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(div);var style=div.style,computed=window.getComputedStyle?getComputedStyle(element):element.currentStyle;style.whiteSpace="pre-wrap","INPUT"!==element.nodeName&&(style.wordWrap="break-word"),style.position="absolute",style.visibility="hidden",properties.forEach(function(prop){style[prop]=computed[prop]}),isFirefox?(style.width=parseInt(computed.width)-2+"px",element.scrollHeight>parseInt(computed.height)&&(style.overflowY="scroll")):style.overflow="hidden",div.textContent=element.value.substring(0,position),"INPUT"===element.nodeName&&(div.textContent=div.textContent.replace(/\s/g,""));var span=this.getDocument().createElement("span");span.textContent=element.value.substring(position)||".",div.appendChild(span);var rect=element.getBoundingClientRect(),doc=document.documentElement,windowLeft=(window.pageXOffset||doc.scrollLeft)-(doc.clientLeft||0),windowTop=(window.pageYOffset||doc.scrollTop)-(doc.clientTop||0),coordinates={top:rect.top+windowTop+span.offsetTop+parseInt(computed.borderTopWidth)+parseInt(computed.fontSize)-element.scrollTop,left:rect.left+windowLeft+span.offsetLeft+parseInt(computed.borderLeftWidth)};return this.getDocument().body.removeChild(div),coordinates}},{key:"getContentEditableCaretPosition",value:function(selectedNodePosition){var markerTextChar="\ufeff",markerEl=void 0,markerId="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),range=void 0,sel=this.getWindowSelection(),prevRange=sel.getRangeAt(0);range=this.getDocument().createRange(),range.setStart(sel.anchorNode,selectedNodePosition),range.setEnd(sel.anchorNode,selectedNodePosition),range.collapse(!1),markerEl=this.getDocument().createElement("span"),markerEl.id=markerId,markerEl.appendChild(this.getDocument().createTextNode(markerTextChar)),range.insertNode(markerEl),sel.removeAllRanges(),sel.addRange(prevRange);var rect=markerEl.getBoundingClientRect(),doc=document.documentElement,windowLeft=(window.pageXOffset||doc.scrollLeft)-(doc.clientLeft||0),windowTop=(window.pageYOffset||doc.scrollTop)-(doc.clientTop||0),coordinates={left:rect.left+windowLeft,top:rect.top+markerEl.offsetHeight+windowTop};return markerEl.parentNode.removeChild(markerEl),coordinates}},{key:"scrollIntoView",value:function(elem){for(var reasonableBuffer=20,clientRect=void 0,maxScrollDisplacement=100,e=elem;void 0===clientRect||0===clientRect.height;)if(clientRect=e.getBoundingClientRect(),0===clientRect.height&&(e=e.childNodes[0],void 0===e||!e.getBoundingClientRect))return;var elemTop=clientRect.top,elemBottom=elemTop+clientRect.height;if(elemTop<0)window.scrollTo(0,window.pageYOffset+clientRect.top-reasonableBuffer);else if(elemBottom>window.innerHeight){var maxY=window.pageYOffset+clientRect.top-reasonableBuffer;maxY-window.pageYOffset>maxScrollDisplacement&&(maxY=window.pageYOffset+maxScrollDisplacement);var targetY=window.pageYOffset-(window.innerHeight-elemBottom);targetY>maxY&&(targetY=maxY),window.scrollTo(0,targetY)}}}]),TributeRange}();exports["default"]=TributeRange,module.exports=exports["default"]},{}],5:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TributeSearch=function(){function TributeSearch(tribute){_classCallCheck(this,TributeSearch),this.tribute=tribute,this.tribute.search=this}return _createClass(TributeSearch,[{key:"simpleFilter",value:function(pattern,array){var _this=this;return array.filter(function(string){return _this.test(pattern,string)})}},{key:"test",value:function(pattern,string){return null!==this.match(pattern,string)}},{key:"match",value:function(pattern,string,opts){opts=opts||{};var pre=(string.length,opts.pre||""),post=opts.post||"",compareString=opts.caseSensitive&&string||string.toLowerCase();pattern=opts.caseSensitive&&pattern||pattern.toLowerCase();var patternCache=this.traverse(compareString,pattern,0,0,[]);return patternCache?{rendered:this.render(string,patternCache.cache,pre,post),score:patternCache.score}:null}},{key:"traverse",value:function(string,pattern,stringIndex,patternIndex,patternCache){if(pattern.length===patternIndex)return{score:this.calculateScore(patternCache),cache:patternCache.slice()};if(!(string.length===stringIndex||pattern.length-patternIndex>string.length-stringIndex)){for(var c=pattern[patternIndex],index=string.indexOf(c,stringIndex),best=void 0,temp=void 0;index>-1;){if(patternCache.push(index),temp=this.traverse(string,pattern,index+1,patternIndex+1,patternCache),patternCache.pop(),!temp)return best;(!best||best.score<temp.score)&&(best=temp),index=string.indexOf(c,index+1)}return best}}},{key:"calculateScore",value:function(patternCache){var score=0,temp=1;return patternCache.forEach(function(index,i){i>0&&(patternCache[i-1]+1===index?temp+=temp+1:temp=1),score+=temp}),score}},{key:"render",value:function(string,indices,pre,post){var rendered=string.substring(0,indices[0]);return indices.forEach(function(index,i){rendered+=pre+string[index]+post+string.substring(index+1,indices[i+1]?indices[i+1]:string.length)}),rendered}},{key:"filter",value:function(pattern,arr,opts){var _this2=this;return opts=opts||{},arr.reduce(function(prev,element,idx,arr){var str=element;opts.extract&&(str=opts.extract(element),str||(str=""));var rendered=_this2.match(pattern,str,opts);return null!=rendered&&(prev[prev.length]={string:rendered.rendered,score:rendered.score,index:idx,original:element}),prev},[]).sort(function(a,b){var compare=b.score-a.score;return compare?compare:a.index-b.index})}}]),TributeSearch}();exports["default"]=TributeSearch,module.exports=exports["default"]},{}],6:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _Tribute=require("./Tribute"),_Tribute2=_interopRequireDefault(_Tribute);exports["default"]=_Tribute2["default"],module.exports=exports["default"]},{"./Tribute":1}],7:[function(require,module,exports){"use strict";Array.prototype.find||(Array.prototype.find=function(predicate){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value}),function(){function CustomEvent(event,params){params=params||{bubbles:!1,cancelable:!1,detail:void 0};var evt=document.createEvent("CustomEvent");return evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail),evt}return"function"!=typeof window.CustomEvent&&(CustomEvent.prototype=window.Event.prototype,void(window.CustomEvent=CustomEvent))}()},{}]},{},[6])(6)})},,,,,,,,,,,,,,,,,,function(module,exports){"use strict";String.prototype.replaceAll=function(search,replace){return this.split(search).join(replace)},Array.prototype.find||(Array.prototype.find=function(predicate){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value}),Array.prototype.findIndex||(Array.prototype.findIndex=function(predicate){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;i<length;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return i;return-1})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _dom=__webpack_require__(4),_SubscriptionComponent=__webpack_require__(172),_SubscriptionComponent2=_interopRequireDefault(_SubscriptionComponent);exports["default"]=function($$container){var $$subscription=(0,_dom.qsAll)(".js-feed-subscription",$$container);$$subscription.map(function(el){return new _SubscriptionComponent2["default"](el)})}},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),_queryString=__webpack_require__(53),TYPE_USER="user",TYPE_ARTIST="artist",TYPE_CHANNEL="channel",TYPE_MANUFACTURER="manufacturer",TYPE_IGNORE="ignore",SubscriptionComponent=function(){function SubscriptionComponent($$container){(0,_classCallCheck3["default"])(this,SubscriptionComponent),this.$$container=$$container,this.$$unfollow_btn=(0,_dom.qs)(".js-unfollow",$$container),this.$$setting_btns=(0,_dom.qsAll)(".js-subscription-toggle",$$container),this.addEventListeners()}return SubscriptionComponent.prototype.addEventListeners=function(){var _this=this;this.$$unfollow_btn.addEventListener("click",this.onUnfollow.bind(this)),this.$$setting_btns.map(function(el){return el.addEventListener("click",_this.onToggleSubscribe.bind(_this))})},SubscriptionComponent.prototype.onUnfollow=function(e){var target=e.target,type=target.getAttribute("data-type"),data={};[TYPE_USER,TYPE_IGNORE].indexOf(type)!==-1?(data.user_id=target.getAttribute("data-user-id"),type==TYPE_IGNORE&&(data.object_type=target.getAttribute("data-object-type"))):data.id=target.getAttribute("data-id"),this.unfollow(type,data),this.$$container.remove()},SubscriptionComponent.prototype.onToggleSubscribe=function(e){var target=e.target,subscribed=target.className.indexOf("muted")!=-1,action=subscribed?"subscribe":"unsubscribe",type_group=target.getAttribute("data-type-group"),user_id=target.getAttribute("data-user-id");target.classList.toggle("ug-btn__success"),target.classList.toggle("ug-btn__muted"),this.toggleSubscribe(action,{type_group:type_group,user_id:user_id})},SubscriptionComponent.prototype.unfollow=function(type,data){var _urls,urls=(_urls={},_urls[TYPE_USER]="/user/follow/delete",_urls[TYPE_ARTIST]="/user/favorite/artist-list-remove",_urls[TYPE_CHANNEL]="/user/follow/unfollow-channel",_urls[TYPE_MANUFACTURER]="/user/follow/unfollow-gear",_urls[TYPE_IGNORE]="/user/follow/remove-ignore-user-type",_urls);fetch(urls[type]+(0,_queryString.toQueryString)(data),{method:"GET",credentials:"same-origin"})},SubscriptionComponent.prototype.toggleSubscribe=function(action,data){var urls={subscribe:"/user/follow/remove-ignore-user-group",unsubscribe:"/user/follow/add-ignore-user-group"};fetch(urls[action]+(0,_queryString.toQueryString)(data),{method:"GET",credentials:"same-origin"})},SubscriptionComponent}();exports["default"]=SubscriptionComponent}).call(exports,__webpack_require__(123))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(46),_createClass3=_interopRequireDefault(_createClass2),_jsCookie=__webpack_require__(51),_jsCookie2=_interopRequireDefault(_jsCookie),_dom=__webpack_require__(4),_FeedItemComponent=__webpack_require__(174),_FeedItemComponent2=_interopRequireDefault(_FeedItemComponent),main_server=UGAPP.config.main_server,COOKIE_NAME="ug_feed_state",Feed=function(){function Feed($$container,$$mainPage){(0,_classCallCheck3["default"])(this,Feed),this.$$mainPage=$$mainPage,this.$$feed=(0,_dom.qs)(".js-main-feed",$$container),this.$$items=(0,_dom.qsAll)(".js-feed-item",this.$$feed),this.$$toggle=(0,_dom.qs)(".js-feed-toggle",$$container),this.$$items.map(function(el){return new _FeedItemComponent2["default"](el)}),this.init(),this.addEventListeners()}return Feed.prototype.addEventListeners=function(){this.$$toggle.addEventListener("click",this.toggle.bind(this))},Feed.prototype.init=function(){_jsCookie2["default"].get(COOKIE_NAME)&&this.show()},Feed.prototype.toggle=function(e){e&&e.preventDefault(),_jsCookie2["default"].get(COOKIE_NAME)?this.hide():this.show()},Feed.prototype.hide=function(){this.$$mainPage.classList.remove("hide"),this.$$feed.classList.add("hide"),this.$$toggle.textContent=this.$$toggle.getAttribute("data-show-text"),_jsCookie2["default"].remove(COOKIE_NAME,this.cookieParams)},Feed.prototype.show=function(){this.$$mainPage.classList.add("hide"),this.$$feed.classList.remove("hide"),this.$$toggle.textContent=this.$$toggle.getAttribute("data-hide-text"),_jsCookie2["default"].set(COOKIE_NAME,1,this.cookieParams)},(0,_createClass3["default"])(Feed,[{key:"cookieParams",get:function(){return{expires:365,path:"/",domain:"."+main_server}}}]),Feed}();exports["default"]=Feed},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),_queryString=__webpack_require__(53),_request=__webpack_require__(145),FeedItemComponent=function(){function FeedItemComponent($$container){(0,_classCallCheck3["default"])(this,FeedItemComponent),this.isEmptyDescription=!0,this.closed=!0,this.ignored={user:!1,group:!1},this.$$toggle=(0,_dom.qs)(".js-description-toggle",$$container),this.$$btnIgnore=(0,_dom.qsAll)(".js-ignore",$$container),this.$$description=(0,_dom.qs)(".js-description",$$container),this.id=$$container.getAttribute("data-id"),this.addEventListeners()}return FeedItemComponent.prototype.addEventListeners=function(){var _this=this;this.$$toggle&&this.$$toggle.addEventListener("click",this.onToggleDescription.bind(this)),this.$$btnIgnore.map(function(el){return el.addEventListener("click",_this.onToggleIgnore.bind(_this))})},FeedItemComponent.prototype.onToggleIgnore=function(e){e.preventDefault(),e.stopPropagation();var currentTarget=e.currentTarget,type=currentTarget.getAttribute("data-type"),user_id=currentTarget.getAttribute("data-user-id"),ignored=this.ignored[type],action=ignored?"follow":"ignore",data={user_id:user_id};"group"==type&&(data.type_group=currentTarget.getAttribute("data-type-group"));var $$icon=(0,_dom.qs)(".js-icon",currentTarget);$$icon.classList[ignored?"remove":"add"]($$icon.getAttribute("data-icon-ignore")),this.toggleIgnore(action+"_"+type,data),this.ignored[type]=!ignored},FeedItemComponent.prototype.onToggleDescription=function(){this.closed?this.isEmptyDescription?this.getDescription({activity_id:this.id}).then(this.show.bind(this)):this.show():this.hide()},FeedItemComponent.prototype.show=function(description){description&&(this.isEmptyDescription=!1,this.$$description.innerHTML=description.info),this.$$toggle.classList.add("expanded"),this.$$description.classList.remove("hide"),this.closed=!1},FeedItemComponent.prototype.hide=function(){this.$$toggle.classList.remove("expanded"),this.$$description.classList.add("hide"),this.closed=!0},FeedItemComponent.prototype.getDescription=function(data){var url="/user/feed/get-object-text-preview/";return fetch(url+(0,_queryString.toQueryString)(data),{method:"GET",credentials:"same-origin"}).then(_request.checkStatus)["catch"]()},FeedItemComponent.prototype.toggleIgnore=function(type,data){var urls={ignore_user:"/user/follow/ignore-user",follow_user:"/user/follow/follow-user",ignore_group:"/user/follow/add-ignore-user-group",follow_group:"/user/follow/remove-ignore-user-group"};fetch(urls[type]+(0,_queryString.toQueryString)(data),{method:"GET",credentials:"same-origin"})},FeedItemComponent}();exports["default"]=FeedItemComponent}).call(exports,__webpack_require__(123))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(46),_createClass3=_interopRequireDefault(_createClass2),_template=__webpack_require__(176),_template2=_interopRequireDefault(_template),_dom=__webpack_require__(4),NotificationComponent=function(){function NotificationComponent(){(0,_classCallCheck3["default"])(this,NotificationComponent),this.timeout=null}return NotificationComponent.prototype.addEventListeners=function(onUndo){this.elClose&&this.elClose.addEventListener("click",this.hide.bind(this)),this.elUndo&&this.elUndo.addEventListener("touchend",onUndo)},NotificationComponent.prototype.updateSelectors=function(){var dom=this.dom;this.container=(0,_dom.qs)("."+dom.container),this.elClose=(0,_dom.qs)("."+dom.close,this.container),this.elUndo=(0,_dom.qs)("."+dom.undo,this.container)},NotificationComponent.prototype.show=function(params){var _this=this,state=params.state,message=params.message,onAutoClose=params.onAutoClose,onUndo=params.onUndo,closable=params.closable||!1,duration=params.duration||3e3;Array.isArray(message)&&(message=message.join("\n")),"string"==typeof message&&message&&message.trim()&&(this.container&&this.container.remove(),document.body.insertAdjacentHTML("beforeEnd",(0,_template2["default"])({dom:this.dom,state:state,message:message,closable:closable,onUndo:onUndo})),this.updateSelectors(),this.addEventListeners(onUndo),"function"==typeof onUndo&&(duration=5e3),"function"!=typeof onUndo&&closable||(clearTimeout(this.timeout),this.timeout=setTimeout(function(){return _this.hide(null,onAutoClose)},duration)))},NotificationComponent.prototype.hide=function(e,onHide){e&&e.stopPropagation(),this.container&&this.container.remove(),"function"==typeof onHide&&onHide()},(0,_createClass3["default"])(NotificationComponent,[{key:"dom",get:function(){return{container:"js-system-notification",
close:"js-close",undo:"js-undo"}}}]),NotificationComponent}();exports["default"]=NotificationComponent},function(module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(opts){var dom=opts.dom,message=opts.message,onUndo=opts.onUndo,closable=opts.closable,isMobile=opts.isMobile;return'<article class="ug-system-notification ug-system-notification__'+opts.state+" "+dom.container+"  "+(closable?" has_closable":"")+'">\n        <span class="ug-system-notification--icon"></span>'+message+"<br>\n        "+("function"==typeof onUndo?'\n           <span class="link pull-left js-tapped '+dom.undo+'">UNDO</span>\n        ':"")+"\n        "+(closable?isMobile?'<button class="ugm-btn js-tapped '+dom.close+'">\n                <span class="ugm-icon ugm-icon__close"></span>\n            </button>':'<div class="ug-close '+dom.close+'">&times;</div>':"")+"\n    </article>"}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),ShowMoreView=function(){function ShowMoreView(el_trigger){(0,_classCallCheck3["default"])(this,ShowMoreView),this.el_container=(0,_dom.qs)(".js-show-more-container",el_trigger.parentNode),this.el_trigger=el_trigger,this.addEventListeners()}return ShowMoreView.prototype.addEventListeners=function(){this.el_trigger.addEventListener("click",this.showMore.bind(this))},ShowMoreView.prototype.showMore=function(e){var store=this.el_container.innerHTML;this.el_container.textContent=e.target.getAttribute("data-more"),e.target.setAttribute("data-more",store),e.target.innerHTML="Show more"==e.target.innerHTML?"Show less":"Show more"},ShowMoreView}();exports["default"]=ShowMoreView},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),_track=__webpack_require__(52),track=_interopRequireWildcard(_track),ProposedCorrectionsView=function(){function ProposedCorrectionsView(el_container){(0,_classCallCheck3["default"])(this,ProposedCorrectionsView),this.el_container=el_container,this.trigger_btn=(0,_dom.qs)(".js-proposed-corrections-btn"),this.addEventListeners()}return ProposedCorrectionsView.prototype.addEventListeners=function(){this.trigger_btn.addEventListener("click",this.toggleContainer.bind(this)),(0,_dom.qsAll)(".js-correction-view-link").map(function(el){return el.addEventListener("click",function(){return track.metrica("TAB_GO_CORRECT")})})},ProposedCorrectionsView.prototype.toggleContainer=function(e){e.preventDefault();var text=this.el_container.classList.contains("show")?"Show":"Hide",action=this.el_container.classList.contains("show")?"remove":"add";"add"==action&&track.metrica("TAB_SHOW_CORRECTS"),this.trigger_btn.innerHTML=text+" proposed correction"+(1==this.trigger_btn.getAttribute("data-count")?"":"s"),this.el_container.classList[action]("show")},ProposedCorrectionsView}();exports["default"]=ProposedCorrectionsView},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),_ActivityFeedModel=__webpack_require__(180),_ActivityFeedModel2=_interopRequireDefault(_ActivityFeedModel),ActivityFeedView=function(){function ActivityFeedView(el_container,count_item){(0,_classCallCheck3["default"])(this,ActivityFeedView),this.el_container=el_container,this.count_item=count_item,this.el_trigger=(0,_dom.qsAll)(".js-items-count span"),this.activityFeedModel=new _ActivityFeedModel2["default"],this.count_item||this.showItems(this.activityFeedModel.itemCount),this.addEventListeners()}return ActivityFeedView.prototype.addEventListeners=function(){var _this=this;this.count_item&&window.addEventListener("scroll",this.lazyLoad.bind(this)),this.el_trigger.map(function(el){return el.addEventListener("click",_this.showItems.bind(_this))})},ActivityFeedView.prototype.showItems=function(e){e.target.getAttribute("data-count");this.markActive(data_count),this.activityFeedModel.itemCount=data_count;for(var container_height=0,i=1;i<=data_count;i++)container_height+=(0,_dom.qs)(".js-item:nth-child("+i+")").clientHeight;this.el_container.style.height=container_height+"px"},ActivityFeedView.prototype.markActive=function(count){this.el_trigger.map(function(el){var action=el.getAttribute("data-count")==count?"add":"remove";el.classList[action]("active")})},ActivityFeedView.prototype.lazyLoad=function(){var window_height=document.documentElement.clientHeight,scroll_top=window.pageYOffset||document.documentElement.scrollTop,document_height=function(){var D=document;return Math.max(D.body.scrollHeight,D.documentElement.scrollHeight,D.body.offsetHeight,D.documentElement.offsetHeight,D.body.clientHeight,D.documentElement.clientHeight)},bottom_space=document_height()-window_height-scroll_top,page=this.el_container.getAttribute("data-page"),pages=this.el_container.getAttribute("data-pages"),wait=this.el_container.getAttribute("data-wait"),user_id=this.el_container.getAttribute("data-userid");bottom_space<400&&0==wait&&+pages>=+page&&(this.el_container.setAttribute("data-wait",1),this.updateFeed(40,page,user_id))},ActivityFeedView.prototype.updateFeed=function(size,page,user_id){var _this2=this;this.activityFeedModel.getFeedItems(size,page,user_id).then(function(data){_this2.el_container.innerHTML+=data.content,_this2.el_container.setAttribute("data-page",+page+1),_this2.el_container.setAttribute("data-wait",data.page>=data.pages?1:0),(0,_dom.qs)(".js-tooltip")&&$(".js-tooltip").tooltip()})},ActivityFeedView}();exports["default"]=ActivityFeedView},function(module,exports,__webpack_require__){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _stringify=__webpack_require__(124),_stringify2=_interopRequireDefault(_stringify),_classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(46),_createClass3=_interopRequireDefault(_createClass2),_api=__webpack_require__(181),API=_interopRequireWildcard(_api),ActivityFeedModel=function(){function ActivityFeedModel(){(0,_classCallCheck3["default"])(this,ActivityFeedModel)}return ActivityFeedModel.prototype.getFeedItems=function(size){var page=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,user_id=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return API.ajax("/user/activity/feed?page="+page+"&page_size="+size+"&user_id="+user_id,"GET")},(0,_createClass3["default"])(ActivityFeedModel,[{key:"itemCount",get:function(){return JSON.parse(window.localStorage.getItem("activity-item-count"))||5},set:function(data){window.localStorage.setItem("activity-item-count",(0,_stringify2["default"])(data))}}]),ActivityFeedModel}();exports["default"]=ActivityFeedModel},function(module,exports,__webpack_require__){(function(fetch){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function ajax(url,method,payload){var params={method:method,credentials:"same-origin"};return payload&&(params.body=createBody(payload)),new _promise2["default"](function(resolve,reject){fetch(url,params).then(checkStatus).then(function(data){processData(data,resolve,reject)})["catch"](function(error){})})}exports.__esModule=!0;var _promise=__webpack_require__(126),_promise2=_interopRequireDefault(_promise);exports.ajax=ajax;var createBody=function(payload){var is=payload instanceof FormData;if(!is){var body=new FormData;for(var key in payload)body.append(key,payload[key]);return body}return payload},checkStatus=function(res){if(res.status>=200&&res.status<300)return res.json();var error=new Error(res.statusText);throw error.res=res,error},processData=function(data,resolve,reject){"ok"==data.result||"success"==data.result?resolve(data.info):reject(data.info)}}).call(exports,__webpack_require__(123))},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),MainPageTabSwitcher=function(){function MainPageTabSwitcher($$container){(0,_classCallCheck3["default"])(this,MainPageTabSwitcher),this.$$switchers=(0,_dom.qsAll)(".js-switcher",$$container),this.$$switchers.length&&(this.$tabs=(0,_dom.qsAll)(".js-tab-content",$$container),this.addEventListeners())}return MainPageTabSwitcher.prototype.addEventListeners=function(){var _this=this;this.$$switchers.map(function(el){return el.addEventListener("mouseover",_this.switchTab.bind(_this))})},MainPageTabSwitcher.prototype.switchTab=function(e){var currentTarget=e.currentTarget,index=currentTarget.getAttribute("data-tab");this.$$switchers.map(function(el){el==currentTarget?(el.classList.add("ffon"),el.classList.remove("ffdefault")):(el.classList.remove("ffon"),el.classList.add("ffdefault"))}),this.$tabs.map(function(el){var action=el.getAttribute("data-tab")==index?"remove":"add";el.classList[action]("hide")})},MainPageTabSwitcher}();exports["default"]=MainPageTabSwitcher},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0,exports["default"]=void 0;var _classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),_TabCommentComponent=__webpack_require__(184),_TabCommentComponent2=_interopRequireDefault(_TabCommentComponent),TabView=function(){function TabView(){(0,_classCallCheck3["default"])(this,TabView),this.comment=!1,this.$$commentForm=(0,_dom.qs)("#comment_form"),new _TabCommentComponent2["default"](this.$$commentForm)}return TabView.prototype.addEventListeners=function(){this.$$commentForm.addEventListener("click",this.initComment.bind(this))},TabView.prototype.initComment=function(){var self=this;this.comment||(!function(){var tabComment=__webpack_require__(184)["default"];new tabComment(self.$$commentForm)}(__webpack_require__),self.comment=!0)},TabView}();exports["default"]=TabView},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach(function(key){desc[key]=descriptor[key]}),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce(function(desc,decorator){return decorator(target,property,desc)||desc},desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}exports.__esModule=!0,exports["default"]=void 0;var _dec,_dec2,_class,_getOwnPropertyDescriptor=__webpack_require__(96),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor),_classCallCheck2=__webpack_require__(45),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_dom=__webpack_require__(4),_mentionService=__webpack_require__(122),_mentionService2=_interopRequireDefault(_mentionService),_Mention=__webpack_require__(149),_Mention2=_interopRequireDefault(_Mention),_auth=__webpack_require__(100),TabCommentComponent=(_dec=(0,_auth.checkAuth)(),_dec2=(0,_auth.checkAuth)(),_class=function(){function TabCommentComponent(container){(0,_classCallCheck3["default"])(this,TabCommentComponent),this.mention=null,this.needMention=!0,this.$$commentForm=container,this.$$textarea=(0,_dom.qs)("#comm_txt",container),this.$$message=(0,_dom.qs)("#com_msg",container),this.$$submit=(0,_dom.qs)(".subm_comm",container),this.id=this.$$commentForm.getAttribute("data-id"),this.type="tabs",this.addEventListeners(),this.initMention()}return TabCommentComponent.prototype.initMention=function(){if(this.needMention&&this.type){var mentionService=new _mentionService2["default"](this.type,this.id),div=document.createElement("div");div.classList.add("light-mention"),document.body.appendChild(div),this.mention=new _Mention2["default"](this.$$textarea,div,mentionService)}},TabCommentComponent.prototype.addEventListeners=function(){this.$$commentForm.addEventListener("submit",this.submitComment.bind(this)),this.$$textarea.addEventListener("focus",this.checkAuth.bind(this))},TabCommentComponent.prototype.checkAuth=function(e){},TabCommentComponent.prototype.clearError=function(){this.$$textarea.classList.contains("error")&&(this.$$textarea.classList.remove("error"),this.$$message.style.display="none")},TabCommentComponent.prototype.showError=function(msg){this.$$textarea.classList.add("error"),this.$$textarea.focus(),this.$$message.style.display="block",this.$$message.innerHTML=msg},TabCommentComponent.prototype.validate=function(){var msg="";return this.$$textarea.value.length<10&&(msg+="<div><b></b>Your comment is too short</div>"),msg},TabCommentComponent.prototype.submitComment=function(e){this.clearError();var msg=this.validate();return msg.length>0?(this.showError(msg),e.preventDefault(),!1):(this.$$submit.setAttribute("disabled",!0),!0)},TabCommentComponent}(),_applyDecoratedDescriptor(_class.prototype,"checkAuth",[_dec],(0,_getOwnPropertyDescriptor2["default"])(_class.prototype,"checkAuth"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"submitComment",[_dec2],(0,_getOwnPropertyDescriptor2["default"])(_class.prototype,"submitComment"),_class.prototype),_class);exports["default"]=TabCommentComponent},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.mainContributorBlockTrack=void 0;var _dom=__webpack_require__(4),_trackUserActions=__webpack_require__(50);exports.mainContributorBlockTrack=function(){var $$contributor_block=(0,_dom.qs)(".js-contributor-status-view");$$contributor_block&&(0,_trackUserActions.userCanSeeElement)((0,_dom.qs)(".js-contributor-status-view"),function(){trackMetricaEvent("UGC_CONTRIBUTION_BLOCK_VIEW")})}},function(module,exports){"use strict";exports.__esModule=!0;exports.TAB="tabs"},function(module,exports){"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var testElement=document.createElement("_");if(testElement.classList.add("c1","c2"),!testElement.classList.contains("c2")){var createMethod=function(method){var original=DOMTokenList.prototype[method];DOMTokenList.prototype[method]=function(token){var i,len=arguments.length;for(i=0;i<len;i++)token=arguments[i],original.call(this,token)}};createMethod("add"),createMethod("remove")}if(testElement.classList.toggle("c3",!1),testElement.classList.contains("c3")){var _toggle=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(token,force){return 1 in arguments&&!this.contains(token)==!force?force:_toggle.call(this,token)}}testElement=null}():!function(view){"use strict";if("Element"in view){var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){for(var i=0,len=this.length;i<len;i++)if(i in this&&this[i]===item)return i;return-1},DOMEx=function(type,message){this.name=type,this.code=DOMException[type],this.message=message},checkTokenAndGetIndex=function(classList,token){if(""===token)throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(token))throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");return arrIndexOf.call(classList,token)},ClassList=function(elem){for(var trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;i<len;i++)this.push(classes[i]);this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};if(DOMEx[protoProp]=Error[protoProp],classListProto.item=function(i){return this[i]||null},classListProto.contains=function(token){return token+="",checkTokenAndGetIndex(this,token)!==-1},classListProto.add=function(){var token,tokens=arguments,i=0,l=tokens.length,updated=!1;do token=tokens[i]+"",checkTokenAndGetIndex(this,token)===-1&&(this.push(token),updated=!0);while(++i<l);updated&&this._updateClassName()},classListProto.remove=function(){var token,index,tokens=arguments,i=0,l=tokens.length,updated=!1;do for(token=tokens[i]+"",index=checkTokenAndGetIndex(this,token);index!==-1;)this.splice(index,1),updated=!0,index=checkTokenAndGetIndex(this,token);while(++i<l);updated&&this._updateClassName()},classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==!0&&"remove":force!==!1&&"add";return method&&this[method](token),force===!0||force===!1?force:!result},classListProto.toString=function(){return this.join(" ")},objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:!0,configurable:!0};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){ex.number===-2146823252&&(classListPropDesc.enumerable=!1,objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc))}}else objCtr[protoProp].__defineGetter__&&elemCtrProto.__defineGetter__(classListProp,classListGetter)}}(self))},function(module,exports){+function($){"use strict";function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;!data&&/destroy|hide/.test(option)||(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})}var Tooltip=function(element,options){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",element,options)};Tooltip.VERSION="3.3.6",Tooltip.TRANSITION_DURATION=150,Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},Tooltip.prototype.init=function(type,element,options){if(this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),obj instanceof $.Event&&(self.inState["focusin"==obj.type?"focus":"hover"]=!0),self.tip().hasClass("in")||"in"==self.hoverState?void(self.hoverState="in"):(clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show())},Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState)if(this.inState[key])return!0;return!1},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),obj instanceof $.Event&&(self.inState["focusout"==obj.type?"focus":"hover"]=!1),!self.isInStateTrue())return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,viewportDim=this.getPosition(this.$viewport);placement="bottom"==placement&&pos.bottom+actualHeight>viewportDim.bottom?"top":"top"==placement&&pos.top-actualHeight<viewportDim.top?"bottom":"right"==placement&&pos.right+actualWidth>viewportDim.width?"left":"left"==placement&&pos.left-actualWidth<viewportDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type),that.hoverState=null,"out"==prevHoverState&&that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top+=marginTop,offset.left+=marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)},Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(callback){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type),callback&&callback()}var that=this,$tip=$(this.$tip),e=$.Event("hide.bs."+this.type);if(this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete(),this.hoverState=null,this},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0],isBody="BODY"==el.tagName,elRect=el.getBoundingClientRect();null==elRect.width&&(elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var elOffset=isBody?{top:0,left:0}:$element.offset(),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()},outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.right&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.getUID=function(prefix){do prefix+=~~(1e6*Math.random());while(document.getElementById(prefix));return prefix},Tooltip.prototype.tip=function(){if(!this.$tip&&(this.$tip=$(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=this;e&&(self=$(e.currentTarget).data("bs."+this.type),self||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),e?(self.inState.click=!self.inState.click,self.isInStateTrue()?self.enter(self):self.leave(self)):self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout),this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type),that.$tip&&that.$tip.detach(),that.$tip=null,that.$arrow=null,that.$viewport=null})};var old=$.fn.tooltip;$.fn.tooltip=Plugin,$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery)}]);