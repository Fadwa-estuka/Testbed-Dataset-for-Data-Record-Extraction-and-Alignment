/***************************************
* @preserve
* ForeSee Client Code: Utils Library
* Built January 26, 17 16:47:41
* Code version: 19.2.0
* Template version: 19.2.0
***************************************/
("undefined"!=typeof _fsDefine?_fsDefine:define)(["require","_acs"],function(t,e){function r(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function n(t,e){return t<<e|t>>>32-e}function i(t,e,i,s,a,o){return r(n(r(r(e,t),r(s,o)),a),i)}function a(t,e,r,n,s,a,o){return i(e&r|~e&n,t,e,s,a,o)}function o(t,e,r,n,s,a,o){return i(e&n|r&~n,t,e,s,a,o)}function f(t,e,r,n,s,a,o){return i(e^r^n,t,e,s,a,o)}function h(t,e,r,n,s,a,o){return i(r^(e|~n),t,e,s,a,o)}function u(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var n,i,s,u,l,c=1732584193,p=-271733879,d=-1732584194,g=271733878;for(n=0;n<t.length;n+=16)i=c,s=p,u=d,l=g,c=a(c,p,d,g,t[n],7,-680876936),g=a(g,c,p,d,t[n+1],12,-389564586),d=a(d,g,c,p,t[n+2],17,606105819),p=a(p,d,g,c,t[n+3],22,-1044525330),c=a(c,p,d,g,t[n+4],7,-176418897),g=a(g,c,p,d,t[n+5],12,1200080426),d=a(d,g,c,p,t[n+6],17,-1473231341),p=a(p,d,g,c,t[n+7],22,-45705983),c=a(c,p,d,g,t[n+8],7,1770035416),g=a(g,c,p,d,t[n+9],12,-1958414417),d=a(d,g,c,p,t[n+10],17,-42063),p=a(p,d,g,c,t[n+11],22,-1990404162),c=a(c,p,d,g,t[n+12],7,1804603682),g=a(g,c,p,d,t[n+13],12,-40341101),d=a(d,g,c,p,t[n+14],17,-1502002290),p=a(p,d,g,c,t[n+15],22,1236535329),c=o(c,p,d,g,t[n+1],5,-165796510),g=o(g,c,p,d,t[n+6],9,-1069501632),d=o(d,g,c,p,t[n+11],14,643717713),p=o(p,d,g,c,t[n],20,-373897302),c=o(c,p,d,g,t[n+5],5,-701558691),g=o(g,c,p,d,t[n+10],9,38016083),d=o(d,g,c,p,t[n+15],14,-660478335),p=o(p,d,g,c,t[n+4],20,-405537848),c=o(c,p,d,g,t[n+9],5,568446438),g=o(g,c,p,d,t[n+14],9,-1019803690),d=o(d,g,c,p,t[n+3],14,-187363961),p=o(p,d,g,c,t[n+8],20,1163531501),c=o(c,p,d,g,t[n+13],5,-1444681467),g=o(g,c,p,d,t[n+2],9,-51403784),d=o(d,g,c,p,t[n+7],14,1735328473),p=o(p,d,g,c,t[n+12],20,-1926607734),c=f(c,p,d,g,t[n+5],4,-378558),g=f(g,c,p,d,t[n+8],11,-2022574463),d=f(d,g,c,p,t[n+11],16,1839030562),p=f(p,d,g,c,t[n+14],23,-35309556),c=f(c,p,d,g,t[n+1],4,-1530992060),g=f(g,c,p,d,t[n+4],11,1272893353),d=f(d,g,c,p,t[n+7],16,-155497632),p=f(p,d,g,c,t[n+10],23,-1094730640),c=f(c,p,d,g,t[n+13],4,681279174),g=f(g,c,p,d,t[n],11,-358537222),d=f(d,g,c,p,t[n+3],16,-722521979),p=f(p,d,g,c,t[n+6],23,76029189),c=f(c,p,d,g,t[n+9],4,-640364487),g=f(g,c,p,d,t[n+12],11,-421815835),d=f(d,g,c,p,t[n+15],16,530742520),p=f(p,d,g,c,t[n+2],23,-995338651),c=h(c,p,d,g,t[n],6,-198630844),g=h(g,c,p,d,t[n+7],10,1126891415),d=h(d,g,c,p,t[n+14],15,-1416354905),p=h(p,d,g,c,t[n+5],21,-57434055),c=h(c,p,d,g,t[n+12],6,1700485571),g=h(g,c,p,d,t[n+3],10,-1894986606),d=h(d,g,c,p,t[n+10],15,-1051523),p=h(p,d,g,c,t[n+1],21,-2054922799),c=h(c,p,d,g,t[n+8],6,1873313359),g=h(g,c,p,d,t[n+15],10,-30611744),d=h(d,g,c,p,t[n+6],15,-1560198380),p=h(p,d,g,c,t[n+13],21,1309151649),c=h(c,p,d,g,t[n+4],6,-145523070),g=h(g,c,p,d,t[n+11],10,-1120210379),d=h(d,g,c,p,t[n+2],15,718787259),p=h(p,d,g,c,t[n+9],21,-343485551),c=r(c,i),p=r(p,s),d=r(d,u),g=r(g,l);return[c,p,d,g]}function c(t){var e,r="";for(e=0;e<32*t.length;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function p(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;for(e=0;e<8*t.length;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r}function d(t){return c(u(p(t),8*t.length))}function g(t,e){var r,n,i=p(t),s=[],a=[];for(s[15]=a[15]=void 0,i.length>16&&(i=u(i,8*t.length)),r=0;r<16;r+=1)s[r]=909522486^i[r],a[r]=1549556828^i[r];return n=u(s.concat(p(e)),512+8*e.length),c(u(a.concat(n),640))}function y(t){var e,r,n="0123456789abcdef",i="";for(r=0;r<t.length;r+=1)e=t.charCodeAt(r),i+=n.charAt(e>>>4&15)+n.charAt(15&e);return i}function w(t){return decodeURIComponent(encodeURIComponent(t))}function b(t){return d(w(t))}function m(t){return y(b(t))}function v(t,e){return g(w(t),w(e))}function x(t,e){return y(v(t,e))}var _="undefined"!=typeof Uint8Array,S={siteKey:"global"};if(e&&e.home&&(e.home.indexOf("production")>-1||e.home.indexOf("staging")>-1)){var k;k=e.home.indexOf("production")>-1?e.home.split("production")[0]:e.home.split("staging")[0],k.indexOf("//")>-1&&(k=k.split("//")[1]),k=k.replace(/\\/g,"/").split("/"),k.length>=3&&(k=k[1].toLowerCase()),k&&k.length>1&&(S.siteKey=k)}S.getSize=function(t){var e=0,r=0,n=t.document,i=n.documentElement;return"number"==typeof t.innerWidth?(e=t.innerWidth,r=t.innerHeight):i&&(i.clientWidth||i.clientHeight)?(e=i.clientWidth,r=i.clientHeight):n.body&&(n.body.clientWidth||n.body.clientHeight)&&(e=n.body.clientWidth,r=n.body.clientHeight),{w:e,h:r}},S.getScroll=function(t){var e=0,r=0,n=t.document,i=n.documentElement;return"number"==typeof t.pageYOffset?(r=t.pageYOffset,e=t.pageXOffset):n.body&&(n.body.scrollLeft||n.body.scrollTop)?(r=n.body.scrollTop,e=n.body.scrollLeft):i&&(i.scrollLeft||i.scrollTop)&&(r=i.scrollTop,e=i.scrollLeft),{x:e,y:r}},S.setScroll=function(t,e,r){t.scrollTo(e,r)},S.getScreenResolution=function(){var t=window.screen;return S.isDefined(t)&&S.isDefined(t.width)&&"number"==typeof t.width?{w:t.width,h:t.height}:{w:0,h:0}},S.getParam=function(t){var e={},r=(location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,r,n){e[r]=n}),e[t]);return r?decodeURIComponent(r):r},S.getFrameWindow=function(t){var e;return t&&t.contentWindow?e=t.contentWindow:t&&t.contentDocument&&t.contentDocument.defaultView&&(e=t.contentDocument.defaultView),e&&e!=e.top?e:null},S.isDefined=function(t){return null!==t&&"undefined"!=typeof t},S.isFunction=function(t){return"function"==typeof t},S.isObject=function(t){return"object"==typeof t},S.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},S.isDate=function(t){return t instanceof Date},S.escapeRegExp=function(t){return(t||"").toString().replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},S.trim=function(t){return(t||"").toString().replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},S.stripHTML=function(t){return(t||"").replace(/(<([^>]+)>)/gi,"")},S.proxy=function(t,e){var r,n,i=Function.prototype.bind,s=Array.prototype.slice;return i&&t.bind===i?i.apply(t,s.call(arguments,1)):(r=s.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,r.concat(s.call(arguments)));ctor.prototype=t.prototype;var i=ctor();ctor.prototype=null;var a=t.apply(i,r.concat(s.call(arguments)));return Object(a)===a?a:i})},S.superDispose=function(t){if(t){if(t.length)for(var e=t.length-1;e>=0;e--)t[e]=null;for(var r in t){var n=typeof t[r];"function"!=n&&"object"!=n||(t[r]=null)}}t=null},S.ext=function(){var t,e,r,n=arguments,i=n[0]||{},s=1,a=n.length,o=arguments[arguments.length-1]===!1;for("object"==typeof i||S.isFunction(i)||(i={}),a===s&&(i=this,--s);s<a;s++)if(S.isDefined(t=n[s]))for(e in t)r=t[e],i!==r&&void 0!==r&&(S.isArray(r)?r=r.slice(0):S.isDate(r)?r=new Date(r.getTime()):"object"!=typeof r||o||(r=S.ext({},r)),i[e]=r);return i},S.merge=function(){var t,e,r,n,i,s={},a=arguments;for(t=0,e=a.length;t<e;t++)if(i=a[t],S.isPlainObject(i))for(var o in i)r=i[o],n=s[o],s[o]=n&&S.isPlainObject(r)&&S.isPlainObject(n)?S.merge(n,r):S.unlink(r);return s},S.unlink=function(t){var e,r;if(S.isPlainObject(t)){e={};for(var n in t)e[n]=S.unlink(t[n])}else if(S.isArray(t))for(e=[],r=0,l=t.length;r<l;r++)e[r]=S.unlink(t[r]);else e=t;return e},S.isPlainObject=function(t){if(!t||"[object Object]"!==Object.prototype.toString.call(t)||t.nodeType||t.setInterval)return!1;if(t.constructor&&!hasOwnProperty.call(t,"constructor")&&!hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1;var e;for(e in t);return void 0===e||hasOwnProperty.call(t,e)||!hasOwnProperty.call(t,e)&&hasOwnProperty.call(Object.prototype,e)},S.isString=function(t){return"string"==typeof t},S.md5=function(t,e,r){return e?r?v(e,t):x(e,t):r?b(t):m(t)};var B={};S.preventDefault=function(t){t&&t.preventDefault?t.preventDefault():window.event&&window.event.returnValue?window.eventReturnValue=!1:t.returnValue=!1};var T=[],R=function(t){var e="default";if(t.indexOf(":")>-1){var r=t.split(":");e=r[0],t=r[1]}return B[e]||(B[e]={}),B[e][t]||(B[e][t]=[]),{ns:e,en:t}};S.Bind=function(t,e,r,n){if(t&&e){e=e.toLowerCase();var i=R(e);if(B[i.ns][i.en].push({elem:t,cb:r,ub:!!n}),e.indexOf("unload")>-1)return void T.push(r);"propertychange"!=i.en&&t.addEventListener?t.addEventListener(i.en,r,!n):t.attachEvent&&t.attachEvent("on"+i.en,r)}},S.BindOnce=function(t,e,r){if(t&&e){var n=R(e);if(t["_acsEvent"+n.en])return;t["_acsEvent"+n.en]=!0,S.Bind(t,e,r)}};var I=function(t,e,r,n){e&&(e.parentNode||e.window||9==e.nodeType)&&("propertychange"!=t&&e.removeEventListener?e.removeEventListener(t,r,!n):e.detachEvent&&e.detachEvent("on"+t,r))};S.Unbind=function(t,e,r,n){var i,s,a,o;if(e&&e.indexOf("unload")>-1){for(o=0;o<T.length;o++)if(T[o]==r){T.splice(o,1);break}}else if(0===arguments.length)for(var f in B)S.Unbind(f+":*"),delete B[f];else if("string"==typeof t)if(i=R(t),"default"==i.ns){for(var h in B)if(B.hasOwnProperty(h)){s=B[h];for(var u in s)if(s.hasOwnProperty(u)&&(u==i.en||"*"==i.en))for(o=0;o<s[u].length;o++)a=s[u][o],I(u,a.elem,a.cb,a.ub),s[u].splice(o--,1)}}else{s=B[i.ns];for(var l in s)if(s.hasOwnProperty(l)&&(l==i.en||"*"==i.en))for(o=0;o<s[l].length;o++)a=s[l][o],I(l,a.elem,a.cb,a.ub),s[l].splice(o--,1)}else if(t&&!e){for(var c in B)if(B.hasOwnProperty(c)){s=B[c];for(var p in s)if(s.hasOwnProperty(p))for(o=0;o<s[p].length;o++)a=s[p][o],a.elem===t&&(I(p,a.elem,a.cb,a.ub),s[p].splice(o--,1))}}else if(t&&e)if(i=R(e),"default"==i.ns){for(var d in B)if(B.hasOwnProperty(d)){s=B[d];for(var g in s)if(s.hasOwnProperty(g)&&(g==i.en||"*"==i.en))for(o=0;o<s[g].length;o++)a=s[g][o],a.elem===t&&(I(g,a.elem,r?r:a.cb,a.ub),s[g].splice(o--,1))}}else{i=R(e),s=B[i.ns];for(var y in s)if(s.hasOwnProperty(y)&&(y==i.en||"*"==i.en))for(o=0;o<s[y].length;o++)a=s[y][o],a.elem===t&&(I(y,a.elem,r?r:a.cb,a.ub),s[y].splice(o--,1))}};var E=!1;if(S.preventUnloadFlag=!1,S._preventUnloadFor=function(t){E=!0,setTimeout(function(){E=!1},t)},S.HandleUnload=function(){if(!E&&!S.preventUnloadFlag){for(var t=T.length-1;t>=0;t--)try{T[t].call()}catch(t){}S.superDispose(T),S.Unbind()}},document.addEventListener?(window.addEventListener("beforeunload",S.HandleUnload,!0),window.addEventListener("pagehide",S.HandleUnload,!0),document.addEventListener("unload",S.HandleUnload,!0)):document.attachEvent&&window.attachEvent("onunload",S.HandleUnload),S.FSEvent=function(){this.id="_"+Math.round(99999*Math.random()),this.subscriptions=[],this.didFire=!1},S.FSEvent.prototype.subscribe=function(t,e,r){return this.subscriptions.push({once:!!e,cb:t}),r&&this.didFire&&(this.prevArgs?this.fire.apply(this,this.prevArgs):this.fire()),{unsubscribe:function(t,e){return function(){t.unsubscribe(e)}}(this,t)}},S.FSEvent.prototype.unsubscribe=function(t){for(var e=0;e<this.subscriptions.length;e++)this.subscriptions[e].cb==t&&(this.subscriptions.splice(e,1),e--)},S.FSEvent.prototype.unsubscribeAll=function(){this.subscriptions=[]},S.FSEvent.prototype.fire=function(){this.didFire=!0,this.prevArgs=arguments;for(var t=0;t<this.subscriptions.length;t++){var e=this.subscriptions[t];e.once&&this.subscriptions.splice(t--,1),e.cb.apply(this,arguments)}},S.pageNavEvent=new S.FSEvent,S.honorNavigationEvents=!0,history&&history.pushState){window.addEventListener("popstate",function(t){!E&&S.honorNavigationEvents&&S.pageNavEvent.fire()});var A=history.pushState;history.pushState=function(){A.apply(history,arguments),!E&&S.honorNavigationEvents&&S.pageNavEvent.fire()}}S.makeURI=e.makeURI;var C,O=function(t){this.browser=t,this.sig=C||"not detected",this.ready=new S.FSEvent,this._detect()};O.prototype._detect=function(){var t=S.proxy(function(t){this.sig=t,this.ready.fire(t)},this);if(J.has())return void J.uid(t);if(z.has())return void z.uid(t);var e,r=[],n=navigator,i="_fsrFP_",s=this.browser;s.supportsLocalStorage&&(e=localStorage.getItem(i)),!e&&C&&(e=C),e||(r=S.trim(navigator.userAgent.replace(/[0-9\.\/\\\(\);_\-]*/gi,"")).split(" "),r.push(n.language||""),r.push(n.hardwareConcurrency||""),r.push(n.platform||""),r.push(n.vendor||""),r.push(n.appName||""),r.push(n.maxTouchPoints||""),r.push(n.doNotTrack||"false"),r.push(s.os.name||"false"),r.push(s.os.version||"false"),r.push(this._getCanvasPrint()),e=S.md5(r.join("")),this.sig=e,s.supportsLocalStorage&&localStorage.setItem(i,e)),S.nextTick(function(){t(e)})},O.prototype._getCanvasPrint=function(){try{var t=document.createElement("canvas"),e=t.getContext("2d"),r="ForeSee,CloudUser <canvas> 1.0";return t.width=250,t.height=30,e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(r,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(r,4,17),t.toDataURL()}catch(t){return"nocanvas"}},S.Fingerprint=O;var L;S.Frame=function(t){this.frameId="_fsControlFrame";var e=S.makeURI(S.productArr[0]+"/fs.frame.html?d="+document.domain);t.isIE&&("//"==e.substr(0,2)&&(e="https:"+e),e=e.replace("http:","https:")),this.isSSL=e.toLowerCase().indexOf("https")>-1,this.isSSL&&(e=e.replace(/:[0-9]+/gi,"")),this.iframeSrc=e,L||(L=new S.FSEvent),this.ready=L,this.trackerReady=new S.FSEvent,this._ajaxCalls={},this._ensureFrame(),S.Bind(window,"message",S.proxy(function(t){this._onMessage(t)},this))},S.Frame.prototype._ensureFrame=function(){if(this._iframeElement=document.getElementById(this.frameId),!this._iframeElement){var t=document.createElement("iframe");t.src=this.iframeSrc,t.id=this.frameId,t.className="_FSFRAME_",t._csrf=!0,t.style.display="none",t.setAttribute("title","ForeSee Control Frame"),t.setAttribute("_fsrB",!0),document&&document.body&&document.body.appendChild(t),this._iframeElement=t,this.ready.didFire&&(this.ready=new S.FSEvent)}},S.Frame.prototype._postMessage=function(t,e){this._ensureFrame();var r=JSON.stringify({src:"fstop",method:t,params:e||{}}),n=S.proxy(function(){this._iframeElement.contentWindow.postMessage(r,"*")},this);this.ready.didFire?n():this.ready.subscribe(n)},S.Frame.prototype._onMessage=function(t){var e;if(t.data&&(t.data+"").indexOf("frame")!=-1){try{e=JSON.parse(t.data)}catch(t){return}if("fsframe"==e.src)switch(this.ready.didFire||this.ready.fire(),e.method){case"ajaxreturn":var r=e.params.params.ajaxid;this._ajaxCalls[r]&&this._ajaxCalls[r].cb&&(this._ajaxCalls[r].cb(!!e.params.success,e.params.res||""),delete this._ajaxCalls[r]);break;case"trackerready":this.trackerReady.didFire||this.trackerReady.fire();break;case"securityerror":this._3pDisabled=__3pDataDisabled=!0}}},S.Frame.prototype.ajax=function(t,e,r,n,i,s){var a="_"+Math.round(99999999*Math.random());return i=!!i,s=s||"application/x-www-form-urlencoded",this._ajaxCalls[a]={payload:{method:t,url:e,data:r,ajaxid:a,skipencode:i,contenttype:s},cb:n},this._postMessage("ajax",this._ajaxCalls[a].payload)},S.Frame.prototype.broadcast=function(t,e,r){return this._postMessage("broadcast",{key:t,value:e,x:r})};var D=function(t){this.browser=t,this.ready=new S.FSEvent,t.isIE&&t.browser.version<11&&"https:"!=location.protocol?(this.fstg=new S.Frame(t),S.nextTick(S.proxy(function(){this.fstg.ready.subscribe(S.proxy(function(){this.ready.fire()},this),!0,!0)},this))):(this.ajax=new S.AjaxTransport,S.nextTick(S.proxy(function(){this.ready.fire()},this)))};D.prototype.send=function(t){this.ready.subscribe(S.proxy(function(){if(this.ajax)this.ajax.send(t);else{var e=S.ext({method:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(){},failure:function(){}},t);this.fstg.ajax(e.method,e.url,e.data,function(t){return function(e,r){e?t.success(r):t.failure(r)}}(e),!S.isDefined(t.skipEncode)||!!t.skipEncode,e.contentType)}},this),!0,!0)},D.prototype.dispose=function(){this.ajax&&this.ajax.dispose()},S.CORS=D,S.INT={},S.testSameDomain=function(t,e){var r=document.createElement("a");r.href=location.href;var n=r.hostname,i=r.protocol;r.href=t;var s=r.hostname||n,a=0===r.protocol.indexOf("http")?r.protocol:i;r.href=e;var o=r.hostname||n,f=0===r.protocol.indexOf("http")?r.protocol:i;return s.toLowerCase()==o.toLowerCase()&&a.toLowerCase()==f.toLowerCase()},S.addParameterToURL=function(t,e){return t+=(t.split("?")[1]?"&":"?")+e},S.toQueryString=function(t,e){var r,n=S.isDefined(e)?e+(e.indexOf("?")>-1?"&":"?"):"";if(t)for(var i in t)r=t[i],S.isString(r)||(r=JSON.stringify(r)),n+=encodeURIComponent(i)+"="+encodeURIComponent(r)+"&";return n},S.hash=function(t){var e=t.split("_");return 3*e[0]+1357+""+(9*e[1]+58)},S.hashCode=function(t){var e,r=0,n="";if(0===t.length)return r;for(e=0;e<t.length;e++)n=t.charCodeAt(e),r=(r<<5)-r+n,r&=r;return r},S.testAgainstSearch=function(t,e){var r,n,i;if(t=t.replace(/^\s+|\s+$/g,"").replace(/[\*]{2,}/g,"*").toLowerCase(),e=e.toLowerCase(),"*"==t)return!0;for(n=[];t.indexOf("*")>-1;)t.indexOf("*")>0&&n.push(t.substr(0,t.indexOf("*"))),n.push("*"),t=t.substr(t.indexOf("*")+1);for(t.length>0&&n.push(t),r=0!==n.length,i=0;i<n.length;i++)if(t=n[i],"*"==t){if(n.length>i+1){if(i++,e.indexOf(n[i])==-1){r=!1;break}e=e.substr(e.indexOf(n[i])+n[i].length)}if(i==n.length-1&&"*"!==n[i]&&e!=n[i]&&e!=n[i]+"/"&&n[i]!=e+"/"&&e.length>0&&"/"!=e){r=!1;break}}else{if(e.substr(0,t.length)!=t&&e!=t+"/"&&t!=e+"/"){r=!1;break}if(e=e.substr(t.length),i==n.length-1&&e.length>0&&"/"!=e){r=!1;break}}return!!r},S.getRootDomain=function(t){t=((t||window.location.hostname)+"").toLowerCase(),t=t.replace("https://","").replace("http://","");var e=t.indexOf("/");if(e>-1&&(t=t.substr(0,e)),e=t.indexOf("?"),e>-1&&(t=t.substr(0,e)),e=t.indexOf(":"),e>-1&&(t=t.substr(0,e)),t.indexOf("localhost")>-1||0===t.replace(/[0-9\.]/g,"").length)return t;var r=t.split("."),n=r.length;return r.length>2&&"co"==r[n-2]?r[n-3]+"."+r[n-2]+"."+r[n-1]:r.length>1?r[n-2]+"."+r[n-1]:t},S.storageTypes={CK:"COOKIE",MC:"MICROCOOKIE",CL:"COOKIELESS",DS:"DOMSTORAGE"},S.persistDataType={GENERAL:"GENERAL",TRACKER:"TRACKER"};var N=function(config,t,e){var r=S.storageTypes;this.cfg=config||{config:{persistence:r.MC}};var n=this.pers=this.cfg.config.persistence.toUpperCase(),i=new Date,s={path:"/",domain:S.getRootDomain(),secure:!1,encode:!0,expires:new Date(i.getFullYear()+20,i.getMonth(),i.getDate()).toGMTString()};S.ext(this,{_storageKey:"_fsspl_",isReady:!1,_healthyServices:["brain"],_lastMaint:S.now(),_lastSave:S.now(),_lastSync:S.now(),defaultExpire:7776e6,ready:new S.FSEvent,onCommit:new S.FSEvent,onSync:new S.FSEvent,trackerReady:new S.FSEvent,maxExpire:-1,_data:{when:S.now(),keys:{}},_keyEvents:{},isStale:!1,_cThreshold:2e3,_updateTimeout:6e4,isSyncing:!1,_serverFails:0}),this.browser=t,t.ready.subscribe(S.proxy(function(){t.supportsLocalStorage||n!=r.DS?t.isMobile&&n==r.CL&&(n=r.MC):n=r.CK,n==r.CK?(this.ckie=new S.Cookie(s),this.fr=new S.Frame(t)):n==r.MC?(this.ckie=new S.Cookie(s),this.uid=e||this.ckie.get(this._storageKey),this.uid&&(this.uid.length>64||this.uid.indexOf("{")>-1)&&(this.uid=S.generateGUID(),this.ckie.set(this._storageKey,this.uid)),this.uid||(this.uid=S.generateGUID(),this.ckie.set(this._storageKey,this.uid)),this.cors=new S.CORS(t)):n==r.CL?(this.uid=e||t.fp,this.cors=new S.CORS(t)):n==r.DS&&(this._cThreshold=500,this._updateTimeout=1e4);var i=this.ckie;i&&(i.kill("fsr.r"),i.kill("fsr.s"),i.kill("fsr.t"),i.kill("acs.t")),this._sync(S.proxy(function(){this.get("rid")||(this.uid=S.generateGUID(),this.set("rid",this.uid)),this.uid=this.get("rid"),this.setUpdateInterval(this._updateTimeout),this.pers!=S.storageTypes.CK&&this.pers!=S.storageTypes.DS||this._maint(!0),this.ready.fire(this)},this))},this),!0,!0),S.Bind(window,"unload",S.proxy(function(){this.save(!0)},this))};N.prototype.watchForChanges=function(t,e,r,n){S.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var s=t[i];this._keyEvents[s]||(this._keyEvents[s]=new S.FSEvent),this._keyEvents[s].subscribe(e,r,n)}},N.prototype.setUpdateInterval=function(t){this._updateTimeout=t,this._updateInterval&&clearInterval(this._updateInterval),this._updateInterval=setInterval(S.proxy(function(){S.now()-this._lastSync>t&&this._sync()},this),Math.min(t/2,5e3))},N.prototype._sync=function(t){if(!this.isSyncing){this.isSyncing=!0,t=t||function(){};var e,r;if(this.pers==S.storageTypes.CK){if(e=this.ckie.get(this._storageKey),e&&e.indexOf("{")>-1)return this._lastSync=S.now(),r=JSON.parse(e),this._fireChangeEvents(r.keys),r.keys=r.keys||{},this._data=r,this.onSync.fire(this),this.isSyncing=!1,void S.nextTick(t);this.isSyncing=!1,S.nextTick(t)}else if(this.pers==S.storageTypes.DS){if(e=localStorage.getItem(this._storageKey)){if(this._lastSync=S.now(),r=JSON.parse(e),r.keys=r.keys||{},this._fireChangeEvents(r.keys),this._data=r,S.nextTick(S.proxy(function(){this.onSync.fire(this)},this)),S.now()-this._data.when<3e5)return this.isSyncing=!1,void S.nextTick(t);this._lastSync=S.now(),this._data={when:S.now(),keys:{}}}this.isSyncing=!1,S.nextTick(t)}else{if(this._serverFails>5)return;S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"GET",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid,success:S.proxy(function(e){this._lastSync=S.now();var r=JSON.parse(e);this._fireChangeEvents(r.keys),this._data=r,this.isSyncing=!1,S.nextTick(S.proxy(function(){this.onSync.fire(this)},this)),t()},this),failure:function(){this._lastSync=S.now(),this.isSyncing=!1,this._serverFails++}})},this))}}},N.prototype._fireChangeEvents=function(t){var e=this;for(var r in t)(!this._data.keys[r]||this._data.keys[r].t<t[r].t)&&(this._keyEvents[r]||(this._keyEvents[r]=new S.FSEvent),S.nextTick(function(r){return function(){e._keyEvents[r].fire(r,e._data.keys[r],t[r].v)}}(r)))},N.prototype.save=function(t){if(t)this._commit();else{var e=S.now();!this._svT&&this.isStale&&(this._svT=setTimeout(S.proxy(this._commit,this),Math.max(0,this._cThreshold-(e-this._lastSave))))}},N.prototype._commit=function(){clearTimeout(this._svT),this._svT=null,this._lastSave=S.now(),this._data.when=this._lastSave;var t="";try{t=JSON.stringify(this._data)}catch(t){return}if(this.pers==S.storageTypes.CK){var e=S.ext({},this._data);for(var r in e.keys)delete e.keys[r].t;t=JSON.stringify(e),this.ckie.set(this._storageKey,t),this.onCommit.fire(this._data)}else if(this.pers==S.storageTypes.DS)localStorage.setItem(this._storageKey,t),this.onCommit.fire(this._data);else{if(this._serverFails>5)return;S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"POST",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid,data:this._data,contentType:"application/json",success:S.proxy(function(t){this._lastSync=S.now(),this._data=JSON.parse(t),this.onCommit.fire(this._data)},this),failure:S.proxy(function(){this._serverFails++},this)})},this))}this.isStale=!1},N.prototype._maint=function(t){var e,r=S.now(),n=this._data.keys,i=!1;if(r-this._lastMaint>5e3||t){for(var s in n)e=n[s],r>e.x&&(delete n[s],i=!0);this._lastMaint=r}!i||this.pers!=S.storageTypes.CK&&this.pers!=S.storageTypes.DS||this._commit()},N.prototype.set=function(t,e,r,n,i,s){this._data.keys||(this._data.keys={});var a=this._data.keys[t],o=S.now(),f=null;if(i||(i=S.persistDataType.GENERAL),r)if("number"==typeof r)f=r,this.maxExpire>0&&this.maxExpire<r&&(f=r=this.maxExpire),r=o+r;else if(r instanceof Date&&(r=r.getTime()+r,this.maxExpire>0)){var h=r-o;h>this.maxExpire&&(f=r=this.maxExpire,r=o+r)}if(this.pers!=S.storageTypes.CK&&this.pers!=S.storageTypes.DS||i!=S.persistDataType.TRACKER){if(a){var u={};u[t]={v:e,x:r||a.x,t:o},this._fireChangeEvents(u),a.v=e,a.x=r||a.x,f&&(a.ttl=f),a.t=o}else{var l={};l[t]={v:e,x:r||this.defaultExpire+o,t:o},f&&(l[t].ttl=f),this._fireChangeEvents(l),this._data.keys[t]=l[t]}this.isStale=!0,s&&this.onCommit.subscribe(s,!0,!1),this._maint(),this.save(!!n)}else this.fr&&this.fr.trackerReady.subscribe(S.proxy(function(){this.fr.broadcast(t,e,r)},this),!0,!0)},N.prototype.get=function(t){if(S.isArray(t)){for(var e={},r=0;r<t.length;r++)e[t[r]]=this.get(t[r]);return e}return this._maint(),this._data.keys||(this._data.keys={}),(this._data.keys[t]||{v:null}).v},N.prototype.erase=function(t,e,r){if(S.isArray(t))for(var n=0;n<t.length;n++)this.erase(t[n]);else this._maint(),delete this._data.keys[t],e&&this.onCommit.subscribe(e,!0,!1),this.pers==S.storageTypes.CL||this.pers==S.storageTypes.MC?S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"DELETE",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid+"/"+encodeURIComponent(t),contentType:"application/json",success:S.proxy(function(t){this._lastSync=S.now(),this.onCommit.fire(this._data)},this),failure:S.proxy(function(){this._serverFails++},this)})},this)):this.save(!!r)},N.prototype.reset=function(t){this._data.keys={},t&&this.onCommit.subscribe(t,!0,!1),this.pers==S.storageTypes.CK?(this.ckie.kill(this._storageKey),this.onCommit.fire()):this.pers==S.storageTypes.DS?(localStorage.removeItem(this._storageKey),this.onCommit.fire()):S.Healthy(this.browser,this._healthyServices,S.proxy(function(){this.cors.send({method:"DELETE",url:this.cfg.config.brain_url+"/state/"+S.siteKey+"/"+this.uid,success:S.proxy(function(){this._lastSync=S.now()-1e4,this.onCommit.fire()},this),failure:S.proxy(function(){this._serverFails++},this)})},this))},N.prototype.setMaxKeyExpiration=function(t){this.maxExpire=this.defaultExpire=t;var e,r=S.now(),n=this._data.keys;for(var i in n){e=n[i];var s=e.x-r;(s>t||e.ttl>t)&&(e.ttl=t,e.x&&(e.x-=s-t))}this.save(!0)},N.prototype.getMaxKeyExpiration=function(){var t=S.now(),e=this._data.keys,r=0;for(var n in e)r=Math.max(r,e[n].x-t);return r};var F;if(S.getGlobalStore=function(config,t,e){return F||(F=new N(config,t,e)),F},S.AjaxTransport=function(t){var e={method:"POST",data:{},contentType:"application/x-www-form-urlencoded",success:function(){},failure:function(){}};this.options=S.ext(e,t)},S.AjaxTransport.prototype.send=function(t){var e=S.ext({},this.options,t||{});window.XDomainRequest&&window.navigator.userAgent.indexOf("MSIE 10")==-1?this._sendViaXDR(e):window.XMLHttpRequest&&this._sendViaXHR(e),e=null},S.AjaxTransport.prototype.dispose=function(){S.superDispose(this.options)},S.AjaxTransport.isSupported=function(){return!0},S.AjaxTransport.initialize=function(t){t.call(S.AjaxTransport)},S.AjaxTransport.prototype._sendViaXHR=function(t){var e=new window.XMLHttpRequest,r=t.contentType?t.contentType.toLowerCase().indexOf("json")>-1?"application/json; charset=utf-8":t.contentType:"application/x-www-form-urlencoded",n=r.toLowerCase().indexOf("json")>-1,i=n?"GET"==t.method?encodeURIComponent(JSON.stringify(t.data)):JSON.stringify(t.data):S.isDefined(t.skipEncode)&&t.skipEncode===!0?t.data:S.toQueryString(t.data),s=t.url;t.failure=t.failure||function(){},"GET"==t.method&&i&&i.length>0&&(s+=s.indexOf("?")>-1?"&":"?",s+=i);try{e.open(t.method,s,!0)}catch(t){return}e.setRequestHeader("Accept","*/*"),e.setRequestHeader("Content-Type",r),e.timeout=t.timeout||0,e.onreadystatechange=function(t,e){return function(){4==e.readyState&&200==e.status?t.success&&t.success.apply(t,[e.responseText]):4==e.readyState&&200!=e.status&&t.failure&&t.failure.apply(t,[e.responseText])}}(t,e),e.send(i)},S.AjaxTransport.prototype._sendViaXDR=function(t){var e=S.isDefined(t.skipEncode)&&t.skipEncode===!0&&"GET"!==t.method.toUpperCase()?t.data:S.toQueryString(t.data,null,!1),r=t.url;t.failure=t.failure||function(){},"GET"==t.method&&e&&e.length>0&&(e=e.replace("?",""),r+=r.indexOf("?")>-1?"&":"?",r+=e);var n=new window.XDomainRequest;n.onerror=t.failure||function(){},n.ontimeout=t.failure||function(){},n.onprogress=function(){},n.onload=function(t,e){return function(){e.success(t.responseText),t=null,e=null}}(n,t),n.timeout=6e4;try{n.open(t.method,r)}catch(e){return void(t.failure&&t.failure(e))}S.nextTick(function(){e?(S.isString(e)||(e=JSON.stringify(e)),n.send(e)):n.send()})},S.FULL_DAY=864e5,S.now=function(){return+new Date},S.startTime=S.now(),!window.btoa){var U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);window.btoa=function(t){var e,r,n,i,s,a;for(n=t.length,r=0,e="";n>r;){if(i=255&t.charCodeAt(r++),r==n){e+=U.charAt(i>>2),e+=U.charAt((3&i)<<4),e+="==";break}if(s=t.charCodeAt(r++),r==n){e+=U.charAt(i>>2),e+=U.charAt((3&i)<<4|(240&s)>>4),e+=U.charAt((15&s)<<2),e+="=";break}a=t.charCodeAt(r++),e+=U.charAt(i>>2),e+=U.charAt((3&i)<<4|(240&s)>>4),e+=U.charAt((15&s)<<2|(192&a)>>6),e+=U.charAt(63&a)}return e},window.atob=function(t){var e,r,n,i,s,a,o;for(a=t.length,s=0,o="";a>s;){do e=M[255&t.charCodeAt(s++)];while(a>s&&-1==e);if(-1==e)break;do r=M[255&t.charCodeAt(s++)];while(a>s&&-1==r);if(-1==r)break;o+=String.fromCharCode(e<<2|(48&r)>>4);do{if(n=255&t.charCodeAt(s++),61==n)return o;n=M[n]}while(a>s&&-1==n);if(-1==n)break;o+=String.fromCharCode((15&r)<<4|(60&n)>>2);do{if(i=255&t.charCodeAt(s++),61==i)return o;i=M[i]}while(a>s&&-1==i);if(-1==i)break;o+=String.fromCharCode((3&n)<<6|i)}return o}}S.b64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))},S.b64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))};var j=function(t,e){this.loadSuccess=new S.FSEvent,this.loadFailure=new S.FSEvent,this.st=document.createElement("script"),this.st.type="text/javascript",this.st.src=t,e&&(this.st.id=e),this.br=new S.Browser,"undefined"!=typeof this.st.addEventListener?this._loadOnOthers():"undefined"!=typeof this.st.attachEvent&&this._loadOnIE()};j.prototype._loadOnIE=function(){var t=this,e=this.st;e.onreadystatechange=function(){3==e.readyState&&(e.onreadystatechange=function(){t.loadSuccess.fire(e.src),t.loadFailure=null},t.loadFailure&&t.loadFailure.fire(e.src))},document.body.appendChild(e)},j.prototype._loadOnOthers=function(){this.st.addEventListener("load",S.proxy(function(){this.loadSuccess.fire(this.st.src)},this),!1),this.st.addEventListener("error",S.proxy(function(){this.loadFailure.fire(this.st.src)},this),!1),document.body.appendChild(this.st)};var P={Util:{stringToByteArray:function(t){var e,r,n=t.split("");for(e=0,r=n.length;e<r;e++)n[e]=(255&n[e].charCodeAt(0))>>>0;return n}}};P.CompressionMethod={DEFLATE:8,RESERVED:15},P.BitStream=function(t,e){if(this.index="number"==typeof e?e:0,this.bitindex=0,this.buffer=t instanceof(_?Uint8Array:Array)?t:new(_?Uint8Array:Array)(P.BitStream.DefaultBlockSize),2*this.buffer.length<=this.index)throw new Error("invalid index");this.buffer.length<=this.index&&this.expandBuffer()},P.BitStream.DefaultBlockSize=32768,P.BitStream.prototype.expandBuffer=function(){var t,e=this.buffer,r=e.length,n=new(_?Uint8Array:Array)(r<<1);if(_)n.set(e);else for(t=0;t<r;++t)n[t]=e[t];return this.buffer=n},P.BitStream.prototype.writeBits=function(t,e,r){function n(t){return P.BitStream.ReverseTable[255&t]<<24|P.BitStream.ReverseTable[t>>>8&255]<<16|P.BitStream.ReverseTable[t>>>16&255]<<8|P.BitStream.ReverseTable[t>>>24&255]}var i,s=this.buffer,a=this.index,o=this.bitindex,f=s[a];if(r&&e>1&&(t=e>8?n(t)>>32-e:P.BitStream.ReverseTable[t]>>8-e),e+o<8)f=f<<e|t,o+=e;else for(i=0;i<e;++i)f=f<<1|t>>e-i-1&1,8===++o&&(o=0,s[a++]=P.BitStream.ReverseTable[f],f=0,a===s.length&&(s=this.expandBuffer()));s[a]=f,this.buffer=s,this.bitindex=o,this.index=a},P.BitStream.prototype.finish=function(){var t,e=this.buffer,r=this.index;return this.bitindex>0&&(e[r]<<=8-this.bitindex,e[r]=P.BitStream.ReverseTable[e[r]],r++),_?t=e.subarray(0,r):(e.length=r,t=e),t},P.BitStream.ReverseTable=function(t){return t}(function(){var t,e=new(_?Uint8Array:Array)(256);for(t=0;t<256;++t)e[t]=function(t){var e=t,r=7;for(t>>>=1;t;t>>>=1)e<<=1,e|=1&t,--r;return(e<<r&255)>>>0}(t);return e}()),P.Huffman={},P.Huffman.buildHuffmanTable=function(t){var e,r,n,i,s,a,o,f,h,u,l,c=t.length,p=0,d=Number.POSITIVE_INFINITY;for(f=0,h=c;f<h;++f)t[f]>p&&(p=t[f]),t[f]<d&&(d=t[f]);for(e=1<<p,r=new(_?Uint32Array:Array)(e),
n=1,i=0,s=2;n<=p;){for(f=0;f<c;++f)if(t[f]===n){for(a=0,o=i,u=0;u<n;++u)a=a<<1|1&o,o>>=1;for(l=n<<16|f,u=a;u<e;u+=s)r[u]=l;++i}++n,i<<=1,s<<=1}return[r,p,d]},P.Heap=function(t){this.buffer=new(_?Uint16Array:Array)(2*t),this.length=0},P.Heap.prototype.getParent=function(t){return 2*((t-2)/4|0)},P.Heap.prototype.getChild=function(t){return 2*t+2},P.Heap.prototype.push=function(t,e){var r,n,i,s=this.buffer;for(r=this.length,s[this.length++]=e,s[this.length++]=t;r>0&&(n=this.getParent(r),s[r]>s[n]);)i=s[r],s[r]=s[n],s[n]=i,i=s[r+1],s[r+1]=s[n+1],s[n+1]=i,r=n;return this.length},P.Heap.prototype.pop=function(){var t,e,r,n,i,s=this.buffer;for(e=s[0],t=s[1],this.length-=2,s[0]=s[this.length],s[1]=s[this.length+1],i=0;;){if(n=this.getChild(i),n>=this.length)break;if(n+2<this.length&&s[n+2]>s[n]&&(n+=2),!(s[n]>s[i]))break;r=s[i],s[i]=s[n],s[n]=r,r=s[i+1],s[i+1]=s[n+1],s[n+1]=r,i=n}return{index:t,value:e,length:this.length}},P.RawDeflate=function(t,e){this.compressionType=P.RawDeflate.CompressionType.DYNAMIC,this.lazy=0,this.freqsLitLen,this.freqsDist,this.input=_&&t instanceof Array?new Uint8Array(t):t,this.output,this.op=0,e&&(e.lazy&&(this.lazy=e.lazy),"number"==typeof e.compressionType&&(this.compressionType=e.compressionType),e.outputBuffer&&(this.output=_&&e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.op=e.outputIndex)),this.output||(this.output=new(_?Uint8Array:Array)(32768))},P.RawDeflate.CompressionType={NONE:0,FIXED:1,DYNAMIC:2,RESERVED:3},P.RawDeflate.Lz77MinLength=3,P.RawDeflate.Lz77MaxLength=258,P.RawDeflate.WindowSize=32768,P.RawDeflate.MaxCodeLength=16,P.RawDeflate.HUFMAX=286,P.RawDeflate.FixedHuffmanTable=function(){var t,e=[];for(t=0;t<288;t++)switch(!0){case t<=143:e.push([t+48,8]);break;case t<=255:e.push([t-144+400,9]);break;case t<=279:e.push([t-256+0,7]);break;case t<=287:e.push([t-280+192,8]);break;default:throw"invalid literal: "+t}return e}(),P.RawDeflate.prototype.compress=function(){var t,e,r,n=this.input;switch(this.compressionType){case P.RawDeflate.CompressionType.NONE:for(e=0,r=n.length;e<r;)t=_?n.subarray(e,e+65535):n.slice(e,e+65535),e+=t.length,this.makeNocompressBlock(t,e===r);break;case P.RawDeflate.CompressionType.FIXED:this.output=this.makeFixedHuffmanBlock(n,!0),this.op=this.output.length;break;case P.RawDeflate.CompressionType.DYNAMIC:this.output=this.makeDynamicHuffmanBlock(n,!0),this.op=this.output.length;break;default:throw"invalid compression type"}return this.output},P.RawDeflate.prototype.makeNocompressBlock=function(t,e){var r,n,i,s,a,o,f=this.output,h=this.op;if(_){for(f=new Uint8Array(this.output.buffer);f.length<=h+t.length+5;)f=new Uint8Array(f.length<<1);f.set(this.output)}if(r=e?1:0,n=P.RawDeflate.CompressionType.NONE,f[h++]=r|n<<1,i=t.length,s=~i+65536&65535,f[h++]=255&i,f[h++]=i>>>8&255,f[h++]=255&s,f[h++]=s>>>8&255,_)f.set(t,h),h+=t.length,f=f.subarray(0,h);else{for(a=0,o=t.length;a<o;++a)f[h++]=t[a];f.length=h}return this.op=h,this.output=f,f},P.RawDeflate.prototype.makeFixedHuffmanBlock=function(t,e){var r,n,i,s=new P.BitStream(_?new Uint8Array(this.output.buffer):this.output,this.op);return r=e?1:0,n=P.RawDeflate.CompressionType.FIXED,s.writeBits(r,1,!0),s.writeBits(n,2,!0),i=this.lz77(t),this.fixedHuffman(i,s),s.finish()},P.RawDeflate.prototype.makeDynamicHuffmanBlock=function(t,e){var r,n,i,s,a,o,f,h,u,l,c,p,d,g,y,w,b,m=new P.BitStream(_?new Uint8Array(this.output.buffer):this.output,this.op),v=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x=new Array(19);for(r=e?1:0,n=P.RawDeflate.CompressionType.DYNAMIC,m.writeBits(r,1,!0),m.writeBits(n,2,!0),i=this.lz77(t),f=this.getLengths_(this.freqsLitLen,15),h=this.getCodesFromLengths_(f),u=this.getLengths_(this.freqsDist,7),l=this.getCodesFromLengths_(u),s=286;s>257&&0===f[s-1];s--);for(a=30;a>1&&0===u[a-1];a--);for(c=this.getTreeSymbols_(s,f,a,u),p=this.getLengths_(c.freqs,7),w=0;w<19;w++)x[w]=p[v[w]];for(o=19;o>4&&0===x[o-1];o--);for(d=this.getCodesFromLengths_(p),m.writeBits(s-257,5,!0),m.writeBits(a-1,5,!0),m.writeBits(o-4,4,!0),w=0;w<o;w++)m.writeBits(x[w],3,!0);for(w=0,b=c.codes.length;w<b;w++)if(g=c.codes[w],m.writeBits(d[g],p[g],!0),g>=16){switch(w++,g){case 16:y=2;break;case 17:y=3;break;case 18:y=7;break;default:throw"invalid code: "+g}m.writeBits(c.codes[w],y,!0)}return this.dynamicHuffman(i,[h,f],[l,u],m),m.finish()},P.RawDeflate.prototype.dynamicHuffman=function(t,e,r,n){var i,s,a,o,f,h,u,l;for(f=e[0],h=e[1],u=r[0],l=r[1],i=0,s=t.length;i<s;++i)if(a=t[i],n.writeBits(f[a],h[a],!0),a>256)n.writeBits(t[++i],t[++i],!0),o=t[++i],n.writeBits(u[o],l[o],!0),n.writeBits(t[++i],t[++i],!0);else if(256===a)break;return n},P.RawDeflate.prototype.fixedHuffman=function(t,e){var r,n,i;for(r=0,n=t.length;r<n;r++)if(i=t[r],P.BitStream.prototype.writeBits.apply(e,P.RawDeflate.FixedHuffmanTable[i]),i>256)e.writeBits(t[++r],t[++r],!0),e.writeBits(t[++r],5),e.writeBits(t[++r],t[++r],!0);else if(256===i)break;return e},P.RawDeflate.Lz77Match=function(t,e){this.length=t,this.backwardDistance=e},P.RawDeflate.Lz77Match.LengthCodeTable=function(t){return _?new Uint32Array(t):t}(function(){function t(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case t<=12:return[265,t-11,1];case t<=14:return[266,t-13,1];case t<=16:return[267,t-15,1];case t<=18:return[268,t-17,1];case t<=22:return[269,t-19,2];case t<=26:return[270,t-23,2];case t<=30:return[271,t-27,2];case t<=34:return[272,t-31,2];case t<=42:return[273,t-35,3];case t<=50:return[274,t-43,3];case t<=58:return[275,t-51,3];case t<=66:return[276,t-59,3];case t<=82:return[277,t-67,4];case t<=98:return[278,t-83,4];case t<=114:return[279,t-99,4];case t<=130:return[280,t-115,4];case t<=162:return[281,t-131,5];case t<=194:return[282,t-163,5];case t<=226:return[283,t-195,5];case t<=257:return[284,t-227,5];case 258===t:return[285,t-258,0];default:throw"invalid length: "+t}}var e,r,n=[];for(e=3;e<=258;e++)r=t(e),n[e]=r[2]<<24|r[1]<<16|r[0];return n}()),P.RawDeflate.Lz77Match.prototype.getDistanceCode_=function(t){var e;switch(!0){case 1===t:e=[0,t-1,0];break;case 2===t:e=[1,t-2,0];break;case 3===t:e=[2,t-3,0];break;case 4===t:e=[3,t-4,0];break;case t<=6:e=[4,t-5,1];break;case t<=8:e=[5,t-7,1];break;case t<=12:e=[6,t-9,2];break;case t<=16:e=[7,t-13,2];break;case t<=24:e=[8,t-17,3];break;case t<=32:e=[9,t-25,3];break;case t<=48:e=[10,t-33,4];break;case t<=64:e=[11,t-49,4];break;case t<=96:e=[12,t-65,5];break;case t<=128:e=[13,t-97,5];break;case t<=192:e=[14,t-129,6];break;case t<=256:e=[15,t-193,6];break;case t<=384:e=[16,t-257,7];break;case t<=512:e=[17,t-385,7];break;case t<=768:e=[18,t-513,8];break;case t<=1024:e=[19,t-769,8];break;case t<=1536:e=[20,t-1025,9];break;case t<=2048:e=[21,t-1537,9];break;case t<=3072:e=[22,t-2049,10];break;case t<=4096:e=[23,t-3073,10];break;case t<=6144:e=[24,t-4097,11];break;case t<=8192:e=[25,t-6145,11];break;case t<=12288:e=[26,t-8193,12];break;case t<=16384:e=[27,t-12289,12];break;case t<=24576:e=[28,t-16385,13];break;case t<=32768:e=[29,t-24577,13];break;default:throw"invalid distance"}return e},P.RawDeflate.Lz77Match.prototype.toLz77Array=function(){var t,e=this.length,r=this.backwardDistance,n=[],i=0;return t=P.RawDeflate.Lz77Match.LengthCodeTable[e],n[i++]=65535&t,n[i++]=t>>16&255,n[i++]=t>>24,t=this.getDistanceCode_(r),n[i++]=t[0],n[i++]=t[1],n[i++]=t[2],n},P.RawDeflate.prototype.lz77=function(t){function e(t,e){var r,n,i=t.toLz77Array();for(r=0,n=i.length;r<n;++r)p[d++]=i[r];y[i[0]]++,w[i[3]]++,g=t.length+e-1,h=null}var r,n,i,s,a,o,f,h,u,l={},c=P.RawDeflate.WindowSize,p=_?new Uint16Array(2*t.length):[],d=0,g=0,y=new(_?Uint32Array:Array)(286),w=new(_?Uint32Array:Array)(30),b=this.lazy;if(!_){for(i=0;i<=285;)y[i++]=0;for(i=0;i<=29;)w[i++]=0}for(y[256]=1,r=0,n=t.length;r<n;++r){for(a=0,i=0,s=P.RawDeflate.Lz77MinLength;i<s&&r+i!==n;++i)a=a<<8|t[r+i];if(void 0===l[a]&&(l[a]=[]),o=l[a],g-- >0)o.push(r);else{for(;o.length>0&&r-o[0]>c;)o.shift();if(r+P.RawDeflate.Lz77MinLength>=n){for(h&&e(h,-1),i=0,s=n-r;i<s;++i)u=t[r+i],p[d++]=u,++y[u];break}o.length>0?(f=this.searchLongestMatch_(t,r,o),h?h.length<f.length?(u=t[r-1],p[d++]=u,++y[u],e(f,0)):e(h,-1):f.length<b?h=f:e(f,0)):h?e(h,-1):(u=t[r],p[d++]=u,++y[u]),o.push(r)}}return p[d++]=256,y[256]++,this.freqsLitLen=y,this.freqsDist=w,_?p.subarray(0,d):p},P.RawDeflate.prototype.searchLongestMatch_=function(t,e,r){var n,i,s,a,o,f,h=0,u=t.length;t:for(a=0,f=r.length;a<f;a++){if(n=r[f-a-1],s=P.RawDeflate.Lz77MinLength,h>P.RawDeflate.Lz77MinLength){for(o=h;o>P.RawDeflate.Lz77MinLength;o--)if(t[n+o-1]!==t[e+o-1])continue t;s=h}for(;s<P.RawDeflate.Lz77MaxLength&&e+s<u&&t[n+s]===t[e+s];)++s;if(s>h&&(i=n,h=s),s===P.RawDeflate.Lz77MaxLength)break}return new P.RawDeflate.Lz77Match(h,e-i)},P.RawDeflate.prototype.getTreeSymbols_=function(t,e,r,n){var i,s,a,o,f,h,u=new(_?Uint32Array:Array)(t+r),l=new(_?Uint32Array:Array)(316),c=new(_?Uint8Array:Array)(19);for(s=0,i=0;i<t;i++)u[s++]=e[i];for(i=0;i<r;i++)u[s++]=n[i];if(!_)for(i=0,o=c.length;i<o;++i)c[i]=0;for(f=0,i=0,o=u.length;i<o;i+=s){for(s=1;i+s<o&&u[i+s]===u[i];++s);if(a=s,0===u[i])if(a<3)for(;a-- >0;)l[f++]=0,c[0]++;else for(;a>0;)h=a<138?a:138,h>a-3&&h<a&&(h=a-3),h<=10?(l[f++]=17,l[f++]=h-3,c[17]++):(l[f++]=18,l[f++]=h-11,c[18]++),a-=h;else if(l[f++]=u[i],c[u[i]]++,a--,a<3)for(;a-- >0;)l[f++]=u[i],c[u[i]]++;else for(;a>0;)h=a<6?a:6,h>a-3&&h<a&&(h=a-3),l[f++]=16,l[f++]=h-3,c[16]++,a-=h}return{codes:_?l.subarray(0,f):l.slice(0,f),freqs:c}},P.RawDeflate.prototype.getLengths_=function(t,e){var r,n,i,s,a,o=t.length,f=new P.Heap(2*P.RawDeflate.HUFMAX),h=new(_?Uint8Array:Array)(o);if(!_)for(s=0;s<o;s++)h[s]=0;for(s=0;s<o;++s)t[s]>0&&f.push(s,t[s]);if(r=new Array(f.length/2),n=new(_?Uint32Array:Array)(f.length/2),1===r.length)return h[f.pop().index]=1,h;for(s=0,a=f.length/2;s<a;++s)r[s]=f.pop(),n[s]=r[s].value;for(i=this.reversePackageMerge_(n,n.length,e),s=0,a=r.length;s<a;++s)h[r[s].index]=i[s];return h},P.RawDeflate.prototype.reversePackageMerge_=function(t,e,r){function n(t){var r=p[t][d[t]];r===e?(n(t+1),n(t+1)):--l[r],++d[t]}var i,s,a,o,f,h=new(_?Uint16Array:Array)(r),u=new(_?Uint8Array:Array)(r),l=new(_?Uint8Array:Array)(e),c=new Array(r),p=new Array(r),d=new Array(r),g=(1<<r)-e,y=1<<r-1;for(h[r-1]=e,s=0;s<r;++s)g<y?u[s]=0:(u[s]=1,g-=y),g<<=1,h[r-2-s]=(h[r-1-s]/2|0)+e;for(h[0]=u[0],c[0]=new Array(h[0]),p[0]=new Array(h[0]),s=1;s<r;++s)h[s]>2*h[s-1]+u[s]&&(h[s]=2*h[s-1]+u[s]),c[s]=new Array(h[s]),p[s]=new Array(h[s]);for(i=0;i<e;++i)l[i]=r;for(a=0;a<h[r-1];++a)c[r-1][a]=t[a],p[r-1][a]=a;for(i=0;i<r;++i)d[i]=0;for(1===u[r-1]&&(--l[0],++d[r-1]),s=r-2;s>=0;--s){for(i=0,o=0,f=d[s+1],a=0;a<h[s];a++)o=c[s+1][f]+c[s+1][f+1],o>t[i]?(c[s][a]=o,p[s][a]=e,f+=2):(c[s][a]=t[i],p[s][a]=i,++i);d[s]=0,1===u[s]&&n(s)}return l},P.RawDeflate.prototype.getCodesFromLengths_=function(t){var e,r,n,i,s=new(_?Uint16Array:Array)(t.length),a=[],o=[],f=0;for(e=0,r=t.length;e<r;e++)a[t[e]]=(0|a[t[e]])+1;for(e=1,r=P.RawDeflate.MaxCodeLength;e<=r;e++)o[e]=f,f+=0|a[e],f<<=1;for(e=0,r=t.length;e<r;e++)for(f=o[t[e]],o[t[e]]+=1,s[e]=0,n=0,i=t[e];n<i;n++)s[e]=s[e]<<1|1&f,f>>>=1;return s};var H=P.Huffman.buildHuffmanTable;P.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=ZLIB_RAW_INFLATE_BUFFER_SIZE,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=_?new Uint8Array(t):t,this.output,this.op,this.bfinal=!1,this.bufferType=P.RawInflate.BufferType.ADAPTIVE,this.resize=!1,this.prev,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case P.RawInflate.BufferType.BLOCK:this.op=P.RawInflate.MaxBackwardLength,this.output=new(_?Uint8Array:Array)(P.RawInflate.MaxBackwardLength+this.bufferSize+P.RawInflate.MaxCopyLength);break;case P.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new(_?Uint8Array:Array)(this.bufferSize),this.expandBuffer=this.expandBufferAdaptive,this.concatBuffer=this.concatBufferDynamic,this.decodeHuffman=this.decodeHuffmanAdaptive;break;default:throw new Error("invalid inflate mode")}},P.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},P.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()},P.RawInflate.MaxBackwardLength=32768,P.RawInflate.MaxCopyLength=258,P.RawInflate.Order=function(t){return _?new Uint16Array(t):t}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P.RawInflate.LengthCodeTable=function(t){return _?new Uint16Array(t):t}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),P.RawInflate.LengthExtraTable=function(t){return _?new Uint8Array(t):t}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),P.RawInflate.DistCodeTable=function(t){return _?new Uint16Array(t):t}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),P.RawInflate.DistExtraTable=function(t){return _?new Uint8Array(t):t}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),P.RawInflate.FixedLiteralLengthTable=function(t){return t}(function(){var t,e,r=new(_?Uint8Array:Array)(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return H(r)}()),P.RawInflate.FixedDistanceTable=function(t){return t}(function(){var t,e,r=new(_?Uint8Array:Array)(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return H(r)}()),P.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},P.RawInflate.prototype.readBits=function(t){for(var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,s=this.ip,a=i.length;n<t;){if(s>=a)throw new Error("input buffer is broken");r|=i[s++]<<n,n+=8}return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=s,e},P.RawInflate.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,s=this.input,a=this.ip,o=s.length,f=t[0],h=t[1];i<h&&!(a>=o);)n|=s[a++]<<i,i+=8;return e=f[n&(1<<h)-1],r=e>>>16,this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=a,65535&e},P.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,r,n=this.input,i=this.ip,s=this.output,a=this.op,o=n.length,f=s.length;if(this.bitsbuf=0,this.bitsbuflen=0,i+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=n[i++]|n[i++]<<8,i+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e=n[i++]|n[i++]<<8,t===~e)throw new Error("invalid uncompressed block header: length verify");if(i+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case P.RawInflate.BufferType.BLOCK:for(;a+t>s.length;){if(r=f-a,t-=r,_)s.set(n.subarray(i,i+r),a),a+=r,i+=r;else for(;r--;)s[a++]=n[i++];this.op=a,s=this.expandBuffer(),a=this.op}break;case P.RawInflate.BufferType.ADAPTIVE:for(;a+t>s.length;)s=this.expandBuffer({fixRatio:2});break;default:throw new Error("invalid inflate mode")}if(_)s.set(n.subarray(i,i+t),a),a+=t,i+=t;else for(;t--;)s[a++]=n[i++];this.ip=i,this.op=a,this.output=s},P.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(P.RawInflate.FixedLiteralLengthTable,P.RawInflate.FixedDistanceTable)},P.RawInflate.prototype.parseDynamicHuffmanBlock=function(){function t(t,e,r){var n,i,s,a=this.prev;for(s=0;s<t;)switch(n=this.readCodeByTable(e)){case 16:for(i=3+this.readBits(2);i--;)r[s++]=a;break;case 17:for(i=3+this.readBits(3);i--;)r[s++]=0;a=0;break;case 18:for(i=11+this.readBits(7);i--;)r[s++]=0;a=0;break;default:r[s++]=n,a=n}return this.prev=a,r}var e,r,n,i,s=this.readBits(5)+257,a=this.readBits(5)+1,o=this.readBits(4)+4,f=new(_?Uint8Array:Array)(P.RawInflate.Order.length);for(i=0;i<o;++i)f[P.RawInflate.Order[i]]=this.readBits(3);if(!_)for(i=o,o=f.length;i<o;++i)f[P.RawInflate.Order[i]]=0;e=H(f),r=new(_?Uint8Array:Array)(s),n=new(_?Uint8Array:Array)(a),this.prev=0,this.decodeHuffman(H(t.call(this,s,e,r)),H(t.call(this,a,e,n)))},P.RawInflate.prototype.decodeHuffman=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,s,a,o,f=r.length-P.RawInflate.MaxCopyLength;256!==(i=this.readCodeByTable(t));)if(i<256)n>=f&&(this.op=n,r=this.expandBuffer(),n=this.op),r[n++]=i;else for(s=i-257,o=P.RawInflate.LengthCodeTable[s],P.RawInflate.LengthExtraTable[s]>0&&(o+=this.readBits(P.RawInflate.LengthExtraTable[s])),i=this.readCodeByTable(e),a=P.RawInflate.DistCodeTable[i],P.RawInflate.DistExtraTable[i]>0&&(a+=this.readBits(P.RawInflate.DistExtraTable[i])),n>=f&&(this.op=n,r=this.expandBuffer(),n=this.op);o--;)r[n]=r[n++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},P.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,s,a,o,f=r.length;256!==(i=this.readCodeByTable(t));)if(i<256)n>=f&&(r=this.expandBuffer(),f=r.length),r[n++]=i;else for(s=i-257,o=P.RawInflate.LengthCodeTable[s],P.RawInflate.LengthExtraTable[s]>0&&(o+=this.readBits(P.RawInflate.LengthExtraTable[s])),i=this.readCodeByTable(e),a=P.RawInflate.DistCodeTable[i],P.RawInflate.DistExtraTable[i]>0&&(a+=this.readBits(P.RawInflate.DistExtraTable[i])),n+o>f&&(r=this.expandBuffer(),f=r.length);o--;)r[n]=r[n++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},P.RawInflate.prototype.expandBuffer=function(t){var e,r,n=new(_?Uint8Array:Array)(this.op-P.RawInflate.MaxBackwardLength),i=this.op-P.RawInflate.MaxBackwardLength,s=this.output;if(_)n.set(s.subarray(P.RawInflate.MaxBackwardLength,n.length));else for(e=0,r=n.length;e<r;++e)n[e]=s[e+P.RawInflate.MaxBackwardLength];if(this.blocks.push(n),this.totalpos+=n.length,_)s.set(s.subarray(i,i+P.RawInflate.MaxBackwardLength));else for(e=0;e<P.RawInflate.MaxBackwardLength;++e)s[e]=s[i+e];return this.op=P.RawInflate.MaxBackwardLength,s},P.RawInflate.prototype.expandBufferAdaptive=function(t){var e,r,n,i,s=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(s=t.fixRatio),"number"==typeof t.addRatio&&(s+=t.addRatio)),s<2?(r=(a.length-this.ip)/this.currentLitlenTable[2],i=r/2*258|0,n=i<o.length?o.length+i:o.length<<1):n=o.length*s,_?(e=new Uint8Array(n),e.set(o)):e=o,this.output=e,this.output},P.RawInflate.prototype.concatBuffer=function(){var t,e,r,n,i,s=0,a=this.totalpos+(this.op-P.RawInflate.MaxBackwardLength),o=this.output,f=this.blocks,h=new(_?Uint8Array:Array)(a);if(0===f.length)return _?this.output.subarray(P.RawInflate.MaxBackwardLength,this.op):this.output.slice(P.RawInflate.MaxBackwardLength,this.op);for(e=0,r=f.length;e<r;++e)for(t=f[e],n=0,i=t.length;n<i;++n)h[s++]=t[n];for(e=P.RawInflate.MaxBackwardLength,r=this.op;e<r;++e)h[s++]=o[e];return this.blocks=[],this.buffer=h,this.buffer},P.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return _?this.resize?(t=new Uint8Array(e),t.set(this.output.subarray(0,e))):t=this.output.subarray(0,e):(this.output.length>e&&(this.output.length=e),t=this.output),this.buffer=t,this.buffer},P.RawInflate=function(t,e){switch(this.buffer,this.blocks=[],this.bufferSize=32768,this.totalpos=0,this.ip=0,this.bitsbuf=0,this.bitsbuflen=0,this.input=_?new Uint8Array(t):t,this.output,this.op,this.bfinal=!1,this.bufferType=P.RawInflate.BufferType.ADAPTIVE,this.resize=!1,this.prev,!e&&(e={})||(e.index&&(this.ip=e.index),e.bufferSize&&(this.bufferSize=e.bufferSize),e.bufferType&&(this.bufferType=e.bufferType),e.resize&&(this.resize=e.resize)),this.bufferType){case P.RawInflate.BufferType.BLOCK:this.op=P.RawInflate.MaxBackwardLength,this.output=new(_?Uint8Array:Array)(P.RawInflate.MaxBackwardLength+this.bufferSize+P.RawInflate.MaxCopyLength);break;case P.RawInflate.BufferType.ADAPTIVE:this.op=0,this.output=new(_?Uint8Array:Array)(this.bufferSize),this.expandBuffer=this.expandBufferAdaptive,this.concatBuffer=this.concatBufferDynamic,this.decodeHuffman=this.decodeHuffmanAdaptive}},P.RawInflate.BufferType={BLOCK:0,ADAPTIVE:1},P.RawInflate.prototype.decompress=function(){for(;!this.bfinal;)this.parseBlock();return this.concatBuffer()},P.RawInflate.MaxBackwardLength=32768,P.RawInflate.MaxCopyLength=258,P.RawInflate.Order=function(t){return _?new Uint16Array(t):t}([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),P.RawInflate.LengthCodeTable=function(t){return _?new Uint16Array(t):t}([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),P.RawInflate.LengthExtraTable=function(t){return _?new Uint8Array(t):t}([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),P.RawInflate.DistCodeTable=function(t){return _?new Uint16Array(t):t}([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),P.RawInflate.DistExtraTable=function(t){return _?new Uint8Array(t):t}([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),P.RawInflate.FixedLiteralLengthTable=function(t){return t}(function(){var t,e,r=new(_?Uint8Array:Array)(288);for(t=0,e=r.length;t<e;++t)r[t]=t<=143?8:t<=255?9:t<=279?7:8;return H(r)}()),P.RawInflate.FixedDistanceTable=function(t){return t}(function(){var t,e,r=new(_?Uint8Array:Array)(30);for(t=0,e=r.length;t<e;++t)r[t]=5;return H(r)}()),P.RawInflate.prototype.parseBlock=function(){var t=this.readBits(3);switch(1&t&&(this.bfinal=!0),t>>>=1){case 0:this.parseUncompressedBlock();break;case 1:this.parseFixedHuffmanBlock();break;case 2:this.parseDynamicHuffmanBlock();break;default:throw new Error("unknown BTYPE: "+t)}},P.RawInflate.prototype.readBits=function(t){for(var e,r=this.bitsbuf,n=this.bitsbuflen,i=this.input,s=this.ip,a=i.length;n<t;){if(s>=a)throw new Error("input buffer is broken");r|=i[s++]<<n,n+=8}return e=r&(1<<t)-1,r>>>=t,n-=t,this.bitsbuf=r,this.bitsbuflen=n,this.ip=s,e},P.RawInflate.prototype.readCodeByTable=function(t){for(var e,r,n=this.bitsbuf,i=this.bitsbuflen,s=this.input,a=this.ip,o=s.length,f=t[0],h=t[1];i<h&&!(a>=o);)n|=s[a++]<<i,i+=8;return e=f[n&(1<<h)-1],r=e>>>16,this.bitsbuf=n>>r,this.bitsbuflen=i-r,this.ip=a,65535&e},P.RawInflate.prototype.parseUncompressedBlock=function(){var t,e,r,n=this.input,i=this.ip,s=this.output,a=this.op,o=n.length,f=s.length;if(this.bitsbuf=0,this.bitsbuflen=0,i+1>=o)throw new Error("invalid uncompressed block header: LEN");if(t=n[i++]|n[i++]<<8,i+1>=o)throw new Error("invalid uncompressed block header: NLEN");if(e=n[i++]|n[i++]<<8,t===~e)throw new Error("invalid uncompressed block header: length verify");if(i+t>n.length)throw new Error("input buffer is broken");switch(this.bufferType){case P.RawInflate.BufferType.BLOCK:for(;a+t>s.length;){if(r=f-a,t-=r,_)s.set(n.subarray(i,i+r),a),a+=r,i+=r;else for(;r--;)s[a++]=n[i++];this.op=a,s=this.expandBuffer(),a=this.op}break;case P.RawInflate.BufferType.ADAPTIVE:for(;a+t>s.length;)s=this.expandBuffer({fixRatio:2});break;default:throw new Error("invalid inflate mode")}if(_)s.set(n.subarray(i,i+t),a),a+=t,i+=t;else for(;t--;)s[a++]=n[i++];this.ip=i,this.op=a,this.output=s},P.RawInflate.prototype.parseFixedHuffmanBlock=function(){this.decodeHuffman(P.RawInflate.FixedLiteralLengthTable,P.RawInflate.FixedDistanceTable)},P.RawInflate.prototype.parseDynamicHuffmanBlock=function(){function t(t,e,r){var n,i,s,a=this.prev;for(s=0;s<t;)switch(n=this.readCodeByTable(e)){case 16:for(i=3+this.readBits(2);i--;)r[s++]=a;break;case 17:for(i=3+this.readBits(3);i--;)r[s++]=0;a=0;break;case 18:for(i=11+this.readBits(7);i--;)r[s++]=0;a=0;break;default:r[s++]=n,a=n}return this.prev=a,r}var e,r,n,i,s=this.readBits(5)+257,a=this.readBits(5)+1,o=this.readBits(4)+4,f=new(_?Uint8Array:Array)(P.RawInflate.Order.length);for(i=0;i<o;++i)f[P.RawInflate.Order[i]]=this.readBits(3);if(!_)for(i=o,o=f.length;i<o;++i)f[P.RawInflate.Order[i]]=0;e=H(f),r=new(_?Uint8Array:Array)(s),n=new(_?Uint8Array:Array)(a),this.prev=0,this.decodeHuffman(H(t.call(this,s,e,r)),H(t.call(this,a,e,n)))},P.RawInflate.prototype.decodeHuffman=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,s,a,o,f=r.length-P.RawInflate.MaxCopyLength;256!==(i=this.readCodeByTable(t));)if(i<256)n>=f&&(this.op=n,r=this.expandBuffer(),n=this.op),r[n++]=i;else for(s=i-257,o=P.RawInflate.LengthCodeTable[s],P.RawInflate.LengthExtraTable[s]>0&&(o+=this.readBits(P.RawInflate.LengthExtraTable[s])),i=this.readCodeByTable(e),a=P.RawInflate.DistCodeTable[i],P.RawInflate.DistExtraTable[i]>0&&(a+=this.readBits(P.RawInflate.DistExtraTable[i])),n>=f&&(this.op=n,r=this.expandBuffer(),n=this.op);o--;)r[n]=r[n++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},P.RawInflate.prototype.decodeHuffmanAdaptive=function(t,e){var r=this.output,n=this.op;this.currentLitlenTable=t;for(var i,s,a,o,f=r.length;256!==(i=this.readCodeByTable(t));)if(i<256)n>=f&&(r=this.expandBuffer(),f=r.length),r[n++]=i;else for(s=i-257,o=P.RawInflate.LengthCodeTable[s],P.RawInflate.LengthExtraTable[s]>0&&(o+=this.readBits(P.RawInflate.LengthExtraTable[s])),i=this.readCodeByTable(e),a=P.RawInflate.DistCodeTable[i],P.RawInflate.DistExtraTable[i]>0&&(a+=this.readBits(P.RawInflate.DistExtraTable[i])),n+o>f&&(r=this.expandBuffer(),f=r.length);o--;)r[n]=r[n++-a];for(;this.bitsbuflen>=8;)this.bitsbuflen-=8,this.ip--;this.op=n},P.RawInflate.prototype.expandBuffer=function(t){var e,r,n=new(_?Uint8Array:Array)(this.op-P.RawInflate.MaxBackwardLength),i=this.op-P.RawInflate.MaxBackwardLength,s=this.output;if(_)n.set(s.subarray(P.RawInflate.MaxBackwardLength,n.length));else for(e=0,r=n.length;e<r;++e)n[e]=s[e+P.RawInflate.MaxBackwardLength];if(this.blocks.push(n),this.totalpos+=n.length,_)s.set(s.subarray(i,i+P.RawInflate.MaxBackwardLength));else for(e=0;e<P.RawInflate.MaxBackwardLength;++e)s[e]=s[i+e];return this.op=P.RawInflate.MaxBackwardLength,s},P.RawInflate.prototype.expandBufferAdaptive=function(t){var e,r,n,i,s=this.input.length/this.ip+1|0,a=this.input,o=this.output;return t&&("number"==typeof t.fixRatio&&(s=t.fixRatio),"number"==typeof t.addRatio&&(s+=t.addRatio)),s<2?(r=(a.length-this.ip)/this.currentLitlenTable[2],i=r/2*258|0,n=i<o.length?o.length+i:o.length<<1):n=o.length*s,_?(e=new Uint8Array(n),e.set(o)):e=o,this.output=e,this.output},P.RawInflate.prototype.concatBuffer=function(){var t,e,r,n,i,s=0,a=this.totalpos+(this.op-P.RawInflate.MaxBackwardLength),o=this.output,f=this.blocks,h=new(_?Uint8Array:Array)(a);if(0===f.length)return _?this.output.subarray(P.RawInflate.MaxBackwardLength,this.op):this.output.slice(P.RawInflate.MaxBackwardLength,this.op);for(e=0,r=f.length;e<r;++e)for(t=f[e],n=0,i=t.length;n<i;++n)h[s++]=t[n];for(e=P.RawInflate.MaxBackwardLength,r=this.op;e<r;++e)h[s++]=o[e];return this.blocks=[],this.buffer=h,this.buffer},P.RawInflate.prototype.concatBufferDynamic=function(){var t,e=this.op;return _?this.resize?(t=new Uint8Array(e),t.set(this.output.subarray(0,e))):t=this.output.subarray(0,e):(this.output.length>e&&(this.output.length=e),t=this.output),this.buffer=t,this.buffer},S.Async=function(t,e,r){this.isParallel=!!t,this._queue=[],this.success=e,this.fail=r,this.isPending=!0},S.Async.prototype.enqueue=function(t){this._queue.push({fn:t,resolved:!1}),(this.isParallel||1==this._queue.length)&&t.apply(this,[{resolve:S.proxy(function(){setTimeout(S.proxy(function(){this.ctx.resolve(this.cb)},this),20)},{cb:t,ctx:this}),error:S.proxy(function(){this.ctx.error(this.cb)},{cb:t,ctx:this})}])},S.Async.prototype.resolve=function(t){if(this.isPending){if(!t)throw new Error("Missing caller argument.");var e,r,n=!1;for(e=0;e<this._queue.length;e++)r=this._queue[e],r.fn===t?r.resolved=!0:r.resolved||(n=!0);if(!this.isParallel&&n){var i;for(e=0;e<this._queue.length;e++)if(r=this._queue[e],r.resolved===!1){i=r;break}if(i)return void i.fn.apply(this,[{resolve:S.proxy(function(){this.ctx.resolve(this.cb)},{cb:i.fn,ctx:this}),error:S.proxy(function(){this.ctx.error(this.cb)},{cb:i.fn,ctx:this})}])}n||(this.isPending=!1,this.success.call(this))}},S.Async.prototype.error=function(){this.isPending=!1,this.fail&&this.fail.call(this)},S.dedupe=function(t){var e,r;for(e=t.length-1;e>=0;e--)for(r=e-1;r>=0;r--)t[r]==t[e]&&t.splice(e,1);return t},S.arrayIndexOf=function(t,e){for(var r in e)if(e[r]===t)return r;return-1},S.inArray=function(t,e){return S.arrayIndexOf(t,e)!=-1},window.__fsJSONPCBr={},window.__fsJSONPCB=S.proxy(function(t){if(t){var e=t.filename,r=atob(t.contents);window.__fsJSONPCBr[e]&&window.__fsJSONPCBr[e].fire(r)}},this),S.JSONP=function(t){this._expireTimeout=null,this._networkError=new S.FSEvent,this.opts=S.ext({success:function(){},failure:function(){},timeout:5e3},t)},S.JSONP.prototype.get=function(t,e){var r=t.indexOf("?")>-1?t.substr(t.indexOf("?")+1):"",n=t.substr(0,t.lastIndexOf("/")+1),i=t.substr(t.lastIndexOf("/")+1),s=window.__fsJSONPCBr;this._expireTimeout=setTimeout(S.proxy(function(){this._networkError.fire({type:"timedout"})},this),this.opts.timeout),i.indexOf("?")>-1&&(i=i.substr(0,i.indexOf("?")));var a=(e||"")+i;if(!s[a]){s[a]=new S.FSEvent;var o=n+i.substr(0,i.lastIndexOf("."))+"___"+i.substr(i.lastIndexOf(".")+1)+".js"+(r.length>0?"?"+r:""),f=new j(o,"_fscl"+a);f.loadFailure.subscribe(S.proxy(function(){this.el.parentNode.removeChild(this.el),this.ctx._networkError.fire({type:"internalserror"})},{ctx:this,el:f.st}))}s[a].subscribe(S.proxy(function(t){this.ctx.opts.success(t),clearTimeout(this.ctx._expireTimeout);var e=document.getElementById(this.tgId);e&&e.parentNode.removeChild(e)},{ctx:this,tgId:"_fscl"+a}),!0,!0),this._networkError.subscribe(S.proxy(function(t){this.opts.failure(t),s[a].unsubscribeAll()},this),!0,!0)},S.imgInfo=function(t,r){var n=function(){};r=r||n;var i=new Image;i.onload=function(){r(i.width,i.height)},i.onerror=function(){},t.indexOf("//")>-1?i.src=t:i.src=e.makeURI("/feedback/"+t),i.width&&(i.onload=i.onerror=n,r(i.width,i.height))},S.getHashParm=function(t){var e=window.location.hash.toString();if(e&&e.length>0)for(var r=e.split("&"),n=0;n<r.length;n++){var i=r[n].split("="),s=i[0].toLowerCase().trim();if(s==t.toLowerCase()){if(i.length>1)return decodeURIComponent(i[1]);break}}},S.compile=function(t){var e=new[].constructor.constructor("var v = ''; try { v = "+t+"} catch(err) {}return v;");return e.call(window)},S.addClass=function(t,e){var r,n,i,s;for(S.isDefined(t.length)||(t=[t]),r=0,n=t.length;r<n;r++)i=t[r],S.isElement(i)&&(s=i.className||"",new RegExp("\\b"+e+"\\b").test(s)||(i.className=(""===s?"":s+" ")+e))},S.removeClass=function(t,e){var r,n,i;for(S.isDefined(t.length)||(t=[t]),r=0,n=t.length;r<n;r++)i=t[r],S.isElement(i)&&i.className&&(i.className=i.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},S.hasClass=function(t,e){return S.isElement(t)&&t.className.indexOf(e)>-1},S.css=function(t,e,r){if(t){S.isDefined(t.length)||(t=[t]);for(var n=0;n<t.length;n++)for(var i in e)i&&("zIndex".indexOf(i)==-1&&"number"==typeof e[i]&&"opacity"!=i&&(e[i]+="px"),r?t[n].style.cssText+=";"+i+":"+e[i]+" !important":t[n].style[i]=e[i])}return t},S.attr=function(t,e){if(t){S.isDefined(t.length)||(t=[t]);for(var r=0;r<t.length;r++)for(var n in e)t[r].setAttribute(n,e[n])}return t},S.restrictFocus=function(t){for(var e=document.querySelectorAll("a, input[type=text], textarea, button, input[type=radio], select, *[tabIndex]",t).sort(function(t,e){return parseInt(t.tabIndex)>parseInt(e.tabIndex)}),r=function(t){return function(e){var r,n;if(9===e.keyCode)for(r=0;r<t.length;r++)if(t[r]===e.target){if(e.preventDefault?e.preventDefault():e.returnValue=!1,n=r,e.shiftKey){do n=0===n?t.length-1:n-1;while((t[n].offsetLeft<=0||t[n].tabIndex<0)&&n!=r)}else do n=(n+1)%t.length;while((t[n].offsetLeft<=0||t[n].tabIndex<0)&&n!=r);t[n].focus();break}}},n=0;n<e.length;n++){var i=e[n];S.Unbind(i,"keydown"),S.Bind(i,"keydown",r(e))}},S.hideAll=function(t){var e,r=document.body.querySelectorAll("*");
for(e=0;e<r.length;e++)S.css(r[e],{display:"none"})},S.elindex=function(t){for(var e,r=t.parentNode.childNodes,n=0,i=0;(e=r.item(n++))&&e!=t;)1==e.nodeType&&i++;return i},S.isElement=function(t){return t&&t.nodeType&&(1==t.nodeType||11==t.nodeType||9==t.nodeType)},S.randomRange=function(t,e){return t+Math.random()*(e-t)},S.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},S.ImageTransport=function(t){var e={data:{},success:function(){},failure:function(){}};this.options=S.ext(e,t)},S.ImageTransport.prototype.send=function(t){var e=S.ext(this.options,t),r=new Image;r.onerror=e.failure,r.onload=function(){e.success({width:r.width,height:r.height})},r.src=S.toQueryString(e.data,e.url,!1)};var z={_id:"",has:function(){try{return!!(window.s&&S.isFunction(s.c_r)&&s.c_r("s_vi").indexOf("[CE]")>-1)}catch(t){return!1}},uid:function(t){var e=S.nextTick;e(z.has()?function(){t(s.c_r("s_vi").split("|")[1].split("[")[0])}:function(){t()})},beacon:function(){function t(t,e){for(var r="",n=e.split("&"),i=0;i<n.length;i++)for(var s=n[i].split("="),a=0;a<t.length;a++)if(t[a]==s[0]){r+=s[0]+"="+s[1]+"&";break}return"&"==r.substr(r.length-1)&&(r=r.substr(0,r.length-1)),r}var e,r,n,i,a=["AQB","mid","aid","vid","fid","AQE"],o="";for(var f in window)if("s_i_"==f.substring(0,4)&&window[f].src&&(e=window[f].src,e.indexOf("/b/ss/")>=0)){o=e;break}if(!o&&window.document.images)for(var h=0;h<window.document.images.length;h++)if(e=window.document.images[h].src,e.indexOf("/b/ss/")>=0){o=e;break}r=o.substring(0,o.indexOf("?")),n=o.substring(o.indexOf("?")+1),i=t(a,n),window.s&&s.trackingServerSecure&&(r="https://"+s.trackingServerSecure+o.substring(o.indexOf("/b/ss/"),o.indexOf("?")),n=o.substring(o.indexOf("?")+1),i=t(a,n));var u=r+"?"+i;return u}};S.INT.OM=z;var J={has:function(){return"function"==typeof window.ga},uid:function(t){var e=S.nextTick;J.has()?ga(function(r){e(r?function(){t(r.get("clientId"))}:function(){t()})}):e(function(){t()})}};S.INT.GA=J,S.Browser=function(t){var e=this,r=t||navigator.userAgent;S.ext(e,{agent:r,os:{name:"",version:0},browser:{name:"",version:0,actualVersion:0},isMobile:/iphone|ipad|ipod|android|kindle|silk|bntv|nook|blackberry|playbook|mini|windows\sce|windows\sphone|palm|bb10/i.test(r)||!!window.orientation,isTablet:/ipad|playbook|nook|bntv/i.test(r),isWinPhone:/Windows Phone/i.test(r),fp:"",supportsLocalStorage:!1,supportsPostMessage:!!window.postMessage,isIE:!1,isZoomable:!0,supportsSVG:document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),isReady:!1,ready:new S.FSEvent,_internalReady:new S.FSEvent,isIos:!1,servUrl:location.protocol+"//device.4seeresults.com/detect?accessToken="});try{localStorage&&(localStorage.setItem("a","b"),e.supportsLocalStorage=!0)}catch(t){}e._internalReady.subscribe(function(){e.fp=new O(e),e.fp.ready.subscribe(function(){e.fp=e.fp.sig,e.ready.fire(e)},!0,!0)}),e.isMobile&&/iphone|ipad|ipod/i.test(r)&&!e.isWinPhone&&(e.isIos=!0);var n=function(t){return r.toLowerCase().indexOf(t.toLowerCase())>-1},i=function(t,e){return"IE"!=t?e:e>6&&e<10?n("Trident")||7!=e?n("Trident/5.0")&&e<=9?9:n("Trident/4.0")&&e<9?n("WOW64")?8:7==e?e:8:e:7:e},s=function(t,e){return e?n("Windows Phone")?"Winphone":n("iPod")?"iPod":n("iPad")?"iPad":n("iPhone")?"iPhone":(n("blackberry")||n("playbook")||n("BB10"))&&n("applewebkit")?"Blackberry":n("Kindle")||n("Silk")?"Kindle":n("BNTV")||n("Nook")?"Nook":n("Android")?"Android":S.isDefined(window.orientation)?"Mobile":"Other":n("Windows")?"Windows":n("OS X")?"Mac":n("Linux")||n("Googlebot")?"Linux":n("Mac")?"Mac":void 0},a=function(t,e){for(;t>e;)t/=10;return t},o=function(t,e){var r,i,s,o,f,h;return n("windows phone")||!n("ipad")&&!n("iphone")?n("googlebot")?1:n("mac os x")?(r=/OS X ([0-9_]*)/gi.exec(t),i=r[1].split("_"),s=parseInt(i[0]),f=parseInt(i[1]),h=parseInt(i[2]),f+=a(h,1),s+a(f,1)):n("Windows NT")?(r=/Windows NT ([0-9\.]*)/gi.exec(t),i=r[1].split("."),s=parseInt(i[0]),f=parseInt(i[1]),s+a(f,1)):(r=t.match(/Windows Phone OS[\/\s](\d+\.?\d+)/)||t.match(/Windows Phone[\/\s](\d+\.?\d+)/)||t.match(/Android[\/\s](\d+\.?\d+)/),s=S.isDefined(r)?r[1]:1,o=parseFloat(s),!isNaN(o)&&o>0?o:s):(r=/OS ([0-9_]*) like/gi.exec(t),i=r[1].split("_"),s=parseInt(i[0]),f=parseInt(i[1]),s+a(f,1))},f=function(){if("Winphone"!=e.os.name){var t=document.querySelectorAll("head meta[name=viewport],head meta[name=VIEWPORT],head meta[name=Viewport]")||[];if(S.isArray(t)||(t=[t]),t.length>0){for(var r=function(t,e){var r=new RegExp("[\\w\\W]*"+e+"[\\s]*=[\\s]*([^\\s,;]*)[\\w\\W]*","i");return t?t.match(r):null},n=0;n<t.length;n++){var i=t[n].content,s=r(i,"user-scalable"),a=r(i,"initial-scale"),o=r(i,"maximum-scale");if(s&&s.length>1&&("0"==s[1]||"no"==s[1].toLowerCase()))return!1;if(a&&o)return!(a.length>1&&o.length>1&&1==parseFloat(a[1])&&1==parseFloat(o[1]))}return!0}return!0}return!1},h=S._getBrowserNameAndVersion(r),u=function(){e.browser.name=h.name,e.browser.version=h.version,e.browser.actualVersion=i(e.browser.name,e.browser.version),e.os.name=s(r,e.isMobile),e.os.version=o(r,e.isMobile)},l=function(){e.isZoomable=f(),e.isReady=!0,e._internalReady.fire()},c=function(){u()};if(e.isMobile)if(e.isIos||""===e.servUrl||e.isTablet||e.isWinPhone)c(),l();else{var p,d=function(t){var r=JSON.parse(t);e.browser.name=r.browser.name,e.browser.version=e.browser.actualVersion=r.browser.version,e.os.name=r.os.name,e.os.version=r.os.version,e.isMobile=r.isMobile,e.isTablet=r.isTablet,l()},g=this.supportsLocalStorage;if(g&&!t&&(p=sessionStorage.getItem("ACS_BROWSER")),p)d(p);else{var y=function(t){g&&sessionStorage.setItem("ACS_BROWSER",t),d(t)},w=function(){c(),l()},b=function(){var t=new Date,e=t.getFullYear().toString(),r=(t.getMonth()+1).toString(),n=t.getDate().toString();return e+(r[1]?r:"0"+r[0])+(n[1]?n:"0"+n[0])},m=function(){var t=b()+"ForeSee"+(location.origin||"null");return S.hashCode(t)},v={method:"GET",url:e.servUrl+m()+"&ua="+r,type:"*/*",contentType:"application/x-www-form-urlencoded",success:y,failure:w};new S.AjaxTransport(v,!0).send()}}else u(),e.isReady=!0,e.isIE="IE"==e.browser.name,e._internalReady.fire()},S._getBrowserNameAndVersion=function(t){var e,r,n="Unknown";return null!==(r=t.match(/Opera[\/\s](\d+\.\d+)/))?n="Opera":null!==(r=t.match(/Edge\/([0-9\.]*)/))?n="IE":null!==(r=t.match(/opr[\/\s](\d+\.\d+)/i))?n="Opera":null!==(r=t.match(/Windows Phone[\/\s](\d+\.\d+)/))?n="IEMobile":null!==(r=t.match(/MSIE (\d+\.\d+)/))?n="IE":null!==(r=t.match(/Navigator[\/\s](\d+\.\d+)/))?n="Netscape":null!==(r=t.match(/Chrome[\/\s](\d+\.\d+)/))?n="Chrome":null!==(r=t.match(/Version\/([0-9\.]*)[\w\W]*Safari/i))?n="Safari":null!==(r=t.match(/Firefox[\/\s](\d+\.\d+)/))?n="Firefox":null!==(r=t.match(/googlebot/gi))?(n="Chrome",e=44):Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject&&(n="IE",e=11),{name:n,version:e||(null!==r?parseFloat(r[1]):void 0)}},S.Cookie=function(t){this.opts=t||{}},S.Cookie.prototype.set=function(t,e,r){var n,i=this.opts;r&&(i=S.ext({},i,r)),e=S.isDefined(i.encode)?encodeURIComponent(e):e,t=encodeURIComponent(t),"localhost"==i.domain&&delete i.domain;for(var s in i)if(i[s])switch(n=i[s],e+=";"+("duration"==s?"expires":s),s){case"expires":e+="="+(S.isDate(n)?n.toGMTString():n)+";";break;case"duration":e+="="+new Date(S.now()+n*S.FULL_DAY).toGMTString()+";";break;default:e+="="+n}document.cookie=t+"="+e},S.Cookie.prototype.get=function(t){var e=document.cookie.match("(?:^|;)\\s*"+S.escapeRegExp(t)+"=([^;]*)");return e?decodeURIComponent(e[1]):null},S.Cookie.prototype.kill=function(t){var e=new Date;e.setTime(e.getTime()-9999),this.set(t,"",{expires:e})},S.CPPS=function(t,e){this.gs=t||S.getGlobalStore(null,e||"foresee"),this.onSet=new S.FSEvent},S.CPPS.prototype={site_id:function(){return this.gs.cfg.config.site_id},set:function(t,e){var r=this.all();r[t]=e+"",this.gs.set("cp",r),this.onSet.fire(t,e)},get:function(t){return this.all()[t]},all:function(){return this.gs.get("cp")||{}},toQueryString:function(){var t=[],e=this.all();for(var r in e)t.push("cpp["+encodeURIComponent(r)+"]="+encodeURIComponent(e[r]));return t.join("&")},erase:function(t){var e=this.all();delete e[t],this.gs.set("cp",e)},save:function(){this.gs.save()},append:function(t,e,r){var n,i,s,a=this.gs.get("cp")||{};a[t]=(a[t]||"")+","+e,r&&(n=a[t].split(","),i=n.length-1,s=n.length>r?n.length-r:0,a[t]=n.splice(s,i-s+1).join()),this.gs.set("cp",a)}},S.DomStorage=function(t,e,r,n){this.isLocal=!!r,t||(t="STORAGE"),this.guid="FSR_"+t.replace(/[- _.&]/g,"").toUpperCase(),this.StorageFull=new S.FSEvent,this.storageLimit=45e5,this.kill(),this.sync(),S.isDefined(e)&&!e||setTimeout(S.proxy(function(){S.Bind(window,"unload",S.proxy(function(){this.commit()},this))},this),100)},S.DomStorage.prototype.testStorageLimit=function(){return this.storageBytesObj+this.storageBytesBlob>=this.storageLimit&&(this.StorageFull.fire(this),!0)},S.DomStorage.prototype.dispose=function(t){this._data_obj[t]&&(delete this._data_obj[t],this.storageBytesObj=JSON.stringify(this._data_obj).length)},S.DomStorage.prototype.kill=function(){this.storageBytesObj=0,this.storageBytesBlob=0,this._data_obj={},this._data_blob="",this.isNewStorage=!0},S.DomStorage.prototype.get=function(t){return this._data_obj[t]},S.DomStorage.prototype.getBlob=function(){return this._data_blob},S.DomStorage.prototype.erase=function(t){delete this._data_obj[t],this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit()},S.DomStorage.prototype.set=function(t,e){e&&(this._data_obj[t]=e,this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit())},S.DomStorage.prototype.setBlob=function(t){this._data_blob=t,this.storageBytesBlob=this._data_blob.length,this.isNewStorage=!1,this.testStorageLimit()},S.DomStorage.prototype.isNew=function(){var t;return window.opener&&!this.get("isNew")&&(t=!0,this.set("isNew",t)),t||this.isNewStorage},S.DomStorage.initialize=function(t){t.apply(S.DomStorage)},S.DomStorage.isSupported=function(){return!!localStorage},S.DomStorage.prototype.sync=function(){var t;try{t=localStorage.getObject(this.guid+"_OBJ"),t&&t.length>0&&(this._data_obj=JSON.parse(t),this.storageBytesObj=t.length,this.isNewStorage=!1)}catch(t){}try{t=localStorage.getObject(this.guid+"_BLOB"),t&&t.length>0&&(this._data_blob=t,this.storageBytesBlob=t.length,this.isNewStorage=!1)}catch(t){}},S.DomStorage.prototype.commit=function(){try{localStorage.setItem(this.guid+"_OBJ",JSON.stringify(this._data_obj)),localStorage.setItem(this.guid+"_BLOB",this._data_blob)}catch(t){}};var W={byteArrayToString:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},stringToByteArray:function(t){for(var e=[],r=0;r<t.length;r++)e[e.length]=t.charCodeAt(r);return e},_utf8_encode:function(t){for(var e="",r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},compress:function(t){var e=W._utf8_encode(t),r=W.stringToByteArray(e),n=new P.RawDeflate(r,{compressionType:2}).compress();return btoa(W.byteArrayToString(n))},fragmentAndCompress:function(t,e){e=e||1e5;for(var r="",n=parseInt(t.length/e)+1,i=0;i<n;i++){var s=W.compress(t.substring(i*e,(i+1)*e));r+="_CMP_"+s}return r},decompress:function(t){var e=W.stringToByteArray(atob(t)),r=new P.RawInflate(e,{index:0,bufferSize:41152,bufferType:P.RawInflate.BufferType.ADAPTIVE,resize:!0});return W.byteArrayToString(r.decompress())}};S.Compress=W,S.WindowStorage=function(t,e,r){t||(t="STORAGE"),this.guid="FSR_"+t.replace(/[- _.&]/g,"").toUpperCase(),this.storageLimit=5e6,this.StorageFull=new S.FSEvent,this.kill(),this.sync(),S.isDefined(e)&&!e||setTimeout(S.proxy(function(){S.Bind(window,"unload",S.proxy(function(){this.commit()},this))},this),100)},S.WindowStorage.prototype.testStorageLimit=function(){return this.storageBytesObj+this.storageBytesBlob>=this.storageLimit&&(this.StorageFull.fire(this),!0)},S.WindowStorage.prototype.dispose=function(t){this._data_obj[t]&&(delete this._data_obj[t],this.storageBytesObj=JSON.stringify(this._data_obj).length)},S.WindowStorage.prototype.kill=function(){this.storageBytesObj=0,this.storageBytesBlob=0,this._data_obj={},this._data_blob="",this.isNewStorage=!0},S.WindowStorage.prototype.get=function(t){return this._data_obj[t]},S.WindowStorage.prototype.getBlob=function(){return this._data_blob},S.WindowStorage.prototype.erase=function(t){delete this._data_obj[t],this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit()},S.WindowStorage.prototype.set=function(t,e){e&&(this._data_obj[t]=e,this.storageBytesObj=JSON.stringify(this._data_obj).length,this.isNewStorage=!1,this.testStorageLimit())},S.WindowStorage.prototype.setBlob=function(t){this._data_blob=t,this.storageBytesBlob=this._data_blob.length,this.isNewStorage=!1,this.testStorageLimit()},S.WindowStorage.prototype.isNew=function(){return this.isNewStorage},S.WindowStorage.initialize=function(t){t.apply(S.WindowStorage)},S.WindowStorage.isSupported=function(){return!0},S.WindowStorage.prototype.sync=function(){var t=S.nameBackup||window.name||"",e=this.guid+"_",r="",n=t.indexOf(e+"BEGIN_OBJ");n>-1&&(r=t.substr(n+(e+"BEGIN_OBJ").length,t.indexOf(e+"END_OBJ")-(n+(e+"BEGIN_OBJ").length)));try{r.length>0&&(this._data_obj=JSON.parse(r),this.storageBytesObj=r.length,this.isNewStorage=!1)}catch(t){}r="",n=t.indexOf(e+"BEGIN_BLOB"),n>-1&&(r=t.substr(n+(e+"BEGIN_BLOB").length,t.indexOf(e+"END_BLOB")-(n+(e+"BEGIN_BLOB").length)));try{r.length>0&&(this._data_blob=r,this.storageBytesBlob=r.length,this.isNewStorage=!1)}catch(t){}},S.WindowStorage.prototype.commit=function(){var t=window.name;S.isDefined(t)||(t="");var e=this.guid+"_",r=t.indexOf(e+"BEGIN_OBJ"),n=JSON.stringify(this._data_obj),i=e+"BEGIN_OBJ"+n+e+"END_OBJ";r>-1?t=t.substr(0,r)+i+t.substr(t.indexOf(e+"END_OBJ")+(e+"END_OBJ").length):t+=i,r=t.indexOf(e+"BEGIN_BLOB"),i=e+"BEGIN_BLOB"+this._data_blob+e+"END_BLOB",r>-1?t=t.substr(0,r)+i+t.substr(t.indexOf(e+"END_BLOB")+(e+"END_BLOB").length):t+=i,window.name=S.nameBackup=t,this.storageBytes=window.name.length},S.nameBackup=window.name,S.sign=function(t){var e=(new Date).getTime(),r=t.substr(t.indexOf("/rec/")),n=S.md5((r+e).toString());return t+=t.indexOf("?")==-1?"?":"&",t+"token="+e+"&sig="+encodeURIComponent(n)},S.generateGUID=function(){return S.md5(S.now()+""+navigator.userAgent+window.location+(new Date).getTimezoneOffset()+Math.random())},S.Journey=function(t,e,r,n,i){this.threshold=i||400,this.browser=n,this.cors=new S.CORS(n),this.data={customerId:t,appId:e,userId:r||"0000-0000-0000-0000-0000",deviceProfile:{fs_timezone:(new Date).getTimezoneOffset(),fs_os:n.os.name,fs_osver:n.os.version,fs_browser:n.browser.name,fs_browserver:n.browser.version},events:[]}},S.Journey.prototype._send=function(){this._svT=null,this.data.events.length>0&&S.Healthy(this.browser,["events"],S.proxy(function(){this.cors.send({url:"https://analytics.foresee.com/ingest/events",contentType:"application/json",data:this.data,method:"POST",success:S.proxy(function(){this.data.events=[]},this)})},this))},S.Journey.prototype.setKey=function(t,e){return!!S.isObject(e)&&(this.data[t]=e,this.data.events.length||this.addEventString("fs_setKey"),!0)},S.Journey.prototype.addEvent=function(t){var e=typeof t;switch(e){case"string":this.addEventString(t);break;case"object":this.addEventObj(t);break;default:console.error("ForeSee: event is not a valid type: ",e)}},S.Journey.prototype.addEventObj=function(t){return t.timestamp||(t.timestamp=(new Date).toISOString()),t.name&&t.name.length>0&&q("properties",t)&&q("metrics",t)&&q("data",t)?(this.data.events.push(t),void V(this)):void console.error("Invalid event. Please refer to http://developer.foresee.com for proper usage.")},S.Journey.prototype.addEventString=function(t){this.data.events.push({name:t,timestamp:(new Date).toISOString(),properties:{fs_pageUrl:[location.href]}}),V(this)};var K,G,V=function(t,e){e?t._send(!0):t._svT||(t._svT=setTimeout(S.proxy(function(){t._send(!0)},t),t.threshold))},q=function(t,e){var r;switch(t){case"properties":if(e.properties)for(r in e.properties)if(!S.isArray(e.properties[r]))return console.error("ForeSee: Invalid properties"),!1;break;case"metrics":if(e.metrics)for(r in e.metrics)if(!S.isNumeric(e.metrics[r]))return console.error("ForeSee: Invalid metrics"),!1}return!0},X=function(t,e,r){for(var n=[],i=[],s=[],a=0;a<t.length;a++){var o=K.info[t[a]];o&&o.up!==!0?s.push(t[a]):(n.push(S.ext({},o)),i.push(t[a]))}s.length>0?r(s):e(n)};return S.Healthy=function(t,e,r,n){if(S.isArray(e)||(e=[e]),r=r||function(){},n=n||function(){},!K&&t.supportsLocalStorage){var i=localStorage.getItem("_fsrHealthStatus");K=i?JSON.parse(i):{}}K&&K.last&&S.now()-K.last<6e4?S.nextTick(function(){X(e,r,n)}):(G||(G=new D(t)),G.send({method:"GET",url:"https://health.foresee.com",timeout:1e4,failure:S.proxy(function(){n(e)},this),success:S.proxy(function(r){S.isString(r)&&r.length>3?(K={last:S.now(),info:JSON.parse(r)},t.supportsLocalStorage&&localStorage.setItem("_fsrHealthStatus",JSON.stringify(K)),X(e,this.s,this.f)):n(e)},{deps:e,s:r,f:n})}))},S.HealthStatus=function(t,e,r){var n=function(t,e){return function(){for(var e={},n=0;n<t.length;n++){var i={up:!1};K&&K.info&&K.info[t[n]]&&(i=S.ext({},K.info[t[n]])),e[t[n]]=i}r(e)}}(e,r);S.Healthy(t,e,n,n)},S.nextTick=function(t){setTimeout(t||function(){},0)},S.products={},S.productArr=[],S.registerProduct=function(t,e){e=e||{},S.products[t]=e,S.productArr.push(t)},S});