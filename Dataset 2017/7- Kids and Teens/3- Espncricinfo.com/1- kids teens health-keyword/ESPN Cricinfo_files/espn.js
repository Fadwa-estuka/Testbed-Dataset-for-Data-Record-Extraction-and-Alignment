!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.ESPNVideoPlayer=a()}}(function(){var a,b,c;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(){function a(){v=!0,b()}var b=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],c=arguments.length<=1||void 0===arguments[1]?"BkWFhnZwn_default":arguments[1],d=arguments.length<=2||void 0===arguments[2]?"3948005062001":arguments[2];return v?void b():void k("//players.brightcove.net/"+d+"/"+c+"/index.min.js",function(b){b?k("//secure.espncdn.com/players/web-player-bundle/latest/perform-assets/players/"+c+"/index.min.js",function(b){b||a()}):a()})}var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("events"),k=a("load-script"),l=a("./player/brightcove5/index"),m=a("./config-logger/index"),n=a("./analytics"),o=a("./advertising"),p=a("./player/native-player/index"),q=a("mobile-detect"),r=void 0,s=void 0,t=void 0,u=void 0,v=!1,w=function(a){function b(a,c,f){d(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.native=a,g.brightcoveAccountId=f,g.brightcovePlayerId=c,g}return f(b,a),i(b,[{key:"player",get:function(){return r&&r.player()}},{key:"bundle",get:function(){return r}},{key:"analytics",get:function(){return n}},{key:"advertising",get:function(){return o}}]),b}(j);w.prototype.embed=function(a,b,c){var d=this,e=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],f=b;"[object String]"===Object.prototype.toString.call(b)&&(f=document.getElementById(b)),t=f,s=f.parentNode,u=s.cloneNode(!0);var g=h({},c);return a&&(g.cerebroId=a),r=new this.playerTech(f,g),r.player().ready(function(){e(d)}),this},w.prototype.pause=function(){return this.player&&this.player.pause(),this},w.prototype.ready=function(){var a=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],b=new q(window.navigator.userAgent);if(this.playerTech=l,this.native===!0)return this.playerTech=p,a(),this;if(this.native instanceof Array){var c,d,e;for(c=0,d=this.native.length;c<d;c++)if(e=this.native[c],b[e]())return this.playerTech=p,a(),this}return g(a.bind(this),this.brightcovePlayerId,this.brightcoveAccountId),this},w.prototype.switchVideo=function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]?function(){}:arguments[2];if(r&&(a||b.clipId)){var d="boolean"!=typeof b.autoplay||b.autoplay,e=b.clipSource||r.clipSource,f=b.clipId;if(this.player.trigger("switch",{guid:a,clipId:f,autoplay:d,source:e}),this.player&&this.player.ads&&"ad-playback"===this.player.ads.state){this.unembed();var g=u?u.children[0]:{},h=g.getAttribute?g.getAttribute("id"):null;h?this.embed(a,h,b,c):c(new Error("cloned placeholder missing ID"))}else a&&(b.cerebroId=a),r.player().reset(),r.registerConfiguration(b),a?r.loadShield(a,d):f&&r.loadClip(f,d,e),c(null,this)}},w.prototype.unembed=function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];return r.dispose(),r=null,s&&s.parentNode&&(a?s.parentNode.removeChild(s):s.parentNode.replaceChild(u,s)),this},w.prototype.remove=function(){this.unembed(!0)},w.loadBrightcovePlayer=g,w.ConfigLogger=m,w.VERSION=a("./dist/version.js").default,b.exports=w},{"./advertising":5,"./analytics":7,"./config-logger/index":13,"./dist/version.js":16,"./player/brightcove5/index":50,"./player/native-player/index":52,events:25,"load-script":26,"mobile-detect":29}],2:[function(a,b,c){"use strict";(function(){b.exports={desktop:["freewheel_admanager"],tablet:["brightcove_once","freewheel_admanager"],mobile:["brightcove_once","freewheel_admanager"]}}).call(void 0)},{}],3:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};(function(){var c,e,f,g,h,i,j;f=a("../advertising"),h=a("../fan"),i=a("./config"),j=a("superagent"),e=function(){function a(a,b,c,e){var f;switch(this.player=a,this.data=b,this.sources=b.sources,this.onReady=e,c="object"===("undefined"==typeof c?"undefined":d(c))?c:i,f=b._shield&&b._shield.device){case"MOBILE":this.chooseProvider(c.mobile);break;case"TABLET":this.chooseProvider(c.tablet);break;case"PC":this.chooseProvider(c.desktop);break;default:this.chooseProvider()}this.provider?this.provider.setSource.call(this):this.onReady(this)}return a.prototype.chooseProvider=function(a){var b,c,d;for(a=a||["freewheel_admanager"],b=0,c=a.length;b<c&&(d=a[b],"function"!=typeof this[d]||(this.provider=this[d](),!this.provider));b++);},a.prototype.data=void 0,a.prototype.player=void 0,a.prototype.provider=c,a.prototype.sources=void 0,a.prototype.initAds=function(a){return"function"==typeof this.provider.initAds&&this.provider.initAds.call(this,this.player,a)},a.prototype.brightcove_once=function(){return!!this.data.ONCE&&g},a.prototype.freewheel_admanager=function(){return!!this.player.FreeWheelPlugin&&c},a}(),c={setSource:function(){return this.onReady(this)},initAds:function(a,b){var c,d,e,g;a.FreeWheelPlugin&&(e=b.slots&&b.slots.preroll,d=b.slots&&b.slots.postroll,g=[],e&&g.push({adUnit:"preroll",timePosition:0}),d&&g.push({adUnit:"postroll",timePosition:b.duration}),(e||d)&&(c=f.adManager({networkId:b.networkId,assetId:b.id,assetDuration:b.duration},g),b.logger("FreeWheelPlugin",c),"function"==typeof a.FreeWheelPlugin?a.FreeWheelPlugin(c):a.FreeWheelPlugin&&(a.FreeWheelPlugin.settings=c,"Html5"===a.FreeWheelPlugin.tech&&a.FreeWheelPlugin.Html5&&a.FreeWheelPlugin.Html5._parameters.update(c.Html5))))}},g={setSource:function(){var a=this;this.data.ONCE=this.data.ONCE.replace("now/od","now/ads/vmap/od"),j.get(this.data.ONCE).query({UMADPARAM_fw_euid:h.SWID,output:"1"}).end(function(b,c){var d;c.body&&(d=c.body["vmap:VMAP"]&&c.body["vmap:VMAP"]["vmap:Extensions"]&&c.body["vmap:VMAP"]["vmap:Extensions"]["uo:unicornOnce"],a.sources=[{src:d["@contenturi"],type:d["@contenttype"].replace("audio","application")}]),a.onReady(a)})},initAds:null},b.exports=e}).call(void 0)},{"../advertising":5,"../fan":17,"./config":2,superagent:33}],4:[function(a,b,c){"use strict";(function(){b.exports={host:"http://bd0dc.v.fwmrm.net/ad/p/1",siteSectionId:"espn:video",networkId:87146,flash:{profile:"87146:espn_desktop_as3",serverUrl:"http://bd0dc.v.fwmrm.net/ad/p/1",sdkurl:"http://adm.fwmrm.net/p/espn_desktop_prod/AdManager.swf",swfurl:"https://players.brightcove.net/videojs-freewheel/2/videojs.freewheel.swf"},html5:{profile:"87146:espn_desktop_js",serverUrl:"http://1546a.v.fwmrm.net/ad/g/1",sdkurl:"http://adm.fwmrm.net/p/espn_desktop_prod/AdManager.js"},adTechOrder:["flash","html5"],debug:!1,prerollTimeout:3e3,timeout:5e3,assetId:void 0,assetDuration:void 0,mimeType:void 0,live:!1,keyValues:[],beforeAdManager:function(a){return a},pageViewRandomNumber:1,videoPlayRandomNumber:1,responseType:"vast2"}}).call(void 0)},{}],5:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};(function(){var c,e,f,g,h;h={}.hasOwnProperty,g=function(a,b){var c;for(c in b)h.call(b,c)&&("object"===d(b[c])?(a[c]=a[c]||{},a[c]=g(a[c],b[c])):null!==b[c]&&"undefined"!=typeof b[c]&&(a[c]=b[c]));return a},e=a("../fan"),f=a("./config"),c={configure:function(a){return a&&g(f,a),f},adManager:function(a){return this.configure({keyValues:[{_fw_euid:e.SWID}]}),null!=a&&this.configure(a),this.configure(f.beforeAdManager(f)),{Flash:{networkId:""+f.networkId,sdkurl:f.flash.sdkurl,serverUrl:f.flash.serverUrl,siteSectionCustomId:f.siteSectionId,swfurl:f.flash.swfurl,videoAssetCustomId:f.assetId,videoAssetDuration:f.assetDuration,profile:f.flash.profile,keyValues:f.keyValues},Html5:{networkId:""+f.networkId,sdkurl:f.html5.sdkurl,serverUrl:f.html5.serverUrl,siteSectionCustomId:f.siteSectionId,videoAssetCustomId:f.assetId,videoAssetDuration:f.assetDuration,profile:f.html5.profile,keyValues:f.keyValues},adTechOrder:f.adTechOrder,debug:f.debug,prerollTimeout:f.prerollTimeout,timeout:f.timeout}},vast:function(a,b){var c,d,e,g,h,i;for(null!=a&&this.configure(a),g=["resp="+f.responseType,"nw="+f.networkId,"caid="+f.assetId,null!=f.assetDuration?"vdur="+f.assetDuration:void 0,"csid="+f.siteSectionId,"prof="+f.profile,f.live?"mode=live":void 0,"pvrn="+f.pageViewRandomNumber,"vprn="+f.videoPlayRandomNumber,"vast2"===f.responseType?"crtp=vast2s":void 0],d=[],i=[],c=0,e=b.length;c<e;c++)h=b[c],i.push(["ptgt=a","slau="+h.adUnit,"slid="+h.adUnit+(null!=h.adBreak?h.adBreak:void 0)].join("&"));return f.host+"?"+g.join("&")+";"+d.join("&")+";"+i.join(";")}},b.exports=c}).call(void 0)},{"../fan":17,"./config":4}],6:[function(a,b,c){"use strict";(function(){b.exports={chartbeat:{uid:"22222",domain:"espn.com",sections:null,authors:null},comscore:{clientId:"3000005",labels:{c3:'"*null"',c4:"MediaInfo.site",c6:"MediaInfo.league",c8:"MediaInfo.pageTitle",ns_st_pu:"MediaInfo.publisher",ns_st_pr:'"*null"',ns_st_ep:"MediaInfo.name"}},conviva:{customerKey:"eec329720efa1110d60c5a6d01a65baf032de653",playerName:"Conviva Test Web Player",debug:!1},adobeDCR:{VISITOR_API:{MARKETING_CLOUD_ORG_ID:"EE0201AC512D2BE80A490D4C@AdobeOrg",NAMESPACE:"espn",TRACKING_SERVER:"w88.espn.com"},APP_MEASUREMENT:{RSID:"wdgespredesign",TRACKING_SERVER:"w88.espn.com"},HEARTBEAT:{DISABLE:!1,TRACKING_SERVER:"espn.hb.omtrdc.net",PUBLISHER:"EE0201AC512D2BE80A490D4C@AdobeOrg",OVP:"Brightcove",SDK:"1.6.7",DEBUG_LOGGING:!1},QUALITY:{TIME_TO_START:0},CUSTOM_EVENT:{disable:!0,bc_data_mapping:{name:"eVar106,prop2",segment:"eVar203",contentType:"eVar201",timePlayed:"event203",view:"event201",segmentView:"event202",complete:"event207",milestones:{25:"event204",50:"event205",75:"event206"}},bc_volumechange:{event:"event208",evar:"prop1"},bc_ad_pause:{event:"event209",evar:"eVar205"},bc_fullscreen_enter:{event:"event212"},bc_fullscreen_exit:{event:"event213"},bc_social_opened:{event:"event214"},bc_social_closed:{event:"event215"}},NIELSEN_DATA:{APP_INFO:{clientId:"us-600140-test",vcid:"b01",apid:"T31187EE2-AC6E-46CB-BB54-D07591BED067",appName:"BasicPlayerSample",sfcode:"dcr",nol_sdkDebug:"console",nsdkv:"511"},CONTENT_METADATA:{type:"content",program:"",segB:"",segC:"Sport/Program Code",isfullepisode:"",adloadtype:1,airdate:"",dataSrc:"",tv:!0,assetid:"",category:""},AD_METADATA:[]},ESPN_CUSTOM_METADATA:{},MEDIAINFO:{}},nativeOmniture:{trackingServer:"w88.espn.com",reportSuites:"wdgespcom,wdgespge",secure:!1,site:"espn"}}}).call(void 0)},{}],7:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};(function(){var c,e,f,g;g={}.hasOwnProperty,f=function(a,b){var c;for(c in b)g.call(b,c)&&("object"===d(b[c])?(a[c]=a[c]||{},a[c]=f(a[c],b[c])):a[c]=b[c]);return a},e=a("./config"),c={configure:function(a){return f(e,a),e},chartbeat:function(a){return null!=a&&this.configure({chartbeat:a}),e.chartbeat},comscore:function(a){var b,c,d,g;null!=a&&(a.c2&&(a.clientId=a.c2),e.comscore.clientId=a.c2||a.clientId||e.comscore.clientId,a.labels&&f(e.comscore.labels,a.labels)),c=[],d=e.comscore.labels;for(b in d)g=d[b],c.push(b+"="+g);return{c2:e.comscore.clientId,labelmapping:c.join(",")}},conviva:function(a){return null!=a&&this.configure({conviva:a}),e.conviva},adobeDCR:function(a){return null!=a&&this.configure({adobeDCR:a}),e.adobeDCR},nativeOmniture:function(a){return null!=a&&this.configure({native:a}),e.native}},b.exports=c}).call(void 0)},{"./config":6}],8:[function(a,b,c){"use strict";(function(){b.exports={VIDEO_BASE_URL:"http://api-app.espn.com/v1/video",WATCH_BASE_URL:"http://api-app.espn.com/v1/watch",VIDEOHUB_BASE_URL:"http://www.espn.com/videohub"}}).call(void 0)},{}],9:[function(a,b,c){"use strict";(function(){var c,d,e,f,g,h,i;i=a("superagent"),e=a("../shield"),d=a("../cms"),f=a("./config"),g=function(a,b){var c;for(c in b)h.call(b,c)&&(a[c]=b[c]);return a},h={}.hasOwnProperty,c=function(){function a(a){g(f,a),this.cms=new d(a&&a.cms||f.cms),f.getRelated&&"function"==typeof f.getRelated&&(this.getRelated=f.getRelated.bind(this),this.request=i)}return a.prototype.getClip=function(a,b){var c,d;return c=this.cms,d=f.VIDEO_BASE_URL+"/clips/"+a,i.get(d).query(c.apiParams).end(function(d,e){var f,g,h,i,j,k,l,m,n;if(d)return console.error(d),b(d,null);if(c.key){for(n=e.body&&e.body.videos,j=0,k=n.length;j<k;j++)if(h=n[j],h.source===c.key){m=h;break}}else m=e.body&&e.body.videos&&e.body.videos.shift();return m?(f=m.links&&m.links.source&&m.links.source.HLS&&m.links.source.HLS.href,g=m.links&&m.links.source&&m.links.source.mezzanine&&m.links.source.mezzanine.href,l=[],f&&l.push({src:f,type:"application/x-mpegURL"}),g&&l.push({src:g,type:"video/mp4"}),i={_clips:m,advertisingId:c.adAssetId(m.id),assetName:m.tracking&&m.tracking.trackingName,caption:m.caption,cerebroId:m.cerebroId,createDate:new Date(m.lastModified).toISOString(),duration:m.duration,headline:m.headline,HLS:f,id:m.id,keywords:m.keywords,mediaId:c.apiMediaId(m.id),MP4:g,poster:m.posterImages.full.href,publishDate:new Date(m.originalPublishDate).toISOString(),sources:l,sport:m.tracking&&m.tracking.sportName,syndicatable:m.syndicatable,web:m.links.web.href},b(null,i)):(d="Clip "+c.apiMediaId(a)+" not found.",console.error(d),b(d,null))})},a.prototype.getClipThroughShield=function(a,b){var c;return c=new e,/\:/.test(a)&&(a=a.split(":")[1]),/^[\d]*$/.test(a)?this.getClip(a,function(a,d){return a?(console.error(a),b(a,null)):"undefined"==typeof d.cerebroId&&f.BypassShieldDeviceAndGeoRestrictions===!0?(console.warn("Bypassing Shield device and geo restrictions is STRONGLY discouraged!"),b(a,d)):c.getClip(d.cerebroId,b)}):c.getClip(a,b)},a.prototype.getChannel=function(a,b){var c;return c=f.WATCH_BASE_URL+"/listings",i.get(c).query({tz:"GMT",networks:a,types:"live"}).end(function(a,c){var d;return a?(console.error(a),b(a,null)):(d=c.body&&c.body.listings&&c.body.listings.shift(),d?b(null,d):b("NOT_FOUND",null))})},a.prototype.getListing=function(a,b){var c;return c=f.WATCH_BASE_URL+"/listings",i.get(c).query({tz:"GMT",id:a}).end(function(a,c){var d;return a?(console.error(a),b(a,null)):(d=c.body&&c.body.listings&&c.body.listings.shift(),d?b(null,d):b("NOT_FOUND",null))})},a.prototype.getRelated=function(a,b,c){var d,e,g;return e=f.getRelatedBaseURL||f.VIDEOHUB_BASE_URL+"/player/getRelatedFeed",g={mediaId:this.cms.apiMediaId(a)},b.country&&(g.country=b.country.substr(b.country.indexOf("_")+1)),d=[],i.get(e).query(g).accept("xml").end(function(a,b){var e,f,g,h,i;if(a)return console.error(a),c(a,null);for(h=b.xhr.responseXML.getElementsByTagName("item"),e=0,i=h.length;e<i;e++)f=h[e],g=f.querySelector("asseturl").textContent||":",d.push({caption:f.querySelector("caption").textContent,duration:f.getAttribute("duration"),headline:f.querySelector("headline").textContent,id:g.split(":")[1],poster:f.querySelector("thumbnailurl").textContent,source:g.split(":")[0],web:f.querySelector("hostedAtURL").textContent,mediaId:g});return c(null,d)})},a.prototype.getProvidersByClient=function(a,b){var c;return c=f.WATCH_BASE_URL+"/clients/"+a+"/providers",i.get(c).end(function(a,c){var d;return a?(console.error(a),b(a,null)):(d=c.body&&c.body.clients&&c.body.clients.length>0&&c.body.clients[0].providers||[],b(null,d))})},a}(),c.configure=function(a){return g(f,a),f},b.exports=c}).call(void 0)},{"../cms":12,"../shield":56,"./config":8,superagent:33}],10:[function(a,b,c){"use strict";(function(){var c,d,e,f,g,h;g=a("superagent"),d={v:"2.0.0",partner:"watchespn",platform:"web"},e=function(a,b){var c;for(c in b)f.call(b,c)&&(a[c]=b[c]);return a},f={}.hasOwnProperty,c=function(){function a(a){e(d,a)}return a.prototype.startSession=function(a){var b,c,e;return this.stopSession(),b={_listing:a,description:a.description,id:a.id,name:a.name,poster:a.thumbnails&&a.thumbnails.large&&a.thumbnails.large.href,web:a.links.web.href},e=a.links.source.hls.default.href,c={v:d.v,partner:d.partner,platform:d.platform,token:d.token,tokenType:d.tokenType,resource:d.resource},g.get(e).query(c).withCredentials().end(function(a){return function(c,e){return c?(console.error(c,e.body),a.onStatusChange(e.body,null)):("application/json"===e.type&&e.body?(h=e.body.session,d.token=h.token,d.tokenType="GATEKEEPER",b._session=h,b.HLS=h.playbackUrls&&h.playbackUrls.default,b.simulcastAiringId=h.event.simulcastAiringId,b.passThroughBeaconURL=h.passThroughBeaconURL,a.maintainSession(),a.checkForProgramChange()):console.warn("Expected JSON response, received: "+e.type),a.onStatusChange(null,b))}}(this))},a.prototype.stopSession=function(){clearTimeout(this.maintainTimeout),clearTimeout(this.programTimeout),h=null},a.prototype.maintainSession=function(){var a,b;a=h.ttl-6e4,b={v:d.v,partner:d.partner,platform:d.platform,token:d.token},clearTimeout(this.maintainTimeout),this.maintainTimeout=setTimeout(function(a){return function(){return g.get(h.maintainUrl).query(b).withCredentials().end(function(b,c){return b?console.error(b):("application/json"===c.type&&c.body&&(h=c.body.session,d.token=h.token),a.maintainSession())})}}(this),a)},a.prototype.checkForProgramChange=function(){clearTimeout(this.programTimeout),!h||["espn3","espnpass","secplus","accextra"].indexOf(h.channel)>-1||(this.programTimeout=setTimeout(function(a){return function(){var b=h.programChangeUrl,c=b.indexOf("?")!==-1?"&":"?";return b=b+c+"tz=GMT",g.get(b).end(function(b,c){var e;return e=null,b?console.error(b):(c.body.listings.forEach(function(a){"live"===a.type&&(e=a)}),e&&e.id!==h.event.id&&(d.resource=null,a.startSession(e)),a.checkForProgramChange(h))})}}(this),6e4))},a.prototype.dispose=function(){this.stopSession()},a.prototype.onStatusChange=function(){},a}(),c.configure=function(a){return e(d,a),d},b.exports=c}).call(void 0)},{superagent:33}],11:[function(a,b,c){"use strict";(function(){b.exports={cric:{adAssetIdPrefix:"",adNetworkId:"87146",apiIdPrefix:"cric:",apiParams:{},key:"cric",syndicationKey:"cricinfo"},deportes:{adAssetIdPrefix:"",adNetworkId:"135087",apiIdPrefix:"deportes:",apiParams:{lang:"es"},key:"deportes",syndicationKey:"deportes"},espn:{adAssetIdPrefix:"",adNetworkId:"87146",apiIdPrefix:"espn:",apiParams:{},key:"espn",syndicationKey:"domestic"},intl:{adAssetIdPrefix:"intl:",adNetworkId:"144556",apiIdPrefix:"intl:",apiParams:{sport:"soccer",region:"GB"},key:"intl",syndicationKey:"soccerfc"}}}).call(void 0)},{}],12:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};(function(){var c,e,f,g;g={}.hasOwnProperty,f=function(a,b){var c;for(c in b)g.call(b,c)&&("object"===d(b[c])?(a[c]=a[c]||{},a[c]=f(a[c],b[c])):a[c]=b[c]);return a},e=a("./config"),c=function(){function a(a){return f(this,e[a])}return a.prototype.adAssetId=function(a){return(this.adAssetIdPrefix||"")+a},a.prototype.apiMediaId=function(a){return this.apiIdPrefix&&"string"==typeof a&&a.match(this.apiIdPrefix)?a:(this.apiIdPrefix||"")+a},a}(),b.exports=c}).call(void 0)},{"./config":11}],13:[function(a,b,c){"use strict";(function(){var a,c;c={},a=function(a,b,d){var e;switch(arguments.length){case 0:return c;case 1:return c[a];case 2:return c[a].filter(function(a){return a[b]});default:return c[a]=c[a]||[],e={},e[b]=d,c[a].push(e),c}},b.exports=a}).call(void 0)},{}],14:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};(function(){function a(){try{return!!document.createElement("video").canPlayType}catch(a){return!1}}function c(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}var e="undefined"==typeof g,f=a()&&c();if(e=e&&f){var g="undefined"!=typeof g?g:function(){};!function(){function a(a,b){"undefined"!=typeof ConvivaPrivateModule?ConvivaPrivateModule[b]=a:"undefined"!=typeof ConvivaPrivateTestingModule?ConvivaPrivateTestingModule[b]=a:g[b]=a}function b(a){return a}function c(a){return"undefined"!=typeof ConvivaPrivateModule&&ConvivaPrivateModule.hasOwnProperty(a)?ConvivaPrivateModule[a]:"undefined"!=typeof ConvivaPrivateTestingModule&&ConvivaPrivateTestingModule.hasOwnProperty(a)?ConvivaPrivateTestingModule[a]:g.hasOwnProperty(a)?g[a]:null}function e(a,c){var d,e="";for(d in a)a.hasOwnProperty(d)&&(e+="var "+d+"="+b(c)+"."+d+";");return e}function f(){return"STAT_INIT"}function i(b,c){b.call(f),a(b,c)}function j(a,b,c){a!=f&&(void 0==a[b]?a[b]=c:a["super_"+b]=c)}function k(a,b,c){a!=f&&(a[b]=c)}function l(a,b,c,d){a==f&&(b[c]=d)}function m(a,b,c){a!=f&&("undefined"!=typeof Object.defineProperty?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:c}):a.__defineGetter__(b,c))}function n(a,b,c){a!=f&&("undefined"!=typeof Object.defineProperty?Object.defineProperty(a,b,{configurable:!0,set:c}):a.__defineSetter__(b,c))}function o(a,b,c,d){a==f&&m(b,c,d)}function p(a,b,c,d){a==f&&n(b,c,d)}function q(a){return a.constructor==Array||"undefined"!=typeof a.length}function r(a,b){q(a);if(q(a))for(var c=0;c<a.length;c++)b(a[c]);else for(var d in a)a.hasOwnProperty(d)&&b(a[d])}function s(a,b){if(q(a))for(var c=0;c<a.length;c++)b(c);else for(var d in a)a.hasOwnProperty(d)&&b(d)}function t(a,b,c,d){a==f&&jstest.DeclareTestClass(b,c,d)}function u(a,b,c,d,e){a==f?jstest.DeclareTestMethod(b,c,e):jstest.SetTestMethodClosure(b,c,d)}function v(){v.two32=4294967296,v.Cast=function(a){var b=parseInt(a);return b>v.MaxValue?b%=v.two32:b<0&&(b=-b%v.two32,b=v.two32-b),b},v.uintRegex=new RegExp("^[0-9]+$"),v.Parse=function(a){return Q.parseChecker(a,v.uintRegex),v.Cast(a)},v.MaxValue=v.two32-1,v.MinValue=0}function w(){w.Cast=function(a){var b=v.Cast(a);return b>w.MaxValue&&(b-=v.two32),b},w.intRegex=new RegExp("^[+-]?[0-9]+$"),w.Parse=function(a){return Q.parseChecker(a,w.intRegex),w.Cast(a)},w.MaxValue=2147483647,w.MinValue=-2147483648}function x(){function a(){g._l=0,g._h=0}function b(a){var b=new x;return b._h=0,b._l=a,b}function c(a){var b=new x;return a>=0?(b._h=0,b._l=v.Cast(a)):(b._h=-1,b._l=v.Cast(a)),b}function d(a){var b=a%x.TWO_TO_32;b<0&&(b=Number(v.MaxValue)+1+b);var c=new x;return c._l=v.Cast(b+.5),c._h=w.Cast((a-b)/x.TWO_TO_32),c}function e(){return Number(g._h)*x.TWO_TO_32+Number(g._l)}var g=this;g==f&&(x.TWO_TO_32=4294967296),l(g,x,"fromUnsignedInt",b),l(g,x,"fromInt",c),l(g,x,"fromNumber",d),m(g,"asNumber",e),g!=f&&(this.toString=function(){return g.asNumber.toString()}),g!=f&&a.apply(this,arguments)}function y(){function a(){x.call(d),d._l=0,d._h=0}function b(a){var b=new y;return b._h=0,b._l=a,b}function c(a){var b=new y;return b._h=Math.floor(a/x.TWO_TO_32),b._l=a%x.TWO_TO_32,b}var d=this;l(d,y,"fromUnsignedInt",b),l(d,y,"fromNumber",c),d!=f&&a.apply(arguments)}function z(){function a(a,b,c){p.id=a,p.bitrate=b,p.resource=c}function b(){p.id=null,p.bitrate=0,p.resource=null}function c(){return p.__auto_id}function d(a){p.__auto_id=a}function e(){return p.__auto_bitrate}function g(a){p.__auto_bitrate=a}function h(){return p.__auto_resource}function i(a){p.__auto_resource=a}function k(){return null!=p.id&&"string"!=typeof p.id?"CandidateStream.id is not a string":null!=p.bitrate&&"number"!=typeof p.bitrate?"CandidateStream.bitrate is not an int":null!=p.resource&&"string"!=typeof p.resource?"CandidateStream.resource is not a string":null}function o(a){if(null==a)return null;var b=new z("",-1,null);return b.id=S.GetStringField("id",a),b.bitrate=w.Cast(S.GetField("bitrate",a)),b.resource=S.GetStringField("resource",a),b}var p=this;j(p,"Cleanup",b),j(p,"Cleanup",b),p!=f&&(p.__auto_id=void 0),m(p,"id",c),m(p,"id",c),n(p,"id",d),n(p,"id",d),p!=f&&(p.__auto_bitrate=void 0),m(p,"bitrate",e),m(p,"bitrate",e),n(p,"bitrate",g),n(p,"bitrate",g),p!=f&&(p.__auto_resource=void 0),m(p,"resource",h),m(p,"resource",h),n(p,"resource",i),n(p,"resource",i),j(p,"CheckValidity",k),j(p,"CheckValidity",k),l(p,z,"ConstructClone",o),l(p,z,"ConstructClone",o),p!=f&&a.apply(p,arguments)}function A(){function a(){return Q.StringDictionaryToRepr(g._tags)}function b(a){g._tags=Q.DictionaryFromRepr(a)}function c(){return g._isLive}function d(a){if("true"===a&&(a=!0),"false"===a&&(a=!1),a!==!0&&a!==!1){var b=U.getInstance();b.err("Invalid value for ConvivaContentInfo.isLive, expected boolean. Defaulting to false."),a=!1}g._isLive=a}function e(a,b){g.assetName=a,g.tags=b,null==g._tags&&(g._tags=new N)}var g=this;g==f&&(A.CDN_NAME_AKAMAI="AKAMAI"),g==f&&(A.CDN_NAME_AMAZON="AMAZON"),g==f&&(A.CDN_NAME_ATT="ATT"),g==f&&(A.CDN_NAME_BITGRAVITY="BITGRAVITY"),g==f&&(A.CDN_NAME_BT="BT"),g==f&&(A.CDN_NAME_CDNETWORKS="CDNETWORKS"),g==f&&(A.CDN_NAME_CHINACACHE="CHINACACHE"),g==f&&(A.CDN_NAME_EDGECAST="EDGECAST"),g==f&&(A.CDN_NAME_HIGHWINDS="HIGHWINDS"),g==f&&(A.CDN_NAME_INTERNAP="INTERNAP"),g==f&&(A.CDN_NAME_LEVEL3="LEVEL3"),g==f&&(A.CDN_NAME_LIMELIGHT="LIMELIGHT"),g==f&&(A.CDN_NAME_OCTOSHAPE="OCTOSHAPE"),g==f&&(A.CDN_NAME_SWARMCAST="SWARMCAST"),g==f&&(A.CDN_NAME_VELOCIX="VELOCIX"),g==f&&(A.CDN_NAME_TELEFONICA="TELEFONICA"),g==f&&(A.CDN_NAME_MICROSOFT="MICROSOFT"),g==f&&(A.CDN_NAME_CDNVIDEO="CDNVIDEO"),g==f&&(A.CDN_NAME_QBRICK="QBRICK"),g==f&&(A.CDN_NAME_NGENIX="NGENIX"),g==f&&(A.CDN_NAME_IPONLY="IPONLY"),g==f&&(A.CDN_NAME_TALKTALK="TALKTALK"),g==f&&(A.CDN_NAME_INHOUSE="INHOUSE"),g==f&&(A.CDN_NAME_COMCAST="COMCAST"),g==f&&(A.CDN_NAME_NICE="NICE"),g==f&&(A.CDN_NAME_TELENOR="TELENOR"),g==f&&(A.CDN_NAME_FASTLY="FASTLY"),g==f&&(A.CDN_NAME_TELIA="TELIA"),g==f&&(A.CDN_NAME_CHINANETCENTER="CHINANETCENTER"),g==f&&(A.CDN_NAME_MIRRORIMAGE="MIRRORIMAGE"),g==f&&(A.CDN_NAME_SONIC="SONIC"),g==f&&(A.CDN_NAME_ATLAS="ATLAS"),g==f&&(A.CDN_NAME_OOYALA="OOYALA"),g==f&&(A.CDN_NAME_TATA="TATA"),g==f&&(A.CDN_NAME_GOOGLE="GOOGLE"),g==f&&(A.CDN_NAME_INSTARTLOGIC="INSTARTLOGIC"),g==f&&(A.CDN_NAME_OTHER="OTHER"),g==f&&(A.FRAMEWORK_NAME_BRIGHTCOVE="Brightcove"),g==f&&(A.FRAMEWORK_NAME_KALTURA="Kaltura"),g==f&&(A.FRAMEWORK_NAME_OOYALA="Ooyala"),g==f&&(A.FRAMEWORK_NAME_OSMF="OSMF"),g==f&&(A.FRAMEWORK_NAME_THE_PLATFORM="thePlatform"),g==f&&(A.DEVICE_TYPE_CONSOLE="Console"),g==f&&(A.DEVICE_TYPE_MOBILE="Mobile"),g==f&&(A.DEVICE_TYPE_PC="PC"),g==f&&(A.DEVICE_TYPE_SET_TOP_BOX="Settop"),g==f&&(A.PLUGIN_NAME_KALTURA="ConvivaKalturaPlugin"),g==f&&(A.NO_RESOURCE="no_resource"),g!=f&&(g.assetName=void 0),g!=f&&(g._tags=null),m(g,"tags",a),m(g,"tags",a),n(g,"tags",b),n(g,"tags",b),g!=f&&(g.defaultReportingBitrateKbps=-1),g!=f&&(g.defaultReportingCdnName=A.CDN_NAME_OTHER),g!=f&&(g.defaultReportingResource=null),g!=f&&(g.frameworkName=null),g!=f&&(g.frameworkVersion=null),g!=f&&(g.pluginName=null),g!=f&&(g.pluginVersion=null),g!=f&&(g.viewerId=null),g!=f&&(g.deviceId=null),g!=f&&(g.deviceType=null),g!=f&&(g.playerName=null),g!=f&&(g.streamUrl=null),g!=f&&(g._isLive=!1),m(g,"isLive",c),m(g,"isLive",c),n(g,"isLive",d),n(g,"isLive",d),l(g,A,"CDN_NAME_AKAMAI",A.CDN_NAME_AKAMAI),l(g,A,"CDN_NAME_AMAZON",A.CDN_NAME_AMAZON),l(g,A,"CDN_NAME_ATLAS",A.CDN_NAME_ATLAS),l(g,A,"CDN_NAME_ATT",A.CDN_NAME_ATT),l(g,A,"CDN_NAME_BITGRAVITY",A.CDN_NAME_BITGRAVITY),l(g,A,"CDN_NAME_BT",A.CDN_NAME_BT),l(g,A,"CDN_NAME_CDNETWORKS",A.CDN_NAME_CDNETWORKS),l(g,A,"CDN_NAME_CDNVIDEO",A.CDN_NAME_CDNVIDEO),l(g,A,"CDN_NAME_CHINACACHE",A.CDN_NAME_CHINACACHE),l(g,A,"CDN_NAME_CHINANETCENTER",A.CDN_NAME_CHINANETCENTER),l(g,A,"CDN_NAME_COMCAST",A.CDN_NAME_COMCAST),l(g,A,"CDN_NAME_EDGECAST",A.CDN_NAME_EDGECAST),l(g,A,"CDN_NAME_FASTLY",A.CDN_NAME_FASTLY),l(g,A,"CDN_NAME_GOOGLE",A.CDN_NAME_GOOGLE),l(g,A,"CDN_NAME_HIGHWINDS",A.CDN_NAME_HIGHWINDS),l(g,A,"CDN_NAME_INHOUSE",A.CDN_NAME_INHOUSE),l(g,A,"CDN_NAME_INSTARTLOGIC",A.CDN_NAME_INSTARTLOGIC),l(g,A,"CDN_NAME_INTERNAP",A.CDN_NAME_INTERNAP),l(g,A,"CDN_NAME_IPONLY",A.CDN_NAME_IPONLY),l(g,A,"CDN_NAME_LEVEL3",A.CDN_NAME_LEVEL3),l(g,A,"CDN_NAME_LIMELIGHT",A.CDN_NAME_LIMELIGHT),l(g,A,"CDN_NAME_MICROSOFT",A.CDN_NAME_MICROSOFT),l(g,A,"CDN_NAME_MIRRORIMAGE",A.CDN_NAME_MIRRORIMAGE),l(g,A,"CDN_NAME_NGENIX",A.CDN_NAME_NGENIX),l(g,A,"CDN_NAME_NICE",A.CDN_NAME_NICE),l(g,A,"CDN_NAME_OCTOSHAPE",A.CDN_NAME_OCTOSHAPE),l(g,A,"CDN_NAME_OOYALA",A.CDN_NAME_OOYALA),l(g,A,"CDN_NAME_OTHER",A.CDN_NAME_OTHER),l(g,A,"CDN_NAME_QBRICK",A.CDN_NAME_QBRICK),l(g,A,"CDN_NAME_SONIC",A.CDN_NAME_SONIC),l(g,A,"CDN_NAME_SWARMCAST",A.CDN_NAME_SWARMCAST),l(g,A,"CDN_NAME_TALKTALK",A.CDN_NAME_TALKTALK),l(g,A,"CDN_NAME_TATA",A.CDN_NAME_TATA),l(g,A,"CDN_NAME_TELEFONICA",A.CDN_NAME_TELEFONICA),l(g,A,"CDN_NAME_TELENOR",A.CDN_NAME_TELENOR),l(g,A,"CDN_NAME_TELIA",A.CDN_NAME_TELIA),l(g,A,"CDN_NAME_VELOCIX",A.CDN_NAME_VELOCIX),l(g,A,"DEVICE_TYPE_CONSOLE",A.DEVICE_TYPE_CONSOLE),l(g,A,"DEVICE_TYPE_MOBILE",A.DEVICE_TYPE_MOBILE),l(g,A,"DEVICE_TYPE_PC",A.DEVICE_TYPE_PC),l(g,A,"DEVICE_TYPE_SET_TOP_BOX",A.DEVICE_TYPE_SET_TOP_BOX),l(g,A,"FRAMEWORK_NAME_BRIGHTCOVE",A.FRAMEWORK_NAME_BRIGHTCOVE),l(g,A,"FRAMEWORK_NAME_KALTURA",A.FRAMEWORK_NAME_KALTURA),l(g,A,"FRAMEWORK_NAME_OOYALA",A.FRAMEWORK_NAME_OOYALA),l(g,A,"FRAMEWORK_NAME_OSMF",A.FRAMEWORK_NAME_OSMF),l(g,A,"FRAMEWORK_NAME_THE_PLATFORM",A.FRAMEWORK_NAME_THE_PLATFORM),l(g,A,"NO_RESOURCE",A.NO_RESOURCE),l(g,A,"PLUGIN_NAME_KALTURA",A.PLUGIN_NAME_KALTURA),g!=f&&e.apply(g,arguments)}function B(){function a(){}function b(){null!=ha._notifiers&&ha._notifiers.Clear()}function c(){return 0}function d(){return-1}function e(){return!0}function g(){return-1}function h(){return-1}function i(){return-1}function m(){return-1}function n(a){}function o(){return!1}function p(){return-1}function q(){return-1}function r(){return-1}function s(){return-1}function t(){return-1}function u(a){return-1}function v(){return null}function w(){return B.BOOLEAN_UNAVAILABLE}function x(){return-1}function y(a){}function z(a){}function C(){return B.API_VERSION}function D(a){if(null!=a){var b=ha._notifiers,c=new R;if(c.Add(a),ha._notifiers=c,null!=ha._notifiers){ha.isProxyInitialized&&a(B.REASON_PROXYINITIALIZED,null),ha.SetDownloadStateChange(E.VIDEO,B.DOWNLOADSTATE_ACTIVE),ha.SetDownloadStateChange(E.AUDIO,B.DOWNLOADSTATE_ACTIVE);var d=ha._stream;ha._stream=new E(-1,A.CDN_NAME_OTHER,A.NO_RESOURCE,-1,-1,-1),ha.SetStream(d);var e=ha._playingState;ha._playingState=B.UNKNOWN,ha.SetPlayingState(e);var f=ha._lastMetadata;ha._lastMetadata=null,ha.SetMetadata(f);for(var g=ha._pendingErrors.Values,h=0;h<g.length;h++){var i=g[h];ha.SetError(i)}var j=ha._availableStreams;
ha._availableStreams=null,ha.SetAvailableStreams(j);var k=ha._currentLoadingStatus;ha._currentLoadingStatus=null,ha.SetLoadingStatus(k);var l=ha._displayWidth,m=ha._displayWidth;ha._displayWidth=-1,ha._displayHeight=-1,ha.SetDisplaySize(l,m)}b.Add(a),ha._notifiers=b}}function F(){return ha._currentLoadingStatus}function G(){return ha._playingState}function H(){return ha._stream.bitrateKbps}function I(){return ha._stream.cdnName}function J(){return ha._stream.resource}function K(){return ha._stream}function L(){return null}function M(){return ha._lastError}function N(){return ha._lastMetadata}function O(){return ha._displayWidth}function P(){return ha._displayHeight}function Q(){return null}function S(){return-1}function T(a,b){var c=new R;c.Add(a),c.Add(b);for(var d=ha._notifiers.Values,e=0;e<d.length;e++){var f=d[e];ha.notifyListeners(f,B.REASON_DOWNLOADSTATECHANGE,c)}}function U(a){if(a.bitrateKbps<=-2&&(a.bitrateKbps=ha._stream.bitrateKbps),null==a.cdnName&&(a.cdnName=ha._stream.cdnName),null==a.resource&&(a.resource=ha._stream.resource),!ha._stream.equals(a))for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_STREAMINFOCHANGE,a)}ha._stream=a}function V(a){if(ha._lastError=a,null!=ha._notifiers&&ha._notifiers.Count>0)for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_ERRORCHANGE,a)}else ha._pendingErrors.Add(a)}function W(a){if(ha._lastMetadata=a,null!=a)for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_METADATACHANGE,a)}}function X(a){for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_LOG,a)}}function Y(a){for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_LOG,"ERROR:"+a)}}function Z(){return null}function $(a){if(ha._currentLoadingStatus=a,null!=a)for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_LOADINGSTATUSCHANGE,a)}}function _(a){if(a!=ha._playingState)for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_PLAYINGSTATECHANGE,a)}ha._playingState=a}function aa(a){var b=new E(a,null,null,-1,-1,-1);ha.SetStream(b)}function ba(a){var b=new E(-2,a,null,-1,-1,-1);ha.SetStream(b)}function ca(a){var b=new E(-2,null,a,-1,-1,-1);ha.SetStream(b)}function da(a,b){if(a!=-1&&b!=-1){ha._displayWidth=a,ha._displayHeight=b;var c=new R;c.Add(a),c.Add(b);for(var d=ha._notifiers.Values,e=0;e<d.length;e++){var f=d[e];ha.notifyListeners(f,B.REASON_DISPLAYSIZECHANGE,c)}}}function ea(a){if(ha._availableStreams=a,null!=a)for(var b=ha._notifiers.Values,c=0;c<b.length;c++){var d=b[c];ha.notifyListeners(d,B.REASON_AVAILABLESTREAMINFOCHANGE,a)}}function fa(){if(!ha.isProxyInitialized){ha.isProxyInitialized=!0;for(var a=ha._notifiers.Values,b=0;b<a.length;b++){var c=a[b];ha.notifyListeners(c,B.REASON_PROXYINITIALIZED,null)}}}function ga(a,b,c){try{a(b,c)}catch(b){a(B.REASON_LOG,"ConvivaStreamerProxy : uncaught exception "+b)}}var ha=this;ha!=f&&(ha._notifiers=new R),ha!=f&&(ha._stream=new E(-1,A.CDN_NAME_OTHER,A.NO_RESOURCE,-1,-1,-1)),ha!=f&&(ha._playingState=B.UNKNOWN),ha!=f&&(ha._lastMetadata=null),ha!=f&&(ha._lastError=null),ha!=f&&(ha._pendingErrors=new R),ha!=f&&(ha._displayWidth=-1),ha!=f&&(ha._displayHeight=-1),ha!=f&&(ha._availableStreams=null),ha!=f&&(ha._currentLoadingStatus=null),ha!=f&&(ha.isProxyInitialized=void 0),ha==f&&(B.REASON_PLAYINGSTATECHANGE="PlayingStateChange"),ha==f&&(B.REASON_STREAMINFOCHANGE="StreamInfoChange"),ha==f&&(B.REASON_AVAILABLESTREAMINFOCHANGE="AvailableStreamInfoChange"),ha==f&&(B.REASON_PROXYINITIALIZED="ProxyInitialized"),ha==f&&(B.REASON_METADATACHANGE="MetadataChange"),ha==f&&(B.REASON_LOADINGSTATUSCHANGE="LoadingStatusChange"),ha==f&&(B.REASON_DOWNLOADSTATECHANGE="DownloadStateChange"),ha==f&&(B.REASON_DISPLAYSIZECHANGE="DisplaySizeChange"),ha==f&&(B.REASON_ERRORCHANGE="ErrorChange"),ha==f&&(B.REASON_LOG="Log"),ha==f&&(B.REASON_RESOURCE_ERROR="ResourceError"),ha==f&&(B.REASON_PRESENTATION_CHANGE="PresentationChange"),ha==f&&(B.STOPPED="STOPPED"),ha==f&&(B.PLAYING="PLAYING"),ha==f&&(B.BUFFERING="BUFFERING"),ha==f&&(B.PAUSED="PAUSED"),ha==f&&(B.NOT_MONITORED="NOT_MONITORED"),ha==f&&(B.ERROR="ERROR"),ha==f&&(B.UNKNOWN="UNKNOWN"),ha==f&&(B.DOWNLOADSTATE_ACTIVE=1),ha==f&&(B.DOWNLOADSTATE_INACTIVE=0),ha==f&&(B.METADATA_DURATION="duration"),ha==f&&(B.METADATA_ENCODED_FRAMERATE="framerate"),ha==f&&(B.BOOLEAN_TRUE=1),ha==f&&(B.BOOLEAN_FALSE=-1),ha==f&&(B.BOOLEAN_UNAVAILABLE=0),ha==f&&(B.CAPABILITY_VIDEO=1),ha==f&&(B.CAPABILITY_QUALITY_METRICS=2),ha==f&&(B.CAPABILITY_BITRATE_METRICS=4),ha==f&&(B.CAPABILITY_BITRATE_SWITCHING=8),ha==f&&(B.CAPABILITY_CDN_SWITCHING=16),ha==f&&(B.CAPABILITY_BITRATE_EXTERNAL=16),ha==f&&(B.CAPABILITY_SOURCE_HTTP=32),ha==f&&(B.CAPABILITY_SOURCE_CHUNKED=64),ha==f&&(B.CAPABILITY_SOURCE_STREAMING=128),j(ha,"Cleanup",b),j(ha,"Cleanup",b),j(ha,"GetCapabilities",c),j(ha,"GetCapabilities",c),j(ha,"GetPlayheadTimeMs",d),j(ha,"GetPlayheadTimeMs",d),j(ha,"GetIsPHTAccurate",e),j(ha,"GetIsPHTAccurate",e),j(ha,"GetBufferLengthMs",g),j(ha,"GetBufferLengthMs",g),j(ha,"GetVideoBufferLengthMs",h),j(ha,"GetVideoBufferLengthMs",h),j(ha,"GetAudioBufferLengthMs",i),j(ha,"GetAudioBufferLengthMs",i),j(ha,"GetStartingBufferLengthMs",m),j(ha,"GetStartingBufferLengthMs",m),j(ha,"SetStartingBufferLengthMs",n),j(ha,"SetStartingBufferLengthMs",n),j(ha,"GetIsStartingBufferFull",o),j(ha,"GetIsStartingBufferFull",o),j(ha,"GetRenderedFrameRate",p),j(ha,"GetRenderedFrameRate",p),j(ha,"GetSourceFrameRate",q),j(ha,"GetSourceFrameRate",q),j(ha,"GetDroppedFrames",r),j(ha,"GetDroppedFrames",r),j(ha,"GetCpuPercent",s),j(ha,"GetCpuPercent",s),j(ha,"GetMemoryAvailable",t),j(ha,"GetMemoryAvailable",t),j(ha,"GetCapacityKbps",u),j(ha,"GetCapacityKbps",u),j(ha,"GetServerAddress",v),j(ha,"GetServerAddress",v),j(ha,"GetIsLive",w),j(ha,"GetIsLive",w),j(ha,"GetStreamerVersion",x),j(ha,"GetStreamerVersion",x),j(ha,"FetchCandidateStreams",y),j(ha,"FetchCandidateStreams",y),j(ha,"Play",z),j(ha,"Play",z),j(ha,"GetApiVersion",C),j(ha,"GetApiVersion",C),ha==f&&(B.API_VERSION=1),j(ha,"SetMonitoringNotifier",D),j(ha,"SetMonitoringNotifier",D),j(ha,"GetLoadingStatus",F),j(ha,"GetLoadingStatus",F),j(ha,"GetPlayingState",G),j(ha,"GetPlayingState",G),j(ha,"GetBitrateKbps",H),j(ha,"GetBitrateKbps",H),j(ha,"GetCdnName",I),j(ha,"GetCdnName",I),j(ha,"GetResource",J),j(ha,"GetResource",J),j(ha,"GetStream",K),j(ha,"GetStream",K),j(ha,"GetStreams",L),j(ha,"GetStreams",L),j(ha,"GetLastError",M),j(ha,"GetLastError",M),j(ha,"GetLastMetadata",N),j(ha,"GetLastMetadata",N),j(ha,"GetDisplayWidth",O),j(ha,"GetDisplayWidth",O),j(ha,"GetDisplayHeight",P),j(ha,"GetDisplayHeight",P),j(ha,"GetStreamerType",Q),j(ha,"GetStreamerType",Q),j(ha,"GetLoadedBytes",S),j(ha,"GetLoadedBytes",S),j(ha,"SetDownloadStateChange",T),j(ha,"SetDownloadStateChange",T),j(ha,"SetStream",U),j(ha,"SetStream",U),j(ha,"SetError",V),j(ha,"SetError",V),j(ha,"SetMetadata",W),j(ha,"SetMetadata",W),j(ha,"Log",X),j(ha,"Log",X),j(ha,"LogError",Y),j(ha,"LogError",Y),j(ha,"GetTotalLoadedBytes",Z),j(ha,"GetTotalLoadedBytes",Z),j(ha,"SetLoadingStatus",$),j(ha,"SetLoadingStatus",$),j(ha,"SetPlayingState",_),j(ha,"SetPlayingState",_),j(ha,"SetBitrateKbps",aa),j(ha,"SetBitrateKbps",aa),j(ha,"SetCdnName",ba),j(ha,"SetCdnName",ba),j(ha,"SetResource",ca),j(ha,"SetResource",ca),j(ha,"SetDisplaySize",da),j(ha,"SetDisplaySize",da),j(ha,"SetAvailableStreams",ea),j(ha,"SetAvailableStreams",ea),j(ha,"SetProxyInitialized",fa),j(ha,"SetProxyInitialized",fa),k(ha,"notifyListeners",ga),l(ha,B,"API_VERSION",B.API_VERSION),l(ha,B,"BOOLEAN_FALSE",B.BOOLEAN_FALSE),l(ha,B,"BOOLEAN_TRUE",B.BOOLEAN_TRUE),l(ha,B,"BOOLEAN_UNAVAILABLE",B.BOOLEAN_UNAVAILABLE),l(ha,B,"BUFFERING",B.BUFFERING),l(ha,B,"CAPABILITY_BITRATE_EXTERNAL",B.CAPABILITY_BITRATE_EXTERNAL),l(ha,B,"CAPABILITY_BITRATE_METRICS",B.CAPABILITY_BITRATE_METRICS),l(ha,B,"CAPABILITY_BITRATE_SWITCHING",B.CAPABILITY_BITRATE_SWITCHING),l(ha,B,"CAPABILITY_CDN_SWITCHING",B.CAPABILITY_CDN_SWITCHING),l(ha,B,"CAPABILITY_QUALITY_METRICS",B.CAPABILITY_QUALITY_METRICS),l(ha,B,"CAPABILITY_SOURCE_CHUNKED",B.CAPABILITY_SOURCE_CHUNKED),l(ha,B,"CAPABILITY_SOURCE_HTTP",B.CAPABILITY_SOURCE_HTTP),l(ha,B,"CAPABILITY_SOURCE_STREAMING",B.CAPABILITY_SOURCE_STREAMING),l(ha,B,"CAPABILITY_VIDEO",B.CAPABILITY_VIDEO),l(ha,B,"DOWNLOADSTATE_ACTIVE",B.DOWNLOADSTATE_ACTIVE),l(ha,B,"DOWNLOADSTATE_INACTIVE",B.DOWNLOADSTATE_INACTIVE),l(ha,B,"ERROR",B.ERROR),l(ha,B,"METADATA_DURATION",B.METADATA_DURATION),l(ha,B,"METADATA_ENCODED_FRAMERATE",B.METADATA_ENCODED_FRAMERATE),l(ha,B,"NOT_MONITORED",B.NOT_MONITORED),l(ha,B,"PAUSED",B.PAUSED),l(ha,B,"PLAYING",B.PLAYING),l(ha,B,"REASON_AVAILABLESTREAMINFOCHANGE",B.REASON_AVAILABLESTREAMINFOCHANGE),l(ha,B,"REASON_DISPLAYSIZECHANGE",B.REASON_DISPLAYSIZECHANGE),l(ha,B,"REASON_DOWNLOADSTATECHANGE",B.REASON_DOWNLOADSTATECHANGE),l(ha,B,"REASON_ERRORCHANGE",B.REASON_ERRORCHANGE),l(ha,B,"REASON_LOADINGSTATUSCHANGE",B.REASON_LOADINGSTATUSCHANGE),l(ha,B,"REASON_LOG",B.REASON_LOG),l(ha,B,"REASON_METADATACHANGE",B.REASON_METADATACHANGE),l(ha,B,"REASON_PLAYINGSTATECHANGE",B.REASON_PLAYINGSTATECHANGE),l(ha,B,"REASON_PRESENTATION_CHANGE",B.REASON_PRESENTATION_CHANGE),l(ha,B,"REASON_PROXYINITIALIZED",B.REASON_PROXYINITIALIZED),l(ha,B,"REASON_RESOURCE_ERROR",B.REASON_RESOURCE_ERROR),l(ha,B,"REASON_STREAMINFOCHANGE",B.REASON_STREAMINFOCHANGE),l(ha,B,"STOPPED",B.STOPPED),l(ha,B,"UNKNOWN",B.UNKNOWN),ha!=f&&a.apply(ha,arguments)}function C(){function a(a){return C.readyState?void C._utils.log("LivePass.init(): already initialized."):(null==C._utils&&(C._utils=U.CreateUtils(null)),null==a||0==a.length?void C._utils.err("LivePass.init(): invalid customerKey: "+a):void C._utils.runProtectedSync(function(){C._settings=C._utils.getSettings(),C._toggleTracesUsed&&(C._settings.enableLogging=C._toggleTracesValue),C._settings.clientInstanceId=C._utils.randUInt(),C._settings.customerKey=a,C._utils.log("LivePass.init(): url="+C._settings.gatewayUrl+" customerKey="+C._settings.customerKey),C._utils.startFetchClientId(),D.init(),C._sessionFactory=new K,C.readyState=!0,C._utils.log("LivePass.init(): done.")},"LivePass.init"))}function b(a,b){return C.readyState?void C._utils.log("LivePass.initWithSettings(): already initialized."):(C._utils=U.CreateUtils(b),void C.init(a))}function c(){null!=C._utils&&C._utils.runProtected(function(){C._utils.log("LivePass.cleanup()"),null!=C._sessionFactory&&C._sessionFactory.cleanup(),C._sessionFactory=null,C._globalSessionId=-1,null!=C._utils&&C._utils.cleanup(),C._utils=null,C._settings=null},"LivePass.cleanup"),C.readyState=!1}function d(a,b,c){return C.readyState?C.createSessionWithGlobal(a,b,c,!1):(C.ping("LivePass.createSession before LivePass.init"),-1)}function e(a,b,c,d){var e=C._sessionFactory.newSessionId();return C._utils.runProtected(function(){C._sessionFactory.makeSession(a,b,c,e,d)},"LivePass.createSession"),e}function g(a,b){return C.readyState?void C._utils.runProtected(function(){var c=C._sessionFactory.getSession(a);null!=c&&c.reportError(G.makeUnscopedError(b,G.SEVERITY_FATAL))},"LivePass.reportError"):void C.ping("LivePass.reportError before LivePass.init")}function h(a,b){return C.readyState?void C._utils.runProtected(function(){var c=C._sessionFactory.getSession(a);null!=c&&c.setBitrate(b)},"LivePass.setBitrate"):void C.ping("LivePass.setBitrate before LivePass.init")}function i(a,b){return C.readyState?void C._utils.runProtected(function(){var c=C._sessionFactory.getSession(a);null!=c&&c.setCurrentStreamMetadata(b)},"LivePass.setCurrentStreamMetadata"):void C.ping("LivePass.setCurrentStreamMetadata before LivePass.init")}function j(a,b){return C.readyState?void C._utils.runProtected(function(){var c=C._sessionFactory.getSession(a);null!=c&&c.setCdnNameOrResource(b)},"LivePass.setCdnNameOrResource"):void C.ping("LivePass.setCdnNameOrResource before LivePass.init")}function k(a){return C.readyState?void C._utils.runProtected(function(){var b=C._sessionFactory.getSession(a);null!=b&&b.detachStreamer()},"LivePass.detachStreamer"):void C.ping("LivePass.detachStreamer before LivePass.init")}function m(a,b){return C.readyState?void C._utils.runProtected(function(){var c=C._sessionFactory.getSession(a);null!=c&&c.attachStreamer(b)},"LivePass.attachStreamer"):void C.ping("LivePass.attachStreamer before LivePass.init")}function n(a,b,c){if(!C.readyState)return void C.ping("LivePass.sendSessionEvent before LivePass.init");var d=null;d=Q.DictionaryFromRepr(c),C._utils.runProtected(function(){var c=C._sessionFactory.getSession(a);null!=c&&c.sendCustomEvent(b,d)},"LivePass.sendSessionEvent")}function o(a,b){return C.readyState?void C._utils.runProtected(function(){if(C._globalSessionId<0){var c=new A("",new N);C._globalSessionId=C.createSessionWithGlobal(null,c,null,!0)}C.sendSessionEvent(C._globalSessionId,a,b)},"LivePass.sendEvent"):void C.ping("LivePass.sendEvent before LivePass.init")}function p(a){return C.readyState?void C._utils.runProtected(function(){C._sessionFactory.cleanupSession(a)},"Livepass.cleanupSession"):void C.ping("LivePass.cleanupSession before LivePass.init")}function q(a){return C.readyState?void C.adStart(a):void C.ping("LivePass.pauseJoinTime before LivePass.init")}function r(a){return C.readyState?void C.adEnd(a):void C.ping("LivePass.resumeJoinTime before LivePass.init")}function s(a){return C.readyState?void C._utils.runProtected(function(){var b=C._sessionFactory.getSession(a);null!=b&&b.adStart()},"LivePass.adStart"):void C.ping("LivePass.adStart before LivePass.init")}function t(a){return C.readyState?void C._utils.runProtected(function(){var b=C._sessionFactory.getSession(a);null!=b&&b.adEnd()},"LivePass.adEnd"):void C.ping("LivePass.adEnd before LivePass.init")}function u(a){C._toggleTracesUsed=!0,null!=C._settings?C._settings.enableLogging=a:C._toggleTracesValue=a}function v(a){null!=C._utils&&C._utils.ping(a)}var w=this;w==f&&(C.READY="READY"),w==f&&(C.STREAM_SELECTION_SUCC=0),w==f&&(C.STREAM_SELECTION_FAILURE=1),w==f&&(C.STREAM_SELECTION_TIMEOUT=2),w==f&&(C.OPTION_EXTERNAL_BITRATE_REPORTING="externalBitrateReporting"),w==f&&(C.readyState=!1),w==f&&(C._settings=null),w==f&&(C._utils=null),w==f&&(C._sessionFactory=null),w==f&&(C._toggleTracesUsed=!1),w==f&&(C._toggleTracesValue=!1),w==f&&(C._globalSessionId=-1),l(w,C,"init",a),l(w,C,"initWithSettings",b),l(w,C,"cleanup",c),l(w,C,"createSession",d),l(w,C,"createSessionWithGlobal",e),l(w,C,"reportError",g),l(w,C,"setBitrate",h),l(w,C,"setCurrentStreamMetadata",i),l(w,C,"setCdnNameOrResource",j),l(w,C,"detachStreamer",k),l(w,C,"attachStreamer",m),l(w,C,"sendSessionEvent",n),l(w,C,"sendEvent",o),l(w,C,"cleanupSession",p),l(w,C,"pauseJoinTime",q),l(w,C,"resumeJoinTime",r),l(w,C,"adStart",s),l(w,C,"adEnd",t),l(w,C,"toggleTraces",u),l(w,C,"ping",v)}function D(){function a(){D.stateToInt=new N,D.intToState=new N,D.stateToInt.SetValue(D.UNINITIALIZED,D.eUninitialized),D.intToState.SetValue(D.eUninitialized,D.UNINITIALIZED),D.stateToInt.SetValue(D.PLAYING,D.ePlaying),D.intToState.SetValue(D.ePlaying,D.PLAYING),D.stateToInt.SetValue(D.STOPPED,D.eStopped),D.intToState.SetValue(D.eStopped,D.STOPPED),D.stateToInt.SetValue(D.PAUSED,D.ePaused),D.intToState.SetValue(D.ePaused,D.PAUSED),D.stateToInt.SetValue(D.BUFFERING,D.eBuffering),D.intToState.SetValue(D.eBuffering,D.BUFFERING),D.stateToInt.SetValue(D.NOT_MONITORED,D.eNotMonitored),D.intToState.SetValue(D.eNotMonitored,D.NOT_MONITORED),D.stateToInt.SetValue(D.UNKNOWN,D.eUnknown),D.intToState.SetValue(D.eUnknown,D.UNKNOWN)}function b(a){return null==D.stateToInt&&D.init(),D.stateToInt.ContainsKey(a)?D.stateToInt.GetValue(a):D.eUnknown}function c(a){return null==D.intToState&&D.init(),D.intToState.ContainsKey(a)?D.intToState.GetValue(a):D.UNKNOWN}function d(){D.stateToInt=null}var e=this;e==f&&(D.stateToInt=null),e==f&&(D.intToState=null),e==f&&(D.UNINITIALIZED="UNINITIALIZED"),e==f&&(D.eUninitialized=0),e==f&&(D.PLAYING="PLAYING"),e==f&&(D.ePlaying=3),e==f&&(D.STOPPED="STOPPED"),e==f&&(D.eStopped=1),e==f&&(D.PAUSED="PAUSED"),e==f&&(D.ePaused=12),e==f&&(D.BUFFERING="BUFFERING"),e==f&&(D.eBuffering=6),e==f&&(D.NOT_MONITORED="NOT_MONITORED"),e==f&&(D.eNotMonitored=98),e==f&&(D.UNKNOWN="UNKNOWN"),e==f&&(D.eUnknown=100),l(e,D,"init",a),l(e,D,"stringToInt",b),l(e,D,"intToString",c),l(e,D,"cleanup",d)}function E(){function a(){return z.__auto_type}function b(a){z.__auto_type=a}function c(){return z.__auto_sourceHeightPixels}function d(a){z.__auto_sourceHeightPixels=a}function e(){return z.__auto_sourceWidthPixels}function g(a){z.__auto_sourceWidthPixels=a}function h(){return z.__auto_bitrateKbps}function i(a){z.__auto_bitrateKbps=a}function k(){return z.__auto_resource}function o(a){z.__auto_resource=a}function p(){return z.__auto_cdnName}function q(a){z.__auto_cdnName=a}function r(a,b,c,d,e,f){z.bitrateKbps=a,z.cdnName=b,z.resource=c,z.type=d,z.sourceHeightPixels=f,z.sourceWidthPixels=e}function s(){return z.bitrateKbps}function t(){return z.cdnName}function u(){return z.resource}function v(a){return null!=a&&(z.cdnName==a.cdnName&&z.resource==a.resource&&z.bitrateKbps==a.bitrateKbps&&z.type==a.type&&z.sourceHeightPixels==a.sourceHeightPixels&&z.sourceWidthPixels==a.sourceWidthPixels)}function x(a){if(null==a)return null;var b=new E(-1,A.CDN_NAME_OTHER,null,-1,-1,-1);return b.type=w.Cast(S.GetField("type",a)),b.bitrateKbps=w.Cast(S.GetField("bitrateKbps",a)),b.resource=S.GetStringField("resource",a),b.cdnName=S.GetStringField("cdnName",a),b.sourceHeightPixels=w.Cast(S.GetField("sourceHeightPixels",a)),b.sourceWidthPixels=w.Cast(S.GetField("sourceWidthPixels",a)),b}function y(){var a=null;switch(z.type){case E.UNKNOWN:a="UNKNOWN";break;case E.VIDEO:a="VIDEO";break;case E.AUDIO:a="AUDIO";break;case E.TEXT:a="TEXT";break;case E.RESOURCE:a="RESOURCE";break;default:throw new Error("Unknown stream type "+z.type)}return"type="+a+", bitrateKbps="+z.bitrateKbps+", resource="+(null!=z.resource?z.resource:"null")+", cdnName="+(null!=z.cdnName?z.cdnName:"null")+", sourceHeightPixels="+z.sourceHeightPixels+", sourceWidthPixels="+z.sourceWidthPixels}var z=this;z==f&&(E.UNKNOWN=-1),z==f&&(E.AUDIO=0),z==f&&(E.VIDEO=1),z==f&&(E.TEXT=2),z==f&&(E.RESOURCE=3),z==f&&(E.UNKNOWN_RESOURCE=""),z==f&&(E.MAX_BITRATE=2147483647),z!=f&&(z.__auto_type=void 0),m(z,"type",a),m(z,"type",a),n(z,"type",b),n(z,"type",b),z!=f&&(z.__auto_sourceHeightPixels=void 0),m(z,"sourceHeightPixels",c),m(z,"sourceHeightPixels",c),n(z,"sourceHeightPixels",d),n(z,"sourceHeightPixels",d),z!=f&&(z.__auto_sourceWidthPixels=void 0),m(z,"sourceWidthPixels",e),m(z,"sourceWidthPixels",e),n(z,"sourceWidthPixels",g),n(z,"sourceWidthPixels",g),z!=f&&(z.__auto_bitrateKbps=void 0),m(z,"bitrateKbps",h),m(z,"bitrateKbps",h),n(z,"bitrateKbps",i),n(z,"bitrateKbps",i),z!=f&&(z.__auto_resource=void 0),m(z,"resource",k),m(z,"resource",k),n(z,"resource",o),n(z,"resource",o),z!=f&&(z.__auto_cdnName=void 0),m(z,"cdnName",p),m(z,"cdnName",p),n(z,"cdnName",q),n(z,"cdnName",q),j(z,"GetBitrateKbps",s),j(z,"GetBitrateKbps",s),j(z,"GetCdnName",t),j(z,"GetCdnName",t),j(z,"GetResource",u),j(z,"GetResource",u),j(z,"equals",v),j(z,"equals",v),l(z,E,"ConstructClone",x),l(z,E,"ConstructClone",x),j(z,"ToStr",y),j(z,"ToStr",y),l(z,E,"AUDIO",E.AUDIO),l(z,E,"MAX_BITRATE",E.MAX_BITRATE),l(z,E,"RESOURCE",E.RESOURCE),l(z,E,"TEXT",E.TEXT),l(z,E,"UNKNOWN",E.UNKNOWN),l(z,E,"UNKNOWN_RESOURCE",E.UNKNOWN_RESOURCE),l(z,E,"VIDEO",E.VIDEO),z!=f&&r.apply(z,arguments)}function F(){function a(a,b,c){return new F(F.GetNextId(!1),a,b,-1,null,c)}function b(a,b){return new F(F.GetNextId(!1),null,a,-1,null,b)}function c(){}function d(){return C.__auto_id}function e(a){C.__auto_id=a}function g(){return C.__auto_timeoutMs}function h(a){C.__auto_timeoutMs=a}function i(){return C.__auto_sourceStream}function k(a){C.__auto_sourceStream=a}function o(){return C.__auto_targetStream}function p(a){C.__auto_targetStream=a}function q(){return C.__auto_mode}function r(a){C.__auto_mode=a}function s(){return C.__auto_status}function t(a){C.__auto_status=a}function u(a,b,c,d,e,f){C.id=a,C.sourceStream=b,C.targetStream=c,C.timeoutMs=d,C.mode=e,C.status=f}function v(){if(null==C.id)return"StreamSwitch.id is null (and must be non-null)";if(null!=C.id&&"string"!=typeof C.id)return"StreamSwitch.id is not a string";if(null!=C.timeoutMs&&"number"!=typeof C.timeoutMs)return"StreamSwitch.timeoutMs is not an int";if(null!=C.mode&&"string"!=typeof C.mode)return"StreamSwitch.mode is not a string";if(null!=C.status&&"string"!=typeof C.status)return"StreamSwitch.status is not a string";if(!(null==C.sourceStream||C.sourceStream instanceof z))return"StreamSwitch.sourceStream is not a CandidateStream";if(null!=C.targetStream&&!(C.targetStream instanceof z))return"StreamSwitch.targetStream is not a CandidateStream";var a=null!=C.sourceStream?C.sourceStream.CheckValidity():null;if(null!=a)return a;var b=null!=C.targetStream?C.targetStream.CheckValidity():null;return null!=b?b:null}function x(a){var b=new F(null,null,null,-1,"","");return b.id=S.GetStringField("id",a),b.sourceStream=z.ConstructClone(S.GetField("sourceStream",a)),b.targetStream=z.ConstructClone(S.GetField("targetStream",a)),b.timeoutMs=w.Cast(S.GetField("timeoutMs",a)),b.mode=S.GetStringField("mode",a),b.status=S.GetStringField("status",a),b}function y(){F._nextId=0}function A(){F._nextId=0}function B(a){var b=F._nextId;return F._nextId+=1,a?"c3."+Q.ToString(b):Q.ToString(b)}var C=this;C==f&&(F._nextId=0),C==f&&(F.PENDING="PENDING"),C==f&&(F.IN_PROGRESS="IN_PROGRESS"),C==f&&(F.SUCCEEDED="SUCCEEDED"),C==f&&(F.FAILED="FAILED"),C==f&&(F.INTERRUPTED="INTERRUPTED"),l(C,F,"MakeSwitch",a),l(C,F,"MakeSwitch",a),l(C,F,"MakeSwitchToStream",b),l(C,F,"MakeSwitchToStream",b),j(C,"Cleanup",c),j(C,"Cleanup",c),C!=f&&(C.__auto_id=void 0),m(C,"id",d),m(C,"id",d),n(C,"id",e),n(C,"id",e),C!=f&&(C.__auto_timeoutMs=void 0),m(C,"timeoutMs",g),m(C,"timeoutMs",g),n(C,"timeoutMs",h),n(C,"timeoutMs",h),C!=f&&(C.__auto_sourceStream=void 0),m(C,"sourceStream",i),m(C,"sourceStream",i),n(C,"sourceStream",k),n(C,"sourceStream",k),C!=f&&(C.__auto_targetStream=void 0),m(C,"targetStream",o),m(C,"targetStream",o),n(C,"targetStream",p),n(C,"targetStream",p),C!=f&&(C.__auto_mode=void 0),m(C,"mode",q),m(C,"mode",q),n(C,"mode",r),n(C,"mode",r),C!=f&&(C.__auto_status=void 0),m(C,"status",s),m(C,"status",s),n(C,"status",t),n(C,"status",t),j(C,"CheckValidity",v),j(C,"CheckValidity",v),l(C,F,"ConstructClone",x),l(C,F,"ConstructClone",x),l(C,F,"StaticInit",y),l(C,F,"StaticInit",y),l(C,F,"StaticCleanup",A),l(C,F,"StaticCleanup",A),l(C,F,"GetNextId",B),l(C,F,"GetNextId",B),l(C,F,"FAILED",F.FAILED),l(C,F,"INTERRUPTED",F.INTERRUPTED),l(C,F,"IN_PROGRESS",F.IN_PROGRESS),l(C,F,"PENDING",F.PENDING),l(C,F,"SUCCEEDED",F.SUCCEEDED),C!=f&&u.apply(C,arguments)}function G(){function a(){return x.__auto_errorCode}function b(a){x.__auto_errorCode=a}function c(){return x.__auto_severity}function d(a){x.__auto_severity=a}function e(){return x.__auto_stream}function g(a){x.__auto_stream=a}function h(){return x.__auto_index}function i(a){x.__auto_index=a}function k(){return x.__auto_scope}function o(a){x.__auto_scope=a}function p(a,b){return new G(a,null,-1,b,G.ERROR_SCOPE_UNKNOWN)}function q(a,b,c){return new G(a,c,-1,b,G.ERROR_SCOPE_STREAM)}function r(a,b,c){return new G(a,c,-1,b,G.ERROR_SCOPE_RESOURCE)}function s(a,b,c,d){return new G(a,c,d,b,G.ERROR_SCOPE_STREAM_SEGMENT)}function t(a,b,c,d,e){x.errorCode=a,x.stream=b,x.index=c,x.severity=d,x.scope=e}function u(a){if(null==a)return null;var b=new G("",null,0,0,0);return b.errorCode=S.GetStringField("errorCode",a),b.severity=w.Cast(S.GetField("severity",a)),b.stream=E.ConstructClone(S.GetField("stream",a)),b.scope=w.Cast(S.GetField("scope",a)),b.index=w.Cast(S.GetField("index",a)),b}function v(){return"errorCode="+(null!=x.errorCode?x.errorCode:"null")+", index="+x.index+", severity="+x.severity+", scope="+x.scope+", stream=("+x.stream.ToStr()+")"}var x=this;x==f&&(G.ERROR_SCOPE_UNKNOWN=0),x==f&&(G.ERROR_SCOPE_STREAM_SEGMENT=1),x==f&&(G.ERROR_SCOPE_STREAM=2),x==f&&(G.ERROR_SCOPE_RESOURCE=3),x==f&&(G.SEVERITY_WARNING=0),x==f&&(G.SEVERITY_FATAL=1),x!=f&&(x.__auto_errorCode=void 0),m(x,"errorCode",a),m(x,"errorCode",a),n(x,"errorCode",b),n(x,"errorCode",b),x!=f&&(x.__auto_severity=void 0),m(x,"severity",c),m(x,"severity",c),n(x,"severity",d),n(x,"severity",d),x!=f&&(x.__auto_stream=void 0),m(x,"stream",e),m(x,"stream",e),n(x,"stream",g),n(x,"stream",g),x!=f&&(x.__auto_index=void 0),m(x,"index",h),m(x,"index",h),n(x,"index",i),n(x,"index",i),x!=f&&(x.__auto_scope=void 0),m(x,"scope",k),m(x,"scope",k),n(x,"scope",o),n(x,"scope",o),l(x,G,"makeUnscopedError",p),l(x,G,"makeUnscopedError",p),l(x,G,"makeStreamError",q),l(x,G,"makeStreamError",q),l(x,G,"makeResourceError",r),l(x,G,"makeResourceError",r),l(x,G,"makeStreamSegmentError",s),l(x,G,"makeStreamSegmentError",s),l(x,G,"ConstructClone",u),l(x,G,"ConstructClone",u),j(x,"ToStr",v),j(x,"ToStr",v),x!=f&&t.apply(x,arguments)}function H(){function a(a,b,c,d,e){L._eventQueue=b,L._utils=U.getInstance(),L._contentInfo=c,L._sessionId=e,L._nextHeartbeat=new N,L._streamerObject=a,L._startTimeMs=0,L._lastStateUpdateTimeMs=0,L._pauseJoinTimeStartTimeMs=0,L._pauseJointTimeTotalMs=0,L._cumulativeTimePerState=new N;for(var f=D.stateToInt.KeyValuePairs,g=0;g<f.length;g++){var h=f[g];L._cumulativeTimePerState.SetValue(h.Value,0)}if(L._joinTimeMs=-1,L._bufferingEventCount=0,L._nominalPlayingBitsTotal=0,L._encodedFps=-1,L._contentLengthSec=-1,L._playingFpsObservationCount=0,L._playingFpsTotal=0,null!=d){var i=Q.DictionaryFromRepr(d);i.ContainsKey(C.OPTION_EXTERNAL_BITRATE_REPORTING)&&(L._externalBitrateReporting=i.GetValue(C.OPTION_EXTERNAL_BITRATE_REPORTING))}}function b(a){L._startTimeMs=a,L._lastStateUpdateTimeMs=a,L.buildInitialStreamInfo(),L.attachStreamer(L._streamerObject),L._streamerObject=null}function c(a){return L._utils.logSession("Monitor.attachStreamer()",L._sessionId),null!=L._streamer?void L._utils.logSession("Monitor.attachStreamer(): detach current streamer first",L._sessionId):null==a?(L._utils.logSession("Monitor.attachStreamer(): received a null streamer",L._sessionId),void L.SetPlayingState(B.NOT_MONITORED)):(L._streamer=H.wrapInConvivaStreamerProxy(a,L._sessionId),L._sessionFlags=L._streamer.GetCapabilities(),L._externalBitrateReporting&&(L._sessionFlags|=B.CAPABILITY_BITRATE_EXTERNAL),L.SetPlayingState(B.UNKNOWN),L._streamer.SetMonitoringNotifier(L.notificationFromStreamerProxy),void(L._lastStateUpdateTimeMs=L._utils.epochTimeMs()))}function d(){L._utils.logSession("Monitor.detachStreamer()",L._sessionId),L.updateMetrics(),null!=L._streamer&&(L._streamer.Cleanup(),L.SetPlayingState(B.NOT_MONITORED),L._streamer=null)}function e(){if(L._utils.logSession("Monitor.pauseJoinTime()",L._sessionId),0==L._pauseJoinTimeStartTimeMs){L._pauseJoinTimeStartTimeMs=L._utils.epochTimeMs();var a=new N,b=new N;a.SetValue("pj",!0),b.SetValue("pj",!1),L.declareStateChange(a,b)}}function g(a){if(L._utils.logSession("Monitor.resumeJoinTime()",L._sessionId),L._pauseJoinTimeStartTimeMs>0&&(L._pauseJointTimeTotalMs+=L._utils.epochTimeMs()-L._pauseJoinTimeStartTimeMs,a)){var b=new N,c=new N;b.SetValue("pj",!1),c.SetValue("pj",!0),L.declareStateChange(b,c)}L._pauseJoinTimeStartTimeMs=0}function h(){return L._streamer}function i(){var a=-1,b=null,c=A.CDN_NAME_OTHER;null!=L._contentInfo&&(c=L._contentInfo.defaultReportingCdnName,b=null==L._contentInfo.defaultReportingResource||L._contentInfo.defaultReportingResource==A.NO_RESOURCE?c:L._contentInfo.defaultReportingResource,a=L._contentInfo.defaultReportingBitrateKbps),L._streamInfo=new E(a,c,b,-1,-1,-1)}function n(a,b){L._utils.runProtected(function(){switch(a){case"PlayingStateChange":var c=b;L.OnPlayingStateChange(c);break;case"StreamInfoChange":var d=b;L.SetStream(d);break;case"ErrorChange":var e=b;L.OnError(e);break;case"MetadataChange":L.OnMetadata(b);break;case"Log":var f=b;L._utils.logSession(f,L._sessionId)}},"notificationFromStreamerProxy")}function o(a){if(L.updateStateCumulativeTime(),L._playingState!=a){var b=L._joinTimeMs>=0,c=new N,d=new N;c.SetValue("ps",D.stringToInt(a)),d.SetValue("ps",D.stringToInt(L._playingState)),b||a!=B.PLAYING||(L._cumulativeTimePerState.SetValue(D.eBuffering,0),L._pauseJoinTimeStartTimeMs>0&&(L.resumeJoinTime(!1),c.SetValue("pj",!1),d.SetValue("pj",!0)),L._joinTimeMs=w.Cast(L._utils.epochTimeMs()-L._startTimeMs-L._pauseJointTimeTotalMs),L._joinTimeMs<0&&(L._joinTimeMs=0)),b&&a==B.BUFFERING&&L._bufferingEventCount++,L._utils.logSession("Monitor: change playing state to "+a,L._sessionId),L._playingState=a,L.declareStateChange(c,d)}}function p(a){L._playingState!=a&&L.OnPlayingStateChange(a)}function q(a){null!=a&&(null!=L._streamer&&(a.bitrateKbps==L._streamer.GetBitrateKbps()&&(a.bitrateKbps=-2),a.cdnName==L._streamer.GetCdnName()&&(a.cdnName=null),a.resource==L._streamer.GetResource()&&(a.resource=null)),null==a.resource&&null!=a.cdnName&&L._streamInfo.cdnName==L._streamInfo.resource&&(a.resource=a.cdnName),!L._externalBitrateReporting&&a.bitrateKbps<=-2&&(a.bitrateKbps=L._streamInfo.bitrateKbps),null==a.cdnName&&(a.cdnName=L._streamInfo.cdnName),null!=a.resource&&a.resource!=A.NO_RESOURCE||(a.resource=L._streamInfo.resource),L._streamInfo.equals(a)||(L.updateStateCumulativeTime(),L.enqueueStreamChangeEvent(L._streamInfo,a),L._streamInfo=a))}function r(a){if(L._externalBitrateReporting){var b=E.ConstructClone(L._streamInfo);b.bitrateKbps=a,L.SetStream(b)}else L._utils.logSession("setBitrate() call ignored, enable external bitrate reporting first.",L._sessionId)}function s(a){L.declareError(a.errorCode,a.severity==G.SEVERITY_FATAL)}function t(a){var b=Q.DictionaryFromRepr(a);b.ContainsKey(B.METADATA_ENCODED_FRAMERATE)&&(L._encodedFps=w.Cast(L._utils.parseNumber(b.GetValue(B.METADATA_ENCODED_FRAMERATE),-1)),L._utils.logSession("Monitor: received "+B.METADATA_ENCODED_FRAMERATE+" metadata: "+L._encodedFps,L._sessionId)),b.ContainsKey(B.METADATA_DURATION)&&(L._contentLengthSec=w.Cast(L._utils.parseNumber(b.GetValue(B.METADATA_DURATION),-1)),L._utils.logSession("Monitor: received "+B.METADATA_DURATION+" metadata: "+L._contentLengthSec,L._sessionId))}function u(a){L.updateMetrics();var b=L._cumulativeTimePerState.GetValue(D.ePlaying),c=L._joinTimeMs>=0,d=0;c&&(d=L._cumulativeTimePerState.GetValue(D.eBuffering));var e=-1;c&&(e=w.Cast((L._nominalPlayingBitsTotal+0)/b));var f=-1;L._playingFpsObservationCount>0&&(f=w.Cast((L._playingFpsTotal+0)/L._playingFpsObservationCount)),S.setDictValue(a,"ps",D.stringToInt(L._playingState)),S.setDictValue(a,"pj",L._pauseJoinTimeStartTimeMs>0),S.setDictValue(a,"sf",L._sessionFlags),S.setDictValue(a,"tpt",b),S.setDictValue(a,"tbt",d),S.setDictValue(a,"tpst",L._cumulativeTimePerState.GetValue(D.ePaused)),S.setDictValue(a,"tst",L._cumulativeTimePerState.GetValue(D.eStopped)),S.setDictValue(a,"jt",L._joinTimeMs),S.setDictValue(a,"tbe",L._bufferingEventCount),L._contentLengthSec>0&&S.setDictValue(a,"cl",L._contentLengthSec),L._streamInfo.GetBitrateKbps()>0&&(S.setDictValue(a,"cbr",L._streamInfo.GetBitrateKbps()),S.setDictValue(a,"br",L._streamInfo.GetBitrateKbps())),e>0&&S.setDictValue(a,"abr",e),S.setDictValue(a,"rs",L._streamInfo.GetResource()),S.setDictValue(a,"cdn",L._streamInfo.GetCdnName()),L._encodedFps>=0&&S.setDictValue(a,"efps",L._encodedFps),f>=0&&S.setDictValue(a,"afps",f)}function v(){null!=L._streamer&&L._streamer.Cleanup(),L._streamer=null,L._streamerObject=null,L._eventQueue=null,L._contentInfo=null,L._nextHeartbeat=null,L._streamInfo=null,L._cumulativeTimePerState=null,L._utils=null}function x(){if(null!=L._streamer){if(L._playingState==B.PLAYING){var a=L._streamer.GetRenderedFrameRate();a>=0&&(L._playingFpsTotal+=a,L._playingFpsObservationCount++)}L.updateStateCumulativeTime()}}function y(a,b){L._eventQueue.enqueueEvent(a,b,w.Cast(L._utils.epochTimeMs()-L._startTimeMs))}function z(a,b){var c=new N,d=new N;a.GetBitrateKbps()!=b.GetBitrateKbps()&&b.GetBitrateKbps()>0&&(d.SetValue("br",a.GetBitrateKbps()),
c.SetValue("br",b.GetBitrateKbps()),L._utils.logSession("Monitor: change bitrate from "+d.GetValue("br")+" to "+c.GetValue("br"),L._sessionId)),a.GetCdnName()!=b.GetCdnName()&&(d.SetValue("cdn",a.GetCdnName()),c.SetValue("cdn",b.GetCdnName()),L._utils.logSession("Monitor: change cdnName from "+d.GetValue("cdn")+" to "+c.GetValue("cdn"),L._sessionId)),a.GetResource()!=b.GetResource()&&(d.SetValue("rs",a.GetResource()),c.SetValue("rs",b.GetResource()),L._utils.logSession("Monitor: change resource from "+d.GetValue("rs")+" to "+c.GetValue("rs"),L._sessionId)),L.declareStateChange(c,d)}function F(){var a=L._utils.epochTimeMs(),b=D.stringToInt(L._playingState);if(L._playingState!=B.UNKNOWN){var c=w.Cast(a-L._lastStateUpdateTimeMs);L._cumulativeTimePerState.SetValue(b,L._cumulativeTimePerState.GetValue(b)+c);var d=L._streamInfo.GetBitrateKbps();L._playingState==B.PLAYING&&d!=-1&&(L._nominalPlayingBitsTotal+=c*d)}L._lastStateUpdateTimeMs=a}function I(a,b){L._joinTimeMs<0&&b&&(L._joinTimeMs=-2);var c=new N;c.SetValue("ft",b),c.SetValue("err",a),L.enqueueEvent("CwsErrorEvent",c)}function J(a,b){var c=Q.StringDictionaryToRepr(a),d=Q.StringDictionaryToRepr(b),e=new N;e.SetValue("new",c),null!=b&&e.SetValue("old",d),L.enqueueEvent("CwsStateChangeEvent",e)}function K(a,b){var c=null;try{a.getAttribute&&a.getAttribute("classid").indexOf("clsid:SAMSUNG-INFOLINK")>=0&&(c=new SamsungStreamerProxy(a),c.startMonitoring())}catch(a){}return c?c:a.hasOwnProperty("getStreamerType")&&"Samsung"==a.getStreamerType()?SamsungStreamerProxy.createSamsungStreamerProxy(a):void 0!==a.setQosData&&void 0!==a.licenseResponse?new PlayStationTouchFactorStreamerProxy:void 0!==a.codecs&&void 0!==a.maxBufferLength?new PlayStationLibjscriptStreamerProxy:void 0!==a.textTrackDisplay&&void 0!==a.mediaLoader?new X(a):void 0!==a.networkState&&void 0!==a.readyState?new Html5ConvivaStreamerProxy(a):void 0!==a.currentPTS&&void 0!==a.availableAudioStreams?new PlayStationTrilithiumStreamerProxy(a):void 0!==a.mediaElementAdapter?new Xbox1ConvivaStreamerProxy(a):void 0!==a.MbId&&void 0!==a.blockedParams?new ConvivaOoyalaStreamerProxy(a):void 0!==a.mb&&void 0!==a.mb.MbId&&void 0!==a.mb.blockedParams?new ConvivaOoyalaStreamerProxy(a.mb):a}var L=this;L!=f&&(L._sessionId=0),L!=f&&(L._externalBitrateReporting=!1),L!=f&&(L._streamer=null),L!=f&&(L._streamerObject=null),L!=f&&(L._eventQueue=null),L!=f&&(L._contentInfo=null),L!=f&&(L._nextHeartbeat=null),L!=f&&(L._utils=null),L!=f&&(L._playingState=B.UNKNOWN),L!=f&&(L._streamInfo=null),L!=f&&(L._sessionFlags=1),L!=f&&(L._startTimeMs=0),L!=f&&(L._lastStateUpdateTimeMs=0),L!=f&&(L._pauseJoinTimeStartTimeMs=0),L!=f&&(L._pauseJointTimeTotalMs=0),L!=f&&(L._cumulativeTimePerState=null),L!=f&&(L._joinTimeMs=-1),L!=f&&(L._bufferingEventCount=0),L!=f&&(L._nominalPlayingBitsTotal=0),L!=f&&(L._encodedFps=-1),L!=f&&(L._contentLengthSec=-1),L!=f&&(L._playingFpsObservationCount=0),L!=f&&(L._playingFpsTotal=0),j(L,"start",b),j(L,"attachStreamer",c),j(L,"detachStreamer",d),j(L,"pauseJoinTime",e),j(L,"resumeJoinTime",g),m(L,"streamer",h),k(L,"buildInitialStreamInfo",i),k(L,"notificationFromStreamerProxy",n),k(L,"OnPlayingStateChange",o),k(L,"SetPlayingState",p),j(L,"SetStream",q),j(L,"setBitrate",r),j(L,"OnError",s),k(L,"OnMetadata",t),j(L,"updateHeartbeat",u),j(L,"cleanup",v),k(L,"updateMetrics",x),k(L,"enqueueEvent",y),k(L,"enqueueStreamChangeEvent",z),k(L,"updateStateCumulativeTime",F),k(L,"declareError",I),k(L,"declareStateChange",J),l(L,H,"wrapInConvivaStreamerProxy",K),L!=f&&a.apply(L,arguments)}function I(){function a(){d._events=S.makeList()}function b(a,b,c){b.SetValue("t",a),b.SetValue("st",c),b.SetValue("seq",d._nextSeqNumber),d._nextSeqNumber++,S.addListValue(d._events,Q.StringDictionaryToRepr(b))}function c(){var a=d._events;return d._events=S.makeList(),a}var d=this;d!=f&&(d._events=null),d!=f&&(d._nextSeqNumber=0),j(d,"enqueueEvent",b),j(d,"flushEvents",c),d!=f&&a.apply(d,arguments)}function J(){function a(a,b,c,d){F._contentInfo=b,F._utils=U.getInstance(),F._settings=F._utils.getSettings(),F._sessionId=F._utils.randInt();for(var e=Q.DictionaryFromRepr(F._contentInfo.tags),f=new R,g=e.Keys,h=0;h<g.length;h++){var i=g[h];null==e.GetValue(i)&&f.Add(i)}for(var j=f.Values,k=0;k<j.length;k++){var l=j[k];F.log("WARNING: correcting null value for tag "+l),S.setDictValue(F._contentInfo.tags,l,"null")}F._nativeReprTags=Q.StringDictionaryToRepr(F._contentInfo.tags),F._eventQueue=new I,d||(F._monitor=new H(a,F._eventQueue,F._contentInfo,c,F._sessionId))}function b(){null!=F._monitor&&F.log("Session.start(): assetName="+F._contentInfo.assetName),F._startTimeMs=F._utils.epochTimeMs(),null!=F._monitor&&F._monitor.start(F._startTimeMs),F._heartbeatSequenceNumber=0,null==F._utils.clientIdLoadingDone?F.sendHeartbeat():(F._clientIdWaiter=F.onClientIdLoaded,F._utils.clientIdLoadingDone.AddHandler(F._clientIdWaiter)),F._heartbeatTimer=null,F.resetHeartbeatTimer()}function c(){F.log("Session.cleanup()"+F.sessionTypeTag()),null!=F._heartbeatTimer&&F._heartbeatTimer.cleanup(),F._heartbeatTimer=null,F._utils.logSession("Schedule the last hb before session cleanup"+F.sessionTypeTag(),F._sessionId),null!=F._monitor&&F.enqueueSessionEndEvent();var a=F.makeHeartbeat();null!=a?F.encodeAndPostHeartbeat(a,function(){F.cleanupAll()}):F.cleanupAll()}function d(){var a=new N;F._eventQueue.enqueueEvent("CwsSessionEndEvent",a,w.Cast(F._utils.epochTimeMs()-F._startTimeMs))}function e(){null!=F._monitor&&F._monitor.pauseJoinTime()}function g(){null!=F._monitor&&F._monitor.resumeJoinTime(!0)}function h(){F.pauseJoinTime()}function i(){F.resumeJoinTime()}function l(){F._monitor.detachStreamer()}function m(a){F._monitor.attachStreamer(a)}function n(){null!=F._heartbeatTimer&&F._heartbeatTimer.cleanup(),F._heartbeatTimer=F._utils.createTimer(F.sendHeartbeat,F._settings.heartbeatIntervalMs,"sendHeartbeat")}function o(){null!=F._clientIdWaiter&&(F._utils.clientIdLoadingDone.DeleteHandler(F._clientIdWaiter),F._clientIdWaiter=null),null!=F._monitor&&(F._monitor.cleanup(),F._monitor=null),null!=F._encodeHeartbeatTimer&&(F._encodeHeartbeatTimer.cleanup(),F._encodeHeartbeatTimer=null),null!=F._eventQueue&&(F._eventQueue.flushEvents(),F._eventQueue=null),F._contentInfo=null,F._nativeReprTags=null,F._settings=null,F._utils=null}function p(a){F._utils.logSession(a,F._sessionId)}function q(a){F.log("Session.reportError()"),null!=F._monitor&&F._monitor.OnError(a)}function r(a){F.log("Session.setBitrate(): bitrateKbps="+a),null!=F._monitor&&F._monitor.setBitrate(a)}function s(a){F.log("Session.setCurrentStreamMetadata()"),null!=F._monitor&&null!=F._monitor.streamer&&F._monitor.streamer.SetMetadata(a)}function t(a){if(F.log("Session.setCdnNameOrResource()"),null!=F._monitor){var b=new E(-2,a,a,-1,-1,-1);F._monitor.SetStream(b)}}function u(a,b){F.log("Session.sendEvent(): eventName="+a+F.sessionTypeTag());var c=new N;c.SetValue("name",a);var d=Q.StringDictionaryToRepr(b);c.SetValue("attr",d),F._eventQueue.enqueueEvent("CwsCustomEvent",c,w.Cast(F._utils.epochTimeMs()-F._startTimeMs))}function v(){var a=null;null!=F._encodeHeartbeatTimer&&F._encodeHeartbeatTimer.cleanup(),F._encodeHeartbeatTimer=F._utils.scheduleAction(function(){a=F.makeHeartbeat(),null!=a&&(F._encodeHeartbeatTimer=F._utils.scheduleAction(function(){F.encodeAndPostHeartbeat(a,null),F._encodeHeartbeatTimer=null},1,"encodeAndSendHeartbeat"))},1,"makeHeartbeat")}function x(){var a={};S.setDictValue(a,"t","CwsSessionHb"),S.setDictValue(a,"cid",F._settings.customerKey),S.setDictValue(a,"clid",F._utils.clientId),S.setDictValue(a,"sid",F._sessionId),S.setDictValue(a,"seq",F._heartbeatSequenceNumber),S.setDictValue(a,"pver",F._settings.protocolVersion),S.setDictValue(a,"clv",F._settings.clientVersion),S.setDictValue(a,"iid",F._settings.clientInstanceId);var b=Q.StringDictionaryToRepr(F._settings.platformApi.getPlatformMetadata());null!=b&&S.setDictValue(a,"pm",b),null!=F._utils.device&&S.setDictValue(a,"dv",F._utils.device),null!=F._utils.deviceVersion&&S.setDictValue(a,"dvv",F._utils.deviceVersion),null!=F._utils.deviceType?S.setDictValue(a,"dvt",F._utils.deviceType):null!=F._contentInfo.deviceType&&S.setDictValue(a,"dvt",F._contentInfo.deviceType),null!=F._utils.os&&S.setDictValue(a,"os",F._utils.os),null!=F._utils.osVersion&&S.setDictValue(a,"osv",F._utils.osVersion),null!=F._utils.platform&&S.setDictValue(a,"pt",F._utils.platform),null!=F._contentInfo.viewerId&&S.setDictValue(a,"vid",F._contentInfo.viewerId),null!=F._contentInfo.streamUrl&&S.setDictValue(a,"url",F._contentInfo.streamUrl),null!=F._contentInfo.playerName&&S.setDictValue(a,"pn",F._contentInfo.playerName),S.setDictValue(a,"tags",F._nativeReprTags),null!=F._monitor?(S.setDictValue(a,"an",F._contentInfo.assetName),S.setDictValue(a,"lv",F._contentInfo.isLive),F._monitor.updateHeartbeat(a)):S.setDictValue(a,"sf",0);var c=F._eventQueue.flushEvents();if(S.setDictValue(a,"evs",c),null==F._monitor&&0==S.listCount(c))return null;J._sendLogs&&S.setDictValue(a,"lg",Q.ListToRepr(F._utils.getLogs(F._sessionId)));var d=F._utils.epochTimeMs();return S.setDictValue(a,"st",w.Cast(d-F._startTimeMs)),S.setDictValue(a,"cts",d/1e3),F._heartbeatSequenceNumber++,a}function y(){return null==F._monitor?" (global session)":""}function z(a,b){var c=F._utils.jsonEncode(a),d=F._settings.gatewayUrl+F._settings.gatewayPath,e="application/json";F.log("Send HB["+(F._heartbeatSequenceNumber-1)+"]"+F.sessionTypeTag()),F._utils.httpRequest(!0,d,c,e,F.onHeartbeatResponse),null!=b&&b()}function A(a,b){null!=F._utils&&F._utils.runProtected(function(){if(a){var c=F._utils.jsonDecode(b);if(null!=c){c.ContainsKey("clid")&&F._utils.setClientIdFromServer(Q.ToString(c.GetValue("clid")),!1);var d=c.ContainsKey("slg")&&Boolean(c.GetValue("slg"));if(d!=J._sendLogs&&(F.log("Turning "+(d?"on":"off")+" sending of logs"),J._sendLogs=d),c.ContainsKey("hbi")){var e=w.Cast(c.GetValue("hbi"));1e3*e!=F._settings.heartbeatIntervalMs&&(F.log("Received hbInterval from server "+e),F._settings.heartbeatIntervalMs=1e3*e,null!=F._heartbeatTimer&&F.resetHeartbeatTimer())}if(c.ContainsKey("gw")){var f=c.GetValue("gw");f!=F._settings.gatewayUrl&&(F.log("Received gatewayUrl from server "+f),F._settings.gatewayUrl=f)}}else F.log("Decoded heartbeat response is null.")}else F.log("Received no response (or a bad response) to heartbeat POST request.")},"onHeartbeatResponse")}function B(){F._utils.clientIdLoadingDone.DeleteHandler(F._clientIdWaiter),F._clientIdWaiter=null,F.sendHeartbeat()}function C(){F._monitor.streamer;throw new Error("Not implemented")}function D(a){throw new Error("Not implemented")}var F=this;F!=f&&(F._contentInfo=null),F!=f&&(F._nativeReprTags=null),F!=f&&(F._utils=null),F!=f&&(F._settings=null),F!=f&&(F._monitor=null),F!=f&&(F._eventQueue=null),F!=f&&(F._clientIdWaiter=null),F!=f&&(F._heartbeatTimer=null),F!=f&&(F._encodeHeartbeatTimer=null),F==f&&(J._sendLogs=!1),F!=f&&(F._sessionId=0),F!=f&&(F._startTimeMs=0),F!=f&&(F._heartbeatSequenceNumber=0),j(F,"start",b),j(F,"cleanup",c),k(F,"enqueueSessionEndEvent",d),j(F,"pauseJoinTime",e),j(F,"resumeJoinTime",g),j(F,"adStart",h),j(F,"adEnd",i),j(F,"detachStreamer",l),j(F,"attachStreamer",m),k(F,"resetHeartbeatTimer",n),k(F,"cleanupAll",o),k(F,"log",p),j(F,"reportError",q),j(F,"setBitrate",r),j(F,"setCurrentStreamMetadata",s),j(F,"setCdnNameOrResource",t),j(F,"sendCustomEvent",u),k(F,"sendHeartbeat",v),k(F,"makeHeartbeat",x),k(F,"sessionTypeTag",y),k(F,"encodeAndPostHeartbeat",z),k(F,"onHeartbeatResponse",A),k(F,"onClientIdLoaded",B),j(F,"initialResourceBitrateSelection",C),j(F,"midStreamResourceBitrateSelection",D),F!=f&&a.apply(F,arguments)}function K(){function a(){k._utils=U.getInstance(),k._settings=k._utils.getSettings(),k._nextSessionId=0,k._sessionsById=new N,k.lastSessionId=0}function b(){if(k._utils=null,k._settings=null,null!=k._sessionsById)for(var a=k._sessionsById.KeyValuePairs,b=0;b<a.length;b++){var c=a[b],d=c.Value;d.cleanup()}k._sessionsById=null,k._nextSessionId=0}function c(){var a=k._nextSessionId;return k._nextSessionId++,a}function d(a,b,c,d,e){var f=new J(a,b,c,e);return k.addSession(d,f),k.lastSessionId=d,f.start(),f}function e(a){return k._sessionsById.ContainsKey(a)?k._sessionsById.GetValue(a):(a==-1?k._utils.err("LivePass: invalid sessionId. LivePass not properly initialized yet?"):k._utils.err("LivePass: invalid sessionId. Did you cleanup that session previously?"),null)}function g(a,b){k._sessionsById.SetValue(a,b)}function h(a){k._sessionsById.Remove(a)}function i(a){var b=k.getSession(a);null!=b&&(k.removeSession(a),b.cleanup())}var k=this;k!=f&&(k.lastSessionId=0),k!=f&&(k._utils=null),k!=f&&(k._settings=null),k!=f&&(k._nextSessionId=0),k!=f&&(k._sessionsById=null),j(k,"cleanup",b),j(k,"newSessionId",c),j(k,"makeSession",d),j(k,"getSession",e),j(k,"addSession",g),j(k,"removeSession",h),j(k,"cleanupSession",i),k!=f&&a.apply(k,arguments)}function L(){function a(a){void 0==a&&(a=0),k.arr=new Array(a)}function b(){for(var a=new L,b=[],c=0;c<arguments.length;c++)b.push(arguments[c]);return a.arr=b,a}function c(a){if(null==a)return null;var b=new L;return b.arr=a,b}function d(){return k.arr}function e(){return k.arr.length}function g(a){if(a>=k.arr.length)throw new Error("Index out of bounds: "+a+" (length "+k.arr.length+")");if(a<0)throw new Error("Index out of bounds: "+a);return k.arr[a]}function h(a,b){if(a>=k.arr.length)throw new Error("Index out of bounds: "+a+" (length "+k.arr.length+")");if(a<0)throw new Error("Index out of bounds: "+a);k.arr[a]=b}function i(){return k.arr}var k=this;k!=f&&(k.arr=void 0),l(k,L,"Create",b),l(k,L,"FromRepr",c),j(k,"ToRepr",d),m(k,"Length",e),j(k,"GetValue",g),j(k,"SetValue",h),m(k,"Values",i),k!=f&&a.apply(this,arguments)}function M(){function a(a){e._cleanupCollection=a,e._id=M._nextCleanupId,M._nextCleanupId++,e._cleanupCollection.SetValue(e._id,e)}function b(a){e._cleanupAction=a}function c(){null!=e._cleanupAction&&e._cleanupAction(),e._cleanupCollection.Remove(e._id)}function d(a){U.getInstance().log("cleanupCollection");for(var b=new R,c=a.Values,d=0;d<c.length;d++){var e=c[d];b.Add(e)}for(var f=b.Values,g=0;g<f.length;g++){var e=f[g];e.cleanup()}a.Clear()}var e=this;e!=f&&(e._cleanupAction=null),e==f&&(M._nextCleanupId=0),e!=f&&(e._id=0),e!=f&&(e._cleanupCollection=null),j(e,"setCleanupAction",b),j(e,"cleanup",c),l(e,M,"cleanupCollection",d),e!=f&&a.apply(e,arguments)}function N(){function a(a){u.obj={}}function b(a){if(null==a)return null;if(a instanceof N)return a;a.hasOwnProperty("ToObject")&&(a=a.ToObject());var b=new N;return s(a,function(c){b.obj[c]=a[c]}),b}function c(){return u.obj}function d(){for(var a=new N,b=0;b+1<arguments.length;b+=2)a.obj[arguments[b]]=arguments[b+1];return a}function e(a){s(u.obj,function(b){a[b]=u.obj[b]})}function g(a){return u.obj[a]}function h(a,b){u.obj[a]=b}function i(){s(u.obj,function(a){delete u.obj[a]})}function k(a){return void 0!==u.obj[a]}function n(a){return ContainsKey(a)}function o(){var a=new Array;return s(u.obj,function(b){a.push(b)}),a}function p(){var a=new Array;return s(u.obj,function(b){a.push(u.obj[b])}),a}function q(){var a=new Array;return s(u.obj,function(b){a.push(new P(b,u.obj[b]))}),a}function r(){var a=0;return s(u.obj,function(b){a++}),a}function t(a){return!!u.ContainsKey(a)&&(delete u.obj[a],!0)}var u=this;u!=f&&(u.obj=void 0),l(u,N,"FromRepr",b),j(u,"ToObject",c),l(u,N,"Create",d),j(u,"CopyToObject",e),j(u,"GetValue",g),j(u,"SetValue",h),j(u,"Clear",i),j(u,"ContainsKey",k),j(u,"Contains",n),m(u,"Keys",o),m(u,"Values",p),m(u,"KeyValuePairs",q),m(u,"Count",r),j(u,"Add",h),j(u,"Remove",t),u!=f&&a.apply(this,arguments)}function O(){function a(){g._handlers=new R}function b(){g._handlers=new R}function c(a){g._handlers.Add(a)}function d(a){g._handlers.Remove(a)}function e(){for(var a=g._handlers.Values,b=0;b<a.length;b++){var c=a[b];c()}}var g=this;g!=f&&(g._handlers=void 0),j(g,"Cleanup",b),j(g,"AddHandler",c),j(g,"DeleteHandler",d),j(g,"DispatchEvent",e),g!=f&&a.apply(g,arguments)}function P(){function a(a,b){d.key=a,d.val=b}function b(){return d.key}function c(){return d.val}var d=this;d!=f&&(d.key=void 0),d!=f&&(d.val=void 0),m(d,"Key",b),m(d,"Value",c),d!=f&&a.apply(this,arguments)}function Q(){Q.StringIndexOf=function(a,b){return a.indexOf(b)},Q.StringStartsWith=function(a,b){return 0==a.indexOf(b)},Q.StringContains=function(a,b){return 0<=a.indexOf(b)},Q.StringGetChar=function(a,b){if(b<0||b>=a.length)throw new Error("ArgumentOutOfRange");return a[b]},Q.StringSubstring=function(a,b,c){if(b<0||b>=a.length||void 0!=c&&(c<0||b+c>a.length))throw new Error("ArgumentOutOfRange");return void 0==c?a.substr(b):a.substr(b,c)},Q.StringSplit=function(a,b){var c=a.split(b);return L.FromRepr(c)},Q.StringEnumerator=function(a){return a.split("")},Q.StringCompareTo=function(a,b){return null==a?null==b?0:-1:null==b?1:a<b?-1:a==b?0:1},Q.StringTrim=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},Q.StringReplace=function(a,b,c){if(null==b||""==b||null==c)throw new Error("InvalidArgument");var d=a.indexOf(b);if(d>=0){var e=b.length;return a.substr(0,d)+c+Q.StringReplace(a.substr(d+e),b,c)}return a},Q.StringLastIndexOf=function(a,b){if(null==b||""==b)throw new Error("InvalidArgument");return a.lastIndexOf(b)},Q.ListFromRepr=function(a){return R.FromRepr(a)},Q.ArrayFromRepr=function(a){return L.FromRepr(a)},Q.ArrayToRepr=function(a){return null==a?null:a.ToRepr()},Q.ListFromRepr=function(a){return R.FromRepr(a)},Q.ListToRepr=function(a){return null==a?null:a.ToRepr()},Q.DictionaryFromRepr=function(a){var b=N.FromRepr(a);return b},Q.StringDictionaryToRepr=function(a){return null==a?null:a.hasOwnProperty("ToObject")?a.ToObject():a},Q.DictionaryCopyToObject=function(a,b){null!=a&&a.CopyToObject(b)},Q.StringFromRepr=function(a){return a},Q.StringToXml=function(a){try{if(window.DOMParser){var b=(new DOMParser).parseFromString(a,"text/xml");return b.documentElement}var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b.documentElement}catch(a){return null}},Q.XmlToString=function(a){try{return window.XMLSerializer?(new XMLSerializer).serializeToString(a):a.xml}catch(a){return null}},Q.ToString=function(a){return null==a?null:"function"==typeof a.ToString?a.ToString():a.toString()},Q.StringToLower=function(a){return a.toLowerCase()},Q.StringToInt=function(a){return parseInt(a)},Q.AsDouble=function(a){return a instanceof x?a.asNumber:a instanceof y?a.asNumber:Number(a)},Q.doubleRegex=new RegExp("^([+-]?[0-9]*\\.?[0-9]+)((e|E)[+-]?[0-9]+)?$"),Q.parseDouble=function(a){return Q.parseChecker(a,Q.doubleRegex,"double"),parseFloat(a)},Q.parseChecker=function(a,b,c){if(!b.test(a))throw new Error("Invalid string for "+c+": "+a)}}function R(){function a(){arguments.length>1?Ping.Send("Error: Instantiate ListCS with too many arguments"):0==arguments.length?L.call(v,0):arguments[0]instanceof Number?L.call(v,arguments[0]):arguments[0]instanceof Array?(L.call(v,arguments[0].length),v.arr=arguments[0]):arguments[0]instanceof L?(L.call(v,arguments[0].length),v.arr=arguments[0].arr):Ping.Send("Error: Instantiate ListCS with inappropriate arguments")}function b(a){for(var b=new R,c=0;c<arguments.length;c++)b.arr.push(arguments[c]);return b}function c(a){if(null==a)return a;if(a instanceof R)return a;var b=new R;return b.arr=a,b}function d(){return v.arr}function e(){return v.arr.length}function g(){return v.arr}function h(a){v.arr.push(a)}function i(a){v.arr.length=0}function k(a){var b=arguments[1];if(null==b)b=0;else if(b<0||b>=v.arr.length)throw new Error("Starting index out of bound");for(var c=b;c<v.arr.length;c++)if(v.arr[c]==a)return c;return-1}function n(a){return v.IndexOf(a)>=0}function o(a,b){v.arr.splice(a,0,b)}function p(a){var b=v.IndexOf(a);return!(b<0)&&(v.RemoveAt(b),!0)}function q(a,b){v.arr.splice(a,b)}function r(a){v.arr.splice(a,1)}function s(a,b){var c=new R;return c.arr=v.arr.slice(a,a+b),c}function t(){v.arr.sort.apply(v.arr,arguments)}function u(){return L.FromRepr(v.arr.slice())}var v=this;v!=f&&(v.arr=void 0),l(v,R,"Create",b),l(v,R,"FromRepr",c),j(v,"ToRepr",d),m(v,"Count",e),m(v,"Values",g),j(v,"Add",h),j(v,"Clear",i),j(v,"IndexOf",k),j(v,"Contains",n),j(v,"Insert",o),j(v,"Remove",p),j(v,"RemoveRange",q),j(v,"RemoveAt",r),j(v,"GetRange",s),j(v,"Sort",t),j(v,"ToArray",u),v!=f&&a.apply(this,arguments)}function S(){function a(a,b,c){a[b]=c}function b(){return[]}function c(a){return a.length}function d(a,b){a.push(b)}function e(a,b){a.splice(b,1)}function f(a,b){return b[a]}function g(a,b){var c=S.GetField(a,b);return c?c.toString():null}var h=this;l(h,S,"setDictValue",a),l(h,S,"makeList",b),l(h,S,"listCount",c),l(h,S,"addListValue",d),l(h,S,"removeListValueAt",e),l(h,S,"GetField",f),l(h,S,"GetStringField",g)}function T(){function a(a){if(null!=a)for(var c=Q.DictionaryFromRepr(a),d=c.Keys,e=0;e<d.length;e++){var f=d[e],g=c.GetValue(f);switch(f){case"platformApi":b.platformApi=g;break;case"gatewayUrl":b.gatewayUrl=c.GetValue(f);break;case"heartbeatIntervalMs":b.heartbeatIntervalMs=w.Cast(c.GetValue(f));break;case"enableLogging":b.enableLogging=Boolean(c.GetValue(f));break;case"allowUncaughtExceptions":b.allowUncaughtExceptions=Boolean(c.GetValue(f));break;default:throw new Error("Unsupported settings: "+f)}}}var b=this;b!=f&&(b.heartbeatIntervalMs=2e4),b!=f&&(b.customerKey=null),b!=f&&(b.gatewayUrl="https://cws.conviva.com"),b!=f&&(b.gatewayPath="/0/wsg"),b!=f&&(b.protocolVersion="1.7"),b!=f&&(b.clientVersion="2.111.0.30375"),b!=f&&(b.clientInstanceId=0),b!=f&&(b.loadDataTimeoutMs=1e4),b!=f&&(b.enableLogging=!1),b!=f&&(b.platformApi=null),b!=f&&(b.allowUncaughtExceptions=!1),b!=f&&(b.pingComponentName="jscws"),b!=f&&(b.pingUrl="https://pings.conviva.com/ping.ping"),j(b,"changeSettings",a)}function U(){function a(a){if(L._settings=a,L._referenceCount=1,L._pingUrl=null,L._isSendingPing=!1,L.protocolVersion=L._settings.protocolVersion,L._cleanables=new N,null==L._settings.platformApi&&("undefined"!=typeof PlayStationWebmafApi?L._settings.platformApi=new PlayStationWebmafApi:"undefined"!=typeof PlayStationTouchFactorApi?L._settings.platformApi=new PlayStationTouchFactorApi:"undefined"!=typeof PlayStationLibjscriptApi?L._settings.platformApi=new PlayStationLibjscriptApi:"undefined"!=typeof Z?L._settings.platformApi=new Z:"undefined"!=typeof Y?L._settings.platformApi=new Y:"undefined"!=typeof PlayStationTrilithiumApi?L._settings.platformApi=new PlayStationTrilithiumApi:"undefined"!=typeof Xbox1PlatformApi&&(L._settings.platformApi=new Xbox1PlatformApi)),null==L._settings.platformApi)throw new Error("PlatformApi is null");L.device=L._settings.platformApi.getDevice(),L.deviceVersion=L._settings.platformApi.getDeviceVersion(),L.deviceType=L._settings.platformApi.getDeviceType(),L.os=L._settings.platformApi.getOS(),L.osVersion=L._settings.platformApi.getOSVersion(),L.platform="Js"}function b(a){if(null==U._instance){var b=new T;b.changeSettings(a),U._instance=new U(b),U._instance._start()}else U._instance.getSettings().changeSettings(a),U._instance._referenceCount++;return U._instance}function c(){if(null==U._instance)throw new Error("CreateUtils module has not been called");return U._instance}function d(){return L._settings.platformApi}function e(){return L._settings}function g(){}function h(){L._referenceCount--,L._referenceCount>0||(null!=L.clientIdLoadingDone&&(L.clientIdLoadingDone.Cleanup(),L.clientIdLoadingDone=null),null!=L._cleanables&&(M.cleanupCollection(L._cleanables),L._cleanables=null),null!=L._settings&&null!=L._settings.platformApi&&L._settings.platformApi.cleanup(),L._settings=null,U._instance=null)}function i(a){var b=L.epochTimeMs(),c=void 0;c=(b/1e3).toFixed(3).toString(),a="["+c+"] "+a;var d=Q.StringContains(a,"ERROR:");return L._settings.enableLogging&&(d?L._settings.platformApi.consoleErr(a):L._settings.platformApi.consoleLog(a)),a}function m(a){a=L.logNoBuffer(a),U.logBuffer.Count>=U.MAX_SIZE_LOGBUFFER&&U.logBuffer.RemoveAt(0),U.logBuffer.Add(a)}function n(a,b){L.log("sid="+b+" "+a)}function o(a){L.log("ERROR: "+a)}function p(a){var b=U.logBuffer;return U.logBuffer=new R,b}function q(a,b){if(!a)throw new Error("Assertion failure: "+b)}function r(a,b){L.runProtectedSync(a,b)}function s(a,b){var c=L._settings.allowUncaughtExceptions;if(c)a();else try{a()}catch(a){L.onUncaughtException(b,a)}}function t(a,b){try{L.ping("Uncaught exception: "+a+": "+Q.ToString(b))}catch(a){L.err("Caught exception while sending ping: "+Q.ToString(a))}}function u(a){if(!L._isSendingPing){L._isSendingPing=!0,L.initPing();var b=L._pingUrl+"&d="+L.urlEncodeString(Q.ToString(a));L.err("Ping: "+b),L.httpRequest(!1,b,null,null,null),L._isSendingPing=!1}}function v(){if(!L._cachedPingUrl){var a="jscws",b=null;try{var c=Q.DictionaryFromRepr(L._settings.platformApi.getPlatformMetadata());null!=c&&c.ContainsKey("sch")&&(b=c.GetValue("sch"))}catch(a){}L._pingUrl=L._settings.pingUrl+"?comp="+a+"&clv="+L._settings.clientVersion+"&cid="+L._settings.customerKey+"&uuid="+L.clientId,null!=b&&(L._pingUrl+="&sch="+b),L.clientId!=U.DEFAULT_CLIENT_ID&&null!=b&&(L._cachedPingUrl=!0)}}function x(a){return escape(a)}function y(){return L._settings.platformApi.epochTimeMs()}function z(a,b,c){var d=new M(L._cleanables),e=null;return e=function(){L.runProtected(a,c)},d.setCleanupAction(L._settings.platformApi.createTimer(e,b,c)),d}function A(a,b,c){var d=new M(L._cleanables),e=!1,f=null;return f=function(){null!=d&&d.cleanup(),a(),e=!0},d.setCleanupAction(L._settings.platformApi.createTimer(f,b,c)),e&&d.cleanup(),d}function B(a,b){var c=b;try{c=w.Parse(a)}catch(a){}return c}function C(a,b){var c=b;try{c=Q.parseDouble(a)}catch(a){}return c}function D(){L.clientId=U.DEFAULT_CLIENT_ID,L.clientIdLoadingDone=new O,L._loadClientIdTimeout=L.scheduleAction(function(){L.log("Timeout in reading clientId. Using "+U.DEFAULT_CLIENT_ID+"."),L.ping("Timeout in reading clientId. IGNORE waited "+L._settings.loadDataTimeoutMs+"ms."),null!=L.clientIdLoadingDone&&L.clientIdLoadingDone.DispatchEvent(),L._loadClientIdTimeout=null},L._settings.loadDataTimeoutMs,"utils.readClientId timeout callback");var a=void 0;a=function(a,b){L.runProtected(function(){null!=L._loadClientIdTimeout&&(L._loadClientIdTimeout.cleanup(),L._loadClientIdTimeout=null);var c=null;if(a)try{c=L.jsonDecode(b)}catch(a){c=null}var d=null;a&&null!=c&&c.ContainsKey("clId")&&(d=c.GetValue("clId")),null!=d&&d!=U.DEFAULT_CLIENT_ID&&"null"!=d?(L.clientId=d,L.log("Setting the client id to "+d+" (from local storage)")):L.log("Failed to load the client id from local storage"),null!=L.clientIdLoadingDone&&(L.clientIdLoadingDone.DispatchEvent(),L.clientIdLoadingDone=null)},"utils.fetchClientId onLoad")},L._settings.platformApi.loadLocalData(a)}function E(a,b){null!=L._loadClientIdTimeout&&(L._loadClientIdTimeout.cleanup(),L._loadClientIdTimeout=null),L.clientIdLoadingDone=null,L.clientId!=a&&(L.clientId=a,L.log("Setting the client id to "+a+" (from server)"),L.writeClientId())}function F(){var a=new N;a.SetValue("clId",L.clientId);var b=void 0;b=function(a){L.runProtected(function(){a||L.err("An error occurred while saving the clientId.")},"utils.writeClientId onSaved")};var c=Q.StringDictionaryToRepr(a),d=L.jsonEncode(c);L._settings.platformApi.saveLocalData(d,b)}function G(){return Math.floor(4294967295*Math.random())-2147483648}function H(){var a=L.randInt();return a=Math.abs(a),a<0&&(a=0),a}function I(a,b,c,d,e){var f=new M(L._cleanables);return f.setCleanupAction(L._settings.platformApi.httpRequest(a,b,c,d,function(a,b){f.cleanup(),null!=e&&e(a,b)})),f}function J(a){var b=null;return L.runProtectedSync(function(){b=L._settings.platformApi.jsonEncode(a)},"utils.jsonEncode"),b}function K(a){var b=null;return L.runProtectedSync(function(){var c=L._settings.platformApi.jsonDecode(a);b=Q.DictionaryFromRepr(c)},"utils.jsonDecode"),b}var L=this;L==f&&(U._instance=null),L!=f&&(L._referenceCount=0),L!=f&&(L._settings=null),L==f&&(U.DEFAULT_CLIENT_ID="0"),L!=f&&(L._loadClientIdTimeout=null),L!=f&&(L.clientId=U.DEFAULT_CLIENT_ID),L!=f&&(L.clientIdLoadingDone=null),L!=f&&(L._pingUrl=null),L!=f&&(L._cachedPingUrl=!1),L!=f&&(L._isSendingPing=!1),L!=f&&(L.protocolVersion=null),L!=f&&(L.device=null),L!=f&&(L.os=null),L!=f&&(L.osVersion=null),L!=f&&(L.deviceVersion=null),L!=f&&(L.deviceType=null),L!=f&&(L.platform=null),L!=f&&(L._cleanables=null),L==f&&(U.MAX_SIZE_LOGBUFFER=32),L==f&&(U.logBuffer=new R),l(L,U,"CreateUtils",b),l(L,U,"getInstance",c),j(L,"getPlatformApi",d),j(L,"getSettings",e),k(L,"_start",g),j(L,"cleanup",h),j(L,"logNoBuffer",i),j(L,"log",m),j(L,"logSession",n),j(L,"err",o),j(L,"getLogs",p),j(L,"assert",q),j(L,"runProtected",r),j(L,"runProtectedSync",s),k(L,"onUncaughtException",t),j(L,"ping",u),k(L,"initPing",v),k(L,"urlEncodeString",x),j(L,"epochTimeMs",y),j(L,"createTimer",z),j(L,"scheduleAction",A),j(L,"parseInt",B),j(L,"parseNumber",C),j(L,"startFetchClientId",D),j(L,"setClientIdFromServer",E),k(L,"writeClientId",F),j(L,"randInt",G),j(L,"randUInt",H),j(L,"httpRequest",I),j(L,"jsonEncode",J),j(L,"jsonDecode",K),L!=f&&a.apply(L,arguments)}function V(){function a(){V.referenceCount++}function b(a){try{var b=a.data;if("object"!==("undefined"==typeof b?"undefined":d(b)))return;if("undefined"==typeof b.convivaRequestId){if("undefined"==typeof b.requestId)return;b.convivaRequestId=b.requestId}var c=V.callbacks[b.convivaRequestId];if(!c)return void U.getInstance().log("Received response for unknown request");if(!V.TESTAPI_forTouchstone&&a.origin!=c[0])return void U.getInstance().log("ERROR: Bad origin:"+a.origin);delete V.callbacks[b.convivaRequestId];var e=b.bytes;b.post_err&&"ok"==b.post_err?c[1](!0,e):(U.getInstance().log("ERROR: Error posting to "+a.origin+" ("+e+")"),c[1](!1,b.post_err))}catch(a){}}var c=this;c==f&&(V.frameId="conviva_iframe",V.frameUrl="/cws_iframe.html",V.TESTAPI_forTouchstone=!0,V.referenceCount=0,V.nextConvivaRequestId=0,V.callbacks={},V.communicationFramesIds={},"undefined"!=typeof window&&(window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent&&window.attachEvent("onmessage",b))),this.cleanup=function(){V.referenceCount--,0==V.referenceCount&&(V.nextConvivaRequestId=0,V.callbacks={},r(V.communicationFramesIds,function(a){c.removeIFrame(a)}),V.communicationFramesIds={})},this.findFrameById=function(a){return a?document.getElementById(a):null},this.findFrameForDomain=function(a){var b=V.communicationFramesIds[a];return c.findFrameById(b)},this.makeRequest=function(a,b,d,e,f){var g=b.match(/^(https?:\/\/[^\/]*)(\/.*)$/);if(!g)return U.getInstance().log("ERROR: UrlLoader: cannot parse url: "+b),null;var h=g[1],i=c.findFrameForDomain(h);if(i&&i.loaded){var j=V.nextConvivaRequestId++,k=a?"POST":"GET",l={url:b,method:k,data:d,contentType:e,requestId:j,convivaRequestId:j};V.callbacks[j]=[h,f],i.contentWindow.postMessage(l,V.TESTAPI_forTouchstone?"*":h)}else i&&!i.loaded?setTimeout(function(){c.makeRequest(a,b,d,e,f)},500):c.insertIFrame(h,function(){var g=c.findFrameForDomain(h);g&&(g.loaded=!0,c.makeRequest(a,b,d,e,f))});return null},this.insertIFrame=function(a,b){var c=document.createElement("iframe");c.id="_conviva_iframe_"+a+"_"+V.frameId,c.style.height="0px",c.style.width="0px",c.style.top="-50px",c.style.left="-50px",c.style.borderWidth="0px",c.height=0,c.width=0,c.src=a+V.frameUrl,c.onload=b,V.communicationFramesIds[a]=c.id;var d=document.body||document.getElementsByTagName("body")[0];d&&d.appendChild(c)},this.removeIFrame=function(a){var b=c.findFrameById(a);if(null!=b){var d=document.body||document.getElementsByTagName("body")[0];d.removeChild(b)}},c!=f&&a.apply(c,arguments)}function W(){function a(){e.Reset()}function b(a){var b=U.getInstance().epochTimeMs();return e._lastPollTime>0&&b>e._lastPollTime&&e._lastPlayHeadTimeSpeeds.Insert(0,Q.AsDouble(a-e._lastPlayHeadTime)/(b-e._lastPollTime)),e._lastPollTime=b,e._lastPlayHeadTime=Q.AsDouble(a),e._lastPlayHeadTimeSpeeds.Count>Math.max(e.movingMinimumSamples,e.notMovingMinimumSamples)&&e._lastPlayHeadTimeSpeeds.RemoveAt(e._lastPlayHeadTimeSpeeds.Count-1),e.InferState();
}function c(){var a=null,b=e._lastPlayHeadTimeSpeeds.Count;if(b>=Math.min(e.movingMinimumSamples,e.notMovingMinimumSamples)){for(var c=0,d=e._lastPlayHeadTimeSpeeds.Values,f=0;f<d.length;f++){var g=d[f];c+=g}c/=b,b>=e.movingMinimumSamples&&Math.abs(c-e.movingExpectedSpeed)<e.movingSpeedTolerance&&(a=W.MOVING_STATE),b>=e.notMovingMinimumSamples&&c==e.notMovingExpectedSpeed&&(a=W.NOT_MOVING_STATE)}return e.resetAfter&&null!=a&&e.Reset(),a}function d(){e._lastPlayHeadTimeSpeeds=new R,e._lastPlayHeadTime=-1,e._lastPollTime=0}var e=this;e==f&&(W.MOVING_STATE="MOVING"),e==f&&(W.NOT_MOVING_STATE="NOT_MOVING"),e!=f&&(e.movingMinimumSamples=3),e!=f&&(e.notMovingMinimumSamples=3),e!=f&&(e.movingExpectedSpeed=1),e!=f&&(e.notMovingExpectedSpeed=0),e!=f&&(e.movingSpeedTolerance=.25),e!=f&&(e.resetAfter=!1),e!=f&&(e._lastPlayHeadTimeSpeeds=void 0),e!=f&&(e._lastPlayHeadTime=0),e!=f&&(e._lastPollTime=0),j(e,"Update",b),k(e,"InferState",c),j(e,"Reset",d),e!=f&&a.apply(e,arguments)}function X(){function a(a){B.call(d),d.Log("ConvivaVideojsStreamerProxy._constr()"),d._vjsPlayer=a,d._infer=new h.Infer,d._setAllEventListeners(),d._startPolling(),d.firstPlay=!0,d.tech=null;var b=new Object;if(b.IWillNotUseThisInPlugins=!0,d.requestTech=b,null!==(d.tech=d._vjsPlayer.tech(d.requestTech))?console.log("Found TECH..."):console.log("DID NOT FIND TECH !!"),d.tech.hls){var c=Math.round(d.tech.hls.bandwidth/1024),e=new E(c,null,null,-1,-1,-1);d.SetStream(e),console.log("Ctor : BANDWIDTH: "+c)}else console.log("Ctor : Player is not ready! ")}function b(){d.Log("ConvivaVideojsStreamerProxy.Cleanup()"),d.Log("ConvivaVideojsStreamer: leave the inference in..."),d.Log("ConvivaVideojsStreamer: leave the event listeners and player in..."),d._duration=-1,d.super_Cleanup()}function c(){return d._capabilities}var d=this;d!=f&&(d._capabilities=B.CAPABILITY_VIDEO+B.CAPABILITY_QUALITY_METRICS+B.CAPABILITY_BITRATE_METRICS,d._duration=-1),j(d,"Cleanup",b),j(d,"GetCapabilities",c),this.GetDuration=function(){return d._duration},this.GetBufferLengthMs=function(){return d._bufferLengthMs},this.GetEncodedFrameRate=function(){return d._encodedFrameRate},this.GetPlayheadTimeMs=function(){return d._playheadTimeMs},this.SetDuration=function(a){if(isFinite(a)&&a>0){var b=a;if(d.GetDuration()!=b){d._duration=b;var c={};c[B.METADATA_DURATION]=d._duration,d.SetMetadata(c)}}},this.SetPlayheadTimeMs=function(a){if(isFinite(a)&&a>0){var b=1e3*a;d.GetPlayheadTimeMs()!=b&&(d._playheadTimeMs=b),d.InferState()}},this.SetPlayerState=function(a){d.GetPlayingState()!==a&&(d.SetPlayingState(a),d._infer.Reset())},this.InferState=function(){if(d._infer){var a=d._infer.Update(d.GetPlayheadTimeMs());a&&(a===h.Infer.MOVING_STATE&&d.GetPlayingState()!==h.ConvivaStreamerProxy.PLAYING&&(d.Log("ConvivaVideojsStreamerProxy.InferState(): PLAYING"),d.SetPlayerState(h.ConvivaStreamerProxy.PLAYING)),a===h.Infer.NOT_MOVING_STATE&&d.GetPlayingState()===h.ConvivaStreamerProxy.PLAYING&&(d.Log("ConvivaVideojsStreamerProxy.InferState(): BUFFERING"),d.SetPlayerState(h.ConvivaStreamerProxy.BUFFERING)))}},this._startPolling=function(){d._polling=!0,d._cancelTimer=U.getInstance()._settings.platformApi.createTimer(d._poll,100,"ConvivaVideojsStreamerProxy._poll")},this._poll=function(){U.getInstance().runProtected(function(){return d._polling&&d._vjsPlayer?void d.SetPlayheadTimeMs(d._vjsPlayer.currentTime()):void d.SetPlayheadTimeMs(0)},"ConvivaVideojsStreamerProxy._poll")},this._stopPolling=function(){d._polling||"function"!=typeof d._cancelTimer||d._cancelTimer(),d._polling=!1},this._declareError=function(a){d.Log("ConvivaVideojsStreamerProxy._declareError: "+a),d.SetError(G.makeUnscopedError(a,G.SEVERITY_FATAL))},this._setAllEventListeners=function(){d.Log("ConvivaVideojsStreamerProxy._setAllEventListeners()"),d._vjsPlayer&&(d._vjsPlayer.on("ended",d.onEnded),d._vjsPlayer.on("loadedmetadata",d.onLoadedMetadata),d._vjsPlayer.on("loadstart",d.onLoadstart),d._vjsPlayer.on("pause",d.onPause),d._vjsPlayer.on("durationchange",d.onDurationchange),d._vjsPlayer.on("emptied",d.onEmptied),d._vjsPlayer.on("stalled",d.onStalled),d._vjsPlayer.on("waiting",d.onWaiting),d._vjsPlayer.on("play",d.onPlay),d._vjsPlayer.on("error",d.onError),d._vjsPlayer.on("mediachange",d.onMediaChange),d._vjsPlayer.on("progress",d.onProgress))},this._removeAllEventListeners=function(){d.Log("ConvivaVideojsStreamerProxy._removeAllEventListeners()"),d._vjsPlayer&&(d._vjsPlayer.off("ended",d.onEnded),d._vjsPlayer.off("loadedmetadata",d.onLoadedMetadata),d._vjsPlayer.off("loadstart",d.onLoadstart),d._vjsPlayer.off("pause",d.onPause),d._vjsPlayer.off("durationchange",d.onDurationchange),d._vjsPlayer.off("emptied",d.onEmptied),d._vjsPlayer.off("stalled",d.onStalled),d._vjsPlayer.off("waiting",d.onWaiting),d._vjsPlayer.off("play",d.onPlay),d._vjsPlayer.off("error",d.onError),d._vjsPlayer.off("mediachange",d.onMediaChange))},this.onPause=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onPause"),d.SetPlayerState(h.ConvivaStreamerProxy.PAUSED)},"ConvivaVideojsStreamerProxy.onPause")},this.onLoadedMetadata=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onLoadedMetadata"),d._vjsPlayer.duration()&&d._vjsPlayer&&d.SetDuration(d._vjsPlayer.duration())},"ConvivaVideojsStreamerProxy.onLoadedMetadata")},this.onEnded=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onEnded"),d._vjsPlayer&&d.SetPlayerState(h.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onEnded")},this.onDurationchange=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onDurationchange"),d._vjsPlayer&&d.SetDuration(d._vjsPlayer.duration())},"ConvivaVideojsStreamerProxy.onDurationchange")},this.onLoadstart=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onLoadstart"),d.SetPlayerState(h.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onLoadstart")},this.onPlay=function(a,b,c){U.getInstance().runProtected(function(){return d.Log("ConvivaVideojsStreamerProxy.onPlay"),d.firstPlay?(d.Log("ConvivaVideojsStreamerProxy.onPlay :First Play IGNORED!!"),void(d.firstPlay=!1)):void d.SetPlayerState(h.ConvivaStreamerProxy.PLAYING)},"ConvivaVideojsStreamerProxy.onPlay")},this.onStalled=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onStalled NO STATE CHANGE")},"ConvivaVideojsStreamerProxy.onStalled")},this.onEmptied=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onEmptied"),d.Log("ConvivaVideojsStreamerProxy.onEmptied"),d.SetPlayerState(h.ConvivaStreamerProxy.STOPPED)},"ConvivaVideojsStreamerProxy.onEmptied")},this.onWaiting=function(a,b,c){U.getInstance().runProtected(function(){d.Log("ConvivaVideojsStreamerProxy.onWaiting"),d.Log("ConvivaVideojsStreamerProxy.onWaiting"),d.SetPlayerState(h.ConvivaStreamerProxy.BUFFERING)},"ConvivaVideojsStreamerProxy.onWaiting")},this.onError=function(){U.getInstance().runProtected(function(){if(d.Log("ConvivaVideojsStreamerProxy.onError"),d._vjsPlayer){var a=d._vjsPlayer.error(),b=d._convertError(a?a.code:99);d.Log("MediaError: "+a.message),d._declareError(b)}},"ConvivaVideojsStreamerProxy.onError")},this.onProgress=function(){U.getInstance().runProtected(function(){if(d.Log("ConvivaVideojsStreamerProxy.onProgress"),d._vjsPlayer&&"undefined"!=typeof d._vjsPlayer.tech(d.requestTech).hls){var a=new E(Math.round(d._vjsPlayer.tech(d.requestTech).hls.playlists.media().attributes.BANDWIDTH/1024),null,null,-1,-1,-1);d.SetStream(a)}},"ConvivaVideojsStreamerProxy.onProgress")},this.onMediaChange=function(){U.getInstance().runProtected(function(){if(d.Log("ConvivaVideojsStreamerProxy.onMediaChange"),d._vjsPlayer&&"undefined"!=typeof d._vjsPlayer.tech(d.requestTech).hls){var a=new E(Math.round(d._vjsPlayer.tech(d.requestTech).hls.playlists.media().attributes.BANDWIDTH/1024),null,null,-1,-1,-1);d.SetStream(a)}},"ConvivaVideojsStreamerProxy.onMediaChange")},this._convertError=function(a){var b;switch(a){case 0:b="MEDIA_ERR_CUSTOM";break;case 1:b="MEDIA_ERR_ABORTED";break;case 2:b="MEDIA_ERR_NETWORK";break;case 3:b="MEDIA_ERR_DECODE";break;case 4:b="MEDIA_ERR_SRC_NOT_SUPPORTED";break;default:b="MEDIA_ERR_UNKNOWN"}return d.Log("MediaError: code "+a+" "+b),b},d!=f&&a.apply(d,arguments)}function Y(){function a(){c._dataLoader=new V,c.platform=navigator&&navigator.platform&&(navigator.platform.toString?navigator.platform.toString():null)}function b(){var a={sch:"html5.1"};return a.np=navigator&&navigator.platform&&(navigator.platform.toString?navigator.platform.toString():null),a.nua=navigator&&navigator.userAgent&&(navigator.userAgent.toString?navigator.userAgent.toString():null),a}var c=this,d="convivaPersistent";this.cleanup=function(){null!=c._dataLoader&&(c._dataLoader.cleanup(),c._dataLoader=null)},this.saveLocalData=function(a,b){try{localStorage.setItem(d,a)}catch(a){return void b(!1)}b(!0)},this.loadLocalData=function(a){try{var b=localStorage.getItem(d);a(!0,b)}catch(b){a(!1,"")}},this.deleteLocalData=function(){try{localStorage.clear()}catch(a){}},this.httpRequest=function(a,b,d,e,f){return"string"!=typeof d&&(d=c.jsonEncode(d,null)),c._dataLoader.makeRequest(a,b,d,e,f)},this.epochTimeMs=function(){var a=new Date;return a.getTime()},this.createTimer=function(a,b,c){var d=setInterval(a,b);return function(){d!=-1&&(clearInterval(d),d=-1)}},this.jsonEncode=function(a){var b=null;return b=JSON.stringify(a)},this.jsonDecode=function(a){var b=null;return b=JSON.parse(a)},this.consoleLog=function(a){"undefined"!=typeof console&&console.log&&console.log(a)},this.consoleErr=function(a){"undefined"!=typeof console&&console.error&&console.error(a)},this.getDevice=function(){return"browser"},this.getDeviceVersion=function(){return null},this.getDeviceType=function(){return"PC"},this.getOS=function(){return c._getPlatformName()},this.getOSVersion=function(){return null},j(c,"getPlatformMetadata",b),this._getPlatformName=function(){if(null==c.platform)return null;var a=function(a,b){return a.indexOf(b)>=0};return a(c.platform,"iPad")||a(c.platform,"iPhone")||a(c.platform,"iPod")?"IOS":a(c.platform,"Mac")?"MAC":a(c.platform,"Win")?"WIN":a(c.platform,"Linux")||a(c.platform,"SunOS")||a(c.platform,"HP-UX")||a(c.platform,"BSD")?"UNIX":a(c.platform,"PLAYSTATION 3")?"PS3":a(c.platform,"XBOX")?"XBOX":null},c!=f&&a.apply(c,arguments)}function Z(){function a(){Y.call(b)}var b=this;this.getPlatformMetadata=function(){var a=b.super_getPlatformMetadata();return a.sch="bc.perform.dt.1",a.fwv=bc.VERSION||"1.0",a},a.apply(b,arguments)}a(a,"registerName"),a(b,"__id"),a(c,"getConvivaType"),a(e,"importConvivaPrivateProgram"),a(f,"STAT_INIT"),a(i,"statInit"),a(j,"defPubMeth"),a(k,"defPrivMeth"),a(l,"defStatMeth"),a(m,"defGet"),a(n,"defSet"),a(o,"defStatGet"),a(p,"defStatSet"),a(q,"slIsArray"),a(r,"slForEachPropValue"),a(s,"slForEachProp"),a(t,"declTestClass"),a(u,"declTestMethod"),i(v,"sluint"),i(w,"slint"),i(x,"Int64"),i(y,"UInt64"),i(z,"CandidateStream"),i(A,"ConvivaContentInfo"),i(B,"ConvivaStreamerProxy"),i(C,"LivePass"),i(D,"PlayerStates"),i(E,"StreamInfo"),i(F,"StreamSwitch"),i(G,"StreamerError"),i(H,"Monitor"),i(I,"EventQueue"),i(J,"Session"),i(K,"SessionFactory"),i(L,"ArrayCS"),i(M,"Cleanable"),i(N,"DictionaryCS"),i(O,"Eventer"),i(P,"KeyValuePairCS"),i(Q,"Lang"),i(R,"ListCS"),i(S,"NativeLang"),i(T,"Settings"),i(U,"Utils"),i(V,"DataLoader"),i(W,"Infer"),i(X,"ConvivaVideojsStreamerProxy"),i(Y,"Html5PlatformApi"),i(Z,"ConvivaVideojsPlatformApi")}();var h="undefined"!=typeof h?h:function(){};h.LivePass=g.LivePass,h.ConvivaContentInfo=g.ConvivaContentInfo,h.StreamerError=g.StreamerError,h.ConvivaStreamerProxy=g.ConvivaStreamerProxy,h.Settings=g.Settings,h.StreamInfo=g.StreamInfo,h.Utils=g.Utils,h.ConvivaVideojsStreamerProxy=g.ConvivaVideojsStreamerProxy,h.ConvivaVideojsPlatformApi=g.ConvivaVideojsPlatformApi,h.Infer=g.Infer}b.exports=h}).call(void 0)},{}],15:[function(a,b,c){"use strict";function d(){videojs.plugin("conviva",h)}var e,f,g,h;e=a("./ConvivaLivePass_BcPerform"),f=a("../fan"),g=!0,b.exports={init:d},h=function(a){a.debug&&console.debug("CONVIVA: plugin");var b,c,d,h,i,j,k,l,m,n,o,p,q,r,s,t;p=this,a.debug?(e.LivePass.initWithSettings(a.customerKey,{gatewayUrl:"https://espn-com-test.testonly.conviva.com"}),e.LivePass.toggleTraces(!0)):e.LivePass.init(a.customerKey),s=new e.ConvivaVideojsStreamerProxy(p),r=function(){d=p.mediainfo||{},t={site:location.hostname,sport:d.sport},b=new e.ConvivaContentInfo(d.name,t),b.defaultReportingCdnName=e.ConvivaContentInfo.CDN_NAME_OTHER,b.isLive=!(d.duration&&d.duration>0),b.streamUrl=p.currentSrc(),b.playerName=a.playerName,b.viewerId=f.SWID},m=function(){a.debug&&(console.debug("CONVIVA: loadstart"),console.debug("CONVIVA: loadstart: adstate:"+p.ads.state)),(!p.ads||"ad-playback"!==p.ads.state&&"content-resuming"!==p.ads.state)&&null!=q&&(console.warn("CONVIVA: session exists onLoadStart, cleaning up"),c()),null==q&&(r(),p.ads&&p.ads.state?(a.debug&&console.debug("CONVIVA: loadstart:ads:createSession"),q=e.LivePass.createSession(null,b)):(a.debug&&console.debug("CONVIVA: loadstart:noads:createSession"),q=e.LivePass.createSession(s,b)))},i=function(){a.debug&&console.debug("CONVIVA: ads-ad-started:detachStreamer"),e.LivePass.detachStreamer(q,s),e.LivePass.adStart(q)},h=function(){a.debug&&console.debug("CONVIVA: ads-ad-ended"),e.LivePass.adEnd(q),a.debug&&console.debug("CONVIVA: ads-ad-ended:attachStreamer"),e.LivePass.attachStreamer(q,s)},n=function(){null!=q&&(a.debug&&console.debug("CONVIVA: contentplayback:attachStreamer"),e.LivePass.attachStreamer(q,s))},o=function(){0===p.currentTime()&&(a.debug&&console.debug("CONVIVA: restart"),null==q?(r(),a.debug&&console.debug("CONVIVA: restart:createSession:streamer"),q=e.LivePass.createSession(s,b)):(a.debug&&console.debug("CONVIVA: restart:attachStreamer"),e.LivePass.attachStreamer(q,s)))},k=function(){a.debug&&console.debug("CONVIVA: ended"),p.ads&&"ad-playback"===p.ads.state||(c(),p.one("seeking",o))},c=function(){null!=q&&(p.ads&&"ad-playback"===p.ads.state&&e.LivePass.adEnd(q),a.debug&&console.debug("CONVIVA: endeded:detachStreamer"),e.LivePass.detachStreamer(q,s),a.debug&&console.debug("CONVIVA: endeded:cleanupSession"),e.LivePass.cleanupSession(q),q=null)},l=function(){var d=p.error();null==q&&(r(),a.debug&&console.debug("CONVIVA: error:createSession:streamer"),q=e.LivePass.createSession(s,b)),a.debug&&console.debug(q,"CONVIVA: ERROR code:"+d.code+" "+(d.message||d.headline)),e.LivePass.reportError(q,"code:"+d.code+" "+(d.message||d.headline)),c()},j=function(){null!=q&&e.LivePass.cleanupSession(q),p.off("ads-ad-started",i),p.off("ads-ad-ended",h),p.off("contentplayback",n),p.off("dispose",j),p.off("ended",k),p.off("error",l),p.off("loadstart",m),p.off("seeking",o),g=!0},g&&(g=!1,a.debug&&console.debug("CONVIVA: ON"),p.on("ads-ad-started",i),p.on("ads-ad-ended",h),p.on("contentplayback",n),p.on("dispose",j),p.on("ended",k),p.on("error",l),p.on("loadstart",m))}},{"../fan":17,"./ConvivaLivePass_BcPerform":14}],16:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default="1.2.7"},{}],17:[function(a,b,c){"use strict";(function(){function b(a){g=e.get("SWID");var b,c;b=!0,c=e.get("VAS"),c&&(b=2===parseInt(c,10)),"string"==typeof g&&0===g.indexOf("{")?f.getAutoStartForFanId(g,function(c){b=c===!0||c===!1?c:b,a&&a(b)}):a&&a(b)}function d(a){g=e.get("SWID"),a!==!0&&a!==!1||(e.set("VAS",a?2:1),g&&f.updateAutoStartForFanId(g,a))}var e,f,g;e=a("cookie-cutter"),f=new(a("watch-fanapi")),c.getAutoStart=b,c.setAutoStart=d,Object.defineProperty(c,"SWID",{get:function(){return e.get("SWID")}})}).call(void 0)},{"cookie-cutter":24,"watch-fanapi":38}],18:[function(a,b,c){b.exports={EMBARGOED:"Video is not yet available.",EXPIRED:"Video has expired.",EXPIRED_CONTENT:"Video has expired.",Fullscreen:"Full Screen",GEOLOCATION_NOT_ALLOWED:"Video is not available in your country.",MEDIA_ERR_ABORTED_HEADLINE:"The video download was cancelled",MEDIA_ERR_ABORTED_MESSAGE:"You aborted the media playback",MEDIA_ERR_DECODE_HEADLINE:"The video is bad or in a format that can't be played on your browser",MEDIA_ERR_DECODE_MESSAGE:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",MEDIA_ERR_ENCRYPTED_HEADLINE:"The video you're trying to watch is encrypted and we don't know how to decrypt it",MEDIA_ERR_ENCRYPTED_MESSAGE:"The media is encrypted and we do not have the keys to decrypt it.",MEDIA_ERR_NETWORK_HEADLINE:"The video connection was lost, please confirm you're connected to the internet",MEDIA_ERR_NETWORK_MESSAGE:"A network error caused the media download to fail part-way.",MEDIA_ERR_SRC_NOT_SUPPORTED_HEADLINE:"This video is either unavailable or not supported in this browser",MEDIA_ERR_SRC_NOT_SUPPORTED_MESSAGE:"The media could not be loaded, either because the server or network failed or because the format is not supported.",NOT_FOUND:"This video is unavailable.","Non-Fullscreen":"Exit Full Screen",STREAM_LIMITED:"The maximum number of concurrent streams has been reached on your account. If you have any questions or need assistance please visit es.pn/watchfaq or call 888-549-ESPN.",STREAM_LIMIT_ERROR:"The maximum number of concurrent streams has been reached on your account. If you have any questions or need assistance please visit es.pn/watchfaq or call 888-549-ESPN."}},{}],19:[function(a,b,c){b.exports={"A network error caused the video download to fail part-way.":"Un error de red ha interrumpido la descarga del vídeo.",Autoplay:"Reproducción automática","Caption Settings":"Opciones de subtítulos",Captions:"Subtítulos especiales",Chapters:"Capítulos","Check out this video on ESPN":"Echa un vistazo a este video en ESPN Play","Closed Caption":"Subtítulos","Closed Captions":"Subtítulos",Copied:"Copiado",Copy:"Copiar","Copy Embed Link":"Obtener código","Copy Link":"Obtener URL","Current Time":"Tiempo reproducido","Duration Time":"Duración total","Email Video":"Enviar por Email",Email:"Enviar por correo","Embed Code":"Insertar código",EMBARGOED:"El vídeo no está disponible todavía.","Error Code":"Código De Error",EXPIRED:"El video ha expirado.",EXPIRED_CONTENT:"El video ha expirado.",From:"De",Fullscreen:"Maximizar video",GEOLOCATION_NOT_ALLOWED:"El vídeo no está disponible en tu país.",LIVE:"DIRECTO",Loaded:"Cargado",MEDIA_ERR_ABORTED_HEADLINE:"The video download was cancelled",MEDIA_ERR_ABORTED_MESSAGE:"Ha interrumpido la reproducción del vídeo.",MEDIA_ERR_DECODE_HEADLINE:"The video is bad or in a format that can't be played on your browser",MEDIA_ERR_DECODE_MESSAGE:"La reproducción de vídeo se ha interrumpido por un problema de corrupción de datos o porque el vídeo precisa funciones que su navegador no ofrece.",MEDIA_ERR_ENCRYPTED_HEADLINE:"The video you're trying to watch is encrypted and we don't know how to decrypt it",MEDIA_ERR_ENCRYPTED_MESSAGE:"The media is encrypted and we do not have the keys to decrypt it.",MEDIA_ERR_NETWORK_HEADLINE:"The video connection was lost, please confirm you're connected to the internet",MEDIA_ERR_NETWORK_MESSAGE:"Un error de red ha interrumpido la descarga del vídeo.",MEDIA_ERR_SRC_NOT_SUPPORTED_HEADLINE:"This video is either unavailable or not supported in this browser",MEDIA_ERR_SRC_NOT_SUPPORTED_MESSAGE:"No se ha podido cargar el vídeo debido a un fallo de red o del servidor o porque el formato es incompatible.",Message:"Mensaje",Menu:"Menú",Mute:"Silenciador","No compatible source was found for this video.":"No se ha encontrado ninguna fuente compatible con este vídeo.","Non-Fullscreen":"Tamaño original",NOT_FOUND:"Este vídeo no está disponible.",OK:"aprobar",Pause:"Pausa",Play:"Reproducir","Playback Rate":"Velocidad de reproducción",Progress:"Progreso","Remaining Time":"Tiempo restante",Send:"Enviar",Settings:"Configuración",Share:"Compartir","Start at":"Iniciar en","Stream Type":"Tipo de secuencia",Subtitles:"Subtítulos","The video could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el vídeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The video playback was aborted due to a corruption problem or because the video used features your browser did not support.":"La reproducción de vídeo se ha interrumpido por un problema de corrupción de datos o porque el vídeo precisa funciones que su navegador no ofrece.","This video is unavailable":"Este vídeo no está disponible.",To:"A",Unmute:"Eliminar silenciador",Unmuted:"Eliminar silenciador","Up Next":"A continuación","You aborted the video playback":"Ha interrumpido la reproducción del vídeo.","captions off":"Subtítulos especiales desactivados","subtitles off":"Subtítulos desactivados"}},{}],20:[function(a,b,c){"use strict";(function(){var c,d,e;e={},d="en",c=function(a){return e[d][a]||e.en[a]||a},c.add=function(a,b){var c,d;e[a]||(e[a]={});for(c in b)d=b[c],e[a][c]=d},c.reset=function(){e={},d="en"},c.setLang=function(a){e[a]&&(d=a)},c.translations=function(){return e},c.add("en",a("./en.json")),c.add("es",a("./es.json")),c.add("pt",a("./pt.json")),b.exports=c}).call(void 0)},{"./en.json":18,"./es.json":19,"./pt.json":21}],21:[function(a,b,c){b.exports={"Check out this video on ESPN":"Confira esse vídeo no WatchESPN"}},{}],22:[function(b,c,d){(function(b,e){!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof e?f=e:"undefined"!=typeof self&&(f=self),f.Promise=b()}}(function(){var a,c,d;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(a,c,d){"use strict";function e(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j}function f(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function g(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function h(a){this._normalQueue._pushOne(a),this._queueTick()}var i;try{throw new Error}catch(a){i=a}var j=a("./schedule"),k=a("./queue"),l=a("./util");e.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},e.prototype.hasCustomScheduler=function(){return this._customScheduler},e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(a,c){c?(b.stderr.write("Fatal "+(a instanceof Error?a.stack:a)+"\n"),b.exit(2)):this.throwLater(a)},e.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(a){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(e.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},e.prototype.invoke=function(a,b,c){this._trampolineEnabled?g.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},e.prototype.settlePromises=function(a){this._trampolineEnabled?h.call(this,a):this._schedule(function(){a._settlePromises()})}):(e.prototype.invokeLater=f,e.prototype.invoke=g,e.prototype.settlePromises=h),e.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},e.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},c.exports=e,c.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0===(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=this._bitField&-2097153},a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){var b=this.pop(),d=c(a,b);return d.apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return b<0&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype.break=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a._isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),a._setWillBeCancelled(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){if(e)return new b}function d(){var a=f.length-1;if(a>=0)return f[a]}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(a,c,d){"use strict";c.exports=function(c,d){function e(a,b){return{promise:b}}function f(){return!1}function g(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+N.toString(a));d._attachCancellationCallback(a)})}catch(a){return a}}function h(a){if(!this._isCancellable())return this;var b=this._onCancel();void 0!==b?N.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function i(){return this._onCancelField}function j(a){this._onCancelField=a}function k(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(a,b){if(0!==(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function m(a,b){0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function n(){var a=this._boundTo;return void 0!==a&&a instanceof c?a.isFulfilled()?a.value():void 0:a;
}function o(){this._trace=new G(this._peekContext())}function p(a,b){if(O(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=y(a);N.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),N.notEnumerableProp(a,"__stackCleaned__",!0)}}}function q(a,b,c,d,e){if(void 0===a&&null!==b&&Y){if(void 0!==e&&e._returnedNonUndefined())return;if(0===(65535&d._bitField))return;c&&(c+=" ");var f="",g="";if(b._trace){for(var h=b._trace.stack.split("\n"),i=w(h),j=i.length-1;j>=0;--j){var k=i[j];if(!Q.test(k)){var l=k.match(R);l&&(f="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(i.length>0)for(var m=i[0],j=0;j<h.length;++j)if(h[j]===m){j>0&&(g="\n"+h[j-1]);break}}var n="a promise was created in a "+c+"handler "+f+"but was not returned from it, see http://goo.gl/rRqMUw"+g;d._warn(n,!0,b)}}function r(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),s(c)}function s(a,b,d){if(ga.warnings){var e,f=new M(a);if(b)d._attachExtraTrace(f);else if(ga.longStackTraces&&(e=c._peekContext()))e.attachExtraTrace(f);else{var g=y(f);f.stack=g.message+"\n"+g.stack.join("\n")}ba("warning",f)||z(f,"",!0)}}function t(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function u(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function v(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function w(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||S.test(d),f=e&&da(d);e&&!f&&(U&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function x(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||S.test(d))break}return c>0&&(b=b.slice(c)),b}function y(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?x(a):["    (No stack trace)"],{message:c,stack:w(b)}}function z(a,b,c){if("undefined"!=typeof console){var d;if(N.isObject(a)){var e=a.stack;d=b+T(e,a)}else d=b+String(a);"function"==typeof J?J(d,c):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(d)}}function A(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(a){L.throwLater(a)}"unhandledRejection"===a?ba(a,c,d)||e||z(c,"Unhandled rejection "):ba(a,d)}function B(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():N.toString(a);var c=/\[object [a-zA-Z0-9$_]+\]/;if(c.test(b))try{var d=JSON.stringify(a);b=d}catch(a){}0===b.length&&(b="(empty array)")}return"(<"+C(b)+">, no stack trace)"}function C(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function D(){return"function"==typeof fa}function E(a){var b=a.match(ea);if(b)return{fileName:b[1],line:parseInt(b[2],10)}}function F(a,b){if(D()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=E(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=E(f[i]);if(j){d=j.fileName,h=j.line;break}}g<0||h<0||!c||!d||c!==d||g>=h||(da=function(a){if(P.test(a))return!0;var b=E(a);return!!(b&&b.fileName===c&&g<=b.line&&b.line<=h)})}}function G(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);fa(this,G),b>32&&this.uncycle()}var H,I,J,K=c._getDomain,L=c._async,M=a("./errors").Warning,N=a("./util"),O=N.canAttachTrace,P=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,R=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,T=null,U=!1,V=!(0==N.env("BLUEBIRD_DEBUG")),W=!(0==N.env("BLUEBIRD_WARNINGS")||!V&&!N.env("BLUEBIRD_WARNINGS")),X=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));c.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=a._bitField&-1048577|524288},c.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},c.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",H,void 0,this)},c.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},c.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},c.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",I,a,this)}},c.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},c.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},c.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},c.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},c.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},c.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},c.prototype._warn=function(a,b,c){return s(a,b,c||this)},c.onPossiblyUnhandledRejection=function(a){var b=K();I="function"==typeof a?null===b?a:N.domainBind(b,a):void 0},c.onUnhandledRejectionHandled=function(a){var b=K();H="function"==typeof a?null===b?a:N.domainBind(b,a):void 0};var Z=function(){};c.longStackTraces=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ga.longStackTraces&&D()){var a=c.prototype._captureStackTrace,b=c.prototype._attachExtraTrace;ga.longStackTraces=!0,Z=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");c.prototype._captureStackTrace=a,c.prototype._attachExtraTrace=b,d.deactivateLongStackTraces(),L.enableTrampoline(),ga.longStackTraces=!1},c.prototype._captureStackTrace=o,c.prototype._attachExtraTrace=p,d.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},c.hasLongStackTraces=function(){return ga.longStackTraces&&D()};var $=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new CustomEvent(a.toLowerCase(),{detail:b,cancelable:!0});return!N.global.dispatchEvent(c)}}if("function"==typeof Event){var a=new Event("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new Event(a.toLowerCase(),{cancelable:!0});return c.detail=b,!N.global.dispatchEvent(c)}}var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!N.global.dispatchEvent(c)}}catch(a){}return function(){return!1}}(),_=function(){return N.isNode?function(){return b.emit.apply(b,arguments)}:N.global?function(a){var b="on"+a.toLowerCase(),c=N.global[b];return!!c&&(c.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),aa={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:e},ba=function(a){var b=!1;try{b=_.apply(null,arguments)}catch(a){L.throwLater(a),b=!0}var c=!1;try{c=$(a,aa[a].apply(null,arguments))}catch(a){L.throwLater(a),c=!0}return c||b};c.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?c.longStackTraces():!a.longStackTraces&&c.hasLongStackTraces()&&Z()),"warnings"in a){var b=a.warnings;ga.warnings=!!b,Y=ga.warnings,N.isObject(b)&&"wForgottenReturn"in b&&(Y=!!b.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!ga.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");c.prototype._clearCancellationData=k,c.prototype._propagateFrom=l,c.prototype._onCancel=i,c.prototype._setOnCancel=j,c.prototype._attachCancellationCallback=h,c.prototype._execute=g,ca=l,ga.cancellation=!0}"monitoring"in a&&(a.monitoring&&!ga.monitoring?(ga.monitoring=!0,c.prototype._fireEvent=ba):!a.monitoring&&ga.monitoring&&(ga.monitoring=!1,c.prototype._fireEvent=f))},c.prototype._fireEvent=f,c.prototype._execute=function(a,b,c){try{a(b,c)}catch(a){return a}},c.prototype._onCancel=function(){},c.prototype._setOnCancel=function(a){},c.prototype._attachCancellationCallback=function(a){},c.prototype._captureStackTrace=function(){},c.prototype._attachExtraTrace=function(){},c.prototype._clearCancellationData=function(){},c.prototype._propagateFrom=function(a,b){};var ca=m,da=function(){return!1},ea=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(G,Error),d.CapturedTrace=G,G.prototype.uncycle=function(){var a=this._length;if(!(a<2)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;d<a;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;h<a-1?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},G.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=y(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(w(e.stack.split("\n"))),e=e._parent;v(d),u(d),N.notEnumerableProp(a,"stack",t(c,d)),N.notEnumerableProp(a,"__stackCleaned__",!0)}};var fa=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():B(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,S=a,T=b;var c=Error.captureStackTrace;return da=function(a){return P.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return S=/@/,T=b,U=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(a){e="stack"in a}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(T=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?B(b):b.toString()},null):(S=a,T=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(J=function(a){console.warn(a)},N.isNode&&b.stderr.isTTY?J=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(J=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var ga={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&c.longStackTraces(),{longStackTraces:function(){return ga.longStackTraces},warnings:function(){return ga.warnings},cancellation:function(){return ga.cancellation},monitoring:function(){return ga.monitoring},propagateFromFunction:function(){return ca},boundValueFunction:function(){return n},checkForgottenReturns:q,setBounds:F,warn:s,deprecated:r,CapturedTrace:G,fireDomEvent:$,fireGlobalEvent:_}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype.return=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return e(this,a,b,0)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,d){return e(a,d,b,0)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){return this instanceof c?(l(this,"message","string"==typeof d?d:b),l(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new c(d)}return k(c,Error),c}function e(a){return this instanceof e?(l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,void(a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new e(a)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(a){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var q="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),r=0;r<q.length;++r)"function"==typeof Array.prototype[q[r]]&&(p.prototype[q[r]]=Array.prototype[q[r]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var s=0;p.prototype.toString=function(){var a=Array(4*s+1).join(" "),b="\n"+a+"AggregateError of:\n";s++,a=Array(4*s+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return s--,b},k(e,Error);var t=Error.__BluebirdErrorTypes__;t||(t=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:t,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:t.CancellationError,OperationalError:t.OperationalError,TimeoutError:t.TimeoutError,AggregateError:t.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(a){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(a){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function e(a){this.finallyHandler=a}function f(a,b){return null!=a.cancelPromise&&(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0)}function g(){return i.call(this,this.promise._target()._settledValue())}function h(a){if(!f(this,a))return l.e=a,l}function i(a){var d=this.promise,i=this.handler;if(!this.called){this.called=!0;var j=this.isFinallyHandler()?i.call(d._boundValue()):i.call(d._boundValue(),a);if(void 0!==j){d._setReturnedNonUndefined();var m=c(j,d);if(m instanceof b){if(null!=this.cancelPromise){if(m._isCancelled()){var n=new k("late cancellation observer");return d._attachExtraTrace(n),l.e=n,l}m.isPending()&&m._attachCancellationCallback(new e(this))}return m._then(g,h,void 0,this,void 0)}}}return d.isRejected()?(f(this),l.e=a,l):(f(this),a)}var j=a("./util"),k=b.CancellationError,l=j.errorObj;return d.prototype.isFinallyHandler=function(){return 0===this.type},e.prototype._resultCancelled=function(){f(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,e){return"function"!=typeof a?this.then():this._then(c,e,void 0,new d(this,b,a),void 0)},b.prototype.lastly=b.prototype.finally=function(a){return this._passThrough(a,0,i,i)},b.prototype.tap=function(a){return this._passThrough(a,1,i)},d}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{var j=this._promise=new b(d);j._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null,this._cancellationPhase=!1}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this._promise},i.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c="undefined"!=typeof this._generator.return;if(c)this._promise._pushContext(),a=n(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator.throw).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(a)}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator.throw).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){var c=this._promise;if(a===m)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(a.done===!0)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&(f=h(f,this._yieldHandlers,this._promise),null===f))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0===(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!==(33554432&g)?b._async.invoke(this._promiseFulfilled,this,f._value()):0!==(16777216&g)?b._async.invoke(this._promiseRejected,this,f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){var h=a("./util");h.canEvaluate,h.tryCatch,h.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:k.domainBind(e,b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],n.invoke(this._asyncInit,this,void 0)}function i(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+k.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+k.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+k.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new h(a,c,g,f).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj,n=b._async;k.inherits(h,c),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(c<0){if(c=c*-1-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0===(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,(c+1)*-1),!1;if(0===(33554432&r))return 0!==(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}var s=++this._totalResolved;return s>=f&&(null!==h?this._filter(d,h):this._resolve(d),!0)},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;f<c;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b.try=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(a,c,d){"use strict";c.exports=function(){function d(){}function e(a,b){if("function"!=typeof b)throw new t("expecting a function but got "+o.classString(b));if(a.constructor!==f)throw new t("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function f(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==v&&(e(this,a),this._resolveFromExecutor(a)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(a){this.promise._resolveCallback(a)}function h(a){this.promise._rejectCallback(a,!1)}function i(a){var b=new f(v);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var j,k=function(){return new t("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new f.PromiseInspection(this._target())},m=function(a){return f.reject(new t(a))},n={},o=a("./util");j=o.isNode?function(){var a=b.domain;return void 0===a&&(a=null),a}:function(){return null},o.notEnumerableProp(f,"_getDomain",j);var p=a("./es5"),q=a("./async"),r=new q;p.defineProperty(f,"_async",{value:r});var s=a("./errors"),t=f.TypeError=s.TypeError;f.RangeError=s.RangeError;var u=f.CancellationError=s.CancellationError;f.TimeoutError=s.TimeoutError,f.OperationalError=s.OperationalError,f.RejectionError=s.OperationalError,f.AggregateError=s.AggregateError;var v=function(){},w={},x={},y=a("./thenables")(f,v),z=a("./promise_array")(f,v,y,m,d),A=a("./context")(f),B=A.create,C=a("./debuggability")(f,A),D=(C.CapturedTrace,a("./finally")(f,y)),E=a("./catch_filter")(x),F=a("./nodeback"),G=o.errorObj,H=o.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;c<b-1;++c){var f=arguments[c];if(!o.isObject(f))return m("expecting an object but got A catch statement predicate "+o.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,E(d,a,this))}return this.then(void 0,a)},f.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},f.prototype.then=function(a,b){if(C.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+o.classString(a);arguments.length>1&&(c+=", "+o.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},f.prototype.done=function(a,b){var c=this._then(a,b,void 0,void 0,void 0);c._setIsFinal()},f.prototype.spread=function(a){return"function"!=typeof a?m("expecting a function but got "+o.classString(a)):this.all()._then(a,void 0,void 0,w,void 0)},f.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},f.prototype.error=function(a){return this.caught(o.originatesFromRejection,a)},f.getNewLibraryCopy=c.exports,f.is=function(a){return a instanceof f},f.fromNode=f.fromCallback=function(a){var b=new f(v);b._captureStackTrace();var c=arguments.length>1&&!!Object(arguments[1]).multiArgs,d=H(a)(F(b,c));return d===G&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},f.all=function(a){return new z(a).promise()},f.cast=function(a){var b=y(a);return b instanceof f||(b=new f(v),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(a){var b=new f(v);return b._captureStackTrace(),b._rejectCallback(a,!0),b},f.setScheduler=function(a){if("function"!=typeof a)throw new t("expecting a function but got "+o.classString(a));return r.setScheduler(a)},f.prototype._then=function(a,b,c,d,e){var g=void 0!==e,h=g?e:new f(v),i=this._target(),k=i._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!==(2097152&this._bitField)&&(d=0!==(50397184&k)?this._boundValue():i===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,h));var l=j();if(0!==(50397184&k)){var m,n,p=i._settlePromiseCtx;0!==(33554432&k)?(n=i._rejectionHandler0,m=a):0!==(16777216&k)?(n=i._fulfillmentHandler0,m=b,i._unsetRejectionIsUnhandled()):(p=i._settlePromiseLateCancellationObserver,n=new u("late cancellation observer"),i._attachExtraTrace(n),m=b),r.invoke(p,i,{handler:null===l?m:"function"==typeof m&&o.domainBind(l,m),promise:h,receiver:d,value:n})}else i._addCallbacks(a,b,h,d,l);return h},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},f.prototype._setLength=function(a){this._bitField=this._bitField&-65536|65535&a},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){
this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){r.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},f.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==n)return void 0===b&&this._isBound()?this._boundValue():b},f.prototype._promiseAt=function(a){return this[4*a-4+2]},f.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},f.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=n),this._addCallbacks(b,c,d,e,null)},f.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=n),this._addCallbacks(c,d,e,f,null)},f.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:o.domainBind(e,b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this[g+1]=null===e?b:o.domainBind(e,b))}return this._setLength(f+1),f},f.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},f.prototype._resolveCallback=function(a,b){if(0===(117506048&this._bitField)){if(a===this)return this._rejectCallback(k(),!1);var c=y(a,this);if(!(c instanceof f))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target();if(d===this)return void this._reject(k());var e=d._bitField;if(0===(50397184&e)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;h<g;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!==(33554432&e))this._fulfill(d._value());else if(0!==(16777216&e))this._reject(d._reason());else{var i=new u("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},f.prototype._rejectCallback=function(a,b,c){var d=o.ensureErrorObject(a),e=d===a;if(!e&&!c&&C.warnings()){var f="a promise was rejected with a non-error: "+o.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,!!b&&e),this._reject(a)},f.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},f.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0===(65536&e)){d._pushContext();var f;b===w?c&&"number"==typeof c.length?f=H(a).apply(this._boundValue(),c):(f=G,f.e=new t("cannot .spread() a non-array: "+o.classString(c))):f=H(a).call(b,c);var g=d._popContext();e=d._bitField,0===(65536&e)&&(f===x?d._reject(c):f===G?d._rejectCallback(f.e,!1):(C.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},f.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(a){this._rejectionHandler0=a},f.prototype._settlePromise=function(a,b,c,e){var g=a instanceof f,h=this._bitField,i=0!==(134217728&h);0!==(65536&h)?(g&&a._invokeInternalOnCancel(),c instanceof D&&c.isFinallyHandler()?(c.cancelPromise=a,H(b).call(c,e)===G&&a._reject(G.e)):b===l?a._fulfill(l.call(c)):c instanceof d?c._promiseCancelled(a):g||a instanceof z?a._cancel():c.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,c,e,a)):b.call(c,e,a):c instanceof d?c._isResolved()||(0!==(33554432&h)?c._promiseFulfilled(e,a):c._promiseRejected(e,a)):g&&(i&&a._setAsyncGuaranteed(),0!==(33554432&h)?a._fulfill(e):a._reject(e))},f.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,e=a.value;"function"==typeof b?c instanceof f?this._settlePromiseFromHandler(b,d,e,c):b.call(d,e,c):c instanceof f&&c._reject(e)},f.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},f.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},f.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},f.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=k();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!==(134217728&b)?this._settlePromises():r.settlePromises(this))}},f.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16))return this._setRejected(),this._fulfillmentHandler0=a,this._isFinal()?r.fatalError(a,o.isNode):void((65535&b)>0?r.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(a,b){for(var c=1;c<a;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._rejectPromises=function(a,b){for(var c=1;c<a;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!==(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var a=this._bitField;return 0!==(33554432&a)?this._rejectionHandler0:0!==(16777216&a)?this._fulfillmentHandler0:void 0},f.defer=f.pending=function(){C.deprecated("Promise.defer","new Promise");var a=new f(v);return{promise:a,resolve:g,reject:h}},o.notEnumerableProp(f,"_makeSelfResolutionError",k),a("./method")(f,v,y,m,C),a("./bind")(f,v,y,C),a("./cancel")(f,z,m,C),a("./direct_resolve")(f),a("./synchronous_inspection")(f),a("./join")(f,z,y,v,r,j),f.Promise=f,f.version="3.4.6",a("./map.js")(f,z,m,y,v,C),a("./call_get.js")(f),a("./using.js")(f,m,y,B,v,C),a("./timers.js")(f,v,C),a("./generators.js")(f,m,v,y,d,C),a("./nodeify.js")(f),a("./promisify.js")(f,v),a("./props.js")(f,z,y,m),a("./race.js")(f,v,y,m),a("./reduce.js")(f,z,m,y,v,C),a("./settle.js")(f,z,C),a("./some.js")(f,z,m),a("./filter.js")(f,v),a("./each.js")(f,v),a("./any.js")(f),o.toFastProperties(f),o.toFastProperties(f.prototype),i({a:1}),i({b:2}),i({c:3}),i(1),i(function(){}),i(void 0),i(!1),i(new f(v)),C.setBounds(q.firstLineError,o.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{}}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function a(c,f){var h=d(this._values,this._promise);if(h instanceof b){h=h._target();var j=h._bitField;if(this._values=h,0===(50397184&j))return this._promise._setAsyncGuaranteed(),h._then(a,this._reject,void 0,this,f);if(0===(33554432&j))return 0!==(16777216&j)?this._reject(h._reason()):this._cancel();h=h._value()}if(h=i.asArray(h),null===h){var k=e("expecting an array or an iterable object but got "+i.classString(h)).reason();return void this._promise._rejectCallback(k,!1)}return 0===h.length?void(f===-5?this._resolveEmptyArray():this._resolve(g(f))):void this._iterate(h)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;h<c;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0===(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!==(33554432&g)?this._promiseFulfilled(i._value(),h):0!==(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;return c>=this._length&&(this._resolve(this._values),!0)},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!w.test(a)}function e(a){try{return a.__isPromisified__===!0}catch(a){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,u);return!!d&&e(d)}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===x||x(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(a){f._rejectCallback(q(a),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(y(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;i<j;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===z)a[o]=z(k,m,k,l,b,e);else{var p=d(l,function(){return z(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return z(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t="Async",u={__isPromisified__:!0},v=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+v.join("|")+")$"),x=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},y=function(a){return a.replace(/([$])/,"\\$")},z=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d=t);var e=b.filter;"function"!=typeof e&&(e=x);var f=b.promisifier;if("function"!=typeof f&&(f=z),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;f<e;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;d<c;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){var d;if(this._isMap)d=m(this._values);else{d={};for(var e=this.length(),f=0,g=this.length();f<g;++f)d[this._values[f+e]]=this._values[f]}return this._resolve(d),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,e=this._length,f=c+e&b-1;d(this,0,this,b,f)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(a=g.asArray(a),null===a)return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;m<n;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:n.domainBind(g,c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,e===f?this._eachValues=Array(this._length):0===e?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){if("function"!=typeof b)return d("expecting a function but got "+n.classString(b));var f=new h(a,b,c,e);return f.promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length),f instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){return a===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel()))},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;d<e;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(a,c,d){"use strict";var f,g=a("./util"),h=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},i=g.getNativePromise();if(g.isNode&&"undefined"==typeof MutationObserver){var j=e.setImmediate,k=b.nextTick;f=g.isRecentNode?function(a){j.call(e,a)}:function(a){k.call(b,a)}}else if("function"==typeof i&&"function"==typeof i.resolve){var l=i.resolve();f=function(a){l.then(a)}}else f="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:h:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div"),e=new MutationObserver(function(){a.classList.toggle("foo"),c=!1});e.observe(d,b);var f=function(){c||(c=!0,d.classList.toggle("foo"))};return function(c){var d=new MutationObserver(function(){d.disconnect(),c()});d.observe(a,b),f()}}();c.exports=f},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection,g=a("./util");g.inherits(e,c),e.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;return c>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||b<0)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0===(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};b.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},a.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},a.prototype._isCancelled=function(){return this._target().__isCancelled()},a.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(a){return j.e=a,j}}function g(a){try{return l.call(a,"_promise0")}catch(a){return!1}}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),a}var h=a("./util"),i=b.TimeoutError;e.prototype._resultCancelled=function(){clearTimeout(this.handle)};var j=function(a){return k(+this).thenReturn(a)},k=b.delay=function(a,f){var g,h;return void 0!==f?(g=b.resolve(f)._then(j,null,null,a,void 0),d.cancellation()&&f instanceof b&&g._setOnCancel(f)):(g=new b(c),h=setTimeout(function(){g._fulfill()},+a),d.cancellation()&&g._setOnCancel(new e(h)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};b.prototype.delay=function(a){return k(a,this)};var l=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new i("operation timed out"):new i(b),h.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,h,i=new e(setTimeout(function(){c.isPending()&&l(c,b,h)},a));return d.cancellation()?(h=this.then(),c=h._then(f,g,void 0,i,void 0),c._setOnCancel(i)):c=this._then(f,g,void 0,i,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(a){return h(a)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch,t={};k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():t},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==t?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){var c=this.data();return c.call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;c<a;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(a<2)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;l<a;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(a,c,d){"use strict";function f(){try{var a=F;return F=null,a.apply(this,arguments)}catch(a){return E.e=a,E}}function g(a){return F=a,f}function h(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function i(a){return"function"==typeof a||"object"==typeof a&&null!==a}function j(a){return h(a)?new Error(s(a)):a}function k(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;c<d;++c)e[c]=a[c];return e[c]=b,e}function l(a,b,c){if(!C.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function m(a,b,c){if(h(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(a,b,d),a}function n(a){throw a}function o(a){try{if("function"==typeof a){var b=C.names(a.prototype),c=C.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=J.test(a+"")&&C.names(a).length>0;if(c||d||e)return!0}return!1}catch(a){return!1}}function p(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function q(a){return K.test(a)}function r(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=b+e+c;return d}function s(a){try{return a+""}catch(a){return"[no string representation]"}}function t(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function u(a){try{m(a,"isOperational",!0)}catch(a){}}function v(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||a.isOperational===!0)}function w(a){return t(a)&&C.propertyIsWritable(a,"stack");
}function x(a){return{}.toString.call(a)}function y(a,b,c){for(var d=C.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{C.defineProperty(b,f,C.getDescriptor(a,f))}catch(a){}}}function z(a,c){return O?b.env[a]:c}function A(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(a){}}function B(a,b){return a.bind(b)}var C=a("./es5"),D="undefined"==typeof navigator,E={e:{}},F,G="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0!==this?this:null,H=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},I=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(C.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(a){return d}for(var g=0;g<f.length;++g){var h=f[g];if(!e[h]){e[h]=!0;var i=Object.getOwnPropertyDescriptor(a,h);null!=i&&null==i.get&&null==i.set&&d.push(h)}}a=C.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),J=/this\s*\.\s*\S+\s*=/,K=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(a){return w(a)?a:new Error(s(a))}:function(a){if(w(a))return a;try{throw new Error(s(a))}catch(a){return a}}}(),M=function(a){return C.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};M=function(a){return C.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?N(a):null}}var O="undefined"!=typeof b&&"[object process]"===x(b).toLowerCase(),P={isClass:o,isIdentifier:q,inheritedDataKeys:I,getDataPropertyOrDefault:l,thrower:n,isArray:C.isArray,asArray:M,notEnumerableProp:m,isPrimitive:h,isObject:i,isError:t,canEvaluate:D,errorObj:E,tryCatch:g,inherits:H,withAppended:k,maybeWrapAsError:j,toFastProperties:p,filledRange:r,toString:s,canAttachTrace:w,ensureErrorObject:L,originatesFromRejection:v,markAsOriginatingFromRejection:u,classString:x,copyDescriptors:y,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:O,env:z,global:G,getNativePromise:A,domainBind:B};P.isRecentNode=P.isNode&&function(){var a=b.versions.node.split(".").map(Number);return 0===a[0]&&a[1]>10||a[0]>0}(),P.isNode&&P.toFastProperties(b);try{throw new Error}catch(a){P.lastLineError=a}c.exports=P},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:30}],23:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}"undefined"!=typeof b&&(b.exports=d),d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],24:[function(a,b,c){var c=b.exports=function(a){a||(a={}),"string"==typeof a&&(a={cookie:a}),void 0===a.cookie&&(a.cookie="");var b={};return b.get=function(b){for(var c=a.cookie.split(/;\s*/),d=0;d<c.length;d++){var e=c[d].split("="),f=unescape(e[0]);if(f===b)return unescape(e[1])}},b.set=function(b,c,d){d||(d={});var e=escape(b)+"="+escape(c);return d.expires&&(e+="; expires="+d.expires),d.path&&(e+="; path="+escape(d.path)),a.cookie=e,e},b};if("undefined"!=typeof document){var d=c(document);c.get=d.get,c.set=d.set}},{}],25:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function c(){this.removeListener(a,c),d||(d=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var d=!1;return c.listener=b,this.on(a,c),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],26:[function(a,b,c){function d(a,b){for(var c in b)a.setAttribute(c,b[c])}function e(a,b){a.onload=function(){this.onerror=this.onload=null,b(null,a)},a.onerror=function(){this.onerror=this.onload=null,b(new Error("Failed to load "+this.src),a)}}function f(a,b){a.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,b(null,a))}}b.exports=function(a,b,c){var g=document.head||document.getElementsByTagName("head")[0],h=document.createElement("script");"function"==typeof b&&(c=b,b={}),b=b||{},c=c||function(){},h.type=b.type||"text/javascript",h.charset=b.charset||"utf8",h.async=!("async"in b)||!!b.async,h.src=a,b.attrs&&d(h,b.attrs),b.text&&(h.text=""+b.text);var i="onload"in h?e:f;i(h,c),h.onload||e(h,c),g.appendChild(h)}},{}],27:[function(b,c,d){(function(e){!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this,f.localforage=b()}}(function(){return function a(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,a,c,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a(2),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=c=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},c.resolve=k,c.reject=l,c.all=m,c.race=n},{2:2}],2:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){(function(b){"use strict";"function"!=typeof b.Promise&&(b.Promise=a(1))}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}function f(){try{return!!fa&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(fa&&"function"==typeof fa.open&&"undefined"!=typeof IDBKeyRange))}catch(a){return!1}}function g(){return"function"==typeof openDatabase}function h(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(a){return!1}}function i(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(var c="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function j(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}function k(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}function l(a){return new ia(function(b){var c=i([""]);a.objectStore(ja).put(c,"key"),a.onabort=function(a){a.preventDefault(),a.stopPropagation(),b(!1)},a.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);b(c||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function m(a){return"boolean"==typeof ga?ia.resolve(ga):l(a).then(function(a){return ga=a})}function n(a){var b=ha[a.name],c={};c.promise=new ia(function(a){c.resolve=a}),b.deferredOperations.push(c),b.dbReady?b.dbReady=b.dbReady.then(function(){return c.promise}):b.dbReady=c.promise}function o(a){var b=ha[a.name],c=b.deferredOperations.pop();c&&c.resolve()}function p(a,b){return new ia(function(c,d){if(a.db){if(!b)return c(a.db);n(a),a.db.close()}var e=[a.name];b&&e.push(a.version);var f=fa.open.apply(fa,e);b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),b.oldVersion<=1&&c.createObjectStore(ja)}catch(c){if("ConstraintError"!==c.name)throw c;console.warn('The database "'+a.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(){d(f.error)},f.onsuccess=function(){c(f.result),o(a)}})}function q(a){return p(a,!1)}function r(a){return p(a,!0)}function s(a,b){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version;if(d&&(a.version!==b&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),e||c){if(c){var f=a.db.version+1;f>a.version&&(a.version=f)}return!0}return!1}function t(a){return new ia(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function u(a){var b=k(atob(a.data));return i([b],{type:a.type})}function v(a){return a&&a.__local_forage_encoded_blob}function w(a){var b=this,c=b._initReady().then(function(){var a=ha[b._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return c.then(a,a),c}function x(a){function b(){return ia.resolve()}var c=this,d={db:null};if(a)for(var e in a)d[e]=a[e];ha||(ha={});var f=ha[d.name];f||(f={forages:[],db:null,dbReady:null,deferredOperations:[]},ha[d.name]=f),f.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=w);for(var g=[],h=0;h<f.forages.length;h++){var i=f.forages[h];i!==c&&g.push(i._initReady().catch(b))}var j=f.forages.slice(0);return ia.all(g).then(function(){return d.db=f.db,q(d)}).then(function(a){return d.db=a,s(d,c._defaultConfig.version)?r(d):a}).then(function(a){d.db=f.db=a,c._dbInfo=d;for(var b=0;b<j.length;b++){var e=j[b];e!==c&&(e._dbInfo.db=d.db,e._dbInfo.version=d.version)}})}function y(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.get(a);g.onsuccess=function(){var a=g.result;void 0===a&&(a=null),v(a)&&(a=u(a)),b(a)},g.onerror=function(){d(g.error)}}).catch(d)});return j(d,b),d}function z(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.openCursor(),h=1;g.onsuccess=function(){var c=g.result;if(c){var d=c.value;v(d)&&(d=u(d));var e=a(d,c.key,h++);void 0!==e?b(e):c.continue()}else b()},g.onerror=function(){d(g.error)}}).catch(d)});return j(d,b),d}function A(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=new ia(function(c,e){var f;d.ready().then(function(){return f=d._dbInfo,b instanceof Blob?m(f.db).then(function(a){return a?b:t(b)}):b}).then(function(b){var d=f.db.transaction(f.storeName,"readwrite"),g=d.objectStore(f.storeName);null===b&&(b=void 0),d.oncomplete=function(){void 0===b&&(b=null),c(b)},d.onabort=d.onerror=function(){var a=h.error?h.error:h.transaction.error;e(a)};var h=g.put(b,a)}).catch(e)});return j(e,c),e}function B(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readwrite"),g=f.objectStore(e.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){d(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;d(a)}}).catch(d)});return j(d,b),d}function C(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readwrite"),f=e.objectStore(d.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}).catch(c)});return j(c,a),c}function D(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){c(f.error)}}).catch(c)});return j(c,a),c}function E(a,b){var c=this,d=new ia(function(b,d){return a<0?void b(null):void c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=!1,h=f.openCursor();h.onsuccess=function(){var c=h.result;return c?void(0===a?b(c.key):g?b(c.key):(g=!0,c.advance(a))):void b(null)},h.onerror=function(){d(h.error)}}).catch(d)});return j(d,b),d}function F(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.openCursor(),g=[];f.onsuccess=function(){var b=f.result;return b?(g.push(b.key),void b.continue()):void a(g)},f.onerror=function(){c(f.error)}}).catch(c)});return j(c,a),c}function G(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j=new ArrayBuffer(g),k=new Uint8Array(j);for(b=0;b<h;b+=4)c=la.indexOf(a[b]),d=la.indexOf(a[b+1]),e=la.indexOf(a[b+2]),f=la.indexOf(a[b+3]),k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j}function H(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+=la[c[b]>>2],d+=la[(3&c[b])<<4|c[b+1]>>4],d+=la[(15&c[b+1])<<2|c[b+2]>>6],d+=la[63&c[b+2]];return c.length%3===2?d=d.substring(0,d.length-1)+"=":c.length%3===1&&(d=d.substring(0,d.length-2)+"=="),d}function I(a,b){var c="";if(a&&(c=a.toString()),a&&("[object ArrayBuffer]"===a.toString()||a.buffer&&"[object ArrayBuffer]"===a.buffer.toString())){var d,e=oa;a instanceof ArrayBuffer?(d=a,e+=qa):(d=a.buffer,"[object Int8Array]"===c?e+=sa:"[object Uint8Array]"===c?e+=ta:"[object Uint8ClampedArray]"===c?e+=ua:"[object Int16Array]"===c?e+=va:"[object Uint16Array]"===c?e+=xa:"[object Int32Array]"===c?e+=wa:"[object Uint32Array]"===c?e+=ya:"[object Float32Array]"===c?e+=za:"[object Float64Array]"===c?e+=Aa:b(new Error("Failed to get type for BinaryArray"))),b(e+H(d))}else if("[object Blob]"===c){var f=new FileReader;f.onload=function(){var c=ma+a.type+"~"+H(this.result);b(oa+ra+c)},f.readAsArrayBuffer(a)}else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}}function J(a){if(a.substring(0,pa)!==oa)return JSON.parse(a);var b,c=a.substring(Ba),d=a.substring(pa,Ba);if(d===ra&&na.test(c)){var e=c.match(na);b=e[1],c=c.substring(e[0].length)}var f=G(c);switch(d){case qa:return f;case ra:return i([f],{type:b});case sa:return new Int8Array(f);case ta:return new Uint8Array(f);case ua:return new Uint8ClampedArray(f);case va:return new Int16Array(f);case xa:return new Uint16Array(f);case wa:return new Int32Array(f);case ya:return new Uint32Array(f);case za:return new Float32Array(f);case Aa:return new Float64Array(f);default:throw new Error("Unkown type: "+d)}}function K(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];var e=new ia(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(a){return d(a)}c.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+c.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){b._dbInfo=c,a()},function(a,b){d(b)})})});return c.serializer=Ca,e}function L(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),b(d)},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function M(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName,[],function(c,d){for(var f=d.rows,g=f.length,h=0;h<g;h++){var i=f.item(h),j=i.value;if(j&&(j=e.serializer.deserialize(j)),j=a(j,i.key,h+1),void 0!==j)return void b(j)}b()},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function N(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=new ia(function(c,e){d.ready().then(function(){void 0===b&&(b=null);var f=b,g=d._dbInfo;g.serializer.serialize(b,function(b,d){d?e(d):g.db.transaction(function(d){d.executeSql("INSERT OR REPLACE INTO "+g.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){c(f)},function(a,b){e(b)})},function(a){a.code===a.QUOTA_ERR&&e(a)})})}).catch(e)});return j(e,c),e}function O(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function P(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function Q(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function R(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function S(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT key FROM "+d.storeName,[],function(b,c){for(var d=[],e=0;e<c.rows.length;e++)d.push(c.rows.item(e).key);a(d)},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function T(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return c.keyPrefix=c.name+"/",c.storeName!==b._defaultConfig.storeName&&(c.keyPrefix+=c.storeName+"/"),b._dbInfo=c,c.serializer=Ca,ia.resolve()}function U(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return j(c,a),c}function V(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return j(d,b),d}function W(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,f=localStorage.length,g=1,h=0;h<f;h++){var i=localStorage.key(h);if(0===i.indexOf(d)){var j=localStorage.getItem(i);if(j&&(j=b.serializer.deserialize(j)),j=a(j,i.substring(e),g++),void 0!==j)return j}}});return j(d,b),d}function X(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=localStorage.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return j(d,b),d}function Y(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++)0===localStorage.key(e).indexOf(a.keyPrefix)&&d.push(localStorage.key(e).substring(a.keyPrefix.length));return d});return j(c,a),c}function Z(a){var b=this,c=b.keys().then(function(a){return a.length});return j(c,a),c}function $(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c.ready().then(function(){var b=c._dbInfo;localStorage.removeItem(b.keyPrefix+a)});return j(d,b),d}function _(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=d.ready().then(function(){void 0===b&&(b=null);var c=b;return new ia(function(e,f){var g=d._dbInfo;g.serializer.serialize(b,function(b,d){if(d)f(d);else try{localStorage.setItem(g.keyPrefix+a,b),e(c)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||f(a),f(a)}})})});return j(e,c),e}function aa(a,b,c){"function"==typeof b&&a.then(b),"function"==typeof c&&a.catch(c)}function ba(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function ca(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&&(La(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}function da(a){for(var b in Ga)if(Ga.hasOwnProperty(b)&&Ga[b]===a)return!0;return!1}var ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},fa=e();"undefined"==typeof Promise&&"undefined"!=typeof a&&a(3);var ga,ha,ia=Promise,ja="local-forage-detect-blob-support",ka={_driver:"asyncStorage",_initStorage:x,iterate:z,getItem:y,setItem:A,removeItem:B,clear:C,length:D,key:E,keys:F},la="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ma="~~local_forage_type~",na=/^~~local_forage_type~([^~]+)~/,oa="__lfsc__:",pa=oa.length,qa="arbf",ra="blob",sa="si08",ta="ui08",ua="uic8",va="si16",wa="si32",xa="ur16",ya="ui32",za="fl32",Aa="fl64",Ba=pa+qa.length,Ca={serialize:I,deserialize:J,stringToBuffer:G,bufferToString:H},Da={_driver:"webSQLStorage",_initStorage:K,iterate:M,getItem:L,setItem:N,removeItem:O,clear:P,length:Q,key:R,keys:S},Ea={_driver:"localStorageWrapper",_initStorage:T,iterate:W,getItem:V,setItem:_,removeItem:$,clear:U,length:Z,key:X,keys:Y},Fa={},Ga={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Ha=[Ga.INDEXEDDB,Ga.WEBSQL,Ga.LOCALSTORAGE],Ia=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Ja={description:"",driver:Ha.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Ka={};Ka[Ga.INDEXEDDB]=f(),Ka[Ga.WEBSQL]=g(),Ka[Ga.LOCALSTORAGE]=h();var La=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Ma=function(){function a(b){d(this,a),this.INDEXEDDB=Ga.INDEXEDDB,this.LOCALSTORAGE=Ga.LOCALSTORAGE,this.WEBSQL=Ga.WEBSQL,this._defaultConfig=ca({},Ja),this._config=ca({},this._defaultConfig,b),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return a.prototype.config=function(a){if("object"===("undefined"==typeof a?"undefined":ea(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a)"storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),this._config[b]=a[b];return"driver"in a&&a.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new ia(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),f=new Error("Custom driver name already in use: "+a._driver);if(!a._driver)return void c(e);if(da(a._driver))return void c(f);for(var g=Ia.concat("_initStorage"),h=0;h<g.length;h++){var i=g[h];if(!i||!a[i]||"function"!=typeof a[i])return void c(e)}var j=ia.resolve(!0);"_support"in a&&(j=a._support&&"function"==typeof a._support?a._support():ia.resolve(!!a._support)),j.then(function(c){Ka[d]=c,Fa[d]=a,b()},c)}catch(a){c(a)}});return aa(d,b,c),
d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){var d=this,e=ia.resolve().then(function(){if(!da(a)){if(Fa[a])return Fa[a];throw new Error("Driver not found.")}switch(a){case d.INDEXEDDB:return ka;case d.LOCALSTORAGE:return Ea;case d.WEBSQL:return Da}});return aa(e,b,c),e},a.prototype.getSerializer=function(a){var b=ia.resolve(Ca);return aa(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return aa(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){f._config.driver=f.driver()}function e(a){return function(){function b(){for(;c<a.length;){var e=a[c];return c++,f._dbInfo=null,f._ready=null,f.getDriver(e).then(function(a){return f._extend(a),d(),f._ready=f._initStorage(f._config),f._ready}).catch(b)}d();var g=new Error("No available storage method found.");return f._driverSet=ia.reject(g),f._driverSet}var c=0;return b()}}var f=this;La(a)||(a=[a]);var g=this._getSupportedDrivers(a),h=null!==this._driverSet?this._driverSet.catch(function(){return ia.resolve()}):ia.resolve();return this._driverSet=h.then(function(){var a=g[0];return f._dbInfo=null,f._ready=null,f.getDriver(a).then(function(a){f._driver=a._driver,d(),f._wrapLibraryMethodsWithReady(),f._initDriver=e(g)})}).catch(function(){d();var a=new Error("No available storage method found.");return f._driverSet=ia.reject(a),f._driverSet}),aa(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!Ka[a]},a.prototype._extend=function(a){ca(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0;a<Ia.length;a++)ba(this,Ia[a])},a.prototype.createInstance=function(b){return new a(b)},a}(),Na=new Ma;b.exports=Na},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(a,b,c){(function(a){function c(a,b,c){function e(b){var c=p,d=q;return p=q=void 0,y=b,s=a.apply(d,c)}function f(a){return y=a,t=setTimeout(k,b),z?e(a):s}function i(a){var c=a-x,d=a-y,e=b-c;return A?v(e,r-d):e}function j(a){var c=a-x,d=a-y;return void 0===x||c>=b||c<0||A&&d>=r}function k(){var a=w();return j(a)?l(a):void(t=setTimeout(k,i(a)))}function l(a){return t=void 0,B&&p?e(a):(p=q=void 0,s)}function m(){void 0!==t&&clearTimeout(t),y=0,p=x=q=t=void 0}function n(){return void 0===t?s:l(w())}function o(){var a=w(),c=j(a);if(p=arguments,q=this,x=a,c){if(void 0===t)return f(x);if(A)return t=setTimeout(k,b),e(x)}return void 0===t&&(t=setTimeout(k,b)),s}var p,q,r,s,t,x,y=0,z=!1,A=!1,B=!0;if("function"!=typeof a)throw new TypeError(h);return b=g(b)||0,d(c)&&(z=!!c.leading,A="maxWait"in c,r=A?u(g(c.maxWait)||0,b):r,B="trailing"in c?!!c.trailing:B),o.cancel=m,o.flush=n,o}function d(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function e(a){return!!a&&"object"==typeof a}function f(a){return"symbol"==typeof a||e(a)&&t.call(a)==j}function g(a){if("number"==typeof a)return a;if(f(a))return i;if(d(a)){var b="function"==typeof a.valueOf?a.valueOf():a;a=d(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(k,"");var c=m.test(a);return c||n.test(a)?o(a.slice(2),c?2:8):l.test(a)?i:+a}var h="Expected a function",i=NaN,j="[object Symbol]",k=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,n=/^0o[0-7]+$/i,o=parseInt,p="object"==typeof a&&a&&a.Object===Object&&a,q="object"==typeof self&&self&&self.Object===Object&&self,r=p||q||Function("return this")(),s=Object.prototype,t=s.toString,u=Math.max,v=Math.min,w=function(){return r.Date.now()};b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(b,c,d){!function(a,b){a(function(){"use strict";function a(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function c(a,b){var c,d,e=a.length;if(!e||!b)return!1;for(c=b.toLowerCase(),d=0;d<e;++d)if(c===a[d].toLowerCase())return!0;return!1}function d(a){for(var b in a)h.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function e(a,b){this.ua=a||"",this._cache={},this.maxPhoneWidth=b||600}var f={};f.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"Samsung|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K017 |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris E10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bJolla\\b|\\bTP750\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Vivaldi:"Vivaldi",Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],
NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},f.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var g,h=Object.prototype.hasOwnProperty;return f.FALLBACK_PHONE="UnknownPhone",f.FALLBACK_TABLET="UnknownTablet",f.FALLBACK_MOBILE="UnknownMobile",g="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var a,b,c,e,i,j,k=f.mobileDetectRules;for(a in k.props)if(h.call(k.props,a)){for(b=k.props[a],g(b)||(b=[b]),i=b.length,e=0;e<i;++e)c=b[e],j=c.indexOf("[VER]"),j>=0&&(c=c.substring(0,j)+"([\\w._\\+]+)"+c.substring(j+5)),b[e]=new RegExp(c,"i");k.props[a]=b}d(k.oss),d(k.phones),d(k.tablets),d(k.uas),d(k.utils),k.oss0={WindowsPhoneOS:k.oss.WindowsPhoneOS,WindowsMobileOS:k.oss.WindowsMobileOS}}(),f.findMatch=function(a,b){for(var c in a)if(h.call(a,c)&&a[c].test(b))return c;return null},f.findMatches=function(a,b){var c=[];for(var d in a)h.call(a,d)&&a[d].test(b)&&c.push(d);return c},f.getVersionStr=function(a,b){var c,d,e,g,i=f.mobileDetectRules.props;if(h.call(i,a))for(c=i[a],e=c.length,d=0;d<e;++d)if(g=c[d].exec(b),null!==g)return g[1];return null},f.getVersion=function(a,b){var c=f.getVersionStr(a,b);return c?f.prepareVersionNo(c):NaN},f.prepareVersionNo=function(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)},f.isMobileFallback=function(a){return f.detectMobileBrowsers.fullPattern.test(a)||f.detectMobileBrowsers.shortPattern.test(a.substr(0,4))},f.isTabletFallback=function(a){return f.detectMobileBrowsers.tabletPattern.test(a)},f.prepareDetectionCache=function(a,c,d){if(a.mobile===b){var g,h,i;return(h=f.findMatch(f.mobileDetectRules.tablets,c))?(a.mobile=a.tablet=h,void(a.phone=null)):(g=f.findMatch(f.mobileDetectRules.phones,c))?(a.mobile=a.phone=g,void(a.tablet=null)):void(f.isMobileFallback(c)?(i=e.isPhoneSized(d),i===b?(a.mobile=f.FALLBACK_MOBILE,a.tablet=a.phone=null):i?(a.mobile=a.phone=f.FALLBACK_PHONE,a.tablet=null):(a.mobile=a.tablet=f.FALLBACK_TABLET,a.phone=null)):f.isTabletFallback(c)?(a.mobile=a.tablet=f.FALLBACK_TABLET,a.phone=null):a.mobile=a.tablet=a.phone=null)}},f.mobileGrade=function(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":(a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile")<=5.2,"C")},f.detectOS=function(a){return f.findMatch(f.mobileDetectRules.oss0,a)||f.findMatch(f.mobileDetectRules.oss,a)},f.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},e.prototype={constructor:e,mobile:function(){return f.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return f.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return f.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===b&&(this._cache.userAgent=f.findMatch(f.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===b&&(this._cache.userAgents=f.findMatches(f.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===b&&(this._cache.os=f.detectOS(this.ua)),this._cache.os},version:function(a){return f.getVersion(a,this.ua)},versionStr:function(a){return f.getVersionStr(a,this.ua)},is:function(b){return c(this.userAgents(),b)||a(b,this.os())||a(b,this.phone())||a(b,this.tablet())||c(f.findMatches(f.mobileDetectRules.utils,this.ua),b)},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return e.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===b&&(this._cache.grade=f.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?e.isPhoneSized=function(a){return a<0?b:f.getDeviceSmallerSide()<=a}:e.isPhoneSized=function(){},e._impl=f,e.version="1.3.3 2016-07-31",e})}(function(b){if("undefined"!=typeof c&&c.exports)return function(a){c.exports=a()};if("function"==typeof a&&a.amd)return a;if("undefined"!=typeof window)return function(a){window.MobileDetect=a()};throw new Error("unknown environment")}())},{}],30:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],31:[function(a,b,c){b.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];d<e;)f=b.call(null,f,a[d],++d,a);return f}},{}],32:[function(a,b,c){var d=a("bluebird"),e=b.exports=a("superagent"),f=e.Request;d.config({cancellation:!0});var g=function(a,b){var c;this.message=a,this.name="SuperagentPromiseError",this.originalError=b,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),c=this.stack):c=new Error(a).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?c+"\nCaused by:  "+this.originalError.stack:c}})};g.prototype=new Error,g.prototype.constructor=g,e.SuperagentPromiseError=g,f.prototype.promise=function(){var a,b=this;return new d(function(c,d,e){b.end(function(e,f){if("undefined"!=typeof f&&f.status>=400){var h="cannot "+b.method+" "+b.url+" ("+f.status+")";a=new g(h),a.status=f.status,a.body=f.body,a.res=f,d(a)}else e?d(new g("Bad request",e)):c(f)}),e(function(){b.abort()})})},f.prototype.then=function(){var a=this.promise();return a.then.apply(a,arguments)}},{bluebird:22,superagent:33}],33:[function(a,b,c){function d(){}function e(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function f(a){if(!t(a))return a;var b=[];for(var c in a)null!=a[c]&&g(b,c,a[c]);return b.join("&")}function g(a,b,c){return Array.isArray(c)?c.forEach(function(c){g(a,b,c)}):void a.push(encodeURIComponent(b)+"="+encodeURIComponent(c))}function h(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;f<g;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function i(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;h<i;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=v(c.slice(b+1)),g[d]=e;return g}function j(a){return/[\/+]json\b/.test(a)}function k(a){return a.split(/ *; */).shift()}function l(a){return r(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function m(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=i(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function n(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new m(c)}catch(b){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=b,a.rawResponse=c.xhr&&c.xhr.responseText?c.xhr.responseText:null,a.statusCode=c.xhr&&c.xhr.status?c.xhr.status:null,c.callback(a)}if(c.emit("response",b),a)return c.callback(a,b);if(b.status>=200&&b.status<300)return c.callback(a,b);var d=new Error(b.statusText||"Unsuccessful HTTP response");d.original=a,d.response=b,d.status=b.status,c.callback(d,b)})}function o(a,b){var c=u("DELETE",a);return b&&c.end(b),c}var p,q=a("emitter"),r=a("reduce"),s=a("./request-base"),t=a("./is-object");p="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var u=b.exports=a("./request").bind(null,n);u.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1};var v="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};u.serializeObject=f,u.parseString=h,u.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},u.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify},u.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},m.prototype.get=function(a){return this.header[a.toLowerCase()]},m.prototype.setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=k(b);var c=l(b);for(var d in c)this[d]=c[d]},m.prototype.parseBody=function(a){var b=u.parse[this.type];return!b&&j(this.type)&&(b=u.parse["application/json"]),b&&a&&(a.length||a instanceof Object)?b(a):null},m.prototype.setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},m.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},u.Response=m,q(n.prototype);for(var w in s)n.prototype[w]=s[w];n.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},n.prototype.type=function(a){return this.set("Content-Type",u.types[a]||a),this},n.prototype.responseType=function(a){return this._responseType=a,this},n.prototype.accept=function(a){return this.set("Accept",u.types[a]||a),this},n.prototype.auth=function(a,b,c){switch(c||(c={type:"basic"}),c.type){case"basic":var d=btoa(a+":"+b);this.set("Authorization","Basic "+d);break;case"auto":this.username=a,this.password=b}return this},n.prototype.query=function(a){return"string"!=typeof a&&(a=f(a)),a&&this._query.push(a),this},n.prototype.attach=function(a,b,c){return this._getFormData().append(a,b,c||b.name),this},n.prototype._getFormData=function(){return this._formData||(this._formData=new p.FormData),this._formData},n.prototype.send=function(a){var b=t(a),c=this._header["content-type"];if(b&&t(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this._header["content-type"],"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return!b||e(a)?this:(c||this.type("json"),this)},m.prototype.parse=function(a){return p.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(a),this},m.prototype.serialize=function(a){return this._parser=a,this},n.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout(),c(a,b)},n.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},n.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},n.prototype.withCredentials=function(){return this._withCredentials=!0,this},n.prototype.end=function(a){var b=this,c=this.xhr=u.getXHR(),f=this._query.join("&"),g=this._timeout,h=this._formData||this._data;this._callback=a||d,c.onreadystatechange=function(){if(4==c.readyState){var a;try{a=c.status}catch(b){a=0}if(0==a){if(b.timedout)return b.timeoutError();if(b.aborted)return;return b.crossDomainError()}b.emit("end")}};var i=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),a.direction="download",b.emit("progress",a)};this.hasListeners("progress")&&(c.onprogress=i);try{c.upload&&this.hasListeners("progress")&&(c.upload.onprogress=i)}catch(a){}if(g&&!this._timer&&(this._timer=setTimeout(function(){b.timedout=!0,b.abort()},g)),f&&(f=u.serializeObject(f),this.url+=~this.url.indexOf("?")?"&"+f:"?"+f),this.username&&this.password?c.open(this.method,this.url,!0,this.username,this.password):c.open(this.method,this.url,!0),this._withCredentials&&(c.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!e(h)){var k=this._header["content-type"],l=this._parser||u.serialize[k?k.split(";")[0]:""];!l&&j(k)&&(l=u.serialize["application/json"]),l&&(h=l(h))}for(var m in this.header)null!=this.header[m]&&c.setRequestHeader(m,this.header[m]);return this._responseType&&(c.responseType=this._responseType),this.emit("request",this),c.send("undefined"!=typeof h?h:null),this},u.Request=n,u.get=function(a,b,c){var d=u("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},u.head=function(a,b,c){var d=u("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},u.del=o,u.delete=o,u.patch=function(a,b,c){var d=u("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},u.post=function(a,b,c){var d=u("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},u.put=function(a,b,c){var d=u("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},{"./is-object":34,"./request":36,"./request-base":35,emitter:23,reduce:31}],34:[function(a,b,c){function d(a){return null!=a&&"object"==typeof a}b.exports=d},{}],35:[function(a,b,c){var d=a("./is-object");c.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},c.parse=function(a){return this._parser=a,this},c.timeout=function(a){return this._timeout=a,this},c.then=function(a,b){return this.end(function(c,d){c?b(c):a(d)})},c.use=function(a){return a(this),this},c.get=function(a){return this._header[a.toLowerCase()]},c.getHeader=c.get,c.set=function(a,b){if(d(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},c.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},c.field=function(a,b){return this._getFormData().append(a,b),this}},{"./is-object":34}],36:[function(a,b,c){function d(a,b,c){return"function"==typeof c?new a("GET",b).end(c):2==arguments.length?new a("GET",b):new a(b,c)}b.exports=d},{}],37:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=o+"/apis/v2/fans/"+a;j.default.get(d).withCredentials().set("X-Personalization-Source",u).end(function(a,d){if(a||!d.ok)c(a);else{var e=d&&d.body;l.default.setItem("fanapicache",{fan:e,id:e.id,timestamp:Date.now()}),b(e)}})}function f(a){return s.test(a)?new n.default(function(b,c){l.default.getItem("fanapicache").then(function(d){var f=d&&d.fan,g=Date.now()-d.timestamp>60*v*1e3;null===f||d.id!==a||g?e(a,b,c):b(f)}).catch(function(){e(a,b,c)})}):n.default.reject(new Error("Invalid SWID"))}function g(a,b){if(!s.test(a))return n.default.reject(new Error("Invalid SWID"));var c=p+"/apis/v2/fans/"+a+"/profile/settings/";return j.default.post(c).withCredentials().send(b).promise()}function h(){var a=arguments.length<=0||void 0===arguments[0]?t:arguments[0],b=a.sourceHeader,c=void 0===b?t.sourceHeader:b,d=a.cacheDuration,e=void 0===d?t.cacheDuration:d;return this instanceof h?(u=c,v=e,this):new h({sourceHeader:c,cacheDuration:e})}var i=a("superagent-bluebird-promise"),j=d(i),k=a("localforage"),l=d(k),m=a("bluebird"),n=d(m),o="//fan.api.espn.go.com",p="//fan.core.api.espn.go.com",q="espn-video-player",r=10,s=/^\{[\w\-]+\}/,t={sourceHeader:q,cacheDuration:r},u=void 0,v=void 0;h.prototype.getFanForId=function(a,b){return f(a).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.getAutoStartForFanId=function(a,b){return f(a).then(function(a){var b=a&&a.profile,c=b&&b.settings,d=c&&c.videoAutoStart&&c.videoAutoStart.value;return"2"!==d}).catch(function(){return!0}).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.updateAutoStartForFanId=function(a,b,c){var d=(b?"1":"2").toString(),e={videoAutoStart:{value:d,lastUpdateDate:Date.now()}};return g(a,e).tap(function(a,b){"function"==typeof c&&c(a,b)}).then(function(a){var b=a&&a.body;l.default.setItem("fanapicache",{fan:b,id:b.id,timestamp:Date.now()})}).catch(function(){h.prototype.updateAutoStartCache(e)})},h.prototype.updateAutoStartCache=function(a){var b=a.videoAutoStart;l.default.getItem("fanapicache").then(function(a){var c=a&&a.fan,d=void 0;for(d in b)b.hasOwnProperty(d)&&(c.profile.settings.videoAutoStart[d]=b[d]);l.default.setItem("fanapicache",{fan:c,id:c.id,timestamp:Date.now()})}).catch(function(){})},h.prototype.getUidsForFanId=function(a,b){function c(a){return a.metaData.team||a.metaData.sport}function d(a){return a.metaData.team?a.metaData.team.uid:a.metaData.sport?a.metaData.sport.uid:null}return f(a).then(function(a){var b=a&&a.preferences;return b.filter(c).map(d)}).catch(function(){return[]}).tap(function(a){"function"==typeof b&&b(a)})},b.exports=h},{bluebird:22,localforage:27,"superagent-bluebird-promise":32}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./FanAPI"),f=d(e);b.exports=f.default},{"./FanAPI":37}],39:[function(a,b,c){"use strict";(function(){function a(a){if("string"==typeof a.data)return a.data;try{return String.fromCharCode.apply(null,a.data)}catch(b){return console.warn(b),a.data}}function c(a,b,c){var d,e;e="passThroughTracking",d=document.getElementById(e),d||(d=new Image,d.id=e,document.body.appendChild(d)),d.src=a+"&caid="+b+"&pvrn="+Date.now()+"&resp=ad;adid="+encodeURIComponent(c)+"&airing="+b+";ptgt=a&slau=midroll"}function d(){var b;b=function(){var b,d,e;d=this,b=function(){var f,g,h;return d.off("texttrackchange",b),f=d.textTracks(),h=f.length-1,h<0?void d.on("texttrackchange",b):(g=f[h],"metadata"!==g.kind?void d.on("texttrackchange",b):void g.addEventListener("cuechange",function(){var b,f;if(g.activeCues.length>0)for(var h=0;h<g.activeCues.length;h++)"com.espn.authnet.transition"===g.activeCues[h].value.owner&&(b=JSON.parse(a(g.activeCues[h].value)),"COMMERCIAL"===b.to.type?(f=b.to.id,f?f!==e?(e=f,c(d.mediainfo.passThroughBeaconURL,d.mediainfo.simulcastAiringId,f)):console.warn("APT: Skipping duplicate adID: "+f):console.warn("APT: No valid Ad ID available to send.")):e=null)}))},this.on("texttrackchange",b)},videojs.plugin("adPassThrough",b)}b.exports={init:d}}).call(void 0)},{}],40:[function(a,b,c){"use strict";(function(){var a,c;a=function(a,b){var c,d,e,f,g;return null==b&&(b=a),a=a<0?0:a,g=Math.floor(a%60),f=Math.floor(a/60%60),e=Math.floor(a/3600),d=Math.floor(b/60%60),c=Math.floor(b/3600),(isNaN(a)||a===1/0)&&(e=f=g="-"),e=e>0||c>0?e+":":"",f=((e||d>=10)&&f<10?"0"+f:f)+":",g=g<10?"0"+g:g,e+f+g},c=function(){var b,c,d,e,f;b=videojs.getComponent("Component"),c=videojs.getComponent("ControlBar"),e=videojs.getComponent("RemainingTimeDisplay"),d=videojs.extend(e,{constructor:function(a,b){return e.call(this,a,b)},createEl:function(){var a;return a=b.prototype.createEl.call(this,"div",{className:"vjs-ad-remaining-time vjs-time-control vjs-control"}),this.contentEl_=document.createElement("div"),this.contentEl_.classList.add("vjs-ad-remaining-time-display"),this.contentEl_.innerHTML='<span class="vjs-control">'+this.localize("Ad")+"</span> (0:00)",this.contentEl_.setAttribute("aria-live","off"),a.appendChild(this.contentEl_),a},updateContent:function(){var b,c;this.player_.duration()&&(c=this.localize("Ad"),b=a(this.player_.remainingTime()),b!==this.formattedTime_&&(this.formattedTime_=b,this.contentEl_.innerHTML='<span class="vjs-control">'+c+"</span> ("+b+")"))}}),b.registerComponent("AdRemainingTimeDisplay",d),c.prototype.options_.children.indexOf("adRemainingTimeDisplay")===-1&&(f=c.prototype.options_.children.indexOf("currentTimeDisplay"),c.prototype.options_.children.splice(f,0,"adRemainingTimeDisplay"))},b.exports={init:c}}).call(void 0)},{}],41:[function(a,b,c){"use strict";(function(){var a;a=function(){var a,b,c,d;return b=videojs.getComponent("Component"),d=videojs.getComponent("TextTrackMenuItem"),a=videojs.getComponent("CaptionsToggleButton"),c=videojs.extend(d,{constructor:function(a,b){var c;b.track={kind:b.kind,player:a,label:"<span>"+a.localize(b.label||"Caption Settings")+"</span>",selectable:!1,default:!1,mode:"disabled"},b.selectable=!1,d.call(this,a,b),this.addClass("vjs-texttrack-settings"),this.hide(),c=this.handleTracksChange.bind(this),a.on("texttrackchange",c),a.on("espn.captionchange",c),this.on("dispose",function(){a.off("texttrackchange",c),a.off("espn.captionchange",c)})},handleClick:function(){var a,b;return a=this.player_.$(".bcc-caption-settings"),a.classList.remove("vjs-hidden"),b=!this.player_.paused(),this.player_.addClass("vjs-caption-settings-active"),this.player_.pause(),this.player_.$(".vjs-done-button",a).addEventListener("click",function(){this.player_.removeClass("vjs-caption-settings-active"),b&&this.player_.play()}.bind(this)),a.focus()},handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide()},hasValidTracks:a.prototype.hasValidTracks}),b.registerComponent("CaptionSettingsMenuItem",c)},b.exports={init:a}}).call(void 0)},{}],42:[function(a,b,c){"use strict";(function(){var a,c,d,e;c=!1,a=function(){var a,b,d;b=videojs.getComponent("Component"),a=videojs.getComponent("Button"),d=videojs.extend(a,{constructor:function(b,c){var d;a.call(this,b,c),this.controlText(c&&c.controlText||this.localize("Closed Captions")),this.hide(),d=this.handleTracksChange.bind(this),b.on("texttrackchange",d),b.on("espn.captionchange",d),this.on("dispose",function(){b.off("texttrackchange",d),b.off("espn.captionchange",d)})},buildCSSClass:function(){return"evp-toggle-cc-button vjs-captions-button cc-disabled "+a.prototype.buildCSSClass.call(this)},handleClick:function(b){return this.toggleTracks(),a.prototype.handleClick.call(this,b)},createEl:function(b,c,d){return a.prototype.createEl.call(this,b,c,d)},handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide(),this.tracksEnabled()?this.el_.classList.remove("cc-disabled"):this.el_.classList.add("cc-disabled")},toggleTracks:function(){var a,b,c;for(c=this.player_.textTracks(),a=0,b=c.length;a<b;a++)if("captions"===c[a].kind){if("disabled"===c[a].mode){c[a].mode="showing";continue}"showing"===c[a].mode?c[a].mode="hidden":c[a].mode="showing"}this.player_.trigger("espn.captionchange")},tracksEnabled:function(){var a,b,c,d;for(d=this.player().textTracks(),b=!1,a=0,c=d.length;a<c;a++)if("captions"===d[a].kind){if("disabled"===d[a].mode){d[a].mode="showing",d[a].mode="hidden";continue}if("showing"===d[a].mode){b=!0;continue}}return b},kind_:"captions",hasValidTracks:function(){var a,b,c,d,e,f;for(f=this.player().textTracks()||[],b=this.handleTracksChange.bind(this),a=function(){this.removeEventListener("cuechange",a),b()},d=0,e=f.length;d<e;d++)if("captions"===f[d].kind){if(c=f[d].cues&&f[d].cues.length>0,!c)return f[d].addEventListener("cuechange",a),!1;if(c||f[d].label||f[d].language)return!0}return!1}}),b.registerComponent("CaptionsToggleButton",d),videojs.plugin("captionsToggleButton",e),c=!0},e=function(){var a;return a=this,a.ready(function(){var b;b=a.controlBar.children().map(function(a){return a.name()}).indexOf("settingsMenuButton"),a.controlBar.captionsToggleButton&&(a.controlBar.removeChild(a.controlBar.captionsToggleButton),delete a.controlBar.captionsToggleButton),a.controlBar.captionsButton&&a.controlBar.removeChild(a.controlBar.captionsButton),a.controlBar.captionsToggleButton=a.controlBar.addChild("captionsToggleButton",{},b-1)})},d=function(b){c||a(),b.captionsToggleButton()},b.exports={init:a,plugin:d}}).call(void 0)},{}],43:[function(a,b,c){"use strict";function d(){var a=videojs.getComponent("Component"),b=videojs.getComponent("LoadingSpinner"),c=videojs.extend(b,{constructor:function(a,c){b.call(this,a,c)},createEl:function(){return a.prototype.createEl.call(this,"div",{className:"vjs-loader active",dir:"ltr",innerHTML:'<div class="spinner-layer"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>'})}});a.registerComponent("LoadingSpinner",c)}b.exports={init:d}},{}],44:[function(a,b,c){"use strict";function d(){var a=videojs.getComponent("Component"),b=videojs.getComponent("SeekBar"),c=videojs.extend(b,{constructor:function(a,c){b.call(this,a,c)},createEl:function(){var a=b.prototype.createEl.call(this),c=document.createElement("div");return c.className="evp-progress-holder-wrapper",a.appendChild(c),a},handleMouseDown:function(a){b.prototype.handleMouseDown.call(this,a),this.scrubbingTime=this.calculateDistance(a),this.update()},handleMouseMove:function(a){this.scrubbingTime=this.calculateDistance(a),this.update()},handleMouseUp:function(a){var c=this.calculateDistance(a)*this.player_.duration();return c===this.player_.duration()&&(c-=.1),this.player_.currentTime(c),b.prototype.handleMouseUp.call(this,a)},getPercent:function(){var a=b.prototype.getPercent.call(this);return this.player_.scrubbing()&&(a=this.scrubbingTime||a),a>=1?1:a}});a.registerComponent("SeekBar",c)}b.exports={init:d}},{}],45:[function(a,b,c){
"use strict";function d(a){var b,c,d;d=this,b=function(){d.removeClass("evp-volume-menu-inactive"),d.addClass("evp-volume-menu-active")},c=function(){d.removeClass("evp-volume-menu-active"),d.addClass("evp-volume-menu-inactive")};var e=a||{},f=e.namespace||"espn",g=f+"-volume",j=f+"-mute";if(null!==e.value&&void 0!==e.value)h=e.value,localStorage.setItem(g,h);else{var k=localStorage.getItem(g);null!==k&&(h=k)}if(null!==e.muted&&void 0!==e.muted)i=e.muted===!0||"true"===e.muted,localStorage.setItem(j,i);else{var l=localStorage.getItem(j);null!==l&&(i="true"===l)}d.on("ads-request",function(){var a,e;a=d.childNameIndex_.adControlBar,e=d.FreeWheelPlugin,d.on("ads-ad-started",function(){d.volume(h),d.muted(i),"Flash"===e.tech&&e.adPlayer.volume(i?0:h)}),"Flash"===e.tech?e.adPlayer.on("volumechange",function(){"ad-playback"===d.ads.state&&(i&&!e.adPlayer.muted()?e.adPlayer.volume(h):e.adPlayer.muted()||(h=e.adPlayer.volume(),d.volume(h),localStorage.setItem(g,h)),i=e.adPlayer.muted(),d.muted(i),localStorage.setItem(j,i))}):"Html5"===e.tech&&d.on("adstart",function(){e.Html5._video.addEventListener("volumechange",function(){h=d.volume(),i=d.muted(),localStorage.setItem(g,h),localStorage.setItem(j,i)})}),d.on("contentplayback",function(){d.volume(h),d.muted(i)}),a&&a.volumeMenuButton&&(a.volumeMenuButton.on("mouseover",b),a.volumeMenuButton.on("mouseout",c))}),d.on("volumechange",function(){h=d.volume(),i=d.muted(),localStorage.setItem(g,h),localStorage.setItem(j,i)}),d.ready(function(){var a=d.controlBar.volumeMenuButton;a.on("mouseover",b),a.on("mouseout",c),d.volume(h),d.muted(i)})}function e(){videojs.plugin("espnVolumeMenuButton",d),g=!0}function f(a,b){g||e(),a.espnVolumeMenuButton(b)}var g,h,i;g=!1,h=1,i=!1,b.exports={init:e,plugin:f}},{}],46:[function(a,b,c){"use strict";function d(a){return"[object HTMLDivElement]"===Object.prototype.toString.call(a)}function e(a,b,c,d){var e=b,f=document.createElement("div");if(f.className="evp-endcard",e){f.innerHTML='<div class="evp-endcard-wrap"><h2>'+a.localize("Up Next")+'</h2><span class="evp-endcard-next-title">'+e.headline+"</span></div>";var h=document.createElement("div");h.className="evp-endcard-next-thumbnail";var i="evp-endcard-timer-circle_"+a.id(),j=document.createElement("span");j.className="evp-endcard-timeout-button",j.innerHTML='<svg width="54" height="54" class="evp-endcard-timer"><circle id="'+i+'" class="start-timer" r="23.57" cy="27" cx="27" stroke-width="4" stroke="#ffffff" fill="none"/></svg>',j.addEventListener("click",function(){l?c():d(!0)});var k=1,m=s;l=setInterval(function(){var a=document.getElementById(i);a&&(a.style.strokeDashoffset=o-k*(o/s)),m-=1,m<=0&&(g(),d(!1)),k++},1e3);var n=document.createElement("img");n.src=e.poster,h.appendChild(j),h.appendChild(n),f.appendChild(h)}return f}function f(a,b,c){var d=a.id,e=new m;e.getRelated(d,{country:b},function(b,d){if(b||!d||0===d.length)return void c(a);var e=(d||[]).filter(function(a){return r.indexOf(a.id)===-1&&r.indexOf(a.mediaId)===-1}),f=e.shift()||d&&d.shift();c(f||[])})}function g(){l&&(clearInterval(l),l=null)}function h(a){var b,c=this,h=a&&a.timeoutHandler||function(){};j=a&&a.content,k=a&&a.country,s=a&&a.timeout||n,d(j)&&(b=j);var i=function(){c.play()},l=function(){g(),c.removeClass("evp-endcard-timeout-active"),c.addClass("evp-endcard-timeout-stopped")},m=function(){g(),b&&c.el().removeChild(b),c.removeClass("evp-endcard-open"),c.removeClass("evp-endcard-timeout-active"),c.removeClass("evp-endcard-timeout-stopped"),b=null},o=function(){c.ads.state&&"content-playback"!==c.ads.state||(b?(c.el().appendChild(b),c.addClass("evp-endcard-open")):j&&(r.push(j.id),f(j,k,function(a){b=e(c,a,l,function(b){h(a,b)}),c.el().appendChild(b),c.addClass("evp-endcard-open"),c.addClass("evp-endcard-timeout-active")})),c.one("contentupdate",i),c.one("play",m),c.one("socialopened",l))},t=function a(){g(),c.off("dispose",a),c.off("switch",a),c.off("ended",o),c.off("play",m),c.off("contentupdate",i),c.off("socialopened",l),r=[],j=null,p=!1,q=!0};c.one("dispose",t),c.one("switch",t),q&&(q=!1,c.on("ended",o))}function i(){videojs.plugin("endcard",h),p=!0}var j,k,l,m=a("../../api/index"),n=5,o="180",p=!1,q=!0,r=[],s=n;b.exports={init:i}},{"../../api/index":9}],47:[function(a,b,c){b.exports={errors:{1:{headline:"MEDIA_ERR_ABORTED_HEADLINE",message:"MEDIA_ERR_ABORTED_MESSAGE"},2:{headline:"MEDIA_ERR_NETWORK_HEADLINE",message:"MEDIA_ERR_NETWORK_MESSAGE"},3:{headline:"MEDIA_ERR_DECODE_DEADLINE",message:"MEDIA_ERR_DECODE_MESSAGE"},4:{headline:"MEDIA_ERR_SRC_NOT_SUPPORTED_HEADLINE",message:"MEDIA_ERR_SRC_NOT_SUPPORTED_MESSAGE"},5:{headline:"MEDIA_ERR_ENCRYPTED_HEADLINE",message:"MEDIA_ERR_ENCRYPTED_MESSAGE"}}}},{}],48:[function(a,b,c){"use strict";function d(){var a=this,b=a.addChild("stateFeedbackButton");a.stateFeedbackButton=b,a.on("pause",function(){}),a.on("play",function(){})}function e(){var a=videojs.getComponent("Component"),b=videojs.getComponent("Button"),c=videojs.extend(b,{constructor:function(a,c){b.call(this,a,c)},createEl:function(){return a.prototype.createEl.call(this,"div",{className:"espn-player-state-feedback-button",innerHTML:""})}});a.registerComponent("StateFeedbackButton",c),videojs.plugin("stateFeedbackButton",d),g=!0}function f(a){g||e(),a.stateFeedbackButton()}var g=!1;b.exports={init:e,plugin:f}},{}],49:[function(a,b,c){"use strict";function d(){for(var a,b=this,c=b.controlBar.progressControl,d=c.el().childNodes,e=0;e<d.length;++e)if("vjs-thumbnail-holder"===d[e].className){a=d[e];break}if(a){var f=b.controlBar.progressControl.seekBar.mouseTimeDisplay,g=document.createElement("span");g.className="vjs-thumbnail-time-tooltip",a.appendChild(g);var h=function(){var a=f.el().getAttribute("data-current-time");g.innerHTML=a};c.on("mousemove",h),c.on("touchmove",h),f.addClass("vjs-time-tooltip-hidden")}}function e(a){videojs&&videojs.plugin("thumbnailTime",d),a.thumbnailTime()}b.exports={plugin:e}},{}],50:[function(a,b,c){"use strict";var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=a("lodash.debounce");(function(){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=function(a,b){return function(){return a.apply(b,arguments)}};B={}.hasOwnProperty,A=function(a,b){function c(){this.constructor=a}for(var d in b)B.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},p=a("../espn-player"),c=a("../../advertising"),f=a("../../analytics"),z=a("../../watermark"),w=a("../../social-espn-brightcove"),v=a("../../settingsmenu"),y=a("./ThumbnailTime"),q=a("./ESPNSeekBar"),o=a("./ESPNLoadingSpinner"),l=a("./ESPNAdRemainingTimeDisplay"),n=a("./ESPNCaptionsToggleButton"),m=a("./ESPNCaptionSettingsMenuItem"),x=a("./StateFeedbackButton"),s=a("./Endcard"),t=a("../../fan"),r=a("./ESPNVolumeMenuButton"),i=a("../../conviva"),k=a("./ESPNAdPassThrough"),h=a("../../cms"),u=a("../../i18n").translations(),j=a("./ErrorMessages.json"),g=function(a){function b(a,c){this.social=D(this.social,this),this.selectPlaylist=D(this.selectPlaylist,this);var d;b.__super__.constructor.call(this,a),this.debouncedSetSizeClass=e(this.setSizeClass.bind(this),250),c=c||{},q.init(),o.init(),l.init(),n.init(),m.init(),v.init(),s.init(),i.init(),k.init();for(C in u)videojs.addLanguage(C,u[C]);c.language&&["en","es"].indexOf(c.language)!==-1&&this.element.setAttribute("data-setup",'{ "language": "'+c.language+'" }'),videojs.IS_FIREFOX&&(c.watchId||c.channelId?videojs.options.hls={mode:"flash"}:videojs.options&&videojs.options.hls&&videojs.options.hls.mode&&(videojs.options.hls.mode=null)),d=this.player(window.bc(this.element)),this.element=d.el(),v.plugin(d),x.plugin(d),r.plugin(d,c.volume),n.plugin(d),d.ESPNCaptionSettings(),d.errors(j),d.load(),d.on("touchstart",function(){d.paused()&&d.usingNativeControls()&&d.play()}),d.on("adend",function(){d.removeClass("vjs-ad-loading")}),d.on(["contentplayback"],function(){d.one("mouseover",function(){d.el().classList.contains("not-hover")&&d.el().classList.remove("not-hover")})}),"userPreference"===c.autoplay?t.getAutoStart(function(a){c.autoplay=a,this.registerConfiguration(c)}.bind(this)):(c.autoplay="on"===c.autoplay||c.autoplay===!0,this.registerConfiguration(c)),this.startType=c.wasUserInitiated===!1?"autostart":"manual",f.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:this.startType}}}),d.on("ended",function(){d.ads.state&&"content-playback"!==d.ads.state||d.trigger("espn.contentended")}),d.on("loadstart",function(){var a;a=d.tech({IWillNotUseThisInPlugins:!0}).hls,a&&(a.xhr.beforeRequest=function(a){var b=new RegExp("prod-freewheel.*.m3u8|generateKey");b.test(a.uri)&&(a.withCredentials=!0)})}),d.ready(function(a){return function(){"video"!==a.originalElement.tagName.toLowerCase()&&a.originalElement.parentNode.replaceChild(a.element,a.originalElement),a.setSizeClass(),window.addEventListener("resize",a.debouncedSetSizeClass),d.hotkeys({enableVolumeScroll:!1})}}(this))}return A(b,a),b.prototype.mimeType=function(){return this.player().currentType()},b.prototype._useAdManager=!1,b.prototype.loadMidroll=function(a){var b,d;d=[{adUnit:"midroll",adBreak:a&&a.break_number?a.break_number:void 0,timePosition:this.player().currentTime()}],c.configure({assetId:this.advertisingId||this.id,live:!0,mimeType:this.mimeType()}),this._useAdManager?(b=c.adManager({},d),console.log(JSON.stringify(b)),"function"==typeof this.player().FreeWheelPlugin?this.player().FreeWheelPlugin(b):this.player().FreeWheelPlugin.settings=b):(b={serverUrl:c.vast({},d),requestMode:"ondemand"},this.preroll()&&"function"!=typeof this.player().ads&&"function"==typeof this.player().ima3&&(this.player().ads=Object.getPrototypeOf(this.player()).ads),"function"==typeof this.player().ima3&&this.player().ima3(b),this.player().ima3.adrequest(b.serverUrl))},b.prototype._midroll=!1,b.prototype.midroll=function(a){return null!=a&&(this._midroll=a),this._midroll},b.prototype.loadClips=function(a,b,c){var d;return c=c||this.clipSource,"string"==typeof a&&(a=a.split(",")),d=a.shift?a.shift():a,a&&a.length>0&&this.player().one("ended",function(b){return function(){return b.loadClips(a,!0,c)}}(this)),this.loadClip(d,b,c)},b.prototype.error=function(a){var b;b=this.player(),b.ready(function(){"object"===("undefined"==typeof a?"undefined":d(a))?b.error({headline:a.message,type:a.abbreviation}):b.error({headline:a,message:a})})},b.prototype.thumbnails=function(a){var b,c,d,e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAA+CAIAAABFt7lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuFJREFUeNrsmtGxIUEUhne3PJOATYAIdgPAOzYAJIAAxgaABBAAAkAARgCUAFYCRLBfzV/V1YXaO7eurboP//8wdabn9Dmnvz4940EhSZLj8fjF+rAKcEzT1CA+rm9GYJRGaZSWURqlURqlZZRGaZSWURqlURqlZZRGaZSWURqlURqlZZRGaZSWUX4ClNVq9Uem/1fK90whXbFYfO+sN0VMIv978KnPK1H+zjQcDs/nc85MvzLlLwXn1WolguR6mmW9Xt+NjEaj+Xyep/5qJozHLokHn/q8+IAnSdJqtWazWaPRYNl0KGQZl8EgFDSCgcOfTGocxnu9npyRHIQv7qnb7aYIMV9GdBqwy+Vy7KAO4kqQu+xcyajCGDydTgQPE1UzCr0v5/gohAg5z8c7UFI0JdbrdcrCYOs2mw2D0+l0v9+3223Ww1NGqJ7rz0xM3O12TCmVSlSGD3MZZ5YWINzSZDIhQniN8JRbguNMQOHgNviTaLvdsru48eguOw6aG7Yh3iEeMaIdxf9yuXAb9yMTqZmkivBilICgNyGoJiWN9pyt0xqWy6VwY4T9D1BwYK4aE4c7juh6vfb7/bAe/MGUpikHH1so478wqvtIrZaPsxNZrfe0pwCnZgeWepbCmBUfETLiQGSt8U0V8qMk0+M/MSmiUql0u13WQ/VUxrJZcKCMAaBOp6OTziOWgfN4PF4sFuzHXcA0k9Awl+biliXBlJG4s3SotWd6D9KhITsvUGyMw+Hw2BPgrtVqod0ISyiKp9R4aWqXnB/bvCjv3jXhVmecr4EaCpqsh6c8UsfhxpcBampkbQl1A0i9EGLir5hQZm3YGHQowXGWJ1O45ZUtIupZbAxuiRyyY7Af2HIIBWPoJU4c2ep0YeUNIx+uLGcwGMD3aQ896muz2fS/fv0T3SiN0jJKozRKo7SM0iiN0jJKozRKo7SM0iiN0jJKozRKo7SM0iiN0jJKo/z0+ivAAEPb6BambmykAAAAAElFTkSuQmCC";if("function"==typeof this.player().thumbnails)return b=this.player().controlBar.progressControl.el().querySelector(".vjs-thumbnail-holder"),b&&this.player().controlBar.progressControl.el().removeChild(b),c=this.player().thumbnails(a),b=this.player().controlBar.progressControl.el().querySelector(".vjs-thumbnail-holder"),d=b.querySelector("img"),d.addEventListener("error",function(){this.src=e}),y.plugin(this.player()),c},b.prototype.social=function(a){if(videojs.plugin("social",w),"function"==typeof this.player().social)return this.player().social(a)},b.prototype.watermark=function(){return new z(function(a){return function(b){return b.length||(b=[b]),a.player().overlay({overlays:b})}}(this))},b.prototype.endcard=function(a,b){var c=a._shield&&a._shield.country?a._shield.country:null,d={id:a.mediaId||a.id,headline:a.headline,poster:a.poster};this.player().endcard({content:d,country:c,timeoutHandler:function(a,b){this.startType=b?"manual:endcard_continuous":"endcard_continuous",f.configure({adobeDCR:{ESPN_CUSTOM_METADATA:{startType:this.startType}}}),this.loadClip(a.id,!0,a.source)}.bind(this),timeout:b&&b.timeout||null})},b.prototype.initAnalytics=function(){var a;a=this.player(),a.comscore&&(this.logConfigs("comscore",f.comscore()),a.comscore(f.comscore())),a.chartbeat&&(this.logConfigs("chartbeat",f.chartbeat()),a.chartbeat(f.chartbeat())),a.BCGSAdobeDCRPlugin&&(this.logConfigs("BCGSAdobeDCRPlugin",{options:f.adobeDCR()}),"function"==typeof a.BCGSAdobeDCRPlugin?a.BCGSAdobeDCRPlugin({options:f.adobeDCR()}):a.BCGSAdobeDCRPlugin.loadNewOptions&&"function"==typeof a.BCGSAdobeDCRPlugin.loadNewOptions&&a.BCGSAdobeDCRPlugin.loadNewOptions(f.adobeDCR()))},b.prototype.watchLoadedCallback=function(a){var c;c=this.player(),b.__super__.watchLoadedCallback.apply(this,arguments),!a&&c.mediainfo.listing&&"live"===c.mediainfo.listing.type&&c.on("play",function(){c.seekable().length>0&&c.currentTime(c.seekable().end(0))})},b.prototype.setSizeClass=function(){var a,b;a=this.player(),b=a&&a.dimension("width")||-1,b>=660?a.addClass("espn-endCard-large"):a.removeClass("espn-endCard-large"),b>=375&&b<=659?a.addClass("espn-endCard-medium"):a.removeClass("espn-endCard-medium"),b>=275&&b<=374?a.addClass("espn-endCard-small"):a.removeClass("espn-endCard-small"),b>=250&&b<=274?a.addClass("espn-endCard-xSmall"):a.removeClass("espn-endCard-xSmall"),b<=640?a.addClass("espn-player-medium"):a.removeClass("espn-player-medium"),b<=300?a.addClass("espn-player-small"):a.removeClass("espn-player-small"),b>=250&&b<=480?a.addClass("remove-time"):a.removeClass("remove-time"),b>=250&&b<=400?a.addClass("remove-duration"):a.removeClass("remove-duration")},b.prototype.dispose=function(){window.removeEventListener("resize",this.debouncedSetSizeClass),this.debouncedSetSizeClass.cancel&&this.debouncedSetSizeClass.cancel();var a=this.player();if(a)try{a.dispose()}catch(a){console.error(a)}b.__super__.dispose.apply(this,arguments)},b}(p),b.exports=g}).call(void 0)},{"../../advertising":5,"../../analytics":7,"../../cms":12,"../../conviva":15,"../../fan":17,"../../i18n":20,"../../settingsmenu":54,"../../social-espn-brightcove":57,"../../watermark":65,"../espn-player":51,"./ESPNAdPassThrough":39,"./ESPNAdRemainingTimeDisplay":40,"./ESPNCaptionSettingsMenuItem":41,"./ESPNCaptionsToggleButton":42,"./ESPNLoadingSpinner":43,"./ESPNSeekBar":44,"./ESPNVolumeMenuButton":45,"./Endcard":46,"./ErrorMessages.json":47,"./StateFeedbackButton":48,"./ThumbnailTime":49,"lodash.debounce":28}],51:[function(a,b,c){"use strict";(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o;c=a("../../api"),k=a("../../shield"),n=a("../../timeline-previews"),l=a("../../social"),e=a("../../advertising"),f=a("../../analytics"),g=a("../../authorizer"),m=a("../../stream-limiter"),i=a("../../config-logger"),d=a("../../ad-provider"),h=a("../../cms"),j=function(){function a(a){if("string"==typeof a&&(0===a.indexOf("#")&&(a=a.slice(1)),a=document.getElementById(a)),!a||!a.nodeName)throw new TypeError("The element or ID supplied is not valid.");this.originalElement=a,this.element="video"===a.tagName.toLowerCase()?a:document.createElement("video"),this.element.controls=!0,this.element.preload="metadata",this.element.className="evp-player video-js"}return a.prototype.registerConfiguration=function(a){if(null!=a)switch(this.options=a,this.clipSource=a.clipSource,a.advertising&&(e.configure(a.advertising),a.advertising.assetId&&(this.advertisingId=a.advertising.assetId)),a.analytics&&f.configure(a.analytics),a.api&&c.configure(a.api),null!=a.auth&&g.configure(a.auth),null!=a.autoplay&&this.autoplay(a.autoplay),null!=a.endcard&&(this.showEndCard=!!a.endcard),null!=a.preroll&&this.preroll(a.preroll),null!=a.postroll&&this.postroll(a.postroll),a.shield&&k.configure(a.shield),a.streamlimiter&&m.configure(a.streamlimiter),!1){case!a.adOnly:return this.advertisingId=a.advertising&&a.advertising.assetId,this.adOnly();case null==a.cerebroId:return this.id=a.cerebroId,this.loadShield(this.id,a.autoplay);case null==a.clipId:return this.id=a.clipId,this.loadClips(this.id,a.autoplay,this.clipSource);case null==a.watchId:return this.id=a.watchId,a.auth&&a.streamlimiter?this.loadListing(this.id,a.autoplay):console.error("Missing configuration data");case null==a.channelId:return this.id=a.channelId,a.auth&&a.streamlimiter?this.loadChannel(this.id,a.autoplay):console.error("Missing configuration data")}},a.prototype._player=void 0,a.prototype.player=function(a){return null!=a&&(this._player=a),this._player},a.prototype.autoplay=function(a){return this.player().autoplay(a)},a.prototype.play=function(){return this.player().play()},a.prototype.pause=function(){return this.player().pause()},a.prototype.poster=function(a){return this.player().poster(a)},a.prototype._preroll=!1,a.prototype.preroll=function(a){return null!=a&&(this._preroll=a),this._preroll},a.prototype._postroll=!1,a.prototype.postroll=function(a){return null!=a&&(this._postroll=a),this._postroll},a.prototype.id=void 0,a.prototype.advertisingId=void 0,a.prototype.metadata=void 0,a.prototype._duration=void 0,a.prototype.duration=function(a){return null!=a&&(this._duration=a),this._duration},a.prototype.mimeType=function(){},a.prototype.initAds=function(){},a.prototype.load=function(){},a.prototype.loadClip=function(a,b,d){var e;return this.clipId=a,null!=b&&this.autoplay(b),d=d||this.clipSource,e=new c({cms:d}),e.getClipThroughShield(a,this.clipLoadedCallback.bind(this))},a.prototype.loadClips=function(a,b,c){},a.prototype.loadShield=function(a,b){var c;return null!=b&&this.autoplay(b),c=new k,c.getClip(a,this.clipLoadedCallback.bind(this))},a.prototype.loadChannel=function(a,b){var d;return null!=b&&this.autoplay(b),d=new c,d.getChannel(a,function(a,b){o&&o.dispose(),this.logConfigs.call(this,"authorizer",g.configure(),b.id),o=new g,o.onStatusChange=this.watchLoadedCallback.bind(this),o.startSession(b)}.bind(this))},a.prototype.loadListing=function(a,b){var d;return null!=b&&this.autoplay(b),d=new c,d.getListing(a,function(a,b){o&&o.dispose(),this.logConfigs.call(this,"authorizer",g.configure(),b.id),o=new g,o.onStatusChange=this.watchLoadedCallback.bind(this),o.startSession(b)}.bind(this))},a.prototype.showEndCard=!0,a.prototype.adOnly=function(){this.duration(1),this.preroll(!0),this.autoplay(!0),new d(this.player(),{},this.options.adProviderOrder,function(a){this.player().src({src:"data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAA79tZGF0AAAC9AYF///w3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9MTIgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTEga2V5aW50PTI0MCBrZXlpbnRfbWluPTI0IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9MTAgcmM9Y3JmIG1idHJlZT0xIGNyZj01MS4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT0yMDAwMCB2YnZfYnVmc2l6ZT0yNTAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAADFliIQAbwTYb+YMExstjI/2DFAAAAMAAA94QCcYYsAAASkAtD1oHHXQk/QgAAADAHxBAAAACUGaJBiL/wAA/wAAAAhBnkJCfwAB6QAAAAgBnmFF/wAB8wAAAAgBnmNF/wAB8wAAAApBmmg0TET/AAEPAAAACkGehkURLP8AAekAAAAIAZ6lRf8AAfMAAAAIAZ6nRf8AAfMAAAAJQZqrNExfAAFTAAAACEGeykJfAAHpAAAACAGe6UX/AAHzAAADym1vb3YAAABsbXZoZAAAAADTQ/Pq00Pz6gAAA+gAAAHLAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAL1dHJhawAAAFx0a2hkAAAAD9ND8+rTQ/PqAAAAAQAAAAAAAAHLAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAGsAAAA8AAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAABywAAHVQAAQAAAAACbW1kaWEAAAAgbWRoZAAAAADTQ/Pq00Pz6gABX5AAAKFMVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAhhtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAHYc3RibAAAAJhzdHNkAAAAAAAAAAEAAACIYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAGsAPAASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADJhdmNDAU1AKP/hABpnTUAo7KDY/3zUBAQFAAADAAEAAr8gDxgxlgEABWjvgZcgAAAAQHN0dHMAAAAAAAAABgAAAAUAAA6qAAAAAQAADqkAAAADAAAOqgAAAAEAAA6pAAAAAQAADqoAAAABAAAAAAAAABRzdHNzAAAAAAAAAAEAAAABAAAAcGN0dHMAAAAAAAAADAAAAAEAAB1UAAAAAQAASVEAAAABAAAdVAAAAAEAAAAAAAAAAQAADqoAAAABAABJUAAAAAEAAB1UAAAAAQAAAAAAAAABAAAOqgAAAAEAADqnAAAAAQAAHVQAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAADAAAAAEAAABEc3RzegAAAAAAAAAAAAAADAAAAy0AAAANAAAADAAAAAwAAAAMAAAADgAAAA4AAAAMAAAADAAAAA0AAAAMAAAADAAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYXVkdGEAAABZbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAsaWxzdAAAACSpdG9vAAAAHGRhdGEAAAABAAAAAExhdmY1NC42LjEwMA==",type:"video/mp4"}),a.initAds({id:this.advertisingId||this.id,slots:{preroll:!0},duration:this.duration(),logger:this.logConfigs.bind(this)})}.bind(this))},a.prototype.clipLoadedCallback=function(a,b){var c,e;return e=this.player(),e.conviva&&(this.logConfigs("conviva",f.conviva()),e.conviva(f.conviva())),a?void this.error(a):(e.trigger("espn.clipfetched",{player:this,clip:b}),this.id=b.id,this.advertisingId=b.advertisingId,this.duration(b.duration),this.clipId=b.clipId,this.clipSource=b.clipSource,c=new h(this.clipSource),void new d(e,b,this.options.adProviderOrder,function(a){b.sources=a.sources,"function"==typeof this.mediainfo&&this.mediainfo(b),b.webVTT&&"function"==typeof e.addRemoteTextTrack&&e.addRemoteTextTrack({kind:"captions",language:"en",label:"Closed Captions",src:b.webVTT}),b.poster&&!this.autoplay()?this.poster(b.poster):this.poster("data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs="),this.showEndCard&&this.endcard&&this.endcard(b,this.options.endcard),"function"==typeof this.social&&new l(b,this.social,this.options.social),"function"==typeof this.thumbnails&&b.poster&&new n(this.id,b.HLS,this),e.trigger("espn.contentloaded",{id:this.id,clipId:this.clipId,mediainfo:e.mediainfo}),e.src(b.sources),a.initAds({networkId:c.adNetworkId?c.adNetworkId:null,id:this.advertisingId||this.id,slots:{preroll:this.preroll(),postroll:this.postroll()},duration:this.duration(),logger:this.logConfigs.bind(this)}),"function"==typeof this.initAnalytics&&this.initAnalytics()}.bind(this)))},a.prototype.watchLoadedCallback=function(a,b){var c,e;return e=this.player(),a?void this.error(a):(["broadcastStartTime","startTime","endTime"].forEach(function(a){var c;b._listing[a]&&(c=b._listing[a].replace("GMT","Z"),b[a]=b._listing[a]=new Date(c).toISOString())}),b._listing&&"live"===b._listing.type&&(b.duration=-1),void new d(e,b,this.options.adProviderOrder,function(a){return e.mediainfo&&e.mediainfo.id?(this.id=b.id,this.advertisingId=b.advertisingId||b.id,"function"==typeof this.mediainfo&&this.mediainfo(b),e.BCGSAdobeDCRPlugin&&e.BCGSAdobeDCRPlugin.completeLiveProgram&&"function"==typeof e.BCGSAdobeDCRPlugin.completeLiveProgram&&e.BCGSAdobeDCRPlugin.completeLiveProgram(),void e.trigger("espn.programchange",{id:b.id})):(this.id=b.id,this.advertisingId=b.advertisingId||b.id,"function"==typeof this.mediainfo&&this.mediainfo(b),this.poster(b.poster),e.trigger("espn.contentloaded",{id:this.id,mediainfo:e.mediainfo}),e.src({src:b.HLS,type:"application/x-mpegURL"}),a.initAds({id:this.advertisingId||this.id,slots:{preroll:this.preroll(),postroll:this.postroll()},logger:this.logConfigs.bind(this)}),"function"==typeof this.initAnalytics&&this.initAnalytics(),"function"==typeof e.adPassThrough&&e.adPassThrough(),this.logConfigs("streamlimiter",m.configure()),void(c=new m(this)))}.bind(this)))},a.prototype.logConfigs=function(a,b,c){return i(c||this.id,a,b)},a.prototype.dispose=function(){o&&o.dispose()},a.prototype.mediainfo=function(a){var b;return a&&(b={created_at:a.createDate||"",custom_fields:{},description:a.caption||"",duration:a.duration||"",id:""+(a.clipId||a.id)||"",name:a.assetName||a.name||"",pageTitle:a.pageTitle||a.headline+" - ESPN Video",poster:a.poster||"",publisher:a.publisher||"ESPN",published_at:a.publishDate||a.startTime||"",reference_id:a.cerebroId||"",site:a.site||"espncom",sources:a.sources||"",sport:a.sport||"",tags:a.keywords||"",updated_at:a.publishDate||""},a._clips&&(b.clip=a._clips),a._listing&&(b.listing=a._listing),a.simulcastAiringId&&(b.simulcastAiringId=a.simulcastAiringId),a.passThroughBeaconURL&&(b.passThroughBeaconURL=a.passThroughBeaconURL),a._shield&&a._shield.gameId!==-1&&(b.custom_fields.gameId=a._shield.gameId),a._shield&&a._shield.mediaType&&(b.custom_fields.mediaType=a._shield.mediaType),this.logConfigs("mediainfo",b),this.player().mediainfo=b,this.player().trigger("espn.mediainfoloaded",b)),this.player().mediainfo},a}(),b.exports=j}).call(void 0)},{"../../ad-provider":3,"../../advertising":5,"../../analytics":7,"../../api":9,"../../authorizer":10,"../../cms":12,"../../config-logger":13,"../../shield":56,"../../social":61,"../../stream-limiter":62,"../../timeline-previews":63}],52:[function(a,b,c){"use strict";function d(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../espn-player"),i=a("events").EventEmitter,j=a("../../analytics"),k=a("./native-omniture"),l=function(){function a(b){f(this,a),this.element=b,this.events=new i}return g(a,[{key:"autoplay",value:function(a){return a===!0?this.element.setAttribute("autoplay","autoplay"):this.element.removeAttribute("autoplay"),this}},{key:"poster",value:function(a){return this.element.setAttribute("poster",a),this}},{key:"src",value:function(a){var b=this;return a.map(function(a){var b=document.createElement("source");return b.setAttribute("src",a.src),b.setAttribute("type",a.type),b}).forEach(function(a){b.element.appendChild(a)}),this.element.load(),this.element.play(),this}},{key:"reset",value:function(){return this}},{key:"ready",value:function(){var a=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];return a.call(this),this}},{key:"on",value:function(){var a,b;return(a=this.element).addEventListener.apply(a,arguments),(b=this.events).on.apply(b,arguments),this}},{key:"off",value:function(){var a,b;return(a=this.element).removeListener.apply(a,arguments),(b=this.events).removeListener.apply(b,arguments),this}},{key:"trigger",value:function(){var a;return(a=this.events).emit.apply(a,arguments),this}},{key:"play",value:function(){return this.element.play(),this}},{key:"pause",value:function(){return this.element.pause(),this}},{key:"load",value:function(){return this.element.load(),this}},{key:"duration",value:function(){return this.element.duration}}]),a}(),m=function(a){function b(a,c){f(this,b);var e;c.adProviderOrder={desktop:["brightcove_once"],tablet:["brightcove_once"],mobile:["brightcove_once"]};var g=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return e=g.player(new l(g.element)),g.registerConfiguration(c),e.load(),"video"!==a.tagName.toLowerCase()&&a.parentNode.replaceChild(g.element,a),g}return e(b,a),g(b,[{key:"loadClips",value:function(a,b,c){var d;return c=c||this.clipSource,"string"==typeof a&&(a=a.split(",")),d=a.shift?a.shift():a,this.loadClip(d,b,c)}},{key:"initAnalytics",value:function(){var a;a=this.player(),new k(a,j.nativeOmniture({playerLocation:"foo",showCode:"bar",site:"espn"}))}}]),b}(h);b.exports=m},{"../../analytics":7,"../espn-player":51,"./native-omniture":53,events:25}],53:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){d(this,a),this.player=b,this.options=c,this.options.s_omni&&this.options.s_omni.visitor&&(this.options.s_omni.visitor.getAnalyticsVisitorID&&"function"==typeof this.options.s_omni.visitor.getAnalyticsVisitorID&&(this.aid=this.options.s_omni.visitor.getAnalyticsVisitorID()),this.options.s_omni.visitor.getMarketingCloudVisitorID()&&(this.mid=this.options.s_omni.visitor.getMarketingCloudVisitorID())),b.on("play",this.onPlay().bind(this)),b.on("ended",this.onEnded.bind(this))}return e(a,[{key:"fireTrackingBeacon",value:function(a){var b,c,d,e;this.img||(this.img=new Image,this.img.id="html5playerAnalytics",document.body.appendChild(this.img)),b=this.options.cmsId||this.player.mediainfo.name,d={pe:"media",c3:b,v2:b,events:a,v20:this.options.playerLocation+":"+this.options.showCode,c1:this.options.site},this.aid&&(d.aid=this.aid),this.mid&&(d.mid=this.mid),e=[];for(c in d)e.push(c+"="+encodeURIComponent(d[c]));this.img.src=(this.options.secure?"https":"http")+"://"+this.options.trackingServer+"/b/ss/"+this.options.reportSuites+"/5.4/REDIR/"+Date.now()+"?"+e.join("&")}},{key:"onPlay",value:function(){var a;a=this.player.duration(),this.fireTrackingBeacon("event1,event14="+(a&&a.toFixed(2)))}},{key:"onEnded",value:function(){this.fireTrackingBeacon("event11")}}]),a}();b.exports=f},{}],54:[function(a,b,c){"use strict";function d(){var a=videojs.getComponent("Component"),b=videojs.getComponent("MenuItem"),c=videojs.getComponent("MenuButton"),d=videojs.getComponent("CaptionSettingsMenuItem"),f=videojs.getComponent("CaptionsToggleButton"),i=videojs.extend(b,{contentElType:"checkbox",constructor:function(a,c){this.isSelected=!1,c.label="<span>"+a.localize("Autoplay")+"</span>",c.selectable=!0,b.call(this,a,c),g.getAutoStart(function(a){!this.el_||a!==!0&&a!==!1||(this.isSelected=a,this.selected(a))}.bind(this))}});i.prototype.handleClick=function(){this.isSelected=!this.isSelected,this.selected(this.isSelected),this.el_.querySelector("input").checked=this.isSelected,g.setAutoStart(this.isSelected)},i.prototype.createEl=function(a){return b.prototype.createEl.call(this,a,{innerHTML:this.localize(this.options_.label)+'<div class="toggle-btn sm"><input id="autoplay_toggle" class="toggle-input round" type="checkbox"><label for="autoplay_toggle"></label></div>'})};var j=videojs.extend(b,{contentElType:"checkbox",constructor:function(a,c){var d;this.isSelected=!0,c.label="<span>"+a.localize("Closed Caption")+"</span>",c.selectable=!0,b.call(this,a,c),this.hide(),d=this.handleTracksChange.bind(this),a.on("texttrackchange",d),a.on("espn.captionchange",d),this.on("dispose",function(){
a.off("texttrackchange",d),a.off("espn.captionchange",d)})},toggleTracks:f.prototype.toggleTracks,handleTracksChange:function(){this.hasValidTracks()?this.show():this.hide();var a=f.prototype.tracksEnabled.call(this);this.isSelected=a,this.selected(this.isSelected),this.el_.querySelector("input").checked=this.isSelected},hasValidTracks:f.prototype.hasValidTracks});j.prototype.handleClick=function(){this.toggleTracks(),this.handleTracksChange()},j.prototype.createEl=function(a){return b.prototype.createEl.call(this,a,{innerHTML:this.localize(this.options_.label)+'<div class="toggle-btn sm"><input id="captions_toggle" class="toggle-input round" type="checkbox"'+(this.isSelected?"checked ":"")+'><label for="captions_toggle"></label></div>'})};var k=videojs.extend(c,{constructor:function(a,b){c.call(this,a,b),a.on("mouseup",function(a){this.buttonPressed_&&!this.el().contains(a.target)&&this.unpressButton(!0)}.bind(this))},handleClick:function(){c.prototype.handleClick.call(this),this.player().toggleClass("vjs-settings-active")}});k.prototype.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-settings-control-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button",innerHTML:'<div class="vjs-control-text">'+this.localize("Settings")+"</div>",tabIndex:0},{role:"menuitem"})},k.prototype.pressButton=function(){return this.addClass("vjs-menu-open"),c.prototype.pressButton.call(this)},k.prototype.unpressButton=function(a){this.removeClass("vjs-menu-open"),this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),a||this.el_.focus())},k.prototype.createItems=function(){var a,b;return b=[],a=new i(this,{}),a.on("click",function(){}),b.push(a),b.push(new j(this.player_,{})),h||b.push(new d(this.player_,{kind:"captions"})),b},videojs.registerComponent("SettingsMenuButton",k),videojs.plugin("settingsMenu",e)}function e(){var a=this;a.ready(function(){var b=a.controlBar.children().map(function(a){return a.name()}).indexOf("fullscreenToggle");a.controlBar.settingsMenuButton&&(a.controlBar.removeChild(a.controlBar.settingsMenuButton),delete a.controlBar.settingsMenuButton),a.controlBar.settingsMenuButton=a.controlBar.addChild("settingsMenuButton",{},b-1)})}function f(a){a.settingsMenu()}var g=a("../fan"),h=/^((?!Chrome|Android).)*Safari/i.test(window.navigator&&window.navigator.userAgent);b.exports={init:d,plugin:f}},{"../fan":17}],55:[function(a,b,c){"use strict";(function(){b.exports={BASE_URL:"https://watch.auth.api.espn.com/video/auth",API_KEY:"5p8m6dw513q716wt2os04mec3"}}).call(void 0)},{}],56:[function(a,b,c){"use strict";(function(){var c,d,e,f,g,h,i,j;j=a("superagent"),c=a("../cms"),g=a("./config"),h=function(a,b){var c;for(c in b)i.call(b,c)&&(a[c]=b[c]);return a},i={}.hasOwnProperty,d=["cricinfo","deportes","domestic","soccerfc"],e={cricinfo:"cric",deportes:"deportes",domestic:"espn",soccerfc:"intl"},f=function(){function a(a){this.baseURL=a&&a.BASE_URL||g.BASE_URL,this.apiKey=a&&a.API_KEY||g.API_KEY}return a.prototype.getClip=function(a,b){var f;return f=this.baseURL+"/getclip/"+a,j.get(f).query({apikey:this.apiKey}).end(function(a,f){var g,h,i,j,k,l,m,n,o,p,q;if(a&&403===a.status&&f.body&&f.body.message){var r=f.body.message.split(":");if(r.length>0)return m=r[r.length-1].trim(),b(m,null)}return a?(m=a.response&&a.response.body&&a.response.body.error||a,b(m,null)):f.body&&f.body.clip?(q=f.body&&f.body.clip,g=q.transcodes&&q.transcodes.hls,h=q.transcodes&&q.transcodes.primary_mezzanine,p=Object.keys(q.syndicationDetails).filter(function(a){return d.indexOf(a)!==-1}).shift(),o=p&&q.syndicationDetails[p],k=o&&o.cms&&o.cms.syndicationId,l=new c(e[p]||p),n=[],g&&n.push({src:g,type:"application/x-mpegURL"}),h&&n.push({src:h,type:"video/mp4"}),j={_shield:q,advertisingId:l.adAssetId(k),assetName:q.assetName,caption:q.caption,cerebroId:q.id,clipId:k,clipSource:l.key,createDate:new Date(q.createDate).toISOString(),duration:q.durationSeconds,headline:q.headline,HLS:g,id:q.id,keywords:q.keywords&&q.keywords.split&&q.keywords.split(",\n"),mediaId:l.apiMediaId(k),MP4:h,ONCE:o&&o.brightcove&&o.brightcove.url,poster:q.transcodes&&q.transcodes.thumbnail,publishDate:new Date(q.publishDate).toISOString(),sources:n,sport:q.adTarget&&q.adTarget.sport,syndicatable:q.videoRights&&q.videoRights.socialSharing,web:o&&o.cms&&o.cms.url,webVTT:o&&o.threeplay&&o.threeplay.url},j._shield.device=f.body&&f.body.requestedBy&&f.body.requestedBy.device,j._shield.country=f.body&&f.body.requestedBy&&f.body.requestedBy.country,b(null,j)):(i=f.body&&f.body.authenticationStatus&&f.body.authenticationStatus.messages.shift(),console.warn(i),b(i,null))})},a}(),f.configure=function(a){return h(g,a),g},b.exports=f}).call(void 0)},{"../cms":12,"./config":55,superagent:33}],57:[function(a,b,c){"use strict";function d(b){var c=a("./socialbutton"),d=a("./socialoverlay"),e=this,f={title:"",description:"",url:"",offset:"00:00:00",services:{facebook:!0,twitter:!0,google:!1,tumblr:!1,pinterest:!1,linkedin:!1,email:!0},accountId:3948005062001},g=function(a){var b=videojs.mergeOptions(f,a);if(!(b&&b.services&&(b.services.facebook||b.services.twitter||b.services.google||b.services.tumblr||b.services.pinterest||b.services.linkedin||b.services.email)))throw new Error("videojs-social requires at least one service to be enabled");e.controlBar.socialButtonESPN&&(e.controlBar.removeChild(e.controlBar.socialButtonESPN),delete e.controlBar.socialButtonESPN,e.socialOverlayESPN&&(e.removeChild(e.socialOverlayESPN),delete e.socialOverlayESPN));var c=e.controlBar.children().map(function(a){return a.name()}).indexOf("customControlSpacer")+1;e.controlBar.socialButtonESPN=e.controlBar.addChild("socialButtonESPN",b,c),e.socialOverlayESPN=e.addChild("socialOverlayESPN",b),e.controlBar.socialButtonESPN.el().setAttribute("tabindex",0)};videojs.registerComponent("SocialButtonESPN",c),videojs.registerComponent("SocialOverlayESPN",d),g(b)}b.exports=d},{"./socialbutton":58,"./socialoverlay":59}],58:[function(a,b,c){"use strict";var d=videojs.extend(videojs.Button,{constructor:function(a,b){a.socialButtonESPN&&a.controlBar.removeChild(a.socialButtonESPN),videojs.Button.call(this,a,b),this.on("touchstart",function(b){b.preventDefault(),a.socialOverlayESPN.show(),a.addClass("vjs-share-open").removeClass("vjs-controls-disabled")}),this.on("click",function(){a.socialOverlayESPN.show(),a.addClass("vjs-share-open").removeClass("vjs-controls-disabled")})},createEl:function(){return videojs.Button.prototype.createEl.call(this,"button",{className:"vjs-share-control vjs-control vjs-icon-share vjs-button",innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+this.player().localize("Share")+"</span></div>"},{"aria-live":"polite"})}});b.exports=d},{}],59:[function(a,b,c){"use strict";var d=a("superagent"),e=videojs.extend(videojs.Component,{constructor:function(a,b){a.socialOverlayESPN&&a.removeChild(a.socialOverlayESPN),videojs.Component.call(this,a,b),this._bindServiceButtons(b.services),this.directLinkTextBox=this.el().querySelector("#direct-link-textbox"),this.directLinkCopy=this.el().querySelector("#direct-link-copy"),this.directLinkCopyIcon=this.el().querySelector("#directLink"),this.offsetTextBox=this.el().querySelector("#start-offset-textbox"),this.offsetCheckBox=this.el().querySelector("#start-offset-checkbox"),this.embedCodeTextBox=this.el().querySelector("#embed-code-textbox"),this.embedCodeCopy=this.el().querySelector("#embed-code-copy"),this.embedCodeCopyIcon=this.el().querySelector("#embedLink"),this.socialLinksInputContainer=this.el().querySelector(".vjs-social-links-input-container"),this.socialLinksInputLabel=this.el().querySelector("#social-links-input-label"),this.socialLinksTextBox=this.el().querySelector("#social-links-textbox"),this.emailFrom=this.el().querySelector("#email-from"),this.emailTo=this.el().querySelector("#email-to"),this.emailMessage=this.el().querySelector("#email-message"),this.emailSend=this.el().querySelector("#email-send"),this.backButton=this.el().querySelector(".vjs-social-back"),document.queryCommandSupported("copy")===!1&&Array.prototype.forEach.call(this.el().querySelectorAll(".social-copy-link"),function(a){a.parentNode.removeChild(a)});var c=this;Array.prototype.forEach.call(this.el().querySelectorAll("svg"),function(a){a.addEventListener("click",function(a){var b=a.target;"copy-svg"===b.getAttribute("data-behavior")&&c._handleCopy(b)})}),this.on("keydown",function(b){"none"!==a.socialOverlayESPN.el().display&&27===b.keyCode&&(a.socialOverlayESPN.hide(),a.removeClass("vjs-share-open"))}),this.on("keyup",function(a){a.target!==this.emailTo&&a.target!==this.emailFrom||this._emailFormChange()}),this.on("click",function(b){var c=b.target,d=b.target.getAttribute("data-behavior"),e=c.className&&"string"==typeof c.className?c.className:"";e.indexOf("vjs-social-cancel")!==-1?(a.socialOverlayESPN.hide(),a.removeClass("vjs-share-open")):"copy"===d?(b.preventDefault(),this._handleCopy(c)):c===this.offsetCheckBox?(c.value="0"===c.value?"1":"0",this.updateState(),this._resetDirectLinkState()):c===this.emailSend&&c.disabled===!1?(b.preventDefault(),this._sendEmail()):c===this.backButton?a.socialOverlayESPN.removeClass("show-email"):"show-email"===d||"default"===d&&(this._resetEmbedCodeState(),this._resetDirectLinkState(),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-shown",""))})},createEl:function(){var a=this.player(),b=this.options_;return videojs.Component.prototype.createEl.call(this,"div",{className:"vjs-social-overlay vjs-modal-dialog vjs-hidden",tabindex:-1,innerHTML:'<div class="vjs-social-container" tabindex="0"><button class="vjs-close-button vjs-control vjs-icon-cancel vjs-button vjs-social-cancel"><span class="vjs-control-text" aria-label="'+a.localize("Close button")+'">'+a.localize("Close")+'</span></button><div class="vjs-modal-dialog-content" role="document"><form class="social-form"><div class="vjs-social-share-links">'+this._addSocialButtons(b.services)+'<div class="vjs-social-links-input-container"><label id="social-links-input-label" class="vjs-social-label-text" for="social-links-textbox">'+a.localize("URL")+'</label><input id="social-links-textbox" class="social-links-textbox" type="text" tabindex="10" readonly="true" value=""></div></div><div class="vjs-social-direct-link-container vjs-social-direct-link" aria-label="Read Only: Direct Link To Content"><div class="direct-link-header-container"><label class="vjs-social-label-text" for="direct-link-textbox">'+a.localize("URL")+'</label><input type="checkbox" id="start-offset-checkbox" value="0"><label for="start-offset-checkbox">'+a.localize("Start at")+'</label><input id="start-offset-textbox" class="start-offset-textbox" type="text" title="The offset must be specified using the following pattern: hh:mm:ss" placeholder="hh:mm:ss" maxlength="10" value="00:00:00"><a data-behavior="copy" href="#" id="direct-link-copy" class="social-copy-link">'+a.localize("Copy")+'</a></div><input id="direct-link-textbox" class="direct-link-textbox has-link-icon" type="text" tabindex="8" readonly="true" value=""></div><div class="vjs-social-embed-container vjs-social-embed-code" aria-label="Read Only: Embed Code" style="'+(b.syndicatable?"":"display: none;")+'"><div class="direct-link-header-container"><label for="embed-code-textbox" class="vjs-social-label vjs-social-label-text">'+a.localize("Embed Code")+'</label><a data-behavior="copy" href="#" id="embed-code-copy" class="social-copy-link">'+a.localize("Copy")+'</a></div><input id="embed-code-textbox" class="embed-code-textbox has-link-icon" type="text" tabindex="10" readonly="true" value=""></div></form></div></div><div class="vjs-social-container"><button class="vjs-back-button vjs-icon-back vjs-control vjs-button vjs-social-back"><span class="vjs-control-text" aria-label="'+a.localize("Back button")+'">'+a.localize("Back")+'</span></button><button class="vjs-close-button vjs-control vjs-icon-cancel vjs-button vjs-social-cancel"><span class="vjs-control-text" aria-label="'+a.localize("Close button")+'">'+a.localize("Close")+'</span></button><div class="vjs-modal-dialog-content" role="document"><form class="social-form"><div class="vjs-social-share-links has-txt">'+this._addSocialButtons({email:!0})+'</div><div class="vjs-social-email-from-container from-container" aria-label="'+a.localize("Email From")+'"><div class="email-from-header-container"><label class="vjs-social-label-text" for="email-from">'+a.localize("From")+'</label></div><input id="email-from" class="email-from-textbox" type="text" tabindex="8" value=""></div><div class="vjs-social-email-to-container to-container" aria-label="'+a.localize("Email To")+'"><div class="email-to-header-container"><label class="vjs-social-label-text" for="email-to">'+a.localize("To")+'</label></div><input id="email-to" class="email-to-textbox" type="text" tabindex="8" value=""></div><div class="vjs-social-email-message-container" aria-label="'+a.localize("Email Message Contents")+'"><div class="email-message-header-container"><label class="vjs-social-label-text" for="email-to">'+a.localize("Message")+'</label></div><textarea id="email-message" class="email-message-textbox" type="text" tabindex="8" value=""></textarea><button id="email-send" class="vjs-email-send-button vjs-button disabled" tabindex="8" disabled><span class="vjs-control-text" aria-label="'+a.localize("Send")+'">'+a.localize("Send")+"</span></button></div></form></div></div>"},{"aria-role":"dialog","aria-label":a.localize("Sharing Dialog")})},clearState:function(){this.offsetCheckBox.value="0",this.offsetCheckBox.checked=!1,this._clearEmailForm(),this.player().socialOverlayESPN.removeClass("show-email"),this._resetEmbedCodeState(),this._resetDirectLinkState(),this.directLinkTextBox.value=this._getDirectLinkWithTime(!1)},updateState:function(){var a=this.player(),b=this.options_,c="1"===this.offsetCheckBox.value;c?this.offsetTextBox.className+=" offset-active":this.offsetTextBox.className=this.offsetTextBox.className.replace(/ offset-active/,"");var d=a.ads&&"ad-playback"!==a.ads.state?this._formatSeconds(a.currentTime()):"00:00";this.offsetTextBox.value=d,b.syndicatable&&(this.embedCodeTextBox.value=this._getEmbedCode()),this.directLinkTextBox.value=this._getDirectLinkWithTime(c),this._bindServiceButtons(b.services)},hide:function(){videojs.Component.prototype.hide.call(this);var a=this.player();a.trigger("socialclosed"),a.controls(!0),this.clearState(),this.previouslyPlaying&&setTimeout(function(){a.play()}.bind(this),0),a.socialOverlayESPN.removeClass("show-email"),a.controlBar.socialButtonESPN.el().focus()},show:function(){videojs.Component.prototype.show.call(this);var a=this.player();a.trigger("socialopened"),this.updateState(),a.controls(!1),a.paused()||(this.previouslyPlaying=!0,a.pause()),this.el().querySelector(".vjs-social-share-links a:first-child").focus()}});e.prototype._clearEmailForm=function(){this.emailTo.value="",this.emailFrom.value="",this.emailMessage.value="",this.player().socialOverlayESPN.removeClass("email-sent")},e.prototype._emailFormChange=function(){function a(a){var b=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)}var b=this.emailTo.value;return this.emailFrom.value.length>0&&b.length>0&&a(b)?(this.emailSend.className=this.emailSend.className.replace(/ disabled/,""),void(this.emailSend.disabled=!1)):void(this.emailSend.className.indexOf("disabled")===-1&&(this.emailSend.className+=" disabled",this.emailSend.disabled=!0))},e.prototype._getMailToLink=function(){var a=this.options_,b=a.mailToLink,c=this._getDirectLinkWithTime(!1),d=this.player().localize("Check out this video on ESPN");return b=b.replace("{{subject}}",encodeURIComponent(a.title)).replace("{{body}}",d+": "+encodeURIComponent(c))},e.prototype._sendEmail=function(){var a=this.player(),b=this.options_,c=b.sendMailUrl,e=this;c=c.replace("{{id}}",encodeURIComponent(b.id)).replace("{{clipName}}",encodeURIComponent(b.description)).replace("{{youremail}}",encodeURIComponent(this.emailFrom.value)).replace("{{friendemail}}",encodeURIComponent(this.emailTo.value)).replace("{{message}}",encodeURIComponent(this.emailMessage.value)).replace("{{videoImage}}",encodeURIComponent(b.poster)),d.post(c).end(function(b,c){e._clearEmailForm(),a.socialOverlayESPN.el().className+=" email-sent",setTimeout(function(){a.socialOverlayESPN.removeClass("email-sent")},5e3)})},e.prototype._resetEmbedCodeState=function(){var a=this.player();this.embedCodeCopy.className=this.embedCodeCopy.className.replace(/ copied/,""),this.embedCodeCopyIcon.parentNode.className=this.embedCodeCopyIcon.parentNode.className.replace(/ copied/,""),this.embedCodeCopy.textContent=a.localize("Copy")},e.prototype._resetDirectLinkState=function(){var a=this.player();this.directLinkCopy.className=this.directLinkCopy.className.replace(/ copied/,""),this.directLinkCopyIcon.parentNode.className=this.directLinkCopyIcon.parentNode.className.replace(/ copied/,""),this.directLinkCopy.textContent=a.localize("Copy")},e.prototype._setSocialLinksInput=function(a){this.socialLinksTextBox.value=a,this.socialLinksInputContainer.className+=" social-input-container-shown",this.socialLinksTextBox.select()},e.prototype._handleCopy=function(a){var b=a===this.embedCodeCopyIcon,c=a===this.embedCodeCopy,d=a===this.directLinkCopyIcon,e=a===this.directLinkCopy,f=this.player();this._resetEmbedCodeState(),this._resetDirectLinkState(),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-hidden",""),this.socialLinksInputContainer.className=this.socialLinksInputContainer.className.replace("social-input-container-shown",""),e?this.directLinkTextBox.select():c&&this.embedCodeTextBox.select(),d||e?this._setSocialLinksInput(this.directLinkTextBox.value):(b||c)&&this._setSocialLinksInput(this.embedCodeTextBox.value),this.socialLinksInputLabel.textContent=b||c?this.player().localize("Embed Code"):this.player().localize("URL");try{document.execCommand("copy")&&(c||b?(this.embedCodeCopy.className+=" copied",this.embedCodeCopy.textContent=this.embedCodeCopy.className.indexOf("copied")!==-1?f.localize("Copied"):f.localize("Copy"),this.embedCodeCopyIcon.parentNode.className+=" copied"):(e||d)&&(this.directLinkCopy.className+=" copied",this.directLinkCopy.textContent=this.directLinkCopy.className.indexOf("copied")!==-1?f.localize("Copied"):f.localize("Copy"),this.directLinkCopyIcon.parentNode.className+=" copied"))}catch(a){console.error("Oops, unable to copy",a)}},e.prototype._bindServiceButtons=function(a){var b,c,d,e,f,g=this.options_,h=this.player().poster();c=encodeURIComponent(this._getUrl()),d=encodeURIComponent(this._getTitle()),e=encodeURIComponent(g.description),h&&(f=encodeURIComponent(h));for(b in a)a[b]===!0&&this._bindServiceButton(b,c,d,e,f)},e.prototype._bindServiceButton=function(a,b,c,d,e){switch(a){case"facebook":this._attachServiceButtonHandler(".vjs-icon-facebook","https://www.facebook.com/sharer/sharer.php?u={URL}&title={TITLE}".replace("{URL}",b).replace("{TITLE}",c));break;case"google":this._attachServiceButtonHandler(".vjs-icon-gplus","https://plus.google.com/share?url={URL}".replace("{URL}",b));break;case"twitter":this._attachServiceButtonHandler(".vjs-icon-twitter","https://twitter.com/intent/tweet?original_referer=https%3A%2F%2Fabout.twitter.com%2Fresources%2Fbuttons&text={TITLE}&tw_p=tweetbutton&url={URL}".replace("{URL}",b).replace("{TITLE}",c));break;case"tumblr":this._attachServiceButtonHandler(".vjs-icon-tumblr","http://www.tumblr.com/share?v=3&u={URL}&t={TITLE}".replace("{URL}",b).replace("{TITLE}",c));break;case"pinterest":this._attachServiceButtonHandler(".vjs-icon-pinterest","https://pinterest.com/pin/create/button/?url={URL}{POSTER}&description={TITLE}&is_video=true".replace("{URL}",b).replace("{TITLE}",c).replace("{POSTER}",e?"&media="+e:""));break;case"linkedin":this._attachServiceButtonHandler(".vjs-icon-linkedin","https://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TITLE}&summary={DESCRIPTION}&source=Classic".replace("{URL}",b).replace("{TITLE}",c).replace("{DESCRIPTION}",d));break;case"email":this._attachServiceButtonHandler(".vjs-icon-email",this._getMailToLink());break;case"directlink":this._attachServiceButtonHandler(".vjs-icon-directlink");break;case"embed":this._attachServiceButtonHandler(".vjs-icon-embed");break;default:throw new Error("An unsupported social service was specified.")}},e.prototype._handleServiceButtonClick=function(a){var b=a.target.getAttribute("data-behavior");"show-email"!==b&&a.preventDefault(),"default"===b&&window.open(a.target.href,"_blank","width=600, height=400, top=100, left=100, titlebar=yes, modal=yes, resizable=yes, toolbar=no, status=1, location=no, menubar=no, centerscreen=yes")},e.prototype._getEmbedCode=function(){var a=this.options_.embedCode;return a},e.prototype._getUrl=function(){var a,b=this.options_;return a=b.url?b.url:window.parent!=window?document.referrer:window.location.href},e.prototype._getDirectLinkWithTime=function(a){var b,c=this._getUrl();if(a&&(b=this.offsetTextBox.value),b){for(var d=b.split(":"),e="",f="",g=0,h=d.length;g<h;g++){switch(g){case 0:f="s";break;case 1:f="m";break;case 2:f="h"}e=d.pop()+f+e}var i=c.indexOf("?")!==-1?"&":"?";c=c+i+"t="+e}return c},e.prototype._getTitle=function(){var a,b=this.options_,c=b.title;return c||(a=this.player().options_,a["data-media"]&&a["data-media"].title&&(c=a["data-media"].title)),c||""},e.prototype._attachServiceButtonHandler=function(a,b){var c=this.el().querySelector(a);c&&(c.player=this,c.href=b||"#",c.removeEventListener("touchend",this._handleServiceButtonClick,!1),c.addEventListener("touchend",this._handleServiceButtonClick,!1),c.removeEventListener("click",this._handleServiceButtonClick,!1),c.addEventListener("click",this._handleServiceButtonClick,!1))},e.prototype._addSocialButtons=function(a){var b,c;b="";for(c in a)a[c]===!0&&(b+=this._addServiceButton(c));return b},e.prototype._addServiceButton=function(a){var b=this.player(),c="";switch(a){case"facebook":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-facebook" aria-role="link" aria-label="Share on Facebook" tabindex="1" title="Facebook" target="_blank"><span class="vjs-control-text">Facebook</span></a>';break;case"google":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-gplus" aria-role="link" aria-label="Share on Google Plus" tabindex="2" title="Google+" target="_blank"><span class="vjs-control-text">Google+</span></a>';break;case"twitter":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-twitter" aria-role="link" aria-label="Share on Twitter" tabindex="3" title="Twitter" target="_blank"><span class="vjs-control-text">Twitter</span></a>';break;case"tumblr":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-tumblr" aria-role="link" aria-label="Share on Tumblr" tabindex="4" title="Tumblr" target="_blank"><span class="vjs-control-text">tumblr</span></a>';break;case"pinterest":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-pinterest" aria-role="link" aria-label="Share on Pinterest" tabindex="5" title="Pinterest" target="_blank"><span class="vjs-control-text">Pinterest</span></a>';break;case"linkedin":c='<a data-behavior="default" class="vjs-social-share-link vjs-icon-linkedin" aria-role="link" aria-label="Share on LinkedIn" tabindex="6" title="LinkedIn" target="_blank"><span class="vjs-control-text">LinkedIn</span></a>';break;case"email":c='<a data-behavior="show-email" class="vjs-social-share-link vjs-icon-email" aria-role="link" aria-label="Share via Email" tabindex="7" title="Email"><span class="vjs-control-text">'+b.localize("Email")+"</span></a>";break;case"directlink":c='<a class="vjs-social-share-link vjs-icon-directlink" aria-role="link" aria-label="Direct link" tabindex="8" title="Direct Link"><svg data-behavior="copy-svg" id="directLink" x="0px" y="0px" viewBox="119.1 223.8 356.4 359.4" enable-background="new 119.1 223.8 356.4 359.4" xml:space="preserve"><path fill="#FFFFFF" d="M290.9,310.1c-10.4,10.4-14.9,22.3-14.9,35.7c0,13.4,4.5,26.8,13.4,37.2l17.9-17.9 c-4.5-6-7.4-11.9-7.4-19.3c0-7.4,3-13.4,7.4-19.3l69.9-69.9c6-6,11.9-7.4,19.3-7.4s14.9,3,19.3,7.4l26.8,26.8 c6,6,7.4,11.9,7.4,19.3c0,7.4-3,14.9-7.4,19.3l-69.9,69.9c-6,6-11.9,7.4-19.3,7.4c-7.4,0-13.4-3-19.3-7.4l-16.4,19.3 c10.4,8.9,22.3,13.4,37.2,13.4c13.4,0,26.8-6,35.7-14.9l69.9-69.9c10.4-10.4,14.9-22.3,14.9-37.2c0-14.9-6-26.8-14.9-37.2 l-26.8-26.8c-10.4-10.4-22.3-14.9-37.2-14.9c-14.9,0-26.8,4.5-37.2,14.9L290.9,310.1z"/><path fill="#FFFFFF" d="M243.3,440.3c-4.5,4.5-6,11.9,0,17.9c4.5,4.5,13.4,4.5,17.9,0l91.5-91.5c4.5-4.5,4.5-13.4,0-17.9 c-6-6-13.4-4.5-17.9,0L243.3,440.3z"/><path fill="#FFFFFF" d="M133.9,467.1c-10.4,10.4-14.9,22.3-14.9,37.2s4.5,26.8,14.9,37.2l26.8,26.8 c10.4,10.4,22.3,14.9,37.2,14.9s26.8-6,37.2-14.9l69.9-69.9c10.4-10.4,14.9-22.3,14.9-35.7s-4.5-26.8-13.4-37.2l-19.3,16.4 c6,6,7.4,11.9,7.4,19.3c0,7.4-3,13.4-7.4,19.3l-69.9,69.9c-6,6-11.9,7.4-19.3,7.4c-7.4,0-14.9-3-19.3-7.4l-26.8-26.8 c-6-4.5-7.4-11.9-7.4-19.3c0-7.4,3-14.9,7.4-19.3l69.9-69.9c6-6,11.9-7.4,19.3-7.4c7.4,0,13.4,3,19.3,7.4l17.9-17.9 c-10.4-10.4-22.3-14.9-37.2-13.4c-13.4,0-26.8,6-35.7,14.9L133.9,467.1z"/></svg><span class="vjs-control-text">Copy Link</span></a>';break;case"embed":c='<a class="vjs-social-share-link vjs-icon-embed" aria-role="link" aria-label="Embed link" tabindex="9" title="Embed"><svg data-behavior="copy-svg" id="embedLink" x="0px" y="0px" viewBox="119.1 293 357.2 256" enable-background="new 119.1 293 357.2 256" xml:space="preserve"><path fill="#FFFFFF" d="M476.2,423.2l-81.1,81.1l-9.7-9.7l70.7-71.4l-70.7-70.7l9.7-9.7L476.2,423.2z"/><polygon fill="#FFFFFF" points="261.9,548.9 249.3,546 326.7,293 339.3,295.2  "/><path fill="#FFFFFF" d="M119.1,423.2l81.1-80.4l9.7,9.7l-70.7,70.7l70.7,71.4l-9.7,9.7L119.1,423.2z"/></svg></span><span class="vjs-control-text">Copy Embed Link</span></a>';break;default:throw new Error("An unsupported social service was specified.")}return c},e.prototype._formatSeconds=function(a){var b=Number(a),c=Math.floor(b/3600),d=Math.floor(b%3600/60),e=Math.floor(b%3600%60);return c=c>0?(c<10?"0"+c:c)+":":"",d=(d>0?d<10?"0"+d:d:"00")+":",e=e<10?"0"+e:e,c+d+e},b.exports=e},{superagent:33}],60:[function(a,b,c){"use strict";(function(){b.exports={mailToLink:"mailto:?subject={{subject}}&body={{body}}",sendMailUrl:"http://proxy.espn.com/videohub/player/sendMail?id={{id}}&clipName={{clipName}}&youremail={{youremail}}&friendemail={{friendemail}}&message={{message}}&videoImage={{videoImage}}",embedCode:'<iframe src="http://www.espn.com/core/video/iframe?id={{ID}}&endcard=false" allowfullscreen frameborder="0"></iframe>',embedUrlTemplate:"//players.brightcove.net/{{account_id}}/{{player_id}}_{{embed_id}}/index.html{{video_id}}{{offset}}",deeplinking:!0,services:{facebook:!0,google:!1,twitter:!0,tumblr:!1,pinterest:!1,linkedin:!1,email:!0,directlink:!0,embed:!0}}}).call(void 0)},{}],61:[function(a,b,c){"use strict";(function(){var c,d,e,f;e=function(a,b){var c;for(c in b)f.call(b,c)&&(a[c]=b[c]);return a},f={}.hasOwnProperty,d=a("./config"),c=function(){function a(a,b,c){var f,g=e({},d);c&&e(g,c),f=a._shield,g.id=f&&f.site?f.site+":"+a.advertisingId:a.id,g.title=a.headline,g.description=a.caption,g.url=g.url||a.web,g.poster=a.poster,g.embedCode=g.embedCode.replace(/{{ID}}/g,a.clipId),g.syndicatable=a.syndicatable,b(g)}return a}(),b.exports=c}).call(void 0)},{"./config":60}],62:[function(a,b,c){"use strict";(function(){var c,d,e,f,g,h;h=a("superagent"),c=a("../api"),e={baseURL:"https://streams.adobeprimetime.com/v1/"},f=function(a,b){var c;for(c in b)g.call(b,c)&&(a[c]=b[c]);return a},g={}.hasOwnProperty,d=function(){function a(a,b){var d;f(e,b),this.accountId=e.accountId,this.baseURL=e.baseURL,this.player=a,d=new c,d.getProvidersByClient("watchespn-flash",function(a){return function(b,c){if(a.mvpd=c.filter(function(a){return a.abbreviation===e.mvpd})[0],a.accountId&&a.mvpd&&a.mvpd.streamLimiting&&a.mvpd.abbreviation)return a.heartbeat=a.mvpd.streamLimiting.heartbeat,a.statusCheck=a.mvpd.streamLimiting.statusCheck,a.streamLimit=a.mvpd.streamLimiting.streamLimit||3,a.statusCheck.url=""+a.baseURL+a.mvpd.streamLimiting.context+"/"+a.mvpd.abbreviation+"/accounts/"+a.accountId+"/streams",h.post(a.statusCheck.url).query({initiator:"ESPN",programmer:"ESPN"}).set("Accept","application/json").end(function(b,c){if(a.streamId=c.body.streamId,a.streamStart=c.body.streamStart,a.heartbeat.url=c.body._links&&c.body._links.heartbeat&&c.body._links.heartbeat.href,a.heartbeat.url)return a.heartbeat.timeout=setTimeout(a.sendHeartbeat.bind(a),1e3*a.heartbeat.initialDelay),void(a.statusCheck.timeout=setTimeout(a.sendStatusCheck.bind(a),1e3*a.statusCheck.initialDelay))})}}(this)),this.player.player().one("dispose",function(){this.heartbeat.url&&this.terminate()}.bind(this))}return a.prototype.accountId=void 0,a.prototype.mvpd={},a.prototype.heartbeat={},a.prototype.statusCheck={},a.prototype.streamLimit=3,a.prototype.streamId=null,a.prototype.streamStart=null,a.prototype.sendHeartbeat=function(){clearTimeout(this.heartbeat.timeout),this.heartbeat.timeout=setTimeout(function(a){return function(){return h.post(a.heartbeat.url.replace("{event}","alive")).end(function(b){return b&&a.handleError(),a.sendHeartbeat()})}}(this),1e3*this.heartbeat.interval)},a.prototype.sendStatusCheck=function(){clearTimeout(this.statusCheck.timeout),this.statusCheck.timeout=setTimeout(function(a){return function(){return h.get(a.statusCheck.url).query({programmer:"ESPN",status:"active"}).set("Accept","application/json").end(function(b,c){var d;return b&&a.handleError(),d=a.rankStreams(c.body._embedded&&c.body._embedded.streams),d>a.streamLimit?(a.onLimitReached(a.accountId),a.terminate()):a.sendStatusCheck()})}}(this),1e3*this.statusCheck.interval)},a.prototype.rankStreams=function(a){return a.reduce(function(a){return function(b,c){return c.streamStart>a.streamStart?b+1:b}}(this),1)},a.prototype.errorCount=0,a.prototype.handleError=function(){if(this.errorCount++,this.errorCount>=3)return this.onError(this.accountId),this.terminate()},a.prototype.onLimitReached=function(a){console.warn("Stream limit reached: accountId: "+a),this.player.error("STREAM_LIMITED"),this.player.player().trigger("espn.streamlimiter.limitreached",{accountId:a})},a.prototype.onError=function(a){console.warn("Stream limit error: accountId: "+a),this.player.error("STREAM_LIMIT_ERROR"),this.player.player().trigger("espn.streamlimiter.error",{accountId:a})},a.prototype.terminate=function(){clearTimeout(this.heartbeat.timeout),clearTimeout(this.statusCheck.timeout),h.post(this.heartbeat.url.replace("{event}","stop")).end(),this.errorCount=0,this.heartbeat={},this.statusCheck={},this.streamId=null,this.streamStart=null},a}(),d.configure=function(a){return f(e,a),e},b.exports=d}).call(void 0)},{"../api":9,superagent:33}],63:[function(a,b,c){"use strict";(function(){var a;a=function(){function a(a,b,c){var d,e,f,g,h,i,j;if(b){for(i={},g=Math.floor(c.duration()/10),e=0,f=b.split("/").pop(),h=b.replace(f,"chaptertn"),j=f.split("."),f=j[0],d="jpg";e<=g;)i[""+10*e]={src:h+"/"+f+"_"+ ++e+"."+d,width:"150px"};c.thumbnails(i)}}return a}(),b.exports=a}).call(void 0)},{}],64:[function(a,b,c){"use strict";(function(){b.exports={asset:"http://a.espncdn.com/broadband/video/images/espn-watermark.png",url:"http://www.espn.com",position:"bottom-left",start:"play",end:"end"}}).call(void 0)},{}],65:[function(a,b,c){"use strict";(function(){var c,d,e,f;e=function(a,b){var c;for(c in b)f.call(b,c)&&(a[c]=b[c]);return a},f={}.hasOwnProperty,d=a("./config"),c=function(){function a(a,b){var c;b&&e(d,b),c='<a href="'+d.url+'" target="_blank" class="espn-watermark"> <img src="'+d.asset+'" /> </a>',a({content:c,align:d.position,
start:d.start,end:d.end})}return a}(),b.exports=c}).call(void 0)},{"./config":64}]},{},[1])(1)}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,c,d){"function"==typeof define&&define.amd?define(["video",d]):"object"==typeof b&&b.exports?b.exports=d(c,window.espn||{}):(a.PLAYER=null,a.espn=a.espn||{},a.espn.video=d(c,a.espn))}(this,jQuery,function(a,c){function d(a){c.video.player&&c.video.player.playerElement&&c.video.player.playerElement.parentElement&&(c.video.player.playerElement.parentElement.removeChild(c.video.player.playerElement),PLAYER=null)}function e(a){return a=JSON.parse(JSON.stringify(a)),p.isKindle&&(a.platform="player-image"),"html5-video"===a.platform?(a.geoLocation=x,PLAYER=new u(a)):"player-image"===a.platform?(a.geoLocation=x,PLAYER=new v(a)):(a.fallingBack=!0,a.geoLocation=x,PLAYER=new u(a)),c.video.player=PLAYER,a.callback&&a.callback(PLAYER),PLAYER}function f(){var b,d=function(){c.video.play(),a.unsubscribe(b)};b=a.subscribe("espn.video.ready",d)}function g(a,b,d){if(b=b||{},b.id=a||null,b.userInitiated=d||null,b.userInitiated&&f(),!PLAYER)return c.video.embed(b);if(b.id){if(b.id!==PLAYER.clip.id||!PLAYER.getAutoPlay())return c.video.embed(b);PLAYER.playVideo()}else PLAYER.playVideo()}function h(b,c){b=b||{},b.platform=b.platform||p.getDefaultPlatform();var d=null;return w?(d=e(b),"function"==typeof c&&c(d)):a.subscribe("espn.video.locationReady",function(){w=!0,d=e(b),"function"==typeof c&&c(d)}),d}function i(){PLAYER.pauseVideo()}function j(){PLAYER.skipAd()}function k(b,c){return a.subscribe(b,c)}function l(){function b(b,d){var e=a.parseUri(b.attr("href")).queryKey.id||null,f=b.metadata(),h=b.siblings("span").html();null!==h&&a("#videoInfo").html(h),f.endCard=f.endCard||"false",(b.parent().hasClass("last")||i.children("li").length<=1)&&(f.endCard="true"),"undefined"==typeof f.playRelatedExternally&&(f.playRelatedExternally="false"),"true"==f.playRelatedExternally&&(g=!1,f.endCard="true"),a("div.videoplayer").addClass("videoplayer-show"),c.video.play(e,f,d)}function d(c,d){c.addClass("active").siblings().removeClass("active"),c.next().addClass("next").siblings().removeClass("next"),0===c.next().length&&a(".video-player").hasClass("next")&&(a(".mod-video-playlist").hide(),a(".video-player").removeClass("with-playlist")),b(c.find("a"),d)}var e,f,g=!0,h=a("#videotoplay"),i=a(".mod-video-playlist ul");b(h,!1),i.children("li").bind("click",function(b){b.preventDefault(),g=!0,f=a(this),d(f,!0)}),e=a.subscribe("espn.video.complete",function(){g&&(f=i.find("li.active"),f.next().length>0&&d(f.next(),!1))})}function m(b,d){var e=b.adSet||"espn";b.SWID=a.cookie("SWID")||"",b.FRMSegment=o.AD_SEGMENTS(),"string"==typeof b.siteSection&&(b.fw_site_section_id=b.siteSection,delete b.siteSection),"string"==typeof b.videoID&&(b.videoId=b.videoID,delete b.videoID);var f=(b.trackingName||b.playerType||b.player||null,a.subscribe("espn.video.ready",function(){c.video.player.playerElement.setModuleParams({"freewheel-ads-manager":b});try{pcode=n.OOYALA_SETTINGS.espn.pcode,c.video.player.playerElement.setQueryStringParameters({playerBrandingId:n.OOYALA_SETTINGS[e].adPlayerBrandingId,adSetCode:n.ADInfo.adSets[pcode][e],"thruParam_espn-ui[autoPlay]":"true","thruParam_espn-ui[endCard]":"false"})}catch(a){console.log("Insert ad failed to set query string params on playerElement")}a.unsubscribe(f)}));c.video.player=PLAYER=new OoyalaPlayer(b,x,!1)}var n=function(){return{OOYALA_SETTINGS:{},applicationGUIDs:{soccerfc:{domestic:"20879ce0-ad85-4acf-b0b4-f4a91a6c1517",international:"e723ef32-c3ff-4bdb-b5b3-9fe2ca1b96ba"},espn:{domestic:"85957be9-026a-415e-a8ce-7bfdc19d5e23",international:"85957be9-026a-415e-a8ce-7bfdc19d5e23"},deportes:{domestic:"94cf98b3-19cf-4c12-9305-15e5b07488bd",international:"94cf98b3-19cf-4c12-9305-15e5b07488bd"},cricinfo:{domestic:"681b074f-2ced-4a68-a0dc-9b1465c855bd",international:"6ffb1a11-c953-4127-bd27-f2296fec5aa7"}},ADInfo:{}}}(),o={OOYALA_SETTINGS:"undefined"!=typeof n?n.OOYALA_SETTINGS:{},ADInfo:"undefined"!=typeof n?n.ADInfo:{},countryMap:{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"},IMG_REF:"https:"===window.location.protocol?"https://secure.espncdn.com":"http://a.espncdn.com",COOKIE_HOST:"www.espn.com",AD_SEGMENTS:window.espn&&window.espn.core&&window.espn.core.ad_segments,CMS_INFO:{espn:{videohub:"//www.espn.com/video",useExternalIdFilter:!1},deportes:{videohub:"//espndeportes.espn.com/videohub/video/indexDeportes",useExternalIdFilter:!1},intl:{videohub:"//espnfc.com/video/espnfc/index",useExternalIdFilter:!0},cric:{videohub:"//espncric.com/",useExternalIdFilter:!1}}},p=function(b){function d(a){c.fanapi?jQuery.when(c.fanapi.getAsP13n()).done(function(b){if(b&&b.mySettings){if(y=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}).fail(function(){a&&a()}):c.p13n&&c.p13n.get({success:function(b){try{if(b&&b.mySettings){if(y=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}catch(a){console.log("error","espn.p13n.get",a)}},error:function(){}})}function e(b,c,d,e){for(var f="",g=0;g<b.videos.length;g++)for(var h in b.videos[g]){var i={id:h,cms:b.videos[g][h].cms,url:b.videos[g][h].url};f+="id="+i.cms+":"+h+"&",b.videos[g]=i;break}if(c){var j="",k="desktop",l="wdgespvideo,wdgespge",m="espn",n="http://www.espn.com/videohub/video/util/getMinifiedClipJsonById?";z?k="mobile":(u||v)&&(k="tablet"),"undefined"!=typeof window.s_account&&(l=window.s_account+","+l),j+="&omniReportSuite="+l,"undefined"!=typeof window.omniSite&&(m=q.getSiteSection(window.omniSite)),j+="&siteSection="+m,j+="&trackingName="+encodeURIComponent(q.getTrackingName()),a.ajax({url:n+f+"device="+k+j,async:d,success:function(a){e&&e(a)}})}return b}function f(){var a=!1;try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(a=!0)}catch(b){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a}function g(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullScreen&&a.webkitEnterFullScreen()}function h(a){a=a||{};var b=!0,e=(document.cookie.match(/VAS=([^;]+)/)||[])[1];e&&(b=m(e)),c.video.autoplay=b,d(function(d){d&&(b="2"!==d),c.video.autoplay=b,a.callback&&a.callback(b)})}function i(){var a=/(^|; )espn.html5=1/.test(document.cookie);return a}function j(b){b=b||a.noop;var d=function(a){if(!a)return b(new Error("failed to lookup valid geolocation"));var c=p.getGeoLocationFromGeoService(a);return c?void b(null,c):b(new Error("failed to determine geolocation"))},e=function(){var a=(document.cookie.match(/country=([^;]+)/)||[])[1]||"us";d(p.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:(a+"").toUpperCase()}}))};window.espn&&window.espn.geo&&window.espn.geo.getLocation?c.geo.getLocation().done(d).fail(function(){c.geo.promise=null,c.geo.getLocation().done(d).fail(e)}):e()}function k(a){var b=null;a.country&&a.country.isoCode&&(b=a.country.isoCode.toUpperCase());var c=a.country.isoCodeAlpha2;return b&&!c&&B&&(c="string"==typeof B[b]?B[b].toLowerCase():b.substring(0,2).toLowerCase()),a.country.isoCodeAlpha2=c,a}function l(){var a="ooyala";return(this.isMobile||this.isIpad||this.isAndroid)&&(a=this.canPlayVideo?"html5-video":"player-image"),i()&&(a="html5-video"),a}function m(a){var b=typeof a;return"boolean"!==b&&("string"===b&&isNaN(a)?a="true"===a:(a=parseInt(a),a=1===a)),a}function n(){return n._cache||(n._cache=!1,"object"==typeof c.mem&&"boolean"==typeof c.mem.hasVideo&&(n._cache=c.mem.hasVideo)),n._cache}function o(a){return"deportes_dev"==a||"deportes_qa"==a?"deportes":"cric"==a||"cric_qa"==a||"cric_dev"==a||"cricinfo"==a||"cricinfo_qa"==a||"cricinfo_dev"==a?"cricinfo":"intl"==a||"intl_dev"==a||"intl_qa"==a?"soccerfc":a}function r(a){return"default"==a?null:a?(a+="",/\d{2,3}%/.test(a)?a:a.replace(/\D/g,"")+"px"):null}function s(a){var b="espn";return a.search(/deportes/i)>-1?b="deportes":a.search(/intl/i)>-1&&(b="intl"),b}var t=function a(){return a._cache||(a._cache=document.createElement("video")),!!a._cache.canPlayType}(),u=function a(){return a._cache||(a._cache=/iPad/i.test(window.navigator.userAgent)||/Mini/i.test(window.navigator.userAgent)),a._cache}(),v=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Android/g)),a.cache}(),w=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Silk/g)),a.cache}(),x=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Nexus 4/g)&&navigator.userAgent.match(/Android 4.2/g)),a.cache}(),y=null,z=!1,A=!1;navigator.userAgent.match(/Mobi/)?navigator.userAgent.match(/iPad/)?A=!0:z=!0:navigator.userAgent.match(/Tab/)?A=!0:navigator.userAgent.match(/Android/)?A=!0:navigator.userAgent.match(/Touch/)&&navigator.userAgent.match(/IE/)&&(A=!0),/[?&]html5=false/.test(window.location.search)?document.cookie="espn.html5=0; path=/; domain=espn.com":/[?&]html5=./.test(window.location.search)&&(document.cookie="espn.html5=1; path=/; domain=espn.com");var B=b.countryMap||{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"};return{canPlayVideo:t,isIpad:u,isMobile:z,isAndroid:v,isKindle:w,needsClickToPlay:x,autoPlayHelper:h,getP13AutoStart:d,getGeoLocation:j,getGeoLocationFromGeoService:k,getDefaultPlatform:l,fullScreenRequest:g,convertToBoolean:m,checkMemHasVideo:n,getBusinessUnit:o,cleanDimension:r,hasFlashAndUsable:f,getVideoPlaylistInfo:e,getCMSFromTrackingName:s,requiresFlashUpgrade:navigator.userAgent.indexOf("Safari/537.76.4")!==-1&&navigator.userAgent.indexOf("Version/7")!==-1&&"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("14.0.0")||"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("10.0.0"),requiresFlashDownload:"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("0.0.1")}}("undefined"!=typeof o?o:{});"object"==typeof b&&b.exports&&(b.exports=p);var q=function(b){function c(a){var b=a.split(":").slice(0,3).join(":"),c=b.indexOf(":videoid");return c===-1?b:b.substr(0,c)}function d(b){var c=[];if("string"==typeof b){var d=b.split(","),e=["wdgespge","wdgespvideo","wdgespinternational","wdgesptest"];a.each(d,function(b,d){a.inArray(d,e)===-1&&c.push(d)})}return c.join(",")||null}function e(){return window.omniTrackingName||null}function f(){return window.omniSite||null}return{getSiteSection:c,getOmnitureAccount:d,getTrackingName:e,getOmniSite:f}}(p),r=function(b,c,d){function e(e){function f(b,e,f){var g="",i="desktop",j="wdgespvideo,wdgespge",k="espn";c.isMobile||b.fallingBack?i="mobile":(c.isIpad||c.isAndroid)&&(i="tablet"),"undefined"!=typeof window.s_account&&(j=window.s_account+","+j),g+="&omniReportSuite="+j,"undefined"!=typeof window.omniSite&&(k=d.getSiteSection(window.omniSite)),g+="&siteSection="+k,g+="&trackingName="+encodeURIComponent(d.getTrackingName());var l="file:"===window.location.protocol?"http:":window.location.protocol,m=l+"//www.espn.com/videohub/video/util/getMinifiedClipJsonById?id="+b.id+"&cms="+q+"&device="+i+g;return"https:"===l&&(m+="&secure=true"),b={method:"GET",url:m,success:function(b){h(b),(f||a.noop)()},error:e},"undefined"!=typeof espn_ui&&espn_ui.ie8&&(b.dataType="jsonp",b.jsonpCallback="videoapi"),a.ajax(b)}function g(b,c,d){var e="https://watch.auth.api.espn.com/video/auth/getclip/"+b.cerebroId;return a.ajax({method:"GET",data:{apikey:"5p8m6dw513q716wt2os04mec3"},url:e,success:function(b){i(b),(d||a.noop)()},error:c})}function h(b){if(b.videos&&b.videos.length>0){var d=b.videos[0];n=d.id,s.embargoDate=d.timeRestrictions.embargoDate,s.expirationDate=d.timeRestrictions.expirationDate,u&&u.full&&u.full.href&&""!==u.full.href.trim||(u.full.href=d.posterImages.full.href),"object"==typeof d.geoRestrictions&&(t.type=d.geoRestrictions.type,t.countries=d.geoRestrictions.countries),d&&d.links&&"object"==typeof d.links.mobile&&(d.links.mobile.href?v.mobile.href=d.links.mobile.href:d.links.source.full.href&&(v.mobile.href=d.links.source.full.href),d.links.mobile.omniHref&&(v.mobile.omniHref=d.links.mobile.omniHref.replace(/.m.espn/,"")),c.isIpad&&d.links.source&&d.links.source.HLS&&(v.mobile.href=d.links.source.HLS.href),v.mobile.href&&e.siteSection&&v.mobile.href.match(/unicorn/)&&(v.mobile.href+="&UMADPARAMcsid="+e.siteSection))}else a.publish("espn.video.unavailable",[this,"Clip not found"])}function i(a){var d=a.clip;if(d){o=d._id,s.embargoDate=d.videoRights.embargoDate,s.expirationDate=d.videoRights.expirationDate,u&&u.full&&u.full.href&&""!==u.full.href.trim||(u.full.href=b.IMG_REF+d.mezzaninePathImage);var e=d.videoRights.geoTargetType;"inclusion"===e&&(e="whitelist"),"exclusion"===e&&(e="blacklist"),t.type=e;var f=d.videoRights.geoTargets;"[object Array]"===Object.prototype.toString.call(f)&&(t.countries=f);var g=c.getBusinessUnit(q);"object"==typeof d.syndicationDetails[g]&&("object"==typeof d.syndicationDetails[g].cms&&(n=d.syndicationDetails[g].cms.syndicationId),"object"==typeof d.syndicationDetails[g].brightcove?v.mobile.href=d.syndicationDetails[g].brightcove.url:"object"==typeof d.syndicationDetails[g].ooyala&&(v.mobile.href=d.syndicationDetails[g].ooyala.url),"object"==typeof d.syndicationDetails[g].ooyala&&(p=d.syndicationDetails[g].ooyala.syndicationId))}}function j(){return Date.parse(s.expirationDate)<Date.parse((new Date).toGMTString())}function k(){return Date.parse(s.embargoDate)>Date.parse((new Date).toGMTString())}function l(a){var b=!1,c=t.type,d=t.countries;if(d.length>0){var e,f=a.country.isoCodeAlpha2;if(f){f=f.toLowerCase(),"whitelist"===c?b=!0:"blacklist"===c&&(b=!1);for(var g=0,h=d.length;g<h;g++)if(e=d[g].toLowerCase(),e===f){"whitelist"===c?b=!1:"blacklist"===c&&(b=!0);break}}else b=!0}return b}function m(){var a={};if(a.status="success",a.data="",j())a.status="fail",a.message="This video is no longer available";else if(k())a.status="fail",a.message="This video is not yet available";else if(l(r)){a.status="fail";var b=r.country.isoCodeAlpha2;a.message="This video is not authorized for your location","string"==typeof b&&(a.message+=" ("+b.toUpperCase()+")")}return a}e=e||{};var n=e.id||null,o=e.guid||null,p=null,q=e.cms||null,r=(e.cms||null,e.geoLocation||{}),s={embargoDate:null,expirationDate:null},t={type:null,countries:[]},u={full:{href:e.thumbnailURL}},v={mobile:{href:null,omniHref:null}};this.loadAPIClip=f,this.loadCerebroClip=g,this.id=n,this.guid=o,this.ooyalaId=p,this.links=v,this.posterImages=u,this.isExpired=j,this.isEmbargoed=k,this.isGeoRestricted=l,this.getRestrictions=m}return e}(o,p,q),s=function(b,d,e,f){function g(){this.isPlaying=!1,this.playerReady=!1,this.playType=null,this.playVerified=!1,this.autoPlay=!1,this.autoClose=!0,this.width=null,this.height=null,this.cms=null,this.clip=null,this.targetReplaceId=null,this.targetElement=null,this.$targetElement=null,this.$container=null,this.playerElement=null,this.$playerElement=null,this.onErrorBehavior=null,this.hasPlaylist=null,this.videoPlaylist=null,this.currentIndex=null,this.originalIndex=null,this.playlistPasses=0,this.useExternalIdFilter=null,this.iterationCount=1,this.currentPlayingId=null,this.showPoster=!1,this.setDefaults=function(c){c=c||{},this.playType=null,this.autoPlay=this.getAutoPlay(c),c.height=c.height||"default",c.width=c.width||"default",this.height=d.cleanDimension(c.height),this.width=d.cleanDimension(c.width),this.cms=c.cms||"espn",c.cms=this.cms,c.playerBrandingId&&(this.playerBrandingId=c.playerBrandingId),this.clip=new e(c),this.hasPlaylist=!!c.videoPlaylist,this.videoPlaylist=this.hasPlaylist?d.getVideoPlaylistInfo(c.videoPlaylist):null,this.currentIndex=this.hasPlaylist&&c.videoPlaylist.startIndex?c.videoPlaylist.startIndex:0,this.currentPlayingId=this.hasPlaylist?this.videoPlaylist.videos[this.currentIndex].id:null,this.originalIndex=this.currentIndex,this.hasPlaylist&&c.videoPlaylist.iterationCount&&(this.iterationCount=c.videoPlaylist.iterationCount),this.targetReplaceId=c.targetReplaceId||"videoPlayer";var f,g=a("#"+this.targetReplaceId);0===g.length?(f=a(".videoplayer")||a("body"),f.html('<div id="'+this.targetReplaceId+'"></div>'),g=a("#"+this.targetReplaceId)):f=g.parent(),this.$targetElement=g,this.$container=f,d.checkMemHasVideo()&&f.addClass("videoplayer-show"),this.targetElement=document.getElementById(this.targetReplaceId),a.publish("espn.video.container.ready",[this.$container]),a.publish("espn.video.targetReady",[this.targetReplaceId]),this.playerElement=null,$playerElement=null,onErrorBehavior=c.onErrorBehavior||"default","undefined"!=typeof c.useExternalIdFilter?this.useExternalIdFilter=c.useExternalIdFilter:this.useExternalIdFilter=b.CMS_INFO[this.cms].useExternalIdFilter,"boolean"==typeof c.showPoster&&(this.showPoster=c.showPoster)},this.handleErrors=function(b){if(a.publish("espn.video.unavailable",[this,b]),"message"===onErrorBehavior)this.displayError(b);else if("image"===this.onErrorBehavior){var c="default"==this.width?"":this.width,d="default"==this.height?"":this.height;a("#"+this.targetReplaceId).replaceWith('<img id="'+this.targetReplaceId+'" src="'+this.clip.posterImages.full.href+'" width="'+c+'" height="'+d+'" />')}else"hide"===this.onErrorBehavior&&a("#"+this.targetReplaceId).hide()},this.displayError=function(c){c="string"==typeof c?c+"<br />":"";var d="default"==this.width?"":this.width,e="default"==this.height?"":this.height,f=a('<div id="'+this.targetReplaceId+'" class="imageHolder"></div>').css("position","relative"),g=a('<img src="'+this.clip.posterImages.full.href+'" width="'+d+'" height="'+e+'">');f.append(g);var h=a('<div class="message">CONTENT UNAVAILABLE: '+c+"</div>").css({"font-family":"klavika, arial, sans-serif","font-size":"24px","text-decoration":"none","text-align":"center",position:"absolute",width:"100%",top:"50%",color:"#FFF","text-shadow":"black 0.1em 0.1em 0.2em"});f.append(h);var i=b.CMS_INFO[this.cms].videohub;f.css("cursor","pointer").click(function(){window.location.href=i}),a("#"+this.targetReplaceId).replaceWith(f)},this.setAutoPlay=function(a){this.autoPlay=a;var d=this.autoPlay?"1":"2";if(window.location.hostname.match(/\.espn\.com$/)){var e=new Image;e.src="http://"+b.COOKIE_HOST+"/personalization/setAutoStart?vasPref="+d+"&rand="+new Date}else c.cookie.set("VAS",d,366);c.fanapi?c.fanapi.updateProfile({settings:{videoAutoStart:{value:d.toString()}}},{success:function(){},error:function(){}}):c.p13n&&c.p13n.update({mySettings:{videoAutoStart:d}},{success:function(){},error:function(){}})},this.getAutoPlay=function(a,b,c){a=a||{},a.autoPlay=a.autoPlay||a.autoplay||a.autostart||a.autoStart||null,a.callback=c,d.autoPlayHelper(a)},this.getClipUrl=function(a,b,c){var e=d.getBusinessUnit(this.cms);return a&&(a=c.country&&c.country.isoCodeAlpha2&&"US"!=c.country.isoCodeAlpha2.toUpperCase()?a.replace(f.applicationGUIDs[e].domestic,f.applicationGUIDs[e].international):a.replace(f.applicationGUIDs[e].international,f.applicationGUIDs[e].domestic)),a},this.getPlayType=function(a,b){if(a.playType&&b)b(a.playType);else{var c=function(a){var c=a?"autoplay":"manual";b&&b(c)};a.autoPlay?c(a.autoPlay):this.getAutoPlay(a,null,c)}},this.getOmniClipUrl=function(a,b,c){var e=d.getBusinessUnit(this.cms);return a&&(a=c.country&&c.country.isoCodeAlpha2&&"US"!=c.country.isoCodeAlpha2.toUpperCase()?a.replace(f.applicationGUIDs[e].domestic,f.applicationGUIDs[e].international):a.replace(f.applicationGUIDs[e].international,f.applicationGUIDs[e].domestic)),a},this.skipAd=function(){},this.pauseVideo=function(){}}return g}(o,p,r,n),t=function(a){return/^[0-9]*$/.test(a)||"string"==typeof a&&a.indexOf(":")!==-1},u=function(b,c,d){function e(b){function d(b,c){if(!b&&n.clip&&n.clip.links&&n.clip.links.mobile&&n.clip.links.mobile.href){a.publish("espn.video.embed.begin");var d=n.clip.getRestrictions();if("fail"===d.status)return void n.handleErrors(d.message);e(n.getClipUrl(n.clip.links.mobile.href,n.cms,q),n.clip.posterImages.full.href)}else b?e(b,c):n.handleErrors("")}function e(b,d){if(n.$playerElement=n.$playerElement||a("<video>"),!c.needsClickToPlay&&n.$playerElement.get(0)&&n.$playerElement.get(0).pause(),n.$playerElement.attr("id",n.targetReplaceId),n.$playerElement.attr("src",b),n.$playerElement.attr("autobuffer","autobuffer"),n.$playerElement.attr("controls","controls"),c.isMobile&&!n.showPoster||n.$playerElement.attr("poster",d),n.$playerElement.css({width:n.width,height:n.height}),n.$playerElement.promise().done(l()),n.$targetElement.replaceWith(n.$playerElement),n.$targetElement=n.$playerElement,c.needsClickToPlay||a("#"+n.targetReplaceId)[0].play(),n.$playerElement.bind("webkitendfullscreen",m),n.$playerElement.bind("contextmenu",function(){return!1}),c.isAndroid||c.needsClickToPlay){var e=n.$playerElement[0];n.$playerElement.click(function(){played&&!o||c.fullScreenRequest(e)}),a(document).on("webkitfullscreenchange",function(){document.webkitIsFullScreen||e.pause()}),a(document).on("mozfullscreenchange",function(){document.mozFullScreen||e.pause()}),a(document).on("fullscreenchange",function(){document.fullscreen||e.pause()})}}function f(b){setTimeout(function(){n.clip.loadAPIClip(b,n.handleErrors.bind(n),function(){if(n.clip&&n.clip.links&&n.clip.links.mobile&&n.clip.links.mobile.omniHref){var b=n.clip.links.mobile.omniHref,c=a.cookie("viAppId");if(null!==c&&(b+="&vid="+c),"undefined"!=typeof s_omni&&"undefined"!=typeof s_omni.visitor&&s_omni.visitor.getAnalyticsVisitorID()){var d=s_omni.visitor.getAnalyticsVisitorID();b+="&aid="+d}var e=new Image;e.src=b+"&rand="+ +new Date,n.hasTracked=!0}})})}function g(){try{n.$playerElement[0].play()}catch(a){}}function h(){try{n.$playerElement[0].pause()}catch(a){}}function i(a){a=a||{},n.hasPlaylist?(n.currentIndex=n.currentIndex+1>=n.videoPlaylist.videos.length&&n.videoPlaylist.continuous?0:n.currentIndex+1,n.currentIndex===n.originalIndex&&n.playlistPasses++,n.currentIndex<n.videoPlaylist.videos.length&&n.playlistPasses<n.iterationCount&&(a.id=n.videoPlaylist.videos[n.currentIndex].id,n.clip=new r(a),n.clip.loadAPIClip(a,n.handleErrors.bind(n),d))):(h(),a.id?n.clip.loadAPIClip(a,n.handleErrors.bind(n),function(){j(this)}):a.cerebroId?n.handleErrors("switching by cerebro id not yet enabled"):n.handleErrors("no clip id specified"),c.checkMemHasVideo()&&n.$container.addClass("videoplayer-show"))}function j(){n.$playerElement.attr("src",n.clip.links.mobile.href),n.$playerElement.attr("poster",n.clip.posterImages.full.href);var b="switch";a.publish("espn.video.embedCodeChanged",[b]),a.publish("espn.video.switch",[n.autoPlay,n.clip.id,n.clip.posterImages.full.href])}function k(b){var d=b.type;switch(d){case"canplay":n.playerReady=!0,n.state="ready",a.publish("espn.video.ready",[b,n.targetReplaceId,d,"espn.video.ready",n.currentPlayingId]),a.publish("espn.video.init",[b,n.targetReplaceId,d,"espn.video.init",n.currentPlayingId]);var e="init";a.publish("espn.video.embedCodeChanged",[e]);break;case"ended":a.publish("espn.video.complete",[b,n.targetReplaceId,d]),n.$playerElement&&n.autoClose&&"function"==typeof n.$playerElement[0].webkitExitFullScreen&&n.$playerElement[0].webkitExitFullScreen(),n.hasPlaylist&&i();break;case"error":n.handleErrors(),n.state="error",a.publish("espn.video.error",[b,p]);break;case"loadstart":n.playerElement=document.getElementById(n.targetReplaceId),n.playerElement&&(n.playerElement.onmouseover=function(){a.publish("espn.video.hoverIn")},n.playerElement.onmouseout=function(){a.publish("espn.video.hoverOut")});break;case"pause":n.state="paused",n.isPlaying=!1,a.publish("espn.video.pause",[b,n.targetReplaceId,d]);break;case"play":if(n.state="playing",n.isPlaying=!0,c.isMobile&&n.$playerElement&&n.$playerElement[0]){var g=n.$playerElement[0],h=g.requestFullscreen||g.webkitRequestFullscreen||g.webkitEnterFullscreen;if("function"==typeof h)try{h.call(g)}catch(a){}}if(!n.hasTracked)if(n.clip&&n.clip.links&&n.clip.links.mobile&&n.clip.links.mobile.omniHref){var j=n.clip.links.mobile.omniHref,k=a.cookie("viAppId");if(null!==k&&(j+="&vid="+k),"undefined"!=typeof s_omni&&"undefined"!=typeof s_omni.visitor&&s_omni.visitor.getAnalyticsVisitorID()){var l=s_omni.visitor.getAnalyticsVisitorID();j+="&aid="+l}var m=new Image;m.src=j+"&rand="+ +new Date,n.hasTracked=!0}else n.inlineData&&f(n.inlineData);a.publish("espn.video.play",[b,n.targetReplaceId,d]);break;case"seeked":a.publish("espn.video.seeked",[b,n.targetReplaceId]);break;case"timeupdate":a.publish("espn.video.playheadTimeChanged",[b,n.targetReplaceId,d]);break;case"volumechange":a.publish("espn.video.volumeChanged",[b,n.targetReplaceId,d])}}function l(){for(var a=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","play","pause","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],b=0,c=a.length;b<c;b++)n.$playerElement.bind(a[b],a[b],k)}function m(){try{var c=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen,d=c?"FullscreenOn":"FullscreenOff";"FullscreenOff"==d&&(b&&b.removeOnClose?n.$playerElement.remove():a.publish("espn.video.videoClosed",[]))}catch(a){}}var n=this,o=null,p=null;n.hasTracked=!1,b=b||{},n.setDefaults(b);var q=b.geoLocation;t(b.id)||b.cerebroId||(b.cerebroId=b.id,delete b.id,b.cms||(b.cms="cric",n.cms="cric")),b.url?(e(b.url,b.imageUrl),n.inlineData=b):b.id?n.clip.loadAPIClip(b,n.handleErrors.bind(n),d):b.cerebroId?n.clip.loadCerebroClip(b,n.handleErrors.bind(n),d):b.videoPlaylist?n.videoPlaylist.videos[n.currentIndex].url?(b.id=n.videoPlaylist.videos[n.currentIndex].id,n.clip.loadAPIClip(b,n.handleErrors.bind(n),d)):(b.id=n.videoPlaylist.videos[n.currentIndex].id,n.clip.loadAPIClip(b,n.handleErrors.bind(n),d)):d(),n.$playerElement=n.$playerElement||a("<video>"),c.needsClickToPlay||n.$playerElement[0].play(),this.switchVideo=i,this.playVideo=g,this.pauseVideo=h,this.exit=m,this.state=null,this.ready=!1}return e.prototype=new b,e}(s,p,o),v=function(b,c,d){function e(b){function e(){a.publish("espn.video.embed.begin");var b=f.clip.getRestrictions();if("fail"===b.status)return void f.handleErrors(b.message);var e="default"==f.width?"":f.width,h="default"==f.height?"":f.height,i=a('<div id="'+f.targetReplaceId+'"></div>'),j=a('<div class="imageHolderParent"></div>'),k=a('<div class="imageHolderChild"></div>'),l=a('<div class="faux-player"></div>'),m=a('<img src="'+f.clip.posterImages.full.href+'" class="faux-player-image" height="'+h+'" width="'+e+'"/>'),n=f.getClipUrl(f.clip.links.mobile.href,f.cms,g),o=n?n:c.CMS_INFO[f.cms].videohub,p=a('<a class="faux-player-button" href="'+o+'" target="_blank"></a>');i.css({display:"inline-block",width:e,height:h,overflow:"hidden"}),j.css({display:"table"}),k.css({display:"table-cell","vertical-align":"middle"}),l.css({position:"relative"}),m.css({display:"block","max-width":"100%","margin-left":"auto","margin-right":"auto",position:"relative","z-index":"10"}),p.hover(function(){a(this).css({"background-position":"0px 0px"})},function(){a(this).css({"background-position":"0px -59px"})}),p.css({"z-index":"20",top:"50%",left:"50%",color:"#FFF",cursor:"pointer",position:"absolute","font-family":"klavika, arial, sans-serif",
"font-size":"20px","text-decoration":"none","background-image":"url('"+c.IMG_REF+"/prod/assets/video/play-btn.png')","background-position":"0px -59px",width:"57px",height:"57px","margin-left":"-27.5px","margin-top":"-27.5px"}),l.append(m),l.append(p),k.append(l),j.append(k),i.append(j),a("#"+f.targetReplaceId).replaceWith(i),d.isKindle&&window.open(n)}var f=this;b=b||{};var g=b.geoLocation;f.setDefaults(b),b.id?f.clip.loadAPIClip(b,a.noop,e):b.cerebroId?f.clip.loadCerebroClip(b,a.noop,e):e()}return e.prototype=new b,e}(s,o,p),w=!1,x={country:{isoCode:null,isoCodeAlpha2:null}};return c&&c.geo&&c.geo.getLocation&&c.geo.getLocation().done(function(b){x=p.getGeoLocationFromGeoService(b),w=!0,a.publish("espn.video.locationReady")}).fail(function(){c.geo.promise=null,c.geo.getLocation().done(function(b){x=p.getGeoLocationFromGeoService(b),w=!0,a.publish("espn.video.locationReady")}).fail(function(){var b=a.cookie("country");"string"==typeof b&&(b=b.toUpperCase()),x=p.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:b}}),w=!0,a.publish("espn.video.locationReady")})}),p.getP13AutoStart(),{player:PLAYER,embedded:{play:l},remove:d,getAutoPlay:p.autoPlayHelper,embed:h,play:g,pause:i,skipAd:j,subscribe:k,insertAd:m}})},{}],2:[function(a,b,c){(function(a,d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof d?e=d:"undefined"!=typeof self&&(e=self),e.Promise=a()}}(function(){var b,c,e;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(b,c,d){"use strict";function e(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j}function f(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function g(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function h(a){this._normalQueue._pushOne(a),this._queueTick()}var i;try{throw new Error}catch(a){i=a}var j=b("./schedule"),k=b("./queue"),l=b("./util");e.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},e.prototype.hasCustomScheduler=function(){return this._customScheduler},e.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},e.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},e.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},e.prototype.fatalError=function(b,c){c?(a.stderr.write("Fatal "+(b instanceof Error?b.stack:b)+"\n"),a.exit(2)):this.throwLater(b)},e.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(a){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},l.hasDevTools?(e.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},e.prototype.invoke=function(a,b,c){this._trampolineEnabled?g.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},e.prototype.settlePromises=function(a){this._trampolineEnabled?h.call(this,a):this._schedule(function(){a._settlePromises()})}):(e.prototype.invokeLater=f,e.prototype.invoke=g,e.prototype.settlePromises=h),e.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},e.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},e.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},e.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},e.prototype._reset=function(){this._isTickUsed=!1},c.exports=e,c.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0===(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=this._bitField&-2097153},a.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise")();f.noConflict=d,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){var b=this.pop(),d=c(a,b);return d.apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return b<0&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(d,void 0,void 0,b,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype.break=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a._isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),a._setWillBeCancelled(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function c(a,c,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return f(c).call(j,i)}else if("function"==typeof l){var m=f(l).call(j,i);if(m===g)return m;if(m)return f(c).call(j,i)}else if(d.isObject(i)){for(var n=e(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return f(c).call(j,i)}}return b}}var d=a("./util"),e=a("./es5").keys,f=d.tryCatch,g=d.errorObj;return c}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function b(){this._trace=new b.CapturedTrace(d())}function c(){if(e)return new b}function d(){var a=f.length-1;if(a>=0)return f[a]}var e=!1,f=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},b.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,f.push(this._trace))},b.prototype._popContext=function(){if(void 0!==this._trace){var a=f.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},b.CapturedTrace=null,b.create=c,b.deactivateLongStackTraces=function(){},b.activateLongStackTraces=function(){var c=a.prototype._pushContext,f=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;b.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=f,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,e=!1},e=!0,a.prototype._pushContext=b.prototype._pushContext,a.prototype._popContext=b.prototype._popContext,a._peekContext=a.prototype._peekContext=d,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},b}},{}],9:[function(b,c,d){"use strict";c.exports=function(c,d){function e(a,b){return{promise:b}}function f(){return!1}function g(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+N.toString(a));d._attachCancellationCallback(a)})}catch(a){return a}}function h(a){if(!this._isCancellable())return this;var b=this._onCancel();void 0!==b?N.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function i(){return this._onCancelField}function j(a){this._onCancelField=a}function k(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(a,b){if(0!==(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function m(a,b){0!==(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function n(){var a=this._boundTo;return void 0!==a&&a instanceof c?a.isFulfilled()?a.value():void 0:a}function o(){this._trace=new G(this._peekContext())}function p(a,b){if(O(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=y(a);N.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),N.notEnumerableProp(a,"__stackCleaned__",!0)}}}function q(a,b,c,d,e){if(void 0===a&&null!==b&&Y){if(void 0!==e&&e._returnedNonUndefined())return;if(0===(65535&d._bitField))return;c&&(c+=" ");var f="",g="";if(b._trace){for(var h=b._trace.stack.split("\n"),i=w(h),j=i.length-1;j>=0;--j){var k=i[j];if(!Q.test(k)){var l=k.match(R);l&&(f="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(i.length>0)for(var m=i[0],j=0;j<h.length;++j)if(h[j]===m){j>0&&(g="\n"+h[j-1]);break}}var n="a promise was created in a "+c+"handler "+f+"but was not returned from it, see http://goo.gl/rRqMUw"+g;d._warn(n,!0,b)}}function r(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),s(c)}function s(a,b,d){if(ga.warnings){var e,f=new M(a);if(b)d._attachExtraTrace(f);else if(ga.longStackTraces&&(e=c._peekContext()))e.attachExtraTrace(f);else{var g=y(f);f.stack=g.message+"\n"+g.stack.join("\n")}ba("warning",f)||z(f,"",!0)}}function t(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function u(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function v(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function w(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||S.test(d),f=e&&da(d);e&&!f&&(U&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function x(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||S.test(d))break}return c>0&&(b=b.slice(c)),b}function y(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?x(a):["    (No stack trace)"],{message:c,stack:w(b)}}function z(a,b,c){if("undefined"!=typeof console){var d;if(N.isObject(a)){var e=a.stack;d=b+T(e,a)}else d=b+String(a);"function"==typeof J?J(d,c):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(d)}}function A(a,b,c,d){var e=!1;try{"function"==typeof b&&(e=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(a){L.throwLater(a)}"unhandledRejection"===a?ba(a,c,d)||e||z(c,"Unhandled rejection "):ba(a,d)}function B(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():N.toString(a);var c=/\[object [a-zA-Z0-9$_]+\]/;if(c.test(b))try{var d=JSON.stringify(a);b=d}catch(a){}0===b.length&&(b="(empty array)")}return"(<"+C(b)+">, no stack trace)"}function C(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function D(){return"function"==typeof fa}function E(a){var b=a.match(ea);if(b)return{fileName:b[1],line:parseInt(b[2],10)}}function F(a,b){if(D()){for(var c,d,e=a.stack.split("\n"),f=b.stack.split("\n"),g=-1,h=-1,i=0;i<e.length;++i){var j=E(e[i]);if(j){c=j.fileName,g=j.line;break}}for(var i=0;i<f.length;++i){var j=E(f[i]);if(j){d=j.fileName,h=j.line;break}}g<0||h<0||!c||!d||c!==d||g>=h||(da=function(a){if(P.test(a))return!0;var b=E(a);return!!(b&&b.fileName===c&&g<=b.line&&b.line<=h)})}}function G(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);fa(this,G),b>32&&this.uncycle()}var H,I,J,K=c._getDomain,L=c._async,M=b("./errors").Warning,N=b("./util"),O=N.canAttachTrace,P=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,Q=/\((?:timers\.js):\d+:\d+\)/,R=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,T=null,U=!1,V=!(0==N.env("BLUEBIRD_DEBUG")),W=!(0==N.env("BLUEBIRD_WARNINGS")||!V&&!N.env("BLUEBIRD_WARNINGS")),X=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));c.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=a._bitField&-1048577|524288},c.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),L.invokeLater(this._notifyUnhandledRejection,this,void 0))},c.prototype._notifyUnhandledRejectionIsHandled=function(){A("rejectionHandled",H,void 0,this)},c.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},c.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},c.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),A("unhandledRejection",I,a,this)}},c.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},c.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},c.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},c.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},c.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},c.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},c.prototype._warn=function(a,b,c){return s(a,b,c||this)},c.onPossiblyUnhandledRejection=function(a){var b=K();I="function"==typeof a?null===b?a:N.domainBind(b,a):void 0},c.onUnhandledRejectionHandled=function(a){var b=K();H="function"==typeof a?null===b?a:N.domainBind(b,a):void 0};var Z=function(){};c.longStackTraces=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!ga.longStackTraces&&D()){var a=c.prototype._captureStackTrace,b=c.prototype._attachExtraTrace;ga.longStackTraces=!0,Z=function(){if(L.haveItemsQueued()&&!ga.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");c.prototype._captureStackTrace=a,c.prototype._attachExtraTrace=b,d.deactivateLongStackTraces(),L.enableTrampoline(),ga.longStackTraces=!1},c.prototype._captureStackTrace=o,c.prototype._attachExtraTrace=p,d.activateLongStackTraces(),L.disableTrampolineIfNecessary()}},c.hasLongStackTraces=function(){return ga.longStackTraces&&D()};var $=function(){try{if("function"==typeof CustomEvent){var a=new CustomEvent("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new CustomEvent(a.toLowerCase(),{detail:b,cancelable:!0});return!N.global.dispatchEvent(c)}}if("function"==typeof Event){var a=new Event("CustomEvent");return N.global.dispatchEvent(a),function(a,b){var c=new Event(a.toLowerCase(),{cancelable:!0});return c.detail=b,!N.global.dispatchEvent(c)}}var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!N.global.dispatchEvent(c)}}catch(a){}return function(){return!1}}(),_=function(){return N.isNode?function(){return a.emit.apply(a,arguments)}:N.global?function(a){var b="on"+a.toLowerCase(),c=N.global[b];return!!c&&(c.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),aa={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:e},ba=function(a){var b=!1;try{b=_.apply(null,arguments)}catch(a){L.throwLater(a),b=!0}var c=!1;try{c=$(a,aa[a].apply(null,arguments))}catch(a){L.throwLater(a),c=!0}return c||b};c.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?c.longStackTraces():!a.longStackTraces&&c.hasLongStackTraces()&&Z()),"warnings"in a){var b=a.warnings;ga.warnings=!!b,Y=ga.warnings,N.isObject(b)&&"wForgottenReturn"in b&&(Y=!!b.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!ga.cancellation){if(L.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");c.prototype._clearCancellationData=k,c.prototype._propagateFrom=l,c.prototype._onCancel=i,c.prototype._setOnCancel=j,c.prototype._attachCancellationCallback=h,c.prototype._execute=g,ca=l,ga.cancellation=!0}"monitoring"in a&&(a.monitoring&&!ga.monitoring?(ga.monitoring=!0,c.prototype._fireEvent=ba):!a.monitoring&&ga.monitoring&&(ga.monitoring=!1,c.prototype._fireEvent=f))},c.prototype._fireEvent=f,c.prototype._execute=function(a,b,c){try{a(b,c)}catch(a){return a}},c.prototype._onCancel=function(){},c.prototype._setOnCancel=function(a){},c.prototype._attachCancellationCallback=function(a){},c.prototype._captureStackTrace=function(){},c.prototype._attachExtraTrace=function(){},c.prototype._clearCancellationData=function(){},c.prototype._propagateFrom=function(a,b){};var ca=m,da=function(){return!1},ea=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(G,Error),d.CapturedTrace=G,G.prototype.uncycle=function(){var a=this._length;if(!(a<2)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;d<a;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;h<a-1?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},G.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=y(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(w(e.stack.split("\n"))),e=e._parent;v(d),u(d),N.notEnumerableProp(a,"stack",t(c,d)),N.notEnumerableProp(a,"__stackCleaned__",!0)}};var fa=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():B(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,S=a,T=b;var c=Error.captureStackTrace;return da=function(a){return P.test(a)},function(a,b){Error.stackTraceLimit+=6,c(a,b),Error.stackTraceLimit-=6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return S=/@/,T=b,U=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(a){e="stack"in a}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(T=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?B(b):b.toString()},null):(S=a,T=b,function(a){Error.stackTraceLimit+=6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(J=function(a){console.warn(a)},N.isNode&&a.stderr.isTTY?J=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(J=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var ga={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return X&&c.longStackTraces(),{longStackTraces:function(){return ga.longStackTraces},warnings:function(){return ga.warnings},cancellation:function(){return ga.cancellation},monitoring:function(){return ga.monitoring},propagateFromFunction:function(){return ca},boundValueFunction:function(){return n},checkForgottenReturns:q,setBounds:F,warn:s,deprecated:r,CapturedTrace:G,fireDomEvent:$,fireGlobalEvent:_}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype.return=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function c(){return f(this)}function d(a,c){return e(a,c,b,b)}var e=a.reduce,f=a.all;a.prototype.each=function(a){return e(this,a,b,0)._then(c,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return e(this,a,b,b)},a.each=function(a,d){return e(a,d,b,0)._then(c,void 0,void 0,a,void 0)},a.mapSeries=d}},{}],12:[function(a,b,c){"use strict";function d(a,b){function c(d){return this instanceof c?(l(this,"message","string"==typeof d?d:b),l(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new c(d)}return k(c,Error),c}function e(a){return this instanceof e?(l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,void(a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new e(a)}var f,g,h=a("./es5"),i=h.freeze,j=a("./util"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(a){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var q="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),r=0;r<q.length;++r)"function"==typeof Array.prototype[q[r]]&&(p.prototype[q[r]]=Array.prototype[q[r]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var s=0;p.prototype.toString=function(){var a=Array(4*s+1).join(" "),b="\n"+a+"AggregateError of:\n";s++,a=Array(4*s+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return s--,b},k(e,Error);var t=Error.__BluebirdErrorTypes__;t||(t=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:t,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:t.CancellationError,OperationalError:t.OperationalError,TimeoutError:t.TimeoutError,AggregateError:t.AggregateError,Warning:m}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(a){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(a){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function e(a){this.finallyHandler=a}function f(a,b){return null!=a.cancelPromise&&(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0)}function g(){return i.call(this,this.promise._target()._settledValue())}function h(a){if(!f(this,a))return l.e=a,l}function i(a){var d=this.promise,i=this.handler;if(!this.called){this.called=!0;var j=this.isFinallyHandler()?i.call(d._boundValue()):i.call(d._boundValue(),a);if(void 0!==j){d._setReturnedNonUndefined();var m=c(j,d);if(m instanceof b){if(null!=this.cancelPromise){if(m._isCancelled()){var n=new k("late cancellation observer");return d._attachExtraTrace(n),l.e=n,l}m.isPending()&&m._attachCancellationCallback(new e(this))}return m._then(g,h,void 0,this,void 0)}}}return d.isRejected()?(f(this),l.e=a,l):(f(this),a)}var j=a("./util"),k=b.CancellationError,l=j.errorObj;return d.prototype.isFinallyHandler=function(){return 0===this.type},e.prototype._resultCancelled=function(){f(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,e){return"function"!=typeof a?this.then():this._then(c,e,void 0,new d(this,b,a),void 0)},b.prototype.lastly=b.prototype.finally=function(a){return this._passThrough(a,0,i,i)},b.prototype.tap=function(a){return this._passThrough(a,1,i)},d}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=n(c[f])(a);if(d._popContext(),g===m){d._pushContext();var h=b.reject(m.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function i(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{var j=this._promise=new b(d);j._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(o):o,this._yieldedPromise=null,this._cancellationPhase=!1}var j=a("./errors"),k=j.TypeError,l=a("./util"),m=l.errorObj,n=l.tryCatch,o=[];l.inherits(i,f),i.prototype._isResolved=function(){return null===this._promise},i.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},i.prototype._promiseCancelled=function(){if(!this._isResolved()){var a,c="undefined"!=typeof this._generator.return;if(c)this._promise._pushContext(),a=n(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),a=n(this._generator.throw).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(a)}},i.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=n(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=n(this._generator.throw).call(this._generator,a);this._promise._popContext(),this._continue(b)},i.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},i.prototype.promise=function(){return this._promise},i.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},i.prototype._continue=function(a){
var c=this._promise;if(a===m)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(a.done===!0)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&(f=h(f,this._yieldHandlers,this._promise),null===f))return void this._promiseRejected(new k("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0===(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!==(33554432&g)?b._async.invoke(this._promiseFulfilled,this,f._value()):0!==(16777216&g)?b._async.invoke(this._promiseRejected,this,f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new k("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=i,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new k("expecting a function but got "+l.classString(a));o.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new i(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){var h=a("./util");h.canEvaluate,h.tryCatch,h.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}var e=[].slice.call(arguments);a&&e.pop();var d=new c(e).promise();return void 0!==a?d.spread(a):d}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:k.domainBind(e,b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=[],n.invoke(this._asyncInit,this,void 0)}function i(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+k.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+k.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+k.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new h(a,c,g,f).promise()}var j=b._getDomain,k=a("./util"),l=k.tryCatch,m=k.errorObj,n=b._async;k.inherits(h,c),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(c<0){if(c=c*-1-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var j=this._promise,k=this._callback,n=j._boundValue();j._pushContext();var o=l(k).call(n,a,c,f),p=j._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",j),o===m)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0===(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,(c+1)*-1),!1;if(0===(33554432&r))return 0!==(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}var s=++this._totalResolved;return s>=f&&(null!==h?this._filter(d,h):this._resolve(d),!0)},h.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},h.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;f<c;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},h.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return i(this,a,b,null)},b.map=function(a,b,c,d){return i(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b.try=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&k.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new j(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=k.keys(a),e=0;e<c.length;++e){var f=c[e];l.test(f)||(b[f]=a[f])}return b}return g.markAsOriginatingFromRejection(a),a}function f(a,b){return function(c,d){if(null!==a){if(c){var f=e(h(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var g=a("./util"),h=g.maybeWrapAsError,i=a("./errors"),j=i.OperationalError,k=a("./es5"),l=/^(?:name|message|stack|cause)$/;b.exports=f},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=new Error(a+"");d.cause=a,a=d}var e=h(b).call(c._boundValue(),a);e===i&&g.throwLater(e.e)}var f=a("./util"),g=b._async,h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./util":36}],22:[function(b,c,d){"use strict";c.exports=function(){function d(){}function e(a,b){if("function"!=typeof b)throw new t("expecting a function but got "+o.classString(b));if(a.constructor!==f)throw new t("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function f(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==v&&(e(this,a),this._resolveFromExecutor(a)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function g(a){this.promise._resolveCallback(a)}function h(a){this.promise._rejectCallback(a,!1)}function i(a){var b=new f(v);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var j,k=function(){return new t("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new f.PromiseInspection(this._target())},m=function(a){return f.reject(new t(a))},n={},o=b("./util");j=o.isNode?function(){var b=a.domain;return void 0===b&&(b=null),b}:function(){return null},o.notEnumerableProp(f,"_getDomain",j);var p=b("./es5"),q=b("./async"),r=new q;p.defineProperty(f,"_async",{value:r});var s=b("./errors"),t=f.TypeError=s.TypeError;f.RangeError=s.RangeError;var u=f.CancellationError=s.CancellationError;f.TimeoutError=s.TimeoutError,f.OperationalError=s.OperationalError,f.RejectionError=s.OperationalError,f.AggregateError=s.AggregateError;var v=function(){},w={},x={},y=b("./thenables")(f,v),z=b("./promise_array")(f,v,y,m,d),A=b("./context")(f),B=A.create,C=b("./debuggability")(f,A),D=(C.CapturedTrace,b("./finally")(f,y)),E=b("./catch_filter")(x),F=b("./nodeback"),G=o.errorObj,H=o.tryCatch;return f.prototype.toString=function(){return"[object Promise]"},f.prototype.caught=f.prototype.catch=function(a){var b=arguments.length;if(b>1){var c,d=new Array(b-1),e=0;for(c=0;c<b-1;++c){var f=arguments[c];if(!o.isObject(f))return m("expecting an object but got A catch statement predicate "+o.classString(f));d[e++]=f}return d.length=e,a=arguments[c],this.then(void 0,E(d,a,this))}return this.then(void 0,a)},f.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},f.prototype.then=function(a,b){if(C.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+o.classString(a);arguments.length>1&&(c+=", "+o.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},f.prototype.done=function(a,b){var c=this._then(a,b,void 0,void 0,void 0);c._setIsFinal()},f.prototype.spread=function(a){return"function"!=typeof a?m("expecting a function but got "+o.classString(a)):this.all()._then(a,void 0,void 0,w,void 0)},f.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},f.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},f.prototype.error=function(a){return this.caught(o.originatesFromRejection,a)},f.getNewLibraryCopy=c.exports,f.is=function(a){return a instanceof f},f.fromNode=f.fromCallback=function(a){var b=new f(v);b._captureStackTrace();var c=arguments.length>1&&!!Object(arguments[1]).multiArgs,d=H(a)(F(b,c));return d===G&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},f.all=function(a){return new z(a).promise()},f.cast=function(a){var b=y(a);return b instanceof f||(b=new f(v),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},f.resolve=f.fulfilled=f.cast,f.reject=f.rejected=function(a){var b=new f(v);return b._captureStackTrace(),b._rejectCallback(a,!0),b},f.setScheduler=function(a){if("function"!=typeof a)throw new t("expecting a function but got "+o.classString(a));return r.setScheduler(a)},f.prototype._then=function(a,b,c,d,e){var g=void 0!==e,h=g?e:new f(v),i=this._target(),k=i._bitField;g||(h._propagateFrom(this,3),h._captureStackTrace(),void 0===d&&0!==(2097152&this._bitField)&&(d=0!==(50397184&k)?this._boundValue():i===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,h));var l=j();if(0!==(50397184&k)){var m,n,p=i._settlePromiseCtx;0!==(33554432&k)?(n=i._rejectionHandler0,m=a):0!==(16777216&k)?(n=i._fulfillmentHandler0,m=b,i._unsetRejectionIsUnhandled()):(p=i._settlePromiseLateCancellationObserver,n=new u("late cancellation observer"),i._attachExtraTrace(n),m=b),r.invoke(p,i,{handler:null===l?m:"function"==typeof m&&o.domainBind(l,m),promise:h,receiver:d,value:n})}else i._addCallbacks(a,b,h,d,l);return h},f.prototype._length=function(){return 65535&this._bitField},f.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},f.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},f.prototype._setLength=function(a){this._bitField=this._bitField&-65536|65535&a},f.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},f.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},f.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},f.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},f.prototype._isFinal=function(){return(4194304&this._bitField)>0},f.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},f.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},f.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},f.prototype._setAsyncGuaranteed=function(){r.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},f.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==n)return void 0===b&&this._isBound()?this._boundValue():b},f.prototype._promiseAt=function(a){return this[4*a-4+2]},f.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},f.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},f.prototype._boundValue=function(){},f.prototype._migrateCallback0=function(a){var b=(a._bitField,a._fulfillmentHandler0),c=a._rejectionHandler0,d=a._promise0,e=a._receiverAt(0);void 0===e&&(e=n),this._addCallbacks(b,c,d,e,null)},f.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=n),this._addCallbacks(c,d,e,f,null)},f.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:o.domainBind(e,b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:o.domainBind(e,a)),"function"==typeof b&&(this[g+1]=null===e?b:o.domainBind(e,b))}return this._setLength(f+1),f},f.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},f.prototype._resolveCallback=function(a,b){if(0===(117506048&this._bitField)){if(a===this)return this._rejectCallback(k(),!1);var c=y(a,this);if(!(c instanceof f))return this._fulfill(a);b&&this._propagateFrom(c,2);var d=c._target();if(d===this)return void this._reject(k());var e=d._bitField;if(0===(50397184&e)){var g=this._length();g>0&&d._migrateCallback0(this);for(var h=1;h<g;++h)d._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(d)}else if(0!==(33554432&e))this._fulfill(d._value());else if(0!==(16777216&e))this._reject(d._reason());else{var i=new u("late cancellation observer");d._attachExtraTrace(i),this._reject(i)}}},f.prototype._rejectCallback=function(a,b,c){var d=o.ensureErrorObject(a),e=d===a;if(!e&&!c&&C.warnings()){var f="a promise was rejected with a non-error: "+o.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,!!b&&e),this._reject(a)},f.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},f.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0===(65536&e)){d._pushContext();var f;b===w?c&&"number"==typeof c.length?f=H(a).apply(this._boundValue(),c):(f=G,f.e=new t("cannot .spread() a non-array: "+o.classString(c))):f=H(a).call(b,c);var g=d._popContext();e=d._bitField,0===(65536&e)&&(f===x?d._reject(c):f===G?d._rejectCallback(f.e,!1):(C.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},f.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},f.prototype._followee=function(){return this._rejectionHandler0},f.prototype._setFollowee=function(a){this._rejectionHandler0=a},f.prototype._settlePromise=function(a,b,c,e){var g=a instanceof f,h=this._bitField,i=0!==(134217728&h);0!==(65536&h)?(g&&a._invokeInternalOnCancel(),c instanceof D&&c.isFinallyHandler()?(c.cancelPromise=a,H(b).call(c,e)===G&&a._reject(G.e)):b===l?a._fulfill(l.call(c)):c instanceof d?c._promiseCancelled(a):g||a instanceof z?a._cancel():c.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,c,e,a)):b.call(c,e,a):c instanceof d?c._isResolved()||(0!==(33554432&h)?c._promiseFulfilled(e,a):c._promiseRejected(e,a)):g&&(i&&a._setAsyncGuaranteed(),0!==(33554432&h)?a._fulfill(e):a._reject(e))},f.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,e=a.value;"function"==typeof b?c instanceof f?this._settlePromiseFromHandler(b,d,e,c):b.call(d,e,c):c instanceof f&&c._reject(e)},f.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},f.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},f.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},f.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var c=k();return this._attachExtraTrace(c),this._reject(c)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!==(134217728&b)?this._settlePromises():r.settlePromises(this))}},f.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16))return this._setRejected(),this._fulfillmentHandler0=a,this._isFinal()?r.fatalError(a,o.isNode):void((65535&b)>0?r.settlePromises(this):this._ensurePossibleRejectionHandled())},f.prototype._fulfillPromises=function(a,b){for(var c=1;c<a;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._rejectPromises=function(a,b){for(var c=1;c<a;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},f.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!==(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},f.prototype._settledValue=function(){var a=this._bitField;return 0!==(33554432&a)?this._rejectionHandler0:0!==(16777216&a)?this._fulfillmentHandler0:void 0},f.defer=f.pending=function(){C.deprecated("Promise.defer","new Promise");var a=new f(v);return{promise:a,resolve:g,reject:h}},o.notEnumerableProp(f,"_makeSelfResolutionError",k),b("./method")(f,v,y,m,C),b("./bind")(f,v,y,C),b("./cancel")(f,z,m,C),b("./direct_resolve")(f),b("./synchronous_inspection")(f),b("./join")(f,z,y,v,r,j),f.Promise=f,f.version="3.4.6",b("./map.js")(f,z,m,y,v,C),b("./call_get.js")(f),b("./using.js")(f,m,y,B,v,C),b("./timers.js")(f,v,C),b("./generators.js")(f,m,v,y,d,C),b("./nodeify.js")(f),b("./promisify.js")(f,v),b("./props.js")(f,z,y,m),b("./race.js")(f,v,y,m),b("./reduce.js")(f,z,m,y,v,C),b("./settle.js")(f,z,C),b("./some.js")(f,z,m),b("./filter.js")(f,v),b("./each.js")(f,v),b("./any.js")(f),o.toFastProperties(f),o.toFastProperties(f.prototype),i({a:1}),i({b:2}),i({c:3}),i(1),i(function(){}),i(void 0),i(!1),i(new f(v)),C.setBounds(q.firstLineError,o.lastLineError),f}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a){switch(a){case-2:return[];case-3:return{}}}function h(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var i=a("./util");i.isArray;return i.inherits(h,f),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function a(c,f){var h=d(this._values,this._promise);if(h instanceof b){h=h._target();var j=h._bitField;if(this._values=h,0===(50397184&j))return this._promise._setAsyncGuaranteed(),h._then(a,this._reject,void 0,this,f);if(0===(33554432&j))return 0!==(16777216&j)?this._reject(h._reason()):this._cancel();h=h._value()}if(h=i.asArray(h),null===h){var k=e("expecting an array or an iterable object but got "+i.classString(h)).reason();return void this._promise._rejectCallback(k,!1)}return 0===h.length?void(f===-5?this._resolveEmptyArray():this._resolve(g(f))):void this._iterate(h)},h.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;h<c;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0===(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!==(33554432&g)?this._promiseFulfilled(i._value(),h):0!==(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;return c>=this._length&&(this._resolve(this._values),!0)},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!w.test(a)}function e(a){try{return a.__isPromisified__===!0}catch(a){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,u);return!!d&&e(d)}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===x||x(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f,g,h){function i(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof k&&this!==j?this[k]:a,i=o(f,h);try{g.apply(e,p(arguments,i))}catch(a){f._rejectCallback(q(a),!0,!0)}return f._isFateSealed()||f._setAsyncGuaranteed(),f}var j=function(){return this}(),k=a;return"string"==typeof k&&(a=f),n.notEnumerableProp(i,"__isPromisified__",!0),i}function j(a,b,c,d,e){for(var f=new RegExp(y(b)+"$"),g=h(a,b,f,c),i=0,j=g.length;i<j;i+=2){var k=g[i],l=g[i+1],o=k+b;if(d===z)a[o]=z(k,m,k,l,b,e);else{var p=d(l,function(){return z(k,m,k,l,b,e)});n.notEnumerableProp(p,"__isPromisified__",!0),a[o]=p}}return n.toFastProperties(a),a}function k(a,b,c){return z(a,b,void 0,a,null,c)}var l,m={},n=a("./util"),o=a("./nodeback"),p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t="Async",u={__isPromisified__:!0},v=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+v.join("|")+")$"),x=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},y=function(a){return a.replace(/([$])/,"\\$")},z=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("expecting a function but got "+n.classString(a));if(e(a))return a;b=Object(b);var c=void 0===b.context?m:b.context,f=!!b.multiArgs,g=k(a,c,f);return n.copyDescriptors(a,g,d),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d=t);var e=b.filter;"function"!=typeof e&&(e=x);var f=b.promisifier;if("function"!=typeof f&&(f=z),!n.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var g=n.inheritedDataKeys(a),h=0;h<g.length;++h){var i=a[g[h]];"constructor"!==g[h]&&n.isClass(i)&&(j(i.prototype,d,e,f,c),j(i,d,e,f,c))}return j(a,d,e,f,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){var b,c=!1;if(void 0!==h&&a instanceof h)b=l(a),c=!0;else{var d=k.keys(a),e=d.length;b=new Array(2*e);for(var f=0;f<e;++f){var g=d[f];b[f]=a[g],b[f+e]=g}}this.constructor$(b),this._isMap=c,this._init$(void 0,-3)}function g(a){var c,g=d(a);return j(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var h,i=a("./util"),j=i.isObject,k=a("./es5");"function"==typeof Map&&(h=Map);var l=function(){function a(a,d){this[b]=a,this[b+c]=d,b++}var b=0,c=0;return function(d){c=d.size,b=0;var e=new Array(2*d.size);return d.forEach(a,e),e}}(),m=function(a){for(var b=new h,c=a.length/2|0,d=0;d<c;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};i.inherits(f,c),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){var d;if(this._isMap)d=m(this._values);else{d={};for(var e=this.length(),f=0,g=this.length();f<g;++f)d[this._values[f+e]]=this._values[f]}return this._resolve(d),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,e=this._length,f=c+e&b-1;d(this,0,this,b,f)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(a=g.asArray(a),null===a)return e("expecting an array or an iterable object but got "+g.classString(a));var j=new b(c);void 0!==f&&j._propagateFrom(f,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;m<n;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util"),h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a,c,d,e){this.constructor$(a);var g=m();this._fn=null===g?c:n.domainBind(g,c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,e===f?this._eachValues=Array(this._length):0===e?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function i(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function j(a,b,c,e){if("function"!=typeof b)return d("expecting a function but got "+n.classString(b));var f=new h(a,b,c,e);return f.promise()}function k(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(l,void 0,void 0,this,void 0)):l.call(this,c)}function l(a){var c=this.array,d=c._promise,e=o(c._fn);d._pushContext();var f;f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length),f instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var m=b._getDomain,n=a("./util"),o=n.tryCatch;n.inherits(h,c),h.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==f&&this._eachValues.push(a)},h.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues},h.prototype._init=function(){},h.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},h.prototype.shouldCopyValues=function(){return!1},h.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},h.prototype._resultCancelled=function(a){return a===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel()))},h.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;d<e;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(k,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(i,i,void 0,c,this)},b.prototype.reduce=function(a,b){return j(this,a,b,null)},b.reduce=function(a,b,c,d){return j(a,b,c,d)}}},{"./util":36}],29:[function(b,c,e){"use strict";var f,g=b("./util"),h=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},i=g.getNativePromise();if(g.isNode&&"undefined"==typeof MutationObserver){var j=d.setImmediate,k=a.nextTick;f=g.isRecentNode?function(a){j.call(d,a)}:function(b){k.call(a,b)}}else if("function"==typeof i&&"function"==typeof i.resolve){var l=i.resolve();f=function(a){l.then(a)}}else f="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:h:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div"),e=new MutationObserver(function(){a.classList.toggle("foo"),c=!1});e.observe(d,b);
var f=function(){c||(c=!0,d.classList.toggle("foo"))};return function(c){var d=new MutationObserver(function(){d.disconnect(),c()});d.observe(a,b),f()}}();c.exports=f},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a)}var f=b.PromiseInspection,g=a("./util");g.inherits(e,c),e.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;return c>=this._length&&(this._resolve(this._values),!0)},e.prototype._promiseFulfilled=function(a,b){var c=new f;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},e.prototype._promiseRejected=function(a,b){var c=new f;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new e(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||b<0)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util"),h=a("./errors").RangeError,i=a("./errors").AggregateError,j=g.isArray,k={};g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},e.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},e.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(k),this._checkOutcome())},e.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new i,b=this.length();b<this._values.length;++b)this._values[b]!==k&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0===(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};b.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},a.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},a.prototype._isCancelled=function(){return this._target().__isCancelled()},a.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(k(a)){if(a instanceof b)return a;var e=f(a);if(e===j){d&&d._pushContext();var i=b.reject(e.e);return d&&d._popContext(),i}if("function"==typeof e){if(g(a)){var i=new b(c);return a._then(i._fulfill,i._reject,void 0,i,null),i}return h(a,e,d)}}return a}function e(a){return a.then}function f(a){try{return e(a)}catch(a){return j.e=a,j}}function g(a){try{return l.call(a,"_promise0")}catch(a){return!1}}function h(a,d,e){function f(a){h&&(h._resolveCallback(a),h=null)}function g(a){h&&(h._rejectCallback(a,l,!0),h=null)}var h=new b(c),k=h;e&&e._pushContext(),h._captureStackTrace(),e&&e._popContext();var l=!0,m=i.tryCatch(d).call(a,f,g);return l=!1,h&&m===j&&(h._rejectCallback(m.e,!0,!0),h=null),k}var i=a("./util"),j=i.errorObj,k=i.isObject,l={}.hasOwnProperty;return d}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.handle=a}function f(a){return clearTimeout(this.handle),a}function g(a){throw clearTimeout(this.handle),a}var h=a("./util"),i=b.TimeoutError;e.prototype._resultCancelled=function(){clearTimeout(this.handle)};var j=function(a){return k(+this).thenReturn(a)},k=b.delay=function(a,f){var g,h;return void 0!==f?(g=b.resolve(f)._then(j,null,null,a,void 0),d.cancellation()&&f instanceof b&&g._setOnCancel(f)):(g=new b(c),h=setTimeout(function(){g._fulfill()},+a),d.cancellation()&&g._setOnCancel(new e(h)),g._captureStackTrace()),g._setAsyncGuaranteed(),g};b.prototype.delay=function(a){return k(a,this)};var l=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new i("operation timed out"):new i(b),h.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,h,i=new e(setTimeout(function(){c.isPending()&&l(c,b,h)},a));return d.cancellation()?(h=this.then(),c=h._then(f,g,void 0,i,void 0),c._setOnCancel(i)):c=this._then(f,g,void 0,i,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function h(a){setTimeout(function(){throw a},0)}function i(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function j(a,c){function e(){if(g>=j)return k._fulfill();var f=i(a[g++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(a){return h(a)}if(f instanceof b)return f._then(e,h,null,null,null)}e()}var g=0,j=a.length,k=new b(f);return e(),k}function k(a,b,c){this._data=a,this._promise=b,this._context=c}function l(a,b,c){this.constructor$(a,b,c)}function m(a){return k.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function n(a){this.length=a,this.promise=null,this[a-1]=null}var o=a("./util"),p=a("./errors").TypeError,q=a("./util").inherits,r=o.errorObj,s=o.tryCatch,t={};k.prototype.data=function(){return this._data},k.prototype.promise=function(){return this._promise},k.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():t},k.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==t?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},k.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},q(l,k),l.prototype.doDispose=function(a,b){var c=this.data();return c.call(a,a,b)},n.prototype._resultCancelled=function(){for(var a=this.length,c=0;c<a;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(a<2)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+o.classString(e));var f,h=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,h=!1):(f=arguments,a--);for(var i=new n(a),l=0;l<a;++l){var p=f[l];if(k.isDisposer(p)){var q=p;p=p.promise(),p._setDisposable(q)}else{var t=d(p);t instanceof b&&(p=t._then(m,null,null,{resources:i,index:l},void 0))}i[l]=p}for(var u=new Array(i.length),l=0;l<u.length;++l)u[l]=b.resolve(i[l]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return r.e=c.error(),r;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=s(e);var d=h?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return j(i,a)});return i.promise=w,w._setOnCancel(i),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new l(a,this,e());throw new p}}},{"./errors":12,"./util":36}],36:[function(b,c,e){"use strict";function f(){try{var a=F;return F=null,a.apply(this,arguments)}catch(a){return E.e=a,E}}function g(a){return F=a,f}function h(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function i(a){return"function"==typeof a||"object"==typeof a&&null!==a}function j(a){return h(a)?new Error(s(a)):a}function k(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;c<d;++c)e[c]=a[c];return e[c]=b,e}function l(a,b,c){if(!C.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function m(a,b,c){if(h(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return C.defineProperty(a,b,d),a}function n(a){throw a}function o(a){try{if("function"==typeof a){var b=C.names(a.prototype),c=C.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=J.test(a+"")&&C.names(a).length>0;if(c||d||e)return!0}return!1}catch(a){return!1}}function p(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function q(a){return K.test(a)}function r(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=b+e+c;return d}function s(a){try{return a+""}catch(a){return"[no string representation]"}}function t(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function u(a){try{m(a,"isOperational",!0)}catch(a){}}function v(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||a.isOperational===!0)}function w(a){return t(a)&&C.propertyIsWritable(a,"stack")}function x(a){return{}.toString.call(a)}function y(a,b,c){for(var d=C.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{C.defineProperty(b,f,C.getDescriptor(a,f))}catch(a){}}}function z(b,c){return O?a.env[b]:c}function A(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(a){}}function B(a,b){return a.bind(b)}var C=b("./es5"),D="undefined"==typeof navigator,E={e:{}},F,G="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof d?d:void 0!==this?this:null,H=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},I=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(C.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(a){return d}for(var g=0;g<f.length;++g){var h=f[g];if(!e[h]){e[h]=!0;var i=Object.getOwnPropertyDescriptor(a,h);null!=i&&null==i.get&&null==i.set&&d.push(h)}}a=C.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),J=/this\s*\.\s*\S+\s*=/,K=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(a){return w(a)?a:new Error(s(a))}:function(a){if(w(a))return a;try{throw new Error(s(a))}catch(a){return a}}}(),M=function(a){return C.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var b,c=[],d=a[Symbol.iterator]();!(b=d.next()).done;)c.push(b.value);return c};M=function(a){return C.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?N(a):null}}var O="undefined"!=typeof a&&"[object process]"===x(a).toLowerCase(),P={isClass:o,isIdentifier:q,inheritedDataKeys:I,getDataPropertyOrDefault:l,thrower:n,isArray:C.isArray,asArray:M,notEnumerableProp:m,isPrimitive:h,isObject:i,isError:t,canEvaluate:D,errorObj:E,tryCatch:g,inherits:H,withAppended:k,maybeWrapAsError:j,toFastProperties:p,filledRange:r,toString:s,canAttachTrace:w,ensureErrorObject:L,originatesFromRejection:v,markAsOriginatingFromRejection:u,classString:x,copyDescriptors:y,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:O,env:z,global:G,getNativePromise:A,domainBind:B};P.isRecentNode=P.isNode&&function(){var b=a.versions.node.split(".").map(Number);return 0===b[0]&&b[1]>10||b[0]>0}(),P.isNode&&P.toFastProperties(a);try{throw new Error}catch(a){P.lastLineError=a}c.exports=P},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:28}],3:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}"undefined"!=typeof b&&(b.exports=d),d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],4:[function(a,b,c){var c=b.exports=function(a){a||(a={}),"string"==typeof a&&(a={cookie:a}),void 0===a.cookie&&(a.cookie="");var b={};return b.get=function(b){for(var c=a.cookie.split(/;\s*/),d=0;d<c.length;d++){var e=c[d].split("="),f=unescape(e[0]);if(f===b)return unescape(e[1])}},b.set=function(b,c,d){d||(d={});var e=escape(b)+"="+escape(c);return d.expires&&(e+="; expires="+d.expires),d.path&&(e+="; path="+escape(d.path)),d.domain&&(e+="; domain="+escape(d.domain)),d.secure&&(e+="; secure"),a.cookie=e,e},b};if("undefined"!=typeof document){var d=c(document);c.get=d.get,c.set=d.set}},{}],5:[function(a,b,c){"function"==typeof Object.create?b.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],6:[function(a,b,c){(function(d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof d?d:"undefined"!=typeof self?self:this,e.localforage=a()}}(function(){return function b(c,d,e){function f(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};c[h][0].call(l.exports,function(a){var b=c[h][1][a];return f(b?b:a)},l,l.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&"object"==typeof a&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a(2),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=c=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){var e=this.state===r?a:b;g(c,e,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},c.resolve=k,c.reject=l,c.all=m,c.race=n},{2:2}],2:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||"undefined"==typeof a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(a,b,c){(function(b){"use strict";"function"!=typeof b.Promise&&(b.Promise=a(1))}).call(this,"undefined"!=typeof d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}function f(){try{return!!fa&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(fa&&"function"==typeof fa.open&&"undefined"!=typeof IDBKeyRange))}catch(a){return!1}}function g(){return"function"==typeof openDatabase}function h(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(a){return!1}}function i(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(var c="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function j(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}function k(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}function l(a){return new ia(function(b){var c=i([""]);a.objectStore(ja).put(c,"key"),a.onabort=function(a){a.preventDefault(),a.stopPropagation(),b(!1)},a.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);b(c||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function m(a){return"boolean"==typeof ga?ia.resolve(ga):l(a).then(function(a){return ga=a})}function n(a){var b=ha[a.name],c={};c.promise=new ia(function(a){c.resolve=a}),b.deferredOperations.push(c),b.dbReady?b.dbReady=b.dbReady.then(function(){return c.promise}):b.dbReady=c.promise}function o(a){var b=ha[a.name],c=b.deferredOperations.pop();c&&c.resolve()}function p(a,b){return new ia(function(c,d){if(a.db){if(!b)return c(a.db);n(a),a.db.close()}var e=[a.name];b&&e.push(a.version);var f=fa.open.apply(fa,e);b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),b.oldVersion<=1&&c.createObjectStore(ja)}catch(c){if("ConstraintError"!==c.name)throw c;console.warn('The database "'+a.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(){d(f.error)},f.onsuccess=function(){c(f.result),o(a)}})}function q(a){return p(a,!1)}function r(a){return p(a,!0)}function s(a,b){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version;if(d&&(a.version!==b&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),e||c){if(c){var f=a.db.version+1;f>a.version&&(a.version=f)}return!0}return!1}function t(a){return new ia(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function u(a){var b=k(atob(a.data));return i([b],{type:a.type})}function v(a){return a&&a.__local_forage_encoded_blob}function w(a){var b=this,c=b._initReady().then(function(){var a=ha[b._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return c.then(a,a),c}function x(a){function b(){return ia.resolve()}var c=this,d={db:null};if(a)for(var e in a)d[e]=a[e];ha||(ha={});var f=ha[d.name];f||(f={forages:[],db:null,dbReady:null,deferredOperations:[]},ha[d.name]=f),f.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=w);for(var g=[],h=0;h<f.forages.length;h++){var i=f.forages[h];i!==c&&g.push(i._initReady().catch(b))}var j=f.forages.slice(0);return ia.all(g).then(function(){return d.db=f.db,q(d)}).then(function(a){return d.db=a,s(d,c._defaultConfig.version)?r(d):a}).then(function(a){d.db=f.db=a,c._dbInfo=d;for(var b=0;b<j.length;b++){var e=j[b];e!==c&&(e._dbInfo.db=d.db,e._dbInfo.version=d.version)}})}function y(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.get(a);g.onsuccess=function(){var a=g.result;void 0===a&&(a=null),v(a)&&(a=u(a)),b(a)},g.onerror=function(){d(g.error)}}).catch(d)});return j(d,b),d}function z(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.openCursor(),h=1;g.onsuccess=function(){var c=g.result;if(c){var d=c.value;v(d)&&(d=u(d));var e=a(d,c.key,h++);void 0!==e?b(e):c.continue()}else b()},g.onerror=function(){d(g.error)}}).catch(d)});return j(d,b),d}function A(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=new ia(function(c,e){var f;d.ready().then(function(){return f=d._dbInfo,b instanceof Blob?m(f.db).then(function(a){return a?b:t(b)}):b}).then(function(b){var d=f.db.transaction(f.storeName,"readwrite"),g=d.objectStore(f.storeName);null===b&&(b=void 0),d.oncomplete=function(){void 0===b&&(b=null),c(b)},d.onabort=d.onerror=function(){var a=h.error?h.error:h.transaction.error;e(a)};var h=g.put(b,a)}).catch(e)});return j(e,c),e}function B(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readwrite"),g=f.objectStore(e.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){d(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;d(a)}}).catch(d)});return j(d,b),d}function C(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readwrite"),f=e.objectStore(d.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}).catch(c)});return j(c,a),c}function D(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){c(f.error)}}).catch(c)});return j(c,a),c}function E(a,b){var c=this,d=new ia(function(b,d){return a<0?void b(null):void c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=!1,h=f.openCursor();h.onsuccess=function(){var c=h.result;return c?void(0===a?b(c.key):g?b(c.key):(g=!0,c.advance(a))):void b(null)},h.onerror=function(){d(h.error)}}).catch(d)});return j(d,b),d}function F(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.openCursor(),g=[];f.onsuccess=function(){var b=f.result;return b?(g.push(b.key),void b.continue()):void a(g)},f.onerror=function(){c(f.error)}}).catch(c)});return j(c,a),c}function G(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j=new ArrayBuffer(g),k=new Uint8Array(j);for(b=0;b<h;b+=4)c=la.indexOf(a[b]),d=la.indexOf(a[b+1]),e=la.indexOf(a[b+2]),f=la.indexOf(a[b+3]),k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j}function H(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+=la[c[b]>>2],d+=la[(3&c[b])<<4|c[b+1]>>4],d+=la[(15&c[b+1])<<2|c[b+2]>>6],d+=la[63&c[b+2]];return c.length%3===2?d=d.substring(0,d.length-1)+"=":c.length%3===1&&(d=d.substring(0,d.length-2)+"=="),d}function I(a,b){var c="";if(a&&(c=a.toString()),a&&("[object ArrayBuffer]"===a.toString()||a.buffer&&"[object ArrayBuffer]"===a.buffer.toString())){var d,e=oa;a instanceof ArrayBuffer?(d=a,e+=qa):(d=a.buffer,"[object Int8Array]"===c?e+=sa:"[object Uint8Array]"===c?e+=ta:"[object Uint8ClampedArray]"===c?e+=ua:"[object Int16Array]"===c?e+=va:"[object Uint16Array]"===c?e+=xa:"[object Int32Array]"===c?e+=wa:"[object Uint32Array]"===c?e+=ya:"[object Float32Array]"===c?e+=za:"[object Float64Array]"===c?e+=Aa:b(new Error("Failed to get type for BinaryArray"))),b(e+H(d))}else if("[object Blob]"===c){var f=new FileReader;f.onload=function(){var c=ma+a.type+"~"+H(this.result);b(oa+ra+c)},f.readAsArrayBuffer(a)}else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}}function J(a){if(a.substring(0,pa)!==oa)return JSON.parse(a);var b,c=a.substring(Ba),d=a.substring(pa,Ba);if(d===ra&&na.test(c)){var e=c.match(na);b=e[1],c=c.substring(e[0].length)}var f=G(c);switch(d){case qa:return f;case ra:return i([f],{type:b});case sa:return new Int8Array(f);case ta:return new Uint8Array(f);case ua:return new Uint8ClampedArray(f);case va:return new Int16Array(f);case xa:return new Uint16Array(f);case wa:return new Int32Array(f);case ya:return new Uint32Array(f);case za:return new Float32Array(f);case Aa:return new Float64Array(f);default:throw new Error("Unkown type: "+d)}}function K(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];var e=new ia(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(a){return d(a)}c.db.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS "+c.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){b._dbInfo=c,a()},function(a,b){d(b)})})});return c.serializer=Ca,e}function L(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),
b(d)},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function M(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName,[],function(c,d){for(var f=d.rows,g=f.length,h=0;h<g;h++){var i=f.item(h),j=i.value;if(j&&(j=e.serializer.deserialize(j)),j=a(j,i.key,h+1),void 0!==j)return void b(j)}b()},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function N(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=new ia(function(c,e){d.ready().then(function(){void 0===b&&(b=null);var f=b,g=d._dbInfo;g.serializer.serialize(b,function(b,d){d?e(d):g.db.transaction(function(d){d.executeSql("INSERT OR REPLACE INTO "+g.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){c(f)},function(a,b){e(b)})},function(a){a.code===a.QUOTA_ERR&&e(a)})})}).catch(e)});return j(e,c),e}function O(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function P(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function Q(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function R(a,b){var c=this,d=new ia(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return j(d,b),d}function S(a){var b=this,c=new ia(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT key FROM "+d.storeName,[],function(b,c){for(var d=[],e=0;e<c.rows.length;e++)d.push(c.rows.item(e).key);a(d)},function(a,b){c(b)})})}).catch(c)});return j(c,a),c}function T(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return c.keyPrefix=c.name+"/",c.storeName!==b._defaultConfig.storeName&&(c.keyPrefix+=c.storeName+"/"),b._dbInfo=c,c.serializer=Ca,ia.resolve()}function U(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return j(c,a),c}function V(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return j(d,b),d}function W(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,f=localStorage.length,g=1,h=0;h<f;h++){var i=localStorage.key(h);if(0===i.indexOf(d)){var j=localStorage.getItem(i);if(j&&(j=b.serializer.deserialize(j)),j=a(j,i.substring(e),g++),void 0!==j)return j}}});return j(d,b),d}function X(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=localStorage.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return j(d,b),d}function Y(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++)0===localStorage.key(e).indexOf(a.keyPrefix)&&d.push(localStorage.key(e).substring(a.keyPrefix.length));return d});return j(c,a),c}function Z(a){var b=this,c=b.keys().then(function(a){return a.length});return j(c,a),c}function $(a,b){var c=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var d=c.ready().then(function(){var b=c._dbInfo;localStorage.removeItem(b.keyPrefix+a)});return j(d,b),d}function _(a,b,c){var d=this;"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a));var e=d.ready().then(function(){void 0===b&&(b=null);var c=b;return new ia(function(e,f){var g=d._dbInfo;g.serializer.serialize(b,function(b,d){if(d)f(d);else try{localStorage.setItem(g.keyPrefix+a,b),e(c)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||f(a),f(a)}})})});return j(e,c),e}function aa(a,b,c){"function"==typeof b&&a.then(b),"function"==typeof c&&a.catch(c)}function ba(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function ca(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&&(La(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}function da(a){for(var b in Ga)if(Ga.hasOwnProperty(b)&&Ga[b]===a)return!0;return!1}var ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},fa=e();"undefined"==typeof Promise&&"undefined"!=typeof a&&a(3);var ga,ha,ia=Promise,ja="local-forage-detect-blob-support",ka={_driver:"asyncStorage",_initStorage:x,iterate:z,getItem:y,setItem:A,removeItem:B,clear:C,length:D,key:E,keys:F},la="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ma="~~local_forage_type~",na=/^~~local_forage_type~([^~]+)~/,oa="__lfsc__:",pa=oa.length,qa="arbf",ra="blob",sa="si08",ta="ui08",ua="uic8",va="si16",wa="si32",xa="ur16",ya="ui32",za="fl32",Aa="fl64",Ba=pa+qa.length,Ca={serialize:I,deserialize:J,stringToBuffer:G,bufferToString:H},Da={_driver:"webSQLStorage",_initStorage:K,iterate:M,getItem:L,setItem:N,removeItem:O,clear:P,length:Q,key:R,keys:S},Ea={_driver:"localStorageWrapper",_initStorage:T,iterate:W,getItem:V,setItem:_,removeItem:$,clear:U,length:Z,key:X,keys:Y},Fa={},Ga={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Ha=[Ga.INDEXEDDB,Ga.WEBSQL,Ga.LOCALSTORAGE],Ia=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],Ja={description:"",driver:Ha.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},Ka={};Ka[Ga.INDEXEDDB]=f(),Ka[Ga.WEBSQL]=g(),Ka[Ga.LOCALSTORAGE]=h();var La=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Ma=function(){function a(b){d(this,a),this.INDEXEDDB=Ga.INDEXEDDB,this.LOCALSTORAGE=Ga.LOCALSTORAGE,this.WEBSQL=Ga.WEBSQL,this._defaultConfig=ca({},Ja),this._config=ca({},this._defaultConfig,b),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return a.prototype.config=function(a){if("object"===("undefined"==typeof a?"undefined":ea(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a)"storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),this._config[b]=a[b];return"driver"in a&&a.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new ia(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),f=new Error("Custom driver name already in use: "+a._driver);if(!a._driver)return void c(e);if(da(a._driver))return void c(f);for(var g=Ia.concat("_initStorage"),h=0;h<g.length;h++){var i=g[h];if(!i||!a[i]||"function"!=typeof a[i])return void c(e)}var j=ia.resolve(!0);"_support"in a&&(j=a._support&&"function"==typeof a._support?a._support():ia.resolve(!!a._support)),j.then(function(c){Ka[d]=c,Fa[d]=a,b()},c)}catch(a){c(a)}});return aa(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){var d=this,e=ia.resolve().then(function(){if(!da(a)){if(Fa[a])return Fa[a];throw new Error("Driver not found.")}switch(a){case d.INDEXEDDB:return ka;case d.LOCALSTORAGE:return Ea;case d.WEBSQL:return Da}});return aa(e,b,c),e},a.prototype.getSerializer=function(a){var b=ia.resolve(Ca);return aa(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return aa(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){f._config.driver=f.driver()}function e(a){return function(){function b(){for(;c<a.length;){var e=a[c];return c++,f._dbInfo=null,f._ready=null,f.getDriver(e).then(function(a){return f._extend(a),d(),f._ready=f._initStorage(f._config),f._ready}).catch(b)}d();var g=new Error("No available storage method found.");return f._driverSet=ia.reject(g),f._driverSet}var c=0;return b()}}var f=this;La(a)||(a=[a]);var g=this._getSupportedDrivers(a),h=null!==this._driverSet?this._driverSet.catch(function(){return ia.resolve()}):ia.resolve();return this._driverSet=h.then(function(){var a=g[0];return f._dbInfo=null,f._ready=null,f.getDriver(a).then(function(a){f._driver=a._driver,d(),f._wrapLibraryMethodsWithReady(),f._initDriver=e(g)})}).catch(function(){d();var a=new Error("No available storage method found.");return f._driverSet=ia.reject(a),f._driverSet}),aa(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!Ka[a]},a.prototype._extend=function(a){ca(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0;a<Ia.length;a++)ba(this,Ia[a])},a.prototype.createInstance=function(b){return new a(b)},a}(),Na=new Ma;b.exports=Na},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){(function(a){function d(a,b){return a.set(b[0],b[1]),a}function e(a,b){return a.add(b),a}function f(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function g(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function h(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function i(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function j(a){return a&&a.Object===Object?a:null}function k(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function l(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function m(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function n(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function o(){this.__data__=Nb?Nb(null):{}}function p(a){return this.has(a)&&delete this.__data__[a]}function q(a){var b=this.__data__;if(Nb){var c=b[a];return c===Ea?void 0:c}return wb.call(b,a)?b[a]:void 0}function r(a){var b=this.__data__;return Nb?void 0!==b[a]:wb.call(b,a)}function s(a,b){var c=this.__data__;return c[a]=Nb&&void 0===b?Ea:b,this}function t(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function u(){this.__data__=[]}function v(a){var b=this.__data__,c=M(b,a);if(c<0)return!1;var d=b.length-1;return c==d?b.pop():Fb.call(b,c,1),!0}function w(a){var b=this.__data__,c=M(b,a);return c<0?void 0:b[c][1]}function x(a){return M(this.__data__,a)>-1}function y(a,b){var c=this.__data__,d=M(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function z(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function A(){this.__data__={hash:new n,map:new(Jb||t),string:new n}}function B(a){return ea(this,a).delete(a)}function C(a){return ea(this,a).get(a)}function D(a){return ea(this,a).has(a)}function E(a,b){return ea(this,a).set(a,b),this}function F(a){this.__data__=new t(a)}function G(){this.__data__=new t}function H(a){return this.__data__.delete(a)}function I(a){return this.__data__.get(a)}function J(a){return this.__data__.has(a)}function K(a,b){var c=this.__data__;return c instanceof t&&c.__data__.length==Da&&(c=this.__data__=new z(c.__data__)),c.set(a,b),this}function L(a,b,c){var d=a[b];wb.call(a,b)&&ra(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function M(a,b){for(var c=a.length;c--;)if(ra(a[c][0],b))return c;return-1}function N(a,b){return a&&ba(b,Ba(b),a)}function O(a,b,c,d,e,g,h){var i;if(d&&(i=g?d(a,e,g,h):d(a)),void 0!==i)return i;if(!xa(a))return a;var j=Wb(a);if(j){if(i=ja(a),!b)return aa(a,i)}else{var l=ia(a),m=l==La||l==Ma;if(Xb(a))return U(a,b);if(l==Pa||l==Ga||m&&!g){if(k(a))return g?a:{};if(i=ka(m?{}:a),!b)return ca(a,N(i,a))}else{if(!jb[l])return g?a:{};i=la(a,l,O,b)}}h||(h=new F);var n=h.get(a);if(n)return n;if(h.set(a,i),!j)var o=c?da(a):Ba(a);return f(o||a,function(e,f){o&&(f=e,e=a[f]),L(i,f,O(e,b,c,d,f,a,h))}),i}function P(a){return xa(a)?Db(a):{}}function Q(a,b,c){var d=b(a);return Wb(a)?d:g(d,c(a))}function R(a,b){return wb.call(a,b)||"object"==typeof a&&b in a&&null===ga(a)}function S(a){return Hb(Object(a))}function T(a){return function(b){return null==b?void 0:b[a]}}function U(a,b){if(b)return a.slice();var c=new a.constructor(a.length);return a.copy(c),c}function V(a){var b=new a.constructor(a.byteLength);return new Bb(b).set(new Bb(a)),b}function W(a,b){var c=b?V(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.byteLength)}function X(a,b,c){var e=b?c(l(a),!0):l(a);return h(e,d,new a.constructor)}function Y(a){var b=new a.constructor(a.source,gb.exec(a));return b.lastIndex=a.lastIndex,b}function Z(a,b,c){var d=b?c(m(a),!0):m(a);return h(d,e,new a.constructor)}function $(a){return Ub?Object(Ub.call(a)):{}}function _(a,b){var c=b?V(a.buffer):a.buffer;return new a.constructor(c,a.byteOffset,a.length)}function aa(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function ba(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):a[g];L(c,g,h)}return c}function ca(a,b){return ba(a,ha(a),b)}function da(a){return Q(a,Ba,ha)}function ea(a,b){var c=a.__data__;return oa(b)?c["string"==typeof b?"string":"hash"]:c.map}function fa(a,b){var c=a[b];return za(c)?c:void 0}function ga(a){return Gb(Object(a))}function ha(a){return Cb(Object(a))}function ia(a){return xb.call(a)}function ja(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&wb.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function ka(a){return"function"!=typeof a.constructor||pa(a)?{}:P(ga(a))}function la(a,b,c,d){var e=a.constructor;switch(b){case Wa:return V(a);case Ia:case Ja:return new e(+a);case Xa:return W(a,d);case Ya:case Za:case $a:case _a:case ab:case bb:case cb:case db:case eb:return _(a,d);case Na:return X(a,d,c);case Oa:case Ta:return new e(a);case Ra:return Y(a);case Sa:return Z(a,d,c);case Ua:return $(a)}}function ma(a){var b=a?a.length:void 0;return wa(b)&&(Wb(a)||Aa(a)||sa(a))?i(b,String):null}function na(a,b){return b=null==b?Fa:b,!!b&&("number"==typeof a||ib.test(a))&&a>-1&&a%1==0&&a<b}function oa(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function pa(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||ub;return a===c}function qa(a){if(null!=a){try{return vb.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function ra(a,b){return a===b||a!==a&&b!==b}function sa(a){return ua(a)&&wb.call(a,"callee")&&(!Eb.call(a,"callee")||xb.call(a)==Ga)}function ta(a){return null!=a&&wa(Vb(a))&&!va(a)}function ua(a){return ya(a)&&ta(a)}function va(a){var b=xa(a)?xb.call(a):"";return b==La||b==Ma}function wa(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Fa}function xa(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function ya(a){return!!a&&"object"==typeof a}function za(a){if(!xa(a))return!1;var b=va(a)||k(a)?yb:hb;return b.test(qa(a))}function Aa(a){return"string"==typeof a||!Wb(a)&&ya(a)&&xb.call(a)==Ta}function Ba(a){var b=pa(a);if(!b&&!ta(a))return S(a);var c=ma(a),d=!!c,e=c||[],f=e.length;for(var g in a)!R(a,g)||d&&("length"==g||na(g,f))||b&&"constructor"==g||e.push(g);return e}function Ca(a){return function(){return a}}var Da=200,Ea="__lodash_hash_undefined__",Fa=9007199254740991,Ga="[object Arguments]",Ha="[object Array]",Ia="[object Boolean]",Ja="[object Date]",Ka="[object Error]",La="[object Function]",Ma="[object GeneratorFunction]",Na="[object Map]",Oa="[object Number]",Pa="[object Object]",Qa="[object Promise]",Ra="[object RegExp]",Sa="[object Set]",Ta="[object String]",Ua="[object Symbol]",Va="[object WeakMap]",Wa="[object ArrayBuffer]",Xa="[object DataView]",Ya="[object Float32Array]",Za="[object Float64Array]",$a="[object Int8Array]",_a="[object Int16Array]",ab="[object Int32Array]",bb="[object Uint8Array]",cb="[object Uint8ClampedArray]",db="[object Uint16Array]",eb="[object Uint32Array]",fb=/[\\^$.*+?()[\]{}|]/g,gb=/\w*$/,hb=/^\[object .+?Constructor\]$/,ib=/^(?:0|[1-9]\d*)$/,jb={};jb[Ga]=jb[Ha]=jb[Wa]=jb[Xa]=jb[Ia]=jb[Ja]=jb[Ya]=jb[Za]=jb[$a]=jb[_a]=jb[ab]=jb[Na]=jb[Oa]=jb[Pa]=jb[Ra]=jb[Sa]=jb[Ta]=jb[Ua]=jb[bb]=jb[cb]=jb[db]=jb[eb]=!0,jb[Ka]=jb[La]=jb[Va]=!1;var kb={function:!0,object:!0},lb=kb[typeof c]&&c&&!c.nodeType?c:void 0,mb=kb[typeof b]&&b&&!b.nodeType?b:void 0,nb=mb&&mb.exports===lb?lb:void 0,ob=j(lb&&mb&&"object"==typeof a&&a),pb=j(kb[typeof self]&&self),qb=j(kb[typeof window]&&window),rb=j(kb[typeof this]&&this),sb=ob||qb!==(rb&&rb.window)&&qb||pb||rb||Function("return this")(),tb=Array.prototype,ub=Object.prototype,vb=Function.prototype.toString,wb=ub.hasOwnProperty,xb=ub.toString,yb=RegExp("^"+vb.call(wb).replace(fb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zb=nb?sb.Buffer:void 0,Ab=sb.Symbol,Bb=sb.Uint8Array,Cb=Object.getOwnPropertySymbols,Db=Object.create,Eb=ub.propertyIsEnumerable,Fb=tb.splice,Gb=Object.getPrototypeOf,Hb=Object.keys,Ib=fa(sb,"DataView"),Jb=fa(sb,"Map"),Kb=fa(sb,"Promise"),Lb=fa(sb,"Set"),Mb=fa(sb,"WeakMap"),Nb=fa(Object,"create"),Ob=qa(Ib),Pb=qa(Jb),Qb=qa(Kb),Rb=qa(Lb),Sb=qa(Mb),Tb=Ab?Ab.prototype:void 0,Ub=Tb?Tb.valueOf:void 0;n.prototype.clear=o,n.prototype.delete=p,n.prototype.get=q,n.prototype.has=r,n.prototype.set=s,t.prototype.clear=u,t.prototype.delete=v,t.prototype.get=w,t.prototype.has=x,t.prototype.set=y,z.prototype.clear=A,z.prototype.delete=B,z.prototype.get=C,z.prototype.has=D,z.prototype.set=E,F.prototype.clear=G,F.prototype.delete=H,F.prototype.get=I,F.prototype.has=J,F.prototype.set=K;var Vb=T("length");Cb||(ha=function(){return[]}),(Ib&&ia(new Ib(new ArrayBuffer(1)))!=Xa||Jb&&ia(new Jb)!=Na||Kb&&ia(Kb.resolve())!=Qa||Lb&&ia(new Lb)!=Sa||Mb&&ia(new Mb)!=Va)&&(ia=function(a){var b=xb.call(a),c=b==Pa?a.constructor:void 0,d=c?qa(c):void 0;if(d)switch(d){case Ob:return Xa;case Pb:return Na;case Qb:return Qa;case Rb:return Sa;case Sb:return Va}return b});var Wb=Array.isArray,Xb=zb?function(a){return a instanceof zb}:Ca(!1);b.exports=O}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(a,b,c){function d(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function e(a,b,c,f,h){var i=-1,j=a.length;for(c||(c=g),h||(h=[]);++i<j;){var k=a[i];b>0&&c(k)?b>1?e(k,b-1,c,f,h):d(h,k):f||(h[h.length]=k)}return h}function f(a){return function(b){return null==b?void 0:b[a]}}function g(a){return x(a)||h(a)}function h(a){return j(a)&&t.call(a,"callee")&&(!v.call(a,"callee")||u.call(a)==p)}function i(a){return null!=a&&l(w(a))&&!k(a)}function j(a){return n(a)&&i(a)}function k(a){var b=m(a)?u.call(a):"";return b==q||b==r}function l(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=o}function m(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function n(a){return!!a&&"object"==typeof a}var o=9007199254740991,p="[object Arguments]",q="[object Function]",r="[object GeneratorFunction]",s=Object.prototype,t=s.hasOwnProperty,u=s.toString,v=s.propertyIsEnumerable,w=f("length"),x=Array.isArray;b.exports=e},{}],9:[function(a,b,c){(function(d){function e(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function f(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function g(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function h(a,b){return e(b,function(b){return[b,a[b]]})}function i(a){return a&&a.Object===Object?a:null}function j(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function k(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function l(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function m(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=[a,a]}),c}function n(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function o(){this.__data__=Vb?Vb(null):{}}function p(a){return this.has(a)&&delete this.__data__[a]}function q(a){var b=this.__data__;if(Vb){var c=b[a];return c===Ma?void 0:c}return Hb.call(b,a)?b[a]:void 0}function r(a){var b=this.__data__;return Vb?void 0!==b[a]:Hb.call(b,a)}function s(a,b){var c=this.__data__;return c[a]=Vb&&void 0===b?Ma:b,this}function t(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function u(){this.__data__=[]}function v(a){var b=this.__data__,c=O(b,a);if(c<0)return!1;var d=b.length-1;return c==d?b.pop():Nb.call(b,c,1),!0}function w(a){var b=this.__data__,c=O(b,a);return c<0?void 0:b[c][1]}function x(a){return O(this.__data__,a)>-1}function y(a,b){var c=this.__data__,d=O(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function z(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function A(){this.__data__={hash:new n,map:new(Rb||t),string:new n}}function B(a){return ea(this,a).delete(a)}function C(a){return ea(this,a).get(a)}function D(a){return ea(this,a).has(a)}function E(a,b){return ea(this,a).set(a,b),this}function F(a){var b=-1,c=a?a.length:0;for(this.__data__=new z;++b<c;)this.add(a[b])}function G(a){return this.__data__.set(a,Ma),this}function H(a){return this.__data__.has(a)}function I(a){this.__data__=new t(a)}function J(){this.__data__=new t}function K(a){return this.__data__.delete(a)}function L(a){return this.__data__.get(a)}function M(a){return this.__data__.has(a)}function N(a,b){var c=this.__data__;return c instanceof t&&c.__data__.length==La&&(c=this.__data__=new z(c.__data__)),c.set(a,b),this}function O(a,b){for(var c=a.length;c--;)if(ta(a[c][0],b))return c;return-1}function P(a,b){b=ma(b,a)?[b]:_(b);for(var c=0,d=b.length;null!=a&&c<d;)a=a[ra(b[c++])];return c&&c==d?a:void 0}function Q(a,b){return Hb.call(a,b)||"object"==typeof a&&b in a&&null===ha(a)}function R(a,b){return b in Object(a)}function S(a,b,c,d,e){return a===b||(null==a||null==b||!za(a)&&!Aa(b)?a!==a&&b!==b:T(a,b,S,c,d,e))}function T(a,b,c,d,e,f){var g=cc(a),h=cc(b),i=Sa,k=Sa;g||(i=ia(a),i=i==Ra?$a:i),h||(k=ia(b),k=k==Ra?$a:k);var l=i==$a&&!j(a),m=k==$a&&!j(b),n=i==k;if(n&&!l)return f||(f=new I),g||Ea(a)?ba(a,b,c,d,e,f):ca(a,b,i,c,d,e,f);if(!(e&Oa)){var o=l&&Hb.call(a,"__wrapped__"),p=m&&Hb.call(b,"__wrapped__");if(o||p){var q=o?a.value():a,r=p?b.value():b;return f||(f=new I),c(q,r,d,e,f)}}return!!n&&(f||(f=new I),da(a,b,c,d,e,f))}function U(a,b,c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=Object(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){h=c[e];var i=h[0],j=a[i],k=h[1];if(g&&h[2]){if(void 0===j&&!(i in a))return!1}else{var l=new I;if(d)var m=d(j,k,i,a,b,l);if(!(void 0===m?S(k,j,d,Na|Oa,l):m))return!1}}return!0}function V(a){return"function"==typeof a?a:null==a?Ia:"object"==typeof a?cc(a)?Y(a[0],a[1]):X(a):Ja(a)}function W(a){return Pb(Object(a))}function X(a){var b=fa(a);return 1==b.length&&b[0][2]?qa(b[0][0],b[0][1]):function(c){return c===a||U(c,a,b)}}function Y(a,b){return ma(a)&&pa(b)?qa(ra(a),b):function(c){var d=Fa(c,a);return void 0===d&&d===b?Ga(c,a):S(b,d,void 0,Na|Oa)}}function Z(a){return function(b){return null==b?void 0:b[a]}}function $(a){return function(b){return P(b,a)}}function _(a){return cc(a)?a:Ka(a)}function aa(a){return function(b){var c=ia(b);return c==Ya?k(b):c==bb?m(b):h(b,a(b))}}function ba(a,b,c,d,e,g){var h=e&Oa,i=a.length,j=b.length;if(i!=j&&!(h&&j>i))return!1;var k=g.get(a);if(k)return k==b;var l=-1,m=!0,n=e&Na?new F:void 0;for(g.set(a,b);++l<i;){var o=a[l],p=b[l];if(d)var q=h?d(p,o,l,b,a,g):d(o,p,l,a,b,g);if(void 0!==q){if(q)continue;m=!1;break}if(n){if(!f(b,function(a,b){if(!n.has(b)&&(o===a||c(o,a,d,e,g)))return n.add(b)})){m=!1;break}}else if(o!==p&&!c(o,p,d,e,g)){m=!1;break}}return g.delete(a),m}function ca(a,b,c,d,e,f,g){switch(c){case gb:if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)return!1;a=a.buffer,b=b.buffer;case fb:return!(a.byteLength!=b.byteLength||!d(new Lb(a),new Lb(b)));case Ta:case Ua:return+a==+b;case Va:return a.name==b.name&&a.message==b.message;case Za:return a!=+a?b!=+b:a==+b;case ab:case cb:return a==b+"";case Ya:var h=k;case bb:var i=f&Oa;if(h||(h=l),a.size!=b.size&&!i)return!1;var j=g.get(a);return j?j==b:(f|=Na,g.set(a,b),ba(h(a),h(b),d,e,f,g));case db:if(ac)return ac.call(a)==ac.call(b)}return!1}function da(a,b,c,d,e,f){var g=e&Oa,h=Ha(a),i=h.length,j=Ha(b),k=j.length;if(i!=k&&!g)return!1;for(var l=i;l--;){var m=h[l];if(!(g?m in b:Q(b,m)))return!1}var n=f.get(a);if(n)return n==b;var o=!0;f.set(a,b);for(var p=g;++l<i;){m=h[l];var q=a[m],r=b[m];if(d)var s=g?d(r,q,m,b,a,f):d(q,r,m,a,b,f);if(!(void 0===s?q===r||c(q,r,d,e,f):s)){o=!1;break}p||(p="constructor"==m)}if(o&&!p){var t=a.constructor,u=b.constructor;t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u)&&(o=!1)}return f.delete(a),o}function ea(a,b){var c=a.__data__;return na(b)?c["string"==typeof b?"string":"hash"]:c.map}function fa(a){for(var b=dc(a),c=b.length;c--;)b[c][2]=pa(b[c][1]);return b}function ga(a,b){var c=a[b];return Ba(c)?c:void 0}function ha(a){return Ob(Object(a))}function ia(a){return Ib.call(a)}function ja(a,b,c){b=ma(b,a)?[b]:_(b);for(var d,e=-1,f=b.length;++e<f;){var g=ra(b[e]);if(!(d=null!=a&&c(a,g)))break;a=a[g]}if(d)return d;var f=a?a.length:0;return!!f&&ya(f)&&la(g,f)&&(cc(a)||Ca(a)||ua(a))}function ka(a){var b=a?a.length:void 0;return ya(b)&&(cc(a)||Ca(a)||ua(a))?g(b,String):null}function la(a,b){return b=null==b?Qa:b,!!b&&("number"==typeof a||ub.test(a))&&a>-1&&a%1==0&&a<b}function ma(a,b){if(cc(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!Da(a))||(rb.test(a)||!qb.test(a)||null!=b&&a in Object(b))}function na(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function oa(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||Fb;return a===c}function pa(a){return a===a&&!za(a)}function qa(a,b){return function(c){return null!=c&&(c[a]===b&&(void 0!==b||a in Object(c)))}}function ra(a){if("string"==typeof a||Da(a))return a;var b=a+"";return"0"==b&&1/a==-Pa?"-0":b}function sa(a){if(null!=a){try{return Gb.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function ta(a,b){return a===b||a!==a&&b!==b}function ua(a){return wa(a)&&Hb.call(a,"callee")&&(!Mb.call(a,"callee")||Ib.call(a)==Ra)}function va(a){return null!=a&&ya(bc(a))&&!xa(a)}function wa(a){return Aa(a)&&va(a)}function xa(a){var b=za(a)?Ib.call(a):"";return b==Wa||b==Xa}function ya(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=Qa}function za(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Aa(a){return!!a&&"object"==typeof a}function Ba(a){if(!za(a))return!1;var b=xa(a)||j(a)?Jb:tb;return b.test(sa(a))}function Ca(a){return"string"==typeof a||!cc(a)&&Aa(a)&&Ib.call(a)==cb}function Da(a){return"symbol"==typeof a||Aa(a)&&Ib.call(a)==db}function Ea(a){return Aa(a)&&ya(a.length)&&!!vb[Ib.call(a)]}function Fa(a,b,c){var d=null==a?void 0:P(a,b);return void 0===d?c:d}function Ga(a,b){return null!=a&&ja(a,b,R)}function Ha(a){var b=oa(a);if(!b&&!va(a))return W(a);var c=ka(a),d=!!c,e=c||[],f=e.length;for(var g in a)!Q(a,g)||d&&("length"==g||la(g,f))||b&&"constructor"==g||e.push(g);return e}function Ia(a){return a}function Ja(a){return ma(a)?Z(ra(a)):$(a)}var Ka=a("lodash._stringtopath"),La=200,Ma="__lodash_hash_undefined__",Na=1,Oa=2,Pa=1/0,Qa=9007199254740991,Ra="[object Arguments]",Sa="[object Array]",Ta="[object Boolean]",Ua="[object Date]",Va="[object Error]",Wa="[object Function]",Xa="[object GeneratorFunction]",Ya="[object Map]",Za="[object Number]",$a="[object Object]",_a="[object Promise]",ab="[object RegExp]",bb="[object Set]",cb="[object String]",db="[object Symbol]",eb="[object WeakMap]",fb="[object ArrayBuffer]",gb="[object DataView]",hb="[object Float32Array]",ib="[object Float64Array]",jb="[object Int8Array]",kb="[object Int16Array]",lb="[object Int32Array]",mb="[object Uint8Array]",nb="[object Uint8ClampedArray]",ob="[object Uint16Array]",pb="[object Uint32Array]",qb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rb=/^\w*$/,sb=/[\\^$.*+?()[\]{}|]/g,tb=/^\[object .+?Constructor\]$/,ub=/^(?:0|[1-9]\d*)$/,vb={};vb[hb]=vb[ib]=vb[jb]=vb[kb]=vb[lb]=vb[mb]=vb[nb]=vb[ob]=vb[pb]=!0,vb[Ra]=vb[Sa]=vb[fb]=vb[Ta]=vb[gb]=vb[Ua]=vb[Va]=vb[Wa]=vb[Ya]=vb[Za]=vb[$a]=vb[ab]=vb[bb]=vb[cb]=vb[eb]=!1;var wb={function:!0,object:!0},xb=wb[typeof c]&&c&&!c.nodeType?c:void 0,yb=wb[typeof b]&&b&&!b.nodeType?b:void 0,zb=i(xb&&yb&&"object"==typeof d&&d),Ab=i(wb[typeof self]&&self),Bb=i(wb[typeof window]&&window),Cb=i(wb[typeof this]&&this),Db=zb||Bb!==(Cb&&Cb.window)&&Bb||Ab||Cb||Function("return this")(),Eb=Array.prototype,Fb=Object.prototype,Gb=Function.prototype.toString,Hb=Fb.hasOwnProperty,Ib=Fb.toString,Jb=RegExp("^"+Gb.call(Hb).replace(sb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kb=Db.Symbol,Lb=Db.Uint8Array,Mb=Fb.propertyIsEnumerable,Nb=Eb.splice,Ob=Object.getPrototypeOf,Pb=Object.keys,Qb=ga(Db,"DataView"),Rb=ga(Db,"Map"),Sb=ga(Db,"Promise"),Tb=ga(Db,"Set"),Ub=ga(Db,"WeakMap"),Vb=ga(Object,"create"),Wb=sa(Qb),Xb=sa(Rb),Yb=sa(Sb),Zb=sa(Tb),$b=sa(Ub),_b=Kb?Kb.prototype:void 0,ac=_b?_b.valueOf:void 0;n.prototype.clear=o,n.prototype.delete=p,n.prototype.get=q,n.prototype.has=r,n.prototype.set=s,t.prototype.clear=u,t.prototype.delete=v,t.prototype.get=w,t.prototype.has=x,t.prototype.set=y,z.prototype.clear=A,z.prototype.delete=B,z.prototype.get=C,z.prototype.has=D,z.prototype.set=E,F.prototype.add=F.prototype.push=G,F.prototype.has=H,I.prototype.clear=J,I.prototype.delete=K,I.prototype.get=L,I.prototype.has=M,I.prototype.set=N;var bc=Z("length");(Qb&&ia(new Qb(new ArrayBuffer(1)))!=gb||Rb&&ia(new Rb)!=Ya||Sb&&ia(Sb.resolve())!=_a||Tb&&ia(new Tb)!=bb||Ub&&ia(new Ub)!=eb)&&(ia=function(a){var b=Ib.call(a),c=b==$a?a.constructor:void 0,d=c?sa(c):void 0;if(d)switch(d){case Wb:return gb;case Xb:return Ya;case Yb:return _a;case Zb:return bb;case $b:return eb}return b});var cc=Array.isArray,dc=aa(Ha);b.exports=V}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._stringtopath":13}],10:[function(a,b,c){function d(a,b,c){var d=a[b];v.call(a,b)&&j(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function e(a,b,c,e){b=h(b,a)?[b]:f(b);for(var j=-1,l=b.length,m=l-1,n=a;null!=n&&++j<l;){var o=i(b[j]);if(k(n)){var p=c;if(j!=m){var q=n[o];p=e?e(q,o,n):void 0,void 0===p&&(p=null==q?g(b[j+1])?[]:{}:q)}d(n,o,p)}n=n[o]}return a}function f(a){return x(a)?a:n(a)}function g(a,b){return b=null==b?p:b,!!b&&("number"==typeof a||t.test(a))&&a>-1&&a%1==0&&a<b}function h(a,b){if(x(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!m(a))||(s.test(a)||!r.test(a)||null!=b&&a in Object(b))}function i(a){if("string"==typeof a||m(a))return a;var b=a+"";return"0"==b&&1/a==-o?"-0":b}function j(a,b){return a===b||a!==a&&b!==b}function k(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function l(a){return!!a&&"object"==typeof a}function m(a){
return"symbol"==typeof a||l(a)&&w.call(a)==q}var n=a("lodash._stringtopath"),o=1/0,p=9007199254740991,q="[object Symbol]",r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,t=/^(?:0|[1-9]\d*)$/,u=Object.prototype,v=u.hasOwnProperty,w=u.toString,x=Array.isArray;b.exports=e},{"lodash._stringtopath":13}],11:[function(a,b,c){(function(a){function d(a){return a&&a.Object===Object?a:null}function e(a){if("string"==typeof a)return a;if(g(a))return v?v.call(a):"";var b=a+"";return"0"==b&&1/a==-h?"-0":b}function f(a){return!!a&&"object"==typeof a}function g(a){return"symbol"==typeof a||f(a)&&s.call(a)==i}var h=1/0,i="[object Symbol]",j={function:!0,object:!0},k=j[typeof c]&&c&&!c.nodeType?c:void 0,l=j[typeof b]&&b&&!b.nodeType?b:void 0,m=d(k&&l&&"object"==typeof a&&a),n=d(j[typeof self]&&self),o=d(j[typeof window]&&window),p=d(j[typeof this]&&this),q=m||o!==(p&&p.window)&&o||n||p||Function("return this")(),r=Object.prototype,s=r.toString,t=q.Symbol,u=t?t.prototype:void 0,v=u?u.toString:void 0;b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(a,b,c){(function(a){function d(a){return a&&a.Object===Object?a:null}var e={function:!0,object:!0},f=e[typeof c]&&c&&!c.nodeType?c:void 0,g=e[typeof b]&&b&&!b.nodeType?b:void 0,h=d(f&&g&&"object"==typeof a&&a),i=d(e[typeof self]&&self),j=d(e[typeof window]&&window),k=d(e[typeof this]&&this),l=h||j!==(k&&k.window)&&j||i||k||Function("return this")();b.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(a,b,c){(function(d){function e(a){return a&&a.Object===Object?a:null}function f(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function g(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function h(){this.__data__=ga?ga(null):{}}function i(a){return this.has(a)&&delete this.__data__[a]}function j(a){var b=this.__data__;if(ga){var c=b[a];return c===L?void 0:c}return ba.call(b,a)?b[a]:void 0}function k(a){var b=this.__data__;return ga?void 0!==b[a]:ba.call(b,a)}function l(a,b){var c=this.__data__;return c[a]=ga&&void 0===b?L:b,this}function m(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function n(){this.__data__=[]}function o(a){var b=this.__data__,c=y(b,a);if(c<0)return!1;var d=b.length-1;return c==d?b.pop():ea.call(b,c,1),!0}function p(a){var b=this.__data__,c=y(b,a);return c<0?void 0:b[c][1]}function q(a){return y(this.__data__,a)>-1}function r(a,b){var c=this.__data__,d=y(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function s(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function t(){this.__data__={hash:new g,map:new(fa||m),string:new g}}function u(a){return z(this,a).delete(a)}function v(a){return z(this,a).get(a)}function w(a){return z(this,a).has(a)}function x(a,b){return z(this,a).set(a,b),this}function y(a,b){for(var c=a.length;c--;)if(E(a[c][0],b))return c;return-1}function z(a,b){var c=a.__data__;return B(b)?c["string"==typeof b?"string":"hash"]:c.map}function A(a,b){var c=a[b];return H(c)?c:void 0}function B(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function C(a){if(null!=a){try{return aa.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function D(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new TypeError(K);var c=function(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;if(f.has(e))return f.get(e);var g=a.apply(this,d);return c.cache=f.set(e,g),g};return c.cache=new(D.Cache||s),c}function E(a,b){return a===b||a!==a&&b!==b}function F(a){var b=G(a)?ca.call(a):"";return b==M||b==N}function G(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function H(a){if(!G(a))return!1;var b=F(a)||f(a)?da:R;return b.test(C(a))}function I(a){return null==a?"":J(a)}var J=a("lodash._basetostring"),K="Expected a function",L="__lodash_hash_undefined__",M="[object Function]",N="[object GeneratorFunction]",O=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,P=/[\\^$.*+?()[\]{}|]/g,Q=/\\(\\)?/g,R=/^\[object .+?Constructor\]$/,S={function:!0,object:!0},T=S[typeof c]&&c&&!c.nodeType?c:void 0,U=S[typeof b]&&b&&!b.nodeType?b:void 0,V=e(T&&U&&"object"==typeof d&&d),W=e(S[typeof self]&&self),X=e(S[typeof window]&&window),Y=e(S[typeof this]&&this),Z=V||X!==(Y&&Y.window)&&X||W||Y||Function("return this")(),$=Array.prototype,_=Object.prototype,aa=Function.prototype.toString,ba=_.hasOwnProperty,ca=_.toString,da=RegExp("^"+aa.call(ba).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=$.splice,fa=A(Z,"Map"),ga=A(Object,"create");g.prototype.clear=h,g.prototype.delete=i,g.prototype.get=j,g.prototype.has=k,g.prototype.set=l,m.prototype.clear=n,m.prototype.delete=o,m.prototype.get=p,m.prototype.has=q,m.prototype.set=r,s.prototype.clear=t,s.prototype.delete=u,s.prototype.get=v,s.prototype.has=w,s.prototype.set=x;var ha=D(function(a){var b=[];return I(a).replace(O,function(a,c,d,e){b.push(d?e.replace(Q,"$1"):c||a)}),b});D.Cache=s,b.exports=ha}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._basetostring":11}],14:[function(a,b,c){function d(a,b,c){return a===a&&(void 0!==c&&(a=a<=c?a:c),void 0!==b&&(a=a>=b?a:b)),a}function e(a){var b=f(a)?A.call(a):"";return b==r||b==s}function f(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function g(a){return!!a&&"object"==typeof a}function h(a){return"symbol"==typeof a||g(a)&&A.call(a)==t}function i(a){if(!a)return 0===a?a:0;if(a=k(a),a===o||a===-o){var b=a<0?-1:1;return b*p}return a===a?a:0}function j(a){var b=i(a),c=b%1;return b===b?c?b-c:b:0}function k(a){if("number"==typeof a)return a;if(h(a))return q;if(f(a)){var b=e(a.valueOf)?a.valueOf():a;a=f(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(u,"");var c=w.test(a);return c||x.test(a)?y(a.slice(2),c?2:8):v.test(a)?q:+a}function l(a,b,c){a=n(a),b=m(b);var e=a.length;return c=void 0===c?e:d(j(c),0,e),c-=b.length,c>=0&&a.indexOf(b,c)==c}var m=a("lodash._basetostring"),n=a("lodash.tostring"),o=1/0,p=1.7976931348623157e308,q=NaN,r="[object Function]",s="[object GeneratorFunction]",t="[object Symbol]",u=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,x=/^0o[0-7]+$/i,y=parseInt,z=Object.prototype,A=z.toString;b.exports=l},{"lodash._basetostring":11,"lodash.tostring":26}],15:[function(a,b,c){function d(a,b){b=f(b,a)?[b]:e(b);for(var c=0,d=b.length;null!=a&&c<d;)a=a[g(b[c++])];return c&&c==d?a:void 0}function e(a){return r(a)?a:k(a)}function f(a,b){if(r(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!i(a))||(o.test(a)||!n.test(a)||null!=b&&a in Object(b))}function g(a){if("string"==typeof a||i(a))return a;var b=a+"";return"0"==b&&1/a==-l?"-0":b}function h(a){return!!a&&"object"==typeof a}function i(a){return"symbol"==typeof a||h(a)&&q.call(a)==m}function j(a,b,c){var e=null==a?void 0:d(a,b);return void 0===e?c:e}var k=a("lodash._stringtopath"),l=1/0,m="[object Symbol]",n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,p=Object.prototype,q=p.toString,r=Array.isArray;b.exports=j},{"lodash._stringtopath":13}],16:[function(a,b,c){function d(a,b){return H.call(a,b)||"object"==typeof a&&b in a&&null===g(a)}function e(a){return function(b){return null==b?void 0:b[a]}}function f(a){return M(a)?a:v(a)}function g(a){return K(Object(a))}function h(a,b,c){b=j(b,a)?[b]:f(b);for(var d,e=-1,g=b.length;++e<g;){var h=k(b[e]);if(!(d=null!=a&&c(a,h)))break;a=a[h]}if(d)return d;var g=a?a.length:0;return!!g&&p(g)&&i(h,g)&&(M(a)||s(a)||l(a))}function i(a,b){return b=null==b?x:b,!!b&&("number"==typeof a||F.test(a))&&a>-1&&a%1==0&&a<b}function j(a,b){if(M(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!t(a))||(E.test(a)||!D.test(a)||null!=b&&a in Object(b))}function k(a){if("string"==typeof a||t(a))return a;var b=a+"";return"0"==b&&1/a==-w?"-0":b}function l(a){return n(a)&&H.call(a,"callee")&&(!J.call(a,"callee")||I.call(a)==y)}function m(a){return null!=a&&p(L(a))&&!o(a)}function n(a){return r(a)&&m(a)}function o(a){var b=q(a)?I.call(a):"";return b==z||b==A}function p(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=x}function q(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function r(a){return!!a&&"object"==typeof a}function s(a){return"string"==typeof a||!M(a)&&r(a)&&I.call(a)==B}function t(a){return"symbol"==typeof a||r(a)&&I.call(a)==C}function u(a,b){return null!=a&&h(a,b,d)}var v=a("lodash._stringtopath"),w=1/0,x=9007199254740991,y="[object Arguments]",z="[object Function]",A="[object GeneratorFunction]",B="[object String]",C="[object Symbol]",D=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,F=/^(?:0|[1-9]\d*)$/,G=Object.prototype,H=G.hasOwnProperty,I=G.toString,J=G.propertyIsEnumerable,K=Object.getPrototypeOf,L=e("length"),M=Array.isArray;b.exports=u},{"lodash._stringtopath":13}],17:[function(a,b,c){function d(a){return null==a}b.exports=d},{}],18:[function(a,b,c){function d(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function e(a){return n(Object(a))}function f(a){return!!a&&"object"==typeof a}function g(a){if(!f(a)||m.call(a)!=h||d(a))return!1;var b=e(a);if(null===b)return!0;var c=k.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&j.call(c)==l}var h="[object Object]",i=Object.prototype,j=Function.prototype.toString,k=i.hasOwnProperty,l=j.call(Object),m=i.toString,n=Object.getPrototypeOf;b.exports=g},{}],19:[function(a,b,c){function d(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function e(a,b){return B.call(a,b)||"object"==typeof a&&b in a&&null===h(a)}function f(a){return F(Object(a))}function g(a){return function(b){return null==b?void 0:b[a]}}function h(a){return E(Object(a))}function i(a){var b=a?a.length:void 0;return p(b)&&(H(a)||s(a)||l(a))?d(b,String):null}function j(a,b){return b=null==b?u:b,!!b&&("number"==typeof a||z.test(a))&&a>-1&&a%1==0&&a<b}function k(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||A;return a===c}function l(a){return n(a)&&B.call(a,"callee")&&(!D.call(a,"callee")||C.call(a)==v)}function m(a){return null!=a&&p(G(a))&&!o(a)}function n(a){return r(a)&&m(a)}function o(a){var b=q(a)?C.call(a):"";return b==w||b==x}function p(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=u}function q(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function r(a){return!!a&&"object"==typeof a}function s(a){return"string"==typeof a||!H(a)&&r(a)&&C.call(a)==y}function t(a){var b=k(a);if(!b&&!m(a))return f(a);var c=i(a),d=!!c,g=c||[],h=g.length;for(var l in a)!e(a,l)||d&&("length"==l||j(l,h))||b&&"constructor"==l||g.push(l);return g}var u=9007199254740991,v="[object Arguments]",w="[object Function]",x="[object GeneratorFunction]",y="[object String]",z=/^(?:0|[1-9]\d*)$/,A=Object.prototype,B=A.hasOwnProperty,C=A.toString,D=A.propertyIsEnumerable,E=Object.getPrototypeOf,F=Object.keys,G=g("length"),H=Array.isArray;b.exports=t},{}],20:[function(a,b,c){(function(a){function d(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function e(a){return a&&a.Object===Object?a:null}function f(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}function g(a){a=null==a?a:Object(a);var b=[];for(var c in a)b.push(c);return b}function h(a){return function(b){return null==b?void 0:b[a]}}function i(a){var b=a?a.length:void 0;return p(b)&&(P(a)||s(a)||l(a))?d(b,String):null}function j(a,b){return b=null==b?u:b,!!b&&("number"==typeof a||z.test(a))&&a>-1&&a%1==0&&a<b}function k(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||I;return a===c}function l(a){return n(a)&&J.call(a,"callee")&&(!N.call(a,"callee")||K.call(a)==v)}function m(a){return null!=a&&p(O(a))&&!o(a)}function n(a){return r(a)&&m(a)}function o(a){var b=q(a)?K.call(a):"";return b==w||b==x}function p(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=u}function q(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function r(a){return!!a&&"object"==typeof a}function s(a){return"string"==typeof a||!P(a)&&r(a)&&K.call(a)==y}function t(a){for(var b=-1,c=k(a),d=g(a),e=d.length,f=i(a),h=!!f,l=f||[],m=l.length;++b<e;){var n=d[b];h&&("length"==n||j(n,m))||"constructor"==n&&(c||!J.call(a,n))||l.push(n)}return l}var u=9007199254740991,v="[object Arguments]",w="[object Function]",x="[object GeneratorFunction]",y="[object String]",z=/^(?:0|[1-9]\d*)$/,A={function:!0,object:!0},B=A[typeof c]&&c&&!c.nodeType?c:void 0,C=A[typeof b]&&b&&!b.nodeType?b:void 0,D=e(B&&C&&"object"==typeof a&&a),E=e(A[typeof self]&&self),F=e(A[typeof window]&&window),G=e(A[typeof this]&&this),H=D||F!==(G&&G.window)&&F||E||G||Function("return this")(),I=Object.prototype,J=I.hasOwnProperty,K=I.toString,L=H.Reflect,M=L?L.enumerate:void 0,N=I.propertyIsEnumerable;M&&!N.call({valueOf:1},"valueOf")&&(g=function(a){return f(M(a))});var O=h("length"),P=Array.isArray;b.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function e(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function f(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function g(){this.__data__=Va?Va(null):{}}function h(a){return this.has(a)&&delete this.__data__[a]}function i(a){var b=this.__data__;if(Va){var c=b[a];return c===ha?void 0:c}return Pa.call(b,a)?b[a]:void 0}function j(a){var b=this.__data__;return Va?void 0!==b[a]:Pa.call(b,a)}function k(a,b){var c=this.__data__;return c[a]=Va&&void 0===b?ha:b,this}function l(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function m(){this.__data__=[]}function n(a){var b=this.__data__,c=F(b,a);if(c<0)return!1;var d=b.length-1;return c==d?b.pop():Ta.call(b,c,1),!0}function o(a){var b=this.__data__,c=F(b,a);return c<0?void 0:b[c][1]}function p(a){return F(this.__data__,a)>-1}function q(a,b){var c=this.__data__,d=F(c,a);return d<0?c.push([a,b]):c[d][1]=b,this}function r(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function s(){this.__data__={hash:new f,map:new(Ua||l),string:new f}}function t(a){return M(this,a).delete(a)}function u(a){return M(this,a).get(a)}function v(a){return M(this,a).has(a)}function w(a,b){return M(this,a).set(a,b),this}function x(a){this.__data__=new l(a)}function y(){this.__data__=new l}function z(a){return this.__data__.delete(a)}function A(a){return this.__data__.get(a)}function B(a){return this.__data__.has(a)}function C(a,b){var c=this.__data__;return c instanceof l&&c.__data__.length==ga&&(c=this.__data__=new r(c.__data__)),c.set(a,b),this}function D(a,b,c){(void 0===c||S(a[b],c))&&("number"!=typeof b||void 0!==c||b in a)||(a[b]=c)}function E(a,b,c){var d=a[b];Pa.call(a,b)&&S(d,c)&&(void 0!==c||b in a)||(a[b]=c)}function F(a,b){for(var c=a.length;c--;)if(S(a[c][0],b))return c;return-1}function G(a,b,c,e,f){if(a!==b){if(!Xa(b)&&!_(b))var g=da(b);d(g||b,function(d,h){if(g&&(h=d,d=b[h]),Y(d))f||(f=new x),H(a,b,h,c,G,e,f);else{var i=e?e(a[h],d,h+"",a,b,f):void 0;void 0===i&&(i=d),D(a,h,i)}})}}function H(a,b,c,d,e,f,g){var h=a[c],i=b[c],j=g.get(i);if(j)return void D(a,c,j);var k=f?f(h,i,c+"",a,b,g):void 0,l=void 0===k;l&&(k=i,Xa(i)||_(i)?Xa(h)?k=h:V(h)?k=J(h):(l=!1,k=ba(i,!0)):ca(i)||T(i)?T(h)?k=aa(h):!Y(h)||d&&W(h)?(l=!1,k=ba(i,!0)):k=h:l=!1),g.set(i,k),l&&e(k,i,d,f,g),g.delete(i),D(a,c,k)}function I(a){return function(b){return null==b?void 0:b[a]}}function J(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function K(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):a[g];E(c,g,h)}return c}function L(a){return ea(function(b,c){var d=-1,e=c.length,f=e>1?c[e-1]:void 0,g=e>2?c[2]:void 0;for(f=a.length>3&&"function"==typeof f?(e--,f):void 0,g&&P(c[0],c[1],g)&&(f=e<3?void 0:f,e=1),b=Object(b);++d<e;){var h=c[d];h&&a(b,h,d,f)}return b})}function M(a,b){var c=a.__data__;return Q(b)?c["string"==typeof b?"string":"hash"]:c.map}function N(a,b){var c=a[b];return $(c)?c:void 0}function O(a,b){return b=null==b?ia:b,!!b&&("number"==typeof a||Ka.test(a))&&a>-1&&a%1==0&&a<b}function P(a,b,c){if(!Y(c))return!1;var d=typeof b;return!!("number"==d?U(c)&&O(b,c.length):"string"==d&&b in c)&&S(c[b],a)}function Q(a){var b=typeof a;return"string"==b||"number"==b||"symbol"==b||"boolean"==b?"__proto__"!==a:null===a}function R(a){if(null!=a){try{return Oa.call(a)}catch(a){}try{return a+""}catch(a){}}return""}function S(a,b){return a===b||a!==a&&b!==b}function T(a){return V(a)&&Pa.call(a,"callee")&&(!Sa.call(a,"callee")||Qa.call(a)==ja)}function U(a){return null!=a&&X(Wa(a))&&!W(a)}function V(a){return Z(a)&&U(a)}function W(a){var b=Y(a)?Qa.call(a):"";return b==oa||b==pa}function X(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=ia}function Y(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function Z(a){return!!a&&"object"==typeof a}function $(a){if(!Y(a))return!1;var b=W(a)||e(a)?Ra:Ja;return b.test(R(a))}function _(a){return Z(a)&&X(a.length)&&!!La[Qa.call(a)]}function aa(a){return K(a,da(a))}var ba=a("lodash._baseclone"),ca=a("lodash.isplainobject"),da=a("lodash.keysin"),ea=a("lodash.rest"),fa=a("lodash._root"),ga=200,ha="__lodash_hash_undefined__",ia=9007199254740991,ja="[object Arguments]",ka="[object Array]",la="[object Boolean]",ma="[object Date]",na="[object Error]",oa="[object Function]",pa="[object GeneratorFunction]",qa="[object Map]",ra="[object Number]",sa="[object Object]",ta="[object RegExp]",ua="[object Set]",va="[object String]",wa="[object WeakMap]",xa="[object ArrayBuffer]",ya="[object DataView]",za="[object Float32Array]",Aa="[object Float64Array]",Ba="[object Int8Array]",Ca="[object Int16Array]",Da="[object Int32Array]",Ea="[object Uint8Array]",Fa="[object Uint8ClampedArray]",Ga="[object Uint16Array]",Ha="[object Uint32Array]",Ia=/[\\^$.*+?()[\]{}|]/g,Ja=/^\[object .+?Constructor\]$/,Ka=/^(?:0|[1-9]\d*)$/,La={};La[za]=La[Aa]=La[Ba]=La[Ca]=La[Da]=La[Ea]=La[Fa]=La[Ga]=La[Ha]=!0,La[ja]=La[ka]=La[xa]=La[la]=La[ya]=La[ma]=La[na]=La[oa]=La[qa]=La[ra]=La[sa]=La[ta]=La[ua]=La[va]=La[wa]=!1;var Ma=Array.prototype,Na=Object.prototype,Oa=Function.prototype.toString,Pa=Na.hasOwnProperty,Qa=Na.toString,Ra=RegExp("^"+Oa.call(Pa).replace(Ia,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sa=Na.propertyIsEnumerable,Ta=Ma.splice,Ua=N(fa,"Map"),Va=N(Object,"create");f.prototype.clear=g,f.prototype.delete=h,f.prototype.get=i,f.prototype.has=j,f.prototype.set=k,l.prototype.clear=m,l.prototype.delete=n,l.prototype.get=o,l.prototype.has=p,l.prototype.set=q,r.prototype.clear=s,r.prototype.delete=t,r.prototype.get=u,r.prototype.has=v,r.prototype.set=w,x.prototype.clear=y,x.prototype.delete=z,x.prototype.get=A,x.prototype.has=B,x.prototype.set=C;var Wa=I("length"),Xa=Array.isArray,Ya=L(function(a,b,c){G(a,b,c)});b.exports=Ya},{"lodash._baseclone":7,"lodash._root":12,"lodash.isplainobject":18,"lodash.keysin":20,"lodash.rest":24}],22:[function(a,b,c){function d(a,b){for(var c=-1,d=b.length,e=a.length;++c<d;)a[e+c]=b[c];return a}function e(a,b,c){var e=b(a);return p(a)?e:d(e,c(a))}function f(a,b){for(var c=-1,d=g(a),e=d.length,f={};++c<e;){var h=d[c],i=a[h];b(i,h)&&(f[h]=i)}return f}function g(a){return e(a,l,o)}function h(a){return n(Object(a))}function i(a){return m(Object(a))}function j(a,b){return b=k(b),f(a,function(a,c){return!b(a,c)})}var k=a("lodash._baseiteratee"),l=a("lodash.keysin"),m=Object.getOwnPropertySymbols,n=Object.getPrototypeOf;m||(i=function(){return[]});var o=m?function(a){for(var b=[];a;)d(b,i(a)),a=h(a);return b}:i,p=Array.isArray;b.exports=j},{"lodash._baseiteratee":9,"lodash.keysin":20}],23:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function e(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function f(a,b){return a=Object(a),e(b,function(b,c){return c in a&&(b[c]=a[c]),b},{})}function g(a){if("string"==typeof a||i(a))return a;var b=a+"";return"0"==b&&1/a==-l?"-0":b}function h(a){return!!a&&"object"==typeof a}function i(a){return"symbol"==typeof a||h(a)&&o.call(a)==m}var j=a("lodash._baseflatten"),k=a("lodash.rest"),l=1/0,m="[object Symbol]",n=Object.prototype,o=n.toString,p=k(function(a,b){return null==a?{}:f(a,d(j(b,1),g))});b.exports=p},{"lodash._baseflatten":8,"lodash.rest":24}],24:[function(a,b,c){function d(a,b,c){var d=c.length;switch(d){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function e(a,b){if("function"!=typeof a)throw new TypeError(m);return b=A(void 0===b?a.length-1:k(b),0),function(){for(var c=arguments,e=-1,f=A(c.length-b,0),g=Array(f);++e<f;)g[e]=c[b+e];switch(b){case 0:return a.call(this,g);case 1:return a.call(this,c[0],g);case 2:return a.call(this,c[0],c[1],g)}var h=Array(b+1);for(e=-1;++e<b;)h[e]=c[e];return h[b]=g,d(a,this,h)}}function f(a){var b=g(a)?z.call(a):"";return b==q||b==r}function g(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function h(a){return!!a&&"object"==typeof a}function i(a){return"symbol"==typeof a||h(a)&&z.call(a)==s}function j(a){if(!a)return 0===a?a:0;if(a=l(a),a===n||a===-n){var b=a<0?-1:1;return b*o}return a===a?a:0}function k(a){var b=j(a),c=b%1;return b===b?c?b-c:b:0}function l(a){if("number"==typeof a)return a;if(i(a))return p;if(g(a)){var b=f(a.valueOf)?a.valueOf():a;a=g(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(t,"");var c=v.test(a);return c||w.test(a)?x(a.slice(2),c?2:8):u.test(a)?p:+a}var m="Expected a function",n=1/0,o=1.7976931348623157e308,p=NaN,q="[object Function]",r="[object GeneratorFunction]",s="[object Symbol]",t=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,w=/^0o[0-7]+$/i,x=parseInt,y=Object.prototype,z=y.toString,A=Math.max;b.exports=e},{}],25:[function(a,b,c){function d(a,b,c){return null==a?a:e(a,b,c)}var e=a("lodash._baseset");b.exports=d},{"lodash._baseset":10}],26:[function(a,b,c){(function(a){function d(a){return a&&a.Object===Object?a:null}function e(a){if("string"==typeof a)return a;if(g(a))return w?w.call(a):"";var b=a+"";return"0"==b&&1/a==-i?"-0":b}function f(a){return!!a&&"object"==typeof a}function g(a){return"symbol"==typeof a||f(a)&&t.call(a)==j}function h(a){return null==a?"":e(a)}var i=1/0,j="[object Symbol]",k={function:!0,object:!0},l=k[typeof c]&&c&&!c.nodeType?c:void 0,m=k[typeof b]&&b&&!b.nodeType?b:void 0,n=d(l&&m&&"object"==typeof a&&a),o=d(k[typeof self]&&self),p=d(k[typeof window]&&window),q=d(k[typeof this]&&this),r=n||p!==(q&&q.window)&&p||o||q||Function("return this")(),s=Object.prototype,t=s.toString,u=r.Symbol,v=u?u.prototype:void 0,w=v?v.toString:void 0;b.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function e(a,b){return d(b,function(b){return a[b]})}function f(a){return a?e(a,g(a)):[]}var g=a("lodash.keys");b.exports=f},{"lodash.keys":19}],28:[function(a,b,c){function d(){m&&k&&(m=!1,k.length?l=k.concat(l):n=-1,l.length&&e())}function e(){if(!m){var a=h(d);m=!0;for(var b=l.length;b;){for(k=l,l=[];++n<b;)k&&k[n].run();n=-1,b=l.length}k=null,m=!1,i(a)}}function f(a,b){this.fun=a,this.array=b}function g(){}var h,i,j=b.exports={};!function(){try{h=setTimeout}catch(a){h=function(){throw new Error("setTimeout is not defined")}}try{i=clearTimeout}catch(a){i=function(){throw new Error("clearTimeout is not defined")}}}();var k,l=[],m=!1,n=-1;j.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];l.push(new f(a,b)),1!==l.length||m||h(e,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},j.title="browser",j.browser=!0,j.env={},j.argv=[],j.version="",j.versions={},j.on=g,j.addListener=g,j.once=g,j.off=g,j.removeListener=g,j.removeAllListeners=g,j.emit=g,j.binding=function(a){throw new Error("process.binding is not supported")},j.cwd=function(){return"/"},j.chdir=function(a){throw new Error("process.chdir is not supported")},j.umask=function(){return 0}},{}],29:[function(a,b,c){b.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];d<e;)f=b.call(null,f,a[d],++d,a);return f}},{}],30:[function(a,b,c){var d=a("bluebird"),e=b.exports=a("superagent"),f=e.Request;d.config({cancellation:!0});var g=function(a,b){var c;this.message=a,this.name="SuperagentPromiseError",this.originalError=b,Error.captureStackTrace?(Error.captureStackTrace(this,this.constructor),c=this.stack):c=new Error(a).stack,Object.defineProperty&&Object.defineProperty(this,"stack",{get:function(){return this.originalError?c+"\nCaused by:  "+this.originalError.stack:c}})};g.prototype=new Error,g.prototype.constructor=g,e.SuperagentPromiseError=g,f.prototype.promise=function(){var a,b=this;return new d(function(c,d,e){b.end(function(e,f){if("undefined"!=typeof f&&f.status>=400){var h="cannot "+b.method+" "+b.url+" ("+f.status+")";a=new g(h),a.status=f.status,a.body=f.body,a.res=f,d(a)}else e?d(new g("Bad request",e)):c(f)}),e(function(){b.abort()})})},f.prototype.then=function(){var a=this.promise();return a.then.apply(a,arguments)}},{bluebird:2,superagent:31}],31:[function(a,b,c){function d(){}function e(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function f(a){if(!t(a))return a;var b=[];for(var c in a)null!=a[c]&&g(b,c,a[c]);return b.join("&")}function g(a,b,c){return Array.isArray(c)?c.forEach(function(c){g(a,b,c)}):void a.push(encodeURIComponent(b)+"="+encodeURIComponent(c))}function h(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;f<g;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function i(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;h<i;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=v(c.slice(b+1)),g[d]=e;return g}function j(a){return/[\/+]json\b/.test(a)}function k(a){return a.split(/ *; */).shift()}function l(a){return r(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function m(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=i(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function n(a,b){var c=this;this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var a=null,b=null;try{b=new m(c)}catch(b){return a=new Error("Parser is unable to parse the response"),a.parse=!0,a.original=b,a.rawResponse=c.xhr&&c.xhr.responseText?c.xhr.responseText:null,a.statusCode=c.xhr&&c.xhr.status?c.xhr.status:null,c.callback(a)}if(c.emit("response",b),a)return c.callback(a,b);if(b.status>=200&&b.status<300)return c.callback(a,b);var d=new Error(b.statusText||"Unsuccessful HTTP response");d.original=a,d.response=b,d.status=b.status,c.callback(d,b)})}function o(a,b){var c=u("DELETE",a);return b&&c.end(b),c}var p,q=a("emitter"),r=a("reduce"),s=a("./request-base"),t=a("./is-object");p="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var u=b.exports=a("./request").bind(null,n);u.getXHR=function(){if(!(!p.XMLHttpRequest||p.location&&"file:"==p.location.protocol&&p.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1};var v="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};u.serializeObject=f,u.parseString=h,u.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},u.serialize={"application/x-www-form-urlencoded":f,"application/json":JSON.stringify},u.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},m.prototype.get=function(a){return this.header[a.toLowerCase()]},m.prototype.setHeaderProperties=function(a){var b=this.header["content-type"]||"";this.type=k(b);var c=l(b);for(var d in c)this[d]=c[d]},m.prototype.parseBody=function(a){var b=u.parse[this.type];return!b&&j(this.type)&&(b=u.parse["application/json"]),b&&a&&(a.length||a instanceof Object)?b(a):null},m.prototype.setStatusProperties=function(a){1223===a&&(a=204);var b=a/100|0;this.status=this.statusCode=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=(4==b||5==b)&&this.toError(),this.accepted=202==a,this.noContent=204==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},m.prototype.toError=function(){var a=this.req,b=a.method,c=a.url,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.url=c,e},u.Response=m,q(n.prototype);for(var w in s)n.prototype[w]=s[w];n.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},n.prototype.type=function(a){return this.set("Content-Type",u.types[a]||a),this},n.prototype.responseType=function(a){return this._responseType=a,this},n.prototype.accept=function(a){return this.set("Accept",u.types[a]||a),this},n.prototype.auth=function(a,b,c){switch(c||(c={type:"basic"}),c.type){case"basic":var d=btoa(a+":"+b);this.set("Authorization","Basic "+d);break;case"auto":this.username=a,this.password=b}return this},n.prototype.query=function(a){return"string"!=typeof a&&(a=f(a)),a&&this._query.push(a),this},n.prototype.attach=function(a,b,c){return this._getFormData().append(a,b,c||b.name),this},n.prototype._getFormData=function(){return this._formData||(this._formData=new p.FormData),this._formData},n.prototype.send=function(a){var b=t(a),c=this._header["content-type"];if(b&&t(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this._header["content-type"],"application/x-www-form-urlencoded"==c?this._data=this._data?this._data+"&"+a:a:this._data=(this._data||"")+a):this._data=a;return!b||e(a)?this:(c||this.type("json"),this)},m.prototype.parse=function(a){return p.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(a),this},m.prototype.serialize=function(a){return this._parser=a,this},n.prototype.callback=function(a,b){var c=this._callback;this.clearTimeout(),c(a,b)},n.prototype.crossDomainError=function(){var a=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");a.crossDomain=!0,a.status=this.status,a.method=this.method,a.url=this.url,this.callback(a)},n.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},n.prototype.withCredentials=function(){
return this._withCredentials=!0,this},n.prototype.end=function(a){var b=this,c=this.xhr=u.getXHR(),f=this._query.join("&"),g=this._timeout,h=this._formData||this._data;this._callback=a||d,c.onreadystatechange=function(){if(4==c.readyState){var a;try{a=c.status}catch(b){a=0}if(0==a){if(b.timedout)return b.timeoutError();if(b.aborted)return;return b.crossDomainError()}b.emit("end")}};var i=function(a){a.total>0&&(a.percent=a.loaded/a.total*100),a.direction="download",b.emit("progress",a)};this.hasListeners("progress")&&(c.onprogress=i);try{c.upload&&this.hasListeners("progress")&&(c.upload.onprogress=i)}catch(a){}if(g&&!this._timer&&(this._timer=setTimeout(function(){b.timedout=!0,b.abort()},g)),f&&(f=u.serializeObject(f),this.url+=~this.url.indexOf("?")?"&"+f:"?"+f),this.username&&this.password?c.open(this.method,this.url,!0,this.username,this.password):c.open(this.method,this.url,!0),this._withCredentials&&(c.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof h&&!e(h)){var k=this._header["content-type"],l=this._parser||u.serialize[k?k.split(";")[0]:""];!l&&j(k)&&(l=u.serialize["application/json"]),l&&(h=l(h))}for(var m in this.header)null!=this.header[m]&&c.setRequestHeader(m,this.header[m]);return this._responseType&&(c.responseType=this._responseType),this.emit("request",this),c.send("undefined"!=typeof h?h:null),this},u.Request=n,u.get=function(a,b,c){var d=u("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},u.head=function(a,b,c){var d=u("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},u.del=o,u.delete=o,u.patch=function(a,b,c){var d=u("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},u.post=function(a,b,c){var d=u("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},u.put=function(a,b,c){var d=u("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d}},{"./is-object":32,"./request":34,"./request-base":33,emitter:3,reduce:29}],32:[function(a,b,c){function d(a){return null!=a&&"object"==typeof a}b.exports=d},{}],33:[function(a,b,c){var d=a("./is-object");c.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},c.parse=function(a){return this._parser=a,this},c.timeout=function(a){return this._timeout=a,this},c.then=function(a,b){return this.end(function(c,d){c?b(c):a(d)})},c.use=function(a){return a(this),this},c.get=function(a){return this._header[a.toLowerCase()]},c.getHeader=c.get,c.set=function(a,b){if(d(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},c.unset=function(a){return delete this._header[a.toLowerCase()],delete this.header[a],this},c.field=function(a,b){return this._getFormData().append(a,b),this}},{"./is-object":32}],34:[function(a,b,c){function d(a,b,c){return"function"==typeof c?new a("GET",b).end(c):2==arguments.length?new a("GET",b):new a(b,c)}b.exports=d},{}],35:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=o+"/apis/v2/fans/"+a;j.default.get(d).withCredentials().set("X-Personalization-Source",u).end(function(a,d){if(a||!d.ok)c(a);else{var e=d&&d.body;l.default.setItem("fanapicache",{fan:e,id:e.id,timestamp:Date.now()}),b(e)}})}function f(a){return s.test(a)?new n.default(function(b,c){l.default.getItem("fanapicache").then(function(d){var f=d&&d.fan,g=Date.now()-d.timestamp>60*v*1e3;null===f||d.id!==a||g?e(a,b,c):b(f)}).catch(function(){e(a,b,c)})}):n.default.reject(new Error("Invalid SWID"))}function g(a,b){if(!s.test(a))return n.default.reject(new Error("Invalid SWID"));var c=p+"/apis/v2/fans/"+a+"/profile/settings/";return j.default.post(c).withCredentials().send(b).promise()}function h(){var a=arguments.length<=0||void 0===arguments[0]?t:arguments[0],b=a.sourceHeader,c=void 0===b?t.sourceHeader:b,d=a.cacheDuration,e=void 0===d?t.cacheDuration:d;return this instanceof h?(u=c,v=e,this):new h({sourceHeader:c,cacheDuration:e})}var i=a("superagent-bluebird-promise"),j=d(i),k=a("localforage"),l=d(k),m=a("bluebird"),n=d(m),o="//fan.api.espn.com",p="//fan.core.api.espn.com",q="espn-video-player",r=10,s=/^\{[\w\-]+\}/,t={sourceHeader:q,cacheDuration:r},u=void 0,v=void 0;h.prototype.getFanForId=function(a,b){return f(a).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.getAutoStartForFanId=function(a,b){return f(a).then(function(a){var b=a&&a.profile,c=b&&b.settings,d=c&&c.videoAutoStart&&c.videoAutoStart.value;return"2"!==d}).catch(function(){return!0}).tap(function(a){"function"==typeof b&&b(a)})},h.prototype.updateAutoStartForFanId=function(a,b,c){var d=(b?"1":"2").toString(),e={videoAutoStart:{value:d,lastUpdateDate:Date.now()}};return g(a,e).tap(function(a,b){"function"==typeof c&&c(a,b)}).then(function(a){var b=a&&a.body;l.default.setItem("fanapicache",{fan:b,id:b.id,timestamp:Date.now()})}).catch(function(){h.prototype.updateAutoStartCache(e)})},h.prototype.updateAutoStartCache=function(a){var b=a.videoAutoStart;l.default.getItem("fanapicache").then(function(a){var c=a&&a.fan,d=void 0;for(d in b)b.hasOwnProperty(d)&&(c.profile.settings.videoAutoStart[d]=b[d]);l.default.setItem("fanapicache",{fan:c,id:c.id,timestamp:Date.now()})}).catch(function(){})},h.prototype.getUidsForFanId=function(a,b){function c(a){return a.metaData.team||a.metaData.sport}function d(a){return a.metaData.team?a.metaData.team.uid:a.metaData.sport?a.metaData.sport.uid:null}return f(a).then(function(a){var b=a&&a.preferences;return b.filter(c).map(d)}).catch(function(){return[]}).tap(function(a){"function"==typeof b&&b(a)})},b.exports=h},{bluebird:2,localforage:6,"superagent-bluebird-promise":30}],36:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./FanAPI"),f=d(e);b.exports=f.default},{"./FanAPI":35}],37:[function(a,b,c){b.exports={name:"espn-video-player",publishConfig:{registry:"http://maven2.corp.espn3.com/content/repositories/espn-npm/"},repository:{type:"git",url:"git@code.espn.com:webdev/video.git"},scripts:{test:"NODE_ENV=test ./node_modules/.bin/mocha --reporter spec --timeout 10000 test/test.js","test-pages":"node test/pages/generate.js",postversion:"git push && git push --tags",copy2cdn:"cp distribution/* /Volumes/www_espn/prod/scripts/video-player-replacement"},version:"2.3.1",dependencies:{"espn-web-player-bundle":"1.2.7"},devDependencies:{async:"^2.0.1",cheerio:"^0.20.0","cookie-cutter":"^0.2.0",grunt:"0.4.5","grunt-browserify":"^5.0.0","grunt-contrib-concat":"0.4.0","grunt-contrib-connect":"0.8.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-jshint":"latest","grunt-contrib-qunit":"0.5.2","grunt-contrib-requirejs":"0.4.4","grunt-contrib-uglify":"^2.0.0","grunt-contrib-watch":"^1.0.0","grunt-jsbeautifier":"^0.2.10","grunt-shell":"^1.3.1",inherits:"^2.0.1",jsdom:"^9.5.0",lodash:"^4.0.0","lodash.endswith":"^4.0.0","lodash.get":"^4.0.0","lodash.has":"^4.0.0","lodash.isnil":"^4.0.0","lodash.merge":"^4.0.0","lodash.omitby":"^4.0.0","lodash.pick":"^4.0.0","lodash.set":"^4.0.0","lodash.values":"^4.0.0",mocha:"latest","phantomjs-prebuilt":"^2.1.7",request:"^2.74.0",should:"latest","watch-fanapi":"^1.6.3",watchify:"^3.7.0"}}},{}],38:[function(a,b,c){!function(b){function d(a,c,d){var f=c.embeddedPlayerId||"vjs_video_1",g={},h=b("#"+f),j=h.closest("[data-video]"),k=h.closest("article"),l=b("body");return a=e.merge({},i.default,a),Object.keys(a).forEach(function(b){g[b]=a[b](c,d,{$targerReplaceEl:h,$videoContainer:j,$videoArticle:k,$body:l})}),e.omitBy(g,e.isNil)}var e=a("./lodash"),f=a("cookie-cutter"),g=function(){var a={"#favfeed":"favorites","#news-feed":"news","#article-feed":"articles","#now-feed":"now",".lightbox-container":"popup","#gamepackage-gamebreak":"gamebreak",".col-two":"middlecolumn",".col-one":"leftcolumn"};return function(b,c){c=c||a;for(var d in c)if(b.closest(d).length)return c[d]}}(),h=function(){return"Not Applicable"},i={default:{ContentType:function(){return"Video"},SWID:function(){return e.get(window,"espn.core.SWID")||f.get("SWID")},Orientation:function(){if(window.espn_ui&&"desktop"===window.espn_ui.deviceType)return window.espn_ui.deviceType;var a,c;return e.has(window,"$.fn.width")?(a=b(window).width(),c=b(window).height()):(a=window.innerWidth,c=window.innerHeight),a>c?"Landscape":"Portrait"},UserAgent:function(){return e.get(window,"navigator.userAgent")},Network:h,Segment:h,AirDate:h,AirTime:h,AiringID:h,ProgramCode:h,SportCode:h,ClosedCaptioning:h,AccessMethod:h,AffiliateID:h,AffiliateName:h,PartnerPlayer:h},FC:{Site:function(){return e.get(window,"espn.track.data.omniture.site")},TrackingServer:function(){return e.get(window,"s_omni.trackingServer")},Edition:function(){return e.get(window,"espnfc.config.edition")},Language:function(){return e.get(window,"espnfc.config.language")},Sport:function(a,b,c){return e.get(window,"espn.track.data.omniture.sport")||c.$body.data("sport")},League:function(a,c,d){var f=b("video").closest("article").find(".tags li:first-child a").text();return f||e.get(window,"espn.track.data.omniture.league")||e.get(window,"espn.track.data.omniture.section")},PlayLocation:function(){return e.get(window,"espn.track.data.omniture.pageName")},InsiderStatus:function(){return e.get(window,"espnfc.insider.access")?"yes":"no"},LoginStatus:function(){return e.get(window,"espn.core.loggedIn")?"[Registered:Logged in Active]":""},Personalization:function(){return e.get(window,"espn.track.favStatus")},StoryID:function(a,c,d){return b("video").closest("article").data("content-id")}},sCore:{Site:function(){return e.get(window,"espn.track.data.omniture.site")},TrackingServer:function(){return e.get(window,"s_omni.trackingServer")},VideoType:function(){return"VOD"},Edition:function(){var a=e.get(window,"espn.i18n.lang")||"",b=e.get(window,"espn.i18n.country")||"";return a+"-"+b},Language:function(){return e.get(window,"espn.i18n.lang")},Sport:function(a,b,c){return c.$body.data("sport")||e.get(window,"espn.track.data.omniture.sport")},Placement:function(a,b,c){var d=e.get(window,"espn.track.data.omniture.pageName")||"index",f=g(c.$videoArticle)||"standalone";return d+":"+f},PlayLocation:function(){return e.get(window,"espn.track.data.omniture.pageName")},League:function(){return e.get(window,"espn.track.data.omniture.league")},InsiderStatus:function(){return/(has insider\:yes)|(insider-yes)/.test(e.get(window,"espn.memberservices.insider")||"")?"yes":"no"},LoginStatus:function(){return e.get(window,"espn.core.loggedIn")?"[Registered:Logged in Active]":""},Personalization:function(){return e.get(window,"espn.track.favStatus")},Embedded:function(a){return e.get(a,"_embedOptions.wasUserInitiated")?"no":"yes"},GameID:function(){return e.get(window,"espn.gamepackage.gameId")},StoryID:function(a,b,c){return c.$videoArticle.data("id")}}};Object.keys(i).forEach(function(a){c[a]=function(b,c){var e=d(i[a],b,c);return e}})}(jQuery)},{"./lodash":41,"cookie-cutter":4}],39:[function(a,b,c){"use strict";var d=a("./lodash");c.getDeprecated=function(a){return function(){return console.warn(a,"has been deprecated")}};var e={".us":"en-us",".espnfc.com":"en-www",".com":"en-us",".co.uk":"en-gb",".com.au":"en-au",".in":"en-in","espndeportes.com":"es-us","espndeportes.espn.com":"es-us","espndeportes.espnqa.com":"es-us",".com.mx":"es-mx",".com.co":"es-co",".com.ve":"es-ve",".cl":"es-cl"};c.isClipId=function(a){return/^[0-9]*$/.test(a)||"string"==typeof a&&a.indexOf(":")!==-1},c.detectLocale=function(){var a=d.get(window,"espn.i18n.lang"),b=d.get(window,"espn.i18n.country");if(a&&b)return a+"-"+b;var c=window.location.hostname||"";for(var f in e)if(d.endsWith(c,f))return e[f];return"en-us"},c.embeddedPlay=function(){function a(a,b){var c=f.parseUri(a.attr("href")).queryKey.id||null,e=a&&a.length?a.metadata():{},i=a.siblings("span").html();null!==i&&f("#videoInfo").html(i),e.endCard=e.endCard||"false",(a.parent().hasClass("last")||j.children("li").length<=1)&&(e.endCard="true"),"undefined"==typeof e.playRelatedExternally&&(e.playRelatedExternally="false"),"true"==e.playRelatedExternally&&(h=!1,e.endCard="true");var k=d.get(window,"ESPN_GLOBALS.videoPlayers");if(k){var l,m,n;for(var o in k)if(l=k[o],m=f("."+o).first(),m.length||1===Object.keys(k).length){d.merge(e,l),m.length&&(n=m.attr("id"),n||(m.attr("id",o),n=o),e.targetReplaceId=n);break}}e.endCard&&(e.endCard="true"===e.endCard||e.endCard===!0),e.cms||(e.cms="espn");var p=f("div.videoplayer");p.addClass("videoplayer-show"),e.width&&p.width(e.width),e.height&&p.height(e.height),p.css("position","relative"),g.video.play(parseInt(c,10),e,b)}function b(b,c){b.addClass("active").siblings().removeClass("active"),b.next().addClass("next").siblings().removeClass("next"),0===b.next().length&&f(".video-player").hasClass("next")&&(f(".mod-video-playlist").hide(),f(".video-player").removeClass("with-playlist")),a(b.find("a"),c)}var c,e,f=window.jQuery,g=window.espn||{},h=!0,i=f("#videotoplay"),j=f(".mod-video-playlist ul");a(i,!1),j.children("li").bind("click",function(a){a.preventDefault(),h=!0,e=f(this),b(e,!0)}),c=f.subscribe("espn.video.complete",function(){h&&(e=j.find("li.active"),e.next().length>0&&b(e.next(),!1))})}},{"./lodash":41}],40:[function(a,b,c){!function(c){"use strict";function d(){this.$targetElement=null,this.autoClose=!1,this.clip=null,this.cms=null,this.currentIndex=null,this.currentPlayingId=null,this.hasPlaylist=null,this.height=null,this.isPlaying=!1,this.originalIndex=null,this.playType=null,this.playVerified=null,this.playVideo=null,this.playerElement=null,this.playerReady=null,this.state=null,this.targetReplaceId=null,this.targetElement=null,this.useExternalIdFilter=null,this.videoPlaylist=null,this.width=null,this._duration=NaN,this._startedCurrentMedia=!1,this._currentMediaId="",this._adPlaying=!1,this._embedGuid=null,this._embedEl=null,this._embedOptions=null,this._embedCallback=null,this._propogatedEvents=null,ESPNVideoPlayer.prototype.constructor.apply(this,arguments)}var e=a("./lodash"),f=a("./espn-legacy-helper-scripts.js"),g=a("inherits"),h=!1;g(d,ESPNVideoPlayer),Object.defineProperty(d.prototype,"duration",{set:function(a){a!==this._duration&&(this._duration=a,isNaN(a)||d.publish("espn.video.totalTimeChanged",[{totalTime:a},this.embeddedPlayerId,"totalTimeChanged"]))},get:function(){return this._duration}}),Object.defineProperty(d.prototype,"$container",{get:function(){return this.player&&this.player.el?c(this.player.el()).parent():c()}}),Object.defineProperty(d.prototype,"autoPlay",{get:function(){return!!this.player&&this.player.autoplay()}}),Object.defineProperty(d.prototype,"currentMediaId",{set:function(a){a!==this._currentMediaId&&(this._currentMediaId=a,this._startedCurrentMedia=!1)},get:function(){return this._currentMediaId}}),d.prototype.init=function(){this._propogatedEvents=[],this.bindEvents()},d.prototype.bindEvents=function(){this._propogateToLegacyEvent("useractive","espn.video.hoverIn",c.noop),this._propogateToLegacyEvent("userinactive","espn.video.hoverOut",c.noop),this._propogateToLegacyEvent("ads-ad-started","espn.video.ad.start",function(){var a=e.get(this,"player.ads.adTimeoutTimeout")||15,b=e.get(this,"player.ads.ad.duration")||15;return this._adPlaying=!0,[b,a,this.player.id(),"ad.start"]}.bind(this)),this._propogateToLegacyEvent("adend","espn.video.ad.end",function(){return this._adPlaying=!1,[{},this.player.id(),"ad.end"]}.bind(this)),this._propogateToLegacyEvent("loadedplayersource","espn.video.playerjsReady"),this.onDurationChange=this.onDurationChange.bind(this),this.player.on("durationchange",this.onDurationChange),this.onLoadStart=this.onLoadStart.bind(this),this.player.on("loadstart",this.onLoadStart),this.onContentStartedPlaying=this.onContentStartedPlaying.bind(this),this.player.on("playing",this.onContentStartedPlaying),this.onEnded=this.onEnded.bind(this),this.player.on("ended",this.onEnded),this.onContentLoaded=this.onContentLoaded.bind(this),this.player.on("espn.contentloaded",this.onContentLoaded),this._propogateToLegacyEvent("fullscreenchange","espn.video.fullscreenChanged"),this._propogateToLegacyEvent("loadedplayersource","espn.video.playerjsReady"),this._propogateToLegacyEvent("loadeddata","espn.video.loadComplete"),this._propogateToLegacyEvent("timeupdate","espn.video.playheadTimeChanged",function(){return[{bandwidth:NaN,playheadTime:this.player.currentTime()},this.embeddedPlayerId,"playheadTimeChanged"]}),this._propogateToLegacyEvent("pause","espn.video.pause",function(){return[{state:"paused"},this.embeddedPlayerId,"stateChanged "]}),this._propogateToLegacyEvent("posterchange","espn.video.thumbnailReady"),this._propogateToLegacyEvent("switch","espn.video.switch",function(){return[this.autoPlay,this.currentMediaId,""]}),this._propogateToLegacyEvent("seeked","espn.video.seeked"),this._propogateToLegacyEvent("volumechange","espn.video.volumeChanged",function(){return[{volume:this.player.volume()},this.embeddedPlayerId,"volumeChanged"]}),this._propogateToLegacyEvent("loadedmetadata","espn.video.metadataReady")},d.prototype.onContentLoaded=function(a,b){var c=b&&b.clipId&&parseInt(b.clipId,10)||b&&b.id;c&&(this.currentMediaId=c)},d.prototype.onLoadStart=function(){var a=this.player.mediainfo;h||(h=!0,d.publish("espn.video.ready",[{},this.embeddedPlayerId,"apiReady","espn.video.ready"]),d.publish("espn.video.init",[{},this.embeddedPlayerId,"apiReady","espn.video.ready"])),a&&d.publish("espn.video.embedCodeChanged",[this._getShimmedEmbedCode(),this.embeddedPlayerId,"embedCodeChanged"])},d.prototype.onEnded=function(){(this.player||{}).ads&&"content-playback"!==this.player.ads.state||d.publish("espn.video.complete",[{},this.embeddedPlayerId,"playComplete"])},d.prototype.onDurationChange=function(){var a=(this.player||{}).mediainfo;this.duration=a?a.duration:NaN},d.prototype.onContentStartedPlaying=function(){this._startedCurrentMedia||(this._startedCurrentMedia=!0,d.publish("espn.video.embedCodeChanged",["init"]),d.publish("espn.video.volumeChanged",[{volume:this.player.volume()}],this.embeddedPlayerId,"volumeChanged"),d.publish("espn.video.contentStarted",[this.currentMediaId,"manual"]),d.publish("espn.video.bitrateChanged",[{videoBitrate:NaN},this.embeddedPlayerId,"bitrateChanged"]),d.publish("espn.video.startContentDownload",[{streamURL:e.get(this,"player.mediainfo.sources.0.src".split("."))},this.embeddedPlayerId,"bitrateChanged"]),d.publish("espn.video.play",[{state:"playing"},this.embeddedPlayerId,"stateChanged"]),d.publish("espn.video.contentStarted",["",this.embeddedPlayerId,"contentStarted"]))},d.prototype.onLoadedMetaData=function(){},d.prototype.embed=function(a,b,e,f){this._embedGuid=a,this._embedEl=b,this._embedOptions=e,this._embedCallback=f,this._setTarget(b),this.currentMediaId=a||e.clipId,this.clip={id:this.currentMediaId},d.publish("espn.video.embed.begin"),d.publish("espn.video.playerLoading",[{},this.targetReplaceId,"playerLoading"]);var g=ESPNVideoPlayer.prototype.embed.call(this,a,b,e,function(){this.init();var a=this.player.el();a&&a.getAttribute&&(this.embeddedPlayerId=a.getAttribute("id")),d.publish("espn.video.playerEmbedded",[{},this.embeddedPlayerId,"playerEmbedded"]),d.publish("espn.video.authTokenChanged",[{auth_token:""},this.embeddedPlayerId,"authTokenChanged"]),this.currentMediaId||this.onLoadStart(),(f||c.noop).apply(this,arguments)}.bind(this));return g},d.prototype.buildModuleParams=f.getDeprecated("buildModuleParams"),d.prototype.handleEvents=f.getDeprecated("handleEvents"),d.prototype.pauseVideo=function(){this.player.pause()},d.prototype.skipAd=function(){if(this._adPlaying){var a=e.merge({},this._embedOptions),b=this.player&&this.player.mediainfo,c=this._embedGuid;b&&(c=b.reference_id,e.merge(a,{clipId:parseInt(b.id,10),cerebroId:b.reference_id})),this._currentMediaId="",this._adPlaying=!1,this.unembed(!1),b&&this.embed(c,this._embedEl,e.merge({},a,{preroll:!1,postroll:!1}))}},d.prototype.switchVideo=function(a){if("object"==typeof a&&0!==Object.keys(a||{}).length){var b;a.id?(a=e.merge({},a,{clipId:a.id}),delete a.id):a.cerebroId&&(b=a.cerebroId),b||a.clipId?ESPNVideoPlayer.prototype.switchVideo.call(this,b,a):console.log("cannot switch video without a clipId or cerebroId")}},d.prototype.unbindEvents=function(){this.player&&((this._propogatedEvents||[]).forEach(function(a){this.player.off(a[0],a[1])}.bind(this)),this._propogatedEvents=[],this.player.off("espn.contentloaded",this.onContentLoaded),this.player.off("durationchange",this.onDurationChange),this.player.off("loadstart",this.onLoadStart),this.player.off("playing",this.onContentStartedPlaying))},d.prototype.container=function(a){return null===this.$targetElement&&null===this._embedEl&&(c("#player--player").length?this._embedEl="player--player":this._embedEl=a),c("#"+this._embedEl).parent()},d.prototype.destroy=function(){this.player&&this.unbindEvents();try{this.unembed(!1),c("#"+this._embedEl).remove()}catch(a){}this.$targetElement=null,this.playerElement=null,this.targetElement=null,this._embedGuid=null,this._embedEl=null,this._embedOptions=null,this._embedCallback=null,d.publish("espn.video.complete")},d.prototype._getShimmedEmbedCode=function(){var a=this.player.mediainfo;return{description:a.description,embedCode:a.id,hostedAtURL:window?window.location.href:"",isLiveStream:!1,lineup:null,promo:null,providerCode:"?",streamUrl:e.get(a,"sources.0.src".split(".")),time:this.duration,title:a.name}},d.prototype._setTarget=function(a){"string"==typeof a?(0===a.indexOf("#")&&(a=a.substring(1)),0===a.indexOf(".")?this.targetElement=c(a).get(0):this.targetElement=document.getElementById(a)):a&&a.setAttribute&&(this.targetElement=a),this.$targetElement=c(this.targetElement),this.targetReplaceId=this.$targetElement.attr("id")},d.prototype._propogateToLegacyEvent=function(a,b,c){b=b||"";var e=function(){d.publish(b,c?c.apply(this,arguments):[{},this.targetReplaceId,b.split(".").pop()])}.bind(this);this._propogatedEvents.push([a,e]),this.player.on(a,e)},d.publish=function(){c.publish(arguments[0],arguments[1])},b.exports=d}(jQuery)},{"./espn-legacy-helper-scripts.js":39,"./lodash":41,inherits:5}],41:[function(a,b,c){b.exports={has:a("lodash.has"),get:a("lodash.get"),merge:a("lodash.merge"),omitBy:a("lodash.omitby"),pick:a("lodash.pick"),values:a("lodash.values"),set:a("lodash.set"),endsWith:a("lodash.endswith"),isNil:a("lodash.isnil")}},{"lodash.endswith":14,"lodash.get":15,"lodash.has":16,"lodash.isnil":17,"lodash.merge":21,"lodash.omitby":22,"lodash.pick":23,"lodash.set":25,"lodash.values":27}],42:[function(a,b,c){"use strict";var d=a("./lodash"),e=a("cookie-cutter"),f=a("./espn-legacy-video-player.js"),g=a("./espn-legacy-helper-scripts.js"),h=a("./espn-custom-meta-data-generators.js"),i=a("watch-fanapi"),j=a("../mobile/Util"),k=a("../../package.json"),l=["#player","#videoPlayer","#video",".videoplayer"];b.exports=function(a,b){function c(c,e,i,j){if(j=j||a.noop,e=e||{},E&&E.player){if(!arguments.length)return E.player.play();if(1===arguments.length)return E.switchVideo({clipId:c})}C(function(a){var k=e.cerebroId,l=y(d.merge({region:a,id:c},e),i);g.isClipId(e.id)||k||(k=e.id,delete e.id,e.cerebroId=k,D=k);var m=A(e.targetReplaceId),n=w(m,e);if(n){var o=n.width(),p=Math.max(n.height(),9*o/16);(o<400||p<300)&&d.set(l,"advertising.adTechOrder",["html5","flash"])}H=e.customMetaData||d.get(l.analytics,"adobeDCR.ESPN_CUSTOM_METADATA")||h.sCore,"string"==typeof H&&H in h&&(H=h[H]),D=c,I=l.wasUserInitiated,b.video.player=E=new f,E.ready(function(){E.embed(k,m,l,function(){"function"!=typeof d.get(E,"player.ads")||l.preroll||l.postroll||E.player.ads(),E.player.off("espn.contentloaded",s),E.player.on("espn.contentloaded",s),"function"==typeof j&&j(E)})})})}function m(a,b){c(null,a,null,b)}function n(){E&&E.pause()}function o(c,d){E&&E.unembed(),C(function(e){var g=A(c.targetReplaceId),h=c.adSet||d||c.cms,i=t(h,e);b.video.player=E=new f,E.ready(function(){var b,d=!1,e=!1,f=function(){d&&e&&(E.destroy(),a.unsubscribe(b))};b=a.subscribe("espn.video.ad.end",function(){d=!0,f()}),E.embed(void 0,g,{advertising:{siteSectionId:c.siteSection,assetId:c.videoID,beforeAdManager:function(a){return u(a,i)}},adOnly:!0,clipSource:h},function(){e=!0,f()})})})}function p(){E&&(E.destroy(),b.video.player=E=null)}function q(){E&&E.skipAd()}function r(b,c,f){if(b=b||{},f=f||b.callback||a.noop,E&&"function"==typeof E.autoplay)return f(E.autoplay());var g=new i,h=d.get(window,"espn.core.SWID")||e.get("SWID"),j=!0,k=e.get("VAS");k&&(j=2===parseInt(k,10)),"string"==typeof h&&0===h.indexOf("{")?g.getAutoStartForFanId(h,function(a){j=G="boolean"==typeof a?a:j,f&&f(j)}):f&&f(j)}function s(a,b){if(E){var c=d.merge({},z(b),"function"==typeof H?H(E,b.mediainfo):H);E.analytics.configure(d.set({},"adobeDCR.ESPN_CUSTOM_METADATA",c))}}function t(a,b){var c,d;return"deportes"===a?c=135087:("intl"===a&&(d="intl:"),"us"!==b?("espn"===a&&(d="espn:"),c=144556):c=87146),{networkId:c,advertisingIdPrefix:d}}function u(a,b){if(a&&b){var c=b.networkId;if(c){a.networkId=c;var e=(d.get(a,"flash.profile")||"").split(":")[1]||"espn_desktop_as3",f=(d.get(a,"html5.profile")||"").split(":")[1]||"espn_desktop_js";d.set(a,"flash.profile",c+":"+e),d.set(a,"html5.profile",c+":"+f)}var g=b.advertisingIdPrefix;return g&&a.assetId&&(a.assetId+"").indexOf(":")===-1&&(a.assetId=b.advertisingIdPrefix+a.assetId),a}}function v(a){var b=d.get(E,"bundle.clipSource"),c=t(b,J);return u(a,c)}function w(b,c){var d=a("#"+b).parent();if("player--player"===b&&(0===d.width()||0===d.height())){var e=c.width||"100%";c.width&&d.width(e),c.height?d.height(c.height):0===d.height()&&d.css("padding-top","56.25%")}return d}function x(a){return a=a||{},a.omnitureSuiteId||d.get(window,"s_omni.account")||d.get(window,"espn.track.data.omniture.account")||window.s_account||"wdgespcom"}function y(a,b){a=d.merge({},d.pick(F,["cms","endCard","siteSection"]),a||{}),F=a;var c="userPreference",e=d.values(d.pick(a,["autoplay","autostart","autoPlay"]))[0];"boolean"==typeof e&&(c=e);var f=a.userInitiated||b||!1;"autoplay"===a.playType&&(f=!1,c=!0);var h=a.language||(g.detectLocale()||"").split("-")[0];return d.merge(!0,{},a,{advertising:d.merge(!0,{beforeAdManager:v,siteSectionId:a.siteSection},a.advertising),analytics:d.merge(!0,{adobeDCR:{VISITOR_API:{TRACKING_SERVER:"w88.espn.com"},APP_MEASUREMENT:{RSID:x(a),TRACKING_SERVER:"w88.espn.com"},NIELSEN_DATA:{APP_INFO:{clientId:"us-600140",apid:(K?"T":"P")+"31187EE2-AC6E-46CB-BB54-D07591BED067"}}},conviva:{customerKey:"fc8dbfdc5da519f576628f619306a357f31bd006"}},a.analytics),autoplay:c,clipId:a.id,clipSource:a.cms||("es"==h?"deportes":void 0),endcard:a.endCard,language:h,region:a.region||(g.detectLocale()||"").split("-")[1],poster:a.thumbnailURL,postroll:"boolean"!=typeof a.postroll||a.postroll,preroll:"boolean"!=typeof a.preroll||a.preroll,wasUserInitiated:f})}function z(a){return{ReportSuite:x(F),CMSID:(a.clipId||a.id||a.mediainfo.id)+"-"+a.mediainfo.name,ContentDuration:a.mediainfo.duration,DateLastModified:a.mediainfo.updated_at,GameID:d.get(a,"mediainfo.custom_fields.gameId"),League:a.mediainfo.sport,PlayerName:function(){var b=d.get(a,"mediainfo.duration"),c=!(b&&b>0);return c?"Brightcove-live":"Brightcove-vod"}(),PublishDate:(a.mediainfo.created_at||"").split("T")[0],PublishTime:(a.mediainfo.created_at||"").split("T")[1],Site:a.mediainfo.site,Sport:a.mediainfo.sport,VideoID:a.clipId||a.id||a.mediainfo.id,VideoName:(a.mediainfo.pageTitle||"").replace(" - ESPN Video",""),VideoPlaylist:(E&&E.player&&E.player.playlist()||[]).join(","),VideoTypeDetail:d.get(a,"mediainfo.custom_fields.mediaType")}}function A(b){if(!b)for(var c,d,e=0;e<l.length;e++)if(c=l[e],d=a(c).first(),d.length){b=d.attr("id"),b||(d.attr("id","player"),b="player");break}if(b=b||"player","player"!==b)return b;var f=b+"--player",g=a("#"+b),h=a(a("#"+b).children()[0]);return h.length?h.attr("id",f):(h=a('<div id="'+f+'" />'),g.append(h),g.css("position","relative")),f}function B(b){return J||(J=(d.get(b,"country.isoCodeAlpha2")||"us").toLowerCase(),a.publish("espn.video.locationReady",[J])),J}function C(b){J?b(J):j.getGeoLocation(function(c,d){B(d),(b||a.noop)(J)})}var D,E,F,G,H,I,J,K=function(){var b=a.parseUri&&a.parseUri(location.search),c=d.get(b,"queryKey.nielsentest");return c&&e.set("nielsentest",JSON.parse(c||!0)),JSON.parse(e.get("nielsentest")||null)===!0}(),L={play:g.embeddedPlay},M={getAutoPlay:r,subscribe:a.subscribe,skipAd:q,embedded:L,embeded:L,player:null,embed:m,play:c,pause:n,insertAd:o,remove:p};return Object.defineProperty(M,"version",{get:function(){if(k&&k.version)return k.version}}),Object.defineProperty(M,"versions",{get:function(){return{shim:k&&k.version,bundle:d.get(k,"dependencies.espn-web-player-bundle")}}}),Object.defineProperty(M,"autoplay",{get:function(){if(E&&E.autoplay)return E.autoplay}}),Object.defineProperty(M,"playerElement",{get:function(){if(E&&E.player)return E.player.el_}}),M}},{"../../package.json":37,"../mobile/Util":43,"./espn-custom-meta-data-generators.js":38,"./espn-legacy-helper-scripts.js":39,"./espn-legacy-video-player.js":40,"./lodash":41,"cookie-cutter":4,"watch-fanapi":36}],43:[function(a,b,c){var d=function(a){function b(a){espn.fanapi?jQuery.when(espn.fanapi.getAsP13n()).done(function(b){if(b&&b.mySettings){if(v=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}).fail(function(){a&&a()}):espn.p13n&&espn.p13n.get({success:function(b){try{if(b&&b.mySettings){if(v=b.mySettings.videoAutoStart,!a)return b.mySettings.videoAutoStart;a(b.mySettings.videoAutoStart)}}catch(a){console.log("error","espn.p13n.get",a)}},error:function(){}})}function c(a,b,c,d){for(var e="",f=0;f<a.videos.length;f++)for(var g in a.videos[f]){var h={id:g,cms:a.videos[f][g].cms,url:a.videos[f][g].url};e+="id="+h.cms+":"+g+"&",a.videos[f]=h;break}if(b){var i="",j="desktop",k="wdgespvideo,wdgespge",l="espn",m="http://www.espn.com/videohub/video/util/getMinifiedClipJsonById?";w?j="mobile":(r||s)&&(j="tablet"),"undefined"!=typeof window.s_account&&(k=window.s_account+","+k),i+="&omniReportSuite="+k,"undefined"!=typeof window.omniSite&&(l=Analytics.getSiteSection(window.omniSite)),i+="&siteSection="+l,i+="&trackingName="+encodeURIComponent(Analytics.getTrackingName()),$.ajax({url:m+e+"device="+j+i,async:c,success:function(a){d&&d(a)}})}return a}function e(){var a=!1;try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b&&(a=!0)}catch(b){navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=!0)}return a}function f(a){a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullScreen&&a.webkitEnterFullScreen()}function g(a){a=a||{};var c=!0,d=(document.cookie.match(/VAS=([^;]+)/)||[])[1];d&&(c=l(d)),espn.video.autoplay=c,b(function(b){b&&(c="2"!==b),espn.video.autoplay=c,a.callback&&a.callback(c)})}function h(){var a=/(^|; )espn.html5=1/.test(document.cookie);return a}function i(a){a=a||$.noop;var b=function(b){if(!b)return a(new Error("failed to lookup valid geolocation"));var c=d.getGeoLocationFromGeoService(b);return c?void a(null,c):a(new Error("failed to determine geolocation"))},c=function(){var a=(document.cookie.match(/country=([^;]+)/)||[])[1]||"us";b(d.getGeoLocationFromGeoService({country:{isoCode:null,isoCodeAlpha2:(a+"").toUpperCase()}}))};window.espn&&window.espn.geo&&window.espn.geo.getLocation?espn.geo.getLocation().done(b).fail(function(){espn.geo.promise=null,espn.geo.getLocation().done(b).fail(c)}):c()}function j(a){var b=null;a.country&&a.country.isoCode&&(b=a.country.isoCode.toUpperCase());var c=a.country.isoCodeAlpha2;return b&&!c&&y&&(c="string"==typeof y[b]?y[b].toLowerCase():b.substring(0,2).toLowerCase()),a.country.isoCodeAlpha2=c,a}function k(){var a="ooyala";return(this.isMobile||this.isIpad||this.isAndroid)&&(a=this.canPlayVideo?"html5-video":"player-image"),h()&&(a="html5-video"),
a}function l(a){var b=typeof a;return"boolean"!==b&&("string"===b&&isNaN(a)?a="true"===a:(a=parseInt(a),a=1===a)),a}function m(){return m._cache||(m._cache=!1,"object"==typeof espn.mem&&"boolean"==typeof espn.mem.hasVideo&&(m._cache=espn.mem.hasVideo)),m._cache}function n(a){return"deportes_dev"==a||"deportes_qa"==a?"deportes":"cric"==a||"cric_qa"==a||"cric_dev"==a||"cricinfo"==a||"cricinfo_qa"==a||"cricinfo_dev"==a?"cricinfo":"intl"==a||"intl_dev"==a||"intl_qa"==a?"soccerfc":a}function o(a){return"default"==a?null:a?(a+="",/\d{2,3}%/.test(a)?a:a.replace(/\D/g,"")+"px"):null}function p(a){var b="espn";return a.search(/deportes/i)>-1?b="deportes":a.search(/intl/i)>-1&&(b="intl"),b}var q=function a(){return a._cache||(a._cache=document.createElement("video")),!!a._cache.canPlayType}(),r=function a(){return a._cache||(a._cache=/iPad/i.test(window.navigator.userAgent)||/Mini/i.test(window.navigator.userAgent)),a._cache}(),s=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Android/g)),a.cache}(),t=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Silk/g)),a.cache}(),u=function a(){return a._cache||(a.cache=navigator.userAgent.match(/Nexus 4/g)&&navigator.userAgent.match(/Android 4.2/g)),a.cache}(),v=null,w=!1,x=!1;navigator.userAgent.match(/Mobi/)?navigator.userAgent.match(/iPad/)?x=!0:w=!0:navigator.userAgent.match(/Tab/)?x=!0:navigator.userAgent.match(/Android/)?x=!0:navigator.userAgent.match(/Touch/)&&navigator.userAgent.match(/IE/)&&(x=!0),/[?&]html5=false/.test(window.location.search)?document.cookie="espn.html5=0; path=/; domain=espn.com":/[?&]html5=./.test(window.location.search)&&(document.cookie="espn.html5=1; path=/; domain=espn.com");var y=a.countryMap||{FSM:"FM",JAM:"JM",SHN:"SH",CXR:"CX",TLS:"TL",ROU:"RO",BTN:"BT",DJI:"DJ",KGZ:"KG",MOZ:"MZ",NOR:"NO",SYR:"SY",JPN:"JP",UZB:"UZ",FRO:"FO",IND:"IN",ARE:"AE",SYC:"SC",MNP:"MP",ARG:"AR",MNG:"MN",ARM:"AM",MNE:"ME",GEO:"GE",IMN:"IM",TJK:"TJ",KEN:"KE",GUY:"GY",ASM:"AS",SJM:"SJ",LIE:"LI",BDI:"BI",PYF:"PF",DMA:"DM",SAU:"SA",MMR:"MM",ATG:"AG",TKM:"TM",TKL:"TK",MLI:"ML",ABW:"AW",ATF:"TF",NPL:"NP",GTM:"GT",BFA:"BF",CUB:"CU",GUF:"GF",GUM:"GU",KWT:"KW",IOT:"IO",JOR:"JO",GGY:"GG",PHL:"PH",MLT:"MT",ZMB:"ZM",ATA:"AQ",BEN:"BJ",UKR:"UA",BEL:"BE",NAM:"NA",SUR:"SR",AUS:"AU",TZA:"TZ",BGD:"BD",MKD:"MK",SDN:"SD",GHA:"GH",THA:"TH",LKA:"LK",HMD:"HM",MYT:"YT",GIN:"GN",SEN:"SN",GIB:"GI",MYS:"MY",BWA:"BW",BGR:"BG",AUT:"AT",BVT:"BV",UMI:"UM",STP:"ST",HND:"HN",SWZ:"SZ",ZAF:"ZA",DZA:"DZ",KIR:"KI",VNM:"VN",TWN:"TW",CHE:"CH",BHR:"BH",BHS:"BS",AGO:"AO",SWE:"SE",CHL:"CL",CZE:"CZ",CHN:"CN",HKG:"HK",TGO:"TG",CYM:"KY",CIV:"CI",SGS:"GS",NLD:"NL",SGP:"SG",CYP:"CY",KHM:"KH",MHL:"MH",AFG:"AF",SVK:"SK",SVN:"SI",PLW:"PW",BIH:"BA",NFK:"NF",UGA:"UG",TTO:"TT",KOR:"KR",COK:"CK",YEM:"YE",COG:"CG",COD:"CD",PNG:"PG",HTI:"HT",RWA:"RW",TCA:"TC",FIN:"FI",MEX:"MX",TCD:"TD",SPM:"PM",IDN:"ID",REU:"RE",HRV:"HR",MWI:"MW",COM:"KM",VUT:"VU",TUN:"TN",COL:"CO",AZE:"AZ",TUR:"TR",POL:"PL",TUV:"TV",FJI:"FJ",GNQ:"GQ",NGA:"NG",VAT:"VA",AIA:"AI",PAN:"PA",GNB:"GW",BLM:"BL",MDV:"MV",PAK:"PK",SRB:"RS",MDG:"MG",VEN:"VE",WSM:"WS",URY:"UY",HUN:"HU",EGY:"EG",BLR:"BY",MDA:"MD",ALA:"AX",MUS:"MU",ALB:"AL",BLZ:"BZ",KNA:"KN",CMR:"CM",OMN:"OM",GMB:"GM",SSD:"SS",NIU:"NU",BMU:"BM",VCT:"VC",FLK:"FK",USA:"US",NZL:"NZ",GLP:"GP",LAO:"LA",MTQ:"MQ",NIC:"NI",PRY:"PY",ESH:"EH",PRT:"PT",CAF:"CF",ISR:"IL",KAZ:"KZ",VGB:"VG",SLE:"SL",PCN:"PN",ISL:"IS",SLB:"SB",LSO:"LS",PRI:"PR",DNK:"DK",BOL:"BO",DEU:"DE",AND:"AD",LBN:"LB",ITA:"IT",SLV:"SV",LBR:"LR",CAN:"CA",PRK:"KP",MSR:"MS",LBY:"LY",QAT:"QA",WLF:"WF",IRQ:"IQ",ETH:"ET",LCA:"LC",IRN:"IR",NCL:"NC",NRU:"NR",MCO:"MC",IRL:"IE",DOM:"DO",GRL:"GL",JEY:"JE",PSE:"PS",GAB:"GA",EST:"EE",SMR:"SM",MRT:"MR",ESP:"ES",VIR:"VI",CCK:"CC",ECU:"EC",PER:"PE",GRC:"GR",GRD:"GD",FRA:"FR",CPV:"CV",LUX:"LU",ZWE:"ZW",GBR:"GB",LVA:"LV",MAF:"MF",ERI:"ER",NER:"NE",MAR:"MA",LTU:"LT",ANT:"AN",SOM:"SO",BRN:"BN",RUS:"RU",CRI:"CR",MAC:"MO",BRA:"BR",TON:"TO",BRB:"BB"};return{canPlayVideo:q,isIpad:r,isMobile:w,isAndroid:s,isKindle:t,needsClickToPlay:u,autoPlayHelper:g,getP13AutoStart:b,getGeoLocation:i,getGeoLocationFromGeoService:j,getDefaultPlatform:k,fullScreenRequest:f,convertToBoolean:l,checkMemHasVideo:m,getBusinessUnit:n,cleanDimension:o,hasFlashAndUsable:e,getVideoPlaylistInfo:c,getCMSFromTrackingName:p,requiresFlashUpgrade:navigator.userAgent.indexOf("Safari/537.76.4")!==-1&&navigator.userAgent.indexOf("Version/7")!==-1&&"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("14.0.0")||"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("10.0.0"),requiresFlashDownload:"undefined"!=typeof swfobject&&!swfobject.hasFlashPlayerVersion("0.0.1")}}("undefined"!=typeof common?common:{});"object"==typeof b&&b.exports&&(b.exports=d)},{}],44:[function(a,b,c){!function(){"use strict";var b=a("./mobile/Util");window.PLAYER=null,window.espn=window.espn||{},["html5-video","player-image"].indexOf(b.getDefaultPlatform())!==-1?window.espn.video=a("../distribution/espn.video.mobile.js"):window.espn.video=a("./desktop/shim.js")(jQuery,window.espn),window.espn.video.getDefaultPlatform=function(){return b.getDefaultPlatform()},window.espn.video.embeded=window.espn.video.embedded}()},{"../distribution/espn.video.mobile.js":1,"./desktop/shim.js":42,"./mobile/Util":43}]},{},[44]);