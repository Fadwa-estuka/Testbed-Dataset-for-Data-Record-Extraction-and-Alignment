var __kx_ad_slots=__kx_ad_slots||[];var __kx_ad_viewable=__kx_ad_viewable||{};var __kx_ad_impression_ids=__kx_ad_impression_ids||{};var __kx_lock=__kx_lock||0;var __kx_lock_ad_slot=__kx_lock_ad_slot||{};var __kx_start_time=__kx_start_time||new Date().getTime();var __kx_load_time=__kx_load_time||[];var __kx_y_offset=__kx_y_offset||[];var __kx_creative_base_ids=__kx_creative_base_ids||[];var __kx_ad_vt_pixels=__kx_ad_vt_pixels||[];var __kx_influx=__kx_influx||[];var __kx_influx_rates=__kx_influx_rates||[];var __kx_influx_ready=__kx_influx_ready||[];var __kx_influx_view_full=__kx_influx_view_full||[];var __kx_influx_view_elements=__kx_influx_view_elements||[];var __kx_influx_picker=__kx_influx_picker||[];var __kx_influx_video_length=__kx_influx_video_length||[];var __kx_influx_playing_tag=__kx_influx_playing_tag||[];var __kx_view=__kx_view||[];var __kx_view_current=__kx_view_current||[];var __kx_bid_request=__kx_bid_request||[];var __kx_bid_response=__kx_bid_response||[];var __kx_user_id=__kx_user_id||null;var __kx_type_overlay=__kx_type_overlay||[];var __kx_type_adhesion=__kx_type_adhesion||[];var __kx_obj=__kx_obj||[];var __kx_lkqd_obj=__kx_lkqd_obj||[];var __kx_desktop=__kx_desktop||[];var __kxamp=__kxamp||[];var __kx_user_match=__kx_user_match||0;function __kx_report_err(message,obj){try{var err=new Error();var url="//ad.kixer.com/error.php?err="+ encodeURIComponent(message)+"&stack="+ encodeURIComponent(err.stack);if(obj){url+="&influx="+ obj.influx;url+="&influx_rtb="+ obj.influx_rtb;url+="&influx_video="+ obj.influx_video;url+="&picker="+ __kx_influx_picker[obj.slot];}
var xmlhttp=new XMLHttpRequest();xmlhttp.open("GET",url,true);xmlhttp.withCredentials="true";xmlhttp.send();}catch(e){}}
var __kx_viewability={el:null,user_id:null,impression_id:null,price_win:null,lkqd_play_now:[],init:function(el,impression_id,ad_slot,user_id,price_win){this.el=el;if(user_id){this.user_id=user_id;}
__kx_view[ad_slot][el.id]=impression_id;this.impression_id=impression_id;this.price_win=price_win;if(typeof __kx_ad_impression_ids[ad_slot]==='undefined'){__kx_ad_impression_ids[ad_slot]=impression_id;}
if(this.timeoutBased()){setTimeout(function(){__kx_viewability.check(1);},100);}else if(typeof __kx_view_manual!=='undefined'){if(__kx_ad.is_debug()){console.log("Manual viewability");}
if(typeof __kx_view_listener!=='undefined'){window.document.addEventListener(__kx_view_listener,function(){__kx_viewability.process_locked(ad_slot);if(__kx_ad.is_debug()){console.log("Manual viewability event fired");}});}else{__kx_viewability.process_locked(ad_slot);if(__kx_ad.is_debug()){console.log("Manual viewability event fired");}}}else{this.addObservers(ad_slot);this.check(1);}
return this;},timeoutBased:function(){if(typeof __kx_viewability_settimeout!=='undefined'){return __kx_viewability_settimeout;}else{return 0;}},scrollEl:function(){if(typeof __kx_scroll_class!=='undefined'){return document.getElementsByClassName(__kx_scroll_class)[0];}else if(typeof __kx_scroll_id!=='undefined'){return document.getElementById(__kx_scroll_id);}else{return window;}},addObservers:function(){var el;el=__kx_viewability.scrollEl();el.addEventListener('scroll',__kx_viewability.throttledLoad);el.addEventListener('resize',__kx_viewability.throttledLoad);},removeObservers:function(){var el;el=__kx_viewability.scrollEl();el.removeEventListener('scroll',__kx_viewability.throttledLoad,false);el.removeEventListener('resize',__kx_viewability.throttledLoad,false);},throttleTimer:new Date().getTime(),throttledLoad:function(){var now=new Date().getTime();if((now- __kx_viewability.throttleTimer)>=100){__kx_viewability.throttleTimer=now;__kx_viewability.check(1);}},check:function(setTimer){var rc;if(__kx_lock==0){__kx_lock=1;for(var ad_slot in __kx_view){if(__kx_lock_ad_slot[ad_slot]){continue;}
for(var el_id in __kx_view[ad_slot]){rc=__kx_viewability.check_slot(el_id,ad_slot);if(rc){if(setTimer){setTimeout(function(){__kx_viewability.check(0);},900);}else{var impression_id=__kx_view[ad_slot][el_id];__kx_viewability.process(impression_id,ad_slot,el_id);}}}}
__kx_lock=0;}
if(__kx_viewability.timeoutBased()){setTimeout(function(){__kx_viewability.check(1);},100);}},process_locked:function(ad_slot_id){if(__kx_lock==0){__kx_lock=1;if(__kx_viewability.contains(__kx_view_current,ad_slot_id)){var el_id=__kx_view_current[ad_slot_id];var impression_id=__kx_view[ad_slot_id][el_id];__kx_viewability.process(impression_id,ad_slot_id,el_id);}
__kx_lock=0;}},process:function(impression_id,ad_slot_id,el_id){if(impression_id==undefined){__kx_report_err("Undefined impression_id: "+ el_id,__kx_obj[ad_slot_id]);}
__kx_viewability.call_ajax(impression_id,ad_slot_id);__kx_viewability.fire_view_through_pixels(ad_slot_id);delete __kx_view[ad_slot_id][el_id];__kx_view_current.splice(ad_slot_id,1);var root_el_id=__kx_ad.div_id_get(ad_slot_id);if(__kx_view[ad_slot_id][root_el_id]!=undefined){impression_id=__kx_view[ad_slot_id][root_el_id];this.process(impression_id,ad_slot_id,root_el_id);}},contains:function(obj,element){var i;for(i in obj){if(obj.hasOwnProperty(i)){if(i==element)
return true;}}
return false;},is_empty:function(obj){var name;for(name in obj){return false;}
return true;},check_slot:function(el_id,ad_slot){var scrollY;var position;var pageHeight=window.innerHeight||document.documentElement.clientHeight;if(typeof __kx_scroll_class==='undefined'&&typeof __kx_scroll_id==='undefined'){scrollY=window.pageYOffset||document.documentElement.scrollTop;}else{var scrollEl=__kx_viewability.scrollEl();scrollY=scrollEl.scrollTop;var pageHeightTmp=scrollEl.clientHeight;if(pageHeight>pageHeightTmp){pageHeight=pageHeightTmp;}}
var el=document.getElementById(el_id);if(!el||is_hidden(el)){return 0;}
var el_top=get_offset_top(el);var height=el.clientHeight||0;if(height>=pageHeight){position=el_top+ Math.floor(el.offsetHeight/4);}else{position=el_top+ Math.floor(el.offsetHeight/2);}
var rangeHeight=pageHeight;__kx_y_offset[ad_slot]=el_top;var range={min:scrollY,max:scrollY+ rangeHeight};if((position>=range.min- this.before_view_distance())&&(position<=range.max+ this.before_view_distance())){this.lkqd_play_now[ad_slot]=true;if(document.createEvent){var evObj=document.createEvent('HTMLEvents');evObj.initEvent('__kx_before_view',true,false);el.dispatchEvent(evObj);}else if(document.createEventObject){el.fireEvent('__kx_before_view');}}
var info;if((position>=range.min)&&(position<=range.max)){if(__kx_ad.is_debug()){info="["+ad_slot+"] Loaded: "+el_id+" Position: "+position+" Height: "+height+" Min: "+range.min+" Max: "+range.max;console.log(info);}
return 1;}else{if(__kx_ad.is_debug()){info="["+ad_slot+"] "+el_id+" Position: "+position+" Height: "+height+" Min: "+range.min+" Max: "+range.max;console.log(info);}}
return 0;},before_view_distance:function(){if(typeof __kx_before_view_distance!=='undefined'){return __kx_before_view_distance;}
return 200;},url_get:function(ad_slot,impression_id){var time=new Date().getTime();var load_time=__kx_ad.load_time(ad_slot);var view_time=__kx_viewability.view_time(time);var y_offset=__kx_y_offset[ad_slot];var d=new Date();var gmt_offset=d.getTimezoneOffset();gmt_offset*=-1;var canonical_url=__kx_ad.get_canonical_url();var url="//ad.kixer.com";if(typeof __kx_url!=='undefined'){url=__kx_url;}
url=url+"/ad/view/"+impression_id+"?load_time="+load_time+"&view_time="+view_time+"&y_offset="+y_offset+"&gmt_offset="+gmt_offset+"&user_id="+this.user_id+"&ad_slot_id="+ad_slot;if(typeof __kx_is_swipe!=='undefined'){url=url+"&refresh=1";}
if(canonical_url){url=url+"&canonical_url="+ canonical_url;}
if(this.price_win){url=url+"&win="+this.price_win;}
return url;},fire_view_through_pixels:function(ad_slot){for(var i=0;i<__kx_ad_vt_pixels[ad_slot].length;i++){var track=new Image(1,1);track.src=__kx_ad_vt_pixels[ad_slot][i];}},call_ajax:function(impression_id,ad_slot){var xmlhttp;var url;var el=document.getElementById(__kx_ad.div_id_get(ad_slot));if(document.createEvent){var evObj=document.createEvent('HTMLEvents');evObj.initEvent('load',true,false);el.dispatchEvent(evObj);}else if(document.createEventObject){el.fireEvent('load');}
xmlhttp=new XMLHttpRequest();url=this.url_get(ad_slot,impression_id);if(__kx_ad.is_debug()){var info="["+ad_slot+"] Firing viewability: "+url;console.log(info);}
xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){__kx_viewability.process_ajax(xmlhttp.responseText);}};xmlhttp.open("GET",url,true);xmlhttp.withCredentials="true";xmlhttp.send();},process_ajax:function(){},view_time:function(time){return time- __kx_start_time;}};var __kx_ad={init:function(){},load_slot:function(slot){this.slot=slot;if(typeof __kx_influx_rates[slot]=='undefined'){__kx_influx_rates[slot]={};}
if(typeof __kx_influx[slot]=='undefined'){__kx_influx[slot]={};__kx_influx[slot].length=0;__kx_influx[slot].tags={};__kx_influx[slot].type={};__kx_influx[slot].url_win={};}
if(typeof __kx_influx_ready[slot]=='undefined'){__kx_influx_ready[slot]=0;}
__kx_influx_playing_tag[slot]=0;__kx_view[slot]={};__kx_view_current[slot]={};__kx_influx_view_full[slot]={};__kx_influx_view_elements[slot]={};__kx_bid_request[slot]={};__kx_bid_response[slot]={};__kx_type_overlay[slot]=0;__kx_type_adhesion[slot]=0;this.call_ajax(slot);},call_ajax:function(slot){var xmlhttp;var url;xmlhttp=new XMLHttpRequest();url=this.url_get(slot);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var ct=xmlhttp.getResponseHeader("content-type")||"";if(ct.indexOf("json")>-1){__kx_ad.process_ajax(xmlhttp.responseText,1);}}};xmlhttp.onTimeout=function(){__kx_ad.call_ajax(slot);};xmlhttp.open("GET",url,true);xmlhttp.timeout=0;xmlhttp.withCredentials="true";xmlhttp.send();},process_ajax:function(json,count){var obj;var div;var user_match_div;var slot;var script;var impression_id;var user_id;obj=JSON.parse(json);slot=obj.slot;__kx_obj[slot]=obj;__kx_influx_picker[slot]=[];if(count==1){__kx_load_time[slot]=new Date().getTime();}
impression_id=obj.impression_id;if(typeof __kx_ad_impression_ids[slot]==='undefined'){__kx_ad_impression_ids[slot]=impression_id;}
if(typeof __kx_ad_vt_pixels[slot]==='undefined'){__kx_ad_vt_pixels[slot]=obj.view_through_pixels;}
if(typeof obj.creative_base_ids!=='undefined'){__kx_creative_base_ids=obj.creative_base_ids;}
div=this.div_get(slot);user_id=obj.user_id;__kx_user_id=user_id;if(user_id&&window.localStorage){try{localStorage.setItem("kixer::user_id",user_id);}catch(error){}}
__kx_view[slot]["__kx_first_wrapper_"+slot]=obj.view_first;__kx_view[slot]["__kx_rtb_iab_wrapper_"+slot]=obj.view_rtb_iab;__kx_view[slot]["__kx_third_js_wrapper_"+slot]=obj.view_third;__kx_type_overlay[slot]=obj.overlay;__kx_type_adhesion[slot]=obj.adhesion;this.viewability=__kx_viewability.init(div,impression_id,slot,user_id);div.innerHTML=obj.html;if(!__kx_user_match&&obj.user_match_content){__kx_user_match=1;user_match_div=document.createElement('div');user_match_div.id='__kx_user_match';user_match_div.innerHTML=obj.user_match_content;user_match_div.style.display="none";div.appendChild(user_match_div);}
script=obj.script;eval.call(window,script);if(obj.influx){var id='first';__kx_influx[slot].type[id]='first';__kx_influx[slot].length++;__kx_influx_rates[slot][id]=0.01+((typeof(obj.floor)==='number')?obj.floor:0);__kx_influx[slot].video=obj.influx_video;__kx_influx[slot].third_party=obj.third_party;if(obj.influx_video){__kx_influx_picker[slot]['lkqd']=setTimeout(function(){this.influx_pick(slot,1)}.bind(this,slot),3000);}
if(obj.influx_rtb){this.influx_rtb_init(obj,slot);}
if(obj.third_party){this.third_init(obj,slot);}}else{__kx_switch_divs(slot,'first',0,0,0);}
if(obj.scrape_page){this.scrape_page();}},scrape_page:function(){try{var xmlhttp=new XMLHttpRequest();var url="//ad.kixer.com/ad/scraper.php";var page_url=decodeURIComponent(this.get_canonical_url());var content=(typeof __kx_scrape_selector=='undefined')?document.body.innerHTML:document.querySelector(__kx_scrape_selector).innerHTML;var scraped_data={scrape_url:page_url,scrape_content:content};var scraped_data_string="json_string="+ encodeURIComponent(JSON.stringify(scraped_data));xmlhttp.open("POST",url,true);xmlhttp.timeout=0;xmlhttp.withCredentials="true";xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.send(scraped_data_string);}catch(e){__kx_report_err(e,0);}},third_init:function(obj,slot){var id='js';__kx_influx[slot].type[id]='js';__kx_influx[slot].length++;__kx_influx_rates[slot][id]=obj.floor_third||0;__kx_influx[slot].tags[id]=obj.third_party_js_tag;this.influx_pick(slot,0);},influx_rtb_init:function(obj,slot){__kx_bid_request[slot]=obj.rtb_bid_request;this.influx_bids(obj.rtb_bid_request,slot);},influx_bids:function(bid_request,slot){try{__kx_influx_picker[slot]['rtb']=1;var xmlhttp=new XMLHttpRequest();var url="//rtb-sell.kixer.com";var json=JSON.stringify(bid_request);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){var ct=xmlhttp.getResponseHeader("content-type")||"";if(ct.indexOf("json")>-1){__kx_ad.influx_process_ajax(xmlhttp.responseText,slot);}else{delete __kx_influx_picker[slot]['rtb'];__kx_ad.influx_pick(slot,0);}}
if(xmlhttp.readyState==4&&xmlhttp.status==204){delete __kx_influx_picker[slot]['rtb'];__kx_ad.influx_pick(slot,0);}};xmlhttp.ontimeout=function(){delete __kx_influx_picker[slot]['rtb'];__kx_ad.influx_pick(slot,0);};xmlhttp.open("POST",url,true);xmlhttp.timeout=1000;xmlhttp.withCredentials="true";xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');xmlhttp.send(json);}catch(e){__kx_report_err(e,__kx_obj[slot]);}},influx_process_ajax:function(response,slot){var obj=JSON.parse(response);__kx_bid_response[slot]=obj;var seatbid=obj.seatbid[0];var bid=seatbid.bid[0];var cpm=bid.price;var tag=bid.adm;var url_win=bid.nurl?bid.nurl:"";var id='rtb_iab';__kx_influx[slot].tags[id]=tag;__kx_influx[slot].type[id]='rtb_iab';__kx_influx[slot].length++;__kx_influx[slot].url_win[id]=url_win;__kx_influx_rates[slot][id]=cpm;delete __kx_influx_picker[slot]['rtb'];if(!__kx_influx[slot].video){this.influx_pick(slot,1);}},influx_pick:function(slot,clear_timeout){var max=0;var max_id=null;var max_prior=null;var price;var second_price;var id;console.log("["+slot+"] Influx Pick",__kx_influx_picker[slot]);if(clear_timeout){if(typeof __kx_influx_picker[slot]['lkqd']!=='undefined'){clearTimeout(__kx_influx_picker[slot]['lkqd']);delete __kx_influx_picker[slot]['lkqd'];}
if(typeof __kx_influx_picker[slot]['rtb']!=='undefined'){delete __kx_influx_picker[slot]['rtb'];}}else if(typeof __kx_influx_picker[slot]['lkqd']!=='undefined'||typeof __kx_influx_picker[slot]['rtb']!=='undefined'){return;}
for(id in __kx_influx_rates[slot]){var rate=__kx_influx_rates[slot][id]||0;console.log("["+slot+"] "+ id+": "+ rate);if(rate>max){max_prior=max;if(id==="rtb_iab"){second_price=(__kx_bid_response&&__kx_bid_response[slot]&&__kx_bid_response[slot].ext&&__kx_bid_response[slot].ext.second_price)?__kx_bid_response[slot].ext.second_price:0;if(second_price>max_prior){max_prior=second_price;}}
max=rate;max_id=id;}else if(rate>max_prior){max_prior=rate;}}
if(max_id){var type=__kx_influx[slot].type[max_id];switch(type){case'first':__kx_switch_divs(slot,type,0,0,0);break;case'rtb_iab':__kx_stop_other_tags(null,slot);if(typeof __kx_influx[slot].tags[type]!=='undefined'){if(__kx_influx_ready[slot]===0){price=max_prior.toFixed(2);__kx_switch_divs(slot,type,__kx_influx[slot].tags[max_id],max_id,price);}else{__kx_switch_divs(slot,'first',0,0,0);}}
break;case'lkqd':__kx_switch_divs(slot,type,__kx_influx[slot].tags[max_id],max_id,0);break;case'js':__kx_switch_divs(slot,type,__kx_influx[slot].tags[max_id],0,0);break;default:console.log("["+slot+"] Don't know what this is: "+ type);break;}}else{__kx_switch_divs(slot,'first',0,0,0);}},url_get:function(slot){var d=new Date();var gmt_offset=d.getTimezoneOffset();gmt_offset*=-1;var canonical_url=this.get_canonical_url();var domain=this.get_domain();var url="//ad.kixer.com";var append="";var width;var height;var user_id;if(typeof __kx_url!=='undefined'){url=__kx_url;}
url=url+"/ad/"+slot;if(typeof __kx_url_append!=='undefined'){if(Array.isArray(__kx_url_append)&&typeof __kx_url_append[slot]!=="undefined"){append=__kx_url_append[slot];}else{append=__kx_url_append;}
append+="&gmt_offset="+gmt_offset;}else{append="gmt_offset="+gmt_offset;}
if(window.localStorage){try{user_id=localStorage.getItem("kixer::user_id");}catch(error){user_id=null;}
if(user_id){append+="&user_id="+user_id;}}
if(canonical_url){append+="&canonical_url="+canonical_url;}
if(domain){append+="&domain="+domain;}
width=this.width_get();height=this.height_get();if(width){append+="&width="+width;}
if(height){append+="&height="+height;}
url=url+"?"+ append;return url;},div_get:function(slot){var div_id=this.div_id_get(slot);return document.getElementById(div_id);},div_id_get:function(slot){var el=document.getElementById('__kx_ad_'+slot);if(el!=null){return'__kx_ad_'+slot;}else{return'__mom_ad_'+slot;}},width_get:function(){return window.innerWidth||document.documentElement.clientWidth;},height_get:function(){return window.innerHeight||document.documentElement.clientHeight;},is_android:function(){return navigator.userAgent.match(/Android/i);},is_ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i);},is_mobile:function(){if(this.is_debug()){return 1;}
return(this.is_android()||this.is_ios());},is_debug:function(){if(typeof __kx_debug!=='undefined'){return __kx_debug;}
var debug_param="kx_debug";var url=document.URL;var base=url.split('?');if(base.length<=1){return 0;}
var params=base[1].split('&');for(var i=0;i<params.length;i++){var key_value=params[i].split('=');if(key_value[0]==debug_param){return parseInt(key_value[1]);}}
return 0;},load_time:function(slot){return __kx_load_time[slot]- __kx_start_time;},get_domain:function(){var found;if(typeof __kx_domain!=='undefined'){found=__kx_domain;}else{return 0;}
return encodeURIComponent(found);},get_canonical_url:function(){try{var found="";var canonical=window.document.querySelector("link[rel='canonical']");var opengraph=window.document.querySelector("meta[property='og:url']");if(canonical){found=canonical.href;}else if(opengraph){found=opengraph.content;}
if(typeof __kx_canonical!=='undefined'){found=__kx_canonical;}
return encodeURIComponent(found);}catch(e){__kx_report_err(e,0);}},only_desktop:function(slot){return typeof(__kx_desktop[slot])!=="undefined";},};function __kx_switch_divs(slot,type,tag,max,price){var el_divs=[];el_divs.push({tag:'first',div:"__kx_first_wrapper_"+slot});el_divs.push({tag:'lkqd',div:"__kx_third_video_wrapper_"+slot});el_divs.push({tag:'js',div:"__kx_third_party_wrapper_"+slot});el_divs.push({tag:'rtb_iab',div:"__kx_rtb_iab_wrapper_"+slot});var slot_div=__kx_ad.div_get(slot);var el;var el_id;var el_first_overlay;var wrapper;var lkqd;var tag_id;var rtb_tag;var width;var height;var i;for(i=0;i<el_divs.length;i++){el=document.getElementById(el_divs[i].div);if(el){if(el_divs[i].tag==type&&type!='lkqd'){el_id=el_divs[i].div;wrapper=el;el.style.display="block";}else{el.style.display="none";}}}
switch(type){case'first':__kx_stop_other_tags(null,slot);__kx_view_current[slot]=el_id;__kx_viewability.init(wrapper,__kx_view[slot][el_id],slot,null);el_first_overlay=wrapper.querySelector('.__kx_overlay_container');if(parseInt(__kx_type_overlay[slot])||parseInt(__kx_type_adhesion[slot])){if(parseInt(__kx_type_overlay[slot])&&el_first_overlay){__kx_center_element(el_first_overlay,0);}
__kx_viewability.process(__kx_view[slot][el_id],slot,el_id);}
break;case'lkqd':tag_id=max;lkqd=tag;__kx_lkqd_obj[slot]=lkqd;__kx_influx_playing_tag[slot]=tag_id;__kx_influx_ready[slot]=1;__kx_remove_influx_type(slot,'rtb');console.log("["+slot+"] Switching to lkqd!!: "+ tag_id);if(parseInt(__kx_type_overlay[slot])||parseInt(__kx_type_adhesion[slot])||__kx_viewability.lkqd_play_now[slot]==true){console.log("["+slot+"] Attempting to play!!: "+ tag_id);lkqd.startAd();}else{console.log("["+slot+"] Waiting for scroll to attempt play: "+ tag_id);var __kx_start_lkqd=function(event){event.target.removeEventListener("__kx_before_view",__kx_start_lkqd,false);lkqd.startAd();}
slot_div.addEventListener("__kx_before_view",__kx_start_lkqd,false);}
break;case'rtb_iab':__kx_view_current[slot]=el_id;__kx_stop_other_tags(null,slot);width=__kx_bid_request[slot].imp[0].banner.w;height=__kx_bid_request[slot].imp[0].banner.h;__kx_remove_influx_type(slot,'rtb_iab');__kx_remove_influx_type(slot,'js');rtb_tag=tag.replace("${AUCTION_PRICE}",price);__kx_append_iframe(wrapper,rtb_tag,width,height);__kx_win_notification(slot,max,price);__kx_viewability.init(wrapper,__kx_view[slot][el_id],slot,null,price);break;case'js':if(typeof tag!=='undefined'){el_id="__kx_third_js_wrapper_"+slot;wrapper=document.getElementById(el_id);width=tag['width'];height=tag['height'];__kx_remove_influx_type(slot,'rtb_iab');delete __kx_influx[slot].tags[type];__kx_stop_other_tags(null,slot);__kx_append_iframe(wrapper,tag['tag'],width,height);__kx_view_current[slot]=el_id;__kx_viewability.init(wrapper,__kx_view[slot][el_id],slot,null);if(parseInt(__kx_type_overlay[slot])||parseInt(__kx_type_adhesion[slot])){__kx_viewability.process(__kx_view[slot][el_id],slot,el_id);}}
break;}}
function __kx_remove_influx_type(slot,type){delete __kx_influx[slot].tags[type];delete __kx_influx[slot].type[type];delete __kx_influx_rates[slot][type];}
function __kx_append_iframe(parent_el,content,width,height){var html="<html><head><style><\/style><\/head><body style='margin:0; text-align:center;'>"+content+"<\/body><\/html>";var iframe=document.createElement("iframe");parent_el.appendChild(iframe);iframe.scrolling="no";iframe.seamless="seamless";iframe.allowTransparency="true";iframe.style.backgroundColor="transparent";iframe.style.border="none";iframe.style.marginLeft="auto";iframe.style.marginRight="auto";iframe.style.overflow="hidden";iframe.style.width=width+"px";iframe.style.height=height+"px";iframe.contentDocument.open();iframe.contentDocument.write(html);iframe.contentDocument.close();}
function __kx_stop_other_tags(playing_tag_id,ad_slot_id){var tag_id;for(tag_id in __kx_influx[ad_slot_id].tags){if(tag_id!=playing_tag_id){if(__kx_influx[ad_slot_id].type[tag_id]=="lkqd"){var lkqdVPAID=__kx_influx[ad_slot_id].tags[tag_id];console.log("["+ad_slot_id+"] Influx: Stopping: "+tag_id);lkqdVPAID.stopAd();}}}}
function __kx_pause_other_tags(playing_tag_id,playing_ad_slot){var ad_slot;var tag_id;for(ad_slot in __kx_influx){if(ad_slot!=playing_ad_slot){for(tag_id in __kx_influx[ad_slot].tags){if(__kx_influx[ad_slot].type[tag_id]=="lkqd"){var lkqdVPAID=__kx_influx[ad_slot].tags[tag_id];console.log("["+ad_slot+"] Influx: Pausing: "+tag_id);lkqdVPAID.pauseAd();}}}}}
function __kx_display_third_video(slot){var el_id="__kx_third_video_wrapper_"+slot;var el_third_wrapper=document.getElementById(el_id);if(el_third_wrapper){__kx_pause_other_tags(__kx_influx_playing_tag[slot],slot);el_third_wrapper.style.display="block";}}
function __kx_win_notification(slot,tag_id,price){var bid_request=__kx_bid_request[slot];var bid_response=__kx_bid_response[slot];var exid=bid_response.ext.exid;var win=(__kx_obj[slot]&&__kx_obj[slot].rtb_win_per_exid&&__kx_obj[slot].rtb_win_per_exid[exid])?__kx_obj[slot].rtb_win_per_exid[exid]:{};win.cpm=price;win.url=__kx_influx[slot].url_win[tag_id];win.iid=bid_request.id;win.uid=bid_request.user.id;win.asid=slot;win.exid=exid;try{var xmlhttp=new XMLHttpRequest();var url="//rtb-sell-win.kixer.com/";var json=JSON.stringify(win);xmlhttp.open("POST",url,true);xmlhttp.timeout=0;xmlhttp.withCredentials="true";xmlhttp.send(json);}catch(e){__kx_report_err(e,0);}}
function __kx_center_element(el,vertical_offset,use_style){var offsetWidth;var offsetHeight;if(use_style){offsetWidth=parseInt(el.style.width);offsetHeight=parseInt(el.style.height);}else{if(typeof(el.offsetWidth)=='undefined'||typeof(el.offsetHeight)=='undefined'){if(typeof(el.center_attempt)=='undefined'){el.center_attempt=0;}
if(el.center_attempt<10){el.center_attempt++;console.log("try centering element again: "+ el.center_attempt);setTimeout(function(){__kx_center_element(el,vertical_offset,use_style);},75);return;}}
offsetWidth=el.offsetWidth;offsetHeight=el.offsetHeight;}
el.style.top="50%";el.style.left="50%";el.style.marginLeft="-"+(offsetWidth/2)+"px";el.style.marginTop="-"+(offsetHeight/2+ vertical_offset)+"px";}
function load_script(url,callback){var head=document.getElementsByTagName('head')[0];var script=document.createElement('script');script.type='text/javascript';script.src=url;script.onreadystatechange=callback;script.onload=callback;head.appendChild(script);}
function json_present(callback){if(typeof JSON!=='object'){load_script("//cdn.kixer.com/lib/json2.js",callback);return 0;}
return 1;}
function is_hidden(el){if(el.hidden||el.style.display=="none"){return 1;}else{return 0;}}
function get_offset_top(el){var val=0;if(el.offsetParent){do{val+=el.offsetTop;}while(el=el.offsetParent);return val;}}
function __kx_opt_out(){var optout=(document.cookie.match(/^(?:.*;)?optout=([^;]+)(?:.*)?$/)||[null,null])[1];if(optout){return 1;}else{return 0;}}
function __kx_create_cookie(name,value,minutes){if(__kx_opt_out()){return;}
var expires;if(minutes){var date=new Date();date.setTime(date.getTime()+(minutes*60*1000));expires="; expires="+ date.toGMTString();}
else{expires="";}
document.cookie=name+"="+ value+ expires+"; path=/";}
function __kx_get_cookie(c_name){var c_start;var c_end;if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+ c_name.length+ 1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length;}
return unescape(document.cookie.substring(c_start,c_end));}}
return"";}
function __mom_ad_start(){var slot;var is_mobile=!!__kx_ad.is_mobile();if(!json_present(function(){__mom_ad_start()})){return;}
__kx_ad.init();while(slot=__mom_ad_slots.pop()){if((is_mobile&&__kx_ad.only_desktop(slot))||(!is_mobile&&!__kx_ad.only_desktop(slot))){return;}
__kx_ad.load_slot(slot);__kx_ad_viewable[slot]="__mom_ad_"+slot;}}
function __kx_ad_start(){var slot;var is_mobile=!!__kx_ad.is_mobile();if(!json_present(function(){__kx_ad_start()})){return;}
__kx_ad.init();while(slot=__kx_ad_slots.pop()){if((is_mobile&&__kx_ad.only_desktop(slot))||(!is_mobile&&!__kx_ad.only_desktop(slot))){return;}
__kx_ad.load_slot(slot);__kx_ad_viewable[slot]="__kx_ad_"+slot;}}