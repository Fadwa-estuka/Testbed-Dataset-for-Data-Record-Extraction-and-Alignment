(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){require("shared/models/siteVars");module.exports={eventNames:{small:"windowResizeToSmall",medium:"windowResizeToMedium",large:"windowResizeToLarge",xlarge:"windowResizeToXLarge"},isTouchDevice:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},browserDoesInterpretMQ:function(){return Modernizr.mq("only all")},init:function(){this.lastWindowSizeIsSmall=this.isWindowSizeSmall();this.initResizeController()},currentSize:function(){var size="";if(this.isWindowSizeSmall()){size="small"}else if(this.isWindowSizeMedium()){size="medium"}else if(this.isWindowSizeLarge()){size="large"}else{size="xlarge"}return size},isWindowSizeSmall:function(){return window.innerWidth<=window.jstor.mediaQueryBreakpoints.small},isWindowSizeMedium:function(){return window.innerWidth<=window.jstor.mediaQueryBreakpoints.medium},isWindowSizeLarge:function(){return window.innerWidth<=window.jstor.mediaQueryBreakpoints.large},isWindowSizeXLarge:function(){return window.innerWidth>=window.jstor.mediaQueryBreakpoints.xlarge},initResizeController:function(){window.checkWindowSizeTimer=0;this.previousWindowSize=this.currentSize();var self=this;if(this.browserDoesInterpretMQ()){$(window).on("resize",function(){clearTimeout(window.checkWindowSizeTimer);window.checkWindowSizeTimer=setTimeout(function(){var currentSize=self.currentSize();if(currentSize!==self.previousWindowSize){$(document).trigger(self.eventNames[currentSize]);self.previousWindowSize=currentSize}},100)})}}}},{"shared/models/siteVars":14}],2:[function(require,module,exports){var storage=require("shared/controllers/storage");require("handlebars");module.exports={modalID:"#saveCitationOverlay",citationToolClass:".citationTool",$searchControlFormObj:$("#searchFormTools"),titles:"",titleCount:0,init:function(checkBoxClass){if(window.location.search.search("confirm=add")!==-1){storage.setStorageType("sessionStorage");this.getValsFromStorage();var urlPrefix="http://"+window.location.host;if(this.titles&&this.titles.length){$.ajax({url:urlPrefix+"/action/emailCitations",cache:false});this.displayOverlay();storage.del("citationTitles");storage.del("citationTitlesCount")}}if(!checkBoxClass){throw new Error("Must initialize citation tools with class of checkboxes")}this.registerCitationToolClickHandler(checkBoxClass)},displayOverlay:function(){var titles=JSON.parse(this.titles),citationType=window.location.search.search("saveCitation=true")!==-1?"save":"track",overlayTitle=citationType==="save"?"Citations Saved":"Citation Alerts Created",successMsg=citationType==="save"?"Your citations have been saved.":"Your citations are now being tracked. You will receive an email alert when these items are cited.",citationObj={overlayTitle:overlayTitle,overlayType:citationType,overlaySuccess:successMsg,totalItems:this.titleCount,citationItems:titles},template=Handlebars.compile($("#tpl-saveTrackCitation").html()),self=this;$("body").append(template(citationObj)).foundation({reveal:{animation:"none",animationSpeed:0,bg_class:"none"}});$(this.modalID).foundation("reveal","open");setTimeout(function(){$(self.modalID).attr("tabindex",-1).focus()},500)},isChapter:function(doi_checkbox){return doi_checkbox.closest(".result-item").find(".result-item-metadata").data("resulttype")==="chapter"?1:0},getBookDOIfromChapterDOI:function(chapter_doi){var first_split=chapter_doi.split("/"),second_split=first_split[1].split(".");if(second_split[0]==="j"){return first_split[0]+"/"+second_split[0]+"."+second_split[1]}return first_split[0]+"/"+second_split[0]},registerCitationToolClickHandler:function(checkBoxClass){var self=this;$(this.citationToolClass).on("click",function(event){if(!$(checkBoxClass).filter(":checked").length){alert("Please check at least one item in order to use the Citation Tools");return false}var citationToolId=$(this).attr("id");if(citationToolId==="saveCitationInlineTop"||citationToolId==="saveCitationInlineBottom"||citationToolId==="trackCitationInlineTop"||citationToolId==="trackCitationInlineBottom"){var checkedTitles=[],checkedTitleCount=0;$("input[name=doi]:checked").each(function(){var origTitle=$.trim($(this).next().html()),isReview=origTitle.indexOf("Review")===0,isChapter=self.isChapter($(this)),title=isReview?origTitle.replace("Review:",""):isChapter?$(this).closest(".result-item").find(".book-title").text():origTitle;if(isChapter){$(this).val(self.getBookDOIfromChapterDOI($(this).val()))}checkedTitles.push({id:$(this).val(),title:title,isReview:isReview});checkedTitleCount++});storage.set("citationTitles",JSON.stringify(checkedTitles));storage.set("citationTitlesCount",checkedTitleCount)}self.updateFormAction($(this));self.$searchControlFormObj.submit()})},getValsFromStorage:function(){this.titles=storage.get("citationTitles");this.titleCount=storage.get("citationTitlesCount")},updateFormAction:function($citationTool){var action="",urlHook="";switch($citationTool.attr("id")){case"saveCitationInlineTop":case"saveCitationInlineBottom":action="/action/addFavoritePublication";urlHook="&saveCitation=true";break;case"trackCitationInlineTop":case"trackCitationInlineBottom":action="/action/addCitationAlert";urlHook="&trackCitation=true";break;case"emailCitationInlineTop":case"emailCitationInlineBottom":action="/action/emailCitations?from=true&userAction=list";urlHook="&emailCitation=true";break;case"exportCitationInlineTop":case"exportCitationInlineBottom":action="/action/showCitFormats";urlHook="&exportCitation=true";break;default:break}this.$searchControlFormObj.prop("method","POST");this.$searchControlFormObj.prop("action",window.jstorSearch.hostURL+action);var $redirectUriObj=this.$searchControlFormObj.find('input[name="redirectUri"]');$redirectUriObj.val($redirectUriObj.val()+urlHook)}}},{handlebars:17,"shared/controllers/storage":10}],3:[function(require,module,exports){(function(global){typeof window!=="undefined"?window["jslogger"]:typeof global!=="undefined"?global["jslogger"]:null;function SnippetManager(searchQuery){"use strict";this.init=function(){var self=this;if(this.itemsUserHasAccessTo.length){this.requestSnippets(this.itemsUserHasAccessTo,searchQuery,function(){})}};this.requestSnippets=function(docIds,query,callBack){var self=this,start_timer,url="/searchui/snippets";if(docIds.length){var queryObj={ids:docIds,query:query},jsonStr=JSON.stringify(queryObj);$.ajax({type:"POST",url:url,data:{snippetParams:jsonStr},dataType:"json",context:$("body"),cache:false,timeout:self.ajaxParams.connectionTimeout,beforeSend:function(){start_timer=(new Date).getTime()},complete:function(jqXHR,textStatus){var call_time=(new Date).getTime()-start_timer;$(window).trigger("call_complete",[{js_location:"snippet_manager.request_snippets",requested_url:url,response:textStatus,http_code:jqXHR.status,time:call_time}])},success:function(datareturn){if(datareturn&&datareturn.results&&datareturn.results.length){for(var i=0;i<docIds.length;i++){for(var i2=0;i2<datareturn.results.length;i2++){if(datareturn.results[i2]["id"]===docIds[i].id){datareturn.results[i2]["resultType"]=docIds[i]["resultType"]}}}self.hashSnippetData(datareturn.results);$(document).trigger({type:"snippetsLoaded",results:datareturn.results});return true}else{$(document).trigger({type:"snippetsFailed",results:datareturn.results});jslogger.log_event("error","snippet_manager.request_snippets.service_error",{requested_url:url,javascript:"received unexpected results, triggered snippet failure",results:datareturn.results});return false}},error:function(xhr,type,errorThrown){$(document).trigger({type:"snippetsFailed",results:arguments});var errorMessage="call failed ["+xhr.status+" / "+type+" / "+errorThrown+"]";if(window.wasUnloaded){errorMessage="call failed, user left page before complete";errorThrown="user canceled"}jslogger.log_event("error","snippet_manager.request_snippets."+String(errorThrown).toLowerCase(),{requested_url:url,javascript:errorMessage});return false}})}else{return false}};this.hashSnippetData=function(results){var self=this;$.each(results,function(idx,result){if(!self.cachedSnippets[result.id]){self.cachedSnippets[result.id]=result}})};this.addItem=function(){this.itemsUserHasAccessTo=_getIdsAndTypes($(".userHasAccess"))};function _getIdsAndTypes(results){var idArr=[];for(var i=0;i<results.length;i++){var idtypemap={};idtypemap["id"]=$(results[i]).data("id");idtypemap["resultType"]=$(results[i]).data("resulttype");idArr.push(idtypemap)}return idArr}this.ajaxParams={connectionTimeout:5e3,maxItems:10,requestsInProgress:0};this.cachedSnippets={};this.searchQuery=searchQuery;this.itemsUserHasAccessTo=_getIdsAndTypes($(".userHasAccess"));return this}module.exports=SnippetManager}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],4:[function(require,module,exports){var Handlebars=require("handlebars");require("shared/vendor/plugins/jquery.inview");module.exports={evaluationDOM:{evaluationPanes:".evaluation-pane",$handleBarsTemplate:$("#tpl-evaluationPane"),$handleBarsTemplate2:$("#tpl-evaluationPane_books")},init:function(snippetManager){var self=this;this.snippetManager=snippetManager;$(function(){$(self.evaluationDOM.evaluationPanes).show();$(document).on("snippetsLoaded",function(event){if(event.results){if($(self.evaluationDOM.evaluationPanes).length){self._populateEvaluationPanes(event.results)}}});$(document).on("snippetsFailed",function(event){$(".evaluation-pane").remove()});$(document).on("jstor-evaluation-pane-loaded",function(event){var ePanesAll=$(self.evaluationDOM.evaluationPanes);$.each(ePanesAll,function(idx,ePane){var dl=$(this).find("dl");if($(this).html().indexOf("Loading additional")>-1){$(ePane).hide()}})})})},_populateEvaluationPanes:function(results){var self=this,impressions=0;if(document.cookie.indexOf("all_snippets=false")===-1){if(results){$.each(results,function(idx,val){var $ePane=$(self.evaluationDOM.evaluationPanes+"[data-id='"+val.id+"']");$ePane.html(self._compileTemplate(val.id)).off("inview");var numResults=$ePane.find("dd").length;if(!numResults){$ePane.remove()}impressions+=numResults});$(document).trigger({type:"jstor-evaluation-pane-loaded",impressions:impressions});return true}}return false},_compileTemplate:function(evaluationID){var data=this.snippetManager.cachedSnippets[evaluationID],template;if(data["resultType"]==="book"){template=Handlebars.compile(this.evaluationDOM.$handleBarsTemplate2.html())}else{template=Handlebars.compile(this.evaluationDOM.$handleBarsTemplate.html())}data["urlparams"]=window.jstorSearch.searchItemParams;return template(data)}}},{handlebars:17,"shared/vendor/plugins/jquery.inview":19}],5:[function(require,module,exports){var mobileHelper=require("../../controllers/mobile-helper");require("shared/models/siteVars");module.exports={init:function(){var self=this;self.adjustHeight();$(".slideOutBar").on("click",function(){if(!$(this).hasClass("mobileNavOpen")){window.currentScrolledPosition=$(window).scrollTop();$("html, body").animate({scrollTop:0},200)}else{$("html, body").animate({scrollTop:window.currentScrolledPosition},200)}$(".slideOutBar, .subcontent, #navToggle").toggleClass("mobileNavOpen")});var timer=0;$(window).on("resize",function(){clearTimeout(timer);timer=setTimeout(function(){self.adjustHeight();self.resetSideBar()},300)})},adjustHeight:function(){$(".slideOutBar, .subcontent").height($("#content").height()+"px")},resetSideBar:function(){if(!mobileHelper.isWindowSizeSmall()){$(".subcontent, .slideOutBar, #navToggle").removeClass("mobileNavOpen")}}}},{"../../controllers/mobile-helper":1,"shared/models/siteVars":14}],6:[function(require,module,exports){var storage=require("shared/controllers/storage");module.exports={init:function(){storage.setStorageType("sessionStorage");if(this.getQueryParam("rs")===""){var curSearches=JSON.parse(storage.get("recentSearches"))||[],currentSearchTerm=$("#searchBox").val(),termLocationInArray=$.inArray(currentSearchTerm,curSearches),isError=$(".alert-box-error").length;if(termLocationInArray===-1&&!isError){curSearches.unshift(currentSearchTerm);storage.set("recentSearches",JSON.stringify(curSearches),1)}else if(!isError){var element=curSearches[termLocationInArray];curSearches.splice(termLocationInArray,1);curSearches.unshift(element);storage.set("recentSearches",JSON.stringify(curSearches),1)}}},getQueryParam:function(name){var regexS="[\\?&]"+name+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(window.location.href);if(results){return results[1]}return""}}},{"shared/controllers/storage":10}],7:[function(require,module,exports){module.exports={init:function(){var modalID="#savedSearchOverlay";$(modalID).hide();if(window.location.search.search("didSaveSearch=true")!==-1&&window.location.hash!=="#didSaveSearch"){window.location.hash="#didSaveSearch";if($(modalID).length){$(modalID).addClass("overlay-jstor-modal reveal-modal small").removeClass("alert-box alert-box-blue").append('<a href="#" class="close-reveal-modal">&#215; <span class="visuallyhidden">Close Overlay</span></a>').prepend('<h2 class="overlay-header-with-lines">Search Alert Created</h2>').appendTo("body");$(modalID+"> p:eq(0)").addClass("mtm");$(modalID).foundation("reveal","open");setTimeout(function(){$(modalID).attr("tabindex",-1).focus()},500);$.ajax({url:"http://"+window.location.host+"/action/emailCitations",cache:false})}}$("#frmSaveSearch").on("submit",function(){var saveSearchName=encodeURIComponent($('input[name="saveSearchName"]').val());if(saveSearchName===""){saveSearchName="My Search"}var appendSearchTerm=$('#frmSaveSearch input[name="redirectUri"]').val()+"&saveSearchName="+saveSearchName;$('#frmSaveSearch input[name="redirectUri"], #frmSaveSearch input[name="url"]').val(appendSearchTerm)})}}},{}],8:[function(require,module,exports){var siteVars=require("shared/models/siteVars"),mobileHelper=require("../controllers/mobile-helper"),mobileSideBar=require("./components/mobileSideBar"),mobileBookmark=require("shared/views/components/mobileBookmark"),json3=require("shared/vendor/json3"),storage=require("shared/controllers/storage");module.exports=function(){if(!window.console||!window.console.log){window.console={log:function(ary){}}}$(document).ready(function(){if(mobileHelper.browserDoesInterpretMQ()){mobileHelper.init();mobileSideBar.init();mobileBookmark.init()}if(mobileHelper.isTouchDevice()){$("#nav-global .dropdown").hide();$("#nav-global .has-dropdown > a").on("click",function(e){e.preventDefault();var $curDropDown=$(this).siblings(".dropdown");$("#nav-global .dropdown").not($curDropDown).hide();$curDropDown.toggle()})}$(document).on("click","#nav-global a",function(){storage.set("jstor-saved-search",null,0)})})}()},{"../controllers/mobile-helper":1,"./components/mobileSideBar":5,"shared/controllers/storage":10,"shared/models/siteVars":14,"shared/vendor/json3":18,"shared/views/components/mobileBookmark":28}],9:[function(require,module,exports){var saveSearch=require("./components/saveSearch"),evaluationPane=require("./components/evaluationPane"),citationTools=require("./components/citationTools"),v2citationtools=require("shared/views/components/v2/citation-tools"),selectAll=require("shared/views/components/selectAll"),recentSearch=require("./components/recentSearch"),sams=require("shared/views/analytics/counter/sams-counter-search-results"),SnippetManager=require("./components/classes/SnippetManager"),libchat=require("shared/views/components/libchat"),formSubmissionIndicator=require("shared/views/components/form-submission-indicator"),mylistsOverlay=require("shared/views/components/my-lists-overlay"),mobileHelper=require("../controllers/mobile-helper"),rrOverlay=require("shared/views/components/rr-overlay"),facetSearch=require("shared/views/components/facetSearch"),jstorfacet=require("shared/views/components/jstorfacet");require("./global-scripts");require("foundation5/foundation.alert");require("foundation5/foundation.tooltip");(function(){$(function(){"use strict";if(jstorfacet){jstorfacet.showhidex(".search-facet ul",10)}var citationCheckBoxClass=".citationItem",searchQuery=$("#searchBox").val(),sm=new SnippetManager(searchQuery);sm.init();evaluationPane.init(sm);mylistsOverlay.init();saveSearch.init();citationTools.init(citationCheckBoxClass);recentSearch.init();selectAll.init(citationCheckBoxClass,".selectAll");v2citationtools.init("#bulk_citation_export_form","#searchFormTools");sams.init(window.jstorSearch.consortium_map);libchat.init($(".provider-statement"));rrOverlay.init();formSubmissionIndicator.init();facetSearch.applyListeners();if(Foundation.libs.tooltip){Foundation.libs.tooltip.settings.hover_delay=300}if($("#content .button-group").length){require("foundation5/foundation.magellan");if(mobileHelper.currentSize()==="large"||mobileHelper.currentSize()==="xlarge"){$(document).foundation({"magellan-expedition":{threshold:0}})}else{$(document).foundation({"magellan-expedition":{threshold:80}})}}})})()},{"../controllers/mobile-helper":1,"./components/citationTools":2,"./components/classes/SnippetManager":3,"./components/evaluationPane":4,"./components/recentSearch":6,"./components/saveSearch":7,"./global-scripts":8,"foundation5/foundation.alert":11,"foundation5/foundation.magellan":12,"foundation5/foundation.tooltip":13,"shared/views/analytics/counter/sams-counter-search-results":20,"shared/views/components/facetSearch":22,"shared/views/components/form-submission-indicator":23,"shared/views/components/jstorfacet":25,"shared/views/components/libchat":26,"shared/views/components/my-lists-overlay":29,"shared/views/components/rr-overlay":32,"shared/views/components/selectAll":33,"shared/views/components/v2/citation-tools":36}],10:[function(require,module,exports){module.exports={storageType:"localStorage",setStorageType:function(type){if(type==="localStorage"||type==="sessionStorage"){this.storageType=type;return true}else{throw new Error("Storage Type invalid. Please use either localStorage or sessionStorage")}},localStoreSupport:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return false}},set:function(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);expires="; expires="+date.toGMTString()}else{expires=""}if(this.localStoreSupport()){window[this.storageType].setItem(name,value)}else{document.cookie=name+"="+value+expires+"; path=/"}},get:function(name){if(this.localStoreSupport()){return window[this.storageType].getItem(name)}else{var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length)}}return null}},del:function(name){if(this.localStoreSupport()){window[this.storageType].removeItem(name)}else{this.set(name,"",-1)}}}},{}],11:[function(require,module,exports){(function($,window,document,undefined){"use strict";Foundation.libs.alert={name:"alert",version:"5.5.3",settings:{callback:function(){}},init:function(scope,method,options){this.bindings(method,options)},events:function(){var self=this,S=this.S;$(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] .close",function(e){var alertBox=S(this).closest("["+self.attr_name()+"]"),settings=alertBox.data(self.attr_name(true)+"-init")||self.settings;e.preventDefault();if(Modernizr.csstransitions){alertBox.addClass("alert-close");alertBox.on("transitionend webkitTransitionEnd oTransitionEnd",function(e){S(this).trigger("close.fndtn.alert").remove();settings.callback()})}else{alertBox.fadeOut(300,function(){S(this).trigger("close.fndtn.alert").remove();settings.callback()})}})},reflow:function(){}}})(jQuery,window,window.document)},{}],12:[function(require,module,exports){(function($,window,document,undefined){"use strict";Foundation.libs["magellan-expedition"]={name:"magellan-expedition",version:"5.5.3",settings:{active_class:"active",threshold:0,destination_threshold:20,throttle_delay:30,fixed_top:0,offset_by_height:true,duration:700,easing:"swing"},init:function(scope,method,options){Foundation.inherit(this,"throttle");this.bindings(method,options)},events:function(){var self=this,S=self.S,settings=self.settings;self.set_expedition_position();S(self.scope).off(".magellan").on("click.fndtn.magellan","["+self.add_namespace("data-magellan-arrival")+"] a[href*=#]",function(e){var sameHost=this.hostname===location.hostname||!this.hostname,samePath=self.filterPathname(location.pathname)===self.filterPathname(this.pathname),testHash=this.hash.replace(/(:|\.|\/)/g,"\\$1"),anchor=this;if(sameHost&&samePath&&testHash){e.preventDefault();var expedition=$(this).closest("["+self.attr_name()+"]"),settings=expedition.data("magellan-expedition-init"),hash=this.hash.split("#").join(""),target=$('a[name="'+hash+'"]');if(target.length===0){target=$("#"+hash)}var scroll_top=target.offset().top-settings.destination_threshold+1;if(settings.offset_by_height){scroll_top=scroll_top-expedition.outerHeight()}$("html, body").stop().animate({scrollTop:scroll_top},settings.duration,settings.easing,function(){if(history.pushState){history.pushState(null,null,anchor.pathname+anchor.search+"#"+hash)}else{location.hash=anchor.pathname+anchor.search+"#"+hash}})}}).on("scroll.fndtn.magellan",self.throttle(this.check_for_arrivals.bind(this),settings.throttle_delay))},check_for_arrivals:function(){var self=this;self.update_arrivals();self.update_expedition_positions()},set_expedition_position:function(){var self=this;$("["+this.attr_name()+"=fixed]",self.scope).each(function(idx,el){var expedition=$(this),settings=expedition.data("magellan-expedition-init"),styles=expedition.attr("styles"),top_offset,fixed_top;expedition.attr("style","");top_offset=expedition.offset().top+settings.threshold;fixed_top=parseInt(expedition.data("magellan-fixed-top"));if(!isNaN(fixed_top)){self.settings.fixed_top=fixed_top}expedition.data(self.data_attr("magellan-top-offset"),top_offset);expedition.attr("style",styles)})},update_expedition_positions:function(){var self=this,window_top_offset=$(window).scrollTop();$("["+this.attr_name()+"=fixed]",self.scope).each(function(){var expedition=$(this),settings=expedition.data("magellan-expedition-init"),styles=expedition.attr("style"),top_offset=expedition.data("magellan-top-offset");if(window_top_offset+self.settings.fixed_top>=top_offset){var placeholder=expedition.prev("["+self.add_namespace("data-magellan-expedition-clone")+"]");if(placeholder.length===0){placeholder=expedition.clone();placeholder.removeAttr(self.attr_name());placeholder.attr(self.add_namespace("data-magellan-expedition-clone"),"");expedition.before(placeholder)}expedition.css({position:"fixed",top:settings.fixed_top}).addClass("fixed")}else{expedition.prev("["+self.add_namespace("data-magellan-expedition-clone")+"]").remove();expedition.attr("style",styles).css("position","").css("top","").removeClass("fixed")}})},update_arrivals:function(){var self=this,window_top_offset=$(window).scrollTop();$("["+this.attr_name()+"]",self.scope).each(function(){var expedition=$(this),settings=expedition.data(self.attr_name(true)+"-init"),offsets=self.offsets(expedition,window_top_offset),arrivals=expedition.find("["+self.add_namespace("data-magellan-arrival")+"]"),active_item=false;offsets.each(function(idx,item){if(item.viewport_offset>=item.top_offset){var arrivals=expedition.find("["+self.add_namespace("data-magellan-arrival")+"]");arrivals.not(item.arrival).removeClass(settings.active_class);item.arrival.addClass(settings.active_class);active_item=true;return true}});if(!active_item){arrivals.removeClass(settings.active_class)}})},offsets:function(expedition,window_offset){var self=this,settings=expedition.data(self.attr_name(true)+"-init"),viewport_offset=window_offset;return expedition.find("["+self.add_namespace("data-magellan-arrival")+"]").map(function(idx,el){var name=$(this).data(self.data_attr("magellan-arrival")),dest=$("["+self.add_namespace("data-magellan-destination")+"="+name+"]");if(dest.length>0){var top_offset=dest.offset().top-settings.destination_threshold;if(settings.offset_by_height){top_offset=top_offset-expedition.outerHeight()}top_offset=Math.floor(top_offset);return{destination:dest,arrival:$(this),top_offset:top_offset,viewport_offset:viewport_offset}}}).sort(function(a,b){if(a.top_offset<b.top_offset){return-1}if(a.top_offset>b.top_offset){return 1}return 0})},data_attr:function(str){if(this.namespace.length>0){return this.namespace+"-"+str}return str},off:function(){this.S(this.scope).off(".magellan");this.S(window).off(".magellan")},filterPathname:function(pathname){pathname=pathname||"";return pathname.replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},reflow:function(){var self=this;$("["+self.add_namespace("data-magellan-expedition-clone")+"]",self.scope).remove()}}})(jQuery,window,window.document)},{}],13:[function(require,module,exports){(function($,window,document,undefined){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.5.3",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:false,hover_delay:200,fade_in_duration:150,fade_out_duration:150,show_on:"all",tip_template:function(selector,content){return'<span data-selector="'+selector+'" id="'+selector+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'" role="tooltip">'+content+'<span class="nub"></span></span>'}},cache:{},init:function(scope,method,options){Foundation.inherit(this,"random_str");this.bindings(method,options)},should_show:function(target,tip){var settings=$.extend({},this.settings,this.data_options(target));if(settings.show_on==="all"){return true}else if(this.small()&&settings.show_on==="small"){return true}else if(this.medium()&&settings.show_on==="medium"){return true}else if(this.large()&&settings.show_on==="large"){return true}return false},medium:function(){return matchMedia(Foundation.media_queries["medium"]).matches},large:function(){return matchMedia(Foundation.media_queries["large"]).matches},events:function(instance){var self=this,S=self.S;self.create(this.S(instance));function _startShow(elt,$this,immediate){if(elt.timer){return}if(immediate){elt.timer=null;self.showTip($this)}else{elt.timer=setTimeout(function(){elt.timer=null;self.showTip($this)}.bind(elt),self.settings.hover_delay)}}function _startHide(elt,$this){if(elt.timer){clearTimeout(elt.timer);elt.timer=null}self.hide($this)}$(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(e){var $this=S(this),settings=$.extend({},self.settings,self.data_options($this)),is_touch=false;if(Modernizr.touchevents&&/touchstart|MSPointerDown/i.test(e.type)&&S(e.target).is("a")){return false}if(/mouse/i.test(e.type)&&self.ie_touch(e)){return false}if($this.hasClass("open")){if(Modernizr.touchevents&&/touchstart|MSPointerDown/i.test(e.type)){e.preventDefault()}self.hide($this)}else{if(settings.disable_for_touch&&Modernizr.touchevents&&/touchstart|MSPointerDown/i.test(e.type)){return}else if(!settings.disable_for_touch&&Modernizr.touchevents&&/touchstart|MSPointerDown/i.test(e.type)){e.preventDefault();S(settings.tooltip_class+".open").hide();is_touch=true;if($(".open["+self.attr_name()+"]").length>0){var prevOpen=S($(".open["+self.attr_name()+"]")[0]);self.hide(prevOpen)}}if(/enter|over/i.test(e.type)){_startShow(this,$this)}else if(e.type==="mouseout"||e.type==="mouseleave"){_startHide(this,$this)}else{_startShow(this,$this,true)}}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(e){if(/mouse/i.test(e.type)&&self.ie_touch(e)){return false}if($(this).data("tooltip-open-event-type")=="touch"&&e.type=="mouseleave"){return}else if($(this).data("tooltip-open-event-type")=="mouse"&&/MSPointerDown|touchstart/i.test(e.type)){self.convert_to_touch($(this))}else{_startHide(this,$(this))}}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(e){_startHide(this,S(this))})},ie_touch:function(e){return false},showTip:function($target){var $tip=this.getTip($target);if(this.should_show($target,$tip)){return this.show($target)}return},getTip:function($target){var selector=this.selector($target),settings=$.extend({},this.settings,this.data_options($target)),tip=null;if(selector){tip=this.S('span[data-selector="'+selector+'"]'+settings.tooltip_class)}return typeof tip==="object"?tip:false},selector:function($target){var dataSelector=$target.attr(this.attr_name())||$target.attr("data-selector");if(typeof dataSelector!="string"){dataSelector=this.random_str(6);$target.attr("data-selector",dataSelector).attr("aria-describedby",dataSelector)}return dataSelector},create:function($target){var self=this,settings=$.extend({},this.settings,this.data_options($target)),tip_template=this.settings.tip_template;if(typeof settings.tip_template==="string"&&window.hasOwnProperty(settings.tip_template)){tip_template=window[settings.tip_template]}var $tip=$(tip_template(this.selector($target),$("<div></div>").html($target.attr("title")).html())),classes=this.inheritable_classes($target);$tip.addClass(classes).appendTo(settings.append_to);if(Modernizr.touchevents){$tip.append('<span class="tap-to-close">'+settings.touch_close_text+"</span>");$tip.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(e){self.hide($target)})}$target.removeAttr("title").attr("title","")},reposition:function(target,tip,classes){var width,nub,nubHeight,nubWidth,objPos;tip.css("visibility","hidden").show();width=target.data("width");nub=tip.children(".nub");nubHeight=nub.outerHeight();nubWidth=nub.outerWidth();if(this.small()){tip.css({width:"100%"})}else{tip.css({width:width?width:"auto"})}objPos=function(obj,top,right,bottom,left,width){return obj.css({top:top?top:"auto",bottom:bottom?bottom:"auto",left:left?left:"auto",right:right?right:"auto"}).end()};var o_top=target.offset().top;var o_left=target.offset().left;var outerHeight=target.outerHeight();objPos(tip,o_top+outerHeight+10,"auto","auto",o_left);if(this.small()){objPos(tip,o_top+outerHeight+10,"auto","auto",12.5,$(this.scope).width());tip.addClass("tip-override");objPos(nub,-nubHeight,"auto","auto",o_left)}else{if(Foundation.rtl){nub.addClass("rtl");o_left=o_left+target.outerWidth()-tip.outerWidth()}objPos(tip,o_top+outerHeight+10,"auto","auto",o_left);if(nub.attr("style")){nub.removeAttr("style")}tip.removeClass("tip-override");var tip_outerHeight=tip.outerHeight();if(classes&&classes.indexOf("tip-top")>-1){if(Foundation.rtl){nub.addClass("rtl")}objPos(tip,o_top-tip_outerHeight,"auto","auto",o_left).removeClass("tip-override")}else if(classes&&classes.indexOf("tip-left")>-1){objPos(tip,o_top+outerHeight/2-tip_outerHeight/2,"auto","auto",o_left-tip.outerWidth()-nubHeight).removeClass("tip-override");nub.removeClass("rtl")}else if(classes&&classes.indexOf("tip-right")>-1){objPos(tip,o_top+outerHeight/2-tip_outerHeight/2,"auto","auto",o_left+target.outerWidth()+nubHeight).removeClass("tip-override");nub.removeClass("rtl")}}tip.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function($target){var settings=$.extend({},this.settings,this.data_options($target)),inheritables=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(settings.additional_inheritable_classes),classes=$target.attr("class"),filtered=classes?$.map(classes.split(" "),function(el,i){if($.inArray(el,inheritables)!==-1){return el
}}).join(" "):"";return $.trim(filtered)},convert_to_touch:function($target){var self=this,$tip=self.getTip($target),settings=$.extend({},self.settings,self.data_options($target));if($tip.find(".tap-to-close").length===0){$tip.append('<span class="tap-to-close">'+settings.touch_close_text+"</span>");$tip.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(e){self.hide($target)})}$target.data("tooltip-open-event-type","touch")},show:function($target){var $tip=this.getTip($target);if($target.data("tooltip-open-event-type")=="touch"){this.convert_to_touch($target)}this.reposition($target,$tip,$target.attr("class"));$target.addClass("open");$tip.fadeIn(this.settings.fade_in_duration)},hide:function($target){var $tip=this.getTip($target);$tip.fadeOut(this.settings.fade_out_duration,function(){$tip.find(".tap-to-close").remove();$tip.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose");$target.removeClass("open")})},off:function(){var self=this;this.S(this.scope).off(".fndtn.tooltip");this.S(this.settings.tooltip_class).each(function(i){$("["+self.attr_name()+"]").eq(i).attr("title",$(this).text())}).remove()},reflow:function(){}}})(jQuery,window,window.document)},{}],14:[function(require,module,exports){window.jstor={};window.jstor.mediaQueryBreakpoints={small:"560",medium:"760",large:"1024",xlarge:"1280"}},{}],15:[function(require,module,exports){var google=google||{};google.bookmarkbubble=google.bookmarkbubble||{};google.bind=function(fn,context){return function(){return fn.apply(context,arguments)}};google.abstractMethod=function(){throw Error("Unimplemented abstract method.")};google.bookmarkbubble.Bubble=function(){this.boundScrollHandler_=google.bind(this.setPosition,this);this.element_=null;this.hasBeenDestroyed_=false};google.bookmarkbubble.Bubble.prototype.showIfAllowed=function(){if(!this.isAllowedToShow_()){return false}this.show_();return true};google.bookmarkbubble.Bubble.prototype.showIfAllowedWhenLoaded=function(opt_callback){if(!this.isAllowedToShow_()){return false}var self=this;var img=self.loadImg_=document.createElement("img");img.src=self.getIconUrl_();img.onload=function(){if(img.complete){delete self.loadImg_;img.onload=null;self.show_();opt_callback&&opt_callback()}};img.onload();return true};google.bookmarkbubble.Bubble.prototype.setHashParameter=google.abstractMethod;google.bookmarkbubble.Bubble.prototype.hasHashParameter=google.abstractMethod;google.bookmarkbubble.Bubble.prototype.NUMBER_OF_TIMES_TO_DISMISS=2;google.bookmarkbubble.Bubble.prototype.TIME_UNTIL_AUTO_DESTRUCT=15e3;google.bookmarkbubble.Bubble.prototype.LOCAL_STORAGE_PREFIX="BOOKMARK_";google.bookmarkbubble.Bubble.prototype.DISMISSED_="DISMISSED_COUNT";google.bookmarkbubble.Bubble.prototype.IMAGE_ARROW_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAMAAAAYAM5SAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzJFNTUzOTVGM0Q5MTFFMDk1OUZGOTUxMzQxOTZBOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzJFNTUzOTZGM0Q5MTFFMDk1OUZGOTUxMzQxOTZBOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MkU1NTM5M0YzRDkxMUUwOTU5RkY5NTEzNDE5NkE5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MkU1NTM5NEYzRDkxMUUwOTU5RkY5NTEzNDE5NkE5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmaTRQ0AAAAMUExURe7u7v////X19f///0GahZ4AAAAEdFJOU////wBAKqn0AAAAR0lEQVR42tzJyQEAIAgDMND9d/ZGWmEB843UTYsArWJF54rPFx0UHhYclT8ud0/de8suqHNR7QtrXVzzkhqXVb+0hl+rCTAAtw4F95zesBUAAAAASUVORK5CYII=";google.bookmarkbubble.Bubble.prototype.IMAGE_CLOSE_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjhEMjhFOTJGMzI4MTFFMDk1OUZGOTUxMzQxOTZBOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjhEMjhFOTNGMzI4MTFFMDk1OUZGOTUxMzQxOTZBOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERDM2MDFBNUYyMjkxMUUwOTU5RkY5NTEzNDE5NkE5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERDM2MDFBNkYyMjkxMUUwOTU5RkY5NTEzNDE5NkE5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjMAla0AAAAwUExURTMzM6ioqEpKSs3NzTo6OmpqakNDQ+Li4ioqKlpaWnZ2doeHh5qamlZWVlFRUeTk5IUDvwkAAAIJSURBVHja3JbZsoMgDIZZg6DA+7/tScIWtTOltyfYqQQ//oRN1fGjKaV+JRyoBW+ZM7khbtfARK+aGJg9K9GfmAwSeL9n0aeLwnNQSt6yiCKaUgIoWBGW19+9IcY0EJPjh/J2TYQCi5uREXKwyq+5OEKirdPseMTW0F3BL5WBZM8t7XfmTLpX96AldmSpUnK5WitTkRx+alQdM3kKI0dH0HSPoYZwUd2GwDWMNLaZzE/Et3T4QXzmGiKh+jX7PTDHC8bkxL0iE4IufkZVz7lg8lQhGaKu0S2OkKUAOTHbWulqyEGLDGW42DlqoStyImaUPAPrCK7t8LbUmhZydKTvh/MJVF3kfvGJEeXEDtP1jthiXkjPfzrtHfGPXUm5PBBz3mT0YyNLlVHiTQUXlwFRzECIYTMAbTpELrE1GG4tkdPniRn2GDFakSDM0HFxU4EP81JPibBKT6aZnb2LlOJCMLCrI51Zo2XzYqx7qKil4lc0SVTCKZGpwgfu6liDc1qENs7kgRyMgLvEKsFqESMN4LjAVMHInBORJKAuxIBf4+SfKiQjFpfuUYhR8x3JEtFz2i30PpNc0HeEkkmvHtGs2DZv5KO9/FAmopzidrUuJUHV3S77O/K9SBX2PB6Qt+OuLJX2hv7+Dpcqm6/9qXL8I0Rtf8Nk/rqQZ/I36yc/fSj4TcMXsv4TYADp7j2MNhJKiAAAAABJRU5ErkJggg==";google.bookmarkbubble.Bubble.prototype.IMAGE_BLACKBERRY_ICON_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA7BpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wUmlnaHRzPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvcmlnaHRzLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcFJpZ2h0czpNYXJrZWQ9IkZhbHNlIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6Rjc3RjExNzQwNzIwNjgxMThGNjJERkQwMEY0QTI1MDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjBCMkE0OTU4QkMwMTFFMEE4MDNEMUFBM0ZDREM1QjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjBCMkE0OTQ4QkMwMTFFMEE4MDNEMUFBM0ZDREM1QjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzJGOTcxODNCRDhCRTAxMUEwRTNGNjkyNUFDRkE2MTkiIHN0UmVmOmRvY3VtZW50SUQ9InV1aWQ6MTBCREIxMUNGRjVBRTAxMUJDRDJBNzcxMjgxOTJDMzgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz55WxUmAAAB70lEQVR42sRTTaupURhdL07yUeSrzGTga2hgRilGkpmpCUoZGTP3A85A/oGZgYGBOkchUUpkIFK+opOI1EnYx7PvvW/OrTs6g/vU8+79rr33s9dae2+BMYafhAQ/DNlkMqGW1Wo1SCQSWK1WaLVaweFwsFKphMvlApPJhEAgQPOE8/kMYq1Wq/H+/g7kcjlK0iFmt9tlnU7nG5bNZtn1esVqtcJyucThcEC5XIas1Wp9o6TX66HT6VCpVERMKpXCYrHgd7HnEITtdov1es2Ox6Mo4fPzU3j02Xw+57OMRiMeGwkajYYlk0mOqVQqvL6+QkZV2+02brcb5HI5nE4nDAYDp/fx8cF393q9aDQafOF+vxfbxWIBGZmXSqVETqPRCPl8niUSCRArCiqaTqd5nzahdLvdiEajkPV6vYcQgdMn/cFgEOPxGOQ2YUqlEuFwmONms5ljxKpQKAj8HpAmMpJkDAYDbgwZ1u/3MRwOMZvNOEZSCacilPRfLBa5B8Kzrff7HfV6Hc1mk1P1eDzIZDKoVqvY7XbivOl0+usiPS9WKBTw+XyIRCJ4e3sT8c1mw0heLBbDy8sLbDYb4vH49wJ2u/1Pl5EHFKTf7/fzI/ubqXiV6eNyufD8qMjd0+nEzz8UCv1zMR/476/xS4ABAJ70zF1PPvhAAAAAAElFTkSuQmCC";google.bookmarkbubble.Bubble.prototype.IMAGE_SAFARI_FORWARD_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAkCAYAAAD2IghRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgZJREFUeNrsl99HQ2EYx8/WRImyP2BELFGWJWIXxW4SdVOKSJFSiixdJyK66WKJXaQUkbopdR/RbpqNSCNKRCQ2IrpZ35fncGRnO++Pnc7JvnwutvOec74e3+d5z+uJRqOazfoAE+BS5iFezX75wQXYBLVuMq5rBVyBZrcZZ+oBaTDoNuNMjeAMxHmi4wTjuhbADWhxm3GmMEVn2G3GmRrACUiAOrNFPlAQePgzxzRg6yJkKMTxjhlq3hGQLWacVxnQV2ZNkDLLpkVAovrt4BbMg0OZqOTIdM7keoQmxAMZDyiKzgHYM0aH1/iaiWm9MtciM9miJqlx28yi4hHYAddltm8OBalAiz6Jh9SAHWoiO8Xe65cxHv8D0y9gDCRF53gMzNls+hx0MNOiGxCbxRsC97FZnBK47xssgSGQl5njiTKNmKKqJMnsPfgyXOfZ8J5oA0rJbkCjoLvI/3dgnzaJd0XROAXTxirLGI/9+s2OX6uCESgVjWWwXWoRj/GwodpvlLtjxQ34SNHIqPw61D81WRxaK2CaRaPTimle4wNgl07oeYWGWePOUqU/rd5kNSrs4+aVmkWlsrShZHhv9HJUpV+x6SPQZWK6yYknIFaEKTBuEo1emt+aqqmiSvUlrm3RtNKcaNxMaZ6jnZMOy6FKNKfjVDVut4o1Z6Fa8arxf2T8R4ABAMxNWkZtHiMqAAAAAElFTkSuQmCC";google.bookmarkbubble.Bubble.prototype.IMAGE_PLAYBOOK_BOOKMARK_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjhEMjhFOTZGMzI4MTFFMDk1OUZGOTUxMzQxOTZBOTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjhEMjhFOTdGMzI4MTFFMDk1OUZGOTUxMzQxOTZBOTUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2OEQyOEU5NEYzMjgxMUUwOTU5RkY5NTEzNDE5NkE5NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2OEQyOEU5NUYzMjgxMUUwOTU5RkY5NTEzNDE5NkE5NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pmi5WPMAAAAwUExURb29vdPT08fHx5aWluTk5GlpaXx8fOzs7KysrPX19VZWVoiIiP39/WFhYaKiov///2c8oVAAAAAQdFJOU////////////////////wDgI10ZAAABEElEQVR42uzW0ZKDIAwF0CCRACH0//92rdVaBYHs085seSQeB66QER6/GPBF/wsFCOVkjLGJaCY9ggh6xJHVCCUKahEsdVCixEudkw6RLHWhz6fPo4ZgrYAO8VphFUJZK0V+zT3B9j7QIN4Qd9CU/XvY99LtMZmnEiHH9mCsLC/5pvGpvqdpviViboNAd2McNm5usFVjQ/O6VzfmU69HFBubp4HGgmc141A3OqfhhloYyTlsGkFw2RMMoHRN3aY+oiI96iOzB+D3QEwfbV/X0oO2hfo+Wt8vrxmQRuhw6Q5uX5FxtU5RoGfg+TifId+G/jFrr2dtOYu2g0iKq4OuHvqBTC6vTsjm+x/xJ9CPAAMAEPqQqkGB5zYAAAAASUVORK5CYII=";google.bookmarkbubble.Bubble.prototype.IMAGE_ANDROID3_BOOKMARK_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACMUlEQVRYR+2WzcdqURTGIxGJSEQiEpGIlGgUKY0SiWiURmnyJiLRIJESKY0S6R9d129TqnPq7HN6r1zuQxzb2ms961kfO5d8Ga4vx5d/m0C/3xd+n+AjBeLxuMRisU/iOy/BYrEQCCSTSZnP545JOFagUCjIcDiUwWAgfDuFIwLH4/FB+mg0Kpw5gSMCjUZDqtXqLV6tVpN6ve4kvrMeIOP9fn8LuNvtHDejbQUYu2w2a8g2k8mofrALUwJkN5vN5OfnR3q9niB5qVRSzeb3+2U6nRriMAk+n0/ZYMudbrerGhV7fK5WK8O9BwJk4HK5BInz+bzKtFwuS6vVUkRGo5Gs1+uXSW42GxXwSpq7KAOpSCSifD8vLoMCGAQCgYca25X12X673UooFDLdmqYlQDKv1yvj8fjT2Eo1fE0mE1NfL5uQmlFv5HQKegA1Kc0rvJ2Cy+Ui4XBYmHO7YE9w93Q6vb2qNYbsezpbF8ViUdLptJa5FgGUCAaDWg6xpeGsMr860yJAUzJOukilUtovpBaBdrttqw/omWazqcVXiwALiXF6Bmdm48V5Lpf7PQL86zkcDjeH1JeScM6P7/vnmG+2qQ4sFWCL8c/nCsrBbHc6HcPZvexMzrv5125CFlGlUpHlcqnmmnKcz2dDcqjCzmdaeC94B3SWmKUCNJTb7ZZEImH6Cj4z4VVEMY/Ho4hbwZIAI4XsdsEdnWVkScBu4Ht7s/f/2d9fJaBD/j+BryvwBySPr9aPfFVqAAAAAElFTkSuQmCC";google.bookmarkbubble.Bubble.prototype.IMAGE_ANDROID4_MOBILE_BOOKMARK_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAABYSURBVFhH7ZRBCgAgDMOs//+zimdPpVCQ7AMrWTOtM6M4s7j7riYABORYIOnZXUcoTgCBOgHLguT7tgKgYfIE9RISwLIg2QErABomT4AFdQKWBXQAAl8R2B3oJR7LKvEUAAAAAElFTkSuQmCC";google.bookmarkbubble.Bubble.prototype.msg={android:'<b>Install this app:</b><br /> 1) Add to Bookmarks,<br /> 2) Tap and Hold the bookmark,<br /> 3) Select "<b>Add Shortcut to Home</b>"',android3:'<b>Install this app:</b><br /> Tap <img src="'+google.bookmarkbubble.Bubble.prototype.IMAGE_ANDROID3_BOOKMARK_DATA_URL_+'" style="height: 1.5em;display: inline-block;padding:0;margin:0;" />,<br /> select "<b>Add to</b>" and then "<b>Home screen</b>"',android4:'<b>Install this app:</b><br /> 1) Tap <img src="'+google.bookmarkbubble.Bubble.prototype.IMAGE_ANDROID4_MOBILE_BOOKMARK_DATA_URL_+'" style="height: 1.5em;display: inline-block;padding:0;margin:0;" />,<br /> 2) Select "<b>Save to bookmarks</b>",<br /> 3) Select "<b>Add to</b>" and then "<b>Home</b>"',blackberry:'<b>Install this app:</b><br /> Tap <img src="'+google.bookmarkbubble.Bubble.prototype.IMAGE_BLACKBERRY_ICON_DATA_URL_+'" style="height: 1em;display: inline-block;padding:0;margin:0" />, select "<b>Add to Home Screen</b>"',playbook:'<b>Install this app:</b><br /> Tap <img src="'+google.bookmarkbubble.Bubble.prototype.IMAGE_PLAYBOOK_BOOKMARK_DATA_URL_+'" style="height: 1.5em;display: inline-block;padding:0;margin:0;" />, select  <br />"<b>Add to Home Screen</b>"',ios42orlater:'<b>Install this app</b>:<br /> Tap <img src="'+google.bookmarkbubble.Bubble.prototype.IMAGE_SAFARI_FORWARD_DATA_URL_+'" style="height: 1em;display: inline-block;padding: 0;margin: 0" /> and then <b>"Add to Home Screen"</b>',ioslegacy:'<b>Install this app</b>:<br /> Tap <b style="font-size:15px">+</b> and then <b>"Add to Home Screen"</b>'};google.bookmarkbubble.Bubble.prototype.REL_ICON_="apple-touch-icon";google.bookmarkbubble.Bubble.prototype.MOBILE_SAFARI_USERAGENT_REGEX_=/iPhone|iPod|iPad|Android|BlackBerry|PlayBook/;google.bookmarkbubble.Bubble.prototype.IPAD_USERAGENT_REGEX_=/iPad/;google.bookmarkbubble.Bubble.prototype.ANDROID_USERAGENT_REGEX_=/Android/;google.bookmarkbubble.Bubble.prototype.BLACKBERRY_USERAGENT_REGEX_=/BlackBerry/;google.bookmarkbubble.Bubble.prototype.PLAYBOOK_USERAGENT_REGEX_=/PlayBook/;google.bookmarkbubble.Bubble.prototype.IOS_VERSION_USERAGENT_REGEX_=/OS (\d)_(\d)(?:_(\d))?/;google.bookmarkbubble.Bubble.prototype.ANDROID_VERSION_USERAGENT_REGEX_=/Android (\d)\.(\d)(?:\.(\d))?/;google.bookmarkbubble.Bubble.prototype.MOBILE_CHROME_USERAGENT_REGEX_=/Chrome/;google.bookmarkbubble.Bubble.prototype.MOBILE_FIREFOX_USERAGENT_REGEX_=/Firefox/;google.bookmarkbubble.Bubble.prototype.isAllowedToShow_=function(){return this.isMobileSafari_()&&this.isNativeBrowser_()&&!this.hasBeenDismissedTooManyTimes_()&&!this.isFullscreen_()&&!this.hasHashParameter()};google.bookmarkbubble.Bubble.prototype.show_=function(){this.element_=this.build_();document.body.appendChild(this.element_);this.element_.style.WebkitTransform="translate3d(0,"+this.getHiddenYPosition_()+"px,0)";this.setHashParameter();window.setTimeout(this.boundScrollHandler_,1);window.addEventListener("scroll",this.boundScrollHandler_,false);window.setTimeout(google.bind(this.autoDestruct_,this),this.TIME_UNTIL_AUTO_DESTRUCT)};google.bookmarkbubble.Bubble.prototype.destroy=function(){if(this.hasBeenDestroyed_){return}window.removeEventListener("scroll",this.boundScrollHandler_,false);if(this.element_&&this.element_.parentNode==document.body){document.body.removeChild(this.element_);this.element_=null}this.hasBeenDestroyed_=true};google.bookmarkbubble.Bubble.prototype.rememberDismissal_=function(){if(window.localStorage){try{var key=this.LOCAL_STORAGE_PREFIX+this.DISMISSED_;var value=Number(window.localStorage.getItem(key))||0;window.localStorage.setItem(key,String(value+1))}catch(ex){}}};google.bookmarkbubble.Bubble.prototype.hasBeenDismissedTooManyTimes_=function(){if(!window.localStorage){return false}try{var key=this.LOCAL_STORAGE_PREFIX+this.DISMISSED_;var value=Number(window.localStorage.getItem(key))||0;return value>=this.NUMBER_OF_TIMES_TO_DISMISS}catch(ex){return true}};google.bookmarkbubble.Bubble.prototype.isFullscreen_=function(){return!!window.navigator.standalone};google.bookmarkbubble.Bubble.prototype.isMobileSafari_=function(){return this.MOBILE_SAFARI_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.isChrome_=function(){return this.MOBILE_CHROME_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.isFirefox_=function(){return this.MOBILE_FIREFOX_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.isNativeBrowser_=function(){if(this.isChrome_()||this.isFirefox_()){return false}return true};google.bookmarkbubble.Bubble.prototype.isIpad_=function(){return this.IPAD_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.isAndroid_=function(){return this.ANDROID_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.isBlackBerry_=function(){return this.BLACKBERRY_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.isPlayBook_=function(){return this.PLAYBOOK_USERAGENT_REGEX_.test(window.navigator.userAgent)};google.bookmarkbubble.Bubble.prototype.getVersion_=function(opt_a,opt_b,opt_c,opt_d){return opt_a<<21|opt_b<<14|opt_c<<7|opt_d};google.bookmarkbubble.Bubble.prototype.getIosVersion_=function(){var groups=this.IOS_VERSION_USERAGENT_REGEX_.exec(window.navigator.userAgent)||[];groups.shift();return this.getVersion_.apply(this,groups)};google.bookmarkbubble.Bubble.prototype.getAndroidVersion_=function(){var groups=this.ANDROID_VERSION_USERAGENT_REGEX_.exec(window.navigator.userAgent)||[];groups.shift();return this.getVersion_.apply(this,groups)};google.bookmarkbubble.Bubble.prototype.isMobile_=function(){return window.navigator.userAgent.indexOf("Mobile Safari")>=0};google.bookmarkbubble.Bubble.prototype.setPosition=function(){this.element_.style.WebkitTransition="-webkit-transform 0.7s ease-out";this.element_.style.WebkitTransform="translate3d(0,"+this.getVisibleYPosition_()+"px,0)";var $arrow=$(this.element_).find("#arrowPosition");var curLeft=$arrow.css("left");if(window.innerHeight<window.innerWidth){if($arrow.data("position")==="portrait"){$arrow.css("left",function(i,current){return parseInt(current)-30}).data("position","landscape")}}else{if($arrow.data("position")==="landscape"){$arrow.css("left",function(i,current){return parseInt(current)+30}).data("position","portrait")}}};google.bookmarkbubble.Bubble.prototype.closeClickHandler_=function(){this.destroy();this.rememberDismissal_()};google.bookmarkbubble.Bubble.prototype.autoDestruct_=function(){if(this.hasBeenDestroyed_){return}this.element_.style.WebkitTransition="-webkit-transform 0.7s ease-in";this.element_.style.WebkitTransform="translate3d(0,"+this.getHiddenYPosition_()+"px,0)";window.setTimeout(google.bind(this.destroy,this),700)};google.bookmarkbubble.Bubble.prototype.getVisibleYPosition_=function(){return this.isIpad_()||this.isPlayBook_()||this.getAndroidVersion_()>=this.getVersion_(3,0)?window.pageYOffset+17:window.pageYOffset-this.element_.offsetHeight+window.innerHeight-17};google.bookmarkbubble.Bubble.prototype.getHiddenYPosition_=function(){return this.isIpad_()||this.isPlayBook_()||this.getAndroidVersion_()>=this.getVersion_(3,0)?window.pageYOffset-this.element_.offsetHeight:window.pageYOffset+window.innerHeight};google.bookmarkbubble.Bubble.prototype.iconUrl_;google.bookmarkbubble.Bubble.prototype.getIconUrl_=function(){if(!this.iconUrl_){var link=this.getLink(this.REL_ICON_);if(!link||!(this.iconUrl_=link.href)){this.iconUrl_="data:image/png;base64,"}}return this.iconUrl_};google.bookmarkbubble.Bubble.prototype.getLink=function(rel){rel=rel.toLowerCase();var links=document.getElementsByTagName("link");for(var i=0;i<links.length;++i){var currLink=links[i];if(currLink.getAttribute("rel").toLowerCase()==rel){return currLink}}return null};google.bookmarkbubble.Bubble.prototype.build_=function(){var bubble=document.createElement("div");var isIpad=this.isIpad_();var isAndroid=this.isAndroid_();var isPlayBook=this.isPlayBook_();var isBlackBerry=this.isBlackBerry_();bubble.style.position="absolute";bubble.style.zIndex=1e5;bubble.style.width="100%";bubble.style.left="0";bubble.style.top="0";var bubbleInner=document.createElement("div");bubbleInner.style.position="relative";bubbleInner.style.width="214px";if(this.getAndroidVersion_()>=this.getVersion_(3,0)){bubbleInner.style.margin="0 0 0 "+(window.innerWidth-240)+"px"}else{bubbleInner.style.margin=isIpad?"0 0 0 82px":"0 auto"}bubbleInner.style.border="2px solid #fff";bubbleInner.style.padding="1em 1.5em 1.5em 0.5em";bubbleInner.style.WebkitBorderRadius="8px";bubbleInner.style.WebkitBoxShadow="0 0 8px rgba(0, 0, 0, 0.7)";bubbleInner.style.WebkitBackgroundSize="100% 8px";bubbleInner.style.backgroundColor="#eee";bubbleInner.style.background="#cddcf3 -webkit-gradient(linear, "+"left bottom, left top, "+isIpad||isPlayBook||this.getAndroidVersion_()>=this.getVersion_(3,0)?"from(#cddcf3), to(#b3caed)) no-repeat top":"from(#b3caed), to(#cddcf3)) no-repeat bottom";bubbleInner.style.font="1.0em sans-serif";bubble.appendChild(bubbleInner);if(isAndroid){bubbleInner.style.font="0.925em sans-serif";if(this.getAndroidVersion_()<this.getVersion_(3,0)){bubbleInner.innerHTML=this.msg.android}else{if(this.getAndroidVersion_()>=this.getVersion_(4,0)&&this.isMobile_()){bubbleInner.innerHTML=this.msg.android4}else{bubbleInner.innerHTML=this.msg.android3}}}else if(isBlackBerry){bubbleInner.innerHTML=this.msg.blackberry}else if(isPlayBook){bubbleInner.innerHTML=this.msg.playbook;bubbleInner.style.position="absolute";bubbleInner.style.right="0px"}else{if(this.getIosVersion_()>=this.getVersion_(4,2)){bubbleInner.innerHTML=this.msg.ios42orlater}else{bubbleInner.innerHTML=this.msg.ioslegacy}}var icon=document.createElement("div");icon.style["float"]="left";icon.style.width="55px";icon.style.height="55px";icon.style.margin="-2px 7px 3px 5px";icon.style.background="#fff url("+this.getIconUrl_()+") no-repeat 0 0";icon.style.WebkitBackgroundSize="contain";icon.style.WebkitBorderRadius="10px";icon.style.WebkitBoxShadow="0 2px 5px rgba(0, 0, 0, 0.4)";bubbleInner.insertBefore(icon,bubbleInner.firstChild);var arrow=document.createElement("div");arrow.setAttribute("data-position","portrait");arrow.id="arrowPosition";arrow.style.backgroundImage="url("+this.IMAGE_ARROW_DATA_URL_+")";arrow.style.width="25px";arrow.style.height="19px";arrow.style.position="absolute";arrow.style.left="91px";if(isIpad||isPlayBook){arrow.style.WebkitTransform="rotate(180deg)";arrow.style.top="-19px";arrow.style.left="91px"}else if(this.getAndroidVersion_()>=this.getVersion_(3,0)){arrow.style.WebkitTransform="scale(1, -1)";arrow.style.top="-19px";arrow.style.left="180px"}else{arrow.style.bottom="-19px";arrow.style.left="91px"}bubbleInner.appendChild(arrow);var close=document.createElement("a");close.onclick=google.bind(this.closeClickHandler_,this);close.style.position="absolute";close.style.display="block";close.style.top="4px";close.style.right="4px";close.style.width="16px";close.style.height="16px";close.style.background="url("+this.IMAGE_CLOSE_DATA_URL_+") no-repeat";close.style.WebkitBackgroundSize="contain";bubbleInner.appendChild(close);return bubble};module.exports=google},{}],16:[function(require,module,exports){(function(global){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t,e,n;return function t(e,n,r){function o(a,c){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){var r=t("matches-selector");e.exports=function(t,e,n){for(var o=n?t:t.parentNode;o&&o!==document;){if(r(o,e))return o;o=o.parentNode}}},{"matches-selector":2}],2:[function(t,e,n){function r(t,e){if(i)return i.call(t,e);for(var n=t.parentNode.querySelectorAll(e),r=0;r<n.length;++r)if(n[r]==t)return!0;return!1}var o=Element.prototype,i=o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector;e.exports=r},{}],3:[function(t,e,n){function r(t,e,n,r){var i=o.apply(this,arguments);return t.addEventListener(n,i),{destroy:function(){t.removeEventListener(n,i)}}}function o(t,e,n,r){return function(n){var o=i(n.target,e,!0);o&&(Object.defineProperty(n,"target",{value:o}),r.call(t,n))}}var i=t("closest");e.exports=r},{closest:1}],4:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.function=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],5:[function(t,e,n){function r(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!c.string(e))throw new TypeError("Second argument must be a String");if(!c.function(n))throw new TypeError("Third argument must be a Function");if(c.node(t))return o(t,e,n);if(c.nodeList(t))return i(t,e,n);if(c.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function i(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return s(document.body,t,e,n)}var c=t("./is"),s=t("delegate");e.exports=r},{"./is":4,delegate:3}],6:[function(t,e,n){function r(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.select(),e=t.value;else{var n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r),e=n.toString()}return e}e.exports=r},{}],7:[function(t,e,n){function r(){}r.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function r(){o.off(t,r),e.apply(n,arguments)}var o=this;return r._=e,this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;for(r;o>r;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;a>i;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},e.exports=r},{}],8:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("select"),c=r(a),s=function(){function t(e){o(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""},t.prototype.initSelection=function t(){if(this.text&&this.target)throw new Error('Multiple attributes declared, use either "target" or "text"');if(this.text)this.selectFake();else{if(!this.target)throw new Error('Missing required attributes, use either "target" or "text"');this.selectTarget()}},t.prototype.selectFake=function t(){var e=this;this.removeFake(),this.fakeHandler=document.body.addEventListener("click",function(){return e.removeFake()}),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.position="absolute",this.fakeElem.style.left="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=c.default(this.fakeElem),this.copyText()},t.prototype.removeFake=function t(){this.fakeHandler&&(document.body.removeEventListener("click"),this.fakeHandler=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function t(){this.selectedText=c.default(this.target),this.copyText()},t.prototype.copyText=function t(){var e=void 0;try{e=document.execCommand(this.action)}catch(n){e=!1}this.handleResult(e)},t.prototype.handleResult=function t(e){e?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function t(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function t(){this.removeFake()},i(t,[{key:"action",set:function t(){var e=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function t(){return this._action}},{key:"target",set:function t(e){if(void 0!==e){if(!e||"object"!=typeof e||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');this._target=e}},get:function t(){return this._target}}]),t}();n.default=s,e.exports=n.default},{select:6}],9:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}n.__esModule=!0;var c=t("./clipboard-action"),s=r(c),u=t("tiny-emitter"),l=r(u),f=t("good-listener"),d=r(f),h=function(t){function e(n,r){o(this,e),t.call(this),this.resolveOptions(r),this.listenClick(n)}return i(e,t),e.prototype.resolveOptions=function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText},e.prototype.listenClick=function t(e){var n=this;this.listener=d.default(e,"click",function(t){return n.onClick(t)})},e.prototype.onClick=function t(e){this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new s.default({action:this.action(e.target),target:this.target(e.target),text:this.text(e.target),trigger:e.target,emitter:this})
},e.prototype.defaultAction=function t(e){return a("action",e)},e.prototype.defaultTarget=function t(e){var n=a("target",e);return n?document.querySelector(n):void 0},e.prototype.defaultText=function t(e){return a("text",e)},e.prototype.destroy=function t(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(l.default);n.default=h,e.exports=n.default},{"./clipboard-action":8,"good-listener":5,"tiny-emitter":7}]},{},[9])(9)})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],17:[function(require,module,exports){(function(global){var __browserify_shim_require__=require;(function browserifyShim(module,exports,require,define,browserify_shim__define__module__export__){var Handlebars=function(){var __module4__=function(){"use strict";var __exports__;function SafeString(string){this.string=string}SafeString.prototype.toString=function(){return""+this.string};__exports__=SafeString;return __exports__}();var __module3__=function(__dependency1__){"use strict";var __exports__={};var SafeString=__dependency1__;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]||"&amp;"}function extend(obj,value){for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){obj[key]=value[key]}}}__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return typeof value==="function"};if(isFunction(/x/)){isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};__exports__.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString){return string.toString()}else if(!string&&string!==0){return""}string=""+string;if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}__exports__.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}__exports__.isEmpty=isEmpty;return __exports__}(__module4__);var __module5__=function(){"use strict";var __exports__;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=" - "+line+":"+node.firstColumn}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(line){this.lineNumber=line;this.column=node.firstColumn}}Exception.prototype=new Error;__exports__=Exception;return __exports__}();var __module2__=function(__dependency1__,__dependency2__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var VERSION="1.3.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=4;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}__exports__.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Exception("Arg not supported with multiple helpers")}Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}},registerPartial:function(name,str){if(toString.call(name)===objectType){Utils.extend(this.partials,name)}else{this.partials[name]=str}}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Exception("Missing helper: '"+arg+"'")}});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;if(isFunction(context)){context=context.call(this)}if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(isArray(context)){if(context.length>0){return instance.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}});instance.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;if(isFunction(context)){context=context.call(this)}if(options.data){data=createFrame(options.data)}if(context&&typeof context==="object"){if(isArray(context)){for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=i===0;data.last=i===context.length-1}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=i===0}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context)){context=context.call(this)}if(!Utils.isEmpty(context))return options.fn(context)});instance.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,context)})}var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};__exports__.logger=logger;function log(level,obj){logger.log(level,obj)}__exports__.log=log;var createFrame=function(object){var obj={};Utils.extend(obj,object);return obj};__exports__.createFrame=createFrame;return __exports__}(__module3__,__module5__);var __module6__=function(__dependency1__,__dependency2__,__dependency3__){"use strict";var __exports__={};var Utils=__dependency1__;var Exception=__dependency2__;var COMPILER_REVISION=__dependency3__.COMPILER_REVISION;var REVISION_CHANGES=__dependency3__.REVISION_CHANGES;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}__exports__.checkRevision=checkRevision;function template(templateSpec,env){if(!env){throw new Exception("No environment passed to template")}var invokePartialWrapper=function(partial,name,context,helpers,partials,data){var result=env.VM.invokePartial.apply(this,arguments);if(result!=null){return result}if(env.compile){var options={helpers:helpers,partials:partials,data:data};partials[name]=env.compile(partial,{data:data!==undefined},env);return partials[name](context,options)}else{throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}};var container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=program(i,fn,data)}else if(!programWrapper){programWrapper=this.programs[i]=program(i,fn)}return programWrapper},merge:function(param,common){var ret=param||common;if(param&&common&&param!==common){ret={};Utils.extend(ret,common);Utils.extend(ret,param)}return ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var namespace=options.partial?options:env,helpers,partials;if(!options.partial){helpers=options.helpers;partials=options.partials}var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);if(!options.partial){env.VM.checkRevision(container.compilerInfo)}return result}}__exports__.template=template;function programWithDepth(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var prog=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args))};prog.program=i;prog.depth=args.length;return prog}__exports__.programWithDepth=programWithDepth;function program(i,fn,data){var prog=function(context,options){options=options||{};return fn(context,options.data||data)};prog.program=i;prog.depth=0;return prog}__exports__.program=program;function invokePartial(partial,name,context,helpers,partials,data){var options={partial:true,helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}__exports__.invokePartial=invokePartial;function noop(){return""}__exports__.noop=noop;return __exports__}(__module3__,__module5__,__module2__);var __module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var base=__dependency1__;var SafeString=__dependency2__;var Exception=__dependency3__;var Utils=__dependency4__;var runtime=__dependency5__;var create=function(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb};var Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__}(__module2__,__module4__,__module5__,__module3__,__module6__);var __module7__=function(__dependency1__){"use strict";var __exports__;var Exception=__dependency1__;function LocationInfo(locInfo){locInfo=locInfo||{};this.firstLine=locInfo.first_line;this.firstColumn=locInfo.first_column;this.lastColumn=locInfo.last_column;this.lastLine=locInfo.last_line}var AST={ProgramNode:function(statements,inverseStrip,inverse,locInfo){var inverseLocationInfo,firstInverseNode;if(arguments.length===3){locInfo=inverse;inverse=null}else if(arguments.length===2){locInfo=inverseStrip;inverseStrip=null}LocationInfo.call(this,locInfo);this.type="program";this.statements=statements;this.strip={};if(inverse){firstInverseNode=inverse[0];if(firstInverseNode){inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn};this.inverse=new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)}else{this.inverse=new AST.ProgramNode(inverse,inverseStrip)}this.strip.right=inverseStrip.left}else if(inverseStrip){this.strip.left=inverseStrip.right}},MustacheNode:function(rawParams,hash,open,strip,locInfo){LocationInfo.call(this,locInfo);this.type="mustache";this.strip=strip;if(open!=null&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped=escapeFlag!=="{"&&escapeFlag!=="&"}else{this.escaped=!!open}if(rawParams instanceof AST.SexprNode){this.sexpr=rawParams}else{this.sexpr=new AST.SexprNode(rawParams,hash)}this.sexpr.isRoot=true;this.id=this.sexpr.id;this.params=this.sexpr.params;this.hash=this.sexpr.hash;this.eligibleHelper=this.sexpr.eligibleHelper;this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo);this.type="sexpr";this.hash=hash;var id=this.id=rawParams[0];var params=this.params=rawParams.slice(1);var eligibleHelper=this.eligibleHelper=id.isSimple;this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,context,strip,locInfo){LocationInfo.call(this,locInfo);this.type="partial";this.partialName=partialName;this.context=context;this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){LocationInfo.call(this,locInfo);if(mustache.sexpr.id.original!==close.path.original){throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this)}this.type="block";this.mustache=mustache;this.program=program;this.inverse=inverse;this.strip={left:mustache.strip.left,right:close.strip.right};(program||inverse).strip.left=mustache.strip.right;(inverse||program).strip.right=close.strip.left;if(inverse&&!program){this.isInverse=true}},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="content";this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo);this.type="hash";this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo);this.type="ID";var original="",dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i].part;original+=(parts[i].separator||"")+part;if(part===".."||part==="."||part==="this"){if(dig.length>0){throw new Exception("Invalid path: "+original,this)}else if(part===".."){depth++}else{this.isScoped=true}}else{dig.push(part)}}this.original=original;this.parts=dig;this.string=dig.join(".");this.depth=depth;this.isSimple=parts.length===1&&!this.isScoped&&depth===0;this.stringModeValue=this.string},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo);this.type="PARTIAL_NAME";this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo);this.type="DATA";this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo);this.type="STRING";this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo);this.type="INTEGER";this.original=this.integer=integer;this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo);this.type="BOOLEAN";this.bool=bool;this.stringModeValue=bool==="true"},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo);this.type="comment";this.comment=comment}};__exports__=AST;return __exports__}(__module5__);var __module9__=function(){"use strict";var __exports__;var handlebars=function(){var parser={trace:function trace(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);break;case 2:return new yy.ProgramNode([],this._$);break;case 3:this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:this.$=new yy.ProgramNode([],this._$);break;case 8:this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]);this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);break;case 13:this.$=$$[$0];break;case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 21:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=true;this.$=$$[$0-1];break;case 32:this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$);break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]});this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function parseError(str,hash){throw new Error(str)},parse:function parse(input){var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;function popStack(n){stack.length=stack.length-2*n;vstack.length=vstack.length-n;lstack.length=lstack.length-n}function lex(){var token;token=self.lexer.lex()||1;if(typeof token!=="number"){token=self.symbols_[token]||token}return token}var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;while(true){state=stack[stack.length-1];if(this.defaultActions[state]){action=this.defaultActions[state]}else{if(symbol===null||typeof symbol=="undefined"){symbol=lex()}action=table[state]&&table[state][symbol]}if(typeof action==="undefined"||!action.length||!action[0]){var errStr="";if(!recovering){expected=[];for(p in table[state])if(this.terminals_[p]&&p>2){expected.push("'"+this.terminals_[p]+"'")}if(this.lexer.showPosition){errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'"}else{errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'")}this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1){throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol)}switch(action[0]){case 1:stack.push(symbol);vstack.push(this.lexer.yytext);lstack.push(this.lexer.yylloc);stack.push(action[1]);symbol=null;if(!preErrorSymbol){yyleng=this.lexer.yyleng;yytext=this.lexer.yytext;yylineno=this.lexer.yylineno;yyloc=this.lexer.yylloc;if(recovering>0)recovering--}else{symbol=preErrorSymbol;preErrorSymbol=null}break;case 2:len=this.productions_[action[1]][1];yyval.$=vstack[vstack.length-len];yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column};if(ranges){yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]}r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!=="undefined"){return r}if(len){stack=stack.slice(0,-1*len*2);vstack=vstack.slice(0,-1*len);lstack=lstack.slice(0,-1*len)}stack.push(this.productions_[action[1]][0]);vstack.push(yyval.$);lstack.push(yyval._$);newState=table[stack[stack.length-2]][stack[stack.length-1]];stack.push(newState);break;case 3:return true}}return true}};function stripFlags(open,close){return{left:open.charAt(2)==="~",right:close.charAt(0)==="~"||close.charAt(1)==="~"}}var lexer=function(){var lexer={EOF:1,parseError:function parseError(str,hash){if(this.yy.parser){this.yy.parser.parseError(str,hash)}else{throw new Error(str)}},setInput:function(input){this._input=input;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var ch=this._input[0];this.yytext+=ch;this.yyleng++;this.offset++;this.match+=ch;this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);if(lines){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges)this.yylloc.range[1]++;this._input=this._input.slice(1);return ch},unput:function(ch){var len=ch.length;var lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-len-1);this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(lines.length-1)this.yylineno-=lines.length-1;var r=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len};if(this.options.ranges){this.yylloc.range=[r[0],r[0]+this.yyleng-len]}return this},more:function(){this._more=true;return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;if(next.length<20){next+=this._input.substr(0,20-next.length)}return(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput();var c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done){return this.EOF}if(!this._input)this.done=true;var token,match,tempMatch,index,col,lines;if(!this._more){this.yytext="";this.match=""}var rules=this._currentRules();for(var i=0;i<rules.length;i++){tempMatch=this._input.match(this.rules[rules[i]]);if(tempMatch&&(!match||tempMatch[0].length>match[0].length)){match=tempMatch;index=i;if(!this.options.flex)break}}if(match){lines=match[0].match(/(?:\r\n?|\n).*/g);if(lines)this.yylineno+=lines.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length};this.yytext+=match[0];this.match+=match[0];this.matches=match;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(match[0].length);this.matched+=match[0];token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=false;if(token)return token;else return}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function lex(){var r=this.next();if(typeof r!=="undefined"){return r}else{return this.lex()}},begin:function begin(condition){this.conditionStack.push(condition)},popState:function popState(){return this.conditionStack.pop()},_currentRules:function _currentRules(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function begin(condition){this.begin(condition)}};lexer.options={};lexer.performAction=function anonymous(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:if(yy_.yytext.slice(-2)==="\\\\"){strip(0,1);this.begin("mu")}else if(yy_.yytext.slice(-1)==="\\"){strip(0,1);this.begin("emu")}else{this.begin("mu")}if(yy_.yytext)return 14;break;case 1:return 14;break;case 2:this.popState();return 14;break;case 3:strip(0,4);this.popState();return 15;break;case 4:return 35;break;case 5:return 36;break;case 6:return 25;break;case 7:return 16;break;case 8:return 20;break;case 9:return 19;break;case 10:return 19;break;case 11:return 23;break;case 12:return 22;break;case 13:this.popState();this.begin("com");break;case 14:strip(3,5);this.popState();return 15;break;case 15:return 22;break;case 16:return 41;break;case 17:return 40;break;case 18:return 40;break;case 19:return 44;break;case 20:break;case 21:this.popState();return 24;break;case 22:this.popState();
return 18;break;case 23:yy_.yytext=strip(1,2).replace(/\\"/g,'"');return 32;break;case 24:yy_.yytext=strip(1,2).replace(/\\'/g,"'");return 32;break;case 25:return 42;break;case 26:return 34;break;case 27:return 34;break;case 28:return 33;break;case 29:return 40;break;case 30:yy_.yytext=strip(1,2);return 40;break;case 31:return"INVALID";break;case 32:return 5;break}};lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];lexer.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,32],inclusive:true}};return lexer}();parser.lexer=lexer;function Parser(){this.yy={}}Parser.prototype=parser;parser.Parser=Parser;return new Parser}();__exports__=handlebars;return __exports__}();var __module8__=function(__dependency1__,__dependency2__){"use strict";var __exports__={};var parser=__dependency1__;var AST=__dependency2__;__exports__.parser=parser;function parse(input){if(input.constructor===AST.ProgramNode){return input}parser.yy=AST;return parser.parse(input)}__exports__.parse=parse;return __exports__}(__module9__,__module7__);var __module10__=function(__dependency1__){"use strict";var __exports__={};var Exception=__dependency1__;function Compiler(){}__exports__.Compiler=Compiler;Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,out=[],params,param;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode.opcode==="DECLARE"){out.push("DECLARE "+opcode.name+"="+opcode.value)}else{params=[];for(var j=0;j<opcode.args.length;j++){param=opcode.args[j];if(typeof param==="string"){param='"'+param.replace("\n","\\n")+'"'}params.push(param)}out.push(opcode.opcode+" "+params.join(" "))}}return out.join("\n")},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len){return false}for(var i=0;i<len;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length){return false}for(var j=0;j<opcode.args.length;j++){if(opcode.args[j]!==otherOpcode.args[j]){return false}}}len=this.children.length;if(other.children.length!==len){return false}for(i=0;i<len;i++){if(!this.children[i].equals(other.children[i])){return false}}return true},guid:0,compile:function(program,options){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(knownHelpers){for(var name in knownHelpers){this.options.knownHelpers[name]=knownHelpers[name]}}return this.accept(program)},accept:function(node){var strip=node.strip||{},ret;if(strip.left){this.opcode("strip")}ret=this[node.type](node);if(strip.right){this.opcode("strip")}return ret},program:function(program){var statements=program.statements;for(var i=0,l=statements.length;i<l;i++){this.accept(statements[i])}this.isSimple=l===1;this.depths.list=this.depths.list.sort(function(a,b){return a-b});return this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options);var guid=this.guid++,depth;this.usePartial=this.usePartial||result.usePartial;this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2){continue}else{this.addDepth(depth-1)}}return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;if(program){program=this.compileProgram(program)}if(inverse){inverse=this.compileProgram(inverse)}var sexpr=mustache.sexpr;var type=this.classifySexpr(sexpr);if(type==="helper"){this.helperSexpr(sexpr,program,inverse)}else if(type==="simple"){this.simpleSexpr(sexpr);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousSexpr(sexpr,program,inverse);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("pushHash");for(var i=0,l=pairs.length;i<l;i++){pair=pairs[i];val=pair[1];if(this.options.stringParams){if(val.depth){this.addDepth(val.depth)}this.opcode("getContext",val.depth||0);this.opcode("pushStringParam",val.stringModeValue,val.type);if(val.type==="sexpr"){this.sexpr(val)}}else{this.accept(val)}this.opcode("assignToHash",pair[0])}this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=true;if(partial.context){this.ID(partial.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",partialName.name);this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){this.sexpr(mustache.sexpr);if(mustache.escaped&&!this.options.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=program!=null||inverse!=null;this.opcode("getContext",id.depth);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;if(id.type==="DATA"){this.DATA(id)}else if(id.parts.length){this.ID(id)}else{this.addDepth(id.depth);this.opcode("getContext",id.depth);this.opcode("pushContext")}this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];if(this.options.knownHelpers[name]){this.opcode("invokeKnownHelper",params.length,name)}else if(this.options.knownHelpersOnly){throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr)}else{this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);if(type==="simple"){this.simpleSexpr(sexpr)}else if(type==="helper"){this.helperSexpr(sexpr)}else{this.ambiguousSexpr(sexpr)}},ID:function(id){this.addDepth(id.depth);this.opcode("getContext",id.depth);var name=id.parts[0];if(!name){this.opcode("pushContext")}else{this.opcode("lookupOnContext",id.parts[0])}for(var i=1,l=id.parts.length;i<l;i++){this.opcode("lookup",id.parts[i])}},DATA:function(data){this.options.data=true;if(data.id.isScoped||data.id.depth){throw new Exception("Scoped data references are not supported: "+data.original,data)}this.opcode("lookupData");var parts=data.id.parts;for(var i=0,l=parts.length;i<l;i++){this.opcode("lookup",parts[i])}},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})},addDepth:function(depth){if(depth===0){return}if(!this.depths[depth]){this.depths[depth]=true;this.depths.list.push(depth)}},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper;var isEligible=sexpr.eligibleHelper;var options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];if(options.knownHelpers[name]){isHelper=true}else if(options.knownHelpersOnly){isEligible=false}}if(isHelper){return"helper"}else if(isEligible){return"ambiguous"}else{return"simple"}},pushParams:function(params){var i=params.length,param;while(i--){param=params[i];if(this.options.stringParams){if(param.depth){this.addDepth(param.depth)}this.opcode("getContext",param.depth||0);this.opcode("pushStringParam",param.stringModeValue,param.type);if(param.type==="sexpr"){this.sexpr(param)}}else{this[param.type](param)}}},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;this.pushParams(params);this.opcode("pushProgram",program);this.opcode("pushProgram",inverse);if(sexpr.hash){this.hash(sexpr.hash)}else{this.opcode("emptyHash")}return params}};function precompile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode){throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}__exports__.precompile=precompile;function compile(input,options,env){if(input==null||typeof input!=="string"&&input.constructor!==env.AST.ProgramNode){throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input)}options=options||{};if(!("data"in options)){options.data=true}var compiled;function compileInput(){var ast=env.parse(input);var environment=(new env.Compiler).compile(ast,options);var templateSpec=(new env.JavaScriptCompiler).compile(environment,options,undefined,true);return env.template(templateSpec)}return function(context,options){if(!compiled){compiled=compileInput()}return compiled.call(this,context,options)}}__exports__.compile=compile;return __exports__}(__module5__);var __module11__=function(__dependency1__,__dependency2__){"use strict";var __exports__;var COMPILER_REVISION=__dependency1__.COMPILER_REVISION;var REVISION_CHANGES=__dependency1__.REVISION_CHANGES;var log=__dependency1__.log;var Exception=__dependency2__;function Literal(value){this.value=value}function JavaScriptCompiler(){}JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;if(parent.indexOf("depth")===0){wrap=true}if(/^[0-9]+$/.test(name)){ret=parent+"["+name+"]"}else if(JavaScriptCompiler.isValidJavaScriptVariableName(name)){ret=parent+"."+name}else{ret=parent+"['"+name+"']"}if(wrap){return"("+parent+" && "+ret+")"}else{return ret}},compilerInfo:function(){var revision=COMPILER_REVISION,versions=REVISION_CHANGES[revision];return"this.compilerInfo = ["+revision+",'"+versions+"'];\n"},appendToBuffer:function(string){if(this.environment.isSimple){return"return "+string+";"}else{return{appendToBuffer:true,content:string,toString:function(){return"buffer += "+string+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment;this.options=options||{};log("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!context;this.context=context||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.hashes=[];this.compileStack=[];this.inlineStack=[];this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(var l=opcodes.length;this.i<l;this.i++){opcode=opcodes[this.i];if(opcode.opcode==="DECLARE"){this[opcode.name]=opcode.value}else{this[opcode.opcode].apply(this,opcode.args)}if(opcode.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");if(this.stackSlot||this.inlineStack.length||this.compileStack.length){throw new Exception("Compile completed with content left on stack")}return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace;var copies="helpers = this.merge(helpers, "+namespace+".helpers);";if(this.environment.usePartial){copies=copies+" partials = this.merge(partials, "+namespace+".partials);"}if(this.options.data){copies=copies+" data = data || {};"}out.push(copies)}else{out.push("")}if(!this.environment.isSimple){out.push(", buffer = "+this.initializeBuffer())}else{out.push("")}this.lastContext=0;this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0){this.source[1]=this.source[1]+", "+locals.join(", ")}if(!this.isChild){for(var alias in this.context.aliases){if(this.context.aliases.hasOwnProperty(alias)){this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++){params.push("depth"+this.environment.depths.list[i])}var source=this.mergeSource();if(!this.isChild){source=this.compilerInfo()+source}if(asObject){params.push(source);return Function.apply(this,params)}else{var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";log("debug",functionSource+"\n\n");return functionSource}},mergeSource:function(){var source="",buffer;for(var i=0,len=this.source.length;i<len;i++){var line=this.source[i];if(line.appendToBuffer){if(buffer){buffer=buffer+"\n    + "+line.content}else{buffer=line.content}}else{if(buffer){source+="buffer += "+buffer+";\n  ";buffer=undefined}source+=line+"\n  "}}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);this.replaceStack(function(current){params.splice(1,0,current);return"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current);this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){if(this.pendingContent){content=this.pendingContent+content}if(this.stripNext){content=content.replace(/^\s+/,"")}this.pendingContent=content},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){if(this.lastContext!==depth){this.lastContext=depth}},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext);this.pushString(type);if(type!=="sexpr"){if(typeof string==="string"){this.pushString(string)}else{this.pushStackLiteral(string)}}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.push("{}");this.push("{}")}},pushHash:function(){if(this.hash){this.hashes.push(this.hash)}this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;this.hash=this.hashes.pop();if(this.options.stringParams){this.push("{"+hash.contexts.join(",")+"}");this.push("{"+hash.types.join(",")+"}")}this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){this.inlineStack.push(expr);return expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){if(guid!=null){this.pushStackLiteral(this.programExpression(guid))}else{this.pushStackLiteral(null)}},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing";this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,true);var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var lookup="helper = "+helper.name+" || "+nonHelper;if(helper.paramsInit){lookup+=","+helper.paramsInit}this.push("("+lookup+",helper "+"? helper.call("+helper.callParams+") "+": helperMissing.call("+helper.helperMissingParams+"))");if(!isRoot){this.flushInline()}},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"';this.useRegister("helper");this.emptyHash();var helper=this.setupHelper(0,name,helperCall);var helperName=this.lastHelper=this.nameLookup("helpers",name,"helper");var nonHelper=this.nameLookup("depth"+this.lastContext,name,"context");var nextStack=this.nextStack();if(helper.paramsInit){this.pushSource(helper.paramsInit)}this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }");this.pushSource("else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];if(this.options.data){params.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var value=this.popStack(),context,type;if(this.options.stringParams){type=this.popStack();context=this.popStack()}var hash=this.hash;if(context){hash.contexts.push("'"+key+"': "+context)}if(type){hash.types.push("'"+key+"': "+type)}hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i];compiler=new this.compiler;var index=this.matchExistingProgram(child);if(index==null){this.context.programs.push("");index=this.context.programs.length;child.index=index;child.name="program"+index;this.context.programs[index]=compiler.compile(child,options,this.context);this.context.environments[index]=child}else{child.index=index;child.name="program"+index}}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;i<len;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child)){return i}}},programExpression:function(guid){this.context.aliases.self="this";if(guid==null){return"self.noop"}var child=this.environment.children[guid],depths=child.depths.list,depth;var programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++){depth=depths[i];if(depth===1){programParams.push("depth0")}else{programParams.push("depth"+(depth-1))}}return(depths.length===0?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name);this.pushSource(name+" = "+val+";")},useRegister:function(name){if(!this.registers[name]){this.registers[name]=true;this.registers.list.push(name)}},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(source){this.source.push(source)}},pushStack:function(item){this.flushInline();var stack=this.incrStack();if(item){this.pushSource(stack+" = "+item+";")}this.compileStack.push(stack);return stack},replaceStack:function(callback){var prefix="",inline=this.isInline(),stack,createdStack,usedLiteral;if(inline){var top=this.popStack(true);if(top instanceof Literal){stack=top.value;usedLiteral=true}else{createdStack=!this.stackSlot;var name=!createdStack?this.topStackName():this.incrStack();prefix="("+this.push(name)+" = "+top+"),";stack=this.topStack()}}else{stack=this.topStack()}var item=callback.call(this,stack);if(inline){if(!usedLiteral){this.popStack()}if(createdStack){this.stackSlot--}this.push("("+prefix+item+")")}else{if(!/^stack/.test(stack)){stack=this.nextStack()}this.pushSource(stack+" = ("+prefix+item+");")}return stack},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;i<len;i++){var entry=inlineStack[i];if(entry instanceof Literal){this.compileStack.push(entry)}else{this.pushStack(entry)}}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal){return item.value}else{if(!inline){if(!this.stackSlot){throw new Exception("Invalid stack pop")}this.stackSlot--}return item}},topStack:function(wrapped){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];if(!wrapped&&item instanceof Literal){return item.value}else{return item}},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[],paramsInit=this.setupParams(paramSize,params,missingParams);var foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupOptions:function(paramSize,params){var options=[],contexts=[],types=[],param,inverse,program;options.push("hash:"+this.popStack());if(this.options.stringParams){options.push("hashTypes:"+this.popStack());options.push("hashContexts:"+this.popStack())}inverse=this.popStack();program=this.popStack();if(program||inverse){if(!program){this.context.aliases.self="this";program="self.noop"}if(!inverse){this.context.aliases.self="this";inverse="self.noop"}options.push("inverse:"+inverse);options.push("fn:"+program)}for(var i=0;i<paramSize;i++){param=this.popStack();params.push(param);if(this.options.stringParams){types.push(this.popStack());contexts.push(this.popStack())}}if(this.options.stringParams){options.push("contexts:["+contexts.join(",")+"]");options.push("types:["+types.join(",")+"]")}if(this.options.data){options.push("data:data")}return options},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";if(useRegister){this.useRegister("options");params.push("options");return"options="+options}else{params.push(options);return""}}};var reservedWords=("break else new var"+" case finally return void"+" catch for switch while"+" continue function this with"+" default if throw"+" delete in try"+" do instanceof typeof"+" abstract enum int short"+" boolean export interface static"+" byte extends long super"+" char final native synchronized"+" class float package throws"+" const goto private transient"+" debugger implements protected volatile"+" double import public let yield").split(" ");var compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++){compilerWords[reservedWords[i]]=true}JavaScriptCompiler.isValidJavaScriptVariableName=function(name){if(!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)){return true}return false};__exports__=JavaScriptCompiler;return __exports__}(__module2__,__module5__);var __module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){"use strict";var __exports__;var Handlebars=__dependency1__;var AST=__dependency2__;var Parser=__dependency3__.parser;var parse=__dependency3__.parse;var Compiler=__dependency4__.Compiler;var compile=__dependency4__.compile;var precompile=__dependency4__.precompile;var JavaScriptCompiler=__dependency5__;var _create=Handlebars.create;var create=function(){var hb=_create();hb.compile=function(input,options){return compile(input,options,hb)};hb.precompile=function(input,options){return precompile(input,options,hb)};hb.AST=AST;hb.Compiler=Compiler;hb.JavaScriptCompiler=JavaScriptCompiler;hb.Parser=Parser;hb.parse=parse;return hb};Handlebars=create();Handlebars.create=create;__exports__=Handlebars;return __exports__}(__module1__,__module7__,__module8__,__module10__,__module11__);return __module0__}();browserify_shim__define__module__export__(typeof Handlebars!="undefined"?Handlebars:window.Handlebars)}).call(global,undefined,undefined,undefined,undefined,function defineExport(ex){module.exports=ex})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],18:[function(require,module,exports){(function(window){var getClass={}.toString,isProperty,forEach,undef;var isLoader=typeof define==="function"&&define.amd,JSON3=typeof exports=="object"&&exports;if(JSON3||isLoader){if(typeof JSON=="object"&&JSON){if(JSON3){JSON3.stringify=JSON.stringify;JSON3.parse=JSON.parse}else{JSON3=JSON}}else if(isLoader){JSON3=window.JSON={}}}else{JSON3=window.JSON||(window.JSON={})}var isExtended=new Date(-0xc782b5b800cec);try{isExtended=isExtended.getUTCFullYear()==-109252&&isExtended.getUTCMonth()===0&&isExtended.getUTCDate()===1&&isExtended.getUTCHours()==10&&isExtended.getUTCMinutes()==37&&isExtended.getUTCSeconds()==6&&isExtended.getUTCMilliseconds()==708}catch(exception){}function has(name){if(name=="bug-string-char-index"){return"a"[0]!="a"}var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',isAll=name=="json";if(isAll||name=="json-stringify"||name=="json-parse"){if(name=="json-stringify"||isAll){var stringify=JSON3.stringify,stringifySupported=typeof stringify=="function"&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported=stringify(0)==="0"&&stringify(new Number)==="0"&&stringify(new String)=='""'&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&stringify(value)==="1"&&stringify([value])=="[1]"&&stringify([undef])=="[null]"&&stringify(null)=="null"&&stringify([undef,getClass,null])=="[null,null,null]"&&stringify({a:[value,true,false,null,"\0\b\n\f\r	"]})==serialized&&stringify(null,value)==="1"&&stringify([1,2],null,1)=="[\n 1,\n 2\n]"&&stringify(new Date(-864e13))=='"-271821-04-20T00:00:00.000Z"'&&stringify(new Date(864e13))=='"+275760-09-13T00:00:00.000Z"'&&stringify(new Date(-621987552e5))=='"-000001-01-01T00:00:00.000Z"'&&stringify(new Date(-1))=='"1969-12-31T23:59:59.999Z"'}catch(exception){stringifySupported=false}}if(!isAll){return stringifySupported}}if(name=="json-parse"||isAll){var parse=JSON3.parse;if(typeof parse=="function"){try{if(parse("0")===0&&!parse(false)){value=parse(serialized);var parseSupported=value["a"].length==5&&value["a"][0]===1;if(parseSupported){try{parseSupported=!parse('"	"')}catch(exception){}if(parseSupported){try{parseSupported=parse("01")!==1}catch(exception){}}}}}catch(exception){parseSupported=false}}if(!isAll){return parseSupported}}return stringifySupported&&parseSupported}}if(!has("json")){var functionClass="[object Function]";var dateClass="[object Date]";var numberClass="[object Number]";var stringClass="[object String]";var arrayClass="[object Array]";var booleanClass="[object Boolean]";var charIndexBuggy=has("bug-string-char-index");if(!isExtended){var floor=Math.floor;var Months=[0,31,59,90,120,151,181,212,243,273,304,334];var getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(month>1)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)}}if(!(isProperty={}.hasOwnProperty)){isProperty=function(property){var members={},constructor;if((members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass){isProperty=function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);this.__proto__=original;return result}}else{constructor=members.constructor;isProperty=function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}}members=null;return isProperty.call(this,property)}}var PrimitiveTypes={"boolean":1,number:1,string:1,undefined:1};var isHostType=function(object,property){var type=typeof object[property];return type=="object"?!!object[property]:!PrimitiveTypes[type]};forEach=function(object,callback){var size=0,Properties,members,property,forEach;(Properties=function(){this.valueOf=0}).prototype.valueOf=0;members=new Properties;for(property in members){if(isProperty.call(members,property)){size++}}Properties=members=null;if(!size){members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,length;var hasProperty=!isFunction&&typeof object.constructor!="function"&&isHostType(object,"hasOwnProperty")?object.hasOwnProperty:isProperty;for(property in object){if(!(isFunction&&property=="prototype")&&hasProperty.call(object,property)){callback(property)}}for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}}else if(size==2){forEach=function(object,callback){var members={},isFunction=getClass.call(object)==functionClass,property;for(property in object){if(!(isFunction&&property=="prototype")&&!isProperty.call(members,property)&&(members[property]=1)&&isProperty.call(object,property)){callback(property)}}}}else{forEach=function(object,callback){var isFunction=getClass.call(object)==functionClass,property,isConstructor;for(property in object){if(!(isFunction&&property=="prototype")&&isProperty.call(object,property)&&!(isConstructor=property==="constructor")){callback(property)}}if(isConstructor||isProperty.call(object,property="constructor")){callback(property)}}}return forEach(object,callback)};if(!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"};var leadingZeroes="000000";var toPaddedString=function(width,value){return(leadingZeroes+(value||0)).slice(-width)};var unicodePrefix="\\u00";var quote=function(value){var result='"',index=0,length=value.length,isLarge=length>10&&charIndexBuggy,symbols;if(isLarge){symbols=value.split("")}for(;index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+=unicodePrefix+toPaddedString(2,charCode.toString(16));break}result+=isLarge?symbols[index]:charIndexBuggy?value.charAt(index):value[index]}}return result+'"'};var serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value=object[property],className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,hasMembers,result;
try{value=object[property]}catch(exception){}if(typeof value=="object"&&value){className=getClass.call(value);if(className==dateClass&&!isProperty.call(value,"toJSON")){if(value>-1/0&&value<1/0){if(getDay){date=floor(value/864e5);for(year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month);time=(value%864e5+864e5)%864e5;hours=floor(time/36e5)%24;minutes=floor(time/6e4)%60;seconds=floor(time/1e3)%60;milliseconds=time%1e3}else{year=value.getUTCFullYear();month=value.getUTCMonth();date=value.getUTCDate();hours=value.getUTCHours();minutes=value.getUTCMinutes();seconds=value.getUTCSeconds();milliseconds=value.getUTCMilliseconds()}value=(year<=0||year>=1e4?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else{value=null}}else if(typeof value.toJSON=="function"&&(className!=numberClass&&className!=stringClass&&className!=arrayClass||isProperty.call(value,"toJSON"))){value=value.toJSON(property)}}if(callback){value=callback.call(object,property,value)}if(value===null){return"null"}className=getClass.call(value);if(className==booleanClass){return""+value}else if(className==numberClass){return value>-1/0&&value<1/0?""+value:"null"}else if(className==stringClass){return quote(""+value)}if(typeof value=="object"){for(length=stack.length;length--;){if(stack[length]===value){throw TypeError()}}stack.push(value);results=[];prefix=indentation;indentation+=whitespace;if(className==arrayClass){for(index=0,length=value.length;index<length;hasMembers||(hasMembers=true),index++){element=serialize(index,value,callback,properties,whitespace,indentation,stack);results.push(element===undef?"null":element)}result=hasMembers?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else{forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);if(element!==undef){results.push(quote(property)+":"+(whitespace?" ":"")+element)}hasMembers||(hasMembers=true)});result=hasMembers?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}"}stack.pop();return result}};JSON3.stringify=function(source,filter,width){var whitespace,callback,properties;if(typeof filter=="function"||typeof filter=="object"&&filter){if(getClass.call(filter)==functionClass){callback=filter}else if(getClass.call(filter)==arrayClass){properties={};for(var index=0,length=filter.length,value;index<length;value=filter[index++],(getClass.call(value)==stringClass||getClass.call(value)==numberClass)&&(properties[value]=1));}}if(width){if(getClass.call(width)==numberClass){if((width-=width%1)>0){for(whitespace="",width>10&&(width=10);whitespace.length<width;whitespace+=" ");}}else if(getClass.call(width)==stringClass){whitespace=width.length<=10?width:width.slice(0,10)}}return serialize("",(value={},value[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var fromCharCode=String.fromCharCode;var Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"};var Index,Source;var abort=function(){Index=Source=null;throw SyntaxError()};var lex=function(){var source=Source,length=source.length,value,begin,position,isSigned,charCode;while(Index<length){charCode=source.charCodeAt(Index);switch(charCode){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:value=charIndexBuggy?source.charAt(Index):source[Index];Index++;return value;case 34:for(value="@",Index++;Index<length;){charCode=source.charCodeAt(Index);if(charCode<32){abort()}else if(charCode==92){charCode=source.charCodeAt(++Index);switch(charCode){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode];Index++;break;case 117:begin=++Index;for(position=Index+4;Index<position;Index++){charCode=source.charCodeAt(Index);if(!(charCode>=48&&charCode<=57||charCode>=97&&charCode<=102||charCode>=65&&charCode<=70)){abort()}}value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}}else{if(charCode==34){break}charCode=source.charCodeAt(Index);begin=Index;while(charCode>=32&&charCode!=92&&charCode!=34){charCode=source.charCodeAt(++Index)}value+=source.slice(begin,Index)}}if(source.charCodeAt(Index)==34){Index++;return value}abort();default:begin=Index;if(charCode==45){isSigned=true;charCode=source.charCodeAt(++Index)}if(charCode>=48&&charCode<=57){if(charCode==48&&(charCode=source.charCodeAt(Index+1),charCode>=48&&charCode<=57)){abort()}isSigned=false;for(;Index<length&&(charCode=source.charCodeAt(Index),charCode>=48&&charCode<=57);Index++);if(source.charCodeAt(Index)==46){position=++Index;for(;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}charCode=source.charCodeAt(Index);if(charCode==101||charCode==69){charCode=source.charCodeAt(++Index);if(charCode==43||charCode==45){Index++}for(position=Index;position<length&&(charCode=source.charCodeAt(position),charCode>=48&&charCode<=57);position++);if(position==Index){abort()}Index=position}return+source.slice(begin,Index)}if(isSigned){abort()}if(source.slice(Index,Index+4)=="true"){Index+=4;return true}else if(source.slice(Index,Index+5)=="false"){Index+=5;return false}else if(source.slice(Index,Index+4)=="null"){Index+=4;return null}abort()}}return"$"};var get=function(value){var results,hasMembers;if(value=="$"){abort()}if(typeof value=="string"){if((charIndexBuggy?value.charAt(0):value[0])=="@"){return value.slice(1)}if(value=="["){results=[];for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="]"){break}if(hasMembers){if(value==","){value=lex();if(value=="]"){abort()}}else{abort()}}if(value==","){abort()}results.push(get(value))}return results}else if(value=="{"){results={};for(;;hasMembers||(hasMembers=true)){value=lex();if(value=="}"){break}if(hasMembers){if(value==","){value=lex();if(value=="}"){abort()}}else{abort()}}if(value==","||typeof value!="string"||(charIndexBuggy?value.charAt(0):value[0])!="@"||lex()!=":"){abort()}results[value.slice(1)]=get(lex())}return results}abort()}return value};var update=function(source,property,callback){var element=walk(source,property,callback);if(element===undef){delete source[property]}else{source[property]=element}};var walk=function(source,property,callback){var value=source[property],length;if(typeof value=="object"&&value){if(getClass.call(value)==arrayClass){for(length=value.length;length--;){update(value,length,callback)}}else{forEach(value,function(property){update(value,property,callback)})}}return callback.call(source,property,value)};JSON3.parse=function(source,callback){var result,value;Index=0;Source=""+source;result=get(lex());if(lex()!="$"){abort()}Index=Source=null;return callback&&getClass.call(callback)==functionClass?walk((value={},value[""]=result,value),"",callback):result}}}if(isLoader){define(function(){return JSON3})}})(this)},{}],19:[function(require,module,exports){(function($){var inviewObjects={},viewportSize,viewportOffset,d=document,w=window,documentElement=d.documentElement,expando=$.expando,timer;$.event.special.inview={add:function(data){inviewObjects[data.guid+"-"+this[expando]]={data:data,$element:$(this)};if(!timer&&!$.isEmptyObject(inviewObjects)){timer=setInterval(checkInView,250)}},remove:function(data){try{delete inviewObjects[data.guid+"-"+this[expando]]}catch(e){}if($.isEmptyObject(inviewObjects)){clearInterval(timer);timer=null}}};function getViewportSize(){var mode,domObject,size={height:w.innerHeight,width:w.innerWidth};if(!size.height){mode=d.compatMode;if(mode||!$.support.boxModel){domObject=mode==="CSS1Compat"?documentElement:d.body;size={height:domObject.clientHeight,width:domObject.clientWidth}}}return size}function getViewportOffset(){return{top:w.pageYOffset||documentElement.scrollTop||d.body.scrollTop,left:w.pageXOffset||documentElement.scrollLeft||d.body.scrollLeft}}function checkInView(){var $elements=$(),elementsLength,i=0;$.each(inviewObjects,function(i,inviewObject){var selector=inviewObject.data.selector,$element=inviewObject.$element;$elements=$elements.add(selector?$element.find(selector):$element)});elementsLength=$elements.length;if(elementsLength){viewportSize=viewportSize||getViewportSize();viewportOffset=viewportOffset||getViewportOffset();for(;i<elementsLength;i++){if(!$.contains(documentElement,$elements[i])){continue}var $element=$($elements[i]),elementSize={height:$element.height(),width:$element.width()},elementOffset=$element.offset(),inView=$element.data("inview"),visiblePartX,visiblePartY,visiblePartsMerged;if(!viewportOffset||!viewportSize){return}if(elementOffset.top+elementSize.height>viewportOffset.top&&elementOffset.top<viewportOffset.top+viewportSize.height&&elementOffset.left+elementSize.width>viewportOffset.left&&elementOffset.left<viewportOffset.left+viewportSize.width){visiblePartX=viewportOffset.left>elementOffset.left?"right":viewportOffset.left+viewportSize.width<elementOffset.left+elementSize.width?"left":"both";visiblePartY=viewportOffset.top>elementOffset.top?"bottom":viewportOffset.top+viewportSize.height<elementOffset.top+elementSize.height?"top":"both";visiblePartsMerged=visiblePartX+"-"+visiblePartY;if(!inView||inView!==visiblePartsMerged){$element.data("inview",visiblePartsMerged).trigger("inview",[true,visiblePartX,visiblePartY])}}else if(inView){$element.data("inview",false).trigger("inview",[false])}}}}$(w).bind("scroll resize",function(){viewportSize=viewportOffset=null});if(!documentElement.addEventListener&&documentElement.attachEvent){documentElement.attachEvent("onfocusin",function(){viewportOffset=null})}})(jQuery)},{}],20:[function(require,module,exports){module.exports={parse_data_type:function(result_type,article){if(result_type.toLowerCase()==="pamphlet"||result_type.toLowerCase()==="research_report"){return"DATABASE"}return(result_type.toLowerCase()==="journal"?"JOURNAL":"BOOK")+(article?"_ARTICLE":"")},parse_title_value:function(result_type,data_type,title_data){if(result_type.toLowerCase().trim()==="pamphlet"){return"PAMPHLETS"}else if(result_type.toLowerCase().trim()==="research_report"){return"RESEARCH_REPORTS"}data_type=data_type.toLowerCase().trim();if(data_type.indexOf("_article")!==-1){return title_data.itemtitle}return title_data.contenttitle},parse_doi_value:function(result_type,doi_value){var restricted_result_types=["book","pamphlet","research_report","chapter"];result_type=result_type.toLowerCase().trim();if(!doi_value||restricted_result_types.indexOf(result_type)>-1){return undefined}return doi_value},parse_yop_value:function(result_type,data_type,yop_value){var restricted_result_types=["book","chapter","pamphlet","research_report"];result_type=result_type.toLowerCase().trim();data_type=data_type.toLowerCase().trim();if(!yop_value||data_type!=="journal_article"||restricted_result_types.indexOf(result_type)>-1){return undefined}return yop_value},parse_printissn_value:function(result_type,print_issn_value){var restricted_result_types=["book","chapter"];result_type=result_type.toLowerCase().trim();if(!print_issn_value||restricted_result_types.indexOf(result_type)>-1){return undefined}return print_issn_value},parse_onlineissn_value:function(result_type,online_issn_value){var restricted_result_types=["book","chapter"];result_type=result_type.toLowerCase().trim();if(!online_issn_value||restricted_result_types.indexOf(result_type)>-1){return undefined}return online_issn_value},parse_isbn_value:function(result_type,isbn_value){var permitted_result_types=["book","chapter"];result_type=result_type.toLowerCase().trim();if(!isbn_value||permitted_result_types.indexOf(result_type)===-1){return undefined}return isbn_value},title_tracking_blob:function(options){var title_tracking_blob={customerId:0},key;for(key in options){if(options.hasOwnProperty(key)&&options[key]!==undefined){title_tracking_blob[key]=options[key]}}return title_tracking_blob},init:function(properties){var self=this;if(window.location.href.indexOf("doBasicSearch")!==-1||window.location.href.indexOf("doAdvancedSearch")!==-1){this.trackLoad(properties)}},trackLoad:function(customerIDs){if(customerIDs.length){var first_consortium=true;$.each(customerIDs,function(index,val){if(typeof val==="string"){window._$tarQ.push(["track",{customerId:val,title:"JSTOR"}])}else if(typeof val==="object"){if(!first_consortium&&val[1].indexOf("+")<0){val[1]="+"+val[1]}first_consortium=false;window._$tarQ.push(["track",{customerId:val[0],consortium:val[1],title:"JSTOR"}])}})}else{window._$tarQ.push(["track",{customerId:"UNAFFILIATED",title:"JSTOR"}])}},parse_consortium_name:function(tracking_object,consortium_name){if(!consortium_name.match(/[+]/)){if(tracking_object.consortium!==undefined||tracking_object.consortium&&tracking_object.consortium.match(/[+]/)){return"+"+consortium_name}}return consortium_name},parse_customer_info:function(tracking_object,customer_info){if(typeof customer_info!=="object"){tracking_object.customerId=customer_info}else{tracking_object.customerId=customer_info[0];tracking_object.consortium=this.parse_consortium_name(tracking_object,customer_info[1])}return tracking_object},parse_result_click_title:function(result_type){if(result_type.toLowerCase().trim()==="pamphlet"){return"PAMPHLETS"}else if(result_type.toLowerCase().trim()==="research_report"){return"RESEARCH_REPORTS"}return"JSTOR"}}},{}],21:[function(require,module,exports){(function(global){var Clipboard=require("shared/vendor/clipboard.min");typeof window!=="undefined"?window["jslogger"]:typeof global!=="undefined"?global["jslogger"]:null;require("foundation5/foundation.tooltip");module.exports={current_element:{area_label:""},activate:function(element){var clipboard=new Clipboard(element),self=this;Foundation.libs.tooltip.settings.tip_template=function(selector,content){return'<span id="'+selector+'" data-selector="'+selector+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'"><span class="content" data-content="'+content+'">'+content+'</span><span class="nub"></span></span>'};clipboard.on("success",function(event){var copied_id=$(event.trigger).data("selector");$("button.paste").removeClass("paste").addClass("copy");$(event.trigger).removeClass("copy").addClass("paste").attr("aria-label","Copied!");$("#"+copied_id+" .content").text("Copied!");jslogger.log_event("info","copy_to_clipboard.success",{javascript:"Copy to clipboard successful",event_data:{action:event.action+" of "+$(event.trigger).data("tracking").toLowerCase()+" successful",text:event.text}});self.track_usage($(event.trigger))});clipboard.on("error",function(event){var copied_id=$(event.trigger).data("selector");$("button.paste").removeClass("paste").addClass("copy");$("#"+copied_id+" .content").text("Press Ctrl+C to copy!");self.track_usage($(event.trigger));jslogger.log_event("error","copy_to_clipboard.unable_to_copy_to_clipboard",{javascript:"Unable to copy to clipboard, falling back to keyboard message",event_data:{action:event.action,trigger:$(event.trigger).data("tracking").toLowerCase()}})});Foundation.libs.tooltip.create($(element));$(element).hover(function(){var hovered_id=$(this).data("selector"),tip_text=$("#"+hovered_id+" .content").data("content");self.current_element.area_label=$(this).attr("aria-label");$("#"+hovered_id+" .content").text(tip_text);Foundation.libs.tooltip.show($(this))},function(){Foundation.libs.tooltip.hide($(this));$(this).attr("aria-label",self.current_element.area_label);self.current_element.area_label=""})},track_usage:function($triggered_element){if(typeof _satellite!=="undefined"&&$triggered_element.data("tracking")){_satellite.track($triggered_element.data("tracking").toLowerCase())}},deactivate:function(){$("span[id^='clipboard-tip']").remove()}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"foundation5/foundation.tooltip":13,"shared/vendor/clipboard.min":16}],22:[function(require,module,exports){"use strict";module.exports={$facetContainer:undefined,updateButton:"#update-search-results",selectAll:"dt a.facet-select-toggle",_hasDifferentSelections:function($previousSelections,$newSelections,$currentElement){if($previousSelections.length!==$newSelections.length){return true}if($currentElement.is($previousSelections)){return!$currentElement.is(":checked")}return $currentElement.is(":checked")},_textFieldIsEmpty:function(){return!this.$facetContainer.find("input:text").val()},_checkIfAllSelected:function($updatedCheckbox){var $allFacetOptions=$updatedCheckbox.closest("ul.facet-item-list"),totalCheckboxes=$allFacetOptions.find("input[type='checkbox']").length,selectedCheckboxes=$allFacetOptions.find("input[type='checkbox']:checked").length;return totalCheckboxes-selectedCheckboxes},checkboxListener:function(){var facetModule=this,$pageLoadSelections=this.$facetContainer.find("input[type='checkbox']:checked"),$currentlySelected,facetSelections;this.$facetContainer.find("input[type='checkbox']").on("change",function(){$currentlySelected=facetModule.$facetContainer.find("input[type='checkbox']:checked");facetSelections=facetModule._checkIfAllSelected($(this));if(facetModule._hasDifferentSelections($pageLoadSelections,$currentlySelected,$(this))){$(facetModule.updateButton).trigger("activate")}else{if(facetModule._textFieldIsEmpty()){$(facetModule.updateButton).trigger("deactivate")}}$(this).closest("dl").find(facetModule.selectAll).trigger("change_text",[facetSelections,$(this).is(":checked")])})},updateButtonListener:function(elementSelector){var facetModule=this;$(elementSelector).on("activate",function(){if(!facetModule.$facetContainer.find("#date-error").length){$(this).removeClass("secondary").prop("disabled",false)}});$(elementSelector).on("deactivate",function(){$(this).addClass("secondary").prop("disabled",true)})},_toggleFacetSelections:function($parentFacet,value){$parentFacet.find("input[type='checkbox']").prop("checked",value)},selectAllListener:function(){var facetModule=this;this.$facetContainer.find(this.selectAll).on("click",function(event){event.preventDefault();var $currentFacet=$(this).closest("dl").find("ul.facet-item-list");if($(this).text()==="Deselect All"){facetModule._toggleFacetSelections($currentFacet,false)}else{facetModule._toggleFacetSelections($currentFacet,true)}$(this).trigger("change_text",[0,true])});this.$facetContainer.find(this.selectAll).on("change_text",function(event,facetSelections,isCheckEvent){if(facetSelections===1&&!isCheckEvent||facetSelections===0){$(this).text(function(i,text){return text==="Deselect All"?"Select All":"Deselect All"})}})},toggleFacetColumnListener:function(){var facetModule=this;$("#toggle-facets").on("click",function(event){event.preventDefault();facetModule.$facetContainer.toggle();$(this).val(function(i,text){return text==="Show Search Filters"?"Hide Search Filters":"Show Search Filters"})})},_updateBrowserHistory:function(responseHTML,urlQuery){try{window.history.pushState({html:responseHTML,pageTitle:$("title").text()},"",window.location.pathname+urlQuery)}catch(error){jslogger.log_event("warning","ajax-results._updateBrowserHistory.unable_to_update_history",{error:error})}},_deactivateUi:function(){var $button=$("form.form-searchResults-searchControls").find("input[type=submit]");$(this.updateButton).trigger("deactivate");$("#loading-cover, #loading-image").fadeTo(300,.66);$("span[id^='tooltip']").remove();$button.addClass("secondary");$button.attr("disabled","disabled");$button.prop("value","Processing...")},_activateUi:function(wasError){wasError=wasError||false;var $button=$("form.form-searchResults-searchControls").find("input[type=submit]");$button.removeClass("secondary");$button.attr("disabled",false);$button.prop("value","Search");$("#loading-cover, #loading-image").fadeTo(300,0,function(){$(this).addClass("hide").removeAttr("style")});if(!wasError){this.applyListeners($("#facet-filters"));$(document).foundation()}else{$(this.updateButton).trigger("activate");this.$facetContainer.find("form").unbind("submit");$("#search-container").prepend('<div class="alert-box-error">Sorry, our fault. There was an issue with '+"your request. Please click the update button again to get your results</div>")}},_updateDomResults:function(responseHTML,urlQuery){var mainResults=$(responseHTML).find("#search-container > .row"),h1Contents=$(responseHTML).find("h1").html(),mainSearchBar=$(responseHTML).find("#content > .maincontent > .row").html();$("h1").text(h1Contents);$("#content > .maincontent > .row").html(mainSearchBar);$("#search-container").html(mainResults);this._updateBrowserHistory(responseHTML,urlQuery)},paginationClickListener:function(){var facetForm=this.$facetContainer.find("form"),pageInputField=facetForm.find("input[name=page]");$("#next-page").on("click",function(event){event.preventDefault();var nextPage=parseInt(pageInputField.val())+1;pageInputField.val(nextPage);facetForm.trigger("submit")});$("#prev-page").on("click",function(event){event.preventDefault();var prevPage=parseInt(pageInputField.val())-1;pageInputField.val(prevPage);facetForm.trigger("submit")})},searchFormSubmitListener:function(){var facetModule=this,startTimer,ajaxError=false;this.$facetContainer.find("form").on("submit",function(event){event.preventDefault();var urlQueryParameters="?"+$(this).serialize();$.ajax({url:urlQueryParameters,method:"GET",beforeSend:function(){facetModule._deactivateUi();startTimer=(new Date).getTime()},success:function(responseHTML){facetModule._updateDomResults(responseHTML,urlQueryParameters)},error:function(jqXHR,textStatus,errorThrown){ajaxError=true;var errorMessage="call failed ["+jqXHR.status+" / "+textStatus+" / "+errorThrown+"]";if(window.wasUnloaded){errorMessage="call failed, user left page before complete";errorThrown="user canceled"}jslogger.log_event("error","ajax-results.search-form-submit-listener."+String(errorThrown).toLowerCase(),{requested_url:urlQueryParameters,javascript:errorMessage})},complete:function(jqXHR,textStatus){facetModule._activateUi(ajaxError);var callTime=(new Date).getTime()-startTimer;$(window).trigger("call_complete",[{js_location:"ajax-results.search-form-submit-listener",requested_url:urlQueryParameters,response:textStatus,http_code:jqXHR.status,time:callTime}])}})})},_clearErrorMessage:function($fieldElement){$fieldElement.parent().removeClass("alert-box-error phn");$fieldElement.next().remove()},_validateDateField:function(fieldValue){var fullDate=new RegExp(/^\d{4}\/\d{1,2}\/\d{1,2}$/),yearMonth=new RegExp(/^\d{4}\/\d{1,2}$/),yearOnly=new RegExp(/^\d{4}$/);return fullDate.test(fieldValue)||yearMonth.test(fieldValue)||yearOnly.test(fieldValue)},textFieldListener:function(){var facetModule=this,$pubDate=$("#publication_date dd");this.$facetContainer.find("#startDate, #endDate").blur(function(){var fieldValue=$(this).val();if(fieldValue!==""){if(facetModule._validateDateField(fieldValue)){facetModule._clearErrorMessage($(this));$(facetModule.updateButton).trigger("activate")}else if($(this).next().attr("id")!=="date-error"){$(facetModule.updateButton).trigger("deactivate");$(this).parent().addClass("alert-box-error phn");$(this).after('<div id="date-error" data-alert class="errorMessage" role="alert" tabindex="-1">'+"Dates must be in yyyy or yyyy/mm or yyyy/mm/dd format"+"</div>")}}else{facetModule._clearErrorMessage($(this))}})},applyListeners:function($facetArea){this.$facetContainer=$facetArea||$("#facet-filters");this.updateButtonListener(this.updateButton);this.checkboxListener();this.selectAllListener();this.toggleFacetColumnListener();this.textFieldListener();if($("#search-container").data("ajaxSearch")){this.searchFormSubmitListener();this.paginationClickListener()}}}},{}],23:[function(require,module,exports){module.exports={submit_buttons:$("input[type=submit]").not(".no-indicator"),init:function(){var self=this;self.submit_buttons.removeAttr("disabled");window.onpageshow=function(event){if(event.persisted){self.submit_buttons.removeAttr("disabled");self.submit_buttons.removeClass("secondary");self.submit_buttons.val("Submit")}};self.submit_buttons.closest("form").on("submit",function(){var $button=$(this).find("input[type=submit]");$button.addClass("secondary");$button.attr("disabled","disabled");$button.prop("value","Processing...")});return true}}},{}],24:[function(require,module,exports){function getParameterByName(name,uri){var match=new RegExp("[?&]"+name+"=([^&]*)").exec(uri);return match&&decodeURIComponent(match[1].replace(/\+/g," "))}module.exports=getParameterByName},{}],25:[function(require,module,exports){module.exports={accordion:function(accrd){var $dt=$(accrd+" dt"),$dtchild=$(accrd+" dt > *");$dtchild.click(function(){$dt=$(this).closest("dt")});$dt.not(".open").addClass("closed").add(".open + dd").css("display","block");$dt.click(function(){var $clickedItem=$(this),$toggleThis=$clickedItem.next();if($clickedItem.hasClass("closed")){$clickedItem.removeClass("closed").addClass("open")}else{$clickedItem.removeClass("open").addClass("closed")}$toggleThis.toggle("fast")})},showhidex:function(theList,num){var numToShow=num?num:10,showTxt=String.fromCharCode(43)+" See more",hideTxt=String.fromCharCode(8211)+" See less";$(theList).each(function(){var $listItems=$(this).children();if($listItems.length>numToShow){$listItems.each(function(index){if(index>numToShow-1){$(this).addClass("hidden").css("display","none");if(index===numToShow){$(this).attr({"data-sr-focus":"first-element"})}}});$(this).append('<li><a href="#" class="show-list-items">'+showTxt+"</a></li>")}});$(".show-list-items").click(function(event){event.preventDefault();var $clickedListItem=$(event.target).closest("li"),$items=$clickedListItem.siblings();if($items.hasClass("hidden")){$items.slideDown("fast").removeClass("hidden");$(this).fadeTo(50,0).text(hideTxt).fadeTo("slow",1);$("li[data-sr-focus='first-element'] input[type='checkbox']").focus()}else{$items.slice(numToShow).slideUp("fast",function(){$items.slice(numToShow).addClass("hidden")});$(this).fadeTo(50,0).text(showTxt).fadeTo("slow",1)}})}}},{}],26:[function(require,module,exports){module.exports={settings:{id:"2b3a3b5e84e49af2bd00d3b006353a1f",additional_copy:"To chat with a GCSU librarian, please use the LibChat widget below.",qualifiers:["Georgia College & State University"]},qualifies:function(text){if(!text){return false}var i=0;for(i;i<this.settings.qualifiers.length;i++){if(!text.toLowerCase().match(new RegExp(this.settings.qualifiers[i].toLowerCase(),"g"))){return false}}return true},init:function($provider_statement){if($provider_statement&&$provider_statement.length&&this.qualifies($provider_statement.text())){$provider_statement.append("&nbsp;<br><br>"+this.settings.additional_copy).after('<div class="mvm" id="libchat_'+this.settings.id+'"></div>');$.getScript("//v2.libanswers.com/load_chat.php?hash="+this.settings.id);return true}return false}}},{}],27:[function(require,module,exports){module.exports={init:function(protocol){var scriptSrc="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=Accessible&delayStartupUntil=configured";if(arguments.length===1){scriptSrc=protocol+":"+scriptSrc}$.getScript(scriptSrc,function(){if(typeof MathJax!=="undefined"){var self=this,resized=0;MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],balanceBraces:true,preview:"none",ignoreClass:"content",processClass:"mthjx"},"HTML-CSS":{linebreaks:{automatic:true},extensions:["handle-floats.js"],scale:95},positionToHash:false});$("tex-math, latex").addClass("mthjx");MathJax.Hub.Configured();$(window).on("resize orientationChange",function(){clearTimeout(resized);resized=setTimeout(self.redraw,400)})}})},redraw:function(){MathJax.Hub.Rerender()},refresh:function(id_name){var $math_el=$(id_name).find("tex-math, latex"),items_count=$math_el.length;$math_el.each(function(index){$(this).addClass("mthjx");if(index===items_count-1){MathJax.Hub.Typeset()}})}}},{}],28:[function(require,module,exports){var google=require("shared/vendor/bookmark_bubble");module.exports={init:function(){if(window.location.protocol!=="https:"){var jstorMobileBookmark=new google.bookmarkbubble.Bubble;jstorMobileBookmark.NUMBER_OF_TIMES_TO_DISMISS=1;jstorMobileBookmark.mobileReturn=function(){if(window.localStorage){if(localStorage.getItem("fromMobile")==="true"){return true}}return false};jstorMobileBookmark.hasHashParameter=function(){var conditionEval=location.href.indexOf("#mobileBookmark")!==-1||location.href.indexOf("#globalNav")!==-1;if(conditionEval&&window.localStorage){localStorage.setItem("fromMobile","true")}return conditionEval};jstorMobileBookmark.setHashParameter=function(){if(!this.hasHashParameter()){location.href="#mobileBookmark"}};if(!jstorMobileBookmark.mobileReturn()){setTimeout(function(){jstorMobileBookmark.showIfAllowedWhenLoaded()},1500)}}}}},{"shared/vendor/bookmark_bubble":15}],29:[function(require,module,exports){(function(global){typeof window!=="undefined"?window["jslogger"]:typeof global!=="undefined"?global["jslogger"]:null;var focus_helper=require("shared/views/components/overlay-focus-helper"),get_url_param=require("shared/views/components/getParameterByName"),replace_url_param=require("shared/views/components/replace-url-param"),Handlebars=require("handlebars"),selectAll=require("shared/views/components/selectAll"),mathjax=require("shared/views/components/mathjax-loader"),urlParser=require("shared/views/components/url-parser"),my_list_utils={user_is_authed:function(){return DDO.userData.loginStatus==="true"},browser_support_storage:function(){return $("html").hasClass("sessionstorage")}},login_url="/action/showLogin?redirectUri=",register_url="/register/mylists?redirectUri=",getCookie=function(name){var cookieValue=null;if(document.cookie&&document.cookie!==""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=$.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue};module.exports={$overlay_target:$("#mylists"),$current_el:"",make_service_call:function(service_obj,callback){if(service_obj===undefined||!(service_obj instanceof Object)){throw new Error("Service Object not passed or isn't an object")}if(!service_obj.hasOwnProperty("url")){throw new Error("Service object doesn't have necessary parameters")}if(callback===undefined||typeof callback!=="function"){throw new Error("Service call needs to have a callback method")}var start_timer,default_service_obj={beforeSend:function(xhr){start_timer=(new Date).getTime();xhr.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))},complete:function(jqXHR,textStatus){var call_time=(new Date).getTime()-start_timer;$(window).trigger("call_complete",[{js_location:"my-lists-overlay.make_service_call",requested_url:service_obj.url,response:textStatus,http_code:jqXHR.status,time:call_time}])},success:function(response){callback(response)},error:function(jqXHR,textStatus,errorThrown){var errorMessage="call failed ["+jqXHR.status+" / "+textStatus+" / "+errorThrown+"]";if(window.wasUnloaded){errorMessage="call failed, user left page before complete";errorThrown="user canceled"}jslogger.log_event("error","my-lists-overlay.make_service_call."+String(errorThrown).toLowerCase(),{requested_url:service_obj.url,javascript:errorMessage});callback({status:"error",url_called:service_obj.url,error:{errorMessage:errorMessage,textStatus:textStatus,errorThrown:errorThrown}})},timeout:15e3,cache:false};if(!service_obj.hasOwnProperty("method")){service_obj.method="GET"}$.ajax($.extend(default_service_obj,service_obj))},get_redirect_uri:function(is_login){var current_uri=this.get_current_uri();
if(is_login){return login_url+current_uri}else{return register_url+current_uri}},update_query_in_url:function(url,item_id){if(item_id){var current_query=get_url_param("Query",url);if(current_query){url=replace_url_param(url,"Query",current_query+"+OR+id:"+item_id)}}return url},get_current_uri:function(){var item_doi=this.$current_el.data("doi"),item_id=this.$current_el.data("id"),url=window.location.pathname+window.location.search;url=this.update_query_in_url(url,item_id);return encodeURIComponent(urlParser.updateUrlParameter(url,"open_mylists",item_doi))},reset_overlay:function(){this.update_overlay_content({heading:"Loading",body:"<p>Processing your request...</p>"})},update_overlay_content:function(content_obj){if(!content_obj||!content_obj.hasOwnProperty("heading")||!content_obj.hasOwnProperty("body")){throw new Error("Can't update overlay, badly formed content sent")}this.$overlay_target.find("#mylists_title").html(content_obj.heading);this.$overlay_target.find("#mylists_body").html(content_obj.body)},show_login_display:function(){var login_url=this.get_redirect_uri(true),register_url=this.get_redirect_uri(),login_template=Handlebars.compile($("#tpl-my-lists-register").html(),{noEscape:true});this.update_overlay_content({heading:"My Lists",body:login_template({login_url:login_url,reg_url:register_url})})},fetch_mylist_display:function(){var self=this,content_id=encodeURIComponent(this.$current_el.data("id")),mylists_display_callback=function(response){self.process_mylist_response(response)},content_title=encodeURIComponent(this.$current_el.data("title")),url="/myjstor/mylists/modal/template?contentId="+content_id+"&contentTitle="+content_title;this.make_service_call({url:url},mylists_display_callback)},process_mylist_response:function(response){if(response.hasOwnProperty("error")){_satellite.track("failure")}else if(!(response.hasOwnProperty("body")||response.hasOwnProperty("heading"))){_satellite.track("failure")}else{this.update_overlay_content(response);if($(response.body).find("form")){selectAll.init(".mylists-single-option",".mylists-select-all");this.apply_form_listener()}else{}if($(response.body).find("tex-math, latex")){if(typeof mathjax!=="undefined"){mathjax.refresh("#mylists")}}this.send_SC_tracking(response.body)}},send_SC_tracking:function(body_html){if($(body_html).find("#mylists-selection-form").length){_satellite.track("All_Lists")}if($(body_html).find("#empty-state").length){_satellite.track("empty_state")}if($(body_html).find("#success").length){_satellite.track("success")}if($(body_html).find("#failure").length){_satellite.track("failure")}},apply_form_listener:function(){var self=this,callback=function(response){self.process_mylist_response(response)};this.$overlay_target.find("form").each(function(){$(this).on("submit",function(e){e.preventDefault();var service_obj={url:$(this).attr("action"),method:$(this).attr("method")};if(service_obj.method.toLowerCase()==="post"){service_obj=$.extend(service_obj,{data:$(this).serialize()})}self.reset_overlay();self.make_service_call(service_obj,callback)})})},build_initial_state:function(){if(my_list_utils.user_is_authed()){this.fetch_mylist_display()}else{this.show_login_display();_satellite.track("login_required")}},has_closed:function(param_value){if(param_value&&my_list_utils.browser_support_storage()){var closed_value=window.sessionStorage.getItem("ml_close");if(closed_value!==param_value){this.$overlay_target.on("closed.fndtn.reveal",function(){window.sessionStorage.setItem("ml_close",param_value)});return false}}return true},check_if_redirect:function(current_url){var param_value=get_url_param("open_mylists",current_url);if(param_value&&!this.has_closed(param_value)){$("a.mylists-add[data-doi='"+param_value+"']").trigger("click")}},init:function(){if(this.$overlay_target.length){var self=this;focus_helper.init("a.mylists-add","#mylists");$("a.mylists-add").on("click",function(){self.$current_el=$(this)});this.$overlay_target.on("opened.fndtn.reveal",function(){self.build_initial_state()});this.$overlay_target.on("closed.fndtn.reveal",function(){self.reset_overlay();self.$current_el=""});this.check_if_redirect(window.location.href)}}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{handlebars:17,"shared/views/components/getParameterByName":24,"shared/views/components/mathjax-loader":27,"shared/views/components/overlay-focus-helper":30,"shared/views/components/replace-url-param":31,"shared/views/components/selectAll":33,"shared/views/components/url-parser":35}],30:[function(require,module,exports){module.exports={click_element:"",overlay:"",$return_element:null,init:function(click_element,overlay){if(click_element===undefined||typeof click_element!=="string"){throw new Error("Request requires a click_element as a String")}if(overlay===undefined||typeof overlay!=="string"){throw new Error("Request requires a overlay as a String")}var self=this;self.click_element=click_element;self.overlay=overlay;$(document).on("click",this.click_element,function(){self.$return_element=$(this)});$(this.overlay).on("opened.fndtn.reveal",function(){$(this).focus()});$(this.overlay).on("closed.fndtn.reveal",function(){self.$return_element.focus()})}}},{}],31:[function(require,module,exports){var string_length=require("shared/views/components/string-length");module.exports=function(href,parameter_name,new_parameter_value){if(!href||!parameter_name){return}if(!new_parameter_value){new_parameter_value=""}if(!string_length(href,parameter_name)){return href+(string_length(href,"\\?")?"&":"?")+parameter_name+"="+new_parameter_value}var pattern=new RegExp("("+parameter_name+"=)[a-zA-Z0-9%+_ ]+");return href.replace(pattern,parameter_name+"="+new_parameter_value)}},{"shared/views/components/string-length":34}],32:[function(require,module,exports){var Handlebars=require("handlebars");module.exports={$selected_button:"",register_button_click:function(){var self=this;$(".read-online-button").on("click",function(){self.$selected_button=$(this)})},register_open_modal:function(rr_overlay){var self=this,rr_template=Handlebars.compile($("#tpl-rr-overlay").html(),{noEscape:true});rr_overlay.on("opened.fndtn.reveal",function(){var doi=self.$selected_button.data("doi");$("#rr-overlay_body").html(rr_template({data_doi:doi}))})},register_close_modal:function(rr_overlay){var self=this;rr_overlay.on("closed.fndtn.reveal",function(){self.$selected_button="";$("#rr-overlay_body").html("<p>Processing your request...</p>")})},init:function(){var rr_overlay=$("#rr-overlay");if(rr_overlay.length){this.register_button_click();this.register_open_modal(rr_overlay);this.register_close_modal(rr_overlay)}}}},{handlebars:17}],33:[function(require,module,exports){module.exports={init:function(checkBoxes,selectUnselectSelector){if(!checkBoxes){throw new Error("Select/Unselect All missing class parameter in constructor. Cannot initialize.")}if(!selectUnselectSelector){selectUnselectSelector=".selectAll"}else{var checkBoxClass=checkBoxes.length&&checkBoxes.substring(0,1)!=="."?"."+checkBoxes:checkBoxes;$(selectUnselectSelector).on("click",function(){var checkState=$(this).prop("checked");$(checkBoxClass).prop("checked",checkState);$(checkBoxClass).trigger("change");$(selectUnselectSelector).prop("checked",checkState)});$(document).on("change",checkBoxClass,function(){var check=$(checkBoxClass).filter(":checked").length===$(checkBoxClass).length;if(!check){$(selectUnselectSelector).prop("checked",check)}})}}}},{}],34:[function(require,module,exports){module.exports=function(string,match){"use strict";if(!string||string===""||!match||match===""){return 0}return(string.match(new RegExp(match,"g"))||[]).length}},{}],35:[function(require,module,exports){module.exports={updateUrlParameter:function(url,key,value){var currentQueryString,params,keyExists,pair,newUrl;key=encodeURIComponent(key);value=encodeURIComponent(value);newUrl=document.createElement("a");newUrl.href=url;currentQueryString=newUrl.search.substr(1);keyExists=false;if(currentQueryString){params=currentQueryString.split("&");params.forEach(function(param,index){pair=param.split("=");if(pair[0]===key){pair[1]=value;params[index]=pair.join("=");keyExists=true}})}else{params=[]}if(!keyExists){params=params.concat([key,value].join("="))}newUrl.search=params.join("&");return newUrl.pathname+newUrl.search+newUrl.hash}}},{}],36:[function(require,module,exports){(function(global){var copyToClipboard=require("shared/views/components/copy-to-clipboard"),Handlebars=require("handlebars");typeof window!=="undefined"?window["jslogger"]:typeof global!=="undefined"?global["jslogger"]:null;module.exports={ajax_calls:0,bulk_export_button:"a.button[data-dropdown='export-bulk-drop']",cite_this_class:".cite-this-item",citation_mla_class:".copy-citation-mla",citation_mla_endpoint:"/citation/mla/",citation_apa_class:".copy-citation-apa",citation_apa_endpoint:"/citation/apa/",citation_chicago_class:".copy-citation-chicago",citation_chicago_endpoint:"/citation/chicago/",export_citation_ris_anchor:".export-citation-ris a",export_citation_ris_endpoint:"/citation/ris/",export_citation_text_anchor:".export-citation-text a",export_citation_text_endpoint:"/citation/text/",export_citation_refworks_anchor:".export-citation-refworks a",export_citation_refworks_endpoint:"/citation/refworks/",ris_bulk_export:".ris_bulk_export",bibtex_bulk_export:".bibtex_bulk_export",refworks_bulk_export:".refworks_bulk_export",update_endpoints_for_local_development:function(){var host="http://firefly.jstor.org";this.citation_mla_endpoint=host+this.citation_mla_endpoint;this.citation_apa_endpoint=host+this.citation_apa_endpoint;this.citation_chicago_endpoint=host+this.citation_chicago_endpoint},get_mla:function(doi){this.ajax_calls++;this.get_citation(this.citation_mla_endpoint+doi,doi,"MLA","mla",this.citation_mla_class)},get_apa:function(doi){this.ajax_calls++;this.get_citation(this.citation_apa_endpoint+doi,doi,"APA","apa",this.citation_apa_class)},get_chicago:function(doi){this.ajax_calls++;this.get_citation(this.citation_chicago_endpoint+doi,doi,"CHICAGO","chicago",this.citation_chicago_class)},get_citation:function(endpoint,doi,label,class_name,class_to_update){var template=Handlebars.compile($("#tpl-citation_item").html(),{noEscape:true}),template_params={},self=this,start_timer;$.ajax({url:endpoint+"?callback=get_citation_json",cache:false,dataType:"jsonp",contentType:"application/json",beforeSend:function(){start_timer=(new Date).getTime()},success:function(response,status,xhr){response=JSON.parse(response);if(response.success==="true"){template_params={label:label,class_name:class_name,citation:response.citation};$(class_to_update).html(template(template_params));copyToClipboard.activate(class_to_update+" button")}else{jslogger.log_event("error","citation-tools.get_citation.service_error",{requested_url:endpoint,javascript:"Service didn't respond with a success while retrieving citation style "+label+" for "+doi+" | "+response.error_message});$(class_to_update).html("There was a problem retrieving "+label+" citation.")}},error:function(jqXHR,textStatus,errorThrown){var errorMessage="call failed retrieving citation style "+label+" for "+doi+" [ "+jqXHR.status+" / "+textStatus+" / "+errorThrown+" ]";if(window.wasUnloaded){errorMessage="call failed, user left page before complete";errorThrown="user canceled"}jslogger.log_event("error","citation-tools.get_citation."+String(errorThrown).toLowerCase(),{requested_url:endpoint,javascript:errorMessage});$(class_to_update).html("There was a problem retrieving "+label+" citation.")},complete:function(jqXHR,textStatus){var call_time=(new Date).getTime()-start_timer;self.ajax_calls--;if(self.is_ajax_complete()){$("#citation-tools").attr("aria-busy","false")}$(window).trigger("call_complete",[{js_location:"citation-tools.get_citation",requested_url:endpoint,response:textStatus,http_code:jqXHR.status,time:call_time}])},timeout:1e4})},post_bulk_citation_export:function(citation_type,form_id){var $checkboxform=$(form_id+" input:checkbox:checked");$(form_id+" .hide").remove();if(this.checkboxformlist){$checkboxform=$(this.checkboxformlist+" input:checkbox:checked").clone().attr("name","citations").addClass("hide");$checkboxform.appendTo(form_id)}if(!$checkboxform.length){return false}$(form_id).attr("action",this.original_action+"/"+citation_type);if(citation_type==="refworks"){$(form_id).attr("target","_blank")}$(form_id).submit();return false},update_bulk_links:function(number_of_selected_items){if(number_of_selected_items===0){$("#export-bulk-drop a").addClass("disabled");$("#export-bulk-drop a").attr("aria-disabled","true");$(this.bulk_export_button).removeClass("active")}else{$("#export-bulk-drop a").removeClass("disabled");$("#export-bulk-drop a").attr("aria-disabled","false");$(this.bulk_export_button).addClass("active")}},is_ajax_complete:function(){return this.ajax_calls===0},init:function(citationBulkExportForm,checkboxform){var self=this,is_debug=$("#env_info").data("debug");if(is_debug==="True"){this.update_endpoints_for_local_development()}$(this.cite_this_class).click(function(){var doi=$(this).data("doi");self.$return_element=$(this);self.get_mla(doi);self.get_apa(doi);self.get_chicago(doi);$(self.export_citation_ris_anchor).attr("href",self.export_citation_ris_endpoint+doi);$(self.export_citation_text_anchor).attr("href",self.export_citation_text_endpoint+doi);$(self.export_citation_refworks_anchor).attr("href",self.export_citation_refworks_endpoint+doi)});if($(citationBulkExportForm).length){this.update_bulk_links(0);$("input:checkbox.single_citation_option").on("change",function(){self.update_bulk_links($("input:checked.single_citation_option").length)})}this.original_action=$(citationBulkExportForm).attr("action");this.checkboxformlist=checkboxform||false;$(this.ris_bulk_export).click(function(){self.post_bulk_citation_export("ris",citationBulkExportForm);return false});$(this.bibtex_bulk_export).click(function(){self.post_bulk_citation_export("text",citationBulkExportForm);return false});$(this.refworks_bulk_export).click(function(){self.post_bulk_citation_export("refworks",citationBulkExportForm);return false});$("#citation-tools").on("opened.fndtn.reveal",function(){$(this).attr("tabindex",-1);$(this).attr({"aria-hidden":"false","aria-busy":"true"});$("div.reveal-modal-bg").attr("aria-hidden","true");$(this).focus()});$("#citation-tools").on("closed.fndtn.reveal",function(){$(this).find(self.citation_mla_class).html("Loading...");$(this).find(self.citation_apa_class).html("Loading...");$(this).find(self.citation_chicago_class).html("Loading...");$(this).attr({"aria-hidden":"true","aria-busy":"false"});$("div.reveal-modal-bg").attr("aria-hidden","false");copyToClipboard.deactivate();self.$return_element.focus()})}}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{handlebars:17,"shared/views/components/copy-to-clipboard":21}]},{},[9]);