$(document).ready(function(){function log(message){$("<div>").text(message).prependTo("#log");$("#log").scrollTop(0)}$("#banner-search-term").autocomplete({source:function(request,response){$.ajax({url:"/autocompleter",dataType:"jsonp",data:{featureClass:"P",style:"full",maxRows:12,query:request.term},success:function(data){if((data.status===200)&&(data.readyState=4)){values=JSON.parse(data.responseText);response($.map(values.suggestions,function(item){return{label:item,value:item}}))}},error:function(error){if((error.status===200)&&(error.readyState=4)){values=JSON.parse(error.responseText);response($.map(values.suggestions,function(item){return{label:item,value:item}}))}}})},minLength:2,select:function(event,ui){$("#banner-search-term").val(ui.item.value);$("#search-form").submit()},open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top");$(".ui-menu").width(300)},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})});