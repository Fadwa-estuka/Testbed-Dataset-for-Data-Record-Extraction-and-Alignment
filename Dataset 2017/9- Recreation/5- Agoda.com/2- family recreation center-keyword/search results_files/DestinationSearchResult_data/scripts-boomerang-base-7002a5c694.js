function BOOMR_check_doc_domain(e){var t;if(!e){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(n){BOOMR.isCrossOriginError(n)||BOOMR.addError(n,"BOOMR_check_doc_domain.domainFix")}e=document.domain}if(-1!==e.indexOf(".")){try{return void(t=window.parent.document)}catch(n){document.domain=e}try{return void(t=window.parent.document)}catch(n){e=e.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(e)}}BOOMR_start=(new Date).getTime(),BOOMR_check_doc_domain(),function(e){var t,n,r,i,o,a,s,d,c=e;e.parent!==e&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(e=e.parent,i=document.getElementById("boomr-if-as").src),r=e.document,e.BOOMR||(e.BOOMR={}),BOOMR=e.BOOMR,BOOMR.version||(BOOMR.version="0.9",BOOMR.window=e,BOOMR.boomerang_frame=c,BOOMR.plugins||(BOOMR.plugins={}),function(){try{void 0!==new e.CustomEvent("CustomEvent")&&(o=function(t,n){return new e.CustomEvent(t,n)})}catch(t){}try{!o&&r.createEvent&&r.createEvent("CustomEvent")&&(o=function(e,t){var n=r.createEvent("CustomEvent");return t=t||{cancelable:!1,bubbles:!1},n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n})}catch(t){}!o&&r.createEventObject&&(o=function(e,t){var n=r.createEventObject();return n.type=n.propertyName=e,n.detail=t.detail,n}),o||(o=function(){})}(),a=function(e,t,n){function i(){r.dispatchEvent?r.dispatchEvent(a):r.fireEvent&&r.fireEvent("onpropertychange",a)}var a=o(e,{detail:t});a&&(n?BOOMR.setImmediate(i):i())},"undefined"!=typeof document.hidden?(s="visibilityState",d="visibilitychange"):"undefined"!=typeof document.mozHidden?(s="mozVisibilityState",d="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(s="msVisibilityState",d="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(s="webkitVisibilityState",d="webkitvisibilitychange"),t={beacon_url:"",beacon_type:"AUTO",site_domain:e.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,strip_query_string:!1,onloadfired:!1,handlers_attached:!1,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",onbeacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},vars:{},errors:{},disabled_plugins:{},xb_handler:function(n){return function(r){var i;r||(r=e.event),r.target?i=r.target:r.srcElement&&(i=r.srcElement),3===i.nodeType&&(i=i.parentNode),i&&"OBJECT"===i.nodeName.toUpperCase()&&"application/x-shockwave-flash"===i.type||t.fireEvent(n,i)}},fireEvent:function(e,t){var n,r,i;if(e=e.toLowerCase(),this.events.hasOwnProperty(e))for(this.public_events.hasOwnProperty(e)&&a(this.public_events[e],t),i=this.events[e],n=0;n<i.length;n++)try{r=i[n],r.fn.call(r.scope,t,r.cb_data)}catch(o){BOOMR.addError(o,"fireEvent."+e+"<"+n+">")}}},n={t_lstart:null,t_start:BOOMR_start,t_end:null,t_onload:void 0,url:i,utils:{objectToString:function(e,t,n){var r,i=[];if(!e||"object"!=typeof e)return e;if(void 0===t&&(t="\n	"),n||(n=0),"[object Array]"===Object.prototype.toString.call(e)){for(r=0;r<e.length;r++)n>0&&null!==e[r]&&"object"==typeof e[r]?i.push(this.objectToString(e[r],t+("\n	"===t?"	":""),n-1)):"&"===t?i.push(encodeURIComponent(e[r])):i.push(e[r]);t=","}else for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n>0&&null!==e[r]&&"object"==typeof e[r]?i.push(encodeURIComponent(r)+"="+this.objectToString(e[r],t+("\n	"===t?"	":""),n-1)):"&"===t?i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r])):i.push(r+"="+e[r]));return i.join(t)},getCookie:function(e){if(!e)return null;e=" "+e+"=";var t,n;return n=" "+r.cookie+";",(t=n.indexOf(e))>=0?(t+=e.length,n=n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")):null},setCookie:function(e,n,i){var o,a,s,d,c;if(!e||!t.site_domain)return BOOMR.debug("No cookie name or site domain: "+e+"/"+t.site_domain),!1;if(o=this.objectToString(n,"&"),a=e+'="'+o+'"',d=[a,"path=/","domain="+t.site_domain],i&&(c=new Date,c.setTime(c.getTime()+1e3*i),c=c.toGMTString(),d.push("expires="+c)),a.length<500){if(r.cookie=d.join("; "),s=this.getCookie(e),o===s)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+o+"\n"+s)}else BOOMR.warn("Cookie too long: "+a.length+" "+a);return!1},getSubCookies:function(e){var t,n,r,i,o=!1,a={};if(!e)return null;if("string"!=typeof e)return BOOMR.debug("TypeError: cookie is not a string: "+typeof e),null;for(t=e.split("&"),n=0,r=t.length;r>n;n++)i=t[n].split("="),i[0]&&(i.push(""),a[decodeURIComponent(i[0])]=decodeURIComponent(i[1]),o=!0);return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},cleanupURL:function(e){return e&&"[object Array]"!==Object.prototype.toString.call(e)?t.strip_query_string?e.replace(/\?.*/,"?qs-redacted"):e:""},hashQueryString:function(e,t){return e?e.match?(e.match(/^\/\//)&&(e=location.protocol+e),e.match(/^(https?|file):/)?(t&&(e=e.replace(/#.*/,"")),BOOMR.utils.MD5?e.replace(/\?([^#]*)/,function(e,t){return"?"+(t.length>10?BOOMR.utils.MD5(t):t)}):e):(BOOMR.error("Passed in URL is invalid: "+e),"")):(BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e),""):e},pluginConfig:function(e,t,n,r){var i,o=0;if(!t||!t[n])return!1;for(i=0;i<r.length;i++)void 0!==t[n][r[i]]&&(e[r[i]]=t[n][r[i]],o++);return o>0},arrayFilter:function(e,t){var n=[];if("function"==typeof e.filter)n=e.filter(t);else for(var r,i=-1,o=e.length;++i<o;)r=e[i],t(r,i,e)&&(n[n.length]=r);return n},addObserver:function(e,t,n,r,i,o){function a(e){var t=!1;s.timer&&(clearTimeout(s.timer),s.timer=null),r&&(t=r.call(o,e,i),t||(r=null)),!t&&s.observer&&(s.observer.disconnect(),s.observer=null),"number"==typeof t&&t>0&&(s.timer=setTimeout(a,t))}var s={observer:null,timer:null};return window.MutationObserver&&r&&e?(s.observer=new MutationObserver(a),n&&(s.timer=setTimeout(a,s.timeout)),s.observer.observe(e,t),s):null},addListener:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeListener:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},pushVars:function(e,t,n){var r,i,o,a=0;for(r in t)if(t.hasOwnProperty(r))if("[object Array]"===Object.prototype.toString.call(t[r]))for(i=0;i<t[r].length;++i)a+=BOOMR.utils.pushVars(e,t[r][i],r+"["+i+"]");else o=document.createElement("input"),o.type="hidden",o.name=n?n+"["+r+"]":r,o.value=void 0===t[r]||null===t[r]?"":t[r],e.appendChild(o),a+=encodeURIComponent(o.name).length+encodeURIComponent(o.value).length+2;return a},sendData:function(e,n){function r(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}function i(){var t,n="boomerang_post-"+encodeURIComponent(e.action)+"-"+Math.random();try{t=document.createElement('<iframe name="'+n+'">')}catch(a){t=document.createElement("iframe")}e.action=o.shift(),t.name=t.id=n,t.style.display=e.style.display="none",t.src="javascript:false",r(t.id),r(e.id),document.body.appendChild(t);var s=t.contentWindow||t.contentDocument;s.document&&(s=s.document),s.body?s.body.appendChild(e):s.appendChild(e);try{e.submit()}catch(a){}o.length&&BOOMR.setImmediate(i),setTimeout(function(){r(t.id)},1e4)}var o=(document.createElement("input"),[t.beacon_url]);e.method=n,e.id="beacon_form",e.enctype="application/x-www-form-urlencoded",t.secondary_beacons&&t.secondary_beacons.length&&o.push.apply(o,t.secondary_beacons),i()}},init:function(n){var i,o,a=["beacon_url","beacon_type","site_domain","user_ip","strip_query_string","secondary_beacons","autorun"];if(BOOMR_check_doc_domain(),n||(n={}),n.primary&&t.handlers_attached)return this;void 0!==n.log&&(this.log=n.log),this.log||(this.log=function(){});for(o in this.plugins)if(this.plugins.hasOwnProperty(o)){if(n[o]&&n[o].hasOwnProperty("enabled")&&n[o].enabled===!1){t.disabled_plugins[o]=1,"function"==typeof this.plugins[o].disable&&this.plugins[o].disable();continue}if(t.disabled_plugins[o]){if(!n[o]||!n[o].hasOwnProperty("enabled")||n[o].enabled!==!0)continue;"function"==typeof this.plugins[o].enable&&this.plugins[o].enable(),delete t.disabled_plugins[o]}if("function"==typeof this.plugins[o].init)try{this.plugins[o].init(n)}catch(s){BOOMR.addError(s,o+".init")}}for(i=0;i<a.length;i++)void 0!==n[a[i]]&&(t[a[i]]=n[a[i]]);return t.handlers_attached?this:(t.onloadfired||void 0!==n.autorun&&n.autorun===!1||(r.readyState&&"complete"===r.readyState?(BOOMR.loadedLate=!0,this.setImmediate(BOOMR.page_ready_autorun,null,null,BOOMR)):e.onpagehide||null===e.onpagehide?BOOMR.utils.addListener(e,"pageshow",BOOMR.page_ready_autorun):BOOMR.utils.addListener(e,"load",BOOMR.page_ready_autorun)),BOOMR.utils.addListener(e,"DOMContentLoaded",function(){t.fireEvent("dom_loaded")}),function(){var n,i;for(void 0!==d&&(BOOMR.utils.addListener(r,d,function(){t.fireEvent("visibility_changed")}),BOOMR.subscribe("visibility_changed",function(){BOOMR.lastVisibilityEvent[BOOMR.visibilityState()]=BOOMR.now()})),BOOMR.utils.addListener(r,"mouseup",t.xb_handler("click")),n=r.getElementsByTagName("form"),i=0;i<n.length;i++)BOOMR.utils.addListener(n[i],"submit",t.xb_handler("form_submit"));e.onpagehide||null===e.onpagehide||BOOMR.utils.addListener(e,"unload",function(){BOOMR.window=e=null})}(),t.handlers_attached=!0,this)},page_ready_autorun:function(e){t.autorun&&BOOMR.page_ready(e)},page_ready:function(n){return n||(n=e.event),n||(n={name:"load"}),t.onloadfired?this:(t.fireEvent("page_ready",n),t.onloadfired=!0,this)},setImmediate:function(t,n,r,i){var o,a;"undefined"!=typeof Error&&(a=new Error,a=a.stack?a.stack.replace(/^Error/,"Called"):void 0),o=function(){t.call(i||null,n,r||{},a),o=null},e.setImmediate?e.setImmediate(o):e.msSetImmediate?e.msSetImmediate(o):e.webkitSetImmediate?e.webkitSetImmediate(o):e.mozSetImmediate?e.mozSetImmediate(o):setTimeout(o,10)},now:function(){try{if("performance"in window&&window.performance&&window.performance.now)return function(){return Math.round(window.performance.now()+window.performance.timing.navigationStart)}}catch(e){}return Date.now||function(){return(new Date).getTime()}}(),visibilityState:void 0===s?function(){return"visible"}:function(){return r[s]},lastVisibilityEvent:{},subscribe:function(n,r,i,o){var a,s,d;if(n=n.toLowerCase(),!t.events.hasOwnProperty(n))return this;for(d=t.events[n],a=0;a<d.length;a++)if(s=d[a],s&&s.fn===r&&s.cb_data===i&&s.scope===o)return this;return d.push({fn:r,cb_data:i||{},scope:o||null}),"page_ready"===n&&t.onloadfired&&this.setImmediate(r,null,i,o),("page_unload"===n||"before_unload"===n)&&!function(){var a,s=d.length;a=function(a){r&&r.call(o,a||e.event,i),"page_unload"===n&&s===t.events[n].length&&BOOMR.real_sendBeacon()},"page_unload"===n&&(e.onpagehide||null===e.onpagehide?BOOMR.utils.addListener(e,"pagehide",a):BOOMR.utils.addListener(e,"unload",a)),BOOMR.utils.addListener(e,"beforeunload",a)}(),this},addError:function(e,n,r){var i;"string"!=typeof e&&(i=String(e),i.match(/^\[object/)&&(i=e.name+": "+(e.description||e.message).replace(/\r\n$/,"")),e=i),void 0!==n&&(e="["+n+":"+BOOMR.now()+"] "+e),r&&(e+=":: "+r),t.errors[e]?t.errors[e]++:t.errors[e]=1},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)},addVar:function(e,n){if("string"==typeof e)t.vars[e]=n;else if("object"==typeof e){var r,i=e;for(r in i)i.hasOwnProperty(r)&&(t.vars[r]=i[r])}return this},removeVar:function(e){var n,r;if(!arguments.length)return this;for(r=1===arguments.length&&"[object Array]"===Object.prototype.toString.apply(e)?e:arguments,n=0;n<r.length;n++)t.vars.hasOwnProperty(r[n])&&delete t.vars[r[n]];return this},hasVar:function(e){return t.vars.hasOwnProperty(e)},requestStart:function(e){var t=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+e,t),{loaded:function(n){BOOMR.responseEnd(e,t,n)}}},responseEnd:function(e,n,r){"object"==typeof e&&e.url?t.fireEvent("xhr_load",e):(BOOMR.plugins.RT.startTimer("xhr_"+e,n),t.fireEvent("xhr_load",{name:"xhr_"+e,data:r}))},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(e){return e&&(t.beacon_url=e),t.beaconQueued||(t.beaconQueued=!0,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)),!0},real_sendBeacon:function(){var n,i,o,a,s,d=0,c=[],u=0;if(!t.beaconQueued)return!1;t.beaconQueued=!1,BOOMR.debug("Checking if we can send beacon");for(n in this.plugins)if(this.plugins.hasOwnProperty(n)){if(t.disabled_plugins[n])continue;if(!this.plugins[n].is_complete())return BOOMR.debug("Plugin "+n+" is not complete, deferring beacon send"),!1}var l="spa"===t.vars["http.initiator"],O=l?r.URL:r.URL.replace(/#.*/,"");t.vars.pgu=BOOMR.utils.cleanupURL(O),(!t.vars.u||l)&&(t.vars.u=t.vars.pgu),t.vars.pgu===t.vars.u&&delete t.vars.pgu,t.vars.v=BOOMR.version,BOOMR.visibilityState()&&(t.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible&&(t.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible),BOOMR.lastVisibilityEvent.hidden&&(t.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)),t.vars["ua.plt"]=navigator.platform,t.vars["ua.vnd"]=navigator.vendor,e!==window&&(t.vars["if"]="");for(n in t.errors)t.errors.hasOwnProperty(n)&&c.push(n+(t.errors[n]>1?" (*"+t.errors[n]+")":""));if(c.length>0&&(t.vars.errors=c.join("\n")),t.errors={},t.fireEvent("before_beacon",t.vars),BOOMR.debug("Ready to send beacon: "+BOOMR.utils.objectToString(t.vars)),!t.beacon_url)return BOOMR.debug("No beacon URL, so skipping."),!0;if(BOOMR.hasVar("restiming"))i=document.createElement("form"),d=BOOMR.utils.pushVars(i,t.vars);else{s=[];for(n in t.vars)t.vars.hasOwnProperty(n)&&(u++,s.push(encodeURIComponent(n)+"="+(void 0===t.vars[n]||null===t.vars[n]?"":encodeURIComponent(t.vars[n]))));o=t.beacon_url+(t.beacon_url.indexOf("?")>-1?"&":"?")+s.join("&")}if(t.fireEvent("onbeacon",t.vars),0===d&&0===u)return this;if(u){if(a=new Image,a.src=o,t.secondary_beacons)for(n=0;n<t.secondary_beacons.length;n++)o=t.secondary_beacons[n]+"?"+s.join("&"),a=new Image,a.src=o}else BOOMR.utils.sendData(i,"AUTO"===t.beacon_type?d>2e3?"POST":"GET":"POST");return!0}},delete BOOMR_start,"number"==typeof BOOMR_lstart?(n.t_lstart=BOOMR_lstart,delete BOOMR_lstart):"number"==typeof BOOMR.window.BOOMR_lstart&&(n.t_lstart=BOOMR.window.BOOMR_lstart),"number"==typeof BOOMR.window.BOOMR_onload&&(n.t_onload=BOOMR.window.BOOMR_onload),function(){var e;"object"==typeof console&&void 0!==console.log,e=function(e){return function(t,n){return this.log(t,e,"boomerang"+(n?"."+n:"")),this}},n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}(),function(){var e;for(e in n)n.hasOwnProperty(e)&&(BOOMR[e]=n[e]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}(),a("onBoomerangLoaded",{BOOMR:BOOMR},!0))}(window),function(){if(BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.NavigationTiming){var e={complete:!1,xhr_done:function(t){var n,r,i=BOOMR.window,o={};if(t){if(t.data&&(t=t.data),t.url&&i.performance&&i.performance.getEntriesByName&&(n=i.performance.getEntriesByName(t.url),n&&n.length>0)){n=n[0],o={nt_red_st:n.redirectStart,nt_red_end:n.redirectEnd,nt_fet_st:n.fetchStart,nt_dns_st:n.domainLookupStart,nt_dns_end:n.domainLookupEnd,nt_con_st:n.connectStart,nt_con_end:n.connectEnd,nt_req_st:n.requestStart,nt_res_st:n.responseStart,nt_res_end:n.responseEnd},n.secureConnectionStart&&(o.nt_ssl_st=n.secureConnectionStart);for(r in o)o.hasOwnProperty(r)&&o[r]&&(o[r]+=i.performance.timing.navigationStart)}t.timing&&(n=t.timing,o.nt_req_st||(o.nt_req_st=n.requestStart),o.nt_res_st||(o.nt_res_st=n.responseStart),o.nt_res_end||(o.nt_res_end=n.responseEnd),o.nt_domint=n.domInteractive,o.nt_domcomp=n.domComplete,o.nt_load_st=n.loadEventEnd,o.nt_load_end=n.loadEventEnd);for(r in o)o.hasOwnProperty(r)&&!o[r]&&delete o[r];BOOMR.addVar(o);try{e.addedVars.push.apply(e.addedVars,Object.keys(o))}catch(a){}this.complete=!0,BOOMR.sendBeacon()}},done:function(){var t,n,r,i,o=BOOMR.window;if(this.complete)return this;if(e.addedVars=[],t=o.performance||o.msPerformance||o.webkitPerformance||o.mozPerformance,t&&t.timing&&t.navigation){BOOMR.info("This user agent supports NavigationTiming.","nt"),n=t.navigation,r=t.timing,i={nt_red_cnt:n.redirectCount,nt_nav_type:n.type,nt_nav_st:r.navigationStart,nt_red_st:r.redirectStart,nt_red_end:r.redirectEnd,nt_fet_st:r.fetchStart,nt_dns_st:r.domainLookupStart,nt_dns_end:r.domainLookupEnd,nt_con_st:r.connectStart,nt_con_end:r.connectEnd,nt_req_st:r.requestStart,nt_res_st:r.responseStart,nt_res_end:r.responseEnd,nt_domloading:r.domLoading,nt_domint:r.domInteractive,nt_domcontloaded_st:r.domContentLoadedEventStart,nt_domcontloaded_end:r.domContentLoadedEventEnd,nt_domcomp:r.domComplete,nt_load_st:r.loadEventStart,nt_load_end:r.loadEventEnd,nt_unload_st:r.unloadEventStart,nt_unload_end:r.unloadEventEnd},r.secureConnectionStart&&(i.nt_ssl_st=r.secureConnectionStart),r.msFirstPaint&&(i.nt_first_paint=r.msFirstPaint),BOOMR.addVar(i);try{e.addedVars.push.apply(e.addedVars,Object.keys(i))}catch(a){}}if(o.chrome&&o.chrome.loadTimes&&(r=o.chrome.loadTimes())){i={nt_spdy:r.wasFetchedViaSpdy?1:0,nt_cinf:r.connectionInfo,nt_first_paint:r.firstPaintTime},BOOMR.addVar(i);try{e.addedVars.push.apply(e.addedVars,Object.keys(i))}catch(a){}}this.complete=!0,BOOMR.sendBeacon()},clear:function(){e.addedVars&&e.addedVars.length>0&&(BOOMR.removeVar(e.addedVars),e.addedVars=[]),this.complete=!1}};BOOMR.plugins.NavigationTiming={init:function(){return e.initialized||(BOOMR.subscribe("page_ready",e.done,null,e),BOOMR.subscribe("xhr_load",e.xhr_done,null,e),BOOMR.subscribe("before_unload",e.done,null,e),BOOMR.subscribe("onbeacon",e.clear,null,e),e.initialized=!0),this},is_complete:function(){return!0}}}}(),function(){function e(e){var t,n,r,i,o,a,d,c,l={};for(t in e){for(n=t,r=0;r<s.xssBreakWords.length;r++)n=n.replace(s.xssBreakWords[r],"$1"+u+"$2");if(e.hasOwnProperty(t))for(i=e[t],o=n.split(""),d=l,r=0;r<o.length;r++)a=o[r],c=d[a],"undefined"==typeof c?d=d[a]=r===o.length-1?i:{}:"string"==typeof c?d=d[a]={"|":c}:r===o.length-1?d[a]["|"]=i:d=d[a]}return l}function t(e,n){var r,i,o,a=0,s=[];for(r in e)e.hasOwnProperty(r)&&s.push(r);for(var d=0;d<s.length;d++)r=s[d],"object"==typeof e[r]&&(i=t(e[r],!1),i&&(delete e[r],r===u?(r=i.name,a++):r+=i.name,e[r]=i.value)),a++;return 1===a?n?(o={},o[r]=e[r],o):{name:r,value:e[r]}:n?e:!1}function n(e,t){"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0);var n=Math.round(e?e:0),r=Math.round(t?t:0);return 0===n?0:n-r}function r(e){var t=0;try{"performance"in e&&e.performance&&e.performance.timing&&e.performance.timing.navigationStart&&(t=e.performance.timing.navigationStart)}catch(n){}return t}function i(e,t,n,o){var a,s,d,c,u,l,O,m=[];if("undefined"==typeof t&&(t=!0),"undefined"==typeof n&&(n=0),"undefined"==typeof o&&(o=0),o>10)return m;if(d=r(e),e.frames)for(a=0;a<e.frames.length;a++)c=r(e.frames[a]),u=0,c>d&&(u=n+(c-d)),m=m.concat(i(e.frames[a],!1,u,o+1));try{if(!("performance"in e&&e.performance&&"function"==typeof e.performance.getEntriesByType))return m;t&&(s=e.performance.getEntriesByType("navigation"),s&&1===s.length?(l=s[0],m.push({name:e.location.href,startTime:0,redirectStart:l.redirectStart,redirectEnd:l.redirectEnd,fetchStart:l.fetchStart,domainLookupStart:l.domainLookupStart,domainLookupEnd:l.domainLookupEnd,connectStart:l.connectStart,secureConnectionStart:l.secureConnectionStart,connectEnd:l.connectEnd,requestStart:l.requestStart,responseStart:l.responseStart,responseEnd:l.responseEnd})):e.performance.timing&&(O=e.performance.timing,m.push({name:e.location.href,startTime:0,redirectStart:O.redirectStart?O.redirectStart-O.navigationStart:0,redirectEnd:O.redirectEnd?O.redirectEnd-O.navigationStart:0,fetchStart:O.fetchStart?O.fetchStart-O.navigationStart:0,domainLookupStart:O.domainLookupStart?O.domainLookupStart-O.navigationStart:0,domainLookupEnd:O.domainLookupEnd?O.domainLookupEnd-O.navigationStart:0,connectStart:O.connectStart?O.connectStart-O.navigationStart:0,secureConnectionStart:O.secureConnectionStart?O.secureConnectionStart-O.navigationStart:0,connectEnd:O.connectEnd?O.connectEnd-O.navigationStart:0,requestStart:O.requestStart?O.requestStart-O.navigationStart:0,responseStart:O.responseStart?O.responseStart-O.navigationStart:0,responseEnd:O.responseEnd?O.responseEnd-O.navigationStart:0})));var p=e.performance.getEntriesByType("resource"),f=[];for(a=0;p&&a<p.length;a++)O=p[a],f.push({name:O.name,initiatorType:O.initiatorType,startTime:O.startTime+n,redirectStart:O.redirectStart?O.redirectStart+n:0,redirectEnd:O.redirectEnd?O.redirectEnd+n:0,fetchStart:O.fetchStart?O.fetchStart+n:0,domainLookupStart:O.domainLookupStart?O.domainLookupStart+n:0,domainLookupEnd:O.domainLookupEnd?O.domainLookupEnd+n:0,connectStart:O.connectStart?O.connectStart+n:0,secureConnectionStart:O.secureConnectionStart?O.secureConnectionStart+n:0,connectEnd:O.connectEnd?O.connectEnd+n:0,requestStart:O.requestStart?O.requestStart+n:0,responseStart:O.responseStart?O.responseStart+n:0,responseEnd:O.responseEnd?O.responseEnd+n:0});m=m.concat(f)}catch(h){return m}return m}function o(e){return"number"==typeof e&&0!==e?e.toString(36):""}function a(a){var s,c,u,l,O,m=i(BOOMR.window,!0,0,0),p={},f=r(BOOMR.window);if(!m||!m.length)return{};for(s=0;s<m.length;s++)c=m[s],0!==c.name.indexOf("about:")&&0!==c.name.indexOf("javascript:")&&(c.name.indexOf(BOOMR.url)>-1||c.name.indexOf(BOOMR.config_url)>-1||a&&f+c.startTime<a||(u=d[c.initiatorType],"undefined"==typeof u&&(u=0),O=u+[n(c.startTime,0),n(c.responseEnd,c.startTime),n(c.responseStart,c.startTime),n(c.requestStart,c.startTime),n(c.connectEnd,c.startTime),n(c.secureConnectionStart,c.startTime),n(c.connectStart,c.startTime),n(c.domainLookupEnd,c.startTime),n(c.domainLookupStart,c.startTime),n(c.redirectEnd,c.startTime),n(c.redirectStart,c.startTime)].map(o).join(",").replace(/,+$/,""),l=BOOMR.utils.cleanupURL(c.name),void 0!==p[l]?p[l]+="|"+O:p[l]=O));return t(e(p),!0)}var s;if(BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},!BOOMR.plugins.ResourceTiming){var d={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5},c=[/(h)(ref)/gi,/(s)(rc)/gi,/(a)(ction)/gi],u="\n";s={complete:!1,initialized:!1,supported:!1,xhr_load:function(){this.complete||(this.complete=!0,BOOMR.sendBeacon())},xssBreakWords:c,done:function(){var e;this.complete||(BOOMR.removeVar("restiming"),e=a(),e&&(BOOMR.info("Client supports Resource Timing API","restiming"),BOOMR.addVar({restiming:JSON.stringify(e)})),this.complete=!0,BOOMR.sendBeacon())},clearMetrics:function(e){e.hasOwnProperty("restiming")&&BOOMR.removeVar("restiming")}},BOOMR.plugins.ResourceTiming={init:function(e){var t=BOOMR.window.performance;return BOOMR.utils.pluginConfig(s,e,"ResourceTiming",["xssBreakWords"]),s.initialized?this:(t&&"function"==typeof t.getEntriesByType?(BOOMR.subscribe("page_ready",s.done,null,s),BOOMR.subscribe("xhr_load",s.xhr_load,null,s),BOOMR.subscribe("onbeacon",s.clearMetrics,null,s),BOOMR.subscribe("before_unload",s.done,null,s),s.supported=!0):s.complete=!0,s.initialized=!0,this)},is_complete:function(){return!0},is_supported:function(){return s.initialized&&s.supported},trimTiming:n,convertToTrie:e,optimizeTrie:t,findPerformanceEntriesForFrame:i,getResourceTiming:a,toBase36:o}}}(),function(e){var t,n=e.document;BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.RT||(t={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,t_start:void 0,cached_t_start:void 0,t_fb_approx:void 0,r:void 0,r2:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},addedVars:[],updateCookie:function(e,t){var n,r,i,o;if(!this.cookie)return!1;if(i=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{},"object"==typeof e)for(o in e)e.hasOwnProperty(o)&&(void 0===e[o]?i.hasOwnProperty(o)&&delete i[o]:(("nu"===o||"r"===o)&&(e[o]=BOOMR.utils.hashQueryString(e[o],!0)),i[o]=e[o]));return r=BOOMR.now(),t&&(i[t]=r),BOOMR.debug("Setting cookie (timer="+t+")\n"+BOOMR.utils.objectToString(i),"rt"),BOOMR.utils.setCookie(this.cookie,i,this.cookie_exp)?(n=BOOMR.now(),n-r>50&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+r+" -> "+n,"rt")),!0):(BOOMR.error("cannot set start cookie","rt"),!1)},initFromCookie:function(){var e,t;t=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)),t&&(t.s=Math.max(+t.ld||0,Math.max(+t.ul||0,+t.cl||0)),BOOMR.debug("Read from cookie "+BOOMR.utils.objectToString(t),"rt"),t.s&&(t.r||t.nu)&&(this.r=t.r,e=BOOMR.utils.hashQueryString(n.URL,!0),BOOMR.debug(this.r+" =?= "+this.r2,"rt"),BOOMR.debug(t.s+" <? "+(+t.cl+15),"rt"),BOOMR.debug(t.nu+" =?= "+e,"rt"),!this.strict_referrer||t.nu&&t.nu===e&&t.s<+t.cl+15||t.s===+t.ul&&this.r===this.r2?(this.t_start=t.s,+t.hd>t.s&&(this.t_fb_approx=parseInt(t.hd,10))):this.t_start=this.t_fb_approx=void 0),this.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0}))},getBoomerangTimings:function(){function e(e,t){var n=Math.round(e?e:0),r=Math.round(t?t:0);return n=0===n?0:n-r,n?n:""}var n,r,i,o,a;BOOMR.t_start&&(BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start),BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end),BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start),BOOMR.t_lstart&&(BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart),BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)));try{if(window.performance&&window.performance.getEntriesByName){r={"rt.bmr":BOOMR.url};for(i in r)if(r.hasOwnProperty(i)&&r[i]){if(n=window.performance.getEntriesByName(r[i]),!n||0===n.length)continue;n=n[0],o=e(n.startTime,0),a=[o,e(n.responseEnd,o),e(n.responseStart,o),e(n.requestStart,o),e(n.connectEnd,o),e(n.secureConnectionStart,o),e(n.connectStart,o),e(n.domainLookupEnd,o),e(n.domainLookupStart,o),e(n.redirectEnd,o),e(n.redirectStart,o)].join(",").replace(/,+$/,""),BOOMR.addVar(i,a),t.addedVars.push(i)}}}catch(s){BOOMR.addError(s,"rt.getBoomerangTimings")}},checkPreRender:function(){return"prerender"!==BOOMR.visibilityState()?!1:(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),!0)},initFromNavTiming:function(){var t,n,r;this.navigationStart||(n=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance,n&&n.navigation&&(this.navigationType=n.navigation.type),n&&n.timing?t=n.timing:e.chrome&&e.chrome.csi&&e.chrome.csi().startE?(t={navigationStart:e.chrome.csi().startE},r="csi"):e.gtbExternal&&e.gtbExternal.startE()&&(t={navigationStart:e.gtbExternal.startE()},r="gtb"),t?(BOOMR.addVar("rt.start",r||"navigation"),this.navigationStart=t.navigationStart||t.fetchStart||void 0,this.responseStart=t.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=t.unloadEventStart||t.fetchStart||void 0)):BOOMR.warn("This browser doesn't support the WebTiming API","rt"))},validateLoadTimestamp:function(t,n,r){if(n&&n.timing&&n.timing.loadEventEnd)return n.timing.loadEventEnd;if(!("xhr"!==r||n&&"spa"===n.initiator))return t;if(BOOMR.loadedLate){if(!e.performance||!e.performance.timing)return BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||t;if(e.performance.timing.loadEventStart&&e.performance.timing.loadEventStart<BOOMR.t_end)return e.performance.timing.loadEventStart}return t},setPageLoadTimers:function(e,n,r){var i;return"xhr"!==e&&(t.initFromCookie(),t.initFromNavTiming(),t.checkPreRender())?!1:("xhr"===e?r&&r.timing&&(i=r.timing.responseStart):t.responseStart?i=t.responseStart:t.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):t.t_fb_approx&&(i=t.t_fb_approx),i&&(BOOMR.plugins.RT.endTimer("t_resp",i),t.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",t.timers.t_load.end-i):BOOMR.plugins.RT.setTimer("t_page",n-i)),t.timers.hasOwnProperty("t_postrender")&&(BOOMR.plugins.RT.endTimer("t_postrender"),BOOMR.plugins.RT.endTimer("t_prerender")),!0)},setSupportingTimestamps:function(e){e&&BOOMR.addVar("rt.tstart",e),"number"==typeof t.t_start&&t.t_start!==e&&BOOMR.addVar("rt.cstart",t.t_start),BOOMR.addVar("rt.bstart",BOOMR.t_start),BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart),BOOMR.addVar("rt.end",t.timers.t_done.end)},determineTStart:function(e,n){var r;return"xhr"===e?(n&&n.name&&t.timers[n.name]?r=t.timers[n.name].start:n&&n.timing&&n.timing.requestStart&&(r=n.timing.requestStart),"undefined"==typeof r&&n&&"spa"===n.initiator?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual")):t.navigationStart?r=t.navigationStart:t.t_start&&2!==t.navigationType?(r=t.t_start,BOOMR.addVar("rt.start","cookie")):t.cached_t_start?r=t.cached_t_start:(BOOMR.addVar("rt.start","none"),r=void 0),BOOMR.debug("Got start time: "+r,"rt"),t.cached_t_start=r,r},page_ready:function(){this.onloadfired=!0},check_visibility:function(){"visible"===BOOMR.visibilityState()&&(t.visiblefired=!0),"prerender"===t.visibilityState&&"prerender"!==BOOMR.visibilityState()&&BOOMR.plugins.RT.done(null,"visible"),t.visibilityState=BOOMR.visibilityState()},page_unload:function(e){BOOMR.debug("Unload called with "+BOOMR.utils.objectToString(e)+" when unloadfired = "+this.unloadfired,"rt"),this.unloadfired||BOOMR.plugins.RT.done(e,"unload"),this.updateCookie({r:n.URL},"beforeunload"===e.type?"ul":"hd"),this.unloadfired=!0},_iterable_click:function(e,n,r,i){var o;if(r){for(BOOMR.debug(e+" called with "+r.nodeName,"rt");r&&r.nodeName.toUpperCase()!==n;)r=r.parentNode;r&&r.nodeName.toUpperCase()===n&&(BOOMR.debug("passing through","rt"),o=i(r),this.updateCookie({nu:o},"cl"),BOOMR.addVar("nu",BOOMR.utils.cleanupURL(o)),t.addedVars.push("nu"))}},onclick:function(e){t._iterable_click("Click","A",e,function(e){return e.href})},onsubmit:function(e){t._iterable_click("Submit","FORM",e,function(e){var t=e.getAttribute("action")||n.URL||"";return t.match(/\?/)?t:t+"?"})},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){t.addedVars&&t.addedVars.length>0&&(BOOMR.removeVar(t.addedVars),t.addedVars=[])}},BOOMR.plugins.RT={init:function(r){return BOOMR.debug("init RT","rt"),e!==BOOMR.window&&(e=BOOMR.window),n=e.document,BOOMR.utils.pluginConfig(t,r,"RT",["cookie","cookie_exp","strict_referrer"]),t.r=t.r2=BOOMR.utils.hashQueryString(n.referrer,!0),t.initFromCookie(),t.getBoomerangTimings(),t.initialized?this:(t.complete=!1,t.timers={},t.check_visibility(),BOOMR.subscribe("page_ready",t.page_ready,null,t),BOOMR.subscribe("visibility_changed",t.check_visibility,null,t),BOOMR.subscribe("page_ready",this.done,"load",this),BOOMR.subscribe("xhr_load",this.done,"xhr",this),BOOMR.subscribe("dom_loaded",t.domloaded,null,t),BOOMR.subscribe("page_unload",t.page_unload,null,t),BOOMR.subscribe("click",t.onclick,null,t),BOOMR.subscribe("form_submit",t.onsubmit,null,t),BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),BOOMR.subscribe("onbeacon",t.clear,null,t),t.initialized=!0,this)},startTimer:function(e,n){return e&&("t_page"===e&&this.endTimer("t_resp",n),t.timers[e]={start:"number"==typeof n?n:BOOMR.now()}),this},endTimer:function(e,n){return e&&(t.timers[e]=t.timers[e]||{},void 0===t.timers[e].end&&(t.timers[e].end="number"==typeof n?n:BOOMR.now())),this},setTimer:function(e,n){return e&&(t.timers[e]={delta:n}),this},addTimersToBeacon:function(e,n){var r,i,o=[];for(r in t.timers)if(t.timers.hasOwnProperty(r)){if(i=t.timers[r],"number"!=typeof i.delta&&("number"!=typeof i.start&&(i.start=t.cached_t_start),i.delta=i.end-i.start),isNaN(i.delta))continue;t.basic_timers.hasOwnProperty(r)?(BOOMR.addVar(r,i.delta),t.addedVars.push(r)):o.push(r+"|"+i.delta);
}o.length&&(BOOMR.addVar("t_other",o.join(",")),t.addedVars.push("t_other")),"beacon"===n&&(t.timers={},t.complete=!1)},done:function(e,n){try{BOOMR.debug("Called done with "+BOOMR.utils.objectToString(e,void 0,1)+", "+n,"rt")}catch(r){BOOMR.debug("Called done with "+r+", "+n,"rt")}var i,o,a=BOOMR.now(),s=!1;return t.complete=!1,o=t.validateLoadTimestamp(a,e,n),"load"!==n&&"visible"!==n&&"xhr"!==n||t.setPageLoadTimers(n,o,e)?(i=t.determineTStart(n,e),this.endTimer("t_done",o),BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","r","r2","rt.tstart","rt.cstart","rt.bstart","rt.end","rt.subres","rt.abld","http.errno","http.method","xhr.sync"),t.setSupportingTimestamps(i),this.addTimersToBeacon(),BOOMR.addVar("r",BOOMR.utils.cleanupURL(t.r)),t.r2!==t.r&&BOOMR.addVar("r2",BOOMR.utils.cleanupURL(t.r2)),"xhr"===n&&e&&e&&e.data&&(e=e.data),"xhr"===n&&e&&(s=e.subresource,e.url&&(BOOMR.addVar("u",BOOMR.utils.cleanupURL(e.url.replace(/#.*/,""))),t.addedVars.push("u")),e.status&&(e.status<-1||e.status>=400)&&BOOMR.addVar("http.errno",e.status),e.method&&"GET"!==e.method&&BOOMR.addVar("http.method",e.method),e.headers&&BOOMR.addVar("http.hdr",e.headers),e.synchronous&&BOOMR.addVar("xhr.sync",1),e.initiator&&BOOMR.addVar("http.initiator",e.initiator),t.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")),s&&"passive"!==s&&(BOOMR.addVar("rt.subres",1),t.addedVars.push("rt.subres")),t.updateCookie(),"unload"===n&&(BOOMR.addVar("rt.quit",""),t.onloadfired||BOOMR.addVar("rt.abld",""),t.visiblefired||BOOMR.addVar("rt.ntvu","")),t.complete=!0,BOOMR.sendBeacon(),this):this},is_complete:function(){return t.complete},navigationStart:function(){return t.navigationStart||t.initFromNavTiming(),t.navigationStart}})}(window),function(){BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.Hunt||(BOOMR.plugins.Hunt={init:function(e){BOOMR.window.performance&&"undefined"!=typeof BOOMR.window.performance&&BOOMR.subscribe("before_beacon",this.done)},done:function(){var e=BOOMR.window.performance.getEntriesByName("mark_critical_load");if(e.length>=window.BOOMR.recordCriticalTimeNumber){for(var t=[],n=0;n<e.length;n++)t.push(parseInt(e[n].startTime));t.length>0&&BOOMR.addVar("mark_critical_load",t.join(","))}},is_complete:function(){return BOOMR.window&&BOOMR.window.performance&&"undefined"!=typeof BOOMR.window.performance&&"undefined"!=typeof BOOMR.window.getEntriesByName?BOOMR.window.performance.getEntriesByName("mark_critical_load").length>=window.BOOMR.recordCriticalTimeNumber:!0}})}();