define("location_validation-lite",["tooltips/1/tooltips","type_ahead"],function(a,b){"use strict";var c,d=(webmd.object(a),webmd.object(b));return c={usStateList:[{name:"Alabama",abbreviation:"AL",capital:"Montgomery"},{name:"Alaska",abbreviation:"AK",capital:"Juneau"},{name:"Arizona",abbreviation:"AZ",capital:"Phoenix"},{name:"Arkansas",abbreviation:"AR",capital:"Little Rock"},{name:"California",abbreviation:"CA",capital:"Sacramento"},{name:"Colorado",abbreviation:"CO",capital:"Denver"},{name:"Connecticut",abbreviation:"CT",capital:"Hartford"},{name:"Delaware",abbreviation:"DE",capital:"Dover"},{name:"District Of Columbia",abbreviation:"DC",capital:"Washington"},{name:"Florida",abbreviation:"FL",capital:"Tallahassee"},{name:"Georgia",abbreviation:"GA",capital:"Atlanta"},{name:"Hawaii",abbreviation:"HI",capital:"Honolulu"},{name:"Idaho",abbreviation:"ID",capital:"Boise"},{name:"Illinois",abbreviation:"IL",capital:"Springfield"},{name:"Indiana",abbreviation:"IN",capital:"Indianapolis"},{name:"Iowa",abbreviation:"IA",capital:"Des Moines"},{name:"Kansas",abbreviation:"KS",capital:"Topeka"},{name:"Kentucky",abbreviation:"KY",capital:"Frankfort"},{name:"Louisiana",abbreviation:"LA",capital:"Baton Rouge"},{name:"Maine",abbreviation:"ME",capital:"Augusta"},{name:"Maryland",abbreviation:"MD",capital:"Annapolis"},{name:"Massachusetts",abbreviation:"MA",capital:"Boston"},{name:"Michigan",abbreviation:"MI",capital:"Lansing"},{name:"Minnesota",abbreviation:"MN",capital:"Saint Paul"},{name:"Mississippi",abbreviation:"MS",capital:"Jackson"},{name:"Missouri",abbreviation:"MO",capital:"Jefferson City"},{name:"Montana",abbreviation:"MT",capital:"Helena"},{name:"Nebraska",abbreviation:"NE",capital:"Lincoln"},{name:"Nevada",abbreviation:"NV",capital:"Carson City"},{name:"New Hampshire",abbreviation:"NH",capital:"Concord"},{name:"New Jersey",abbreviation:"NJ",capital:"Trenton"},{name:"New Mexico",abbreviation:"NM",capital:"Santa Fe"},{name:"New York",abbreviation:"NY",capital:"Albany"},{name:"North Carolina",abbreviation:"NC",capital:"Raleigh"},{name:"North Dakota",abbreviation:"ND",capital:"Bismarck"},{name:"Ohio",abbreviation:"OH",capital:"Columbus"},{name:"Oklahoma",abbreviation:"OK",capital:"Oklahoma City"},{name:"Oregon",abbreviation:"OR",capital:"Salem"},{name:"Pennsylvania",abbreviation:"PA",capital:"Harrisburg"},{name:"Puerto Rico",abbreviation:"PR",capital:"San Juan"},{name:"Rhode Island",abbreviation:"RI",capital:"Providence"},{name:"South Carolina",abbreviation:"SC",capital:"Columbia"},{name:"South Dakota",abbreviation:"SD",capital:"Pierre"},{name:"Tennessee",abbreviation:"TN",capital:"Nashville"},{name:"Texas",abbreviation:"TX",capital:"Austin"},{name:"Utah",abbreviation:"UT",capital:"Salt Lake City"},{name:"Vermont",abbreviation:"VT",capital:"Montpelier"},{name:"Virginia",abbreviation:"VA",capital:"Richmond"},{name:"Washington",abbreviation:"WA",capital:"Olympia"},{name:"West Virginia",abbreviation:"WV",capital:"Charleston"},{name:"Wisconsin",abbreviation:"WI",capital:"Madison"},{name:"Wyoming",abbreviation:"WY",capital:"Cheyenne"}],loc:{city:"",state:"",zip:"",lat:"",lon:""},options:{form:null,metric:"uk"},defaultLocation:{city:"New York",state:"NY",zip:"",lat:"",lon:""},init:function(a){webmd.debug("=|=|= Location: Initialize",a);var b=this;b.settings=$.extend(b.options,a,!0),b.settings.field=b.settings.field||$("#loc"),b.settings.page=b.settings.page||b.settings.field.closest("form"),b.settings.field.on("blur",function(a){var c=$(this);a.preventDefault(),b.submitting||("text"===b.settings.field.attr("type")&&wmdPageLink(b.settings.metric+"-locate_sub"),b.submitting=!0,b.t=setTimeout(function(){b.validateField(c,!0)},1e3))}),"text"===b.settings.field.attr("type")&&(b.typeaheadcs=webmd.object(d),b.typeaheadcs.init({baseurl:webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("http://doctor.webmd.com"):"",name:"locationcs-"+b.settings.field.attr("id"),selector:"#"+b.settings.field.attr("id"),numvalid:!0,params:{s:27,sz:10,metadata:"zip,city,state,county,lat,lon"},select:function(a){b.follow(a)}}),b.typeahead=webmd.object(d),b.typeahead.init({baseurl:webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("http://doctor.webmd.com"):"",name:"location-"+b.settings.field.attr("id"),selector:"#"+b.settings.field.attr("id"),numvalid:!0,params:{s:24,sz:10,metadata:"zip,city,state,county,lat,lon"},select:function(a){b.follow(a)}}),b.settings.field.on("results-returned",function(a,c,d,e){var f,g=0;c.indexOf("locationcs")<0&&(g=1),b.ta||(b.ta=[]),b.ta[g]=e,"undefined"!=typeof b.ta[0]&&"undefined"!=typeof b.ta[1]&&(f=b.ta[0].length>0?b.ta[0]:b.ta[1],b.render(d,f,$(this)))}),b.settings.field.on("clear-type-ahead",function(a){$("#locationtypeahead").slideUp("fast",function(){$(this).closest("form").find("select").css("visibility","visible")})}))},error:function(a,b){webmd.debug("=|=|= Location: Public Error",a,b),this._error(a,b)},find:function(a){webmd.debug("=|=|= Location: Geo Locate",a);var b,c=this;"undefined"!=typeof pd_loc&&"internal"!==pd_loc.zip&&""!==pd_loc.zip?c.update(pd_loc):navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(b){webmd.debug("=|=|= Location: User Located: ",b),c._fetchLocation(b.coords.latitude,b.coords.longitude,a)},function(b){webmd.debug("=|=|= Location: ERROR: User doesn't want to share.",b),a&&a.error&&a.error("ERROR: User doesn't want to share.")}),$("html").hasClass("browserFF")&&(b=setTimeout(function(){!c.loc.zip&&a&&a.error&&a.error("ERROR: User doesn't want to share or didn't see the prompt.")},2e3))):(webmd.debug("=|=|= Location: ERROR: Browser does not support geolocation."),a&&a.error&&a.error("ERROR: Browser does not support geolocation."))},follow:function(a,b){webmd.debug("=|=|= Location: Follow Type-Ahead",a);var c=this,d=a.data("location").split(","),e={city:d[0],state:d[1],zip:d[2],lat:d[3],lon:d[4],s:null};c.t&&clearTimeout(c.t),b&&b.preventDefault(),c.settings.field.trigger("clear-type-ahead"),c._update(e)},render:function(a,b,c){webmd.debug("=|=|= Location: Render Type-Ahead",a,b,c);var d,e=this,f=c.outerWidth()-2,g=$('<div id="locationtypeahead" class="typeahead location location-'+e.settings.field.attr("id")+" locationcs-"+e.settings.field.attr("id")+'" />'),h=$('<ul id="loc_list" />'),i='<li><a href="javascript://" data-location="{city},{state},{zip},{lat},{lon}" onclick="return sl(this,\'\',\''+e.settings.metric+"-lo-ta_{i}');\">{loc}</a></li>",j=function(a,b){var c,d=function(a,b,c){var d,e,f;return f=b.toLowerCase().indexOf(c.toLowerCase()),d=a.toLowerCase().indexOf(c.toLowerCase()),a.indexOf("<strong>")>-1&&"<strong>".indexOf(c.toLowerCase())>-1&&(d=a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-2].length+9*(a.toLowerCase().split("</strong>").length-1)+a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-1].indexOf(c.toLowerCase())),e=d+c.length,(0===f||1===f)&&b.toString().indexOf("<strong>")<0?a.substring(0,d)+"<strong>"+a.substring(d,e)+"</strong>"+a.substring(e):a};return $(a.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){c=this,$(b.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString())),this.indexOf("'/")>-1&&$(this.toString().replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString()))})})}),a};e.ta=[],$(b).each(function(b,c){c.zip||(isNaN(c.id)?c.zip="":c.zip=c.id),c.i=b+1,c.loc=j(String(c.city+", "+c.state+" "+c.zip),a),d=webmd.substitute(i,c),h.append(d)}),c.siblings(".typeahead.location").length>0?c.siblings(".typeahead.location").find("ul").html(h.html()):(g.append(h),g.css({display:"none",width:f+"px",top:Number(c.position().top+c.outerHeight())+"px",left:c.position().left+"px"}),c.after(g)),c.siblings(".typeahead.location:hidden").length>0&&c.siblings(".typeahead.location").find("li").length>0?c.siblings(".typeahead.location").slideDown("fast"):c.siblings(".typeahead.location").find("li").length<1&&c.trigger("clear-type-ahead"),c.siblings(".typeahead.location").find("a").on("click",function(a){c.siblings(".typeahead.location").slideUp("fast"),e.follow($(this),a)})},reset:function(){this.loc={city:"",state:"",zip:"",lat:"",lon:"",s:null},$(this.settings.field).trigger("location-reset")},update:function(a){webmd.debug("=|=|= Location: Public Update"),this._update(a)},validateField:function(a,b,c){webmd.debug("=|=|= Location: Validate Field",a,b,c);var d,e,f,g,h=this,i="",j="",k="",l="The location you tried did not return a result. Please enter a valid 5-digit ZIP Code.",m="Please enter a valid 5-digit ZIP Code.",n=a,o="";if(n.attr("placeholder")!==n.val()&&(o=$.trim(n.val().replace(/,/g," "))),!(o.length&&o.length>1&&"text"===n.attr("type")))return"state"===n.attr("id")?(j=n.val(),i=h._getStateCapital(j),h._verify({loc:{city:i,state:j},success:function(){h.submitting=!1},error:function(a){return b||(h._error(n,l),n.focus()),h.submitting=!1,!1}}),!0):(h._error(n,m),h.submitting=!1,!1);if(!isNaN(parseFloat(o))&&isFinite(o)&&(k=o),!k){for(d=o.split(" "),e=0;e<d.length;e++)""===d[e]&&d.splice(e,1);for(e=d.length-1;e>0;e--)f=h._getStateAbbreviation($.trim(d[e])),""!==f?(d.splice(e,1),j=f):isNaN(d[e])||(k=d[e],d.splice(e,1));if(j||(g=$.trim(d[d.length-2]+" "+d[d.length-1]),f=h._getStateAbbreviation(g),""!==f&&(j=f,d.splice(d.length-2,2))),i=d.join(" ").toLowerCase(),!j||!i)return h._error(n,l),h.submitting=!1,!1}if("undefined"!=typeof k&&k!==h.loc.zip||"undefined"!=typeof i&&i.toLowerCase()!==h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()!==h.loc.state.toLowerCase()||"undefined"!=typeof i&&i.toLowerCase()!==h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()===h.loc.state.toLowerCase())webmd.debug("=|=|= Location: VERIFY"),h._verify({loc:{city:i,state:j,zip:k},success:function(){h.submitting=!1},error:function(a){return b||(h._error(n,l),n.focus()),h.submitting=!1,!1}});else if(!c&&h.settings.revert&&("undefined"!=typeof k&&k===h.loc.zip||"undefined"!=typeof i&&i.toLowerCase()===h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()===h.loc.state.toLowerCase()))webmd.debug("=|=|= Location: SAME LOCATION"),h.settings.revert();else{if(!c||!h.settings.revert)return!0;h.settings.revert()}},_error:function(a,b){webmd.debug("=|=|= Location: Error Tooltip",a,b),a.data("wtip")?($(".perr .wtip-content").html(b),a.webmdTooltip("show")):a.on("keyup blur",function(a){$(this).val().length>0&&13!==a.keyCode&&$(this).trigger("hidetooltip")}).webmdTooltip({classType:"perr",content:{text:b||null},show:{when:{event:""},ready:!0},hide:{when:{event:"hidetooltip"}}})},_fetchLocation:function(a,b,c){webmd.debug("=|=|= Location: Get Location Info",a,b,c);var d,e,f,g=this;$.ajax({url:"http://api.tiles.mapbox.com/v3/webmd.map-c3xkh4lq/geocode/"+b+","+a+".jsonp",dataType:"jsonp",jsonpCallback:"grid",success:function(c){webmd.debug("=|=|= Location: User Located, refined: ",c),c=c.results[0],"United States of America"===c[c.length-1].name||"United States"===c[c.length-1].name?(webmd.debug("=|=|= Location: Get Location Info: UPDATE",c),$.each(c,function(a,b){switch(b.type){case"city":d=b.name;break;case"province":e=b.name;break;case"zipcode":f=b.name}}),g._update({city:d,state:g._getStateAbbreviation(e),zip:f,lat:a,lon:b})):webmd.debug("=|=|= Location: ERROR: User Located, outside of USA: ",c)},error:function(a,b,d){webmd.debug("=|=|= Location: ERROR: AJAX: ",a,b,d),c&&c.error&&c.error("ERROR: AJAX: "+a+" | "+b+" | "+d)}})},_getStateAbbreviation:function(a){webmd.debug("=|=|= Location: Get State Abbreviation",a);var b=2===a.length?"abbreviation":"name",c=$.grep(this.usStateList,function(c){return c[b].toLowerCase()===a.toLowerCase()});return 1===c.length?c[0].abbreviation:""},_getStateCapital:function(a){webmd.debug("=|=|= Location: Get State Capital",a);var b=2===a.length?"abbreviation":"name",c=$.grep(this.usStateList,function(c){return c[b].toLowerCase()===a.toLowerCase()});return 1===c.length?c[0].capital:""},_update:function(a){webmd.debug("=|=|= Location: Update/Set Location",a);var b=this;"object"==typeof a&&(this.loc=webmd.object(this.loc,a),b.submitting=!1,!this.loc.zip||this.loc.city&&this.loc.state?this.loc.s?(b.returned=!1,b.settings.field.trigger("hidetooltip").trigger("location-update",a),b.settings.field.closest("form").trigger("location-update",a),$('.lhd-finder form input[name="loc"]').trigger("hidetooltip").trigger("location-update",a),$(".lhd-finder form").trigger("location-update",a)):this._verify():this._verify({loc:{zip:this.loc.zip}}))},_verify:function(a){webmd.debug("=|=|= Location: Verify Location Info",a);var b=this,c="/api/directories/Service.svc/geolocation?city={city}&state={state}&zip={zip}";a||(a={}),!a.loc&&b.loc?a.loc=b.loc:a.loc||(a.loc=b.defaultLocation),webmd.object.exists("loc.city",a)&&"winston salem"===a.loc.city.toLowerCase()&&(a.loc.city="Winston-Salem"),$.ajax({url:webmd.substitute(c,{city:a.loc.city||"",state:a.loc.state||"",zip:a.loc.zip||""}),dataType:"json",success:function(c){c=c.data,c&&c.City&&c.State?(webmd.debug("=|=|= Location: Verify Location Info: UPDATE",c),c.City===b.loc.city&&c.State===b.loc.state&&c.Zip===b.loc.zip&&b.loc.s?$(b.settings.form[0]).trigger("location-update",a):b._update({city:c.City||"",state:c.State||"",zip:c.Zip||"",lat:c.Latitude||"",lon:c.Longitude||"",s:c.DMAId||"none"}),a.success&&a.success(c)):a.error?a.error(c):b.settings?(webmd.debug("=|=|= Location: Verify Location Info: AJAX",b.settings),b.validateField(b.settings.field)):webmd.debug("=|=|= Location: Verify Location Info: ERROR",c)},error:function(b,c,d){webmd.debug("=|=|= Location: Geocode API call failed: ",c,d,b),a&&a.error&&a.error({jqXHR:b,textStatus:c,errorThrown:d})}})}},webmd.object(c)}),define("type_ahead",function(){"use strict";var a;return a={results:[],init:function(a){webmd.debug("=+=+= Type-Ahead: Initialize",a);var b,c,d,e=this,f={name:"default",num:3,numvalid:!1,parsequery:function(a){return{q:a}},selector:".type-ahead",trigger:"keyup focus focusin",url:"/api/qrl/LookupService.ashx",dataType:"json",params:{sz:5,q:"",metadata:""}};e.settings=$.extend(f,a,!0),e.$el=$(e.settings.selector),e.results[e.settings.name]=[],$(e.settings.selector).on(e.settings.trigger+" type-ahead",function(a){$(this).val().length<1?($(this).attr("autocomplete","off"),$(this).trigger("clear-type-ahead")):"undefined"!=typeof e.query&&$(this).val().toLowerCase().length>0&&$(this).val().toLowerCase()===e.query.toLowerCase()?e.$el.trigger("results-returned",[e.settings.name,e.query,e.results[e.settings.name][e.query]]):!webmd.object.exists("settings.params.s",e)||e.query&&$(this).val().toLowerCase()===e.query.toLowerCase()?$(this).val().toLowerCase()===e.query.toLowerCase()&&$(this).siblings(".typeahead."+e.settings.name+":hidden").length>0&&e.results[e.settings.name][e.query.toLowerCase()].length>0&&($(this).siblings(".typeahead."+e.settings.name+":hidden").slideDown("fast"),$(this).siblings(".typeahead."+e.settings.name+":hidden").closest("form").find("select").css("visibility","hidden")):(e.t&&clearTimeout(e.t),$(this).val().replace(/[^a-zA-Z0-9]/g," ").length>=e.settings.num||e.settings.numvalid&&!isNaN($(this).val())&&$(this).val().length>=1?(b=e.settings.parsequery($(this).val()),e.t=setTimeout(function(){e.get(b)},500)):$(this).trigger("clear-type-ahead"))}),$(e.settings.selector).on("blur",function(){c=this,e.stay||(d=setTimeout(function(){$(c).trigger("clear-type-ahead")},500))}),$(e.settings.selector).data("key")||$(e.settings.selector).on("keydown",function(a){if(40===a.which)e.stay=!0,e.move(1);else if(38===a.which)e.stay=!0,e.move(-1);else if(27===a.which)$(this).trigger("clear-type-ahead");else if((13===a.which||32===a.which)&&$(this).siblings(".typeahead."+e.settings.name).find("a.highlight").length>0)return a.preventDefault(),e.settings.select&&e.settings.select($(this).siblings(".typeahead."+e.settings.name).find("a.highlight"),a),e.settings.special&&e.settings.special(a),!1}).attr("data-key","true")},fetch:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Fetch",a,this.settings);var b=this;return b.index=-1,b.request&&b.request.abort(),b.query=webmd.url.getParam("q",a),b.results[b.settings.name][b.query]?(b.render(b.results[b.settings.name][b.query]),!1):void(b.request=$.ajax({url:a,dataType:b.settings.dataType,success:function(a){a=b.parse(a),b.results[b.settings.name][b.query]||(b.results[b.settings.name][b.query]=a),b.render(a)},error:function(a,c,d){webmd.debug("=+=+= Type-Ahead "+(b.settings.name||"uk")+": API call failed: ",b.query,c,d,a),b.results[b.settings.name][b.query]=[],b.render([])}}))},get:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Get",a,this.settings);var b=this,c=$.extend(b.settings.params,a,!0),d=b.settings.baseurl+b.settings.url;b.settings.parseparams&&(c=b.settings.parseparams(c)),c.s?($.each(c,function(a,b){d=webmd.url.setParam(a,b,d)}),b.fetch(d)):(webmd.debug("=+=+= Type-Ahead "+(b.settings.name||"uk")+": ERROR: No source",c),b.$el.trigger("results-returned",[b.settings.name,b.query,[]]))},move:function(a){webmd.debug("=+=+= Type-Ahead: Move Selection",a,this.index);var b=this;"undefined"==typeof b.index&&(b.index=-1),b.index=b.index+a,b.index>=$(".typeahead."+b.settings.name+" li:not(.hidden) a").length?b.index=0:b.index<0&&(b.index=$(".typeahead."+b.settings.name+" li:not(.hidden) a").length-1),$(b.settings.selector).siblings(".typeahead."+b.settings.name).find("a").removeClass("highlight"),$(b.settings.selector).siblings(".typeahead."+b.settings.name).find("li:not(.hidden) a:eq("+b.index+")").addClass("highlight")},parse:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Parse",a);var b=this,c=a.types.length>0?a.types[0].references:[];return b.settings.parseresult&&(c=b.settings.parseresult(c)),c},render:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Render",a);var b=this;b.$el.trigger("results-returned",[b.settings.name,b.query,a])}},webmd.object(a)}),define(["location_validation-lite","type_ahead","pdmodules/1/finder-sponsorship"],function(a,b,c){"use strict";var d,e=webmd.object(a),f=webmd.object(b),g=webmd.object(c);return webmd.debug("=$=$= Physician Directory Care Finder: Loaded 12/15/2016 3:30 PM"),d={resultsdata:"",tries:0,validParams:["hp","ln","sd","cond","proc","tname","city","state","zip","lat","lon","cf"],mobile:$("html").hasClass("ua_type_mobile"),responsive:$("html").hasClass("responsive"),cookieId:"pdInfo",init:function(a){var b,c=this,d=!1,e={form:!1,name:"carefinder",number:3,query:{},resultTemplate:'<li class="result" data-provid="{id}" data-sponid="{sponid}">{photo}<div class="result-content"><h4><a href="{url}" target="_blank" data-metrics-link="rs{i}"><strong>{name}</strong>&nbsp;&gt;</a></h4><p class="specialties">{specialties}</p>{featured}{rating}<p class="address"><strong>{location}</strong><br />{address}<br />{address2}{city}, {state} {zip}</p><p class="telephone"><a href="tel:{number}" class="phone">{phone}</a></p>{book}{sponsorship}</div></li>',resultPhotoTemplate:'<div class="photo-tags"><img class="image" src="{photo}" alt="{alt}" />{featured}</div>',resultApptTemplate:'<p class="book-appt" data-metrics-module="pd-appt"><a href="{url}" class="button {type}" data-metrics-link="bk{i}"{onclick}>Book Appointment</a></p>',resultRatingTemplate:'<div class="star-rating"><span class="rating overall" data-rating="{rating}"><i{selected1}><a class="star" href="javascript://"><i class="icon-star" /></a></i><i{selected2}><a class="star" href="javascript://"><i class="icon-star" />{half2}</a></i><i{selected3}><a class="star" href="javascript://"><i class="icon-star" />{half3}</a></i><i{selected4}><a class="star" href="javascript://"><i class="icon-star" />{half4}</a></i><i{selected5}><a class="star" href="javascript://"><i class="icon-star" />{half5}</a></i></span></div>',resultSponsorTemplate:'<div class="sponsor-logo"><a href="{url}" data-metrics-link="spon">{linkText}</a><img src="{image}" alt="{brandText}"></div>',specialist:"Doctor",ratings:"false",images:"false",target:".pd-search",url:"/api/directories/Service.svc/ProviderSearch?retfacet=false&so=random"};c.sensitiveTopic(a.sponsorId)?(webmd.debug("=$=$= Physician Directory Care Finder: Initialize: SENSITIVE TOPIC: Abort, remove module",a.name,s_topic),$(a.target).remove()):"undefined"!=typeof webmd.url.getParam("show")&&webmd.url.getParam("show").length>0&&a.type!==webmd.url.getParam("show")||"undefined"!=typeof webmd.url.getParam("module")&&webmd.url.getParam("module").length>0&&a.name!==webmd.url.getParam("module")?webmd.debug("=$=$= Physician Directory Care Finder: Initialize: TEMPORARILY DISABLED",a.name):(webmd.debug("=$=$= Physician Directory Care Finder: Initialize: LOAD",a.name),c.settings||(c.settings=[]),b=$.extend(e,a,!0),c.settings[b.name]=b,c.resultTemplate=c.settings[b.name].resultTemplate,c.resultPhotoTemplate=c.settings[b.name].resultPhotoTemplate,c.resultApptTemplate=c.settings[b.name].resultApptTemplate,c.resultRatingTemplate=c.settings[b.name].resultRatingTemplate,c.resultSponsorTemplate=c.settings[b.name].resultSponsorTemplate,c.metric=c.settings[b.name].target.replace("#",""),c.settings[b.name].$el=$(c.settings[b.name].target),c.settings[b.name].sponsored=c.settings[b.name].$el.hasClass("sponsored"),c.location(null,null,function(){c.get(c.settings[b.name])},c.settings[b.name]),c.mobile||c.responsive||(webmd.debug("Check for SITE CSS"),$(document.styleSheets).each(function(a,b){b.href&&b.href.indexOf("/Site/WebMD_")>-1&&(d=!0)}),d||webmd.load({css:image_server_url+"/webmd/PageBuilder_Assets/CSS_static/Site/WebMD_091e9c5e8004a224.css"})),(c.responsive||"responsive"===c.settings[b.name].type)&&(webmd.debug("Check for Responsive CSS"),$(document.styleSheets).each(function(a,b){b.href&&b.href.indexOf("/Responsive_Layout_CSS/")>-1&&(d=!0)}),d||(webmd.load({css:image_server_url+"/webmd/PageBuilder_Assets/CSS_static/Responsive_Layout_CSS/Runtime/3_column_layout_responsive.css"}),window.matchMedia("(max-width: 39.938em)").matches&&$("body").css({"padding-top":"0","margin-top":"-43px"}))))},addQuery:function(a,b){return a=webmd.url.setParam("pagesize",b.number,a),a=webmd.url.setParam("distance","250",a),this.loc&&(this.loc.state&&this.loc.city&&(a=webmd.url.setParam("city",this.loc.city,a),a=webmd.url.setParam("state",this.loc.state,a)),this.loc.zip&&(a=webmd.url.setParam("zip",this.loc.zip,a))),a=this.addOptionalQuery(a,b)},addOptionalQuery:function(a,b){var c=!1,d="lspg";return"0"===b.query.sd&&(c=!0),$.each(b.query,function(c,d){"0"!==d?a=webmd.url.setParam(c,d,a):b.query[c]=null}),b.query.sd||b.query.cond||b.query.proc||b.noDefaultSpecialty||(a="undefined"==typeof s_topic||""===s_topic||c?webmd.url.setParam("sd","37",a):webmd.url.setParam("topic",s_topic,a)),b.sponsorId&&("true"===b.spg&&(d="spg"),a=webmd.url.setParam(d,b.sponsorId,a)),a},adjustSizes:function(a,b){var c,d,e=this,f=a.$el.find("header h3"),g=a.$el.find("header .sponsor-logo"),h=a.$el.find("header .sponsor-logo"),i=!1;if("mobile"!==a.type||a.sponsored){if(a.$el.find("header .sponsor-logo, header h3, header .finder-logo, .result").css("height","auto"),a.$el.find(".result").length>1&&(!window.matchMedia("(min-width: 40em)").matches||"banner"!==a.type&&"footer"!==a.type||(i=!0),window.matchMedia("(min-width: 78em)").matches&&"center"===a.type&&(i=!0),window.matchMedia("(max-width: 47.938em) and (min-width: 40em)").matches&&(i=!0),i&&a.$el.find(".result").css("height",a.$el.find(".result").closest("ul").height()+"px")),b)f.css("padding-top","0"),f.css("height","auto"),g.css("padding-top","0"),g.css("height","auto");else switch(a.type){case"banner":break;case"center":break;case"footer":a.sponsored||(g=a.$el.find("header .finder-logo"));break;case"right":g=a.$el.find("header .finder-logo");break;case"mobile":g=a.$el.hasClass("closed")?a.$el.find("header .sponsor-logo"):a.$el.find("header .finder-logo")}f.height()>g.height()?(c=(f.height()-g.height())/2,g.css("padding-top",c+"px"),g.css("height",f.height()-c+"px")):f.height()<g.height()&&(c=(g.height()-f.height())/2,f.css("padding-top",c+"px"),f.css("height",g.height()-c+"px")),"mobile"===a.type&&a.expandable&&(f=a.$el.find("header .sponsor-logo"),g=a.$el.find("header > span"),f.outerHeight()>g.height()&&(c=(f.outerHeight()-g.height())/2,g.height()<f.outerHeight()-c&&(g.css("padding-top",c+"px"),g.css("height",f.outerHeight()-c+"px")))),"right"!==a.type&&"mobile"!==a.type||(h.find("a").css("width","auto"),d=h.find("a").css("margin-right")?Number(h.find("a").css("margin-right").replace("px",""))+Number(h.find("a").css("margin-left").replace("px","")):0,d+=h.find("a").css("padding-right")?Number(h.find("a").css("padding-right").replace("px",""))+Number(h.find("a").css("padding-left").replace("px","")):0,d+=h.find("img").css("margin-right")?Number(h.find("img").css("margin-right").replace("px",""))+Number(h.find("img").css("margin-left").replace("px","")):0,h.find("a").outerWidth()+h.find("img").outerWidth()>h.outerWidth()&&(1>d&&(d=2),c=h.innerWidth()-h.find("img").outerWidth()-2*d,h.find("a").css("width",c+"px")))}e.resizeImages(a)},bindings:function(a,b){var c,d,g,h,i,j=this,k=Number((new Date).getFullYear())+10,l=webmd.cookie.getJson(j.cookieId,{scramble:!0}),m=!1,n="//"+webmd.url.getHostname().replace("doctor","www"),o="mobile"!==a.type,p='<div id="legal-overlay" class="legal-overlay" data-metrics-module="pd-appt"><div class="legal-content core"><h3 class="abc">Appointments Provided by HealthPost*</h3><div class="ipad-iframe-scroller"><iframe src="{url}" class="appointments" width="685" height="500"></iframe></div><div class="legal"><p class="abc"><em>*By selecting an appointment time above you are leaving the WebMD site and going to HealthPost, a third-party. HealthPost is solely responsible for this service.</em></p></div></div><div class="legal-content mobile"><h3>Online Appointments*</h3><p>Book an Appointment with a Doctor Online Today</p><ul><li>Quick and easy process</li><li>No need to wait on hold for an appointment</li></ul><p class="continue"><a href="{url}" title="Continue" class="button orange-btn" data-metrics-module="sub">Continue</a></p><div class="legal"><p class="abc"><em>*Online appointments for this doctor are managed by HealthPost, a third party. By clicking on continue, you will be taken to a screen managed by HealthPost. HealthPost is solely responsible for this service.</em></p></div></div></div>',q=function(a,b){b.$el.find(".module-content").slideUp("fast",function(){o=!1,"mobile"===b.type&&$(c).find("header h3, header h1").text("Find "+$(c).find("header h3, header h1").text()),b.$el.addClass("closed").removeClass("open"),j.adjustSizes(b,!0),j.resizeIFrame(b),window.matchMedia("(min-width: 40em)").matches&&$(this).show().css("overflow","visible"),$(".module-lhd-finder").css("overflow","auto")}),$(a).remove()};$(window).on("resize.responsive",function(){setTimeout(function(){j.adjustSizes(a)},500)}),a.expandable&&(a.$el.find(".close-btn").on("click",function(b){q(this,a)}),a.$el.on("click",function(b){c=this,o||("mobile"===a.type&&$(c).find("header h3, header h1").text($(c).find("header h3, header h1").text().replace("Find ","")),$(c).find(".module-content").slideDown("fast",function(){$(c).addClass("open").removeClass("closed"),o=!0,j.adjustSizes(a),j.resizeIFrame(a),a.$el.find(".module-content").css("overflow","visible")}),$(c).find(".close-btn").length<1&&($(c).find("header").prepend('<a href="javascript://" class="close-btn">close <i class="icon-close" /></a>'),$(c).find(".close-btn").on("click",function(b){q(this,a)})))})),a.form&&(j.getInsurance(j.loc,a),a.$el.find("form :input").on("change",function(b){j.setSubmitLink(a)}),j.populateForm(a,null,b),a.$el.find("form .button").on("click",function(a){return a.preventDefault(),$(this).closest("form").submit(),!1}),a.$el.find("form").on("submit",function(b){b.preventDefault(),j.locModule[a.name].validateField($(this).find(a.target+"-loc"),!1,!0)&&(c=a.$el.find("form .button").attr("href"),a.$el.find('[name = "tname"]').val()!==a.$el.find('[name = "ln"]').val()&&a.$el.find('[name="sd"], [name="cond"], [name="proc"], [name="tname"]').remove(),a.$el.find(":input").each(function(){$(this).val().length>0&&"loc"!==this.name&&("tname"===this.name&&(m=!0),"ln"===this.name&&m||(c=webmd.url.setParam(this.name,$(this).val(),c)))}),webmd.debug("=v=v= Go to results:",c),wmdTrack(j.metric+"_sub"),window.location=c)}),a.$el.find("form "+a.target+"-loc").on("blur",function(b){clearTimeout(j.locModule[a.name].t)}),a.$el.find("form").on("location-update",function(b){webmd.debug("=$=$= Physician Directory Care Finder: Event: location-update",a.name,j.locModule[a.name].submitting,j.locModule),j.locModule[a.name].submitting?j.locModule[a.name].submitting=!1:(j.locModule[a.name].submitting=!0,j.locModule[a.name].loc.lat.length>0&&(j.loc=j.locModule[a.name].loc),d=j.loc.city+", "+j.loc.state,j.loc.city.length>17&&(e=j.loc.city.length<21?j.loc.city:"Your Area"),a.$el.find(a.target+"-loc").val(j.loc.city+", "+j.loc.state+" "+j.loc.zip),a.$el.find('input[name="city"]').val(j.loc.city),a.$el.find('input[name="state"]').val(j.loc.state),a.$el.find('input[name="zip"]').val(j.loc.zip),a.$el.find('input[name="lat"]').val(j.loc.lat),a.$el.find('input[name="lon"]').val(j.loc.lon),j.setSubmitLink(a),j.adjustSizes(a,!0))}),a.form&&(j.locationField(a),j.locModule[a.name].update(j.loc)),a.$el.find("form "+a.target+"-ln").on("blur",function(b){$(this).val().length<1&&a.$el.find('[name="sd"], [name="cond"], [name="proc"], [name="tname"]').remove(),j.setSubmitLink(a)}),g={baseurl:n,selector:a.target+"-ln",name:"specialty",params:{s:20,sz:10}},j.spec_typeahead=webmd.object(f),j.spec_typeahead.init(g),h={baseurl:n,selector:a.target+"-ln",name:"condition",params:{s:19,sz:10}},j.cond_typeahead=webmd.object(f),j.cond_typeahead.init(h),i={baseurl:n,selector:a.target+"-ln",name:"procedure",params:{s:18,sz:10}},j.proc_typeahead=webmd.object(f),j.proc_typeahead.init(i),a.$el.find(a.target+"-ln").on("results-returned",function(b,c,d,f){var g;j.ta||(j.ta={}),j.ta[c]=f,d&&j.ta.specialty&&j.ta.condition&&j.ta.procedure&&(g=d.split("-")[0]===e.loc.state.toLowerCase()&&d.split("-")[1]===e.loc.city.toLowerCase()?d.replace(d.split("-")[0]+"-"+d.split("-")[1]+"-",""):d,j.renderTypeAhead(a,g,j.ta))}),a.$el.find(a.target+"-ln").on("clear-type-ahead",function(a){$("#physiciantypeahead").slideUp("fast",function(){})})),a.$el.find("a:not(.close-btn)").off().on("click",function(b){webmd.debug("=$=$= Physician Directory Care Finder: Set Cookie",l),l.icd=j.getSponIds(a,j.metric),webmd.cookie.setJson(j.cookieId,l,{scramble:!0,domain:webmd.url.getSLD(),expires:new Date("January 1, "+k+" 00:00:00")})}),a.$el.find(".book-appt .abc").off().on("click",function(b){b.preventDefault(),wmdPageLink(webmd.metrics._getMetricsValue($(this)),{contextData:{"wb.icd":j.getSponIds(a,j.metric)}});var c=this.href,d={html:webmd.substitute(p,{url:c}),width:j.mobile?"90%":702,onComplete:function(){$("#legal-overlay .continue a").on("click",function(){webmd.overlay.close()})},onLoad:function(){$("#webmdHoverClose").html("X")}};webmd.overlay.open(d)})},bookAppointmentLink:function(a,b,c){var d=this,e="",f=!1,g={type:"",url:"",metric:d.metric,i:c,onclick:""};return b.AppointmentProviderUrl&&b.AppointmentProviderUrl.length>0&&b.AppointmentProviderUrl.indexOf("docasap")<0&&(g.url=b.AppointmentProviderUrl,g.type="abc",f=!0),f&&(e=webmd.substitute(d.resultApptTemplate,g)),e},formatPhone:function(a){var b="";return a&&"string"!=typeof a&&("object"==typeof a&&(a=a[0]),a=a.toString()),a&&a.length>0&&(b=a.replace(/\D/g,""),10===b.length?b=b.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3"):7===b.length?b=b.replace(/(\d{3})(\d{4})/,"$1-$2"):b.length>10&&(b=b.replace(/(\d{3})(\d{3})(\d{4})/,"($1) $2-$3 x"))),b},fullName:function(a){var b="";return a.FirstName.length>0&&(b+=a.FirstName+" "),a.MiddleName.length>0&&(b+=a.MiddleName+". "),a.LastName.length>0&&(b+=a.LastName),
$.each(a.Degrees,function(){b+=", "+this}),b},get:function(a,b){webmd.debug("=$=$= Physician Directory Care Finder: Get",a.name,a,a.target);var c=this,d=c.addQuery(a.url,a).replace("preview.","");c.loc?$.ajax({url:d,dataType:"json",success:function(d){webmd.debug("=$=$= Physician Directory Care Finder: Results:",a.name,d),d=d.data,d&&d.Providers&&!b?c.render(a,d):d&&d.Providers||(a.$el.hide(),window.frameElement&&$(window.frameElement).add(window.parent.frameElement).css({display:"none"}))},error:function(b,c,d){webmd.debug("=$=$= Physician Directory Care Finder: ERROR: AJAX: Results",b,c,d),a.$el.hide()}}):c.location(null,null,function(){c.get(a)},a)},getInsurance:function(a,b){webmd.debug("=$=$= Physician Directory Care Finder: Get Insurance List",b.name,a);var c="/api/directories/Service.svc/insurance?city={city}&state={state}&zip={zip}",d=$(".hp"),e='<option id="{id}" value="{value}">{name}</option>';(a.zip||a.city&&a.state)&&$.ajax({url:webmd.substitute(c,{city:a.city||"",state:a.state||"",zip:a.zip||""}),dataType:"json",success:function(a){if(webmd.debug("=$=$= Physician Directory Care Finder: Insurance",a),"ok"===a.status){a=a.data;var b=function(a){var b=[];return $.each(a,function(a,c){""!==this.ID&&b.push(this)}),b},c=b(a),f=function(a,b){var c=b.attr("class");$(b).each(function(){var b=$(this);b.removeAttr("disabled"),b.find("option").removeAttr("disabled").attr("selected","selected"),$.each(a,function(a,d){var f=$(webmd.substitute(e,{id:c+"-"+d.Id,cl:c,value:d.Id,name:d.Name}));b.append(f)})})};d.length>0&&(d.find("option[id]").remove(),c.length>0?f(c,d):d.attr("disabled","disabled").closest("fieldset").hide())}},error:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory: ERROR: AJAX:",a,b,c)}})},getLocation:function(a,b,c){webmd.debug("=$=$= Physician Directory Care Finder: Get Location",c.name,a);var d,e=this,f={city:"New York",state:"NY",zip:"10001",lat:"",lon:"",s:501};$.ajax({url:"/api/directories/Service.svc/location",dataType:"json",success:function(g){webmd.debug("=$=$= Physician Directory Care Finder: Data",g),"fail"===g.status||""===g.data.City||""===g.data.State||""===g.data.Zip?e.location(f,a,b):(d=g.data,e.location({city:d.City,state:d.State,zip:d.Zip,lat:d.Latitude,lon:d.Longitude,s:d.DMAId},a,b,c))},error:function(d,g,h){webmd.debug("=$=$= Physician Directory Care Finder: ERROR: AJAX: Location",d,g,h),e.location(f,a,b,c)}})},getProvIds:function(a){var b=null;return a.$el.find(".result[data-provid]").length>0&&(b="pd_",a.$el.find(".result[data-provid]").each(function(a,c){a>0&&(b+="_"),b+=$(c).data("provid")})),b},getSponIds:function(a,b){var c=null;return a.$el.find(".result[data-provid]:not(:hidden)").length>0&&(c=b+"_",a.$el.find(".result[data-provid]:not(:hidden)").each(function(a,b){a>0&&(c+=":"),c+=$(b).data("provid"),$(b).data("sponid")&&(c+="-",c+=$(b).data("sponid"))})),c},headerText:function(a,b){var c=this,d="";return a.header?d=webmd.substitute(a.header,b):(b.specialist=c.setSpecialist(a,b),c.loc.city.length>17?c.loc.city.length<21?b.location=c.loc.city:b.location="Your Area":b.location=c.titleCase(c.loc.city)+", "+c.loc.state.toUpperCase(),b.location=b.location.replace(/ /g," "),("banner"===a.type||"mobile"===a.type&&a.expandable)&&(d+="Find "),d+=b.specialist,b.Conditions&&b.Conditions.length>0&&(d+=" Who Treat "+b.Conditions[0].Condition.Name),b.Procedures&&b.Procedures.length>0&&(d+=b.Conditions?" and":" Who",d+=" Perform "+b.Procedures[0].Procedure.Name),d+=" Near "+b.location),d},location:function(a,b,c,d){webmd.debug("=$=$= Physician Directory Care Finder: Location",d.name,a,b,c,d);var e=this;b||(b=d.$el?d.$el.find("input[name=loc]"):$(d.target).find("input[name=loc]")),a&&a.city&&a.state&&a.zip||e.loc&&e.loc.city&&e.loc.state&&e.loc.zip||!(e.tries<10)?(a&&a.city&&a.state&&a.zip&&(e.loc=a),b.val(e.loc.city+", "+e.loc.state+" "+e.loc.zip),c&&c()):(e.tries++,e.getLocation(b,c,d))},locationField:function(a){var b=this;b.locModule||(b.locModule={}),b.locModule[a.name]||(b.locModule[a.name]=webmd.object(e),b.locModule[a.name].init({form:a.$el.find("form"),field:a.$el.find("form "+a.target+"-loc"),metric:b.metric,mobile:b.mobile,callback:{error:function(c){b.mobile&&b.locModule[a.name].reset()}}}))},photo:function(a,b){var c,d=this,e="";if("true"===a.images){if(c={alt:this.fullName(b),featured:""},b.Photo)c.photo=b.Photo;else if(b.C_Photo)c.photo=b.C_Photo;else switch(b.Gender){case"M":c.photo=image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/male.png";break;case"F":c.photo=image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/female.png";break;default:c.photo=image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/unisex.png"}b.Featured&&(c.featured='<em class="featured">Featured</em>'),e=webmd.substitute(d.resultPhotoTemplate,c)}return e},populateForm:function(a,b,c){webmd.debug("=$=$= Physician Directory Care Finder: Populate Form",a.name,b,a,c);var d=this,e=a.query,f=d.validParams;e.cf||(e.cf=!0),"undefined"!=typeof c&&("undefined"==typeof e.sd&&"undefined"!=typeof c.QueryData.Specialty&&null!==c.QueryData.Specialty?e.sd=c.QueryData.Specialty.Id:"undefined"==typeof e.cond&&c.QueryData.Conditions&&c.QueryData.Conditions.length>0?e.cond=c.QueryData.Conditions[0].Condition.Id:"undefined"==typeof e.proc&&c.QueryData.Procedures&&c.QueryData.Procedures.length>0&&(e.proc=c.QueryData.Procedures[0].Procedure.Id)),"undefined"!=typeof b&&null!==b&&(e=webmd.url.getParams(b.attr("href")),e.sd&&(e.sd=e.sd[0]),e.cond&&(e.cond=e.cond[0]),e.proc&&(e.proc=e.proc[0]),e.tname=e.tname[0]),e=$.extend(e,d.loc,!0),a.$el.find('[name="sd"], [name="cond"], [name="proc"], [name="tname"]').remove(),$.each(e,function(b,d){$.inArray(b,f)>-1&&("undefined"==typeof e.tname&&c&&d&&("sd"===b?(c.QueryData.Specialty&&webmd.object.exists("QueryData.Specialty.ClinicalName",c)&&(e.tname=c.QueryData.Specialty.ClinicalName),"undefined"!=typeof e.cond&&(e.cond=null),"undefined"!=typeof e.proc&&(e.proc=null),a.$el.find('[name="cond"]').remove(),a.$el.find('[name="proc"]').remove()):"cond"===b?(e.tname=c.QueryData.Conditions[0].Condition.Name,"undefined"!=typeof e.proc&&(e.proc=null),a.$el.find('[name="sd"]').remove(),a.$el.find('[name="proc"]').remove()):"proc"===b&&(e.tname=c.QueryData.Procedures[0].Procedure.Name,a.$el.find('[name="sd"]').remove(),a.$el.find('[name="cond"]').remove())),a.$el.find('[name="'+b+'"]').length<1&&d?a.$el.find("form").prepend('<input type="hidden" name="'+b+'" class="'+b+'" value="'+d+'" />'):a.$el.find('[name="'+b+'"]').val(d))}),"General Practice"===e.tname&&(e.tname=""),e.tname&&a.$el.find('[name="ln"]').val(e.tname),d.setSubmitLink(a,e)},rating:function(a,b){var c,d=this,e="";return"true"===a.ratings&&b.Ratings&&(c={rating:Number(b.Ratings.Criteria1),selected1:"",selected2:"",half2:"",selected3:"",half3:"",selected4:"",half4:"",selected5:"",half5:""},c.rating>0&&(c.selected1=' class="selected"'),c.rating>1.24&&c.rating<1.75?(c.selected2=' class="selected half"',c.half2='<i class="icon-halfstar" />'):c.rating>1.74&&(c.selected2=' class="selected"'),c.rating>2.24&&c.rating<2.75?(c.selected3=' class="selected half"',c.half3='<i class="icon-halfstar" />'):c.rating>2.74&&(c.selected3=' class="selected"'),c.rating>3.24&&c.rating<3.75?(c.selected4=' class="selected half"',c.half4='<i class="icon-halfstar" />'):c.rating>3.74&&(c.selected4=' class="selected"'),c.rating>4.24&&c.rating<4.75?(c.selected5=' class="selected half"',c.half5='<i class="icon-halfstar" />'):c.rating>4.74&&(c.selected5=' class="selected"'),e=webmd.substitute(d.resultRatingTemplate,c)),e},render:function(a,b){webmd.debug("=$=$= Physician Directory Care Finder: Render Module",a.name,a.$el,b,a);var c=this,d=b.Providers,e={specialist:a.specialist,inputid:"l-"+a.name,fullLocation:c.titleCase(c.loc.city)+", "+c.loc.state.toUpperCase()+" "+c.loc.zip,zip:c.loc.zip,metric:c.metric};d.length>0?c.sensitiveTopic()?webmd.debug("=$=$= Physician Directory Care Finder: SENSITIVE TOPIC: Abort 2",s_topic):(a.$el.find("header h3, header h1").text(c.headerText(a,b.QueryData)),c.results(a,d),a.$el.show({complete:function(){var d,e=0,f=function(){c.bindings(a,b),c.resizeImages(a),e>3?clearInterval(d):e++};d=setInterval(f,300),window.matchMedia("(min-width: 40em)").matches&&$(".module-lhd-finder").css("overflow","visible")}})):(webmd.debug("=$=$= Physician Directory Care Finder: ERROR: No Results:",e,window.frameElement),a.$el.hide(),window.frameElement&&$(window.frameElement).add(window.parent.frameElement).css({display:"none"}),a.$el.hide())},renderTypeAhead:function(a,b,c){webmd.debug("=$=$= Physician Directory Care Finder: Render Type-Ahead",a.name,b,c);var d,e,f,g,h,i=this,j=0,k=[],l=0,m=$(a.target+"-ln"),n=Number(m.closest('fieldset input[name="ln"]').outerWidth()),o=$('<div id="physiciantypeahead" class="typeahead specialty condition procedure" />'),p=$('<ul id="specialty_list" class="specialty" data-metrics-module="'+i.metric+'-sp-ta" />'),q=$('<ul id="condition_list" class="condition" data-metrics-module="'+i.metric+'-cd-ta" />'),r=$('<ul id="procedure_list" class="procedure" data-metrics-module="'+i.metric+'-pr-ta" />'),s={core:{specialty:'<li><a href="/results?city='+i.loc.city+"&state="+i.loc.state+"&zip="+i.loc.zip+"&lat="+i.loc.lat+"&lon="+i.loc.lon+'&sd={spcid}&tname={tname}" data-metrics-link="{i}" data-spcid="{spcid}">{spc}</a></li>',condition:'<li><a href="/results?city='+i.loc.city+"&state="+i.loc.state+"&zip="+i.loc.zip+"&lat="+i.loc.lat+"&lon="+i.loc.lon+'&cond={cndid}&tname={tname}" data-metrics-link="{h}" data-cndid="{cndid}">{cond}</a></li>',procedure:'<li><a href="/results?city='+i.loc.city+"&state="+i.loc.state+"&zip="+i.loc.zip+"&lat="+i.loc.lat+"&lon="+i.loc.lon+'&proc={prcid}&tname={tname}" data-metrics-link="{g}" data-prcid="{prcid}">{proc}</a></li>'},mobile:{specialty:'<li><a href="/results?city='+i.loc.city+"&state="+i.loc.state+"&zip="+i.loc.zip+"&lat="+i.loc.lat+"&lon="+i.loc.lon+'&sd={spcid}&tname={tname}" data-metrics-link="{i}" data-spcid="{spcid}">{spc}</a></li>',condition:'<li><a href="/results?city='+i.loc.city+"&state="+i.loc.state+"&zip="+i.loc.zip+"&lat="+i.loc.lat+"&lon="+i.loc.lon+'&cond={cndid}&tname={tname}" data-metrics-link="{h}" data-cndid="{cndid}">{cond}</a></li>',procedure:'<li><a href="/results?city='+i.loc.city+"&state="+i.loc.state+"&zip="+i.loc.zip+"&lat="+i.loc.lat+"&lon="+i.loc.lon+'&proc={prcid}&tname={tname}" data-metrics-link="{g}" data-prcid="{prcid}">{proc}</a></li>'}},t=function(a){var c,d=[],e="",f=function(a,b){var c,d;return c=a.toLowerCase().indexOf(b.toLowerCase()),d=c+b.length,(0===c||1===c)&&a.toString().indexOf("<strong>")<0?a.substring(0,c)+"<strong>"+a.substring(c,d)+"</strong>"+a.substring(d):a};return $(a.split(" ")).each(function(){c=this,$(b.replace(/[^a-zA-Z0-9 \-\'\/]/g," ").split(" ")).each(function(){this.length>0&&(c=f(c,this.toString())),this.indexOf("'/")>-1&&$(this.toString().replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(c=f(c,this.toString()))})}),d.push(c)}),$.each(d,function(a){e+=this,a<d.length-1&&(e+=" ")}),e};switch(d=i.mobile?s.mobile:s.core,$.each(c,function(a){$(this).length>0&&(l+=$(this).length,k.push($(this).length))}),k.length){case 4:e=2;break;case 3:e=3;break;case 2:e=5;break;default:e=10}11>l&&(e=10),i.ta={},$(c.specialty).each(function(a){e>a&&(this.spc=this.text,this.spcid=this.id,this.addClass="",this.i=a+1,this.tname=encodeURI(this.spc).replace("&","%26").replace("/","%2F"),this.spc=t(this.spc),f=webmd.substitute(d.specialty,this),p.append(f))}),$(c.condition).each(function(a){e>a&&(this.cond=this.text,this.cndid=this.id,this.addClass="",this.h=a+1,this.tname=encodeURI(this.cond).replace("&","%26").replace("/","%2F"),this.cond=t(this.cond),g=webmd.substitute(d.condition,this),q.append(g))}),$(c.procedure).each(function(a){e>a&&(this.proc=this.text,this.prcid=this.id,this.addClass="",this.g=a+1,this.tname=encodeURI(this.proc).replace("&","%26").replace("/","%2F"),this.proc=t(this.proc),h=webmd.substitute(d.procedure,this),r.append(h))}),c.specialty&&c.specialty.length>0&&(o.append('<h3 class="specialty">Specialties:</h3>'),o.append(p)),c.condition&&c.condition.length>0&&(o.append('<h3 class="condition">Conditions:</h3>'),o.append(q)),c.procedure&&c.procedure.length>0&&(o.append('<h3 class="procedure">Procedures:</h3>'),o.append(r)),$("form #physiciantypeahead").length>0?$("form #physiciantypeahead").html(o.html()):($(".module-lhd-finder").css("overflow","visible"),o.css({display:"none",width:n+"px",top:Number(m.position().top+m.outerHeight())+"px",left:m.position().left+"px"}),m.after(o),$("html").hasClass("thin")&&"footer"===a.type&&m.closest("form").find("label:nth-of-type(2)").css("width","10%")),$("form #physiciantypeahead .specialty a, form #physiciantypeahead .condition a, form #physiciantypeahead .procedure a").on("click",function(b){b.preventDefault(),i.populateForm(a,$(this))}),c.specialty&&c.specialty.length<1?($("form #physiciantypeahead").find(".specialty").hide(),j++):$("form #physiciantypeahead").find(".specialty").show(),c.condition&&c.condition.length<1?($("form #physiciantypeahead").find(".condition").hide(),j++):$("form #physiciantypeahead").find(".condition").show(),c.procedure&&c.procedure.length<1?($("form #physiciantypeahead").find(".procedure").hide(),j++):$("form #physiciantypeahead").find(".procedure").show(),$("form #physiciantypeahead:hidden").length>0&&$("form #physiciantypeahead").find("li").length>0?$("form #physiciantypeahead").slideDown("fast"):$("form #physiciantypeahead").find("li").length<1&&m.trigger("clear-type-ahead"),m.trigger("results-rendered")},resizeIFrame:function(a){window.frameElement&&("banner"===a.type&&a.$el.css({margin:"0"}),$(window.frameElement).add(window.parent.frameElement).css({height:Number(a.$el.outerHeight()+1),width:"100%",margin:"0"}))},resizeImages:function(a){var b,c=this,d=function(a){var b,c;$(a).closest("div").find(".featured").length>0?(b=$(a).closest("div").find(".featured"),c=b.height()+Number(b.css("margin-top").replace(/\D/g,""))+Number(b.css("margin-bottom").replace(/\D/g,""))):c=0,$(a).closest("div").height($(a).height()+c)};a.count||(a.count=0),a.$el.find("img.image").length<1&&a.count<10?(a.count++,setTimeout(function(){c.resizeImages(a),c.adjustSizes(a,!0)},500)):(a.count||(a.count=0),a.$el.find("img.image").each(function(e,f){if(b=$(f).closest("div"),$(f).width()>0&&$(f).height()>0&&b.width()>0&&b.height()>0)b.width()<Number(b.css("max-width").replace(/\D/g,""))&&b.width(Number(b.css("max-width").replace(/\D/g,""))),b.height()<Number(b.css("max-height").replace(/\D/g,""))&&b.height(Number(b.css("max-height").replace(/\D/g,""))),$(f).width()!==b.width()||$(f).height()!==b.height()?$(f).width()>$(f).height()||$(f).width()===$(f).height()?($(f).width(b.width()),$(f).width()>$(f).height()&&d(f)):$(f).width()<$(f).height()&&$(f).height(b.height()):$(f).height()<b.height()&&d(f);else if(c.count<10)return c.count++,setTimeout(function(){c.resizeImages(),c.adjustSizes(a,!0)},500),!1}))},results:function(a,b){webmd.debug("=$=$= Physician Directory Search: Build Results",a.name,a,b);var c,d,e,f=this,g=a.$el.find(".module-content ul"),h=0,i=window.s_md,j=window.wmdPageLink,k=function(){h++,f.loc&&f.loc.city?(clearInterval(f.i),$.each(b,function(b){e=this.PracticeLocations?this.PracticeLocations[0].Profile.Location:this.Practices?this.Practices[0].Location:{City:"",State:"",Zip:""},d={photo:f.photo(a,this.Profile),id:this.Profile.IntId,sponid:this.Profile.SponsorID||"",name:f.fullName(this.Profile),specialties:f.specialties(this.Specialties),featured:this.Profile.Featured&&"true"!==a.images&&!a.sponsored?'<em class="featured">Featured</em>':"",rating:f.rating(a,this.Profile),location:this.PracticeLocations[0].Profile.Name||"",address:this.PracticeLocations[0].Profile.Location.Addr1,address2:this.PracticeLocations[0].Profile.Location.Addr2,city:this.PracticeLocations[0].Profile.Location.City,state:this.PracticeLocations[0].Profile.Location.State,zip:this.PracticeLocations[0].Profile.Location.Zip,number:this.PracticeLocations[0].Profile.Phone[0].replace(/\D/g,""),phone:f.formatPhone(this.PracticeLocations[0].Profile.Phone),book:f.bookAppointmentLink(a,this,b+1),sponsorship:f.sponsorship(a,this,b+1),i:b+1,metric:f.metric,url:f.url(this.Profile,this.PracticeLocations[0].Profile)},d.address2.length>0&&(d.address2+="<br />"),c=webmd.substitute(f.resultTemplate,d),g.append(c)}),f.sensitiveTopic()?(webmd.debug("=$=$= Physician Directory Care Finder: SENSITIVE TOPIC: Abort 3",s_topic),a.$el.remove()):a.$el.show(1,function(){f.resizeIFrame(a),f.adjustSizes(a),"undefined"!=typeof i?j(f.metric+"-imp",{contextData:{"wb.pddoc":f.getProvIds(a),"wb.icd":f.getSponIds(a,f.metric+"-imp")}}):webmd.debug("=$=$= Physician Directory Care Finder: ERROR: No Provider id metrics"),$(this).removeAttr("hidden").attr("aria-hidden","false")})):h>3&&clearInterval(f.i)};"undefined"==typeof i&&(i=window.parent.s_md),"undefined"==typeof j&&(j=function(a,b){window.parent.wmdPageLink(a,b)}),g.html(""),f.i=setInterval(k,300)},sensitiveTopic:function(a){return"undefined"!=typeof a&&(this.sensitiveOverride=a),"undefined"!=typeof this.sensitiveOverride&&this.sensitiveOverride.length>0?!1:"undefined"!=typeof s_topic&&""!==s_topic&&Number(s_topic)>6999&&Number(s_topic)<8e3},setSpecialist:function(a,b){var c=a.specialist;return"Doctors"!==c&&"Doctor"!==c||null===b.Specialty||"General Practitioner"===b.Specialty.PracticingName||(c=b.Specialty.PracticingName,"undefined"==typeof a.query.tname&&(a.query.tname=b.Specialty.ClinicalName)),c.lastIndexOf("s")!==c.length-1&&(c+="s"),c},setSubmitLink:function(a,b){var c=this,d=webmd.url.clear(a.$el.find("form .button").attr("href")),e=c.validParams;b||(b={},a.$el.find(":input").each(function(){$.inArray(this.name,e)>-1&&$(this).val()&&(b[this.name]=$(this).val())})),"undefined"!=typeof b.ln&&b.tname!==b.ln&&(a.$el.find('[name="sd"], [name="cond"], [name="proc"], [name="tname"]').remove(),"undefined"!=typeof b.sd&&(b.sd=null),"undefined"!=typeof b.tname&&(b.tname=null),"undefined"!=typeof b.cond&&(b.cond=null),"undefined"!=typeof b.proc&&(b.proc=null)),$.each(b,function(a,b){d=webmd.url.setParam(a,b,d)}),a.$el.find("form .button").attr("href",d)},specialties:function(a){var b="";return $(a).each(function(a,c){a>0&&(b+=", "),b+=c.Name}),b},sponsorship:function(a,b,c){var d,e=this,f="",h={url:"",image:"",metric:e.metric,i:c};return!a.sponsored&&b.Profile.SponsorID&&g[b.Profile.SponsorID]&&!g[b.Profile.SponsorID].customLink&&(d=g[b.Profile.SponsorID],h=$.extend(h,d,!0),h.url=webmd.url.addLifecycleAndEnv(d.linkUrl),h.image=image_server_url+d.image,f=webmd.substitute(e.resultSponsorTemplate,h)),f},titleCase:function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},url:function(a,b){var c="http://doctor.webmd.com/doctor/";return a.FirstName.length>0&&(c+=a.FirstName.replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()),a.LastName.length>0&&(c+="-"+a.LastName.replace(/[^a-zA-Z0-9\-]/g,"").toLowerCase()),a.Degrees.length>0&&a.Degrees[0].length>0&&(c+="-"+a.Degrees[0].toLowerCase()),a.Id.length>0&&(c+="-"+a.Id.toLowerCase()),c+="-overview?lid="+b.IntId,webmd.url.addLifecycleAndEnv(c).replace("preview.","qa01.").replace("staging.","qa00.")}},webmd.object(d)});