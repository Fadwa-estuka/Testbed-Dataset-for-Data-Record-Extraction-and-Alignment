/* repo: social-share-plugin/release-11-29-2016@1.3.2-0-g76751cb - Package Version: 1.3.2 - 2016-11-29 06:26 pm - User: Cody, Scott */

define("webmd.m.socialshareplugin",[],function(){return webmd.m.socialshareplugin=function(e,t,n,r){"use strict";function o(){return e("meta[property='og:description']").attr("content")||""}function u(){return e("meta[property='og:title']").attr("content")||e("title").html()}function a(){return e("meta[property='og:url']").attr("content")||t.location.href}function f(){return e("meta[property='og:image']").attr("content")||""}function l(){return e("meta[property='og:site_name']").attr("content")||""}function c(){return e("meta[property='og:type']").attr("content")||""}function h(t){var n="https://api-ssl.bitly.com/v3/shorten?access_token=34543b055a4fc76fa6e5969de2abc6f323145392",r=n+"&longUrl="+encodeURIComponent(t)+"&format=txt",i=e.Deferred();return s===""?(s=t,e.ajax({url:r,async:!1,timeout:500,success:function(e,t,n){s=e,i.resolve(s)},error:function(e,n,r){s=t,i.resolve(s)}}),i.promise()):(i.resolve(s),i.promise())}function p(e,n){var r="https://twitter.com/intent/tweet?",i="",s="";h(e.shareLink).done(function(o){i="text="+encodeURIComponent(e.shareTitle)+" "+encodeURIComponent(o)+" from @WebMD",s=r+i,t.open(s,"",n)})}function d(e){var t="https://www.facebook.com/dialog/feed?",n="app_id=385978254785998",r="&display=popup",i="&picture="+encodeURIComponent(e.shareImg),s="&redirect_uri="+encodeURIComponent("http://www.webmd.com/facebook-app-close"),o="&name="+encodeURIComponent(e.shareTitle),u="&link="+encodeURIComponent(e.shareLink),a="&caption="+encodeURIComponent(e.shareTitle),f="&description="+encodeURIComponent(e.shareDesc),l=t+n+r+i+s+o+u+a+f;return l}function v(e){var t="https://pinterest.com/pin/create/button/?",n="url="+encodeURIComponent(e.shareLink),r="&media="+encodeURIComponent(e.shareImg),i="&description="+encodeURIComponent(e.shareTitle)+" | WebMD",s=t+n+r+i;return s}function m(e){var t="https://plus.google.com/share?",n="url="+encodeURIComponent(e.shareLink),r=t+n;return r}function y(t,n){this.element=t,this.settings=e.extend({},g,n),this._defaults=g,this._name=i,this.init()}var i="socialshareplugin",s="",g={shareOrder:["facebook","pinterest","twitter"],baseHtmlTmpl:"<div class='plugin plugin-socialshare' data-metrics-module='sharebar'></div>",shareTitle:u(),shareDesc:o(),shareImg:f(),shareLink:a(),shareOptions:{facebook:{windowOpts:"height=400, width=580, scrollbars = 1, toolbar = 0, resizable = 1, status = 0, left = 25, top = 25",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-facebook' data-metrics-link='face' data-metrics-type='ad-hoc' data-sharetype='facebook' href='' title='Share on Facebook'><span class='visually-hidden'>Share on Facebook</span></a>",clickHandler:function(e){t.open(d(e),"",this.windowOpts)}},pinterest:{windowOpts:"height=400, width=580, scrollbars = 1, toolbar = 0, resizable = 1, status = 0, left = 25, top = 25",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-pinterest' data-metrics-link='pin' data-metrics-type='ad-hoc' data-sharetype='pinterest' href='' title='Share on Pinterest'><span class='visually-hidden'>Share on Pinterest</span></a>",clickHandler:function(e){t.open(v(e),"",this.windowOpts)}},twitter:{windowOpts:"height=400, width=580, scrollbars = 1, toolbar = 0, resizable = 1, status = 0, left = 25, top = 25",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-twitter' data-metrics-link='twit' data-metrics-type='ad-hoc' data-sharetype='twitter' href='' title='Share on Twitter'><span class='visually-hidden'>Share on Twitter</span></a>",clickHandler:function(e){p(e,this.windowOpts)}},googleplus:{windowOpts:"height=400, width=580, scrollbars = 1, toolbar = 0, resizable = 1, status = 0, left = 25, top = 25",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-googleplus' data-metrics-link='ggl' data-metrics-type='ad-hoc' data-sharetype='googleplus' href='' title='Share on Google+'><span class='visually-hidden'>Share on Google+</span></a>",clickHandler:function(e){t.open(m(e),"",this.windowOpts)}},listen:{windowOpts:"",htmlTmpl:'<div id="readspeaker_button1" class="rs_skip rsbtn rs_preserve" data-sharetype="listen"><a class="rsbtn_play" accesskey="L" title="Listen to this page using ReadSpeaker" href="http://app-na.readspeaker.com/cgi-bin/rsent?customerid=5841&lang=en_us&readclass=active-page&url='+encodeURIComponent(t.location.href)+'">'+'<span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span>'+'<span class="rsbtn_right rsimg rsplay rspart"></span>'+"</a>"+"</div>",clickHandler:function(){wmdPageLink("rdspk_r")}},email:{windowOpts:"",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-email' target='_blank' data-metrics-link='email' data-metrics-type='ad-hoc' data-sharetype='email' href='mailto:?subject="+n.title+"&body=I visited WebMD and thought that you would be interested in the information below."+" %0A"+t.location.href+"%0A %20 %0A "+"To view, click on the address above or copy and paste it into your Web browser.%0A %20 %0A "+"LEARN MORE AT WEBMD - the nations most trusted health and wellness resource.%0A http://www.webmd.com/ "+"%0A Copyright "+(new Date).getFullYear()+" WebMD, All rights reserved. %0A WebMD does not provide medical advice, diagnosis or treatment.'  title='Share via Email'><span class='visually-hidden'>Email</span></a>",clickHandler:function(){t.location.href="mailto:?subject="+n.title+"&body=I visited WebMD and thought that you would be interested in the information below."+" %0A"+t.location.href+"%0A %20 %0A "+"To view, click on the address above or copy and paste it into your Web browser.%0A %20 %0A "+"LEARN MORE AT WEBMD - the nations most trusted health and wellness resource.%0A http://www.webmd.com/ "+"%0A Copyright "+(new Date).getFullYear()+" WebMD, All rights reserved. %0A WebMD does not provide medical advice, diagnosis or treatment."}},print:{windowOpts:"",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-print' data-metrics-link='print' data-metrics-type='ad-hoc' data-sharetype='print' href='' title='Print this page'><span class='visually-hidden'>Print</span></a>",clickHandler:function(){var e=800,n=600,r=location.href,i="width="+e+",height="+n;r.search("[\\#]")!==-1&&(r=r.split("#")[0]),r.search("[\\?]")!==-1?r+="&print=true":r+="?print=true",navigator.appVersion.indexOf("Mac")>0?i+=",toolbar=yes,resizable=yes,scrollbars=yes":i+=",toolbar=1,location=1,directories=0,status=0,menubar=0,scrollbars=1,resizable=1,copyhistory=0,top=10,left=10",t.open(r,"printFriendly",i)}},save:{windowOpts:"",htmlTmpl:"<a class='plugin-socialshare-link plugin-socialshare-save' data-metrics-link='save' data-metrics-type='ad-hoc' data-sharetype='save' href='#' title='Save this page'><span class='visually-hidden'>Save</span></a>",clickHandler:function(){var r=1;r=t.location.pathname.indexOf("/magazine/")>-1?6:r,r=t.location.host.indexOf("exchanges")>-1?5:r;if(webmd.cookie.exists("WBMD_AUTH")){var i=n.URL,s;i=i.replace("//","//"),s={title:n.title,url:i},e.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",timeout:1e4,url:t.location.protocol+"//"+t.location.hostname+"/api/reg/Bookmarks.svc/json/add",data:JSON.stringify(s)}).done(function(){var e='<p>This article was saved to <a href="https://member.webmd.com/bookmarks.aspx">"My WebMD Pages"</a>.<br> Click "My Profile" in the upper right of your page to access.</p>';webmd.overlay.open({width:"550px",html:e})}).fail(function(e){var t="There was an error in your request. Please try again later.",n=jQuery.parseJSON(e.responseText);n.code==-1e3?t="This page has already been saved":n.code==-1001?t="There is already a saved item with that name.  Please type a new name.":n.code==-1002?t="You have exceeded the max amount of bookmarks.  Please delete some of the above in order to add more.":n.code===-2&&(t="Your session has ended. To protect your privacy, please login again."),webmd.overlay.open({html:'<p class="error">'+t+"</p>"})})}else{var o='<p>Please <a href="http://member'+webmd.url.getEnv()+"."+webmd.url.getSLD()+"?appid="+r+"&returl="+n.location.href+'">sign in</a> to save this article.</p>';webmd.overlay.open({width:"550px",html:o,onOpen:function(){e("body").attr("data-content-masked","true")},onClosed:function(){e("body").removeAttr("data-content-masked")}})}}}}};e.extend(y.prototype,{init:function(){this.buildSocialShare(this.settings,this.element)},buildSocialShare:function(r,i){var s=e(r.baseHtmlTmpl),o,u="",a;for(var f=0;f<r.shareOrder.length;f++)o=r.shareOrder[f].toLowerCase(),o!=="listen"&&(u=r.shareOptions[o],a=e(u.htmlTmpl),s.append(a));e(i).append(s),r.shareOrder.indexOf("listen")>0&&(t.rsConf={general:{usePost:!0}},e(i).append(r.shareOptions.listen.htmlTmpl),e(".rsbtn a").on("click",function(e){r.shareOptions.listen.clickHandler()})),this.bindClickHandler(r,i)},bindClickHandler:function(n,r){e(r).on("click",".plugin-socialshare-link",function(t){var r=e(this).data("sharetype");n.shareOptions[r].clickHandler(n),t.preventDefault()})}}),e.fn[i]=function(t){return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new y(this,t))})}}(jQuery,window,document),webmd.m.socialshareplugin}),define("webmd.m.socialshareplugin.min",function(){});