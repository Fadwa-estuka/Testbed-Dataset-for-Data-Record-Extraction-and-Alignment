!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.airbrakeJs||(b.airbrakeJs={})).Client=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(c){var d,e,f,g;a("./internal/compat"),g=a("./internal/merge"),e=a("./internal/promise"),f=function(a){return function(b,c,d,e,f){return a.notify(f?f:{error:{message:b,fileName:c,lineNumber:d,columnNumber:e||0}})}},d=function(){function b(b){var d;null==b&&(b={}),this._projectId=b.projectId||0,this._projectKey=b.projectKey||"",this._host=b.host||"https://api.airbrake.io",this._processor=null,this._reporters=[],this._filters=[],this._processor=void 0!==b.processor?b.processor:a("./processors/stack"),void 0!==b.reporter?this.addReporter(b.reporter):(d="withCredentials"in new c.XMLHttpRequest?"compat":"jsonp",this.addReporter(d)),this.addFilter(a("./internal/default_filter")),this.onerror=f(this),null==c.onerror&&(c.onerror=this.onerror)}return b.prototype.setProject=function(a,b){return this._projectId=a,this._projectKey=b},b.prototype.setHost=function(a){return this._host=a},b.prototype.addContext=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addContext is deprecated, please use addFilter"),this.addFilter(function(b){return b.context=g({},a,b.context),b})},b.prototype.setEnvironmentName=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: setEnvironmentName is deprecated, please use addFilter"),this.addFilter(function(b){return null==b.context.environment&&(b.context.environment=a),b})},b.prototype.addParams=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addParams is deprecated, please use addFilter"),this.addFilter(function(b){return b.params=g({},a,b.params),b})},b.prototype.addEnvironment=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addEnvironment is deprecated, please use addFilter"),this.addFilter(function(b){return b.environment=g({},a,b.environment),b})},b.prototype.addSession=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: addSession is deprecated, please use addFilter"),this.addFilter(function(b){return b.session=g({},a,b.session),b})},b.prototype.addReporter=function(b){switch(b){case"compat":b=a("./reporters/compat");break;case"xhr":b=a("./reporters/xhr");break;case"jsonp":b=a("./reporters/jsonp")}return this._reporters.push(b)},b.prototype.addFilter=function(a){return this._filters.push(a)},b.prototype.notify=function(a){var b,d,f;return b={language:"JavaScript",sourceMapEnabled:!0},(null!=(f=c.navigator)?f.userAgent:void 0)&&(b.userAgent=c.navigator.userAgent),c.location&&(b.url=String(c.location),b.rootDirectory=c.location.protocol+"//"+c.location.host),d=new e,this._processor(a.error||a,function(c){return function(e,f){var h,i,j,k,l,m,n,o,p,q,r;for(n={errors:[f],context:g(b,a.context),params:a.params||{},environment:a.environment||{},session:a.session||{}},n.context.notifier={name:"airbrake-js-"+e,version:"0.5.8",url:"https://github.com/airbrake/airbrake-js"},p=c._filters,i=0,k=p.length;k>i;i++){if(h=p[i],m=h(n),null===m||m===!1)return;null!=m.errors?n=m:"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: filter must return notice or null to ignore the notice")}for(o={projectId:c._projectId,projectKey:c._projectKey,host:c._host},q=c._reporters,j=0,l=q.length;l>j;j++)(r=q[j])(n,o,d)}}(this)),d},b.prototype.push=function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("airbrake: push is deprecated, please use notify"),this.notify(a)},b.prototype._wrapArguments=function(a){var b,c,d,e;for(c=d=0,e=a.length;e>d;c=++d)b=a[c],"function"==typeof b&&(a[c]=this.wrap(b));return a},b.prototype.wrap=function(a){var b,c,d;if(a.__airbrake__)return a;d=this,b=function(){var b,c;b=d._wrapArguments(arguments);try{return a.apply(this,b)}catch(e){return c=e,b=Array.prototype.slice.call(arguments),d.notify({error:c,params:{arguments:b}}),null}};for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b.__airbrake__=!0,b.__inner__=a,b},b}(),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./internal/compat":2,"./internal/default_filter":3,"./internal/merge":5,"./internal/promise":6,"./processors/stack":8,"./reporters/compat":9,"./reporters/jsonp":10,"./reporters/xhr":11}],2:[function(){var a;null==(a=Array.prototype).indexOf&&(a.indexOf=function(a,b){var c,d,e,f;for(b=b||0,c=d=e=b,f=this.length;f>=e?f>d:d>f;c=f>=e?++d:--d)if(this[c]===a)return c;return-1})},{}],3:[function(a,b){var c,d,e=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};c=["Script error","Script error."],d=function(a){var b;return b=a.errors[0].message,e.call(c,b)>=0?null:a},b.exports=d},{}],4:[function(a,b){var c,d,e;d=a("./truncate"),e=function(a,b){var c,e;null==b&&(b=1e3),c={};for(e in a)c[e]=d(a[e],b=b);return c},c=function(a,b,c){var d,f;for(null==b&&(b=1e3),null==c&&(c=64e3);;){if(a.params=e(a.params,b=b),a.environment=e(a.environment,b=b),a.session=e(a.session,b=b),f=JSON.stringify(a),f.length<c)return f;if(0===b)break;b=Math.floor(b/2)}throw d=new Error("airbrake-js: cannot jsonify notice (length="+f.length+" maxLength="+c+")"),d.params={json:f.slice(0,+Math.floor(b/2)+1||9e9)+"..."},d},b.exports=c},{"./truncate":7}],5:[function(a,b){var c;c=function(){var a,b,c,d,e,f;for(f=Array.prototype.slice.call(arguments),a=f.shift()||{},b=0,d=f.length;d>b;b++){e=f[b];for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a},b.exports=c},{}],6:[function(a,b){var c;c=function(){function a(a){var b,c;this._onResolved=[],this._onRejected=[],c=function(a){return function(){return a.resolve.apply(a,arguments)}}(this),b=function(a){return function(){return a.reject.apply(a,arguments)}}(this),null!=a&&a(c,b)}return a.prototype.then=function(a,b){return a&&(null!=this._resolvedWith&&a(this._resolvedWith),this._onResolved.push(a)),b&&(null!=this._rejectedWith&&b(this._resolvedWith),this._onRejected.push(b)),this},a.prototype["catch"]=function(a){return null!=this._rejectedWith&&a(this._rejectedWith),this._onRejected.push(a),this},a.prototype.resolve=function(){var a,b,c,d;for(this._resolvedWith=arguments,d=this._onResolved,b=0,c=d.length;c>b;b++)a=d[b],a.apply(this,this._resolvedWith);return this},a.prototype.reject=function(){var a,b,c,d;for(this._rejectedWith=arguments,d=this._onRejected,b=0,c=d.length;c>b;b++)a=d[b],a.apply(this,this._rejectedWith);return this},a}(),b.exports=c},{}],7:[function(a,b){var c,d;c=function(a,b){var c;try{return a[b]}catch(d){return void(c=d)}},d=function(a,b,d){var e,f,g,h,i;return null==b&&(b=1e3),null==d&&(d=5),h=0,g=[],i=[],f=function(a){var b,d,e,f,h;for(d=i.indexOf(a),f=[g[d]],b=e=h=d;0>=h?0>=e:e>=0;b=0>=h?++e:--e)i[b]&&c(i[b],f[0])===a&&(a=i[b],f.unshift(g[b]));return"~"+f.join(".")},(e=function(a,j,k){var l,m,n,o,p,q;if(null==j&&(j=""),null==k&&(k=0),h++,h>b)return"[Truncated]";if(null===a||void 0===a)return a;switch(typeof a){case"boolean":case"number":case"string":case"function":return a;case"object":break;default:return String(a)}if(a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(i.indexOf(a)>=0)return"[Circular "+f(a)+"]";if(k++,k>d)return"[Truncated]";if(g.push(j),i.push(a),h--,"[object Array]"===Object.prototype.toString.apply(a)){for(l=[],n=o=0,p=a.length;p>o&&(m=a[n],h++,!(h>=b));n=++o)l.push(e(m,j=n,k));return l}l={};for(j in a)if(Object.prototype.hasOwnProperty.call(a,j)){if(h++,h>=b)break;q=c(a,j),void 0!==q&&(l[j]=e(q,j=j,k))}return l})(a)},b.exports=d},{}],8:[function(a,b){var c,d,e;d=[{name:"v8",re:/^\s*at\s(.+?)\s\((?:(?:(.+):(\d+):(\d+))|(.+))\)$/,fn:function(a){return{"function":a[1],file:a[2]||a[5],line:a[3]&&parseInt(a[3],10)||0,column:a[4]&&parseInt(a[4],10)||0}}},{name:"firefox30",re:/^(.*)@(.+):(\d+):(\d+)$/,fn:function(a){var b,c,d,e;return d=a[1],c=a[2],b=/^(\S+)\s(line\s\d+\s>\seval.*)$/,(e=c.match(b))&&(d=d.length>0?d+" "+e[2]:e[2],c=e[1]),{"function":d,file:c,line:parseInt(a[3],10),column:parseInt(a[4],10)}}},{name:"firefox14",re:/^(.*)@(.+):(\d+)$/,fn:function(a,b,c){var d;return d=0===b?c.columnNumber||0:0,{"function":a[1],file:a[2],line:parseInt(a[3],10),column:d}}},{name:"v8-short",re:/^\s*at\s(.+):(\d+):(\d+)$/,fn:function(a){return{"function":"",file:a[1],line:parseInt(a[2],10),column:parseInt(a[3],10)}}},{name:"phantomjs",re:/^\s*at\s(.+):(\d+)$/,fn:function(a){return{"function":"",file:a[1],line:parseInt(a[2],10),column:0}}},{name:"default",re:/.+/,fn:function(a){return{"function":a[0],file:"",line:0,column:0}}}],e=/^\S+:\s.+$/,c=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(o="nostack",q=a.stack||"",l=q.split("\n"),c=[],f=g=0,i=l.length;i>g;f=++g)if(k=l[f],""!==k)for(h=0,j=d.length;j>h;h++)if(p=d[h],m=k.match(p.re)){o=p.name,c.push(p.fn(m,f,a));break}return("v8"===o||"v8-short"===o)&&c.length>0&&c[0]["function"].match(e)&&(c=c.slice(1)),0!==c.length||null==a.fileName&&null==a.lineNumber&&null==a.columnNumber||c.push({"function":"",file:a.fileName||"",line:parseInt(a.lineNumber,10)||0,column:parseInt(a.columnNumber,10)||0}),0!==c.length||null==a.filename&&null==a.lineno&&null==a.column&&null==a.colno||c.push({"function":"",file:a.filename||"",line:parseInt(a.lineno,10)||0,column:parseInt(a.column||a.colno,10)||0}),n=null!=a.message?a.message:String(a),null!=a.name&&""!==a.name?(r=a.name,n=r+": "+n):(s=/^Uncaught\s(.+?):\s.+$/,m=n.match(s),r=m?m[1]:""),b(o,{type:r,message:n,backtrace:c})},b.exports=c},{}],9:[function(a,b){(function(c){var d,e;d=a("../internal/jsonify_notice"),e=function(a,b,e){var f,g,h;return h=b.host+"/api/v3/projects/"+b.projectId+"/create-notice?key="+b.projectKey,f=d(a),g=new c.XMLHttpRequest,g.open("POST",h,!0),g.send(f),g.onreadystatechange=function(){var b;return 4===g.readyState&&200===g.status?(b=JSON.parse(g.responseText),a.id=b.id,e.resolve(a)):void 0}},b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/jsonify_notice":4}],10:[function(a,b){(function(c){var d,e,f;e=a("../internal/jsonify_notice"),d=0,f=function(a,b,f){var g,h,i,j,k,l,m;return d++,g="airbrakeCb"+String(d),c[g]=function(b){var d;a.id=b.id,f.resolve(a);try{return delete c[g]}catch(e){return d=e,c[g]=void 0}},j=encodeURIComponent(e(a)),m=b.host+"/api/v3/projects/"+b.projectId+"/create-notice?key="+b.projectKey+"&callback="+g+"&body="+j,h=c.document,i=h.getElementsByTagName("head")[0],l=h.createElement("script"),l.src=m,k=function(){return i.removeChild(l)},l.onload=k,l.onerror=k,i.appendChild(l)},b.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/jsonify_notice":4}],11:[function(a,b){(function(c){var d,e;d=a("../internal/jsonify_notice"),e=function(a,b,e){var f,g,h;return h=b.host+"/api/v3/projects/"+b.projectId+"/notices?key="+b.projectKey,f=d(a),g=new c.XMLHttpRequest,g.open("POST",h,!0),g.setRequestHeader("Content-Type","application/json"),g.send(f),g.onreadystatechange=function(){var b;return 4===g.readyState&&201===g.status?(b=JSON.parse(g.responseText),a.id=b.id,e.resolve(a)):void 0}},b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/jsonify_notice":4}]},{},[1])(1)});
//# sourceMappingURL=client.min.js.map