var mboxCurrent=mboxFactories.get('default').get('target-global-mbox',0);mboxCurrent.setEventTime('include.start');document.write('<div style="visibility: hidden; display: none" id="mboxImported-default-target-global-mbox-0">');_AT.applyWhenReady([{"action":"customCode","selector":"BODY > *:eq(0)","content":"<!-- \n    Campaign Name: $ { campaign.name encode = \"escape\" }\n    Experience Name: $ { campaign.recipe.name encode = \"escape\" }\n-->    \n\n<script type=\"text/javascript\">    \n    'use strict';\n    //Anonymous function\n    (function () {\t\n      \n          var injMbox = injMbox || {\n                timeout:3000000,\n                timer:20,\n\n                // Checking Page call\n                init: function () {\n                    if(location.href.indexOf('/shop/') != -1 && location.href.indexOf('/shop/product/') == -1){\n                        injMbox.browseAndSearchPage();\n                        injMbox.observeProds();   \n                    } else if(location.href.indexOf('/shop/product/') != -1){\n                        injMbox.browseAndSearchPage();\n                    }\n                },\n\n                // Browse and Search Page\n                browseAndSearchPage: function () { \n                    var freeShipText = jQuery(\".badge:contains('FREE SHIP')\");\n\n                    if(freeShipText.length > 0){ \n                          jQuery.each(freeShipText, function(index){\n                            jQuery(this).css(\"display\", \"none\");\n                            injMbox.setCoremetrics(); \n                          });\n                        } else {\n                          injMbox.timeout -= injMbox.timer;\n                          if (injMbox.timeout > injMbox.timer) {\n                              setTimeout(injMbox.browseAndSearchPage, injMbox.timer);\n                          }\n                      }\n                },\n\n                // Set Coremetrics\n                setCoremetrics: function(){\n                    if(sessionStorage.getItem(\"INTLHideFS_Desktop PROD coremetricFlag\",\"true\") != 'true'){\n                        sessionStorage.setItem(\"INTLHideFS_Desktop PROD coremetricFlag\",\"true\");\n                        cmCreatePageElementTag(\"Treatment\",\"INTLHideFS_Desktop PROD\",\"Test\");\n                    }\n                },\n\n               // Handle the Pagination Here\n               observeProds: function () {\n                // Code to watch for dom changes / new ajax product list loads\n                var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n                var list = document.getElementById('thumbnails');\n                var arrayOfIds = [];\n\n               var observer = new MutationObserver(function(mutations) {                       \n                        var list_values;\n                        mutations.forEach(function(mutation) {\n                           \n                            if (mutation.type === 'childList') {\n                                list_values = [].slice.call(mutation.addedNodes)\n                                    .map( function(node) { return node.id; })\n                                    .filter( function(s) {\n                                        if (s === '') {\n                                            return false;\n                                        }\n                                        else {\n                                            return true;\n                                        }\n                                    });\n                                if (list_values.length > 0) {\n                                    arrayOfIds.push(list_values[0]);\n                                }\n                            }\n\n                        });\n                        if(location.href.indexOf('/shop/') != -1 && location.href.indexOf('/shop/product/') == -1){                     \t\n                            injMbox.browseAndSearchPage();    \n                        }\n                        arrayOfIds.length = 0;\n                        });\n\n\n                observer.observe(list, {                   \n                    childList: true\n                });\n             },\n              \n            // Check for element to exist on the page before doing any manipulation\n            check: function () {\n                if (jQuery('body').length > 0) {\n                    injMbox.init();\n                    } else {\n                        injMbox.timeout -= injMbox.timer;\n                        if (injMbox.timeout > injMbox.timer) {\n                            setTimeout(injMbox.check, injMbox.timer);\n                        }\n                    }\n                }\n            };\n\n           // Call the check function\n            // Can also check for jQuery or dom Ready events\n            var checkJQuery = function () {\n                if ('undefined' === typeof window.jQuery) {\n                    if (injMbox.timeout > injMbox.timer) {\n                        setTimeout(checkJQuery, injMbox.timer);\n                    }\n                    injMbox.timeout -= injMbox.timer;\n                    return;\n                }\n                injMbox.check();\n            };\n\n            checkJQuery();\n    })(); \n</script>"}]);document.write('<script type=\"text\/javascript\">\r\nif(location.href.indexOf(\'m.macys.com\')== -1){\r\n  window.test_name= \'INTLHideFS_Desktop PROD\';\r\n  window.tntRecipeName= \'Test\';\r\n}\r\n<\/script>');document.write('</div>');mboxCurrent.setEventTime('include.end');mboxFactories.get('default').get('target-global-mbox',0).loaded();