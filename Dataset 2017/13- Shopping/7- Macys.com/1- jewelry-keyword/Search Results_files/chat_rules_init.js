function setProductID(a){if("object"!=typeof b||b.length<=0){var b=[],c={ID:0,chats:!1,hours:!1,queuing:!1};b.push(c)}if(index=b.map(function(a){return a.ID}).indexOf(parseInt(a)),"undefined"==typeof rn_calledArray||null===rn_calledArray){var c={ID:parseInt(a),chats:!1,hours:!1,queuing:!1};b.push(c),rn_calledArray=[],rn_calledArray.push(a);var d=document.createElement("script");d.id="chat-jsonp-script-tag",d.src="https://www.customerservice-macys.com/cgi-bin/macys.cfg/php/custom/chattest.php?ruleProductID="+a+"&callback=processJson",d.async=!1,d.type="text/javascript",document.body.appendChild(d),macysns.calledChatTest=1}else{var e=0;for(i=0;i<rn_calledArray.length;i++)rn_calledArray[i]===a&&(e=2);if(0===e){var c={ID:parseInt(a),chats:!1,hours:!1,queuing:!1};b.push(c),rn_calledArray.push(a);var d=document.createElement("script");d.id="chat-jsonp-script-tag",d.src="https://www.customerservice-macys.com/cgi-bin/macys.cfg/php/custom/chattest.php?ruleProductID="+a+"&callback=processJson",d.async=!1,d.type="text/javascript",document.body.appendChild(d),macysns.calledChatTest=1}}return macysns.pageProductID=toString(a),!0}function preload(){return!0}function processJson(a){if("object"!=typeof rn_prodArray)return!1;index=rn_prodArray.map(function(a){return a.ID}).indexOf(parseInt(a.key5)),index<0||rn_prodArray.splice(index,1);var b={ID:parseInt(a.key5),chats:a.key2,hours:a.key4,queuing:a.key3};rn_prodArray.push(b),macysns.PassProductID=a.key5,macysns.displaychat=a.key1,macysns.allchatnotoff=a.key2,macysns.allowqueuing=a.key3,macysns.withinChatHours=a.key4}function allChatOffersOff(a){if("object"!=typeof rn_prodArray||rn_prodArray.length<=0)return!1;var b;if("undefined"!==a){for(i=0;i<rn_prodArray.length;i++){var c=rn_prodArray[i];c.ID==a&&(b=rn_prodArray[i],i=rn_prodArray.length+1)}return!(!rn_prodArray||!b||b.chats!==!0)}return!1}function allowQueuing(a){if("object"!=typeof rn_prodArray||rn_prodArray.length<=0)return!1;var b;if("undefined"!==a){for(i=0;i<rn_prodArray.length;i++){var c=rn_prodArray[i];c.ID==a&&(b=rn_prodArray[i],i=rn_prodArray.length+1)}return!(!rn_prodArray||!b||b.queuing!==!0)}return!1}function NoQueuing(a){if("object"!=typeof rn_prodArray||rn_prodArray.length<=0)return!1;var b;if("undefined"!=a){for(i=0;i<rn_prodArray.length;i++){var c=rn_prodArray[i];c.ID==a&&(b=rn_prodArray[i],i=rn_prodArray.length+1)}return!(!rn_prodArray||!b||b.queuing!==!1)}return!1}function withinChatHours(a){if("object"!=typeof rn_prodArray||rn_prodArray.length<=0)return!1;var b;if("undefined"!=a){for(i=0;i<rn_prodArray.length;i++){var c=rn_prodArray[i];c.ID==a&&(b=rn_prodArray[i],i=rn_prodArray.length+1)}return!(!rn_prodArray||!b||b.hours!==!0)}return!1}function outsideChatHours(a){if("object"!=typeof rn_prodArray||rn_prodArray.length<=0)return!1;var b;if("undefined"!=a){for(i=0;i<rn_prodArray.length;i++){var c=rn_prodArray[i];c.ID==a&&(b=rn_prodArray[i],i=rn_prodArray.length+1)}return!(!rn_prodArray||!b||b.hours!==!1)}return!1}function elementExists(a){return!!document.getElementById(a)}function rnRCadd(a,b,c,d){if($("#"+a).length>0||"new"==a){if(0==$("#rnowChatLinkContainer_"+b).length){var e='<div id="rnowChatLinkContainer_'+b+'"><div id="rnowChatLink_'+b+'" ><div id="rnowChatLinkInfo_'+b+'"/></div></div>';switch(d){case"append":0==$("#rnowChatLinkContainer_"+b).length?0!==$("#qnasSummary").length?$(e).insertBefore("#qnasSummary"):0!==$("#pdpreviews").length&&$("#pdpreviews").prepend(e):$("#"+a).append(e);break;case"after":$(e).insertAfter("#"+a);break;case"before":$(e).insertBefore("#"+a);break;default:$("#"+a).prepend(e)}}return"string"==typeof c&&$("#rnowChatLinkContainer_"+b).addClass("rnowRAChat_"+c),!0}return!1}function minSalePrice(a){try{return Number(JSON.parse(document.getElementById("productMainData").textContent).salePrice)>=a}catch(a){return console.log("-- salePrice variable does NOT exist ---"),!1}}if(window.console||(window.console={}),window.console.log||(window.console.log=function(){}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),"filter"in Array.prototype||(Array.prototype.filter=function(a,b){for(var d,c=[],e=0,f=this.length;e<f;e++)e in this&&a.call(b,d=this[e],e,this)&&c.push(d);return c}),"map"in Array.prototype||(Array.prototype.map=function(a,b){for(var c=new Array(this.length),d=0,e=this.length;d<e;d++)d in this&&(c[d]=a.call(b,this[d],d,this));return c}),console.log("-- chat_rules_init.min.js loaded --"),"object"!=typeof macysns){var macysns={};macysns.calledChatTest=0,macysns.x=0;var PAChatimages=new Array;preload("https://www.macys.com/dyn_img/banners/chat-btn.jpg","https://www.macys.com/dyn_img/banners/no-btn.jpg")}if("object"!=typeof rn_prodArray){var rn_prodArray=[],obj={ID:0,chats:!1,hours:!1,queuing:!1};rn_prodArray.push(obj)}deferredOfferDataCapture=function(){var a={83:"incidents.c$bagid",84:"incidents.c$carttotal",86:"incidents.c$customerid",87:"incidents.c$credit_dept",88:"incidents.c$sales_dept",89:"incidents.c$sales_proactive_dept",90:"incidents.c$chat_page_url",91:"incidents.c$chat_error_message",92:"incidents.c$chat_productids",93:"incidents.c$proactreact",94:"incidents.c$chat_accepted_domain_var",95:"incidents.c$detect_reactive_chat",96:"incidents.c$chat_error_message_long"},b=window[_vsq._widgets[0]];if(b){var c=_vsq._dataFields,d="";for(var e in c)if(c[e]&&c[e].length>0){if(0===e.indexOf("contacts.")||0===e.indexOf("incidents."))continue;d+="/"+a[e]+"/"+encodeURIComponent(c[e])}b.data.custom_fields_in_url=d,b.data.common_fields_in_url="",c["contacts.first_name"]&&""!=c["contacts.first_name"]&&(b.data.common_fields_in_url+="/contacts.first_name/"+encodeURIComponent(c["contacts.first_name"])),c["contacts.last_name"]&&""!=c["contacts.last_name"]&&(b.data.common_fields_in_url+="/contacts.last_name/"+encodeURIComponent(c["contacts.last_name"])),c["contacts.email"]&&""!=c["contacts.email"]&&(b.data.common_fields_in_url+="/contacts.email/"+encodeURIComponent(c["contacts.email"]))}if(_vsq&&_vsq._spacWidgets[0]&&_vsq._spacWidgets[0].instanceId){var f=window[_vsq._spacWidgets[0].instanceId];if(f){var g=new RightNow.Client.EventObject(f.instanceId,_vsq._spacWidgets[0].instanceId),c=_vsq._dataFields,h={};for(var e in c)c[e]&&"object"!=typeof c[e]&&"function"!=typeof c[e]&&"symbol"!=typeof c[e]&&(0===e.indexOf("contacts.")||0===e.indexOf("incidents.")?h[e]=encodeURIComponent(c[e]):h[e]=c[e]);g.data={dataFields:h},RightNow.Client.Event.evt_updateCustomFieldsRequest.fire(g)}}};try{if("object"!=typeof MACYS.brightTag.category&&(MACYS.brightTag.category=new Object),"object"!=typeof MACYS.brightTag.product&&(MACYS.brightTag.product=new Object,"object"==typeof category&&(MACYS.brightTag.product.productCategoryID=category.categoryID),"object"==typeof MACYS.brightTag.product.productCategoryID&&(category.categoryID=MACYS.brightTag.product.productCategoryID),"string"!=typeof chatSalesDepartmentId))var chatSalesDepartmentId=MACYS.brightTag.product.productCategoryID;"object"!=typeof MACYS.brightTag.chat&&(MACYS.brightTag.chat=new Object,"string"==typeof chatUserEmail&&(MACYS.brightTag.chat.email=chatUserEmail),"string"==typeof chatUserFirstName&&(MACYS.brightTag.chat.firstName=chatUserFirstName),"string"==typeof chatUserLastName&&(MACYS.brightTag.chat.lastName=chatUserLastName),"string"==typeof chatBagId&&(MACYS.brightTag.chat.bagId=chatBagId)),null!==document.getElementById("productMainData")&&0==isNaN(Number(JSON.parse(document.getElementById("productMainData").textContent).salePrice))&&(MACYS.brightTag.product.salePrice=Number(JSON.parse(document.getElementById("productMainData").textContent).salePrice)),MACYS.brightTag.chat.domain=location.hostname.replace(/^www1/,"www"),MACYS.brightTag.chat.url=location.href.substr(0,255).toString()}catch(a){console.log("-- brighttag bridge contains unexpeted entry ---"+a)}try{}catch(a){}