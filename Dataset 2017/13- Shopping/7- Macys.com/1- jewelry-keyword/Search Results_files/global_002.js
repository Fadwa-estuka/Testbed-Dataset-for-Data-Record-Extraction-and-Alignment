MACYS.namespace("MACYS.IntlShipping");MACYS.IntlShipping=(function(){var k=MACYS.IntlShipping;var c=MACYS.util.Cookie.get("shippingCountry"),h,b=YAHOO.util.Dom,i=YAHOO.util.Event,f=k.countryMap,e=k.currencyMap;if(f&&e){f=f[c];h=e[f.defaultCurrencyCode];if(MACYS.util.Cookie.get("currency")){h=MACYS.util.Cookie.get("currency")}else{h=f.defaultCurrencyCode;var j=this.location.toString();var d=j.indexOf(".com")+4;var a=j.substring(j.indexOf("."),d);MACYS.util.Cookie.expires=new Date(new Date().getTime()+315360000000);MACYS.util.Cookie.domain=a;MACYS.util.Cookie.set("currency",h)}}k.colorwayConvertSinglePrice=function(n,t){var r=typeof(n)==="string"?n:n.innerHTML;if(!f||!e){return r}var l,o,p,s,m,q;m=function(u){u=u.toFixed((l<2)?2:l);return u.replace(/\d{4}\./,function(v){return v.charAt(0)+","+v.substring(1,5)})};q=function(v){var u=parseFloat(v.replace(/,/g,""))*e[h].exchangeRate*s;u=Math.round(u*Math.pow(10,l))/Math.pow(10,l);return u};if(!h||!e[h]){return}s=t===true?1:f.landedCostCoefficient;l=e[h].roundMethod;p=r.match(/[\d,]+[\.][\d]+/g);r=r.replace(/[$]/,h+" ");for(o=0;o<p.length;o++){r=r.replace(p[o],m(q(p[o])))}return typeof(n)==="string"?r:n.innerHTML=r};k.convertSinglePrice=function(r,o){var s;if(typeof(r)==="string"){s=r}else{s=r.innerHTML}if(f&&e){var m;var q,p,n;var l=function(t){return t.replace(/\d{4}\./,function(u){return u.charAt(0)+","+u.substring(1,5)})};if(h){if(o===true){n=1}else{n=f.landedCostCoefficient}m=e[h].roundMethod;if(e[h]){if(s.match(/[$][\s]?[\d\.,]+ - [\d\.,]+/)){p=s.match(/[\d,]+[\.][\d]+/g);for(q=0;q<2;q++){p[q]=parseFloat(p[q].replace(/,/g,""))*e[h].exchangeRate*n;p[q]=Math.round(p[q]*Math.pow(10,m))/Math.pow(10,m)}s=s.replace((/[$][\d\.,]+ - [\d\.,]+/),h+" "+l(p[0].toFixed((m<2)?2:m))+" - "+l(p[1].toFixed((m<2)?2:m)))}else{p=s.match(/[$][\s]?[\d,]+[\.][\d]+|[$][\s]?[\d,]+/g);if(p){for(q=0;q<p.length;q++){p[q]=p[q].replace(/,/g,"").replace("$","");p[q]=p[q]*e[h].exchangeRate*n;p[q]=Math.round(p[q]*Math.pow(10,m))/Math.pow(10,m)}q=0;s=s.replace((/[$][\s]?[\d,]+[\.][\d]+|[$][\s]?[\d,]+/g),function(){return h+" "+l(p[q++].toFixed(m<2?2:m))})}}if(typeof(r)==="string"){return s}else{r.innerHTML=s}}}}else{if(typeof(r)==="string"){return r}}};k.convertSinglePriceExcludeLCP=function(l){k.convertSinglePrice(l,true)};var g=function(m,l){b.getElementsBy(function(){return true},l,m,k.convertSinglePrice)};k.convertPrices=function(l){g(l,"span")};k.convertAnchorPrices=function(l){g(l,"a")};k.convertPricesList=function(l){g(l,"li")};k.getCurrencyCode=function(){if(c&&c!=="US"){return h}return"$"};k.suppressNonIShipFeatures=function(){i.onContentReady("thumbnails",function(){b.getElementsByClassName("rebateOffer","span","macysGlobalLayout",this.suppressRebateLinks);b.getElementsByClassName("availableInStore","div","macysGlobalLayout",function(l){l.innerHTML=""})})};k.suppressRebateLinks=function(n){if(c&&c!=="US"&&n){var o=n.parentNode;if(!o){n.style.display="none"}else{o.removeChild(n);var m=o.getElementsByTagName("span");if(m&&m.length<1){o.style.display="none"}else{var l=o.getElementsByTagName("br");if(l){l[0].style.display="none"}}}}};k.internationalPDPReviews=function(){var p=b.get("BVRRContainer");if(p&&p.innerHTML!==""){var n=b.getElementsByClassName("BVDI_FV","div","BVRRContentContainerID");if(n){b.setStyle(n,"visibility","hidden");var l=b.getElementsByClassName("BVRRRatingSummaryLinkWrite","div","BVRRContentContainerID");if(l){b.setStyle(l,"visibility","hidden")}if(b.get("BVRRRatingSummaryLinkWriteFirstID")){b.get("BVRRRatingSummaryLinkWriteFirstID").style.display="none"}}var q=b.getElementsByClassName("BVRRPromo","div","BVRRContentContainerID");if(q){b.setStyle(q,"visibility","hidden")}var t=b.getElementsByClassName("BVRRSocialBookmarkingLinks","div","socialLinks");if(t&&t.length===0){var s=b.getElementsByClassName("BVRRRatingSummaryStyle2","div","socialLinks")[0];if(s){s.style.display="none"}}var r=b.get("BVRRDisplayContentSubtitleID");if(r){r.style.display="none"}var o=b.get("BVRRDisplayContentNoReviewsID");if(o){o.style.display="none";var m=b.get("pdpNoreviewsText");YAHOO.util.Dom.removeClass(m,"hidden")}}};k.toProperCase=function(l){return l.toLowerCase().replace(/^(.)|\s(.)/g,function(m){return m.toUpperCase()})};(function(){if(c&&c!=="US"){i.onContentReady("productDescription",function(l){b.getElementsByClassName("standardProdPricingGroup","div","productDescription",k.convertPrices);b.getElementsByClassName("bulletLinks","a","bullets",k.convertSinglePrice);b.getElementsByClassName("second-range","span",l,k.colorwayConvertSinglePrice)});i.onContentReady("collectionItems",function(){b.getElementsByClassName("productPrice","div","collectionItems",k.convertPrices)});i.onContentReady("pdpoffers",function(){var l=b.getElementsByClassName("specialOffers","div","pdpoffers");if(l){b.getElementsByClassName("specialOffers","div","pdpoffers",k.convertSinglePrice)}});i.onContentReady("suppressCountry",function(){if(f){var l=b.getElementsByClassName("suppressCountry","span");if(l){for(var m=0;m<=l.length;m++){l[m].innerHTML=k.toProperCase(f.countryName).replace("And","and")}}}});i.onContentReady("BVRRContentContainerID",function(){k.internationalPDPReviews()});i.onContentReady("productDescription",function(){b.getElementsByClassName("colorway","span","macysProdInfo",function(l){b.getElementsByClassName("fullrange","span",b.getAncestorByTagName(l,"div"),k.colorwayConvertSinglePrice)});b.getElementsByClassName("colorway","ul","pdpAttributes",function(l){b.getElementsByClassName("price","li",l,k.convertPrices)})});i.onContentReady("memberProductList",function(){b.getElementsByClassName("memberShortDesc","div",b.get("memberProductList"),function(l){b.getElementsByClassName("fullrange colorway","span",l,k.colorwayConvertSinglePrice)})});i.onContentReady("thumbnails",function(){b.getElementsByClassName("colorway-price","span","macysGlobalLayout",function(l){b.getElementsByClassName("second-range","span",l,k.colorwayConvertSinglePrice)});b.getElementsByClassName("prices","div","macysGlobalLayout",k.convertPrices);b.getElementsByClassName("availableInStore","div","macysGlobalLayout",k.suppressFindItInStore);b.getElementsByClassName("offerDescription","span","macysGlobalLayout",k.convertSinglePrice);b.getElementsByClassName("rebateOffer","span","macysGlobalLayout",k.suppressRebateLinks)});i.onContentReady("facets",function(){b.getElementsByClassName("priceRange","li","priceRangeValue",k.convertPrices)});i.onContentReady("breadcrumbs",function(){b.getElementsByClassName("breadCrumb_productCount","div","breadcrumbs",k.convertPrices)});i.onContentReady("pdpBreadcrumb",function(){b.getElementsByClassName("breadCrumbs","div","pdpBreadcrumb",k.convertAnchorPrices)});i.onContentReady("nav_category",function(){b.getElementsByClassName("currentCategory","h1","nav_category",k.convertSinglePrice)});i.onContentReady("nav_category",function(){b.getElementsByClassName("parentCategories","div","nav_category",k.convertAnchorPrices)});i.onContentReady("globalContentContainer",function(){b.getElementsByClassName("nav_cat_sub_3","ul","globalContentContainer",k.convertPricesList)});i.onContentReady("facets",function(){b.getElementsByClassName("priceRangeValue1","div","facets",k.convertSinglePrice)});i.onContentReady("navigation",function(){b.getElementsByClassName("facet-item","a","navigation",k.convertSinglePrice)});i.onContentReady("pdpreviews",function(){var l=b.get("BVRRRatingSummaryLinkWriteFirstID");if(l){l.style.display="none"}});i.onContentReady("BVQASummaryBoxAskFirstQuestionID",function(){var m=b.get("bottomArea");if(YAHOO.util.Dom.getStyle(m,"display")=="none"){var l=b.get("BVQASummaryBoxAskFirstQuestionID");if(l){l.style.display="none"}}});i.onContentReady("macysGlobalLayout",function(){b.getElementsByClassName("prices","div","macysGlobalLayout",k.convertPrices)});i.onDOMReady(function(){if(document.title){document.title=k.convertSinglePrice(document.title)}var p=b.get("pdpshipping");if(p){var n=p.getElementsByTagName("li");if(n){var m,l;for(m=0,l=n.length;m<l;m++){if(n[m].id=="pdpSchargeMsg"){MACYS.IntlShipping.convertSinglePriceExcludeLCP(n[m])}else{MACYS.IntlShipping.convertSinglePrice(n[m])}}}}var o=b.getElementsByClassName("pdpSurchargeMsg","div");if(o){b.getElementsByClassName("pdpSurchargeMsg","div","pdpAttributes",k.convertSinglePriceExcludeLCP)}b.getElementsByClassName("prices","div","cmIO_PDPZ1",k.convertPrices)})}}());k.scanPage=function(m,l){m=m||"globalContentContainer";l=l||"";b.getElementsByClassName("iShip",l,m,k.convertSinglePrice);b.getElementsByClassName("iShipELCP",l,m,k.convertSinglePriceExcludeLCP)};return k}());
