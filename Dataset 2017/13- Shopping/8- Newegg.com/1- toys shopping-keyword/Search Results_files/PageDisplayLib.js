usingNamespace("Biz.Page.Display")["Initialize"] = function () {window.attachEvent("onload", (function () {Biz.Page.Display.AutoWidthProductCell();}));window.attachEvent("onresize", Biz.Page.Display.AutoWidthProductCell);};usingNamespace("Web.Template")["RolloverMenu2011"] = (function () {return {init: function () {NEG.run(function (require) {var rollOverMenu = require("NEG.Widget.RollOverMenu");var $ = require('Utility.JQuery');var modalOffset = function (m) {var offset = $(m).offset();if (!offset) {return;}var top = offset.top - $(document).scrollTop() + 14;var $menu = jQuery("#itmBrowseNav ul");var maxHeight = ($menu.height() + $menu.offset().top + 12) - $(document).scrollTop();var overflow = (top + $(m).height()) - maxHeight;if (overflow > 0) {offset.top = offset.top - overflow;if (offset.top < 75) offset.top = 75;$(m).offset(offset);}};var enterMenu = function (row) {var $row = $(row),$content = $(row).find(".jsFlyout");$row.addClass("active");modalOffset($content);NEG(row).trigger("Switch_Activate");};var leaveMenu = function (row) {var $row = $(row);$row.removeClass("active");};var slidePanel = function (dom) {var tmp = $(dom);tmp.addClass("active");var atnPrimary = $("a.atnPrimary", dom);var jsPanelList = $("div.jsPanel", dom);jsPanelList.css("display", "block");jsPanelList.mouseenter(function () {atnPrimary.focus();$(this).css("display", "block");});};$(".jsPanelRoot").each(function (i, dom) {var tmp = $(dom);tmp.mouseleave(function () {var jsPanelList = $("div.jsPanel", this);jsPanelList.css("display", "none");$(this).removeClass("active");var atnPrimaryList = $("a.atnPrimary", this);atnPrimaryList.blur();});tmp.click(function () {$(this).addClass("active");slidePanel(this);});var spanArrow = $("span.arrow:first", dom);spanArrow.mouseenter(function () {var root = $(this).parents(".jsPanelRoot:first");root.addClass("active");slidePanel(root[0]);});});rollOverMenu("#itmBrowseNav", {rowSelector: " ul li",submenuSelector: " .jsFlyout",activate: enterMenu,deactivate: leaveMenu,menuClick: function (e) {var target = e.target || e.srcElement;var domainID = $(target).parents(".jsFlyout").attr("domainid");if (domainID) {Biz.Common.saveDepaCookie(domainID, true);return true;}}});});}};})();usingNamespace("Web.Template")["RolloverMenu2015"] = (function () {var processNEGRun = function () {NEG.run(function (require) {var rollOverMenu = require("NEG.Widget.RollOverMenu");var $ = require('Utility.JQuery');var modalOffset = function (m) {var offset = $(m).offset();if (!offset) {return;}var $tabMain = jQuery('.main-nav-categories'),tabT = $tabMain.offset().top,tabH = $tabMain.innerHeight();jQuery('.main-nav-item').each(function () {var $self = jQuery(this),$menu = $self.children('.main-nav-item-body'),itemT = $self.offset().top,menuH = $menu.height();var itemD = itemT - tabT;if (tabH - itemD < menuH && itemD > menuH) {$menu.css({'top': 'auto','bottom': '5px'});} else if (tabH - itemD < menuH && itemD < menuH) {$menu.removeAttr('style');} else {itemD = itemD + 5;$menu.css({'top': itemD.toString() + 'px'});}});};var enterMenu = function (row) {var isMobile = /AppleWebKit.*Mobile/i.test(navigator.userAgent) || (/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent));var $row = $(row);if (isMobile) {var clicked = 0;$row.children('a.main-nav-item-title').click(function (event) {event.preventDefault();if (clicked == 1) {$row.removeClass("is-active");clicked = 0;} else {$row.addClass("is-active");clicked = 1;}});} else {$row.addClass("is-active");}$content = $(row).find(".main-nav-item-body");modalOffset($content);NEG(row).trigger("Switch_Activate");};var leaveMenu = function (row) {var $row = $(row);$row.removeClass("is-active");};rollOverMenu("#main-nav-menu-list", {rowSelector: " ul li.main-nav-item",activate: enterMenu,deactivate: leaveMenu});jQuery('.main-nav-item .main-nav-subItem').each(function () {var isMobile = /AppleWebKit.*Mobile/i.test(navigator.userAgent) || (/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent));if (isMobile) {return false;}var third_timer1, third_timer2;jQuery(this).mouseenter(function (e) {var self = jQuery(this);jQuery('body').unbind('click');if (self.hasClass('is-active')) {if (third_timer2) clearTimeout(third_timer2);} else {third_timer1 = setTimeout(function () {self.addClass('is-active').siblings().removeClass('is-active');var $second = self.parents('.main-nav-item-body');var $third = self.find('.main-nav-third-body');var $popup = $third.children('.popover');if (jQuery(window).width() - self.innerWidth() - self.offset().left < $popup.innerWidth()) {$third.removeClass('at-right').addClass('at-left');} else {$third.removeClass('at-left').addClass('at-right');}var t2 = $second.offset().top;var h2 = $second.innerHeight();var t3 = self.offset().top;var h3 = self.innerHeight();var h4 = $popup.innerHeight();$popup.css("top", function () {var defaultPos = Math.floor(h3 / 2 - h4 * 0.382),tail = h4 + defaultPos,temp = t3 - t2;if (temp < -defaultPos) {return -temp + 18;}temp = t2 + h2 - t3;if (h4 + 18 >= h2) {return -(t3 - t2) + 18;} else if (h4 < h2 && temp < tail + 18) {return defaultPos - tail + temp - 18;}return defaultPos;});}, 350);}}).mouseleave(function (e) {var self = jQuery(this);jQuery('body').bind('click', function () {self.removeClass('is-active');});if (third_timer1) {clearTimeout(third_timer1);if (self.hasClass('is-active')) {third_timer2 = setTimeout(function () {self.removeClass('is-active');jQuery('body').unbind('click');}, 350);}}});});});};var succeedProcess = function (data, textStatus) {processNEGRun();var content = jQuery(data).find('.main-nav-categories').html();jQuery('.main-nav-categories').html(content);};return {init: function () {if (jQuery('#menu_async').length == 0) {processNEGRun();} else {jQuery.ajax({url: Web.Config.Environment.Url.CDN + "Common/Ajax/Navigation.aspx",dataType: "jsonp",cache: true,jsonpCallback: "Web.Template.RolloverMenu2015.JsonpCallBack"});}},JsonpCallBack: function (data, textStatus) {succeedProcess(data, textStatus);}};})();usingNamespace("Web.Template")["PageHeaderDropDownMenu"] = (function ($) {return {init: function () {$('.form-select').delegate('select', 'change', function () {var $self = $(this);var newSelection = $self.children("option").filter(":selected").text();$self.siblings(".form-select-name").text(newSelection);});var objEven = function (o) {var obj = $(o);this.delayHover = function () {if (/AppleWebKit.*Mobile/i.test(navigator.userAgent) || (/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent))) {if (window.location.href.indexOf("?mobile") < 0) {try {obj = obj.children('a');var rollOverMenuContainer = jQuery("#main-nav-menu-list a.main-nav-item-title");rollOverMenuContainer.each(function (index, ele) {obj.push(ele);});obj.click(function () {var self = jQuery(this);if (self.parent().hasClass('is-active')) {self.parent().removeClass('is-active');} else {self.parent().addClass('is-active').siblings().removeClass('is-active');}return false;});}catch (e) { }}} else {var timerEnter, timerLeave;obj.mouseenter(function (e) {var self = $(this);$('body').unbind('click');if (self.hasClass('is-active')) {if (timerLeave) clearTimeout(timerLeave);} else {timerEnter = setTimeout(function () {self.addClass('is-active').siblings().removeClass('is-active');if (Web.Environment.Browser.isIE() && self.hasClass('flag-dropdown')) {$('#NEGlobal-CountryDropdown').show();$('#NEGlobal-CurrencyDropdown').show();}}, 350);}}).mouseleave(function (e) {var self = $(this);$('body').bind('click', function () {self.removeClass('is-active');if (timerLeave) clearTimeout(timerLeave);$('body').unbind('click');});var timeout = 350;if (self.hasClass('flag-dropdown')) {timeout = 3000;$('#NEGlobal-CountryDropdown').bind('click', function () {window.event.cancelBubble = true;});$('#NEGlobal-CurrencyDropdown').bind('click', function () {window.event.cancelBubble = true;});}if (timerEnter) {clearTimeout(timerEnter);if (self.hasClass('is-active')) {timerLeave = setTimeout(function () {self.removeClass('is-active');$('body').unbind('click');if (Web.Environment.Browser.isIE() && self.hasClass('flag-dropdown')) {$('#NEGlobal-CountryDropdown').hide();$('#NEGlobal-CurrencyDropdown').hide();}}, timeout);}}});}};};var objDelayHover = new objEven('.has-menu, .menu-box, .marketplace-nav');objDelayHover.delayHover();}};})(jQuery);usingNamespace("Web.Template")["LeaderboardBanner2011"] = function () {return {init: function () {NEG.run(function (require) {var $ = require("Utility.jQuery");var switcher = require("Widget.Switch");var tab = document.getElementById('heroModule');var tabItems = $("#heroModule .wrap_banner");var tabTriggers = $("#heroNav li");var ctrl = switcher(tab, {contents: tabItems,interval: 6000,triggers: tabTriggers,autoPlay: true,switchBefor: function () {return true;},switchAfter: function () {var currentIndex = this.activeIndex + 1;var style = $(tab).attr("class");style = style.replace(/show_[0-9]/, "show_" + currentIndex);$(tab).attr("class", style);NEG(tabItems[this.activeIndex]).trigger("Switch_Activate");}});});}};}();usingNamespace("Web.Template")["LeaderBoardBanner2015"] = function () {return {init: function () {var _heroH = jQuery('.hero-left').innerHeight() - jQuery('.hotlinks').outerHeight(true) - jQuery('.hero-bottom').outerHeight(true) - 26;jQuery('.hero-banner').height(_heroH);var autoPlayTimeDif = 6000;var loopflag = true;var swiperSlideCount = jQuery("#heroModule .swiper-slide").length;if (swiperSlideCount == 1) {loopflag = false;}var mySwiper = new Swiper('#heroModule', {loop: loopflag,grabCursor: true,autoPlay: autoPlayTimeDif,paginationAsRange: false,createPagination: false,autoResize: true,resistance: true,onSlideChangeEnd: function () {if (mySwiper) {var originNodesLength = mySwiper.slides.length - 2;var currentIndex = mySwiper.activeIndex < originNodesLength ? mySwiper.activeIndex : mySwiper.activeIndex - originNodesLength;var triggerBanner = mySwiper.slides[currentIndex + 1];if (triggerBanner) { NEG(triggerBanner).trigger("Switch_Activate"); }}}});if (swiperSlideCount == 1) {return;}var isPlay = true;jQuery('#heroModule .swiper-button-prev').click(function (e) {e.preventDefault();mySwiper.swipePrev();});jQuery('#heroModule .swiper-button-next').click(function (e) {e.preventDefault();mySwiper.swipeNext();});function autoPlay() {if (isPlay) {mySwiper.swipeNext();/*force to refresh, to solve flash no view*/}setTimeout(autoPlay, autoPlayTimeDif);}setTimeout(autoPlay, autoPlayTimeDif);/*mouse in*/jQuery('#heroModule').mouseover(function (e) {isPlay = false;});/*mouse out*/jQuery('#heroModule').mouseleave(function (e) {isPlay = true;});}};}();usingNamespace("Web.Template")["LeaderBoardBanner2016"] = function () {return {init: function () {var loopflag = true;var swiperSlideCount = jQuery("#heroModule .swiper-slide").length;if (swiperSlideCount == 1) {loopflag = false;return;}var bannerSwiper = new Swiper('#heroModule', {prevButton: '#heroModule .swiper-button-prev',nextButton: '#heroModule .swiper-button-next',centeredSlides: true,loop: loopflag,preventClicks: false,autoplay: 5000,onSlideChangeStart: function () {this.preventClicks = true;},onSlideChangeEnd: function () {this.preventClicks = false;if (bannerSwiper) {var originNodesLength = bannerSwiper.slides.length - 2;var currentIndex = bannerSwiper.activeIndex < originNodesLength ? bannerSwiper.activeIndex : bannerSwiper.activeIndex - originNodesLength;var triggerBanner = bannerSwiper.slides[currentIndex + 1];if (triggerBanner) { NEG(triggerBanner).trigger("Switch_Activate"); }}},onTouchStart: function () {this.preventClicks = true;},onTouchEnd: function () {this.preventClicks = false;},});jQuery('#heroModule').mouseenter(function () {bannerSwiper.stopAutoplay();}).mouseleave(function () {bannerSwiper.startAutoplay();});jQuery('#heroModule .swiper-button-prev, #heroModule .swiper-button-next').one('click', function () {jQuery('#heroModule').unbind();});}};}();usingNamespace("Web.Template")["NavigationFlyout2016"] = (function () {var succeedProcess = function (data, textStatus) {$leftNavi = jQuery('.left-nav');jQuery(data).each(function (index, el) {var catId = el.id, tmp, $el;tmp = $leftNavi.find('#cat-' + catId);if (!!catId && tmp.length > 0) {tmp.find('.filter-box-label').addClass('main-nav-third-title');$el = tmp[0];$el.innerHTML = "<div class=\"popover-wrap\">" + $el.innerHTML + el.outerHTML + "</div>";$el.classList.add("has-menu");}});jQuery(".left-nav .has-menu").each(function () {var thirdTimer1, thirdTimer2;jQuery(this).mouseenter(function (e) {var self = jQuery(this);jQuery('body').unbind('click');if (self.hasClass('is-active')) {if (thirdTimer2)clearTimeout(thirdTimer2);} else {thirdTimer1 = setTimeout(function () {self.addClass('is-active').siblings().removeClass('is-active');}, 350);}}).mouseleave(function (e) {var self = jQuery(this);jQuery('body').bind('click', function () {self.removeClass('is-active');});if (thirdTimer1) {clearTimeout(thirdTimer1);if (self.hasClass('is-active')) {thirdTimer2 = setTimeout(function () {self.removeClass('is-active');jQuery('body').unbind('click');}, 350);}}});});};return {init: function () {var asyncFlag = jQuery("#flyout-async"), depaID;if (asyncFlag.length == 0) {return;} else {depaID = asyncFlag.text().trim();jQuery.ajax({url: Web.Config.Environment.Url.CDN + "Common/Ajax/StoreNavigation2016.aspx?realId=" + depaID,dataType: "jsonp",cache: true,jsonpCallback: "Web.Template.NavigationFlyout2016.JsonpCallBack"});}},JsonpCallback: function (data, textStatus) {succeedProcess(data, textStatus);}};})();usingNamespace("Web.Template")["NavigationFlyout"] = (function () {var succeedProcess = function (data, textStatus) {var list = [];var idList = [];jQuery(data).find('.main-nav-item-body dd').each(function () {var obj = {};var catId = jQuery(this).children().attr('id');if (catId != null) {if (idList.indexOf(catId) < 0) {obj.id = catId;idList.push(catId);jQuery(this).find('.main-nav-third-body').addClass("at-right");obj.dom = jQuery(this).find('.popover-wrap').html();list.push(obj);}}});var rewriteProcess = function () {for (var key in list) {var id = list[key].id;var dom = list[key].dom;var self = jQuery('#cat_' + id);var link = self.html();if (link != null) {var newDom = "<div class=\"popover-wrap\">" + link + dom + "</div>";self.html(newDom);self.addClass('has-menu');self.find('.popover-wrap').children().siblings("a").addClass("main-nav-third-title");}}};rewriteProcess();jQuery('.categoryList > .has-menu').each(function () {var thirdTimer1, thirdTimer2;jQuery(this).mouseenter(function (e) {var self = jQuery(this);jQuery('body').unbind('click');if (self.hasClass('is-active')) {if (thirdTimer2)clearTimeout(thirdTimer2);} else {thirdTimer1 = setTimeout(function () {self.addClass('is-active').siblings().removeClass('is-active');}, 350);}}).mouseleave(function (e) {var self = jQuery(this);jQuery('body').bind('click', function () {self.removeClass('is-active');});if (thirdTimer1) {clearTimeout(thirdTimer1);if (self.hasClass('is-active')) {thirdTimer2 = setTimeout(function () {self.removeClass('is-active');jQuery('body').unbind('click');}, 350);}}});});};return {init: function () {if (jQuery("#flyout_async").length == 0) {return;} else {var realId = jQuery('#flyout_async').text().trim();jQuery.ajax({url: Web.Config.Environment.Url.CDN + "Common/Ajax/StoreNavigation.aspx?realId=" + realId,dataType: "jsonp",cache: true,jsonpCallback: "Web.Template.NavigationFlyout.JsonpCallBack"});}},JsonpCallBack: function (data, textStatus) {succeedProcess(data, textStatus);}};})();usingNamespace("Biz.Page.Display")["AutoWidthProductCell"] = function () {switch (Biz.Store.ProductCell.type) {case Web.Enum.UI.ProductCell.Type.Normal:Biz.Page.Display.AutoWidthProductCellGeneral();break;case Web.Enum.UI.ProductCell.Type.DVD:Biz.Page.Display.AutoWidthProductCellDVD();break;case Web.Enum.UI.ProductCell.Type.NewLayout:Biz.Page.Display.AutoWidthProductCellNewLayout();break;default:break;};};usingNamespace("Biz.Page.Display")["AutoWidthProductCellNewLayout"] = function () {if (!$("bodyCenterArea")) { return; };if (Web && Web.Config && Web.Config.Environment && Web.Config.Environment.WWWPage&& (Web.Config.Environment.WWWPage.IsDailyDealStore || Web.Config.Environment.WWWPage.IsSubcategory)) {return;}var isProductList = false;var IsNewStoreAndList = false;if (Web && Web.Config && Web.Config.Environment && Web.Config.Environment.WWWPage) {isProductList = Web.Config.Environment.WWWPage.ProductListEnableRightSide;IsNewStoreAndList = Web.Config.Environment.WWWPage.IsNewStoreAndList;}var cell = $("bcaProductCell");if (!cell) { return; };if (cell.className == "productList") { return; };var w = parseInt($("bodyCenterArea").offsetWidth);if (isProductList) {w = parseInt(jQuery("#bodyCenterArea").width());}var ic = Biz.Store.ProductCell.itemCount;if (ic < 3) { return; };var minWrapperWidth = 700;if (isProductList) { minWrapperWidth = 683; }if (IsNewStoreAndList) { minWrapperWidth = 890; }w = (w < minWrapperWidth) ? minWrapperWidth : w;var wrapperWidth = 230;if (isProductList) { wrapperWidth = 226; }if (IsNewStoreAndList) { wrapperWidth = 280; }var cc = Math.floor(w / wrapperWidth);var cellCount = 4;if (IsNewStoreAndList) { cellCount = 3; }var mx = (ic < cellCount) ? ic : cellCount;cc = (cc > mx) ? mx : cc;var cellWidth = 228;if (isProductList) {cellWidth = 220;}if (IsNewStoreAndList) { cellWidth = 286; }var pd = ((w - (cellWidth * cc)) / (cc * 2)) + 'px';var hps;for (var i = 1; i <= ic; ++i) {if (hps = $('cellItem' + i)) {Web.UI.Control.setAttribute(hps, { "style.paddingLeft": pd });if ((i % cc) == 0) {Web.UI.Control.setAttribute(hps, { "style.paddingRight": "0px" });} else {Web.UI.Control.setAttribute(hps, { "style.paddingRight": pd });};};};};usingNamespace("Biz.Page.Display")["AutoWidthProductCellGeneral"] = function () {if (!$("bodyCenterArea")) { return; };var cell = $("bcaProductCell");if (!cell) { cell = $("tabStoreProductCell"); };if (!cell) { return; };var w = parseInt($("bodyCenterArea").offsetWidth);var ic = cell.className.replace(/[^\d]/ig, '') - 0;w = (w < 700) ? 700 : w;var cc = Math.floor(w / 230);var mx = (ic < 4) ? ic : 4;cc = (cc > mx) ? mx : cc;var pd = ((w - (232 * cc)) / (cc * 2)) + 'px';var hps;for (var i = 1; i <= ic; ++i) {if (hps = $('cellItem' + i)) {Web.UI.Control.setAttribute(hps, { "style.paddingLeft": pd });if ((i % cc) == 0) {Web.UI.Control.removeCss(hps, "crb");Web.UI.Control.setAttribute(hps, { "style.paddingRight": "0px" });} else {Web.UI.Control.addCss(hps, "crb");Web.UI.Control.setAttribute(hps, { "style.paddingRight": pd });};};};};usingNamespace("Biz.Page.Display")["AutoWidthProductCellDVD"] = function () {if (!$("bodyCenterArea")) { return; };var ic = [0, 0, 0, 0];var itn = ["ne", "ns", "cs", ""];var hdvd = false;var o, tic = 0;if (o = $("bcaneDVDProductCell")) {ic[0] = o.className.replace(/[^\d]/ig, '') - 0;hdvd = true;o = null;};if (o = $("bcansDVDProductCell")) {ic[1] = o.className.replace(/[^\d]/ig, '') - 0;hdvd = true;o = null;};if (o = $("bcacsDVDProductCell")) {ic[2] = o.className.replace(/[^\d]/ig, '') - 0;hdvd = true;o = null;};if (o = $("bcaDVDProductCell")) {ic[3] = o.className.replace(/[^\d]/ig, '') - 0;hdvd = true;o = null;};if (!hdvd) { return; };for (var i = 0; i < ic.length; ++i) {tic = (tic < ic[i]) ? ic[i] : tic;};var w = parseInt($("bodyCenterArea").offsetWidth);w = (w < 700) ? 700 : w;var cc = Math.floor(w / 230);var mx = (tic < 4) ? ic : 4;cc = (cc > mx) ? mx : cc;var pd = ((w - (230 * cc)) / (cc * 2)) + 'px';var hps;for (var j = 0; j < ic.length; ++j) {for (var i = 1; i <= ic[j]; ++i) {if (hps = $(itn[j] + 'CellItem' + i)) {Web.UI.Control.setAttribute(hps, { "style.display": "" });Web.UI.Control.setAttribute(hps, { "style.paddingLeft": pd });if ((i % cc) == 0) {Web.UI.Control.removeCss(hps, "crb");Web.UI.Control.setAttribute(hps, { "style.paddingRight": "0px" });} else {Web.UI.Control.addCss(hps, "crb");Web.UI.Control.setAttribute(hps, { "style.paddingRight": pd });};};};if (j == 0 && cc == 3 && hps) {Web.UI.Control.setAttribute(hps, { "style.display": "none" });};};};usingNamespace("Biz.Page.Display")["AutoFontSizeForFF"] = function () {var dBody = document.defaultView.getComputedStyle(document.body, null);if (!dBody) {return;}var dSize = dBody.getPropertyValue("font-size");dSize = Number.parse(dSize.replace("/[^\d]/", ""));var lastsize = 0;try {lastsize = Runtime.Page.Display.Parameters.LAST_SIZE;} catch (ex) {lastsize = usingNamespace("Runtime.Page.Display.Parameters")["LAST_SIZE"] = 0;};if (dSize == lastsize) { return; };if (dSize > 10) {if (dSize < 14) {Biz.Page.Display.AutoFontSize.setCss("biggerFontSizeTemplate");} else {Biz.Page.Display.AutoFontSize.setCss("biggestFontSizeTemplate");};} else {Biz.Page.Display.AutoFontSize.clearCss();};Runtime.Page.Display.Parameters.LAST_SIZE = dSize;};usingNamespace("Biz.Page.Display")["AutoFontSizeForIE"] = function () {if (!window.readyState == "complete") { return; };if (!$("ieFontCheck")) { return; };var dSize = $("ieFontCheck").offsetWidth;var lastsize = 0;try {lastsize = Runtime.Page.Display.Parameters.LAST_SIZE;} catch (ex) {lastsize = usingNamespace("Runtime.Page.Display.Parameters")["LAST_SIZE"] = 0;};if (dSize == lastsize) { return; };if (dSize > 7) {if (dSize < 11) {Biz.Page.Display.AutoFontSize.setCss("biggerFontSizeTemplate");} else {Biz.Page.Display.AutoFontSize.setCss("biggestFontSizeTemplate");};} else {Biz.Page.Display.AutoFontSize.clearCss();};Runtime.Page.Display.Parameters.LAST_SIZE = dSize;};usingNamespace("Biz.Page.Display")["AutoFontSize"] = {initialize: function () {window.attachEvent("onload", (function () {Biz.Page.Display.AutoFontSize.process();}));usingNamespace("Runtime.Page.Display.Parameters")["LAST_SIZE"] = 0;},process: function () {if (Web.Environment.Browser.isIE()) {window.setInterval(Biz.Page.Display.AutoFontSizeForIE, 200);} else {window.setInterval(Biz.Page.Display.AutoFontSizeForFF, 200);};},clearCss: function () {Web.UI.Control.clearCss($("rolloverMenu"));Web.UI.Control.clearCss($("blaNavigation"));Web.UI.Control.clearCss($("bodyRightArea"));Web.UI.Control.clearCss($("haInfoBar"));},setCss: function (className) {if (!String.isNullOrEmpty(className)) {Web.UI.Control.setAttribute($("rolloverMenu"), { "className": className });Web.UI.Control.setAttribute($("blaNavigation"), { "className": className });Web.UI.Control.setAttribute($("bodyRightArea"), { "className": className });Web.UI.Control.setAttribute($("haInfoBar"), { "className": className });}},showWarning: function (dSize) {if (!Number.isNumeric(dSize)) { return; };var bfw;var maxSize;if (Web.Environment.Browser.isIE()) {if (Web.Environment.Browser.currentVersion()) {maxSize = (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_8) ? 8 : 11;};} else {maxSize = 15;};if (bfw = $("bigFontWarring")) {if (dSize > maxSize) {Web.UI.Control.setAttribute(bfw, { "style.display": "block" });} else {Web.UI.Control.setAttribute(bfw, { "style.display": "none" });};};}};usingNamespace("Biz.Page.Display")["AutoPositionTabMenu"] = {nsDone: 0,submenuWidth: 166,submenuLeft: -2,adjustSubmenuPosition: function (n) {if (String.isNullOrEmpty(n) || !$(n)) { return; };var apm = Biz.Page.Display.AutoPositionTabMenu;var menu = $(n);apm.ct = 0;apm.submenuWidth = menu.clientWidth;if (Web.Environment.Browser.currentVersion() != Web.Enum.Browser.Netscape_7) {if (!apm.checkWidth(menu)) {if (Web.Environment.Browser.isNetscape()) {apm.fixNetscape(n, menu.clientWidth);var pos = menu.parentNode.offsetLeft - menu.clientWidth + menu.parentNode.clientWidth - apm.submenuLeft;menu.style.left = pos + "px";return;};menu.style.right = "0px";} else {menu.style.right = "";};};},fixNetscape: function (n, lv) {var apm = Biz.Page.Display.AutoPositionTabMenu;var menu = $(n);var wi = menu.clientWidth;var pos = menu.parentNode.offsetLeft - menu.clientWidth + menu.parentNode.clientWidth - apm.submenuLeft;menu.style.left = pos + "px";if (lv > 0) {if (wi == lv) {if (!apm.nsDone) apm.fixNetscape(n, wi);} else {apm.nsDone = 1;};};return;},checkWidth: function (e) {try {var apm = Biz.Page.Display.AutoPositionTabMenu;apm.submenuWidth = e.clientWidth;if (Web.Environment.Browser.isIE()) {return (e.parentNode.offsetLeft - $("container").offsetLeft + apm.submenuWidth + apm.submenuLeft) > $("container").offsetWidth ? false : true;};return (e.parentNode.offsetLeft - $("container").offsetLeft + apm.submenuWidth + apm.submenuLeft) > $("container").clientWidth ? false : true;} catch (er) {return true;};}};usingNamespace("Biz.Page.Display")["WriteBlankIFrame"] = function (name, onload, v, w, h) {var sb = new Sys.Text.StringBuilder();sb.appendLine("<script type=\"text/javascript\">");sb.appendLine("var bh=Web.UI.ResourceManager.Image.build(\"blank.html\");");sb.appendLine("var vd=\"javascript:void(0)\";");sb.appendLine("var ver=10;");sb.appendLine("var ld='" + onload + "';");sb.appendLine("ver=parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf(\"Netscape\")+9));");sb.appendLine("var ifr=\"<iframe src='[@srcstr]' title='ForLayout' frameborder='0' framespacing='0' scrolling='no' border='0' onload='\"+ld+\"' name='" + name + "' style='" + v + "' " + w + h + ">" + Web.Lang.iframeForLayout + "<\/iframe>\";");sb.appendLine("if(Web.Environment.Browser.isNetscape()&&ver<5){");sb.appendLine("document.write(ifr.replace(\"[@srcstr]\",bh));}else{");sb.appendLine("document.write(ifr.replace(\"[@srcstr]\",vd));};");sb.appendLine("<\/script>");document.write(sb.toString());};usingNamespace("Biz.Ajax")["Control"] = {IPager: (function () {this.change = function () { };this.getPageIndex = function () { };this.setPager = function () { };this.init = function () { };this.count;}).registerInterface("Biz.Ajax.Control.IPager"),Pager: (function (uiProvider, pageCount) {var instance = this;var controlers = [];var ui = uiProvider;var jStep = 5;this.UI = ui;this.index = 0;this.count = 0;this.size = 0;var callbackGo = function () { };var callbackGoParam = [];var callbackPrev = function () { };var callbackPrevParam = [];var callbackNext = function () { };var callbackNextParam = [];this.setCallbackGo = function (callback, params) {if (callback) {callbackGo = callback;};if (params) {callbackGoParam = params;};};this.setCallbackPrev = function (callback, params) {if (callback) {callbackPrev = callback;};if (params) {callbackPrevParam = params;};};this.setCallbackNext = function (callback, params) {if (callback) {callbackNext = callback;};if (params) {callbackNextParam = params;};};var _goto = function () {if (instance.index >= instance.count) { return; };ui.change();};this.go = function (t) {if (!t) {i = ui.getPageIndex();instance.index = Object.isNull(i) ? instance.index : i;}_goto();callbackGo.apply(null, callbackGoParam);};this.jumpF = function () {if (!instance.isEnd() && instance.jumpableF()) {instance.index += jStep;_goto();};};this.jumpB = function () {if (!instance.isStart() && instance.jumpableB()) {instance.index -= jStep;_goto();};};this.prev = function () {if (!instance.isStart()) {instance.index--;_goto();callbackPrev.apply(null, callbackPrevParam);};};this.next = function () {if (!instance.isEnd()) {instance.index++;_goto();callbackNext.apply(null, callbackNextParam);};};this.isStart = function () {return (instance.count > 0 && instance.index == 0);};this.isEnd = function () {return (instance.count > 0 && instance.index == instance.count - 1);};this.jumpableF = function () {return ((instance.index + jStep) < instance.count);};this.jumpableB = function () {return (instance.index - jStep) >= 0;};this.addPageControlers = function (n) {if (!Object.isNull(n)) {switch (Object.getTypeName(n)) {case "String":controlers.add($(n));break;case "Array":for (var i = 0; i < n.length; i++) {controlers.add($(n[i]));};break;case "Object":controlers.add(n);break;default:break;};};};ui.setPager(instance);ui.init(pageCount);}).registerClass("Biz.Ajax.Control.Pager"),PagerUIBase: (function (pg) {var container = null;var wuc = Web.UI.Control;var toShort = 8;var shortenFlag = 3;var instance = this;var ahref = " href='javascript:empty()'";var lShorten = function () {return (pg.count - shortenFlag) > 0;};var rShorten = function () {return (pg.index + shortenFlag + 1) < pg.count;};var renderPages = function (sb) {var idx = pg.index + 1;var ct = pg.count;var rel = 4;var t = 2;var e_n = "ui_pager_number";var css = "pageNumber";var appendElement = function (n) {css = "pageNumber";if (n == idx) {sb.append("<span id='active'>" + n + "</span>");} else {sb.append("<a name='" + e_n + "'" + ahref + ">" + n + "</a>");};};if (lShorten()) {if (!rShorten()) {};if ((k = idx - t) > 1) {sb.append("<a name='" + e_n + "'" + ahref + ">1</a>");if (k > 2) {sb.append("...");};};for (var i = idx - t > 0 ? idx - t : 1; i <= idx; i++) {appendElement(i);};} else {for (var i = 1; i <= idx; i++) {appendElement(i);};};if (rShorten()) {if (!lShorten()) {t += rel - idx + 1;};for (var i = idx + 1; i <= idx + t && i <= ct; i++) {appendElement(i);};if ((k = idx + t) < ct) {if (k < ct - 1) {sb.append("...");}sb.append("<a name='" + e_n + "'" + ahref + ">" + ct + "</a>");}} else {for (var i = idx + 1; i <= ct; i++) {appendElement(i);};};};this.setContainer = function (n) {if (!String.isNullOrEmpty(n) && $(n)) {container = $(n);};};this.setObjectContainer = function (n) {container = n;};this.render = function (v) {var iv = "";if (!Object.isNull(v)) {iv = v;};var sb = new Sys.Text.StringBuilder();var e_n_p = "ui_pager_previous";var e_n_n = "ui_pager_next";var e_n_j_f = "ui_pager_jump_forward";var e_n_j_b = "ui_pager_jump_back";if (!pg.isStart()) {sb.append("<a name='" + e_n_p + "'" + ahref + ">" + Web.Lang.prev + "</a>");} else {sb.append("<span class=\"disabled\">" + Web.Lang.prev + "</span>");};renderPages(sb);if (!pg.isEnd()) {sb.append("<a name='" + e_n_n + "'" + ahref + ">" + Web.Lang.next + "</a>");} else {sb.append("<span class=\"disabled\">" + Web.Lang.next + "</span>");};wuc.replaceInnerHTML(container, sb.toString());};}).registerClass("Biz.Ajax.Control.PagerUIBase"),PagerGroup: (function () {var pager_top;var pager_bottom;var pg;var instance = this;var inputValue;this.setContainer = function (n) {if (!Object.isNull(n)) {switch (Object.getTypeName(n)) {case "String":pager_top.setContainer(n);break;case "Array":pager_top.setContainer(n[0]);pager_bottom.setContainer(n[1]);break;case "Object":pager_top.setObjectContainer(n);break;};};};var render = function () {var e_n_p = "ui_pager_previous";var e_n_n = "ui_pager_next";var e_n_j_f = "ui_pager_jump_forward";var e_n_j_b = "ui_pager_jump_back";var e_n = "ui_pager_number";pager_top.render();pager_bottom.render();attachEvents(e_n_p, instance.prev);attachEvents(e_n_n, instance.next);attachEvents(e_n_j_f, instance.jumpF);attachEvents(e_n_j_b, instance.jumpB);attachEvents(e_n, instance.go);attachEvents("ipt_page_num", gotoPage, "onkeyup");attachEvents("btn_go", __go);};var __go = function () {var els = document.getElementsByName("ipt_page_num");var pageNum = -1;if (els) {for (var i = 0; i < els.length; i++) {if ((tn = Number.parse(els[i].value)).toString() !== "NaN" && validateInputNumber(tn)) {pageNum = tn;break;};};};if (pageNum != -1 && pageNum.toString() !== "NaN" && (pageNum - 1) != pg.index) {pg.index = pageNum - 1;inputValue = pageNum;pg.go(true);render();};};var gotoPage = function () {if (event.keyCode == 13) {__go();};};var validateInputNumber = function (n) {return n > 0 && n <= pg.count;};var attachEvents = function (n, f, ev) {var e = "onclick";if (ev) { e = ev; };var els = document.getElementsByName(n);if (els) {for (var i = 0; i < els.length; i++) {els[i].attachEvent(e, f);};};};this.go = function () {pg.go();render();};this.jumpF = function () {pg.jumpF();render();};this.jumpB = function () {pg.jumpB();render();};this.prev = function () {pg.prev();render();};this.next = function () {pg.next();render();};this.setCallbackGo = function (callback, params) {pg.setCallbackGo(callback, params);};this.setCallbackPrev = function (callback, params) {pg.setCallbackPrev(callback, params);};this.setCallbackNext = function (callback, params) {pg.setCallbackNext(callback, params);};this.create = function (ui, pageCount, n) {var provider = new ui();pg = new Biz.Ajax.Control.Pager(provider, pageCount);pager_top = new Biz.Ajax.Control.PagerUIBase(pg);pager_bottom = new Biz.Ajax.Control.PagerUIBase(pg);if (!Object.isNull(n)) {instance.setContainer(n);render();};};}).registerStaticClass("Biz.Ajax.Control.PagerGroup")};usingNamespace("Biz.Ajax")["PagerControl"] = {ui_pager: (function () {var pager;var instance = this;Biz.Ajax.PagerControl.ui_pager.initializeClass(instance, arguments);this.setPager = function (o) {pager = o;};this.init = function (n) {pager.count = n;};this.getPageIndex = function () {if (!Object.isNull(window.event.srcElement.innerHTML)) {return Number.parse(window.event.srcElement.innerHTML) - 1;};return null;};this.change = function () { };}).registerClass("UI.Pager", "", "Biz.Ajax.Control.IPager")};usingNamespace("Biz.Common")["RatingControl"] = {OverallRating: (function (d, b) {var instance = this;var EGGNUMBER = 5;var wuc = Web.UI.Control;var div1;var div2;var hiddenInput;var p;var reverse = b;this.a = new Array(EGGNUMBER);this.img = new Array(EGGNUMBER);this.disimg = new Array(EGGNUMBER);this.eggRating = 0;this.hiddenName = "Rating";this.disable = function (b) {isDisable(b);};var initEnableDiv = function () {div1 = wuc.create("div");for (var i = 0; i < EGGNUMBER; i++) {instance.a[i] = buildElementA(i);instance.img[i] = buildElementImg(i);wuc.appendChild(instance.a[i], instance.img[i]);wuc.appendChild(div1, instance.a[i]);};wuc.appendChild(p, div1);};var initDisableDiv = function () {div2 = wuc.create("div");for (var i = 0; i < EGGNUMBER; i++) {instance.disimg[i] = buildElementDisImg(i);wuc.appendChild(div2, instance.disimg[i]);};wuc.appendChild(p, div2);};var initHiddenInput = function () {hiddenInput = buildElementInput();wuc.appendChild(p, hiddenInput);};var addEvent = function () {for (var i = 0; i < EGGNUMBER; i++) {if (instance.a[i]) {instance.a[i].attachEvent("onclick", setRating);instance.a[i].attachEvent("onmouseover", showRating);instance.a[i].attachEvent("onfocus", showRating);instance.a[i].attachEvent("onmouseout", restoreRating);instance.a[i].attachEvent("onblur", restoreRating);};};};var buildElementA = function (i) {var a = wuc.create("a");wuc.setAttribute(a, { "className": "noline" });wuc.setAttribute(a, { "href": "javascript:void(0);" });wuc.setAttribute(a, { "style.cssFloat": "left" });wuc.setAttribute(a, { "name": reverse ? EGGNUMBER - i : i + 1 });return a;};var buildElementImg = function (i) {var img = wuc.create("img");wuc.setAttribute(img, { "src": Web.UI.ResourceManager.Image.build("whiteegg.gif") });wuc.setAttribute(img, { "title": "rate " + (i + 1) + " star" });wuc.setAttribute(img, { "alt": "rate " + (i + 1) + " star" });wuc.setAttribute(img, { "name": reverse ? EGGNUMBER - i : i + 1 });return img;};var buildElementDisImg = function (i) {var img = wuc.create("img");wuc.setAttribute(img, { "src": Web.UI.ResourceManager.Image.build("whiteegg.gif") });wuc.setAttribute(img, { "title": "rate " + (i + 1) + " star" });wuc.setAttribute(img, { "alt": "rate " + (i + 1) + " star" });wuc.setAttribute(img, { "style.cssFloat": "left" });return img;};var buildElementInput = function () {var input;if (Web.Environment.Browser.isIE()) {input = wuc.create("input");wuc.setAttribute(input, { "type": "hidden" });wuc.setAttribute(input, { "name": "Rating" });} else {input = wuc.create("input");wuc.setAttribute(input, { "type": "hidden" });wuc.setAttribute(input, { "name": instance.hiddenName });}if (reverse) {wuc.setAttribute(input, { "value": instance.eggRating != 0 ? instance.eggRating : EGGNUMBER + 1 });} else {wuc.setAttribute(input, { "value": instance.eggRating });};return input;};var setRating = function () {var n = window.event.srcElement.name;for (var i = 0; i < EGGNUMBER; i++) {instance.img[i].src = i + 1 <= (reverse ? EGGNUMBER + 1 - n : n) ? Web.UI.ResourceManager.Image.build("goldegg.gif") : Web.UI.ResourceManager.Image.build("whiteegg.gif");};hiddenInput.value = n;};var restoreRating = function () {var n = hiddenInput.value;for (var i = 0; i < EGGNUMBER; i++) {instance.img[i].src = i + 1 <= (reverse ? EGGNUMBER + 1 - n : n) ? Web.UI.ResourceManager.Image.build("goldegg.gif") : Web.UI.ResourceManager.Image.build("whiteegg.gif");};};var showRating = function () {var n = window.event.srcElement.name;for (var i = 0; i < EGGNUMBER; i++) {instance.img[i].src = i + 1 <= (reverse ? EGGNUMBER + 1 - n : n) ? Web.UI.ResourceManager.Image.build("goldegg.gif") : Web.UI.ResourceManager.Image.build("whiteegg.gif");};};var showDisEgg = function () {var n = hiddenInput.value;for (var i = 0; i < EGGNUMBER; i++) {instance.disimg[i].src = i + 1 <= (reverse ? EGGNUMBER + 1 - n : n) ? Web.UI.ResourceManager.Image.build("disableegg.gif") : Web.UI.ResourceManager.Image.build("whiteegg.gif");};};var isDisable = function (b) {if (b) {wuc.setAttribute(div1, { "style.display": "none" });wuc.setAttribute(div2, { "style.display": "block" });showDisEgg();} else {wuc.setAttribute(div1, { "style.display": "block" });wuc.setAttribute(div2, { "style.display": "none" });};};this.initRating = function (n) {instance.eggRating = n;hiddenInput.value = n;for (var i = 0; i < EGGNUMBER; i++) {instance.img[i].src = i + 1 <= (reverse ? EGGNUMBER + 1 - n : n) ? Web.UI.ResourceManager.Image.build("goldegg.gif") : Web.UI.ResourceManager.Image.build("whiteegg.gif");};};var init = function () {p = $(d);if (!p) {return;};initEnableDiv();initDisableDiv();initHiddenInput();addEvent();restoreRating();isDisable(false);}();}).registerClass("Biz.Common.RatingControl.OverallRating")};usingNamespace("Web.Template")["TabStoreNav"] = (function () {var usingTabs = false;var timer = 0;var eventTimer = 0;var activeTabs = [];var haNavTabs = [];var displayID = "";this.inital = function () {getHaNavTabs();};this.onmouseOver = function (me) {if (me && me.nodeName == "LI") {var menuCall = function () {mouseOver(me);};clearTimeout(timer);if (usingTabs) {mouseOver(me);}else {timer = setTimeout(menuCall, 500);}}if (eventTimer) clearTimeout(eventTimer);};this.onmouseOut = function (me) {if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {var menuCallIE6 = function () {if (me && me.nodeName == "LI") {closeIE6Menus(me);}};eventTimer = setTimeout(menuCallIE6, 100);} else {eventTimer = setTimeout(closeMenus, 100);}};var mouseOver = function (me) {if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {toggleIE6Menu(me);} else {toggleMenu(me);}};var toggleIE6Menu = function (o) {toggleMenu(o);var f = $("commonIframe");if (f && f.nodeName == "IFRAME") {var c = o.childNodes[1];if (!checkIsEmptyCategory(o)) {var length = haNavTabs.length - 1;var index = o.id.substring(o.id.indexOf("_") + 1);var left = o.offsetLeft;if (index > length / 2) {left = o.offsetLeft + o.offsetWidth + 10 - c.offsetWidth;};Web.UI.Control.setAttribute(f, { "style.display": "block" });Web.UI.Control.setAttribute(f, { "style.position": "absolute" });Web.UI.Control.setAttribute(o, { "style.zIndex": "500" });Web.UI.Control.setAttribute(f, { "style.zIndex": "300" });Web.UI.Control.setAttribute(f, { "style.top": o.offsetTop + o.offsetHeight });Web.UI.Control.setAttribute(f, { "style.left": left });Web.UI.Control.setAttribute(f, { "style.width": c.offsetWidth - 10 });Web.UI.Control.setAttribute(f, { "style.height": c.offsetHeight });Web.UI.Control.setAttribute(f, { "style.filter": "progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)" });} else {Web.UI.Control.setAttribute(f, { "style.width": 0 });Web.UI.Control.setAttribute(f, { "style.height": 0 });Web.UI.Control.setAttribute(f, { "style.display": "none" });};};displayID = o.id;};var toggleMenu = function (m) {usingTabs = true;removeActiveCss();if (!checkIsEmptyCategory(m)) {Web.UI.Control.addCss(m, "activeTab");activeTabs.push(m);}};var closeIE6Menus = function (me) {if (me.id == displayID) {var f = $("commonIframe");if (f && f.nodeName == "IFRAME") { Web.UI.Control.setAttribute(f, { "style.display": "none" }); }};var clearHovers = function () {usingTabs = false;removeActiveCss();};clearTimeout(timer);timer = setTimeout(clearHovers, 300);};var closeMenus = function () {var clearHovers = function () {usingTabs = false;};removeActiveCss();clearTimeout(timer);timer = setTimeout(clearHovers, 500);};var getHaNavTabs = function () {var nodes = $("rolloverMenu").childNodes;for (var i = 0; i < nodes.length; i++) {if (nodes[i].nodeName == "LI") {haNavTabs.push(nodes[i]);}}};var removeActiveCss = function () {for (var i = 0; i < activeTabs.length; i++) {Web.UI.Control.removeCss(activeTabs[i], "activeTab");};activeTabs.clear();};var checkIsEmptyCategory = function (o) {var nodes = o.getElementsByTagName("LI");if (!Object.isNull(nodes) && nodes.length > 0) {return false;} else {return true;};};}).registerStaticClass("Web.Template.TabStoreNav");usingNamespace("Biz.Product")["ReviewPage"] = {changeTabBase: function (style1, style2, style3) {var linkElement = new Array("SummaryViewAll", "SummaryView2W", "SummaryView6M");var allElement = new Array("EGG5AllRate", "EGG5AllVote", "EGG4AllRate", "EGG4AllVote", "EGG3AllRate", "EGG3AllVote", "EGG2AllRate", "EGG2AllVote", "EGG1AllRate", "EGG1AllVote");var l2WElement = new Array("EGG52WRate", "EGG52WVote", "EGG42WRate", "EGG42WVote", "EGG32WRate", "EGG32WVote", "EGG22WRate", "EGG22WVote", "EGG12WRate", "EGG12WVote");var l6MElement = new Array("EGG56MRate", "EGG56MVote", "EGG46MRate", "EGG46MVote", "EGG36MRate", "EGG36MVote", "EGG26MRate", "EGG26MVote", "EGG16MRate", "EGG16MVote");Web.UI.Control.setAttribute($(linkElement[0]), { "style.display": style1 });Web.UI.Control.setAttribute($(linkElement[1]), { "style.display": style2 });Web.UI.Control.setAttribute($(linkElement[2]), { "style.display": style3 });for (i = 0; i < allElement.length; i++) {Web.UI.Control.setAttribute($(allElement[i]), { "style.display": style1 });Web.UI.Control.setAttribute($(l2WElement[i]), { "style.display": style2 });Web.UI.Control.setAttribute($(l6MElement[i]), { "style.display": style3 });};},changeTab: function (type) {if (type == "0") {Biz.Product.ReviewPage.changeTabBase('', 'none', 'none');} else if (type == "1") {Biz.Product.ReviewPage.changeTabBase('none', '', 'none');} else if (type == "2") {Biz.Product.ReviewPage.changeTabBase('none', 'none', '');};document.TopPaginationForm.SummaryType.value = type;if (eval("document.BottomPaginationForm") != null) {document.BottomPaginationForm.SummaryType.value = type;};},filterReviews: function (rv, reset) {var wuf = Web.UI.Form;wuf.setValue("TopPaginationForm", "SelectedRating", rv);wuf.setValue("BottomPaginationForm", "SelectedRating", rv);wuf.setValue("TopPaginationForm", "Keywords", "");wuf.setValue("BottomPaginationForm", "Keywords", "");var sv = Number.parse(wuf.getValue("TopPaginationForm", "SortField"));if (sv == 2 || sv == 3) {wuf.setValue("TopPaginationForm", "SortField", "0");wuf.setValue("BottomPaginationForm", "SortField", "0");};if (reset) {wuf.setValue("TopPaginationForm", "SummaryType", "0");wuf.setValue("BottomPaginationForm", "SummaryType", "0");};wuf.submit("TopPaginationForm");},pageInputBlurHandler: function () {var el = window.event.srcElement;if (el) {var resetInput = function () {el.value = Biz.Product.Config.currentPage;var span = el.parentNode.getElementsByTagName("span")[0];Web.UI.Control.removeCss(span, "enabled");Web.UI.Control.addCss(span, "disabled");};setTimeout(resetInput, 500);};},pageInputKeyupHandler: function () {var el = window.event.srcElement;if (el) {var span = el.parentNode.getElementsByTagName("span")[0];Web.UI.Control.removeCss(span, "disabled");Web.UI.Control.addCss(span, "enabled");var totalPage = el.parentNode.getElementsByTagName("input")[1];if (parseInt(el.value) > parseInt(totalPage.value)) {el.value = totalPage.value;};};},pageInputFocusHandler: function () {var el = window.event.srcElement;if (el) {el.value = "";};},attachPageInputEvents: function (frmTop, frmBottom) {var frmPageTop = Web.UI.Form.getElement(frmTop, "Page");var frmPageBottom = Web.UI.Form.getElement(frmBottom, "Page");if (frmPageTop) {frmPageTop.attachEvent("onblur", Biz.Product.ReviewPage.pageInputBlurHandler);frmPageTop.attachEvent("onkeyup", Biz.Product.ReviewPage.pageInputKeyupHandler);frmPageTop.attachEvent("onfocus", Biz.Product.ReviewPage.pageInputFocusHandler);};if (frmPageBottom) {frmPageBottom.attachEvent("onblur", Biz.Product.ReviewPage.pageInputBlurHandler);frmPageBottom.attachEvent("onkeyup", Biz.Product.ReviewPage.pageInputKeyupHandler);frmPageBottom.attachEvent("onfocus", Biz.Product.ReviewPage.pageInputFocusHandler);};},initalPageNumber: function () {var pageNumber = Biz.Product.Config.currentPage;var pages = document.getElementsByTagName("input");if (pages) {for (var i = 0; i < pages.length; i++) {if (pages[i].id.indexOf("PageNumber_") > -1) {pages[i].value = pageNumber;};};};}};usingNamespace("Biz.Common")["Viewport"] = {top: function () {return window.pageYOffset|| document.documentElement && document.documentElement.scrollTop|| document.body.scrollTop;},height: function () {return window.innerHeight|| document.documentElement && document.documentElement.clientHeight|| document.body.clientHeight;},left: function () {return window.pageXOffset|| document.documentElement && document.documentElement.scrollLeft|| document.body.scrollLeft;},width: function () {return window.innerWidth|| document.documentElement && document.documentElement.clientWidth|| document.body.clientWidth;},right: function () {return Biz.Common.Viewport.left() + Biz.Common.Viewport.width();},bottom: function () {return Biz.Common.Viewport.top() + Biz.Common.Viewport.height();}};usingNamespace("Biz.Common")["Window1"] = {loading: function () {var wuc = Web.UI.Control;var vp = Biz.Common.Viewport;var body = document.getElementsByTagName("body")[0];wuc.addCss(body, "loading");var box = $("modal");wuc.setAttribute(box, { "style.left": "50%" });wuc.setAttribute(box, { "style.top": vp.top() + (vp.height() / 2) + "px" });if (Web.Environment.Browser.isIE()) {wuc.setAttribute(box, { "style.height": "2em" });} else {wuc.setAttribute(box, { "style.height": "1em" });}wuc.setAttribute(box, { "style.minHeight": "1em" });wuc.setAttribute(box, { "style.width": "150px" });wuc.setAttribute(box, { "style.marginLeft": "-75px" });wuc.setAttribute(box, { "style.marginTop": "-20px" });wuc.setAttribute(box, { "style.textAlign": "center" });var childs = box.childNodes;for (var i = 0; i < childs.length; i++) {if (!Object.isNull(childs[i].className) && childs[i].className.indexOf("atnIcon") > -1) {wuc.setAttribute(childs[i], { "style.display": "none" });};if (!Object.isNull(childs[i].className) && childs[i].className.indexOf("content") > -1) {childs[i].innerHTML = "<img src=\"" + Web.UI.ResourceManager.Image.build('loading16.gif') + "\" style=\"vertical-align:middle;\"> " + Web.Lang.loading;};};wuc.setAttribute($("overlay"), { "style.display": "block" });if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {wuc.setAttribute($("overlay"), { "style.height": (body.scrollHeight + 50) + "px" });wuc.setAttribute($("overlay"), { "style.width": (body.scrollWidth) + "px" });$("overlay").innerHTML = "<iframe style='position:absolute;width:100%;height:100%;_filter:alpha(opacity=0);opacity=0;border-style:none;'></iframe>";};wuc.setAttribute(box, { "style.display": "block" });jQuery('#overlay').unbind('click');}};usingNamespace("Biz.Common")["AntiPrice"] = {validator: function () {var wuc = Web.UI.Control;var vp = Biz.Common.Viewport;var body = document.getElementsByTagName("body")[0];var box = $("verification");wuc.setAttribute(box, { "style.left": "50%" });wuc.setAttribute(box, { "style.top": vp.top() + (vp.height() / 2) + "px" });if (Web.Environment.Browser.isIE()) {wuc.setAttribute(box, { "style.height": "15em" });} else {wuc.setAttribute(box, { "style.height": "15em" });}wuc.setAttribute(box, { "style.minHeight": "15em" });wuc.setAttribute(box, { "style.width": "350px" });wuc.setAttribute(box, { "style.marginLeft": "-175px" });wuc.setAttribute(box, { "style.marginTop": "-100px" });wuc.setAttribute(box, { "style.textAlign": "center" });wuc.setAttribute($("overlay"), { "style.display": "block" });if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {wuc.setAttribute($("overlay"), { "style.height": (body.scrollHeight + 50) + "px" });wuc.setAttribute($("overlay"), { "style.width": (body.scrollWidth) + "px" });$("overlay").innerHTML = "<iframe style='position:absolute;width:100%;height:100%;_filter:alpha(opacity=0);opacity=0;border-style:none;'></iframe>";};wuc.setAttribute(box, { "style.display": "block" });Biz.Common.AntiPrice.getCaptchaImage();var extraFields = Biz.Common.AntiPriceVar.serverName + "-_-";var utmaValue = Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.UTMA);if (!String.isNullOrEmpty(utmaValue)) {extraFields += utmaValue;};var nvtcValue = Web.StateManager.Cookies.get(Web.StateManager.Cookies.Name.NVTC);if (!String.isNullOrEmpty(nvtcValue)) {extraFields += "-_-";extraFields += nvtcValue;};cmCreatePageviewTag("Click Price Link", "AntiPriceTrack", null, null, Biz.Common.AntiPriceVar.serverName, null, extraFields);},close: function () {var wuc = Web.UI.Control;wuc.setAttribute($("verification"), { "style.display": "none" });wuc.setAttribute($("overlay"), { "style.display": "none" });if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {$("overlay").innerHTML = "";};},xml: null,QUERYURLPATH: "Common/AJAX/ValidateCode.aspx",changeValidateImage: function (el) {if (Web.Utility.isRequestSucceeded(el)) {var json = Object.fromJSON(el.responseText);if (json) {var imgCode = $("imgValidCode");if (imgCode) {imgCode.src = json.newegg.imageUrl;};var captchaGuid = json.newegg.captchaGuid.toString();Web.StateManager.Cookies.save(Web.StateManager.Cookies.Name.ANTIPRICE, { "CaptchaGuid": captchaGuid });};};},getCaptchaImage: function () {if (this.xml) {this.xml.abort();};var qsb = new Web.QueryStringBuilder();qsb.add("rdm", (new Date()).toString().encodeURI());var url = Web.UI.ResourceManager.Url.combine(Web.UI.ResourceManager.Url.build(this.QUERYURLPATH), qsb.toString());this.xml = Web.Network.createRequest(Web.Enum.Network.Request.Type.XML,url,"",Biz.Common.AntiPrice.changeValidateImage,Web.Enum.Network.Request.Method.Get);this.xml.execute();}};function empty() { };function activateMe(lnk) {jQuery(lnk).parents('ul').find('.active').toggleClass('active');jQuery(lnk).attr('class', 'active');return false;};usingNamespace("Biz.Page.Display")["AutoStoreLayout2011"] = {init: function () {var t = Biz.Page.Display.AutoStoreLayout2011;jQuery(window).resize(function () { t.adjustGrid(); });t.adjustGrid();},adjustGrid: function () {var c = jQuery("#container").width();var w = jQuery("#bodyCenterArea").width();if (w < 919) { jQuery("#bodyGrid").attr('class', 'grid3'); return; }if (w < 1150) { jQuery("#bodyGrid").attr('class', 'grid4'); return; }if (w >= 1380) { jQuery("#bodyGrid").attr('class', 'grid6'); return; }jQuery("#bodyGrid").attr('class', 'grid5');return;}};usingNamespace("Biz.Common")["ProcessImage"] = {ironEggReplaceSrc: function (o) {if (String.isNullOrEmpty(this.replaceSrc) || String.isNullOrEmpty(this.targetSrc)) {return;};if (Web.Environment.Browser.currentVersion() == Web.Enum.Browser.IE_6) {var imgArray = new Array();if (o && o.getElementsByTagName) {imgArray = o.getElementsByTagName("img");}else {imgArray = document.getElementsByTagName("img");}var length = imgArray.length;for (var i = 0; i < length; i++) {if (imgArray[i].src) {if (imgArray[i].src == this.replaceSrc) {imgArray[i].src = this.targetSrc;}};};imgArray = null;};},replaceSrc: "",targetSrc: ""};