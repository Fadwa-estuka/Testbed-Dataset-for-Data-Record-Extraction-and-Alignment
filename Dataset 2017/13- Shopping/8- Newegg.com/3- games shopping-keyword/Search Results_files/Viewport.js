NEG.Module("NEG.Widget.Viewport",function(){var e={FIRSTIN:"FIRSTIN"+(new Date).getTime(),IN:"IN"+(new Date).getTime(),BOTTOM:"BOTTOM"+(new Date).getTime(),RIGHT:"RIGHT"+(new Date).getTime()},f={CHANGE:"CHANGE"+(new Date).getTime(),CHANGED:"CHANGED"+(new Date).getTime()},i={FIRSTIN:function(b,a){return function(){NEG(this).off(e.FIRSTIN);a.call(this)}}},g={getViewport:function(){var b=/css.compat/i.test(document.compatMode)?document.documentElement:document.body,a=0<document.documentElement.scrollTop?
document.documentElement:document.body;return{width:b.clientWidth,height:b.clientHeight,top:a.scrollTop,right:a.scrollLeft+b.clientWidth,bottom:a.scrollTop+b.clientHeight,left:a.scrollLeft}},offset:function(b){var a=document.body.getBoundingClientRect(),c=b.getBoundingClientRect();return{top:Math.abs(a.top-c.top),right:Math.abs(a.left-c.left)+b.offsetWidth,bottom:Math.abs(a.top-c.top)+b.offsetHeight,left:Math.abs(a.left-c.left)}}},h={bindScroll:function(){var b,a=function(){b&&clearTimeout(b);b=setTimeout(function(){NEG.trigger(f.CHANGE,
g.getViewport());NEG.trigger(f.CHANGED)},300)};NEG(document).on("scroll",a);NEG(window).on("scroll",a);NEG(window).on("resize",a)},bindChange:function(b){NEG(b).on(f.CHANGE,function(){var a=g.getViewport(),c=g.offset(this),b=c.top>a.top&&c.bottom<a.bottom,f=c.top<a.bottom&&c.bottom>a.bottom,d=c.top+this.offsetHeight>a.bottom&&c.top<a.top;if(c.top<a.top&&c.bottom>a.top||b||f||d)NEG(this).trigger(e.FIRSTIN),NEG(this).trigger(e.IN);c.bottom<a.bottom&&c.bottom>a.top&&NEG(this).trigger(e.BOTTOM);c.right<
a.right&&c.right>a.left&&NEG(this).trigger(e.RIGHT)})}},d=function(b){if(!(this instanceof d))return new d(b);NEG.domReady(function(){h.bindScroll(b);h.bindChange(b)});this.on=function(a,c){if(e[a]){var d=i[a],c=d?d(b,c):c;NEG(b).on(e[a],c)}if(f[a])NEG.on(f[a],c)}};return d});
